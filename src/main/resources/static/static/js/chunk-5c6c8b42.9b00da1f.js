(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c6c8b42"],{"09bf":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-research/"+t,method:"get"})}},"0e8d":function(t,e,n){},1:function(t,e){},1488:function(t,e,n){},"1d7f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/principal/"+t,method:"get"})}},2:function(t,e){},"22da":function(t,e){tinymce.addI18n("zh_CN",{Redo:"重做",Undo:"撤销",Cut:"剪切",Copy:"复制",Paste:"粘贴","Select all":"全选","New document":"新文件",Ok:"确定",Cancel:"取消","Visual aids":"网格线",Bold:"粗体",Italic:"斜体",Underline:"下划线",Strikethrough:"删除线",Superscript:"上标",Subscript:"下标","Clear formatting":"清除格式","Align left":"左边对齐","Align center":"中间对齐","Align right":"右边对齐",Justify:"两端对齐","Bullet list":"项目符号","Numbered list":"编号列表","Decrease indent":"减少缩进","Increase indent":"增加缩进",Close:"关闭",Formats:"格式","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",Headers:"标题","Header 1":"标题1","Header 2":"标题2","Header 3":"标题3","Header 4":"标题4","Header 5":"标题5","Header 6":"标题6",Headings:"标题","Heading 1":"标题1","Heading 2":"标题2","Heading 3":"标题3","Heading 4":"标题4","Heading 5":"标题5","Heading 6":"标题6",Preformatted:"预先格式化的",Div:"Div",Pre:"Pre",Code:"代码",Paragraph:"段落",Blockquote:"引文区块",Inline:"文本",Blocks:"基块","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Fonts:"字体","Font Sizes":"字号",Class:"类型","Browse for an image":"浏览图像",OR:"或","Drop an image here":"拖放一张图像至此",Upload:"上传",Block:"块",Align:"对齐",Default:"默认",Circle:"空心圆",Disc:"实心圆",Square:"方块","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马字母","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Anchor...":"锚点...",Name:"名称",Id:"标识符","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character...":"特殊字符...","Source code":"源代码","Insert/Edit code sample":"插入/编辑代码示例",Language:"语言","Code sample...":"示例代码...","Color Picker":"选色器",R:"R",G:"G",B:"B","Left to right":"从左到右","Right to left":"从右到左","Emoticons...":"表情符号...","Metadata and Document Properties":"元数据和文档属性",Title:"标题",Keywords:"关键词",Description:"描述",Robots:"机器人",Author:"作者",Encoding:"编码",Fullscreen:"全屏",Action:"操作",Shortcut:"快捷键",Help:"帮助",Address:"地址","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏","Focus to element path":"移动焦点到元素路径","Focus to contextual toolbar":"移动焦点到上下文菜单","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Save (if save plugin activated)":"保存(如果保存插件已激活)","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Plugins installed ({0}):":"已安装插件 ({0}):","Premium plugins:":"优秀插件：","Learn more...":"了解更多...","You are using {0}":"你正在使用 {0}",Plugins:"插件","Handy Shortcuts":"快捷键","Horizontal line":"水平分割线","Insert/edit image":"插入/编辑图片","Image description":"图片描述",Source:"地址",Dimensions:"大小","Constrain proportions":"保持纵横比",General:"普通",Advanced:"高级",Style:"样式","Vertical space":"垂直边距","Horizontal space":"水平边距",Border:"边框","Insert image":"插入图片","Image...":"图片...","Image list":"图片列表","Rotate counterclockwise":"逆时针旋转","Rotate clockwise":"顺时针旋转","Flip vertically":"垂直翻转","Flip horizontally":"水平翻转","Edit image":"编辑图片","Image options":"图片选项","Zoom in":"放大","Zoom out":"缩小",Crop:"裁剪",Resize:"调整大小",Orientation:"方向",Brightness:"亮度",Sharpen:"锐化",Contrast:"对比度","Color levels":"颜色层次",Gamma:"伽马值",Invert:"反转",Apply:"应用",Back:"后退","Insert date/time":"插入日期/时间","Date/time":"日期/时间","Insert/Edit Link":"插入/编辑链接","Insert/edit link":"插入/编辑链接","Text to display":"显示文字",Url:"地址","Open link in...":"链接打开位置...","Current window":"当前窗口",None:"无","New window":"在新窗口打开","Remove link":"删除链接",Anchors:"锚点","Link...":"链接...","Paste or type a link":"粘贴或输入链接","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Link list":"链接列表","Insert video":"插入视频","Insert/edit video":"插入/编辑视频","Insert/edit media":"插入/编辑媒体","Alternative source":"镜像","Alternative source URL":"替代来源网址","Media poster (Image URL)":"封面(图片地址)","Paste your embed code below:":"将内嵌代码粘贴在下面:",Embed:"内嵌","Media...":"多媒体...","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览","Print...":"打印...",Save:"保存",Find:"查找","Replace with":"替换为",Replace:"替换","Replace all":"全部替换",Previous:"上一个",Next:"下一个","Find and replace...":"查找并替换...","Could not find the specified string.":"未找到搜索内容.","Match case":"区分大小写","Find whole words only":"全字匹配","Spell check":"拼写检查",Ignore:"忽略","Ignore all":"全部忽略",Finish:"完成","Add to Dictionary":"添加到字典","Insert table":"插入表格","Table properties":"表格属性","Delete table":"删除表格",Cell:"单元格",Row:"行",Column:"列","Cell properties":"单元格属性","Merge cells":"合并单元格","Split cell":"拆分单元格","Insert row before":"在上方插入","Insert row after":"在下方插入","Delete row":"删除行","Row properties":"行属性","Cut row":"剪切行","Copy row":"复制行","Paste row before":"粘贴到上方","Paste row after":"粘贴到下方","Insert column before":"在左侧插入","Insert column after":"在右侧插入","Delete column":"删除列",Cols:"列",Rows:"行",Width:"宽",Height:"高","Cell spacing":"单元格外间距","Cell padding":"单元格内边距","Show caption":"显示标题",Left:"左对齐",Center:"居中",Right:"右对齐","Cell type":"单元格类型",Scope:"范围",Alignment:"对齐方式","H Align":"水平对齐","V Align":"垂直对齐",Top:"顶部对齐",Middle:"垂直居中",Bottom:"底部对齐","Header cell":"表头单元格","Row group":"行组","Column group":"列组","Row type":"行类型",Header:"表头",Body:"表体",Footer:"表尾","Border color":"边框颜色","Insert template...":"插入模板...",Templates:"模板",Template:"模板","Text color":"文字颜色","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Remove color":"移除颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Word count":"字数",Count:"计数",Document:"文档",Selection:"选择",Words:"单词","Words: {0}":"字数：{0}","{0} words":"{0} 字",File:"文件",Edit:"编辑",Insert:"插入",View:"视图",Format:"格式",Table:"表格",Tools:"工具","Powered by {0}":"由{0}驱动","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助","Image title":"图片标题","Border width":"边框宽度","Border style":"边框样式",Error:"错误",Warn:"警告",Valid:"有效","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","System Font":"系统字体","Failed to upload image: {0}":"图片上传失败: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to initialize plugin: {0}":"插件初始化失败: {0}",example:"示例",Search:"搜索",All:"全部",Currency:"货币",Text:"文字",Quotations:"引用",Mathematical:"数学","Extended Latin":"拉丁语扩充",Symbols:"符号",Arrows:"箭头","User Defined":"自定义","dollar sign":"美元符号","currency sign":"货币符号","euro-currency sign":"欧元符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","french franc sign":"法郎符号","lira sign":"里拉符号","mill sign":"密尔符号","naira sign":"奈拉符号","peseta sign":"比塞塔符号","rupee sign":"卢比符号","won sign":"韩元符号","new sheqel sign":"新谢克尔符号","dong sign":"越南盾符号","kip sign":"老挝基普符号","tugrik sign":"图格里克符号","drachma sign":"德拉克马符号","german penny symbol":"德国便士符号","peso sign":"比索符号","guarani sign":"瓜拉尼符号","austral sign":"澳元符号","hryvnia sign":"格里夫尼亚符号","cedi sign":"塞地符号","livre tournois sign":"里弗弗尔符号","spesmilo sign":"spesmilo符号","tenge sign":"坚戈符号","indian rupee sign":"印度卢比","turkish lira sign":"土耳其里拉","nordic mark sign":"北欧马克","manat sign":"马纳特符号","ruble sign":"卢布符号","yen character":"日元字样","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","yen/yuan character variant one":"元字样（大写）","Loading emoticons...":"加载表情符号...","Could not load emoticons":"不能加载表情符号",People:"人类","Animals and Nature":"动物和自然","Food and Drink":"食物和饮品",Activity:"活动","Travel and Places":"旅游和地点",Objects:"物件",Flags:"旗帜",Characters:"字符","Characters (no spaces)":"字符(无空格)","{0} characters":"{0} 个字符","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。",Update:"更新","Color swatch":"颜色样本",Turquoise:"青绿色",Green:"绿色",Blue:"蓝色",Purple:"紫色","Navy Blue":"海军蓝","Dark Turquoise":"深蓝绿色","Dark Green":"深绿色","Medium Blue":"中蓝色","Medium Purple":"中紫色","Midnight Blue":"深蓝色",Yellow:"黄色",Orange:"橙色",Red:"红色","Light Gray":"浅灰色",Gray:"灰色","Dark Yellow":"暗黄色","Dark Orange":"深橙色","Dark Red":"深红色","Medium Gray":"中灰色","Dark Gray":"深灰色","Light Green":"浅绿色","Light Yellow":"浅黄色","Light Red":"浅红色","Light Purple":"浅紫色","Light Blue":"浅蓝色","Dark Purple":"深紫色","Dark Blue":"深蓝色",Black:"黑色",White:"白色","Switch to or from fullscreen mode":"切换全屏模式","Open help dialog":"打开帮助对话框",history:"历史",styles:"样式",formatting:"格式化",alignment:"对齐",indentation:"缩进","permanent pen":"记号笔",comments:"备注","Format Painter":"格式刷","Insert/edit iframe":"插入/编辑框架",Capitalization:"大写",lowercase:"小写",UPPERCASE:"大写","Title Case":"首字母大写","Permanent Pen Properties":"永久笔属性","Permanent pen properties...":"永久笔属性...",Font:"字体",Size:"字号","More...":"更多...","Spellcheck Language":"拼写检查语言","Select...":"选择...",Preferences:"首选项",Yes:"是",No:"否","Keyboard Navigation":"键盘指引",Version:"版本",Anchor:"锚点","Special character":"特殊符号","Code sample":"代码示例",Color:"颜色",Emoticons:"表情","Document properties":"文档属性",Image:"图片","Insert link":"插入链接",Target:"打开方式",Link:"链接",Poster:"封面",Media:"媒体",Print:"打印",Prev:"上一个","Find and replace":"查找和替换","Whole words":"全字匹配",Spellcheck:"拼写检查",Caption:"标题","Insert template":"插入模板"})},2411:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/practical-teaching/"+t,method:"get"})}},"254d":function(t,e,n){},"2a3c":function(t,e,n){"use strict";n("254d")},"2caa":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",[n("el-steps",{attrs:{active:t.active,"align-center":""}},[n("el-step",{attrs:{description:"备案表基本信息"},nativeOn:{click:function(e){return t.handleStep(0)}}}),n("el-step",{attrs:{description:"负责人情况"},nativeOn:{click:function(e){return t.handleStep(1)}}}),n("el-step",{attrs:{description:"成员概况"},nativeOn:{click:function(e){return t.handleStep(2)}}}),n("el-step",{attrs:{description:"规章制度建设和队伍建设"},nativeOn:{click:function(e){return t.handleStep(3)}}}),n("el-step",{attrs:{description:"教学组织和课程教材概述"},nativeOn:{click:function(e){return t.handleStep(4)}}}),n("el-step",{attrs:{description:"教学研究和专业建设"},nativeOn:{click:function(e){return t.handleStep(5)}}}),n("el-step",{attrs:{description:"实践教学和条件保障"},nativeOn:{click:function(e){return t.handleStep(6)}}}),n("el-step",{attrs:{description:"人才培养能力"},nativeOn:{click:function(e){return t.handleStep(7)}}}),n("el-step",{attrs:{description:"今后建设计划"},nativeOn:{click:function(e){return t.handleStep(8)}}})],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active == 0"}]},[n("el-form",{attrs:{model:t.form.info}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("备案表基本信息")])])]),n("div",{staticClass:"div-style"},[n("el-row",{staticClass:"row-style",attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"教学组织名称"}},[n("el-autocomplete",{staticStyle:{width:"250px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.form.info.organization,callback:function(e){t.$set(t.form.info,"organization",e)},expression:"form.info.organization"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"基层教学组织类型"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.type,callback:function(e){t.$set(t.form.info,"type",e)},expression:"form.info.type"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属学院"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.info.college,callback:function(e){t.$set(t.form.info,"college",e)},expression:"form.info.college"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"负责人"}},[n("el-input",{model:{value:t.form.info.principal,callback:function(e){t.$set(t.form.info,"principal",e)},expression:"form.info.principal"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"基层教学组织级别"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.level,callback:function(e){t.$set(t.form.info,"level",e)},expression:"form.info.level"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},model:{value:t.form.info.professionalTitle,callback:function(e){t.$set(t.form.info,"professionalTitle",e)},expression:"form.info.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"设立时间/年"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.createYear,callback:function(e){t.$set(t.form.info,"createYear",e)},expression:"form.info.createYear"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"负责人工号"}},[n("el-input",{model:{value:t.form.info.principalNumber,callback:function(e){t.$set(t.form.info,"principalNumber",e)},expression:"form.info.principalNumber"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"面向专业个数"}},[n("el-select",{model:{value:t.form.info.faceMultiple,callback:function(e){t.$set(t.form.info,"faceMultiple",e)},expression:"form.info.faceMultiple"}},[n("el-option",{attrs:{label:"0",value:"0"}}),n("el-option",{attrs:{label:"1",value:"1"}}),n("el-option",{attrs:{label:"2",value:"2"}}),n("el-option",{attrs:{label:"3",value:"3"}}),n("el-option",{attrs:{label:"4",value:"4"}}),n("el-option",{attrs:{label:"5",value:"5"}}),n("el-option",{attrs:{label:"6",value:"6"}}),n("el-option",{attrs:{label:"7",value:"7"}}),n("el-option",{attrs:{label:"8",value:"8"}}),n("el-option",{attrs:{label:"9",value:"9"}}),n("el-option",{attrs:{label:"10",value:"10"}})],1)],1)],1)],1),n("el-form",[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"面向校内专业(大类)名称,比例填写"}}),n("el-table",{attrs:{data:t.form.info.faceSchoolMajors}},[n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitles",label:"面向校内专业(大类)名称"}}),n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitlesCode",label:"面向校内专业代码(大类)"}}),n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitlesProporation",label:"面向校内专业比例"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.editFaceSchoolMajor(e.row,e.$index)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteFaceSchoolMajor(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1),n("el-dialog",{attrs:{visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"面向校内专业(大类)名称"}},[n("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchInfo,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.handleSelectInfo},model:{value:t.tempData.schoolOrientedProfessionalTitles,callback:function(e){t.$set(t.tempData,"schoolOrientedProfessionalTitles",e)},expression:"tempData.schoolOrientedProfessionalTitles"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"面向校内专业代码(大类)"}},[n("el-input",{attrs:{disabled:""},model:{value:t.tempData.schoolOrientedProfessionalTitlesCode,callback:function(e){t.$set(t.tempData,"schoolOrientedProfessionalTitlesCode",e)},expression:"tempData.schoolOrientedProfessionalTitlesCode"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"面向校内专业比例"}},[n("el-slider",{staticStyle:{"margin-top":"20%","margin-right":"10%"},attrs:{min:1},model:{value:t.tempData.schoolOrientedProfessionalTitlesProporation,callback:function(e){t.$set(t.tempData,"schoolOrientedProfessionalTitlesProporation",e)},expression:"\n                      tempData.schoolOrientedProfessionalTitlesProporation\n                    "}})],1)],1)],1)],1),t.flag?n("el-button",{staticStyle:{"margin-left":"40%"},on:{click:t.confirmUpdate}},[t._v("确认修改")]):t._e()],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}]},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-form",[n("Principal",{ref:"principal",attrs:{principalID:this.form.principalID},on:{getPrincipalID:function(e){return t.getPrincipalID(e)}},model:{value:this.form.principalID,callback:function(e){t.$set(this.form,"principalID",e)},expression:"this.form.principalID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1)],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:2==t.active,expression:"active == 2"}]},[n("Members",{ref:"members",attrs:{membersID:this.form.membersID},on:{getMembersID:function(e){return t.getMembersID(e)}},model:{value:this.form.membersID,callback:function(e){t.$set(this.form,"membersID",e)},expression:"this.form.membersID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:3==t.active,expression:"active == 3"}]},[n("Rules",{ref:"rules",attrs:{ruleAndRegulationID:this.form.ruleAndRegulationID},on:{getRulesID:function(e){return t.getRulesID(e)}},model:{value:this.form.ruleAndRegulationID,callback:function(e){t.$set(this.form,"ruleAndRegulationID",e)},expression:"this.form.ruleAndRegulationID"}}),n("Team",{ref:"teambuilding",attrs:{teamBuildingID:this.form.teamBuildingID},on:{getTeamBuildingID:function(e){return t.getTeamBuildingID(e)}},model:{value:this.form.teamBuildingID,callback:function(e){t.$set(this.form,"teamBuildingID",e)},expression:"this.form.teamBuildingID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:4==t.active,expression:"active == 4"}]},[n("Organization",{ref:"organization",attrs:{teachingOrganizationID:this.form.teachingOrganizationID},on:{getOrganizationID:function(e){return t.getOrganizationID(e)}},model:{value:this.form.teachingOrganizationID,callback:function(e){t.$set(this.form,"teachingOrganizationID",e)},expression:"this.form.teachingOrganizationID"}}),n("CourseMaterial",{ref:"coursematerial",attrs:{courseMaterialID:this.form.courseMaterialID},on:{getCourseMaterialID:function(e){return t.getCourseMaterialID(e)}},model:{value:this.form.courseMaterialID,callback:function(e){t.$set(this.form,"courseMaterialID",e)},expression:"this.form.courseMaterialID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:5==t.active,expression:"active == 5"}]},[n("TeachingResearch",{ref:"teachingresearch",attrs:{teachingResearchID:this.form.teachingResearchID},on:{getTeachingResearchID:function(e){return t.getTeachingResearchID(e)}},model:{value:this.form.teachingResearchID,callback:function(e){t.$set(this.form,"teachingResearchID",e)},expression:"this.form.teachingResearchID"}}),n("SpecialtyConstruction",{ref:"specialtyconstruction",attrs:{specialtyConstructionID:this.form.specialtyConstructionID},on:{getSpecialtyConstructionID:function(e){return t.getSpecialtyConstructionID(e)}},model:{value:this.form.specialtyConstructionID,callback:function(e){t.$set(this.form,"specialtyConstructionID",e)},expression:"this.form.specialtyConstructionID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:6==t.active,expression:"active == 6"}]},[n("PracticalTeaching",{ref:"practicalteaching",attrs:{practicalTeachingID:this.form.practicalTeachingID},on:{getPracticalTeachingID:function(e){return t.getPracticalTeachingID(e)}},model:{value:this.form.practicalTeachingID,callback:function(e){t.$set(this.form,"practicalTeachingID",e)},expression:"this.form.practicalTeachingID"}}),n("ConditionGuarantee",{ref:"conditionguarantee",attrs:{conditionGuaranteeID:this.form.conditionGuaranteeID},on:{getConditionGuaranteeID:function(e){return t.getConditionGuaranteeID(e)}},model:{value:this.form.conditionGuaranteeID,callback:function(e){t.$set(this.form,"conditionGuaranteeID",e)},expression:"this.form.conditionGuaranteeID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:7==t.active,expression:"active == 7"}]},[n("TalentCultivationAbility",{ref:"talentcultivationability",attrs:{talentCultivationAbilityID:this.form.talentCultivationAbilityID},on:{getTalentCultivationAbilityID:function(e){return t.getTalentCultivationAbilityID(e)}},model:{value:this.form.talentCultivationAbilityID,callback:function(e){t.$set(this.form,"talentCultivationAbilityID",e)},expression:"\n        this.form.talentCultivationAbilityID\n      "}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:8==t.active,expression:"active == 8"}]},[n("FutureConstructionPlan",{ref:"futureconstructionplan",attrs:{futureConstructionPlanID:this.form.futureConstructionPlanID},on:{getFutureConstructionPlanID:function(e){return t.getFutureConstructionPlanID(e)}},model:{value:this.form.futureConstructionPlanID,callback:function(e){t.$set(this.form,"futureConstructionPlanID",e)},expression:"this.form.futureConstructionPlanID"}}),n("opinionFeedBack",{style:{display:t.updateHidden},attrs:{opinionFeedbackID:this.form.opinionFeedbackID}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{style:{display:t.buttenHidden},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")]),n("el-button",{style:{display:t.updateHidden},attrs:{type:"primary"},on:{click:t.handleUpdate}},[t._v("确认修改")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:9==t.active,expression:"active == 9"}]},[n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("svg-icon",{staticStyle:{width:"7rem",height:"7rem"},attrs:{iconClass:"success"}})],1),n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"action-text"},[t._v("提交成功")])]),n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"action-subtext"},[t._v("请等待管理员进行审核")])])],1)],1)},r=[],i=n("1da1"),a=(n("96cf"),n("a434"),n("4de4"),n("b64b"),n("2b0e")),u=n("3796"),c=n("c00a"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("负责人情况")])])]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"出生年月"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.birthdate,callback:function(e){t.$set(t.form,"birthdate",e)},expression:"form.birthdate"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[n("el-option",{attrs:{label:"男",value:"男"}}),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"政治面貌"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.politicalAffiliation,callback:function(e){t.$set(t.form,"politicalAffiliation",e)},expression:"form.politicalAffiliation"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"教学组织名称"}},[n("el-input",{model:{value:t.form.nameOfTeachingOrganization,callback:function(e){t.$set(t.form,"nameOfTeachingOrganization",e)},expression:"form.nameOfTeachingOrganization"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"隶属单位"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.subordinateUnit,callback:function(e){t.$set(t.form,"subordinateUnit",e)},expression:"form.subordinateUnit"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"类别"}},[n("el-select",{attrs:{placeholder:"类别"},model:{value:t.form.classification,callback:function(e){t.$set(t.form,"classification",e)},expression:"form.classification"}},[n("el-option",{attrs:{label:"国家级",value:"国家级"}}),n("el-option",{attrs:{label:"省级",value:"省级"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批等级"}},[n("el-select",{attrs:{placeholder:"获批等级"},model:{value:t.form.approvalLevel.provincialQualificationOfTime,callback:function(e){t.$set(t.form.approvalLevel,"provincialQualificationOfTime",e)},expression:"form.approvalLevel.provincialQualificationOfTime"}},[n("el-option",{attrs:{label:"省级优秀",value:"省级优秀"}}),n("el-option",{attrs:{label:"省级合格",value:"省级合格"}}),n("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.approvalLevel.provincialExcellenceOfTime,callback:function(e){t.$set(t.form.approvalLevel,"provincialExcellenceOfTime",e)},expression:"form.approvalLevel.provincialExcellenceOfTime"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"最终学历（学位）"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.degree,callback:function(e){t.$set(t.form,"degree",e)},expression:"form.degree"}},t._l(t.optionsOfDegree,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"授予单位"}},[n("el-input",{model:{value:t.form.authorizationDepartment,callback:function(e){t.$set(t.form,"authorizationDepartment",e)},expression:"form.authorizationDepartment"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"授予时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.dateOfGrant,callback:function(e){t.$set(t.form,"dateOfGrant",e)},expression:"form.dateOfGrant"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"高校教龄"}},[n("el-input",{model:{value:t.form.universityTeachingAge,callback:function(e){t.$set(t.form,"universityTeachingAge",e)},expression:"form.universityTeachingAge"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择"},model:{value:t.form.professionalTitle,callback:function(e){t.$set(t.form,"professionalTitle",e)},expression:"form.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"行政职务"}},[n("el-input",{model:{value:t.form.administrativeDuties,callback:function(e){t.$set(t.form,"administrativeDuties",e)},expression:"form.administrativeDuties"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"任基层教学组织负责人时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.dateOfHeadOfBasicTeachingOrganization,callback:function(e){t.$set(t.form,"dateOfHeadOfBasicTeachingOrganization",e)},expression:"form.dateOfHeadOfBasicTeachingOrganization"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"岗位津贴"}},[n("el-input",{model:{value:t.form.postAllowance,callback:function(e){t.$set(t.form,"postAllowance",e)},expression:"form.postAllowance"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"近2学年教授课程及学时"}},[n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.PrincipalInfo.dialogVisible)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.PrincipalInfo.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"course",label:"教授课程"}}),n("el-table-column",{attrs:{prop:"period",label:"学时"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{float:"left"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return t.handleClickEdit(t.PrincipalInfo,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{float:"right"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(n){return t.handleClickDelete(t.PrincipalInfo,e.$index)}}})],1)]}}])})],1),n("el-dialog",{attrs:{title:"近两年教授课程及学时",visible:t.PrincipalInfo.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.PrincipalInfo.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教授课程"}},[n("el-input",{model:{value:t.tempData.course,callback:function(e){t.$set(t.tempData,"course",e)},expression:"tempData.course"}})],1),n("el-form-item",{attrs:{label:"学时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.PrincipalInfo.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.PrincipalInfo)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.PrincipalInfo)}}},[t._v("添加")])],1)],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"bottomClass",attrs:{label:"年均教学工作量及减免比例"}},[n("el-input",{model:{value:t.form.averageAnnualTeachingWorkloadAndReductionRatio,callback:function(e){t.$set(t.form,"averageAnnualTeachingWorkloadAndReductionRatio",e)},expression:"form.averageAnnualTeachingWorkloadAndReductionRatio"}})],1),n("el-form-item",{attrs:{label:"主要教学业绩"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.form.mainTeachingAchievements,callback:function(e){t.$set(t.form,"mainTeachingAchievements",e)},expression:"form.mainTeachingAchievements"}})],1)],1)],1),n("el-row")],1)},l=[],f=n("b775");function m(t){return Object(f["a"])({url:"/declaration-form/principal",method:"post",data:t})}function d(t,e){return Object(f["a"])({url:"declaration-form/principal/"+t,method:"post",data:e})}var p=n("1d7f"),h={props:{principalID:{type:String}},data:function(){return{editStatus:!1,tempData:{},form:{nameOfTeachingOrganization:"",subordinateUnit:"",classification:"",approvalLevel:{provincialQualificationOfTime:"",provincialExcellenceOfTime:""},name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",authorizationDepartment:"",dateOfGrant:"",universityTeachingAge:"",professionalTitle:"",administrativeDuties:"",dateOfHeadOfBasicTeachingOrganization:"",postAllowance:"",teachingCoursesInRecentTwoAcademicYears:[{course:"",period:""}],averageAnnualTeachingWorkloadAndReductionRatio:"",mainTeachingAchievements:""},PrincipalInfo:{tables:[[]],dialogVisible:[!1]},options:["中共党员","中共预备党员","共青团员","民革党员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派人士","群众"],optionsOfDegree:["小学","初中","高中","大专","本科","硕士研究生","博士研究生"]}},watch:{principalID:function(t,e){this.getFormInfo()}},methods:{createPrincipalInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getInfo();case 2:return e.next=4,m(t.form).then((function(e){t.$emit("getPrincipalID",e.data.principalID)})).catch((function(t){console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},getInfo:function(){this.form.teachingCoursesInRecentTwoAcademicYears=void 0,this.form.teachingCoursesInRecentTwoAcademicYears=new Array;for(var t=0;t<this.PrincipalInfo.tables[0].length;t++){var e={};e["course"]=this.PrincipalInfo.tables[0][t].course,e["period"]=this.PrincipalInfo.tables[0][t].period,this.form.teachingCoursesInRecentTwoAcademicYears[t]=e}},getFormInfo:function(){var t=this;Object(p["a"])(this.principalID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);for(var r=0;r<t.form.teachingCoursesInRecentTwoAcademicYears.length;r++){var i={};i["course"]=t.form.teachingCoursesInRecentTwoAcademicYears[r].course,i["period"]=t.form.teachingCoursesInRecentTwoAcademicYears[r].period,a["default"].set(t.PrincipalInfo.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getInfo();case 2:return e.next=4,d(t.principalID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()}}},g=h,v=(n("84bb"),n("2877")),b=Object(v["a"])(g,s,l,!1,null,"3d80f507",null),y=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"成员信息",visible:t.memberDialogFormVisible},on:{"update:visible":function(e){t.memberDialogFormVisible=e}}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-form",{attrs:{model:t.tempMember}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.tempMember.name,callback:function(e){t.$set(t.tempMember,"name",e)},expression:"tempMember.name"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"出生年月"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempMember.birthdate,callback:function(e){t.$set(t.tempMember,"birthdate",e)},expression:"tempMember.birthdate"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.gender,callback:function(e){t.$set(t.tempMember,"gender",e)},expression:"tempMember.gender"}},[n("el-option",{attrs:{label:"男",value:"男"}}),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"政治面貌"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.politicalAffiliation,callback:function(e){t.$set(t.tempMember,"politicalAffiliation",e)},expression:"tempMember.politicalAffiliation"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"最终学位"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.degree,callback:function(e){t.$set(t.tempMember,"degree",e)},expression:"tempMember.degree"}},t._l(t.optionsOfDegree,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.tempMember.professionalTitle,callback:function(e){t.$set(t.tempMember,"professionalTitle",e)},expression:"tempMember.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"行政职务"}},[n("el-input",{model:{value:t.tempMember.administrativeDuties,callback:function(e){t.$set(t.tempMember,"administrativeDuties",e)},expression:"tempMember.administrativeDuties"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"高校教龄"}},[n("el-input",{model:{value:t.tempMember.universityTeachingAge,callback:function(e){t.$set(t.tempMember,"universityTeachingAge",e)},expression:"tempMember.universityTeachingAge"}})],1)],1)],1),n("el-row",[n("el-form-item",{attrs:{label:"近2学年任教课程及学时"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.tempMember.teachingCoursesInRecentTwoAcademicYears,callback:function(e){t.$set(t.tempMember,"teachingCoursesInRecentTwoAcademicYears",e)},expression:"tempMember.teachingCoursesInRecentTwoAcademicYears"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.editMember(!1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.saveToMembers}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:t.addToMembers}},[t._v("添加")])],1)],1)],1)],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["name","birthdate","gender","politicalAffiliation","degree","professionalTitle","administrativeDuties","universityTeachingAge","JinLiangNianJiaoShouKeChengJiXueShi"]}})],1),n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("成员概况")])])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.editMember(!0)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:this.form.data,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"birthdate",label:"出生年月"}}),n("el-table-column",{attrs:{prop:"gender",label:"性别"}}),n("el-table-column",{attrs:{prop:"politicalAffiliation",label:"政治面貌"}}),n("el-table-column",{attrs:{prop:"degree",label:"最终学位"}}),n("el-table-column",{attrs:{prop:"professionalTitle",label:"职称"}}),n("el-table-column",{attrs:{prop:"administrativeDuties",label:"行政职务"}}),n("el-table-column",{attrs:{prop:"universityTeachingAge",label:"高校教龄"}}),n("el-table-column",{attrs:{width:"200",prop:"teachingCoursesInRecentTwoAcademicYears",label:"近2学年任教课程及学时"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleEdit(e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleDelete(e.$index)}}})],1)]}}])})],1)],1)},w=[];n("b0c0"),n("d3b7"),n("25f0"),n("5319"),n("ac1f"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("3ca3"),n("ddb0");function k(t){return Object(f["a"])({url:"/declaration-form/teachers",method:"post",data:t})}function S(t,e){return Object(f["a"])({url:"/declaration-form/teachers/"+t,method:"post",data:e})}var C=n("58bd"),O={props:{membersID:{type:String}},components:{UploadExcel:u["a"]},data:function(){return{form:{data:[],queryInfo:{},count:""},memberDialogFormVisible:!1,uploadExcelDialogFormVisible:!1,editStatus:!1,editIndex:-1,tempMember:{name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",professionalTitle:"",administrativeDuties:"",universityTeachingAge:"",teachingCoursesInRecentTwoAcademicYears:""},options:["中共党员","中共预备党员","共青团员","民革党员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派人士","群众"],optionsOfDegree:["小学","初中","高中","大专","本科","硕士研究生","博士研究生"]}},watch:{membersID:function(t,e){this.getFormInfo()}},methods:{createMembersInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k(t.form).then((function(e){console.log(e.data.membersID),t.$emit("getMembersID",e.data.membersID)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},editMember:function(t){this.tempMember={name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",professionalTitle:"",administrativeDuties:"",universityTeachingAge:"",teachingCoursesInRecentTwoAcademicYears:""},this.memberDialogFormVisible=t,this.editStatus=!1},addToMembers:function(){this.form.data.push(this.tempMember),this.editMember(!1)},saveToMembers:function(){a["default"].set(this.form.data,this.editIndex,this.tempMember),this.editMember(!1)},importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.name=e[n].name,o.birthdate=e[n].birthdate,o.gender=e[n].gender,o.politicalAffiliation=e[n].politicalAffiliation,o.degree=e[n].degree,o.professionalTitle=e[n].professionalTitle,o.administrativeDuties=e[n].administrativeDuties,o.universityTeachingAge=e[n].universityTeachingAge,o.teachingCoursesInRecentTwoAcademicYears=e[n].teachingCoursesInRecentTwoAcademicYears,this.form.data.push(o)}this.uploadExcelDialogFormVisible=!1},handleEdit:function(t,e){var n=_.cloneDeep(t);this.tempMember=n,this.editIndex=e,this.editStatus=!0,this.memberDialogFormVisible=!0},handleDelete:function(t){this.form.data.splice(t,1)},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["姓名","出生年月","性别","政治面貌","最终学位","职称","行政职务","高校教龄","近2学年任教课程及学时"],["无名氏","1999年5月12","男","中共党员","博士","教授","院长","10","C#程序设计，35学时"]])},getFormInfo:function(){var t=this;Object(C["a"])(this.membersID).then((function(e){console.log(e);var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o])}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S(t.membersID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},D=O,T=(n("31f1"),Object(v["a"])(D,x,w,!1,null,"dfd3c71e",null)),I=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("规章制度建设")])])]),n("Tinymce",{ref:"rules",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},A=[],R=n("d5a5");function F(t){return Object(f["a"])({url:"/declaration-form/rules-and-regulations",method:"post",data:t})}function M(t,e){return Object(f["a"])({url:"/declaration-form/rules-and-regulations/"+t,method:"post",data:e})}var P=n("e5ac"),B={props:{ruleAndRegulationID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）基本管理制度&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）发展目标&nbsp;&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）本学年年度计划</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{ruleAndRegulationID:function(t,e){this.getFormInfo()}},methods:{createRulesInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,F(t.form).then((function(e){t.$emit("getRulesID",e.data.ruleAndRegulationID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},getFormInfo:function(){var t=this;Object(P["a"])(this.ruleAndRegulationID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.rules.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,M(t.ruleAndRegulationID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},j=B,z=(n("fc60"),Object(v["a"])(j,E,A,!1,null,"06408fa0",null)),V=z.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("队伍建设")])])]),n("Tinymce",{ref:"team",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.DuiWuJianShe.dialogVisible)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.DuiWuJianShe.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfNewTeacher",label:"新入职教师姓名"}}),n("el-table-column",{attrs:{prop:"trainingTime",label:"培训时间（学时）"}}),n("el-table-column",{attrs:{prop:"trainingPlace",label:"培训地点"}}),n("el-table-column",{attrs:{prop:"trainingInstitution",label:"培训单位"}}),n("el-table-column",{attrs:{prop:"supervisor",label:"指导教师"}}),n("el-table-column",{attrs:{prop:"professionalTitle",label:"职称"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.DuiWuJianShe,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.DuiWuJianShe,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"新入职教师信息",visible:t.DuiWuJianShe.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.DuiWuJianShe.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"新入职教师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfNewTeacher,callback:function(e){t.$set(t.tempData,"nameOfNewTeacher",e)},expression:"tempData.nameOfNewTeacher"}})],1),n("el-form-item",{attrs:{label:"培训时间（学时）"}},[n("el-input",{model:{value:t.tempData.trainingTime,callback:function(e){t.$set(t.tempData,"trainingTime",e)},expression:"tempData.trainingTime"}})],1),n("el-form-item",{attrs:{label:"培训地点"}},[n("el-input",{model:{value:t.tempData.trainingPlace,callback:function(e){t.$set(t.tempData,"trainingPlace",e)},expression:"tempData.trainingPlace"}})],1),n("el-form-item",{attrs:{label:"培训单位"}},[n("el-input",{model:{value:t.tempData.trainingInstitution,callback:function(e){t.$set(t.tempData,"trainingInstitution",e)},expression:"tempData.trainingInstitution"}})],1),n("el-form-item",{attrs:{label:"指导教师"}},[n("el-input",{model:{value:t.tempData.supervisor,callback:function(e){t.$set(t.tempData,"supervisor",e)},expression:"tempData.supervisor"}})],1),n("el-form-item",{attrs:{label:"职称"}},[n("el-input",{model:{value:t.tempData.professionalTitle,callback:function(e){t.$set(t.tempData,"professionalTitle",e)},expression:"tempData.professionalTitle"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.DuiWuJianShe.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.DuiWuJianShe)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.DuiWuJianShe)}}},[t._v("添加")])],1)],1)],1)],1)},L=[];function H(t){return Object(f["a"])({url:"/declaration-form/team-building",method:"post",data:t})}function $(t,e){return Object(f["a"])({url:"/declaration-form/team-building/"+t,method:"post",data:e})}var J=n("34e7"),U={props:{teamBuildingID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{editStatus:!1,tempData:{},form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）师德建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）团队结构&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教师传帮带机制&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）双师型教师建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},newTeachers:[{nameOfNewTeacher:"",trainingTime:"",trainingPlace:"",trainingInstitution:"",supervisor:"",professionalTitle:""}]},DuiWuJianShe:{tables:[[]],dialogVisible:[!1]}}},watch:{teamBuildingID:function(t,e){this.getFormInfo()}},methods:{handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createTeamInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,H(t.form).then((function(e){console.log(t.form),t.$emit("getTeamBuildingID",e.data.teamBuildingID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.newTeachers=void 0,this.form.newTeachers=new Array;for(var t=0;t<this.DuiWuJianShe.tables[0].length;t++){var e={};e["nameOfNewTeacher"]=this.DuiWuJianShe.tables[0][t].nameOfNewTeacher,e["trainingTime"]=this.DuiWuJianShe.tables[0][t].trainingTime,e["trainingPlace"]=this.DuiWuJianShe.tables[0][t].trainingPlace,e["trainingInstitution"]=this.DuiWuJianShe.tables[0][t].trainingInstitution,e["supervisor"]=this.DuiWuJianShe.tables[0][t].supervisor,e["professionalTitle"]=this.DuiWuJianShe.tables[0][t].professionalTitle,this.form.newTeachers[t]=e}},getFormInfo:function(){var t=this;Object(J["a"])(this.teamBuildingID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.team.setContent(t.form.content.html);for(var r=0;r<t.form.newTeachers.length;r++){var i={};i["nameOfNewTeacher"]=t.form.newTeachers[r].nameOfNewTeacher,i["trainingTime"]=t.form.newTeachers[r].trainingTime,i["trainingPlace"]=t.form.newTeachers[r].trainingPlace,i["trainingInstitution"]=t.form.newTeachers[r].trainingInstitution,i["supervisor"]=t.form.newTeachers[r].supervisor,i["professionalTitle"]=t.form.newTeachers[r].professionalTitle,a["default"].set(t.DuiWuJianShe.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,$(t.teamBuildingID,t.form).then((function(e){console.log(t.form)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},W=U,G=(n("c710"),Object(v["a"])(W,N,L,!1,null,"d656b32c",null)),X=G.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("教学组织")])])]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"教师总数（人）"}},[n("el-input",{model:{value:t.form.totalNumberOfTeachers,callback:function(e){t.$set(t.form,"totalNumberOfTeachers",e)},expression:"form.totalNumberOfTeachers"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"承担课程（门）"}},[n("el-input",{model:{value:t.form.coursesUndertaken,callback:function(e){t.$set(t.form,"coursesUndertaken",e)},expression:"form.coursesUndertaken"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"人均周学时"}},[n("el-input",{model:{value:t.form.perCapitaWeeklySchoolHours,callback:function(e){t.$set(t.form,"perCapitaWeeklySchoolHours",e)},expression:"form.perCapitaWeeklySchoolHours"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"人均指导毕业论文/设计"}},[n("el-input",{model:{value:t.form.perCapitaGuidingGraduationThesis,callback:function(e){t.$set(t.form,"perCapitaGuidingGraduationThesis",e)},expression:"form.perCapitaGuidingGraduationThesis"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"教学事故（次）"}},[n("el-input",{model:{value:t.form.teachingAccident,callback:function(e){t.$set(t.form,"teachingAccident",e)},expression:"form.teachingAccident"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"综合评教优秀以上人数及比例"}},[n("el-input",{model:{value:t.form.comprehensiveEvaluationOfExcellentTeaching,callback:function(e){t.$set(t.form,"comprehensiveEvaluationOfExcellentTeaching",e)},expression:"form.comprehensiveEvaluationOfExcellentTeaching"}})],1)],1)],1),n("Tinymce",{ref:"organ",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["professorName","course","period","studentNumbers","semesterTime"],attr:["教授姓名","讲授课程","学时","学生人数","学期时间"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueZuZhi.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueZuZhi.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"professorName",label:"教授姓名"}}),n("el-table-column",{attrs:{prop:"course",label:"讲授课程"}}),n("el-table-column",{attrs:{prop:"period",label:"学时"}}),n("el-table-column",{attrs:{prop:"studentNumbers",label:"学生人数"}}),n("el-table-column",{attrs:{prop:"semesterTime",label:"学期时间"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueZuZhi,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueZuZhi,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"教学组织信息",visible:t.part3.JiaoXueZuZhi.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueZuZhi.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教授姓名"}},[n("el-input",{model:{value:t.tempData.professorName,callback:function(e){t.$set(t.tempData,"professorName",e)},expression:"tempData.professorName"}})],1),n("el-form-item",{attrs:{label:"讲授课程"}},[n("el-input",{model:{value:t.tempData.course,callback:function(e){t.$set(t.tempData,"course",e)},expression:"tempData.course"}})],1),n("el-form-item",{attrs:{label:"学时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-form-item",{attrs:{label:"学生人数"}},[n("el-input",{model:{value:t.tempData.studentNumbers,callback:function(e){t.$set(t.tempData,"studentNumbers",e)},expression:"tempData.studentNumbers"}})],1),n("el-form-item",{attrs:{label:"学期时间"}},[n("el-input",{model:{value:t.tempData.semesterTime,callback:function(e){t.$set(t.tempData,"semesterTime",e)},expression:"tempData.semesterTime"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueZuZhi.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueZuZhi)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueZuZhi)}}},[t._v("添加")])],1)],1)],1)],1)},K=[];function q(t){return Object(f["a"])({url:"/declaration-form/teaching-organization",method:"post",data:t})}function Z(t,e){return Object(f["a"])({url:"/declaration-form/teaching-organization/"+t,method:"post",data:e})}var Q=n("9367"),tt={props:{teachingOrganizationID:{type:String}},components:{Tinymce:R["a"],UploadExcel:u["a"]},data:function(){return{uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{totalNumberOfTeachers:"",coursesUndertaken:"",perCapitaWeeklySchoolHours:"",perCapitaGuidingGraduationThesis:"",teachingAccident:"",comprehensiveEvaluationOfExcellentTeaching:"",content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教学计划&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）课堂教学&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教学运行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）教学评价情况</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{professorName:"",course:"",period:"",studentNumbers:"",semesterTime:""}]},part3:{JiaoXueZuZhi:{tables:[[]],dialogVisible:[!1]}}}},watch:{teachingOrganizationID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教授姓名","讲授课程","学时","学生人数","学期时间"],["无名氏","高数","32","156","2020-2021学年第一学期"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.professorName=e[n].professorName,o.course=e[n].course,o.period=e[n].period,o.studentNumbers=e[n].studentNumbers,o.semesterTime=e[n].semesterTime,this.form.info.push(o),this.part3.JiaoXueZuZhi.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createOrganizationInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,q(t.form).then((function(e){t.$emit("getOrganizationID",e.data.teachingOrganizationID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.JiaoXueZuZhi.tables[0].length;t++){var e={};e["professorName"]=this.part3.JiaoXueZuZhi.tables[0][t].professorName,e["course"]=this.part3.JiaoXueZuZhi.tables[0][t].course,e["period"]=this.part3.JiaoXueZuZhi.tables[0][t].period,e["studentNumbers"]=this.part3.JiaoXueZuZhi.tables[0][t].studentNumbers,e["semesterTime"]=this.part3.JiaoXueZuZhi.tables[0][t].semesterTime,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Q["a"])(this.teachingOrganizationID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.organ.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["professorName"]=t.form.info[r].professorName,i["course"]=t.form.info[r].course,i["period"]=t.form.info[r].period,i["studentNumbers"]=t.form.info[r].studentNumbers,i["semesterTime"]=t.form.info[r].semesterTime,a["default"].set(t.part3.JiaoXueZuZhi.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Z(t.teachingOrganizationID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},et=tt,nt=(n("d4b4"),Object(v["a"])(et,Y,K,!1,null,"691a785d",null)),ot=nt.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("课程教材概述")])])]),n("Tinymce",{ref:"course",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleFirst},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleFirst=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessFirst,header:["onlineCourseName","platformSite","chosenNumbers","period","completionTime","level","professionalTitle"],attr:["在线开放课程","平台网址","选课人数","总课时","建成时间","校级/省级"]}})],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleSecond},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleSecond=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessSecond,header:["nameOfTeachingMaterial","editorInChief","participatingEditor","theNumberOfWordsInTheChapter","yearOfPublication","press","level"],attr:["规划教材名称","主编","参编","章节字数","出版年","出版社","省级/国家级"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.KeChengJiaoCaiGaiShu.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelFirst}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelFirst}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.KeChengJiaoCaiGaiShu.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"onlineCourseName",label:"在线开放课程"}}),n("el-table-column",{attrs:{prop:"platformSite",label:"平台网址"}}),n("el-table-column",{attrs:{prop:"chosenNumbers",label:"选课人数"}}),n("el-table-column",{attrs:{prop:"period",label:"总课时"}}),n("el-table-column",{attrs:{prop:"completionTime",label:"建成时间"}}),n("el-table-column",{attrs:{prop:"level",label:"校级/省级"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.KeChengJiaoCaiGaiShu,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.KeChengJiaoCaiGaiShu,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelSecond}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelSecond}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.KeChengJiaoCaiGaiShu.tables[1],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingMaterial",label:"规划教材名称"}}),n("el-table-column",{attrs:{prop:"editorInChief",label:"主编"}}),n("el-table-column",{attrs:{prop:"participatingEditor",label:"参编"}}),n("el-table-column",{attrs:{prop:"theNumberOfWordsInTheChapter",label:"章节字数"}}),n("el-table-column",{attrs:{prop:"yearOfPublication",label:"出版年"}}),n("el-table-column",{attrs:{prop:"press",label:"出版社"}}),n("el-table-column",{attrs:{prop:"level",label:"省级/国家级"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.KeChengJiaoCaiGaiShu,e.row,e.$index,1)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.KeChengJiaoCaiGaiShu,e.$index,1)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"在线课程信息",visible:t.part3.KeChengJiaoCaiGaiShu.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"在线开放课程"}},[n("el-input",{model:{value:t.tempData.onlineCourseName,callback:function(e){t.$set(t.tempData,"onlineCourseName",e)},expression:"tempData.onlineCourseName"}})],1),n("el-form-item",{attrs:{label:"平台网址"}},[n("el-input",{model:{value:t.tempData.platformSite,callback:function(e){t.$set(t.tempData,"platformSite",e)},expression:"tempData.platformSite"}})],1),n("el-form-item",{attrs:{label:"选课人数"}},[n("el-input",{model:{value:t.tempData.chosenNumbers,callback:function(e){t.$set(t.tempData,"chosenNumbers",e)},expression:"tempData.chosenNumbers"}})],1),n("el-form-item",{attrs:{label:"总课时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-form-item",{attrs:{label:"建成时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.completionTime,callback:function(e){t.$set(t.tempData,"completionTime",e)},expression:"tempData.completionTime"}})],1),n("el-form-item",{attrs:{label:"校级/省级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.KeChengJiaoCaiGaiShu.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.KeChengJiaoCaiGaiShu)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.KeChengJiaoCaiGaiShu)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"规划教材信息",visible:t.part3.KeChengJiaoCaiGaiShu.dialogVisible[1]},on:{"update:visible":function(e){return t.$set(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"规划教材名称"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingMaterial,callback:function(e){t.$set(t.tempData,"nameOfTeachingMaterial",e)},expression:"tempData.nameOfTeachingMaterial"}})],1),n("el-form-item",{attrs:{label:"主编"}},[n("el-input",{model:{value:t.tempData.editorInChief,callback:function(e){t.$set(t.tempData,"editorInChief",e)},expression:"tempData.editorInChief"}})],1),n("el-form-item",{attrs:{label:"参编"}},[n("el-input",{model:{value:t.tempData.participatingEditor,callback:function(e){t.$set(t.tempData,"participatingEditor",e)},expression:"tempData.participatingEditor"}})],1),n("el-form-item",{attrs:{label:"章节字数"}},[n("el-input",{model:{value:t.tempData.theNumberOfWordsInTheChapter,callback:function(e){t.$set(t.tempData,"theNumberOfWordsInTheChapter",e)},expression:"tempData.theNumberOfWordsInTheChapter"}})],1),n("el-form-item",{attrs:{label:"出版年"}},[n("el-input",{model:{value:t.tempData.yearOfPublication,callback:function(e){t.$set(t.tempData,"yearOfPublication",e)},expression:"tempData.yearOfPublication"}})],1),n("el-form-item",{attrs:{label:"出版社"}},[n("el-input",{model:{value:t.tempData.press,callback:function(e){t.$set(t.tempData,"press",e)},expression:"tempData.press"}})],1),n("el-form-item",{attrs:{label:"省级/国家级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.KeChengJiaoCaiGaiShu,1)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.KeChengJiaoCaiGaiShu,1)}}},[t._v("添加")])],1)],1)],1)],1)},it=[];function at(t){return Object(f["a"])({url:"/declaration-form/course-material",method:"post",data:t})}function ut(t,e){return Object(f["a"])({url:"/declaration-form/course-material/"+t,method:"post",data:e})}var ct=n("fe41"),st={props:{courseMaterialID:{type:String}},components:{Tinymce:R["a"],UploadExcel:u["a"]},data:function(){return{uploadExcelDialogFormVisibleFirst:!1,uploadExcelDialogFormVisibleSecond:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{onlineCourses:[{onlineCourseName:"",platformSite:"",chosenNumbers:"",period:"",completionTime:"",level:""}],textbooks:[{nameOfTeachingMaterial:"",editorInChief:"",participatingEditor:"",theNumberOfWordsInTheChapter:"",yearOfPublication:"",press:"",level:""}],content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）课程体系建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）课程标准执行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教材建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）在线开放课程建设</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}},part3:{KeChengJiaoCaiGaiShu:{tables:[[],[]],dialogVisible:[!1,!1]}}}},watch:{courseMaterialID:function(t,e){this.getFormInfo()}},methods:{importFromExcelFirst:function(){this.uploadExcelDialogFormVisibleFirst=!0},importFromExcelSecond:function(){this.uploadExcelDialogFormVisibleSecond=!0},exportExcelFirst:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["在线开放课程","平台网址","选课人数","总课时","建成时间","校级/省级"],["数学","www.aaa.com","32","32","2000年1月12","校级"]])},exportExcelSecond:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["规划教材名称","主编","参编","章节字数","出版年","出版社","省级/国家级"],["数学","小红","小明","10000","2012","河南大学出版社","国家级"]])},handleSuccessFirst:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.onlineCourseName=e[n].onlineCourseName,o.platformSite=e[n].platformSite,o.chosenNumbers=e[n].chosenNumbers,o.period=e[n].period,o.completionTime=e[n].completionTime,o.level=e[n].level,this.form.onlineCourses.push(o),this.part3.KeChengJiaoCaiGaiShu.tables[0].push(o)}this.uploadExcelDialogFormVisibleFirst=!1},handleSuccessSecond:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeachingMaterial=e[n].nameOfTeachingMaterial,o.editorInChief=e[n].editorInChief,o.participatingEditor=e[n].participatingEditor,o.theNumberOfWordsInTheChapter=e[n].theNumberOfWordsInTheChapter,o.yearOfPublication=e[n].yearOfPublication,o.press=e[n].press,o.level=e[n].level,this.form.textbooks.push(o),this.part3.KeChengJiaoCaiGaiShu.tables[1].push(o)}this.uploadExcelDialogFormVisibleSecond=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createCourseMaterialInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,at(t.form).then((function(e){console.log(t.form),t.$emit("getCourseMaterialID",e.data.courseMaterialID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.onlineCourses=void 0,this.form.onlineCourses=new Array;for(var t=0;t<this.part3.KeChengJiaoCaiGaiShu.tables[0].length;t++){var e={};e["onlineCourseName"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].onlineCourseName,e["platformSite"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].platformSite,e["chosenNumbers"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].chosenNumbers,e["period"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].period,e["completionTime"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].completionTime,e["level"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].level,this.form.onlineCourses[t]=e}this.form.textbooks=void 0,this.form.textbooks=new Array;for(var n=0;n<this.part3.KeChengJiaoCaiGaiShu.tables[1].length;n++){var o={};o["nameOfTeachingMaterial"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].nameOfTeachingMaterial,o["editorInChief"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].editorInChief,o["participatingEditor"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].participatingEditor,o["theNumberOfWordsInTheChapter"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].theNumberOfWordsInTheChapter,o["yearOfPublication"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].yearOfPublication,o["press"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].press,o["level"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].level,this.form.textbooks[n]=o}},getFormInfo:function(){var t=this;Object(ct["a"])(this.courseMaterialID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.course.setContent(t.form.content.html);for(var r=0;r<t.form.onlineCourses.length;r++){var i={};i["onlineCourseName"]=t.form.onlineCourses[r].onlineCourseName,i["platformSite"]=t.form.onlineCourses[r].platformSite,i["chosenNumbers"]=t.form.onlineCourses[r].chosenNumbers,i["period"]=t.form.onlineCourses[r].period,i["completionTime"]=t.form.onlineCourses[r].completionTime,i["level"]=t.form.onlineCourses[r].level,a["default"].set(t.part3.KeChengJiaoCaiGaiShu.tables[0],r,i)}for(var u=0;u<t.form.textbooks.length;u++){var c={};c["nameOfTeachingMaterial"]=t.form.textbooks[u].nameOfTeachingMaterial,c["editorInChief"]=t.form.textbooks[u].editorInChief,c["participatingEditor"]=t.form.textbooks[u].participatingEditor,c["theNumberOfWordsInTheChapter"]=t.form.textbooks[u].theNumberOfWordsInTheChapter,c["yearOfPublication"]=t.form.textbooks[u].yearOfPublication,c["press"]=t.form.textbooks[u].press,c["level"]=t.form.textbooks[u].level,a["default"].set(t.part3.KeChengJiaoCaiGaiShu.tables[1],u,c)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ut(t.courseMaterialID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},lt=st,ft=(n("dc08"),Object(v["a"])(lt,rt,it,!1,null,"29e52e60",null)),mt=ft.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("教学研究")])])]),n("Tinymce",{ref:"teaching",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleFirst},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleFirst=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessFirst,header:["nameOfEducationalReformProject","timeOfProjectEstablishment","projectSource","host","members","awards"],attr:["教改项目名称","立项时间","项目来源","主持人","成员","获奖等次(特等奖,一等奖,二等奖,三等奖,优秀奖)"]}})],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleSecond},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleSecond=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessSecond,header:["nameOfTeachingResearchPaper","publishedTime","journalName","authorInChef"],attr:["教研论文名称","发表时间","期刊名称","第一作者"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelFirst}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelFirst}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfEducationalReformProject",label:"教改项目名称"}}),n("el-table-column",{attrs:{prop:"timeOfProjectEstablishment",label:"立项时间"}}),n("el-table-column",{attrs:{prop:"projectSource",label:"项目来源"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"members",label:"成员"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,1)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelSecond}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelSecond}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[1],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingResearchPaper",label:"教改论文题目"}}),n("el-table-column",{attrs:{prop:"publishedTime",label:"发表时间"}}),n("el-table-column",{attrs:{prop:"journalName",label:"期刊名称"}}),n("el-table-column",{attrs:{prop:"authorInChef",label:"第一作者"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,1)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,1)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[n("span",[t._v("5次代表性教研活动")])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,2)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[2],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"time",label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"hostPosition",label:"主持人职务"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,2)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,2)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[n("span",[t._v("5次代表性校外教学研讨会")])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,3)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[3],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"timeYear",label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"organizer",label:"主办单位"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,3)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,3)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"教改项目信息",visible:t.part3.JiaoXueYanJiu.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教改项目名称"}},[n("el-input",{model:{value:t.tempData.nameOfEducationalReformProject,callback:function(e){t.$set(t.tempData,"nameOfEducationalReformProject",e)},expression:"tempData.nameOfEducationalReformProject"}})],1),n("el-form-item",{attrs:{label:"立项时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.timeOfProjectEstablishment,callback:function(e){t.$set(t.tempData,"timeOfProjectEstablishment",e)},expression:"tempData.timeOfProjectEstablishment"}})],1),n("el-form-item",{attrs:{label:"项目来源"}},[n("el-input",{model:{value:t.tempData.projectSource,callback:function(e){t.$set(t.tempData,"projectSource",e)},expression:"tempData.projectSource"}})],1),n("el-form-item",{attrs:{label:"主持人"}},[n("el-input",{model:{value:t.tempData.host,callback:function(e){t.$set(t.tempData,"host",e)},expression:"tempData.host"}})],1),n("el-form-item",{attrs:{label:"成员"}},[n("el-input",{model:{value:t.tempData.members,callback:function(e){t.$set(t.tempData,"members",e)},expression:"tempData.members"}})],1),n("el-form-item",{attrs:{label:"获奖等次"}},[n("el-input",{model:{value:t.tempData.awards,callback:function(e){t.$set(t.tempData,"awards",e)},expression:"tempData.awards"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"教改论文信息",visible:t.part3.JiaoXueYanJiu.dialogVisible[1]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,1,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教改论文题目"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingResearchPaper,callback:function(e){t.$set(t.tempData,"nameOfTeachingResearchPaper",e)},expression:"tempData.nameOfTeachingResearchPaper"}})],1),n("el-form-item",{attrs:{label:"发表时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.publishedTime,callback:function(e){t.$set(t.tempData,"publishedTime",e)},expression:"tempData.publishedTime"}})],1),n("el-form-item",{attrs:{label:"期刊名称"}},[n("el-input",{model:{value:t.tempData.journalName,callback:function(e){t.$set(t.tempData,"journalName",e)},expression:"tempData.journalName"}})],1),n("el-form-item",{attrs:{label:"第一作者"}},[n("el-input",{model:{value:t.tempData.authorInChef,callback:function(e){t.$set(t.tempData,"authorInChef",e)},expression:"tempData.authorInChef"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,1)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,1)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"代表性教研活动",visible:t.part3.JiaoXueYanJiu.dialogVisible[2]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,2,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.time,callback:function(e){t.$set(t.tempData,"time",e)},expression:"tempData.time"}})],1),n("el-form-item",{attrs:{label:"地点"}},[n("el-input",{model:{value:t.tempData.place,callback:function(e){t.$set(t.tempData,"place",e)},expression:"tempData.place"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.tempData.content,callback:function(e){t.$set(t.tempData,"content",e)},expression:"tempData.content"}})],1),n("el-form-item",{attrs:{label:"主持人"}},[n("el-input",{model:{value:t.tempData.host,callback:function(e){t.$set(t.tempData,"host",e)},expression:"tempData.host"}})],1),n("el-form-item",{attrs:{label:"主持人职务"}},[n("el-input",{model:{value:t.tempData.hostPosition,callback:function(e){t.$set(t.tempData,"hostPosition",e)},expression:"tempData.hostPosition"}})],1),n("el-form-item",{attrs:{label:"参加人员"}},[n("el-input",{model:{value:t.tempData.participants,callback:function(e){t.$set(t.tempData,"participants",e)},expression:"tempData.participants"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,2)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,2)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,2)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"代表性校外教学研讨会",visible:t.part3.JiaoXueYanJiu.dialogVisible[3]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,3,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"时间/年份"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.timeYear,callback:function(e){t.$set(t.tempData,"timeYear",e)},expression:"tempData.timeYear"}})],1),n("el-form-item",{attrs:{label:"地点"}},[n("el-input",{model:{value:t.tempData.place,callback:function(e){t.$set(t.tempData,"place",e)},expression:"tempData.place"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.tempData.content,callback:function(e){t.$set(t.tempData,"content",e)},expression:"tempData.content"}})],1),n("el-form-item",{attrs:{label:"主办单位"}},[n("el-input",{model:{value:t.tempData.organizer,callback:function(e){t.$set(t.tempData,"organizer",e)},expression:"tempData.organizer"}})],1),n("el-form-item",{attrs:{label:"参加人员"}},[n("el-input",{model:{value:t.tempData.participants,callback:function(e){t.$set(t.tempData,"participants",e)},expression:"tempData.participants"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,3)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,3)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,3)}}},[t._v("添加")])],1)],1)],1)],1)},pt=[];function ht(t){return Object(f["a"])({url:"/declaration-form/teaching-research",method:"post",data:t})}function gt(t,e){return Object(f["a"])({url:"/declaration-form/teaching-research/"+t,method:"post",data:e})}var vt=n("09bf"),bt={props:{teachingResearchID:{type:String}},components:{Tinymce:R["a"],UploadExcel:u["a"]},data:function(){return{uploadExcelDialogFormVisibleFirst:!1,uploadExcelDialogFormVisibleSecond:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教改项目和教研论文&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）教研活动和听评课&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},educationalReformProjects:[{nameOfEducationalReformProject:"",timeOfProjectEstablishment:"",projectSource:"",host:"",members:"",awards:""}],teachingResearchPapers:[{nameOfTeachingResearchPaper:"",publishedTime:"",journalName:"",authorInChef:""}],representativeTeachingAndResearchActivities:[{time:"",place:"",content:"",host:"",hostPosition:"",participants:""}],representativeOffCampusTeachingSeminars:[{time:"",place:"",content:"",organizer:"",participants:""}]},part3:{JiaoXueYanJiu:{JiaoGaiXiangMuHeJiaoYanLunWen:"",JiaoYanHuoDongHeTingPingKe:"",tables:[[],[],[],[]],dialogVisible:[!1,!1,!1,!1]}}}},watch:{teachingResearchID:function(t,e){this.teachingResearchID=t,this.getFormInfo()},value:function(t,e){var n=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(n.tinymceId).setContent(t)}))}},methods:{importFromExcelFirst:function(){this.uploadExcelDialogFormVisibleFirst=!0},importFromExcelSecond:function(){this.uploadExcelDialogFormVisibleSecond=!0},exportExcelFirst:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教改项目名称","立项时间","项目来源","主持人","成员","获奖等次(特等奖,一等奖,二等奖,三等奖,优秀奖)"],["数学","2012年12月12","项目来源","倪大红","倪大红,倪大黑","特等奖"]])},exportExcelSecond:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教研论文名称","发表时间","期刊名称","第一作者"],["数学","2012年12月12","小明","小黑"]])},handleSuccessFirst:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfEducationalReformProject=e[n].nameOfEducationalReformProject,o.timeOfProjectEstablishment=e[n].timeOfProjectEstablishment,o.projectSource=e[n].projectSource,o.host=e[n].host,o.members=e[n].members,o.awards=e[n].awards,this.form.educationalReformProjects.push(o),this.part3.JiaoXueYanJiu.tables[0].push(o)}this.uploadExcelDialogFormVisibleFirst=!1},handleSuccessSecond:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeachingResearchPaper=e[n].nameOfTeachingResearchPaper,o.publishedTime=e[n].publishedTime,o.journalName=e[n].journalName,o.authorInChef=e[n].authorInChef,this.form.teachingResearchPapers.push(o),this.part3.JiaoXueYanJiu.tables[1].push(o)}this.uploadExcelDialogFormVisibleSecond=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createTeachingReseacherInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ht(t.form).then((function(e){t.$emit("getTeachingResearchID",e.data.teachingResearchID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,o,r,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.form.educationalReformProjects=void 0,t.form.educationalReformProjects=new Array,n=0;n<t.part3.JiaoXueYanJiu.tables[0].length;n++)o={},o["nameOfEducationalReformProject"]=t.part3.JiaoXueYanJiu.tables[0][n].nameOfEducationalReformProject,o["timeOfProjectEstablishment"]=t.part3.JiaoXueYanJiu.tables[0][n].timeOfProjectEstablishment,o["projectSource"]=t.part3.JiaoXueYanJiu.tables[0][n].projectSource,o["host"]=t.part3.JiaoXueYanJiu.tables[0][n].host,o["members"]=t.part3.JiaoXueYanJiu.tables[0][n].members,o["awards"]=t.part3.JiaoXueYanJiu.tables[0][n].awards,t.form.educationalReformProjects[n]=o;for(t.form.teachingResearchPapers=void 0,t.form.teachingResearchPapers=new Array,r=0;r<t.part3.JiaoXueYanJiu.tables[1].length;r++)i={},i["nameOfTeachingResearchPaper"]=t.part3.JiaoXueYanJiu.tables[1][r].nameOfTeachingResearchPaper,i["publishedTime"]=t.part3.JiaoXueYanJiu.tables[1][r].publishedTime,i["journalName"]=t.part3.JiaoXueYanJiu.tables[1][r].journalName,i["authorInChef"]=t.part3.JiaoXueYanJiu.tables[1][r].authorInChef,t.form.teachingResearchPapers[r]=i;for(t.form.representativeTeachingAndResearchActivities=void 0,t.form.representativeTeachingAndResearchActivities=new Array,a=0;a<t.part3.JiaoXueYanJiu.tables[2].length;a++)u={},u["time"]=t.part3.JiaoXueYanJiu.tables[2][a].time,u["place"]=t.part3.JiaoXueYanJiu.tables[2][a].place,u["content"]=t.part3.JiaoXueYanJiu.tables[2][a].content,u["host"]=t.part3.JiaoXueYanJiu.tables[2][a].host,u["hostPosition"]=t.part3.JiaoXueYanJiu.tables[2][a].hostPosition,u["participants"]=t.part3.JiaoXueYanJiu.tables[2][a].participants,t.form.representativeTeachingAndResearchActivities[a]=u;for(t.form.representativeOffCampusTeachingSeminars=void 0,t.form.representativeOffCampusTeachingSeminars=new Array,c=0;c<t.part3.JiaoXueYanJiu.tables[3].length;c++)s={},s["time"]=t.part3.JiaoXueYanJiu.tables[3][c].timeYear,s["place"]=t.part3.JiaoXueYanJiu.tables[3][c].place,s["content"]=t.part3.JiaoXueYanJiu.tables[3][c].content,s["organizer"]=t.part3.JiaoXueYanJiu.tables[3][c].organizer,s["participants"]=t.part3.JiaoXueYanJiu.tables[3][c].participants,t.form.representativeOffCampusTeachingSeminars[c]=s;case 12:case"end":return e.stop()}}),e)})))()},getFormInfo:function(){var t=this;Object(vt["a"])(this.teachingResearchID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.teaching.setContent(t.form.content.html);for(var r=0;r<t.form.educationalReformProjects.length;r++){var i={};i["nameOfEducationalReformProject"]=t.form.educationalReformProjects[r].nameOfEducationalReformProject,i["timeOfProjectEstablishment"]=t.form.educationalReformProjects[r].timeOfProjectEstablishment,i["projectSource"]=t.form.educationalReformProjects[r].projectSource,i["host"]=t.form.educationalReformProjects[r].host,i["members"]=t.form.educationalReformProjects[r].members,i["awards"]=t.form.educationalReformProjects[r].awards,a["default"].set(t.part3.JiaoXueYanJiu.tables[0],r,i)}for(var u=0;u<t.form.teachingResearchPapers.length;u++){var c={};c["nameOfTeachingResearchPaper"]=t.form.teachingResearchPapers[u].nameOfTeachingResearchPaper,c["publishedTime"]=t.form.teachingResearchPapers[u].publishedTime,c["journalName"]=t.form.teachingResearchPapers[u].journalName,c["authorInChef"]=t.form.teachingResearchPapers[u].authorInChef,a["default"].set(t.part3.JiaoXueYanJiu.tables[1],u,c)}for(var s=0;s<t.form.representativeTeachingAndResearchActivities.length;s++){var l={};l["time"]=t.form.representativeTeachingAndResearchActivities[s].time,l["place"]=t.form.representativeTeachingAndResearchActivities[s].place,l["content"]=t.form.representativeTeachingAndResearchActivities[s].content,l["host"]=t.form.representativeTeachingAndResearchActivities[s].host,l["hostPosition"]=t.form.representativeTeachingAndResearchActivities[s].hostPosition,l["participants"]=t.form.representativeTeachingAndResearchActivities[s].participants,a["default"].set(t.part3.JiaoXueYanJiu.tables[2],s,l)}for(var f=0;f<t.form.representativeOffCampusTeachingSeminars.length;f++){var m={};m["timeYear"]=t.form.representativeOffCampusTeachingSeminars[f].time,m["place"]=t.form.representativeOffCampusTeachingSeminars[f].place,m["content"]=t.form.representativeOffCampusTeachingSeminars[f].content,m["organizer"]=t.form.representativeOffCampusTeachingSeminars[f].organizer,m["participants"]=t.form.representativeOffCampusTeachingSeminars[f].participants,a["default"].set(t.part3.JiaoXueYanJiu.tables[3],f,m)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,gt(t.teachingResearchID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},yt=bt,xt=(n("4c42"),Object(v["a"])(yt,dt,pt,!1,null,"12bcc720",null)),wt=xt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("专业建设")])])]),n("Tinymce",{ref:"specialty",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业名称"}},[n("el-input",{model:{value:t.form.info.nameOfSpecialty,callback:function(e){t.$set(t.form.info,"nameOfSpecialty",e)},expression:"form.info.nameOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业认证"}},[n("el-input",{model:{value:t.form.info.certificationOfSpecialty,callback:function(e){t.$set(t.form.info,"certificationOfSpecialty",e)},expression:"form.info.certificationOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"专业评估"}},[n("el-input",{model:{value:t.form.info.evaluationOfSpecialty,callback:function(e){t.$set(t.form.info,"evaluationOfSpecialty",e)},expression:"form.info.evaluationOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"获得特色、综合改革试点专业等称号"}},[n("el-input",{model:{value:t.form.info.features,callback:function(e){t.$set(t.form.info,"features",e)},expression:"form.info.features"}})],1)],1)],1)],1)},St=[];function Ct(t){return Object(f["a"])({url:"/declaration-form/specialty-construction",method:"post",data:t})}function _t(t,e){return Object(f["a"])({url:"/declaration-form/specialty-construction/"+t,method:"post",data:e})}var Ot=n("6b84"),Dt={props:{specialtyConstructionID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{info:{nameOfSpecialty:"",certificationOfSpecialty:"",evaluationOfSpecialty:"",features:""},content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）专业建设规划&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）人才培养方案修订落实&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）专业教学质量波准执行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）专业认证和专业评估&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{specialtyConstructionID:function(t,e){this.getFormInfo()}},methods:{createSpecialtyConstructionInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Ct(t.form).then((function(e){t.$emit("getSpecialtyConstructionID",e.data.specialtyConstructionID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object(Ot["a"])(this.specialtyConstructionID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.specialty.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,_t(t.specialtyConstructionID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},Tt=Dt,It=(n("fc0e"),Object(v["a"])(Tt,kt,St,!1,null,"5498aee9",null)),Et=It.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("实践教学")])])]),n("Tinymce",{ref:"practical",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["nameOfSchoolPracticalUnit","area","numberOfPracticeTeachingInSchool","experimentalCourses","numberOfPracticeStudents"],attr:["校内实践(实验,实训)单位名称","使用面积","校内实践教学工位数","承接实践课程数","实践学生人数/学年"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.ShiJianJiaoXue.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.ShiJianJiaoXue.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfSchoolPracticalUnit",label:"校内实践(实验,实训)单位名称"}}),n("el-table-column",{attrs:{prop:"area",label:"使用面积"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeTeachingInSchool",label:"校内实践教学工位数"}}),n("el-table-column",{attrs:{prop:"experimentalCourses",label:"承接实践课程"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeStudents",label:"实践学生人数/学年"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.ShiJianJiaoXue,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.ShiJianJiaoXue,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"校内实践信息",visible:t.part3.ShiJianJiaoXue.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.ShiJianJiaoXue.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"校内实践(实验,实训)单位名称"}},[n("el-input",{model:{value:t.tempData.nameOfSchoolPracticalUnit,callback:function(e){t.$set(t.tempData,"nameOfSchoolPracticalUnit",e)},expression:"tempData.nameOfSchoolPracticalUnit"}})],1),n("el-form-item",{attrs:{label:"使用面积"}},[n("el-input",{model:{value:t.tempData.area,callback:function(e){t.$set(t.tempData,"area",e)},expression:"tempData.area"}})],1),n("el-form-item",{attrs:{label:"校内实践教学工位数"}},[n("el-input",{model:{value:t.tempData.numberOfPracticeTeachingInSchool,callback:function(e){t.$set(t.tempData,"numberOfPracticeTeachingInSchool",e)},expression:"tempData.numberOfPracticeTeachingInSchool"}})],1),n("el-form-item",{attrs:{label:"承接实践课程"}},[n("el-input",{model:{value:t.tempData.experimentalCourses,callback:function(e){t.$set(t.tempData,"experimentalCourses",e)},expression:"tempData.experimentalCourses"}})],1),n("el-form-item",{attrs:{label:"实践学生人数/学年"}},[n("el-input",{model:{value:t.tempData.numberOfPracticeStudents,callback:function(e){t.$set(t.tempData,"numberOfPracticeStudents",e)},expression:"tempData.numberOfPracticeStudents"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.ShiJianJiaoXue.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.ShiJianJiaoXue)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.ShiJianJiaoXue)}}},[t._v("添加")])],1)],1)],1)],1)},Rt=[];function Ft(t){return Object(f["a"])({url:"/declaration-form/practical-teaching",method:"post",data:t})}function Mt(t,e){return Object(f["a"])({url:"/declaration-form/practical-teaching/"+t,method:"post",data:e})}var Pt=n("2411"),Bt={props:{practicalTeachingID:{type:String}},components:{Tinymce:R["a"],UploadExcel:u["a"]},data:function(){return{uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）实践教学&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）实验实训&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）基地建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）创新创业教育&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{nameOfSchoolPracticalUnit:"",area:"",numberOfPracticeTeachingInSchool:"",experimentalCourses:"",numberOfPracticeStudents:""}]},part3:{ShiJianJiaoXue:{nameOfSchoolPracticalUnit:"",area:"",numberOfPracticeTeachingInSchool:"",experimentalCourses:"",numberOfPracticeStudents:"",tables:[[]],dialogVisible:[!1]}}}},watch:{practicalTeachingID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["校内实践(实验,实训)单位名称","使用面积","校内实践教学工位数","承接实践课程数","实践学生人数/学年"],["四创实验室","200平方米","32","156","32"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfSchoolPracticalUnit=e[n].nameOfSchoolPracticalUnit,o.area=e[n].area,o.numberOfPracticeTeachingInSchool=e[n].numberOfPracticeTeachingInSchool,o.experimentalCourses=e[n].experimentalCourses,o.numberOfPracticeStudents=e[n].numberOfPracticeStudents,this.form.info.push(o),this.part3.ShiJianJiaoXue.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createPracticalTeachingInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Ft(t.form).then((function(e){t.$emit("getPracticalTeachingID",e.data.practicalTeachingID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.ShiJianJiaoXue.tables[0].length;t++){var e={};e["nameOfSchoolPracticalUnit"]=this.part3.ShiJianJiaoXue.tables[0][t].nameOfSchoolPracticalUnit,e["area"]=this.part3.ShiJianJiaoXue.tables[0][t].area,e["numberOfPracticeTeachingInSchool"]=this.part3.ShiJianJiaoXue.tables[0][t].numberOfPracticeTeachingInSchool,e["experimentalCourses"]=this.part3.ShiJianJiaoXue.tables[0][t].experimentalCourses,e["numberOfPracticeStudents"]=this.part3.ShiJianJiaoXue.tables[0][t].numberOfPracticeStudents,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Pt["a"])(this.practicalTeachingID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.practical.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["nameOfSchoolPracticalUnit"]=t.form.info[r].nameOfSchoolPracticalUnit,i["area"]=t.form.info[r].area,i["numberOfPracticeTeachingInSchool"]=t.form.info[r].numberOfPracticeTeachingInSchool,i["experimentalCourses"]=t.form.info[r].experimentalCourses,i["numberOfPracticeStudents"]=t.form.info[r].numberOfPracticeStudents,a["default"].set(t.part3.ShiJianJiaoXue.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Mt(t.practicalTeachingID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},jt=Bt,zt=(n("ff84"),Object(v["a"])(jt,At,Rt,!1,null,"9462aa24",null)),Vt=zt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("条件保障")])])]),n("Tinymce",{ref:"condition",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"教师人数"}},[n("el-input",{model:{value:t.form.info.numberOfTeacher,callback:function(e){t.$set(t.form.info,"numberOfTeacher",e)},expression:"form.info.numberOfTeacher"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"年度运行经费"}},[n("el-input",{model:{value:t.form.info.annualOperatingExpenses,callback:function(e){t.$set(t.form.info,"annualOperatingExpenses",e)},expression:"form.info.annualOperatingExpenses"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"行政办公面积"}},[n("el-input",{model:{value:t.form.info.administrativeOfficeSpace,callback:function(e){t.$set(t.form.info,"administrativeOfficeSpace",e)},expression:"form.info.administrativeOfficeSpace"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"教学资料档案室面积"}},[n("el-input",{model:{value:t.form.info.areaOfTeachingMaterialsArchives,callback:function(e){t.$set(t.form.info,"areaOfTeachingMaterialsArchives",e)},expression:"form.info.areaOfTeachingMaterialsArchives"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"办公设施"}},[n("el-input",{model:{value:t.form.info.officeFacilities,callback:function(e){t.$set(t.form.info,"officeFacilities",e)},expression:"form.info.officeFacilities"}})],1)],1)],1)],1)},Lt=[];function Ht(t){return Object(f["a"])({url:"/declaration-form/condition-guarantee",method:"post",data:t})}function $t(t,e){return Object(f["a"])({url:"/declaration-form/condition-guarantee/"+t,method:"post",data:e})}var Jt=n("9944"),Ut={props:{conditionGuaranteeID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）专项经费&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）办公设施保障&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）办公面积&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）教学资料档案&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:{numberOfTeacher:"",annualOperatingExpenses:"",administrativeOfficeSpace:"",areaOfTeachingMaterialsArchives:"",officeFacilities:""}}}},watch:{conditionGuaranteeID:function(t,e){this.getFormInfo()}},methods:{createConditionGuaranteeInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Ht(t.form).then((function(e){t.$emit("getConditionGuaranteeID",e.data.conditionGuaranteeID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object(Jt["a"])(this.conditionGuaranteeID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.condition.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,$t(t.conditionGuaranteeID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},Wt=Ut,Gt=(n("4d47"),Object(v["a"])(Wt,Nt,Lt,!1,null,"61ec43d8",null)),Xt=Gt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("人才培养能力")])])]),n("Tinymce",{ref:"talent",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["nameOfTeacher","nameOfTeachingContest","organizer","time","awards"],attr:["教师姓名","教学竞赛名称","组织单位","时间（年份）","获奖等次(一等奖,二等奖,三等奖,优秀奖)"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.RenCaiPeiYangNengLi.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.RenCaiPeiYangNengLi.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"教师姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeachingContest",label:"教学竞赛名称"}}),n("el-table-column",{attrs:{prop:"organizer",label:"组织单位"}}),n("el-table-column",{attrs:{prop:"time",label:"时间/年月"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.RenCaiPeiYangNengLi,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.RenCaiPeiYangNengLi,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[t._v("每类5项代表性成果")]),n("el-form-item",{staticClass:"label-style",attrs:{label:"学科竞赛"}},[n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.subjectCompetitionClickAdd}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.form.outcome.subjectCompetition,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"year",label:"年度"}}),n("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),n("el-table-column",{attrs:{prop:"awardWinningWork",label:"获奖作品"}}),n("el-table-column",{attrs:{prop:"level",label:"获奖等级"}}),n("el-table-column",{attrs:{prop:"nameOfWinner",label:"获奖人姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"指导老师姓名"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.subjectCompetitionEdit(e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.subjectCompetitionDelete(e.$index)}}})],1)]}}])})],1)],1),n("el-form-item",{attrs:{label:"职业技能大赛"}},[n("el-input",{model:{value:t.form.outcome.professionalSkillsCompetition,callback:function(e){t.$set(t.form.outcome,"professionalSkillsCompetition",e)},expression:"form.outcome.professionalSkillsCompetition"}})],1),n("el-form-item",{attrs:{label:"互联网+创业大赛"}},[n("el-input",{model:{value:t.form.outcome.internetPlusEntrepreneurshipContest,callback:function(e){t.$set(t.form.outcome,"internetPlusEntrepreneurshipContest",e)},expression:"form.outcome.internetPlusEntrepreneurshipContest"}})],1),n("el-form-item",{attrs:{label:"创新创业情况"}},[n("el-input",{model:{value:t.form.outcome.innovationAndEntrepreneurship,callback:function(e){t.$set(t.form.outcome,"innovationAndEntrepreneurship",e)},expression:"form.outcome.innovationAndEntrepreneurship"}})],1),n("el-form-item",{attrs:{label:"发表论文"}},[n("el-input",{model:{value:t.form.outcome.publishTheses,callback:function(e){t.$set(t.form.outcome,"publishTheses",e)},expression:"form.outcome.publishTheses"}})],1)],1),n("el-dialog",{attrs:{title:"学科竞赛信息",visible:t.subjectCompetition.dialogVisible},on:{"update:visible":function(e){return t.$set(t.subjectCompetition,"dialogVisible",e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"年度"}},[n("el-input",{model:{value:t.tempData.year,callback:function(e){t.$set(t.tempData,"year",e)},expression:"tempData.year"}})],1),n("el-form-item",{attrs:{label:"奖项名称"}},[n("el-input",{model:{value:t.tempData.awardName,callback:function(e){t.$set(t.tempData,"awardName",e)},expression:"tempData.awardName"}})],1),n("el-form-item",{attrs:{label:"获奖作品"}},[n("el-input",{model:{value:t.tempData.awardWinningWork,callback:function(e){t.$set(t.tempData,"awardWinningWork",e)},expression:"tempData.awardWinningWork"}})],1),n("el-form-item",{attrs:{label:"获奖等级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-form-item",{attrs:{label:"获奖人姓名"}},[n("el-input",{model:{value:t.tempData.nameOfWinner,callback:function(e){t.$set(t.tempData,"nameOfWinner",e)},expression:"tempData.nameOfWinner"}})],1),n("el-form-item",{attrs:{label:"指导老师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfTeacher,callback:function(e){t.$set(t.tempData,"nameOfTeacher",e)},expression:"tempData.nameOfTeacher"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.subjectCompetitionCancel()}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subjectCompetitionSave()}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subjectCompetitionAdd()}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"教学竞赛信息",visible:t.part3.RenCaiPeiYangNengLi.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.RenCaiPeiYangNengLi.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfTeacher,callback:function(e){t.$set(t.tempData,"nameOfTeacher",e)},expression:"tempData.nameOfTeacher"}})],1),n("el-form-item",{attrs:{label:"教学竞赛名称"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingContest,callback:function(e){t.$set(t.tempData,"nameOfTeachingContest",e)},expression:"tempData.nameOfTeachingContest"}})],1),n("el-form-item",{attrs:{label:"组织单位"}},[n("el-input",{model:{value:t.tempData.organizer,callback:function(e){t.$set(t.tempData,"organizer",e)},expression:"tempData.organizer"}})],1),n("el-form-item",{attrs:{label:"时间"}},[n("el-input",{model:{value:t.tempData.time,callback:function(e){t.$set(t.tempData,"time",e)},expression:"tempData.time"}})],1),n("el-form-item",{attrs:{label:"获奖等次(一等奖,二等奖,三等奖,优秀奖)"}},[n("el-input",{model:{value:t.tempData.awards,callback:function(e){t.$set(t.tempData,"awards",e)},expression:"tempData.awards"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.RenCaiPeiYangNengLi.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.RenCaiPeiYangNengLi)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.RenCaiPeiYangNengLi)}}},[t._v("添加")])],1)],1)],1)],1)},Kt=[];function qt(t){return Object(f["a"])({url:"/declaration-form/talent-cultivation-ability",method:"post",data:t})}function Zt(t,e){return Object(f["a"])({url:"/declaration-form/talent-cultivation-ability/"+t,method:"post",data:e})}var Qt=n("3ec1"),te=n("2ef0"),ee=n.n(te),ne={props:{talentCultivationAbilityID:{type:String}},components:{Tinymce:R["a"],UploadExcel:u["a"]},data:function(){return{subjectCompetition:{dialogVisible:!1},uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教师教学比赛和教师评教&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）学生创新创业&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）毕业生就业率和就业质量&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{nameOfTeacher:"",nameOfTeachingContest:"",organizer:"",time:"",awards:""}],outcome:{subjectCompetition:[],professionalSkillsCompetition:"",internetPlusEntrepreneurshipContest:"",innovationAndEntrepreneurship:"",publishTheses:""}},part3:{RenCaiPeiYangNengLi:{tables:[[]],dialogVisible:[!1]}}}},watch:{talentCultivationAbilityID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教师姓名","教学竞赛名称","组织单位","时间（年份）","获奖等次(一等奖,二等奖,三等奖,优秀奖)"],["无名氏","蓝桥杯","河南大学软件学院","2012","一等奖"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeacher=e[n].nameOfTeacher,o.nameOfTeachingContest=e[n].nameOfTeachingContest,o.organizer=e[n].organizer,o.time=e[n].time,o.awards=e[n].awards,this.form.info.push(o),this.part3.RenCaiPeiYangNengLi.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,a["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=ee.a.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},subjectCompetitionClickAdd:function(){this.subjectCompetition.dialogVisible=!0},subjectCompetitionCancel:function(){this.tempData={},this.editStatus=!1,this.subjectCompetition.dialogVisible=!1},subjectCompetitionAdd:function(){this.form.outcome.subjectCompetition.push(this.tempData),this.tempData={},this.subjectCompetition.dialogVisible=!1},subjectCompetitionSave:function(){a["default"].set(this.form.outcome.subjectCompetition,this.editIndex,this.tempData),this.subjectCompetition.dialogVisible=!1,this.editStatus=!1},subjectCompetitionEdit:function(t,e){var n=ee.a.cloneDeep(t);this.tempData=n,this.editIndex=e,this.editStatus=!0,this.subjectCompetition.dialogVisible=!0},subjectCompetitionDelete:function(t){this.form.outcome.subjectCompetition.splice(t,1)},createTalentInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,qt(t.form).then((function(e){console.log(t.form),t.$emit("getTalentCultivationAbilityID",e.data.talentCultivationAbilityID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.RenCaiPeiYangNengLi.tables[0].length;t++){var e={};e["nameOfTeacher"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].nameOfTeacher,e["nameOfTeachingContest"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].nameOfTeachingContest,e["organizer"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].organizer,e["time"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].time,e["awards"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].awards,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Qt["a"])(this.talentCultivationAbilityID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.talent.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["nameOfTeacher"]=t.form.info[r].nameOfTeacher,i["nameOfTeachingContest"]=t.form.info[r].nameOfTeachingContest,i["organizer"]=t.form.info[r].organizer,i["time"]=t.form.info[r].time,i["awards"]=t.form.info[r].awards,a["default"].set(t.part3.RenCaiPeiYangNengLi.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Zt(t.talentCultivationAbilityID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},oe=ne,re=(n("c805"),Object(v["a"])(oe,Yt,Kt,!1,null,"72d2189e",null)),ie=re.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("今后建设计划")])])]),n("Tinymce",{ref:"future",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},ue=[];function ce(t){return Object(f["a"])({url:"/declaration-form/future-construction-plan",method:"post",data:t})}function se(t,e){return Object(f["a"])({url:"/declaration-form/future-construction-plan/"+t,method:"post",data:e})}var le=n("537c"),fe={props:{futureConstructionPlanID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）指导思路&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）基本思路&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）建设目标&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）专业建设内容&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{futureConstructionPlanID:function(t,e){this.getFormInfo()}},methods:{createFutureInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ce(t.form).then((function(e){t.$emit("getFutureConstructionPlanID",e.data.futureConstructionPlanID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object(le["a"])(this.futureConstructionPlanID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.future.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,se(t.futureConstructionPlanID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},me=fe,de=(n("86ec"),Object(v["a"])(me,ae,ue,!1,null,"ed8e4840",null)),pe=de.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("Tinymce",{ref:"opinion",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},ge=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-subtitle"},[n("span",[t._v("审核意见反馈")])])}],ve=n("fdc2"),be={props:{opinionFeedbackID:{type:String}},components:{Tinymce:R["a"]},data:function(){return{form:{content:{html:""}}}},watch:{opinionFeedbackID:function(t,e){this.getInfo()}},methods:{getInfo:function(){Object(ve["a"])(this.opinionFeedbackID).then((function(t){}))}}},ye=be,xe=(n("e8c0"),Object(v["a"])(ye,he,ge,!1,null,null,null)),we=xe.exports;function ke(t){return Object(f["a"])({url:"/declaration-form/total",method:"post",data:t})}function Se(t,e){return Object(f["a"])({url:"/declaration-form/total/"+e,method:"post",data:t})}var Ce=n("c551");function _e(t){return Object(f["a"])({url:"/declaration-form/opinion-feedback",method:"post",data:t})}var Oe=n("831c"),De=n("9695"),Te=n("4360"),Ie={components:{UploadExcel:u["a"],SvgIcon:c["a"],Principal:y,Members:I,Rules:V,Team:X,Organization:ot,CourseMaterial:mt,TeachingResearch:wt,SpecialtyConstruction:Et,PracticalTeaching:Vt,ConditionGuarantee:Xt,TalentCultivationAbility:ie,FutureConstructionPlan:pe,opinionFeedBack:we},data:function(){return{total:0,tempData:{},dialogVisible:!1,flag:!1,editorIndex:0,arrayOfGrassRootsTeachingSystemName:[],majors:[],deleteFlag:!1,updateHidden:"none",buttenHidden:"",active:0,form:{info:{formID:"",userNumber:"",organization:"",college:"",principal:"",professionalTitle:"",status:"等待审核",reviewer:"",totalScore:"",userNumberOfMarker:"",userNumberOfReviewer:"",type:"",level:"",createYear:"",principalNumber:"",faceMultiple:"",faceSchoolMajors:[]},principalID:"",membersID:"",ruleAndRegulationID:"",teamBuildingID:"",teachingOrganizationID:"",courseMaterialID:"",teachingResearchID:"",specialtyConstructionID:"",practicalTeachingID:"",conditionGuaranteeID:"",talentCultivationAbilityID:"",futureConstructionPlanID:"",opinionFeedbackID:""},formID:"",opinionFeedback:{content:{html:"<div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},created:function(){this.$route.query.formID&&(this.updateHidden="",this.buttenHidden="none",this.getFormInfo()),this.form.info.userNumber=Te["a"].getters.userNumber,this.form.info.college=Te["a"].getters.college,this.getOrganizations(),this.getMajors()},watch:{"form.info.faceMultiple":function(t,e){if(""===e&&(e=0),!0===this.deleteFlag)this.deleteFlag=!1;else if(t>e)for(var n=e;n<t;n++)a["default"].set(this.form.info.faceSchoolMajors,n,{schoolOrientedProfessionalTitlesProporation:0});else if(0==t)this.form.info.faceSchoolMajors.splice(0,this.form.info.faceSchoolMajors.length);else{for(var o=t;o<e;o++){var r=this.form.info.faceSchoolMajors[o];this.total-=r.schoolOrientedProfessionalTitlesProporation,this.form.info.faceSchoolMajors.splice(o,1)}""!==t&&0!==t||(this.total=0)}}},methods:{faceSchoolMajorDialog:function(){this.flag=!1,this.tempData={},this.dialogVisible=!0},editFaceSchoolMajor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_.cloneDeep(t);console.log(n),this.tempData=n,this.editorIndex=e,this.flag=!0,this.dialogVisible=!0,this.total-=this.tempData.schoolOrientedProfessionalTitlesProporation},confirmUpdate:function(){console.log(this.total),this.total=this.total+this.tempData.schoolOrientedProfessionalTitlesProporation,console.log(this.total),this.total>100?(this.$message.error("总比例超出100，请修改"),this.total-=this.tempData.schoolOrientedProfessionalTitlesProporation):(a["default"].set(this.form.info.faceSchoolMajors,this.editorIndex,this.tempData),this.tempData={},this.dialogVisible=!1,this.flag=!1)},deleteFaceSchoolMajor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.form.info.faceSchoolMajors.splice(e,1),this.total-=t.schoolOrientedProfessionalTitlesProporation,this.deleteFlag=!0,this.form.info.faceMultiple--},getOrganizations:function(){var t=this;Object(Ce["f"])().then((function(e){for(var n=0;n<e.data.length;n++){var o={};o.value=e.data[n],t.arrayOfGrassRootsTeachingSystemName.push(o)}console.log(t.arrayOfGrassRootsTeachingSystemName)})).catch((function(t){console.log(t)}))},handleSelect:function(t){console.log(t)},querySearch:function(t,e){var n=this.arrayOfGrassRootsTeachingSystemName,o=t?n.filter(this.createFilter(t)):n;e(o)},createFilter:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}},getMajors:function(){var t=this;Object(Ce["e"])().then((function(e){console.log(e);for(var n=0;n<e.data.length;n++){var o={};o.schoolOrientedProfessionalTitlesCode=e.data[n].schoolMajorCode,o.value=e.data[n].nameOfTheMajorInTheSchool,console.log(e.data[n]),t.majors.push(o)}})).catch((function(t){console.log(t)}))},handleSelectInfo:function(t){console.log(t),a["default"].set(this.tempData,"schoolOrientedProfessionalTitlesCode",t.schoolOrientedProfessionalTitlesCode)},querySearchInfo:function(t,e){var n=this.majors,o=t?n.filter(this.createFilterInfo(t)):n;e(o)},createFilterInfo:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}},backToTop:function(){var t=setInterval((function(){var e=document.documentElement.scrollTop||document.body.scrollTop,n=Math.floor(-e/2);document.documentElement.scrollTop=document.body.scrollTop=e+n,this.isTop=!0,0===e&&clearInterval(t)}),30)},handleStep:function(t){this.active=t},nextPage:function(){this.backToTop(),this.active++},prePage:function(){this.backToTop(),this.active--,this.active<=0&&(this.active=0)},handleSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.principal.createPrincipalInfo();case 2:return e.next=4,t.$refs.members.createMembersInfo();case 4:return e.next=6,t.$refs.rules.createRulesInfo();case 6:return e.next=8,t.$refs.teambuilding.createTeamInfo();case 8:return e.next=10,t.$refs.organization.createOrganizationInfo();case 10:return e.next=12,t.$refs.coursematerial.createCourseMaterialInfo();case 12:return e.next=14,t.$refs.teachingresearch.createTeachingReseacherInfo();case 14:return e.next=16,t.$refs.specialtyconstruction.createSpecialtyConstructionInfo();case 16:return e.next=18,t.$refs.practicalteaching.createPracticalTeachingInfo();case 18:return e.next=20,t.$refs.conditionguarantee.createConditionGuaranteeInfo();case 20:return e.next=22,t.$refs.talentcultivationability.createTalentInfo();case 22:return e.next=24,t.$refs.futureconstructionplan.createFutureInfo();case 24:return e.next=26,t.createOpinionFeedbackInfo();case 26:return e.next=28,t.createFormInfo();case 28:t.nextPage();case 29:case"end":return e.stop()}}),e)})))()},getPrincipalID:function(t){this.form.principalID=t},getMembersID:function(t){this.form.membersID=t},getRulesID:function(t){this.form.ruleAndRegulationID=t},getTeamBuildingID:function(t){this.form.teamBuildingID=t},getOrganizationID:function(t){this.form.teachingOrganizationID=t},getCourseMaterialID:function(t){this.form.courseMaterialID=t},getTeachingResearchID:function(t){this.form.teachingResearchID=t},getSpecialtyConstructionID:function(t){this.form.specialtyConstructionID=t},getPracticalTeachingID:function(t){this.form.practicalTeachingID=t},getConditionGuaranteeID:function(t){this.form.conditionGuaranteeID=t},getTalentCultivationAbilityID:function(t){this.form.talentCultivationAbilityID=t},getFutureConstructionPlanID:function(t){this.form.futureConstructionPlanID=t},createOpinionFeedbackInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e(t.opinionFeedback).then((function(e){t.form.opinionFeedbackID=e.data.opinionFeedbackID})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},createFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke(t.form).then((function(e){console.log(e.data.formID),t.form.info.formID=e.data.formID,t.updateApprovalPageInfo()})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},updateApprovalPageInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe["c"])(t.form.info).then((function(e){console.log(t.form.info)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getFormInfo:function(){var t=this;Object(De["a"])(this.$route.query.formID).then((function(e){console.log(e.data);var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);0!==Object.keys(t.form.info.userNumberOfMarker).length?(console.log(t.form.userNumberOfMarker),t.form.info.status="评定结束"):t.form.info.status="等待审核"})).catch((function(t){console.log(t)}))},handleUpdate:function(){this.$refs.principal.updateFormInfo(),this.$refs.members.updateFormInfo(),this.$refs.rules.updateFormInfo(),this.$refs.teambuilding.updateFormInfo(),this.$refs.organization.updateFormInfo(),this.$refs.coursematerial.updateFormInfo(),this.$refs.teachingresearch.updateFormInfo(),this.$refs.specialtyconstruction.updateFormInfo(),this.$refs.practicalteaching.updateFormInfo(),this.$refs.conditionguarantee.updateFormInfo(),this.$refs.talentcultivationability.updateFormInfo(),this.$refs.futureconstructionplan.updateFormInfo(),this.updateFormInfo(),this.nextPage()},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Se(t.form,t.$route.query.formID).then((function(t){})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},Ee=Ie,Ae=(n("3a0a"),Object(v["a"])(Ee,o,r,!1,null,null,null));e["default"]=Ae.exports},"2ef0":function(t,e,n){(function(t,o){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,a="4.17.21",u=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",m=500,d="__lodash_placeholder__",p=1,h=2,g=4,v=1,b=2,y=1,x=2,w=4,k=8,S=16,C=32,_=64,O=128,D=256,T=512,I=30,E="...",A=800,R=16,F=1,M=2,P=3,B=1/0,j=9007199254740991,z=17976931348623157e292,V=NaN,N=4294967295,L=N-1,H=N>>>1,$=[["ary",O],["bind",y],["bindKey",x],["curry",k],["curryRight",S],["flip",T],["partial",C],["partialRight",_],["rearg",D]],J="[object Arguments]",U="[object Array]",W="[object AsyncFunction]",G="[object Boolean]",X="[object Date]",Y="[object DOMException]",K="[object Error]",q="[object Function]",Z="[object GeneratorFunction]",Q="[object Map]",tt="[object Number]",et="[object Null]",nt="[object Object]",ot="[object Promise]",rt="[object Proxy]",it="[object RegExp]",at="[object Set]",ut="[object String]",ct="[object Symbol]",st="[object Undefined]",lt="[object WeakMap]",ft="[object WeakSet]",mt="[object ArrayBuffer]",dt="[object DataView]",pt="[object Float32Array]",ht="[object Float64Array]",gt="[object Int8Array]",vt="[object Int16Array]",bt="[object Int32Array]",yt="[object Uint8Array]",xt="[object Uint8ClampedArray]",wt="[object Uint16Array]",kt="[object Uint32Array]",St=/\b__p \+= '';/g,Ct=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,Dt=/[&<>"']/g,Tt=RegExp(Ot.source),It=RegExp(Dt.source),Et=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Rt=/<%=([\s\S]+?)%>/g,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Bt.source),zt=/^\s+/,Vt=/\s/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ht=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jt=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Kt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,Qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,te=/($^)/,ee=/['\n\r\u2028\u2029\\]/g,ne="\\ud800-\\udfff",oe="\\u0300-\\u036f",re="\\ufe20-\\ufe2f",ie="\\u20d0-\\u20ff",ae=oe+re+ie,ue="\\u2700-\\u27bf",ce="a-z\\xdf-\\xf6\\xf8-\\xff",se="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fe="\\u2000-\\u206f",me=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",he=se+le+fe+me,ge="['’]",ve="["+ne+"]",be="["+he+"]",ye="["+ae+"]",xe="\\d+",we="["+ue+"]",ke="["+ce+"]",Se="[^"+ne+he+xe+ue+ce+de+"]",Ce="\\ud83c[\\udffb-\\udfff]",_e="(?:"+ye+"|"+Ce+")",Oe="[^"+ne+"]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Ie="["+de+"]",Ee="\\u200d",Ae="(?:"+ke+"|"+Se+")",Re="(?:"+Ie+"|"+Se+")",Fe="(?:"+ge+"(?:d|ll|m|re|s|t|ve))?",Me="(?:"+ge+"(?:D|LL|M|RE|S|T|VE))?",Pe=_e+"?",Be="["+pe+"]?",je="(?:"+Ee+"(?:"+[Oe,De,Te].join("|")+")"+Be+Pe+")*",ze="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ve="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ne=Be+Pe+je,Le="(?:"+[we,De,Te].join("|")+")"+Ne,He="(?:"+[Oe+ye+"?",ye,De,Te,ve].join("|")+")",$e=RegExp(ge,"g"),Je=RegExp(ye,"g"),Ue=RegExp(Ce+"(?="+Ce+")|"+He+Ne,"g"),We=RegExp([Ie+"?"+ke+"+"+Fe+"(?="+[be,Ie,"$"].join("|")+")",Re+"+"+Me+"(?="+[be,Ie+Ae,"$"].join("|")+")",Ie+"?"+Ae+"+"+Fe,Ie+"+"+Me,Ve,ze,xe,Le].join("|"),"g"),Ge=RegExp("["+Ee+ne+ae+pe+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ke=-1,qe={};qe[pt]=qe[ht]=qe[gt]=qe[vt]=qe[bt]=qe[yt]=qe[xt]=qe[wt]=qe[kt]=!0,qe[J]=qe[U]=qe[mt]=qe[G]=qe[dt]=qe[X]=qe[K]=qe[q]=qe[Q]=qe[tt]=qe[nt]=qe[it]=qe[at]=qe[ut]=qe[lt]=!1;var Ze={};Ze[J]=Ze[U]=Ze[mt]=Ze[dt]=Ze[G]=Ze[X]=Ze[pt]=Ze[ht]=Ze[gt]=Ze[vt]=Ze[bt]=Ze[Q]=Ze[tt]=Ze[nt]=Ze[it]=Ze[at]=Ze[ut]=Ze[ct]=Ze[yt]=Ze[xt]=Ze[wt]=Ze[kt]=!0,Ze[K]=Ze[q]=Ze[lt]=!1;var Qe={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},on=parseFloat,rn=parseInt,an="object"==typeof t&&t&&t.Object===Object&&t,un="object"==typeof self&&self&&self.Object===Object&&self,cn=an||un||Function("return this")(),sn=e&&!e.nodeType&&e,ln=sn&&"object"==typeof o&&o&&!o.nodeType&&o,fn=ln&&ln.exports===sn,mn=fn&&an.process,dn=function(){try{var t=ln&&ln.require&&ln.require("util").types;return t||mn&&mn.binding&&mn.binding("util")}catch(e){}}(),pn=dn&&dn.isArrayBuffer,hn=dn&&dn.isDate,gn=dn&&dn.isMap,vn=dn&&dn.isRegExp,bn=dn&&dn.isSet,yn=dn&&dn.isTypedArray;function xn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function wn(t,e,n,o){var r=-1,i=null==t?0:t.length;while(++r<i){var a=t[r];e(o,a,n(a),t)}return o}function kn(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(!1===e(t[n],n,t))break;return t}function Sn(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function Cn(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(!e(t[n],n,t))return!1;return!0}function _n(t,e){var n=-1,o=null==t?0:t.length,r=0,i=[];while(++n<o){var a=t[n];e(a,n,t)&&(i[r++]=a)}return i}function On(t,e){var n=null==t?0:t.length;return!!n&&zn(t,e,0)>-1}function Dn(t,e,n){var o=-1,r=null==t?0:t.length;while(++o<r)if(n(e,t[o]))return!0;return!1}function Tn(t,e){var n=-1,o=null==t?0:t.length,r=Array(o);while(++n<o)r[n]=e(t[n],n,t);return r}function In(t,e){var n=-1,o=e.length,r=t.length;while(++n<o)t[r+n]=e[n];return t}function En(t,e,n,o){var r=-1,i=null==t?0:t.length;o&&i&&(n=t[++r]);while(++r<i)n=e(n,t[r],r,t);return n}function An(t,e,n,o){var r=null==t?0:t.length;o&&r&&(n=t[--r]);while(r--)n=e(n,t[r],r,t);return n}function Rn(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(e(t[n],n,t))return!0;return!1}var Fn=Hn("length");function Mn(t){return t.split("")}function Pn(t){return t.match($t)||[]}function Bn(t,e,n){var o;return n(t,(function(t,n,r){if(e(t,n,r))return o=n,!1})),o}function jn(t,e,n,o){var r=t.length,i=n+(o?1:-1);while(o?i--:++i<r)if(e(t[i],i,t))return i;return-1}function zn(t,e,n){return e===e?ho(t,e,n):jn(t,Nn,n)}function Vn(t,e,n,o){var r=n-1,i=t.length;while(++r<i)if(o(t[r],e))return r;return-1}function Nn(t){return t!==t}function Ln(t,e){var n=null==t?0:t.length;return n?Wn(t,e)/n:V}function Hn(t){return function(e){return null==e?i:e[t]}}function $n(t){return function(e){return null==t?i:t[e]}}function Jn(t,e,n,o,r){return r(t,(function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)})),n}function Un(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Wn(t,e){var n,o=-1,r=t.length;while(++o<r){var a=e(t[o]);a!==i&&(n=n===i?a:n+a)}return n}function Gn(t,e){var n=-1,o=Array(t);while(++n<t)o[n]=e(n);return o}function Xn(t,e){return Tn(e,(function(e){return[e,t[e]]}))}function Yn(t){return t?t.slice(0,yo(t)+1).replace(zt,""):t}function Kn(t){return function(e){return t(e)}}function qn(t,e){return Tn(e,(function(e){return t[e]}))}function Zn(t,e){return t.has(e)}function Qn(t,e){var n=-1,o=t.length;while(++n<o&&zn(e,t[n],0)>-1);return n}function to(t,e){var n=t.length;while(n--&&zn(e,t[n],0)>-1);return n}function eo(t,e){var n=t.length,o=0;while(n--)t[n]===e&&++o;return o}var no=$n(Qe),oo=$n(tn);function ro(t){return"\\"+nn[t]}function io(t,e){return null==t?i:t[e]}function ao(t){return Ge.test(t)}function uo(t){return Xe.test(t)}function co(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function so(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function lo(t,e){return function(n){return t(e(n))}}function fo(t,e){var n=-1,o=t.length,r=0,i=[];while(++n<o){var a=t[n];a!==e&&a!==d||(t[n]=d,i[r++]=n)}return i}function mo(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function po(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ho(t,e,n){var o=n-1,r=t.length;while(++o<r)if(t[o]===e)return o;return-1}function go(t,e,n){var o=n+1;while(o--)if(t[o]===e)return o;return o}function vo(t){return ao(t)?wo(t):Fn(t)}function bo(t){return ao(t)?ko(t):Mn(t)}function yo(t){var e=t.length;while(e--&&Vt.test(t.charAt(e)));return e}var xo=$n(en);function wo(t){var e=Ue.lastIndex=0;while(Ue.test(t))++e;return e}function ko(t){return t.match(Ue)||[]}function So(t){return t.match(We)||[]}var Co=function t(e){e=null==e?cn:_o.defaults(cn.Object(),e,_o.pick(cn,Ye));var n=e.Array,o=e.Date,r=e.Error,Vt=e.Function,$t=e.Math,ne=e.Object,oe=e.RegExp,re=e.String,ie=e.TypeError,ae=n.prototype,ue=Vt.prototype,ce=ne.prototype,se=e["__core-js_shared__"],le=ue.toString,fe=ce.hasOwnProperty,me=0,de=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pe=ce.toString,he=le.call(ne),ge=cn._,ve=oe("^"+le.call(fe).replace(Bt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=fn?e.Buffer:i,ye=e.Symbol,xe=e.Uint8Array,we=be?be.allocUnsafe:i,ke=lo(ne.getPrototypeOf,ne),Se=ne.create,Ce=ce.propertyIsEnumerable,_e=ae.splice,Oe=ye?ye.isConcatSpreadable:i,De=ye?ye.iterator:i,Te=ye?ye.toStringTag:i,Ie=function(){try{var t=Ga(ne,"defineProperty");return t({},"",{}),t}catch(e){}}(),Ee=e.clearTimeout!==cn.clearTimeout&&e.clearTimeout,Ae=o&&o.now!==cn.Date.now&&o.now,Re=e.setTimeout!==cn.setTimeout&&e.setTimeout,Fe=$t.ceil,Me=$t.floor,Pe=ne.getOwnPropertySymbols,Be=be?be.isBuffer:i,je=e.isFinite,ze=ae.join,Ve=lo(ne.keys,ne),Ne=$t.max,Le=$t.min,He=o.now,Ue=e.parseInt,We=$t.random,Ge=ae.reverse,Xe=Ga(e,"DataView"),Qe=Ga(e,"Map"),tn=Ga(e,"Promise"),en=Ga(e,"Set"),nn=Ga(e,"WeakMap"),an=Ga(ne,"create"),un=nn&&new nn,sn={},ln=Ru(Xe),mn=Ru(Qe),dn=Ru(tn),Fn=Ru(en),Mn=Ru(nn),$n=ye?ye.prototype:i,ho=$n?$n.valueOf:i,wo=$n?$n.toString:i;function ko(t){if(_l(t)&&!cl(t)&&!(t instanceof To)){if(t instanceof Do)return t;if(fe.call(t,"__wrapped__"))return Mu(t)}return new Do(t)}var Co=function(){function t(){}return function(e){if(!Cl(e))return{};if(Se)return Se(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Oo(){}function Do(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function To(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function Io(){var t=new To(this.__wrapped__);return t.__actions__=ra(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ra(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ra(this.__views__),t}function Eo(){if(this.__filtered__){var t=new To(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ao(){var t=this.__wrapped__.value(),e=this.__dir__,n=cl(t),o=e<0,r=n?t.length:0,i=Za(0,r,this.__views__),a=i.start,u=i.end,c=u-a,s=o?u:a-1,l=this.__iteratees__,f=l.length,m=0,d=Le(c,this.__takeCount__);if(!n||!o&&r==c&&d==c)return Vi(t,this.__actions__);var p=[];t:while(c--&&m<d){s+=e;var h=-1,g=t[s];while(++h<f){var v=l[h],b=v.iteratee,y=v.type,x=b(g);if(y==M)g=x;else if(!x){if(y==F)continue t;break t}}p[m++]=g}return p}function Ro(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function Fo(){this.__data__=an?an(null):{},this.size=0}function Mo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Po(t){var e=this.__data__;if(an){var n=e[t];return n===f?i:n}return fe.call(e,t)?e[t]:i}function Bo(t){var e=this.__data__;return an?e[t]!==i:fe.call(e,t)}function jo(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=an&&e===i?f:e,this}function zo(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function Vo(){this.__data__=[],this.size=0}function No(t){var e=this.__data__,n=fr(e,t);if(n<0)return!1;var o=e.length-1;return n==o?e.pop():_e.call(e,n,1),--this.size,!0}function Lo(t){var e=this.__data__,n=fr(e,t);return n<0?i:e[n][1]}function Ho(t){return fr(this.__data__,t)>-1}function $o(t,e){var n=this.__data__,o=fr(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}function Jo(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function Uo(){this.size=0,this.__data__={hash:new Ro,map:new(Qe||zo),string:new Ro}}function Wo(t){var e=Ua(this,t)["delete"](t);return this.size-=e?1:0,e}function Go(t){return Ua(this,t).get(t)}function Xo(t){return Ua(this,t).has(t)}function Yo(t,e){var n=Ua(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}function Ko(t){var e=-1,n=null==t?0:t.length;this.__data__=new Jo;while(++e<n)this.add(t[e])}function qo(t){return this.__data__.set(t,f),this}function Zo(t){return this.__data__.has(t)}function Qo(t){var e=this.__data__=new zo(t);this.size=e.size}function tr(){this.__data__=new zo,this.size=0}function er(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function nr(t){return this.__data__.get(t)}function or(t){return this.__data__.has(t)}function rr(t,e){var n=this.__data__;if(n instanceof zo){var o=n.__data__;if(!Qe||o.length<u-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jo(o)}return n.set(t,e),this.size=n.size,this}function ir(t,e){var n=cl(t),o=!n&&ul(t),r=!n&&!o&&dl(t),i=!n&&!o&&!r&&Nl(t),a=n||o||r||i,u=a?Gn(t.length,re):[],c=u.length;for(var s in t)!e&&!fe.call(t,s)||a&&("length"==s||r&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||au(s,c))||u.push(s);return u}function ar(t){var e=t.length;return e?t[bi(0,e-1)]:i}function ur(t,e){return Iu(ra(t),vr(e,0,t.length))}function cr(t){return Iu(ra(t))}function sr(t,e,n){(n!==i&&!rl(t[e],n)||n===i&&!(e in t))&&hr(t,e,n)}function lr(t,e,n){var o=t[e];fe.call(t,e)&&rl(o,n)&&(n!==i||e in t)||hr(t,e,n)}function fr(t,e){var n=t.length;while(n--)if(rl(t[n][0],e))return n;return-1}function mr(t,e,n,o){return Sr(t,(function(t,r,i){e(o,t,n(t),i)})),o}function dr(t,e){return t&&ia(e,Sf(e),t)}function pr(t,e){return t&&ia(e,Cf(e),t)}function hr(t,e,n){"__proto__"==e&&Ie?Ie(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function gr(t,e){var o=-1,r=e.length,a=n(r),u=null==t;while(++o<r)a[o]=u?i:vf(t,e[o]);return a}function vr(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function br(t,e,n,o,r,a){var u,c=e&p,s=e&h,l=e&g;if(n&&(u=r?n(t,o,r,a):n(t)),u!==i)return u;if(!Cl(t))return t;var f=cl(t);if(f){if(u=eu(t),!c)return ra(t,u)}else{var m=qa(t),d=m==q||m==Z;if(dl(t))return Xi(t,c);if(m==nt||m==J||d&&!r){if(u=s||d?{}:nu(t),!c)return s?ua(t,pr(u,t)):aa(t,dr(u,t))}else{if(!Ze[m])return r?t:{};u=ou(t,m,c)}}a||(a=new Qo);var v=a.get(t);if(v)return v;a.set(t,u),jl(t)?t.forEach((function(o){u.add(br(o,e,n,o,t,a))})):Ol(t)&&t.forEach((function(o,r){u.set(r,br(o,e,n,r,t,a))}));var b=l?s?Na:Va:s?Cf:Sf,y=f?i:b(t);return kn(y||t,(function(o,r){y&&(r=o,o=t[r]),lr(u,r,br(o,e,n,r,t,a))})),u}function yr(t){var e=Sf(t);return function(n){return xr(n,t,e)}}function xr(t,e,n){var o=n.length;if(null==t)return!o;t=ne(t);while(o--){var r=n[o],a=e[r],u=t[r];if(u===i&&!(r in t)||!a(u))return!1}return!0}function wr(t,e,n){if("function"!=typeof t)throw new ie(s);return _u((function(){t.apply(i,n)}),e)}function kr(t,e,n,o){var r=-1,i=On,a=!0,c=t.length,s=[],l=e.length;if(!c)return s;n&&(e=Tn(e,Kn(n))),o?(i=Dn,a=!1):e.length>=u&&(i=Zn,a=!1,e=new Ko(e));t:while(++r<c){var f=t[r],m=null==n?f:n(f);if(f=o||0!==f?f:0,a&&m===m){var d=l;while(d--)if(e[d]===m)continue t;s.push(f)}else i(e,m,o)||s.push(f)}return s}ko.templateSettings={escape:Et,evaluate:At,interpolate:Rt,variable:"",imports:{_:ko}},ko.prototype=Oo.prototype,ko.prototype.constructor=ko,Do.prototype=Co(Oo.prototype),Do.prototype.constructor=Do,To.prototype=Co(Oo.prototype),To.prototype.constructor=To,Ro.prototype.clear=Fo,Ro.prototype["delete"]=Mo,Ro.prototype.get=Po,Ro.prototype.has=Bo,Ro.prototype.set=jo,zo.prototype.clear=Vo,zo.prototype["delete"]=No,zo.prototype.get=Lo,zo.prototype.has=Ho,zo.prototype.set=$o,Jo.prototype.clear=Uo,Jo.prototype["delete"]=Wo,Jo.prototype.get=Go,Jo.prototype.has=Xo,Jo.prototype.set=Yo,Ko.prototype.add=Ko.prototype.push=qo,Ko.prototype.has=Zo,Qo.prototype.clear=tr,Qo.prototype["delete"]=er,Qo.prototype.get=nr,Qo.prototype.has=or,Qo.prototype.set=rr;var Sr=la(Rr),Cr=la(Fr,!0);function _r(t,e){var n=!0;return Sr(t,(function(t,o,r){return n=!!e(t,o,r),n})),n}function Or(t,e,n){var o=-1,r=t.length;while(++o<r){var a=t[o],u=e(a);if(null!=u&&(c===i?u===u&&!Vl(u):n(u,c)))var c=u,s=a}return s}function Dr(t,e,n,o){var r=t.length;n=Xl(n),n<0&&(n=-n>r?0:r+n),o=o===i||o>r?r:Xl(o),o<0&&(o+=r),o=n>o?0:Yl(o);while(n<o)t[n++]=e;return t}function Tr(t,e){var n=[];return Sr(t,(function(t,o,r){e(t,o,r)&&n.push(t)})),n}function Ir(t,e,n,o,r){var i=-1,a=t.length;n||(n=iu),r||(r=[]);while(++i<a){var u=t[i];e>0&&n(u)?e>1?Ir(u,e-1,n,o,r):In(r,u):o||(r[r.length]=u)}return r}var Er=fa(),Ar=fa(!0);function Rr(t,e){return t&&Er(t,e,Sf)}function Fr(t,e){return t&&Ar(t,e,Sf)}function Mr(t,e){return _n(e,(function(e){return wl(t[e])}))}function Pr(t,e){e=Ji(e,t);var n=0,o=e.length;while(null!=t&&n<o)t=t[Au(e[n++])];return n&&n==o?t:i}function Br(t,e,n){var o=e(t);return cl(t)?o:In(o,n(t))}function jr(t){return null==t?t===i?st:et:Te&&Te in ne(t)?Xa(t):yu(t)}function zr(t,e){return t>e}function Vr(t,e){return null!=t&&fe.call(t,e)}function Nr(t,e){return null!=t&&e in ne(t)}function Lr(t,e,n){return t>=Le(e,n)&&t<Ne(e,n)}function Hr(t,e,o){var r=o?Dn:On,a=t[0].length,u=t.length,c=u,s=n(u),l=1/0,f=[];while(c--){var m=t[c];c&&e&&(m=Tn(m,Kn(e))),l=Le(m.length,l),s[c]=!o&&(e||a>=120&&m.length>=120)?new Ko(c&&m):i}m=t[0];var d=-1,p=s[0];t:while(++d<a&&f.length<l){var h=m[d],g=e?e(h):h;if(h=o||0!==h?h:0,!(p?Zn(p,g):r(f,g,o))){c=u;while(--c){var v=s[c];if(!(v?Zn(v,g):r(t[c],g,o)))continue t}p&&p.push(g),f.push(h)}}return f}function $r(t,e,n,o){return Rr(t,(function(t,r,i){e(o,n(t),r,i)})),o}function Jr(t,e,n){e=Ji(e,t),t=wu(t,e);var o=null==t?t:t[Au(ic(e))];return null==o?i:xn(o,t,n)}function Ur(t){return _l(t)&&jr(t)==J}function Wr(t){return _l(t)&&jr(t)==mt}function Gr(t){return _l(t)&&jr(t)==X}function Xr(t,e,n,o,r){return t===e||(null==t||null==e||!_l(t)&&!_l(e)?t!==t&&e!==e:Yr(t,e,n,o,Xr,r))}function Yr(t,e,n,o,r,i){var a=cl(t),u=cl(e),c=a?U:qa(t),s=u?U:qa(e);c=c==J?nt:c,s=s==J?nt:s;var l=c==nt,f=s==nt,m=c==s;if(m&&dl(t)){if(!dl(e))return!1;a=!0,l=!1}if(m&&!l)return i||(i=new Qo),a||Nl(t)?Pa(t,e,n,o,r,i):Ba(t,e,c,n,o,r,i);if(!(n&v)){var d=l&&fe.call(t,"__wrapped__"),p=f&&fe.call(e,"__wrapped__");if(d||p){var h=d?t.value():t,g=p?e.value():e;return i||(i=new Qo),r(h,g,n,o,i)}}return!!m&&(i||(i=new Qo),ja(t,e,n,o,r,i))}function Kr(t){return _l(t)&&qa(t)==Q}function qr(t,e,n,o){var r=n.length,a=r,u=!o;if(null==t)return!a;t=ne(t);while(r--){var c=n[r];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}while(++r<a){c=n[r];var s=c[0],l=t[s],f=c[1];if(u&&c[2]){if(l===i&&!(s in t))return!1}else{var m=new Qo;if(o)var d=o(l,f,s,t,e,m);if(!(d===i?Xr(f,l,v|b,o,m):d))return!1}}return!0}function Zr(t){if(!Cl(t)||fu(t))return!1;var e=wl(t)?ve:Kt;return e.test(Ru(t))}function Qr(t){return _l(t)&&jr(t)==it}function ti(t){return _l(t)&&qa(t)==at}function ei(t){return _l(t)&&Sl(t.length)&&!!qe[jr(t)]}function ni(t){return"function"==typeof t?t:null==t?Am:"object"==typeof t?cl(t)?ci(t[0],t[1]):ui(t):Jm(t)}function oi(t){if(!du(t))return Ve(t);var e=[];for(var n in ne(t))fe.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ri(t){if(!Cl(t))return bu(t);var e=du(t),n=[];for(var o in t)("constructor"!=o||!e&&fe.call(t,o))&&n.push(o);return n}function ii(t,e){return t<e}function ai(t,e){var o=-1,r=ll(t)?n(t.length):[];return Sr(t,(function(t,n,i){r[++o]=e(t,n,i)})),r}function ui(t){var e=Wa(t);return 1==e.length&&e[0][2]?hu(e[0][0],e[0][1]):function(n){return n===t||qr(n,t,e)}}function ci(t,e){return cu(t)&&pu(e)?hu(Au(t),e):function(n){var o=vf(n,t);return o===i&&o===e?yf(n,t):Xr(e,o,v|b)}}function si(t,e,n,o,r){t!==e&&Er(e,(function(a,u){if(r||(r=new Qo),Cl(a))li(t,e,u,n,si,o,r);else{var c=o?o(Su(t,u),a,u+"",t,e,r):i;c===i&&(c=a),sr(t,u,c)}}),Cf)}function li(t,e,n,o,r,a,u){var c=Su(t,n),s=Su(e,n),l=u.get(s);if(l)sr(t,n,l);else{var f=a?a(c,s,n+"",t,e,u):i,m=f===i;if(m){var d=cl(s),p=!d&&dl(s),h=!d&&!p&&Nl(s);f=s,d||p||h?cl(c)?f=c:fl(c)?f=ra(c):p?(m=!1,f=Xi(s,!0)):h?(m=!1,f=Qi(s,!0)):f=[]:Ml(s)||ul(s)?(f=c,ul(c)?f=ql(c):Cl(c)&&!wl(c)||(f=nu(s))):m=!1}m&&(u.set(s,f),r(f,s,o,a,u),u["delete"](s)),sr(t,n,f)}}function fi(t,e){var n=t.length;if(n)return e+=e<0?n:0,au(e,n)?t[e]:i}function mi(t,e,n){e=e.length?Tn(e,(function(t){return cl(t)?function(e){return Pr(e,1===t.length?t[0]:t)}:t})):[Am];var o=-1;e=Tn(e,Kn(Ja()));var r=ai(t,(function(t,n,r){var i=Tn(e,(function(e){return e(t)}));return{criteria:i,index:++o,value:t}}));return Un(r,(function(t,e){return ea(t,e,n)}))}function di(t,e){return pi(t,e,(function(e,n){return yf(t,n)}))}function pi(t,e,n){var o=-1,r=e.length,i={};while(++o<r){var a=e[o],u=Pr(t,a);n(u,a)&&Ci(i,Ji(a,t),u)}return i}function hi(t){return function(e){return Pr(e,t)}}function gi(t,e,n,o){var r=o?Vn:zn,i=-1,a=e.length,u=t;t===e&&(e=ra(e)),n&&(u=Tn(t,Kn(n)));while(++i<a){var c=0,s=e[i],l=n?n(s):s;while((c=r(u,l,c,o))>-1)u!==t&&_e.call(u,c,1),_e.call(t,c,1)}return t}function vi(t,e){var n=t?e.length:0,o=n-1;while(n--){var r=e[n];if(n==o||r!==i){var i=r;au(r)?_e.call(t,r,1):Bi(t,r)}}return t}function bi(t,e){return t+Me(We()*(e-t+1))}function yi(t,e,o,r){var i=-1,a=Ne(Fe((e-t)/(o||1)),0),u=n(a);while(a--)u[r?a:++i]=t,t+=o;return u}function xi(t,e){var n="";if(!t||e<1||e>j)return n;do{e%2&&(n+=t),e=Me(e/2),e&&(t+=t)}while(e);return n}function wi(t,e){return Ou(xu(t,e,Am),t+"")}function ki(t){return ar(Hf(t))}function Si(t,e){var n=Hf(t);return Iu(n,vr(e,0,n.length))}function Ci(t,e,n,o){if(!Cl(t))return t;e=Ji(e,t);var r=-1,a=e.length,u=a-1,c=t;while(null!=c&&++r<a){var s=Au(e[r]),l=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(r!=u){var f=c[s];l=o?o(f,s,c):i,l===i&&(l=Cl(f)?f:au(e[r+1])?[]:{})}lr(c,s,l),c=c[s]}return t}var _i=un?function(t,e){return un.set(t,e),t}:Am,Oi=Ie?function(t,e){return Ie(t,"toString",{configurable:!0,enumerable:!1,value:Dm(e),writable:!0})}:Am;function Di(t){return Iu(Hf(t))}function Ti(t,e,o){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),o=o>i?i:o,o<0&&(o+=i),i=e>o?0:o-e>>>0,e>>>=0;var a=n(i);while(++r<i)a[r]=t[r+e];return a}function Ii(t,e){var n;return Sr(t,(function(t,o,r){return n=e(t,o,r),!n})),!!n}function Ei(t,e,n){var o=0,r=null==t?o:t.length;if("number"==typeof e&&e===e&&r<=H){while(o<r){var i=o+r>>>1,a=t[i];null!==a&&!Vl(a)&&(n?a<=e:a<e)?o=i+1:r=i}return r}return Ai(t,e,Am,n)}function Ai(t,e,n,o){var r=0,a=null==t?0:t.length;if(0===a)return 0;e=n(e);var u=e!==e,c=null===e,s=Vl(e),l=e===i;while(r<a){var f=Me((r+a)/2),m=n(t[f]),d=m!==i,p=null===m,h=m===m,g=Vl(m);if(u)var v=o||h;else v=l?h&&(o||d):c?h&&d&&(o||!p):s?h&&d&&!p&&(o||!g):!p&&!g&&(o?m<=e:m<e);v?r=f+1:a=f}return Le(a,L)}function Ri(t,e){var n=-1,o=t.length,r=0,i=[];while(++n<o){var a=t[n],u=e?e(a):a;if(!n||!rl(u,c)){var c=u;i[r++]=0===a?0:a}}return i}function Fi(t){return"number"==typeof t?t:Vl(t)?V:+t}function Mi(t){if("string"==typeof t)return t;if(cl(t))return Tn(t,Mi)+"";if(Vl(t))return wo?wo.call(t):"";var e=t+"";return"0"==e&&1/t==-B?"-0":e}function Pi(t,e,n){var o=-1,r=On,i=t.length,a=!0,c=[],s=c;if(n)a=!1,r=Dn;else if(i>=u){var l=e?null:Ia(t);if(l)return mo(l);a=!1,r=Zn,s=new Ko}else s=e?[]:c;t:while(++o<i){var f=t[o],m=e?e(f):f;if(f=n||0!==f?f:0,a&&m===m){var d=s.length;while(d--)if(s[d]===m)continue t;e&&s.push(m),c.push(f)}else r(s,m,n)||(s!==c&&s.push(m),c.push(f))}return c}function Bi(t,e){return e=Ji(e,t),t=wu(t,e),null==t||delete t[Au(ic(e))]}function ji(t,e,n,o){return Ci(t,e,n(Pr(t,e)),o)}function zi(t,e,n,o){var r=t.length,i=o?r:-1;while((o?i--:++i<r)&&e(t[i],i,t));return n?Ti(t,o?0:i,o?i+1:r):Ti(t,o?i+1:0,o?r:i)}function Vi(t,e){var n=t;return n instanceof To&&(n=n.value()),En(e,(function(t,e){return e.func.apply(e.thisArg,In([t],e.args))}),n)}function Ni(t,e,o){var r=t.length;if(r<2)return r?Pi(t[0]):[];var i=-1,a=n(r);while(++i<r){var u=t[i],c=-1;while(++c<r)c!=i&&(a[i]=kr(a[i]||u,t[c],e,o))}return Pi(Ir(a,1),e,o)}function Li(t,e,n){var o=-1,r=t.length,a=e.length,u={};while(++o<r){var c=o<a?e[o]:i;n(u,t[o],c)}return u}function Hi(t){return fl(t)?t:[]}function $i(t){return"function"==typeof t?t:Am}function Ji(t,e){return cl(t)?t:cu(t,e)?[t]:Eu(Ql(t))}var Ui=wi;function Wi(t,e,n){var o=t.length;return n=n===i?o:n,!e&&n>=o?t:Ti(t,e,n)}var Gi=Ee||function(t){return cn.clearTimeout(t)};function Xi(t,e){if(e)return t.slice();var n=t.length,o=we?we(n):new t.constructor(n);return t.copy(o),o}function Yi(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function Ki(t,e){var n=e?Yi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function qi(t){var e=new t.constructor(t.source,Gt.exec(t));return e.lastIndex=t.lastIndex,e}function Zi(t){return ho?ne(ho.call(t)):{}}function Qi(t,e){var n=e?Yi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ta(t,e){if(t!==e){var n=t!==i,o=null===t,r=t===t,a=Vl(t),u=e!==i,c=null===e,s=e===e,l=Vl(e);if(!c&&!l&&!a&&t>e||a&&u&&s&&!c&&!l||o&&u&&s||!n&&s||!r)return 1;if(!o&&!a&&!l&&t<e||l&&n&&r&&!o&&!a||c&&n&&r||!u&&r||!s)return-1}return 0}function ea(t,e,n){var o=-1,r=t.criteria,i=e.criteria,a=r.length,u=n.length;while(++o<a){var c=ta(r[o],i[o]);if(c){if(o>=u)return c;var s=n[o];return c*("desc"==s?-1:1)}}return t.index-e.index}function na(t,e,o,r){var i=-1,a=t.length,u=o.length,c=-1,s=e.length,l=Ne(a-u,0),f=n(s+l),m=!r;while(++c<s)f[c]=e[c];while(++i<u)(m||i<a)&&(f[o[i]]=t[i]);while(l--)f[c++]=t[i++];return f}function oa(t,e,o,r){var i=-1,a=t.length,u=-1,c=o.length,s=-1,l=e.length,f=Ne(a-c,0),m=n(f+l),d=!r;while(++i<f)m[i]=t[i];var p=i;while(++s<l)m[p+s]=e[s];while(++u<c)(d||i<a)&&(m[p+o[u]]=t[i++]);return m}function ra(t,e){var o=-1,r=t.length;e||(e=n(r));while(++o<r)e[o]=t[o];return e}function ia(t,e,n,o){var r=!n;n||(n={});var a=-1,u=e.length;while(++a<u){var c=e[a],s=o?o(n[c],t[c],c,n,t):i;s===i&&(s=t[c]),r?hr(n,c,s):lr(n,c,s)}return n}function aa(t,e){return ia(t,Ya(t),e)}function ua(t,e){return ia(t,Ka(t),e)}function ca(t,e){return function(n,o){var r=cl(n)?wn:mr,i=e?e():{};return r(n,t,Ja(o,2),i)}}function sa(t){return wi((function(e,n){var o=-1,r=n.length,a=r>1?n[r-1]:i,u=r>2?n[2]:i;a=t.length>3&&"function"==typeof a?(r--,a):i,u&&uu(n[0],n[1],u)&&(a=r<3?i:a,r=1),e=ne(e);while(++o<r){var c=n[o];c&&t(e,c,o,a)}return e}))}function la(t,e){return function(n,o){if(null==n)return n;if(!ll(n))return t(n,o);var r=n.length,i=e?r:-1,a=ne(n);while(e?i--:++i<r)if(!1===o(a[i],i,a))break;return n}}function fa(t){return function(e,n,o){var r=-1,i=ne(e),a=o(e),u=a.length;while(u--){var c=a[t?u:++r];if(!1===n(i[c],c,i))break}return e}}function ma(t,e,n){var o=e&y,r=ha(t);function i(){var e=this&&this!==cn&&this instanceof i?r:t;return e.apply(o?n:this,arguments)}return i}function da(t){return function(e){e=Ql(e);var n=ao(e)?bo(e):i,o=n?n[0]:e.charAt(0),r=n?Wi(n,1).join(""):e.slice(1);return o[t]()+r}}function pa(t){return function(e){return En(km(Yf(e).replace($e,"")),t,"")}}function ha(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Co(t.prototype),o=t.apply(n,e);return Cl(o)?o:n}}function ga(t,e,o){var r=ha(t);function a(){var u=arguments.length,c=n(u),s=u,l=$a(a);while(s--)c[s]=arguments[s];var f=u<3&&c[0]!==l&&c[u-1]!==l?[]:fo(c,l);if(u-=f.length,u<o)return Da(t,e,ya,a.placeholder,i,c,f,i,i,o-u);var m=this&&this!==cn&&this instanceof a?r:t;return xn(m,this,c)}return a}function va(t){return function(e,n,o){var r=ne(e);if(!ll(e)){var a=Ja(n,3);e=Sf(e),n=function(t){return a(r[t],t,r)}}var u=t(e,n,o);return u>-1?r[a?e[u]:u]:i}}function ba(t){return za((function(e){var n=e.length,o=n,r=Do.prototype.thru;t&&e.reverse();while(o--){var a=e[o];if("function"!=typeof a)throw new ie(s);if(r&&!u&&"wrapper"==Ha(a))var u=new Do([],!0)}o=u?o:n;while(++o<n){a=e[o];var c=Ha(a),l="wrapper"==c?La(a):i;u=l&&lu(l[0])&&l[1]==(O|k|C|D)&&!l[4].length&&1==l[9]?u[Ha(l[0])].apply(u,l[3]):1==a.length&&lu(a)?u[c]():u.thru(a)}return function(){var t=arguments,o=t[0];if(u&&1==t.length&&cl(o))return u.plant(o).value();var r=0,i=n?e[r].apply(this,t):o;while(++r<n)i=e[r].call(this,i);return i}}))}function ya(t,e,o,r,a,u,c,s,l,f){var m=e&O,d=e&y,p=e&x,h=e&(k|S),g=e&T,v=p?i:ha(t);function b(){var i=arguments.length,y=n(i),x=i;while(x--)y[x]=arguments[x];if(h)var w=$a(b),k=eo(y,w);if(r&&(y=na(y,r,a,h)),u&&(y=oa(y,u,c,h)),i-=k,h&&i<f){var S=fo(y,w);return Da(t,e,ya,b.placeholder,o,y,S,s,l,f-i)}var C=d?o:this,_=p?C[t]:t;return i=y.length,s?y=ku(y,s):g&&i>1&&y.reverse(),m&&l<i&&(y.length=l),this&&this!==cn&&this instanceof b&&(_=v||ha(_)),_.apply(C,y)}return b}function xa(t,e){return function(n,o){return $r(n,t,e(o),{})}}function wa(t,e){return function(n,o){var r;if(n===i&&o===i)return e;if(n!==i&&(r=n),o!==i){if(r===i)return o;"string"==typeof n||"string"==typeof o?(n=Mi(n),o=Mi(o)):(n=Fi(n),o=Fi(o)),r=t(n,o)}return r}}function ka(t){return za((function(e){return e=Tn(e,Kn(Ja())),wi((function(n){var o=this;return t(e,(function(t){return xn(t,o,n)}))}))}))}function Sa(t,e){e=e===i?" ":Mi(e);var n=e.length;if(n<2)return n?xi(e,t):e;var o=xi(e,Fe(t/vo(e)));return ao(e)?Wi(bo(o),0,t).join(""):o.slice(0,t)}function Ca(t,e,o,r){var i=e&y,a=ha(t);function u(){var e=-1,c=arguments.length,s=-1,l=r.length,f=n(l+c),m=this&&this!==cn&&this instanceof u?a:t;while(++s<l)f[s]=r[s];while(c--)f[s++]=arguments[++e];return xn(m,i?o:this,f)}return u}function _a(t){return function(e,n,o){return o&&"number"!=typeof o&&uu(e,n,o)&&(n=o=i),e=Gl(e),n===i?(n=e,e=0):n=Gl(n),o=o===i?e<n?1:-1:Gl(o),yi(e,n,o,t)}}function Oa(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Kl(e),n=Kl(n)),t(e,n)}}function Da(t,e,n,o,r,a,u,c,s,l){var f=e&k,m=f?u:i,d=f?i:u,p=f?a:i,h=f?i:a;e|=f?C:_,e&=~(f?_:C),e&w||(e&=~(y|x));var g=[t,e,r,p,m,h,d,c,s,l],v=n.apply(i,g);return lu(t)&&Cu(v,g),v.placeholder=o,Du(v,t,e)}function Ta(t){var e=$t[t];return function(t,n){if(t=Kl(t),n=null==n?0:Le(Xl(n),292),n&&je(t)){var o=(Ql(t)+"e").split("e"),r=e(o[0]+"e"+(+o[1]+n));return o=(Ql(r)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return e(t)}}var Ia=en&&1/mo(new en([,-0]))[1]==B?function(t){return new en(t)}:Vm;function Ea(t){return function(e){var n=qa(e);return n==Q?so(e):n==at?po(e):Xn(e,t(e))}}function Aa(t,e,n,o,r,a,u,c){var l=e&x;if(!l&&"function"!=typeof t)throw new ie(s);var f=o?o.length:0;if(f||(e&=~(C|_),o=r=i),u=u===i?u:Ne(Xl(u),0),c=c===i?c:Xl(c),f-=r?r.length:0,e&_){var m=o,d=r;o=r=i}var p=l?i:La(t),h=[t,e,n,o,r,m,d,a,u,c];if(p&&vu(h,p),t=h[0],e=h[1],n=h[2],o=h[3],r=h[4],c=h[9]=h[9]===i?l?0:t.length:Ne(h[9]-f,0),!c&&e&(k|S)&&(e&=~(k|S)),e&&e!=y)g=e==k||e==S?ga(t,e,c):e!=C&&e!=(y|C)||r.length?ya.apply(i,h):Ca(t,e,n,o);else var g=ma(t,e,n);var v=p?_i:Cu;return Du(v(g,h),t,e)}function Ra(t,e,n,o){return t===i||rl(t,ce[n])&&!fe.call(o,n)?e:t}function Fa(t,e,n,o,r,a){return Cl(t)&&Cl(e)&&(a.set(e,t),si(t,e,i,Fa,a),a["delete"](e)),t}function Ma(t){return Ml(t)?i:t}function Pa(t,e,n,o,r,a){var u=n&v,c=t.length,s=e.length;if(c!=s&&!(u&&s>c))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var m=-1,d=!0,p=n&b?new Ko:i;a.set(t,e),a.set(e,t);while(++m<c){var h=t[m],g=e[m];if(o)var y=u?o(g,h,m,e,t,a):o(h,g,m,t,e,a);if(y!==i){if(y)continue;d=!1;break}if(p){if(!Rn(e,(function(t,e){if(!Zn(p,e)&&(h===t||r(h,t,n,o,a)))return p.push(e)}))){d=!1;break}}else if(h!==g&&!r(h,g,n,o,a)){d=!1;break}}return a["delete"](t),a["delete"](e),d}function Ba(t,e,n,o,r,i,a){switch(n){case dt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case mt:return!(t.byteLength!=e.byteLength||!i(new xe(t),new xe(e)));case G:case X:case tt:return rl(+t,+e);case K:return t.name==e.name&&t.message==e.message;case it:case ut:return t==e+"";case Q:var u=so;case at:var c=o&v;if(u||(u=mo),t.size!=e.size&&!c)return!1;var s=a.get(t);if(s)return s==e;o|=b,a.set(t,e);var l=Pa(u(t),u(e),o,r,i,a);return a["delete"](t),l;case ct:if(ho)return ho.call(t)==ho.call(e)}return!1}function ja(t,e,n,o,r,a){var u=n&v,c=Va(t),s=c.length,l=Va(e),f=l.length;if(s!=f&&!u)return!1;var m=s;while(m--){var d=c[m];if(!(u?d in e:fe.call(e,d)))return!1}var p=a.get(t),h=a.get(e);if(p&&h)return p==e&&h==t;var g=!0;a.set(t,e),a.set(e,t);var b=u;while(++m<s){d=c[m];var y=t[d],x=e[d];if(o)var w=u?o(x,y,d,e,t,a):o(y,x,d,t,e,a);if(!(w===i?y===x||r(y,x,n,o,a):w)){g=!1;break}b||(b="constructor"==d)}if(g&&!b){var k=t.constructor,S=e.constructor;k==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof S&&S instanceof S||(g=!1)}return a["delete"](t),a["delete"](e),g}function za(t){return Ou(xu(t,i,Xu),t+"")}function Va(t){return Br(t,Sf,Ya)}function Na(t){return Br(t,Cf,Ka)}var La=un?function(t){return un.get(t)}:Vm;function Ha(t){var e=t.name+"",n=sn[e],o=fe.call(sn,e)?n.length:0;while(o--){var r=n[o],i=r.func;if(null==i||i==t)return r.name}return e}function $a(t){var e=fe.call(ko,"placeholder")?ko:t;return e.placeholder}function Ja(){var t=ko.iteratee||Rm;return t=t===Rm?ni:t,arguments.length?t(arguments[0],arguments[1]):t}function Ua(t,e){var n=t.__data__;return su(e)?n["string"==typeof e?"string":"hash"]:n.map}function Wa(t){var e=Sf(t),n=e.length;while(n--){var o=e[n],r=t[o];e[n]=[o,r,pu(r)]}return e}function Ga(t,e){var n=io(t,e);return Zr(n)?n:i}function Xa(t){var e=fe.call(t,Te),n=t[Te];try{t[Te]=i;var o=!0}catch(a){}var r=pe.call(t);return o&&(e?t[Te]=n:delete t[Te]),r}var Ya=Pe?function(t){return null==t?[]:(t=ne(t),_n(Pe(t),(function(e){return Ce.call(t,e)})))}:Xm,Ka=Pe?function(t){var e=[];while(t)In(e,Ya(t)),t=ke(t);return e}:Xm,qa=jr;function Za(t,e,n){var o=-1,r=n.length;while(++o<r){var i=n[o],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Le(e,t+a);break;case"takeRight":t=Ne(t,e-a);break}}return{start:t,end:e}}function Qa(t){var e=t.match(Lt);return e?e[1].split(Ht):[]}function tu(t,e,n){e=Ji(e,t);var o=-1,r=e.length,i=!1;while(++o<r){var a=Au(e[o]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++o!=r?i:(r=null==t?0:t.length,!!r&&Sl(r)&&au(a,r)&&(cl(t)||ul(t)))}function eu(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&fe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function nu(t){return"function"!=typeof t.constructor||du(t)?{}:Co(ke(t))}function ou(t,e,n){var o=t.constructor;switch(e){case mt:return Yi(t);case G:case X:return new o(+t);case dt:return Ki(t,n);case pt:case ht:case gt:case vt:case bt:case yt:case xt:case wt:case kt:return Qi(t,n);case Q:return new o;case tt:case ut:return new o(t);case it:return qi(t);case at:return new o;case ct:return Zi(t)}}function ru(t,e){var n=e.length;if(!n)return t;var o=n-1;return e[o]=(n>1?"& ":"")+e[o],e=e.join(n>2?", ":" "),t.replace(Nt,"{\n/* [wrapped with "+e+"] */\n")}function iu(t){return cl(t)||ul(t)||!!(Oe&&t&&t[Oe])}function au(t,e){var n=typeof t;return e=null==e?j:e,!!e&&("number"==n||"symbol"!=n&&Zt.test(t))&&t>-1&&t%1==0&&t<e}function uu(t,e,n){if(!Cl(n))return!1;var o=typeof e;return!!("number"==o?ll(n)&&au(e,n.length):"string"==o&&e in n)&&rl(n[e],t)}function cu(t,e){if(cl(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Vl(t))||(Mt.test(t)||!Ft.test(t)||null!=e&&t in ne(e))}function su(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function lu(t){var e=Ha(t),n=ko[e];if("function"!=typeof n||!(e in To.prototype))return!1;if(t===n)return!0;var o=La(n);return!!o&&t===o[0]}function fu(t){return!!de&&de in t}(Xe&&qa(new Xe(new ArrayBuffer(1)))!=dt||Qe&&qa(new Qe)!=Q||tn&&qa(tn.resolve())!=ot||en&&qa(new en)!=at||nn&&qa(new nn)!=lt)&&(qa=function(t){var e=jr(t),n=e==nt?t.constructor:i,o=n?Ru(n):"";if(o)switch(o){case ln:return dt;case mn:return Q;case dn:return ot;case Fn:return at;case Mn:return lt}return e});var mu=se?wl:Ym;function du(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ce;return t===n}function pu(t){return t===t&&!Cl(t)}function hu(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in ne(n)))}}function gu(t){var e=Ns(t,(function(t){return n.size===m&&n.clear(),t})),n=e.cache;return e}function vu(t,e){var n=t[1],o=e[1],r=n|o,i=r<(y|x|O),a=o==O&&n==k||o==O&&n==D&&t[7].length<=e[8]||o==(O|D)&&e[7].length<=e[8]&&n==k;if(!i&&!a)return t;o&y&&(t[2]=e[2],r|=n&y?0:w);var u=e[3];if(u){var c=t[3];t[3]=c?na(c,u,e[4]):u,t[4]=c?fo(t[3],d):e[4]}return u=e[5],u&&(c=t[5],t[5]=c?oa(c,u,e[6]):u,t[6]=c?fo(t[5],d):e[6]),u=e[7],u&&(t[7]=u),o&O&&(t[8]=null==t[8]?e[8]:Le(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function bu(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}function yu(t){return pe.call(t)}function xu(t,e,o){return e=Ne(e===i?t.length-1:e,0),function(){var r=arguments,i=-1,a=Ne(r.length-e,0),u=n(a);while(++i<a)u[i]=r[e+i];i=-1;var c=n(e+1);while(++i<e)c[i]=r[i];return c[e]=o(u),xn(t,this,c)}}function wu(t,e){return e.length<2?t:Pr(t,Ti(e,0,-1))}function ku(t,e){var n=t.length,o=Le(e.length,n),r=ra(t);while(o--){var a=e[o];t[o]=au(a,n)?r[a]:i}return t}function Su(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Cu=Tu(_i),_u=Re||function(t,e){return cn.setTimeout(t,e)},Ou=Tu(Oi);function Du(t,e,n){var o=e+"";return Ou(t,ru(o,Fu(Qa(o),n)))}function Tu(t){var e=0,n=0;return function(){var o=He(),r=R-(o-n);if(n=o,r>0){if(++e>=A)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Iu(t,e){var n=-1,o=t.length,r=o-1;e=e===i?o:e;while(++n<e){var a=bi(n,r),u=t[a];t[a]=t[n],t[n]=u}return t.length=e,t}var Eu=gu((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pt,(function(t,n,o,r){e.push(o?r.replace(Ut,"$1"):n||t)})),e}));function Au(t){if("string"==typeof t||Vl(t))return t;var e=t+"";return"0"==e&&1/t==-B?"-0":e}function Ru(t){if(null!=t){try{return le.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fu(t,e){return kn($,(function(n){var o="_."+n[0];e&n[1]&&!On(t,o)&&t.push(o)})),t.sort()}function Mu(t){if(t instanceof To)return t.clone();var e=new Do(t.__wrapped__,t.__chain__);return e.__actions__=ra(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Pu(t,e,o){e=(o?uu(t,e,o):e===i)?1:Ne(Xl(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];var a=0,u=0,c=n(Fe(r/e));while(a<r)c[u++]=Ti(t,a,a+=e);return c}function Bu(t){var e=-1,n=null==t?0:t.length,o=0,r=[];while(++e<n){var i=t[e];i&&(r[o++]=i)}return r}function ju(){var t=arguments.length;if(!t)return[];var e=n(t-1),o=arguments[0],r=t;while(r--)e[r-1]=arguments[r];return In(cl(o)?ra(o):[o],Ir(e,1))}var zu=wi((function(t,e){return fl(t)?kr(t,Ir(e,1,fl,!0)):[]})),Vu=wi((function(t,e){var n=ic(e);return fl(n)&&(n=i),fl(t)?kr(t,Ir(e,1,fl,!0),Ja(n,2)):[]})),Nu=wi((function(t,e){var n=ic(e);return fl(n)&&(n=i),fl(t)?kr(t,Ir(e,1,fl,!0),i,n):[]}));function Lu(t,e,n){var o=null==t?0:t.length;return o?(e=n||e===i?1:Xl(e),Ti(t,e<0?0:e,o)):[]}function Hu(t,e,n){var o=null==t?0:t.length;return o?(e=n||e===i?1:Xl(e),e=o-e,Ti(t,0,e<0?0:e)):[]}function $u(t,e){return t&&t.length?zi(t,Ja(e,3),!0,!0):[]}function Ju(t,e){return t&&t.length?zi(t,Ja(e,3),!0):[]}function Uu(t,e,n,o){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&uu(t,e,n)&&(n=0,o=r),Dr(t,e,n,o)):[]}function Wu(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var r=null==n?0:Xl(n);return r<0&&(r=Ne(o+r,0)),jn(t,Ja(e,3),r)}function Gu(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var r=o-1;return n!==i&&(r=Xl(n),r=n<0?Ne(o+r,0):Le(r,o-1)),jn(t,Ja(e,3),r,!0)}function Xu(t){var e=null==t?0:t.length;return e?Ir(t,1):[]}function Yu(t){var e=null==t?0:t.length;return e?Ir(t,B):[]}function Ku(t,e){var n=null==t?0:t.length;return n?(e=e===i?1:Xl(e),Ir(t,e)):[]}function qu(t){var e=-1,n=null==t?0:t.length,o={};while(++e<n){var r=t[e];o[r[0]]=r[1]}return o}function Zu(t){return t&&t.length?t[0]:i}function Qu(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var r=null==n?0:Xl(n);return r<0&&(r=Ne(o+r,0)),zn(t,e,r)}function tc(t){var e=null==t?0:t.length;return e?Ti(t,0,-1):[]}var ec=wi((function(t){var e=Tn(t,Hi);return e.length&&e[0]===t[0]?Hr(e):[]})),nc=wi((function(t){var e=ic(t),n=Tn(t,Hi);return e===ic(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Hr(n,Ja(e,2)):[]})),oc=wi((function(t){var e=ic(t),n=Tn(t,Hi);return e="function"==typeof e?e:i,e&&n.pop(),n.length&&n[0]===t[0]?Hr(n,i,e):[]}));function rc(t,e){return null==t?"":ze.call(t,e)}function ic(t){var e=null==t?0:t.length;return e?t[e-1]:i}function ac(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var r=o;return n!==i&&(r=Xl(n),r=r<0?Ne(o+r,0):Le(r,o-1)),e===e?go(t,e,r):jn(t,Nn,r,!0)}function uc(t,e){return t&&t.length?fi(t,Xl(e)):i}var cc=wi(sc);function sc(t,e){return t&&t.length&&e&&e.length?gi(t,e):t}function lc(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,Ja(n,2)):t}function fc(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,i,n):t}var mc=za((function(t,e){var n=null==t?0:t.length,o=gr(t,e);return vi(t,Tn(e,(function(t){return au(t,n)?+t:t})).sort(ta)),o}));function dc(t,e){var n=[];if(!t||!t.length)return n;var o=-1,r=[],i=t.length;e=Ja(e,3);while(++o<i){var a=t[o];e(a,o,t)&&(n.push(a),r.push(o))}return vi(t,r),n}function pc(t){return null==t?t:Ge.call(t)}function hc(t,e,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&uu(t,e,n)?(e=0,n=o):(e=null==e?0:Xl(e),n=n===i?o:Xl(n)),Ti(t,e,n)):[]}function gc(t,e){return Ei(t,e)}function vc(t,e,n){return Ai(t,e,Ja(n,2))}function bc(t,e){var n=null==t?0:t.length;if(n){var o=Ei(t,e);if(o<n&&rl(t[o],e))return o}return-1}function yc(t,e){return Ei(t,e,!0)}function xc(t,e,n){return Ai(t,e,Ja(n,2),!0)}function wc(t,e){var n=null==t?0:t.length;if(n){var o=Ei(t,e,!0)-1;if(rl(t[o],e))return o}return-1}function kc(t){return t&&t.length?Ri(t):[]}function Sc(t,e){return t&&t.length?Ri(t,Ja(e,2)):[]}function Cc(t){var e=null==t?0:t.length;return e?Ti(t,1,e):[]}function _c(t,e,n){return t&&t.length?(e=n||e===i?1:Xl(e),Ti(t,0,e<0?0:e)):[]}function Oc(t,e,n){var o=null==t?0:t.length;return o?(e=n||e===i?1:Xl(e),e=o-e,Ti(t,e<0?0:e,o)):[]}function Dc(t,e){return t&&t.length?zi(t,Ja(e,3),!1,!0):[]}function Tc(t,e){return t&&t.length?zi(t,Ja(e,3)):[]}var Ic=wi((function(t){return Pi(Ir(t,1,fl,!0))})),Ec=wi((function(t){var e=ic(t);return fl(e)&&(e=i),Pi(Ir(t,1,fl,!0),Ja(e,2))})),Ac=wi((function(t){var e=ic(t);return e="function"==typeof e?e:i,Pi(Ir(t,1,fl,!0),i,e)}));function Rc(t){return t&&t.length?Pi(t):[]}function Fc(t,e){return t&&t.length?Pi(t,Ja(e,2)):[]}function Mc(t,e){return e="function"==typeof e?e:i,t&&t.length?Pi(t,i,e):[]}function Pc(t){if(!t||!t.length)return[];var e=0;return t=_n(t,(function(t){if(fl(t))return e=Ne(t.length,e),!0})),Gn(e,(function(e){return Tn(t,Hn(e))}))}function Bc(t,e){if(!t||!t.length)return[];var n=Pc(t);return null==e?n:Tn(n,(function(t){return xn(e,i,t)}))}var jc=wi((function(t,e){return fl(t)?kr(t,e):[]})),zc=wi((function(t){return Ni(_n(t,fl))})),Vc=wi((function(t){var e=ic(t);return fl(e)&&(e=i),Ni(_n(t,fl),Ja(e,2))})),Nc=wi((function(t){var e=ic(t);return e="function"==typeof e?e:i,Ni(_n(t,fl),i,e)})),Lc=wi(Pc);function Hc(t,e){return Li(t||[],e||[],lr)}function $c(t,e){return Li(t||[],e||[],Ci)}var Jc=wi((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,Bc(t,n)}));function Uc(t){var e=ko(t);return e.__chain__=!0,e}function Wc(t,e){return e(t),t}function Gc(t,e){return e(t)}var Xc=za((function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,r=function(e){return gr(e,t)};return!(e>1||this.__actions__.length)&&o instanceof To&&au(n)?(o=o.slice(n,+n+(e?1:0)),o.__actions__.push({func:Gc,args:[r],thisArg:i}),new Do(o,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(r)}));function Yc(){return Uc(this)}function Kc(){return new Do(this.value(),this.__chain__)}function qc(){this.__values__===i&&(this.__values__=Wl(this.value()));var t=this.__index__>=this.__values__.length,e=t?i:this.__values__[this.__index__++];return{done:t,value:e}}function Zc(){return this}function Qc(t){var e,n=this;while(n instanceof Oo){var o=Mu(n);o.__index__=0,o.__values__=i,e?r.__wrapped__=o:e=o;var r=o;n=n.__wrapped__}return r.__wrapped__=t,e}function ts(){var t=this.__wrapped__;if(t instanceof To){var e=t;return this.__actions__.length&&(e=new To(this)),e=e.reverse(),e.__actions__.push({func:Gc,args:[pc],thisArg:i}),new Do(e,this.__chain__)}return this.thru(pc)}function es(){return Vi(this.__wrapped__,this.__actions__)}var ns=ca((function(t,e,n){fe.call(t,n)?++t[n]:hr(t,n,1)}));function os(t,e,n){var o=cl(t)?Cn:_r;return n&&uu(t,e,n)&&(e=i),o(t,Ja(e,3))}function rs(t,e){var n=cl(t)?_n:Tr;return n(t,Ja(e,3))}var is=va(Wu),as=va(Gu);function us(t,e){return Ir(gs(t,e),1)}function cs(t,e){return Ir(gs(t,e),B)}function ss(t,e,n){return n=n===i?1:Xl(n),Ir(gs(t,e),n)}function ls(t,e){var n=cl(t)?kn:Sr;return n(t,Ja(e,3))}function fs(t,e){var n=cl(t)?Sn:Cr;return n(t,Ja(e,3))}var ms=ca((function(t,e,n){fe.call(t,n)?t[n].push(e):hr(t,n,[e])}));function ds(t,e,n,o){t=ll(t)?t:Hf(t),n=n&&!o?Xl(n):0;var r=t.length;return n<0&&(n=Ne(r+n,0)),zl(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&zn(t,e,n)>-1}var ps=wi((function(t,e,o){var r=-1,i="function"==typeof e,a=ll(t)?n(t.length):[];return Sr(t,(function(t){a[++r]=i?xn(e,t,o):Jr(t,e,o)})),a})),hs=ca((function(t,e,n){hr(t,n,e)}));function gs(t,e){var n=cl(t)?Tn:ai;return n(t,Ja(e,3))}function vs(t,e,n,o){return null==t?[]:(cl(e)||(e=null==e?[]:[e]),n=o?i:n,cl(n)||(n=null==n?[]:[n]),mi(t,e,n))}var bs=ca((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function ys(t,e,n){var o=cl(t)?En:Jn,r=arguments.length<3;return o(t,Ja(e,4),n,r,Sr)}function xs(t,e,n){var o=cl(t)?An:Jn,r=arguments.length<3;return o(t,Ja(e,4),n,r,Cr)}function ws(t,e){var n=cl(t)?_n:Tr;return n(t,Ls(Ja(e,3)))}function ks(t){var e=cl(t)?ar:ki;return e(t)}function Ss(t,e,n){e=(n?uu(t,e,n):e===i)?1:Xl(e);var o=cl(t)?ur:Si;return o(t,e)}function Cs(t){var e=cl(t)?cr:Di;return e(t)}function _s(t){if(null==t)return 0;if(ll(t))return zl(t)?vo(t):t.length;var e=qa(t);return e==Q||e==at?t.size:oi(t).length}function Os(t,e,n){var o=cl(t)?Rn:Ii;return n&&uu(t,e,n)&&(e=i),o(t,Ja(e,3))}var Ds=wi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&uu(t,e[0],e[1])?e=[]:n>2&&uu(e[0],e[1],e[2])&&(e=[e[0]]),mi(t,Ir(e,1),[])})),Ts=Ae||function(){return cn.Date.now()};function Is(t,e){if("function"!=typeof e)throw new ie(s);return t=Xl(t),function(){if(--t<1)return e.apply(this,arguments)}}function Es(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Aa(t,O,i,i,i,i,e)}function As(t,e){var n;if("function"!=typeof e)throw new ie(s);return t=Xl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Rs=wi((function(t,e,n){var o=y;if(n.length){var r=fo(n,$a(Rs));o|=C}return Aa(t,o,e,n,r)})),Fs=wi((function(t,e,n){var o=y|x;if(n.length){var r=fo(n,$a(Fs));o|=C}return Aa(e,o,t,n,r)}));function Ms(t,e,n){e=n?i:e;var o=Aa(t,k,i,i,i,i,i,e);return o.placeholder=Ms.placeholder,o}function Ps(t,e,n){e=n?i:e;var o=Aa(t,S,i,i,i,i,i,e);return o.placeholder=Ps.placeholder,o}function Bs(t,e,n){var o,r,a,u,c,l,f=0,m=!1,d=!1,p=!0;if("function"!=typeof t)throw new ie(s);function h(e){var n=o,a=r;return o=r=i,f=e,u=t.apply(a,n),u}function g(t){return f=t,c=_u(y,e),m?h(t):u}function v(t){var n=t-l,o=t-f,r=e-n;return d?Le(r,a-o):r}function b(t){var n=t-l,o=t-f;return l===i||n>=e||n<0||d&&o>=a}function y(){var t=Ts();if(b(t))return x(t);c=_u(y,v(t))}function x(t){return c=i,p&&o?h(t):(o=r=i,u)}function w(){c!==i&&Gi(c),f=0,o=l=r=c=i}function k(){return c===i?u:x(Ts())}function S(){var t=Ts(),n=b(t);if(o=arguments,r=this,l=t,n){if(c===i)return g(l);if(d)return Gi(c),c=_u(y,e),h(l)}return c===i&&(c=_u(y,e)),u}return e=Kl(e)||0,Cl(n)&&(m=!!n.leading,d="maxWait"in n,a=d?Ne(Kl(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),S.cancel=w,S.flush=k,S}var js=wi((function(t,e){return wr(t,1,e)})),zs=wi((function(t,e,n){return wr(t,Kl(e)||0,n)}));function Vs(t){return Aa(t,T)}function Ns(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(s);var n=function(){var o=arguments,r=e?e.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=t.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(Ns.Cache||Jo),n}function Ls(t){if("function"!=typeof t)throw new ie(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Hs(t){return As(2,t)}Ns.Cache=Jo;var $s=Ui((function(t,e){e=1==e.length&&cl(e[0])?Tn(e[0],Kn(Ja())):Tn(Ir(e,1),Kn(Ja()));var n=e.length;return wi((function(o){var r=-1,i=Le(o.length,n);while(++r<i)o[r]=e[r].call(this,o[r]);return xn(t,this,o)}))})),Js=wi((function(t,e){var n=fo(e,$a(Js));return Aa(t,C,i,e,n)})),Us=wi((function(t,e){var n=fo(e,$a(Us));return Aa(t,_,i,e,n)})),Ws=za((function(t,e){return Aa(t,D,i,i,i,e)}));function Gs(t,e){if("function"!=typeof t)throw new ie(s);return e=e===i?e:Xl(e),wi(t,e)}function Xs(t,e){if("function"!=typeof t)throw new ie(s);return e=null==e?0:Ne(Xl(e),0),wi((function(n){var o=n[e],r=Wi(n,0,e);return o&&In(r,o),xn(t,this,r)}))}function Ys(t,e,n){var o=!0,r=!0;if("function"!=typeof t)throw new ie(s);return Cl(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),Bs(t,e,{leading:o,maxWait:e,trailing:r})}function Ks(t){return Es(t,1)}function qs(t,e){return Js($i(e),t)}function Zs(){if(!arguments.length)return[];var t=arguments[0];return cl(t)?t:[t]}function Qs(t){return br(t,g)}function tl(t,e){return e="function"==typeof e?e:i,br(t,g,e)}function el(t){return br(t,p|g)}function nl(t,e){return e="function"==typeof e?e:i,br(t,p|g,e)}function ol(t,e){return null==e||xr(t,e,Sf(e))}function rl(t,e){return t===e||t!==t&&e!==e}var il=Oa(zr),al=Oa((function(t,e){return t>=e})),ul=Ur(function(){return arguments}())?Ur:function(t){return _l(t)&&fe.call(t,"callee")&&!Ce.call(t,"callee")},cl=n.isArray,sl=pn?Kn(pn):Wr;function ll(t){return null!=t&&Sl(t.length)&&!wl(t)}function fl(t){return _l(t)&&ll(t)}function ml(t){return!0===t||!1===t||_l(t)&&jr(t)==G}var dl=Be||Ym,pl=hn?Kn(hn):Gr;function hl(t){return _l(t)&&1===t.nodeType&&!Ml(t)}function gl(t){if(null==t)return!0;if(ll(t)&&(cl(t)||"string"==typeof t||"function"==typeof t.splice||dl(t)||Nl(t)||ul(t)))return!t.length;var e=qa(t);if(e==Q||e==at)return!t.size;if(du(t))return!oi(t).length;for(var n in t)if(fe.call(t,n))return!1;return!0}function vl(t,e){return Xr(t,e)}function bl(t,e,n){n="function"==typeof n?n:i;var o=n?n(t,e):i;return o===i?Xr(t,e,i,n):!!o}function yl(t){if(!_l(t))return!1;var e=jr(t);return e==K||e==Y||"string"==typeof t.message&&"string"==typeof t.name&&!Ml(t)}function xl(t){return"number"==typeof t&&je(t)}function wl(t){if(!Cl(t))return!1;var e=jr(t);return e==q||e==Z||e==W||e==rt}function kl(t){return"number"==typeof t&&t==Xl(t)}function Sl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=j}function Cl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function _l(t){return null!=t&&"object"==typeof t}var Ol=gn?Kn(gn):Kr;function Dl(t,e){return t===e||qr(t,e,Wa(e))}function Tl(t,e,n){return n="function"==typeof n?n:i,qr(t,e,Wa(e),n)}function Il(t){return Fl(t)&&t!=+t}function El(t){if(mu(t))throw new r(c);return Zr(t)}function Al(t){return null===t}function Rl(t){return null==t}function Fl(t){return"number"==typeof t||_l(t)&&jr(t)==tt}function Ml(t){if(!_l(t)||jr(t)!=nt)return!1;var e=ke(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==he}var Pl=vn?Kn(vn):Qr;function Bl(t){return kl(t)&&t>=-j&&t<=j}var jl=bn?Kn(bn):ti;function zl(t){return"string"==typeof t||!cl(t)&&_l(t)&&jr(t)==ut}function Vl(t){return"symbol"==typeof t||_l(t)&&jr(t)==ct}var Nl=yn?Kn(yn):ei;function Ll(t){return t===i}function Hl(t){return _l(t)&&qa(t)==lt}function $l(t){return _l(t)&&jr(t)==ft}var Jl=Oa(ii),Ul=Oa((function(t,e){return t<=e}));function Wl(t){if(!t)return[];if(ll(t))return zl(t)?bo(t):ra(t);if(De&&t[De])return co(t[De]());var e=qa(t),n=e==Q?so:e==at?mo:Hf;return n(t)}function Gl(t){if(!t)return 0===t?t:0;if(t=Kl(t),t===B||t===-B){var e=t<0?-1:1;return e*z}return t===t?t:0}function Xl(t){var e=Gl(t),n=e%1;return e===e?n?e-n:e:0}function Yl(t){return t?vr(Xl(t),0,N):0}function Kl(t){if("number"==typeof t)return t;if(Vl(t))return V;if(Cl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Cl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Yn(t);var n=Yt.test(t);return n||qt.test(t)?rn(t.slice(2),n?2:8):Xt.test(t)?V:+t}function ql(t){return ia(t,Cf(t))}function Zl(t){return t?vr(Xl(t),-j,j):0===t?t:0}function Ql(t){return null==t?"":Mi(t)}var tf=sa((function(t,e){if(du(e)||ll(e))ia(e,Sf(e),t);else for(var n in e)fe.call(e,n)&&lr(t,n,e[n])})),ef=sa((function(t,e){ia(e,Cf(e),t)})),nf=sa((function(t,e,n,o){ia(e,Cf(e),t,o)})),of=sa((function(t,e,n,o){ia(e,Sf(e),t,o)})),rf=za(gr);function af(t,e){var n=Co(t);return null==e?n:dr(n,e)}var uf=wi((function(t,e){t=ne(t);var n=-1,o=e.length,r=o>2?e[2]:i;r&&uu(e[0],e[1],r)&&(o=1);while(++n<o){var a=e[n],u=Cf(a),c=-1,s=u.length;while(++c<s){var l=u[c],f=t[l];(f===i||rl(f,ce[l])&&!fe.call(t,l))&&(t[l]=a[l])}}return t})),cf=wi((function(t){return t.push(i,Fa),xn(Tf,i,t)}));function sf(t,e){return Bn(t,Ja(e,3),Rr)}function lf(t,e){return Bn(t,Ja(e,3),Fr)}function ff(t,e){return null==t?t:Er(t,Ja(e,3),Cf)}function mf(t,e){return null==t?t:Ar(t,Ja(e,3),Cf)}function df(t,e){return t&&Rr(t,Ja(e,3))}function pf(t,e){return t&&Fr(t,Ja(e,3))}function hf(t){return null==t?[]:Mr(t,Sf(t))}function gf(t){return null==t?[]:Mr(t,Cf(t))}function vf(t,e,n){var o=null==t?i:Pr(t,e);return o===i?n:o}function bf(t,e){return null!=t&&tu(t,e,Vr)}function yf(t,e){return null!=t&&tu(t,e,Nr)}var xf=xa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),t[e]=n}),Dm(Am)),wf=xa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),fe.call(t,e)?t[e].push(n):t[e]=[n]}),Ja),kf=wi(Jr);function Sf(t){return ll(t)?ir(t):oi(t)}function Cf(t){return ll(t)?ir(t,!0):ri(t)}function _f(t,e){var n={};return e=Ja(e,3),Rr(t,(function(t,o,r){hr(n,e(t,o,r),t)})),n}function Of(t,e){var n={};return e=Ja(e,3),Rr(t,(function(t,o,r){hr(n,o,e(t,o,r))})),n}var Df=sa((function(t,e,n){si(t,e,n)})),Tf=sa((function(t,e,n,o){si(t,e,n,o)})),If=za((function(t,e){var n={};if(null==t)return n;var o=!1;e=Tn(e,(function(e){return e=Ji(e,t),o||(o=e.length>1),e})),ia(t,Na(t),n),o&&(n=br(n,p|h|g,Ma));var r=e.length;while(r--)Bi(n,e[r]);return n}));function Ef(t,e){return Rf(t,Ls(Ja(e)))}var Af=za((function(t,e){return null==t?{}:di(t,e)}));function Rf(t,e){if(null==t)return{};var n=Tn(Na(t),(function(t){return[t]}));return e=Ja(e),pi(t,n,(function(t,n){return e(t,n[0])}))}function Ff(t,e,n){e=Ji(e,t);var o=-1,r=e.length;r||(r=1,t=i);while(++o<r){var a=null==t?i:t[Au(e[o])];a===i&&(o=r,a=n),t=wl(a)?a.call(t):a}return t}function Mf(t,e,n){return null==t?t:Ci(t,e,n)}function Pf(t,e,n,o){return o="function"==typeof o?o:i,null==t?t:Ci(t,e,n,o)}var Bf=Ea(Sf),jf=Ea(Cf);function zf(t,e,n){var o=cl(t),r=o||dl(t)||Nl(t);if(e=Ja(e,4),null==n){var i=t&&t.constructor;n=r?o?new i:[]:Cl(t)&&wl(i)?Co(ke(t)):{}}return(r?kn:Rr)(t,(function(t,o,r){return e(n,t,o,r)})),n}function Vf(t,e){return null==t||Bi(t,e)}function Nf(t,e,n){return null==t?t:ji(t,e,$i(n))}function Lf(t,e,n,o){return o="function"==typeof o?o:i,null==t?t:ji(t,e,$i(n),o)}function Hf(t){return null==t?[]:qn(t,Sf(t))}function $f(t){return null==t?[]:qn(t,Cf(t))}function Jf(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=Kl(n),n=n===n?n:0),e!==i&&(e=Kl(e),e=e===e?e:0),vr(Kl(t),e,n)}function Uf(t,e,n){return e=Gl(e),n===i?(n=e,e=0):n=Gl(n),t=Kl(t),Lr(t,e,n)}function Wf(t,e,n){if(n&&"boolean"!=typeof n&&uu(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Gl(t),e===i?(e=t,t=0):e=Gl(e)),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var r=We();return Le(t+r*(e-t+on("1e-"+((r+"").length-1))),e)}return bi(t,e)}var Gf=pa((function(t,e,n){return e=e.toLowerCase(),t+(n?Xf(e):e)}));function Xf(t){return wm(Ql(t).toLowerCase())}function Yf(t){return t=Ql(t),t&&t.replace(Qt,no).replace(Je,"")}function Kf(t,e,n){t=Ql(t),e=Mi(e);var o=t.length;n=n===i?o:vr(Xl(n),0,o);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function qf(t){return t=Ql(t),t&&It.test(t)?t.replace(Dt,oo):t}function Zf(t){return t=Ql(t),t&&jt.test(t)?t.replace(Bt,"\\$&"):t}var Qf=pa((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),tm=pa((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),em=da("toLowerCase");function nm(t,e,n){t=Ql(t),e=Xl(e);var o=e?vo(t):0;if(!e||o>=e)return t;var r=(e-o)/2;return Sa(Me(r),n)+t+Sa(Fe(r),n)}function om(t,e,n){t=Ql(t),e=Xl(e);var o=e?vo(t):0;return e&&o<e?t+Sa(e-o,n):t}function rm(t,e,n){t=Ql(t),e=Xl(e);var o=e?vo(t):0;return e&&o<e?Sa(e-o,n)+t:t}function im(t,e,n){return n||null==e?e=0:e&&(e=+e),Ue(Ql(t).replace(zt,""),e||0)}function am(t,e,n){return e=(n?uu(t,e,n):e===i)?1:Xl(e),xi(Ql(t),e)}function um(){var t=arguments,e=Ql(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var cm=pa((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function sm(t,e,n){return n&&"number"!=typeof n&&uu(t,e,n)&&(e=n=i),n=n===i?N:n>>>0,n?(t=Ql(t),t&&("string"==typeof e||null!=e&&!Pl(e))&&(e=Mi(e),!e&&ao(t))?Wi(bo(t),0,n):t.split(e,n)):[]}var lm=pa((function(t,e,n){return t+(n?" ":"")+wm(e)}));function fm(t,e,n){return t=Ql(t),n=null==n?0:vr(Xl(n),0,t.length),e=Mi(e),t.slice(n,n+e.length)==e}function mm(t,e,n){var o=ko.templateSettings;n&&uu(t,e,n)&&(e=i),t=Ql(t),e=nf({},e,o,Ra);var a,u,c=nf({},e.imports,o.imports,Ra),s=Sf(c),f=qn(c,s),m=0,d=e.interpolate||te,p="__p += '",h=oe((e.escape||te).source+"|"+d.source+"|"+(d===Rt?Wt:te).source+"|"+(e.evaluate||te).source+"|$","g"),g="//# sourceURL="+(fe.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ke+"]")+"\n";t.replace(h,(function(e,n,o,r,i,c){return o||(o=r),p+=t.slice(m,c).replace(ee,ro),n&&(a=!0,p+="' +\n__e("+n+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),o&&(p+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),m=c+e.length,e})),p+="';\n";var v=fe.call(e,"variable")&&e.variable;if(v){if(Jt.test(v))throw new r(l)}else p="with (obj) {\n"+p+"\n}\n";p=(u?p.replace(St,""):p).replace(Ct,"$1").replace(_t,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var b=Sm((function(){return Vt(s,g+"return "+p).apply(i,f)}));if(b.source=p,yl(b))throw b;return b}function dm(t){return Ql(t).toLowerCase()}function pm(t){return Ql(t).toUpperCase()}function hm(t,e,n){if(t=Ql(t),t&&(n||e===i))return Yn(t);if(!t||!(e=Mi(e)))return t;var o=bo(t),r=bo(e),a=Qn(o,r),u=to(o,r)+1;return Wi(o,a,u).join("")}function gm(t,e,n){if(t=Ql(t),t&&(n||e===i))return t.slice(0,yo(t)+1);if(!t||!(e=Mi(e)))return t;var o=bo(t),r=to(o,bo(e))+1;return Wi(o,0,r).join("")}function vm(t,e,n){if(t=Ql(t),t&&(n||e===i))return t.replace(zt,"");if(!t||!(e=Mi(e)))return t;var o=bo(t),r=Qn(o,bo(e));return Wi(o,r).join("")}function bm(t,e){var n=I,o=E;if(Cl(e)){var r="separator"in e?e.separator:r;n="length"in e?Xl(e.length):n,o="omission"in e?Mi(e.omission):o}t=Ql(t);var a=t.length;if(ao(t)){var u=bo(t);a=u.length}if(n>=a)return t;var c=n-vo(o);if(c<1)return o;var s=u?Wi(u,0,c).join(""):t.slice(0,c);if(r===i)return s+o;if(u&&(c+=s.length-c),Pl(r)){if(t.slice(c).search(r)){var l,f=s;r.global||(r=oe(r.source,Ql(Gt.exec(r))+"g")),r.lastIndex=0;while(l=r.exec(f))var m=l.index;s=s.slice(0,m===i?c:m)}}else if(t.indexOf(Mi(r),c)!=c){var d=s.lastIndexOf(r);d>-1&&(s=s.slice(0,d))}return s+o}function ym(t){return t=Ql(t),t&&Tt.test(t)?t.replace(Ot,xo):t}var xm=pa((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),wm=da("toUpperCase");function km(t,e,n){return t=Ql(t),e=n?i:e,e===i?uo(t)?So(t):Pn(t):t.match(e)||[]}var Sm=wi((function(t,e){try{return xn(t,i,e)}catch(n){return yl(n)?n:new r(n)}})),Cm=za((function(t,e){return kn(e,(function(e){e=Au(e),hr(t,e,Rs(t[e],t))})),t}));function _m(t){var e=null==t?0:t.length,n=Ja();return t=e?Tn(t,(function(t){if("function"!=typeof t[1])throw new ie(s);return[n(t[0]),t[1]]})):[],wi((function(n){var o=-1;while(++o<e){var r=t[o];if(xn(r[0],this,n))return xn(r[1],this,n)}}))}function Om(t){return yr(br(t,p))}function Dm(t){return function(){return t}}function Tm(t,e){return null==t||t!==t?e:t}var Im=ba(),Em=ba(!0);function Am(t){return t}function Rm(t){return ni("function"==typeof t?t:br(t,p))}function Fm(t){return ui(br(t,p))}function Mm(t,e){return ci(t,br(e,p))}var Pm=wi((function(t,e){return function(n){return Jr(n,t,e)}})),Bm=wi((function(t,e){return function(n){return Jr(t,n,e)}}));function jm(t,e,n){var o=Sf(e),r=Mr(e,o);null!=n||Cl(e)&&(r.length||!o.length)||(n=e,e=t,t=this,r=Mr(e,Sf(e)));var i=!(Cl(n)&&"chain"in n)||!!n.chain,a=wl(t);return kn(r,(function(n){var o=e[n];t[n]=o,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),r=n.__actions__=ra(this.__actions__);return r.push({func:o,args:arguments,thisArg:t}),n.__chain__=e,n}return o.apply(t,In([this.value()],arguments))})})),t}function zm(){return cn._===this&&(cn._=ge),this}function Vm(){}function Nm(t){return t=Xl(t),wi((function(e){return fi(e,t)}))}var Lm=ka(Tn),Hm=ka(Cn),$m=ka(Rn);function Jm(t){return cu(t)?Hn(Au(t)):hi(t)}function Um(t){return function(e){return null==t?i:Pr(t,e)}}var Wm=_a(),Gm=_a(!0);function Xm(){return[]}function Ym(){return!1}function Km(){return{}}function qm(){return""}function Zm(){return!0}function Qm(t,e){if(t=Xl(t),t<1||t>j)return[];var n=N,o=Le(t,N);e=Ja(e),t-=N;var r=Gn(o,e);while(++n<t)e(n);return r}function td(t){return cl(t)?Tn(t,Au):Vl(t)?[t]:ra(Eu(Ql(t)))}function ed(t){var e=++me;return Ql(t)+e}var nd=wa((function(t,e){return t+e}),0),od=Ta("ceil"),rd=wa((function(t,e){return t/e}),1),id=Ta("floor");function ad(t){return t&&t.length?Or(t,Am,zr):i}function ud(t,e){return t&&t.length?Or(t,Ja(e,2),zr):i}function cd(t){return Ln(t,Am)}function sd(t,e){return Ln(t,Ja(e,2))}function ld(t){return t&&t.length?Or(t,Am,ii):i}function fd(t,e){return t&&t.length?Or(t,Ja(e,2),ii):i}var md=wa((function(t,e){return t*e}),1),dd=Ta("round"),pd=wa((function(t,e){return t-e}),0);function hd(t){return t&&t.length?Wn(t,Am):0}function gd(t,e){return t&&t.length?Wn(t,Ja(e,2)):0}return ko.after=Is,ko.ary=Es,ko.assign=tf,ko.assignIn=ef,ko.assignInWith=nf,ko.assignWith=of,ko.at=rf,ko.before=As,ko.bind=Rs,ko.bindAll=Cm,ko.bindKey=Fs,ko.castArray=Zs,ko.chain=Uc,ko.chunk=Pu,ko.compact=Bu,ko.concat=ju,ko.cond=_m,ko.conforms=Om,ko.constant=Dm,ko.countBy=ns,ko.create=af,ko.curry=Ms,ko.curryRight=Ps,ko.debounce=Bs,ko.defaults=uf,ko.defaultsDeep=cf,ko.defer=js,ko.delay=zs,ko.difference=zu,ko.differenceBy=Vu,ko.differenceWith=Nu,ko.drop=Lu,ko.dropRight=Hu,ko.dropRightWhile=$u,ko.dropWhile=Ju,ko.fill=Uu,ko.filter=rs,ko.flatMap=us,ko.flatMapDeep=cs,ko.flatMapDepth=ss,ko.flatten=Xu,ko.flattenDeep=Yu,ko.flattenDepth=Ku,ko.flip=Vs,ko.flow=Im,ko.flowRight=Em,ko.fromPairs=qu,ko.functions=hf,ko.functionsIn=gf,ko.groupBy=ms,ko.initial=tc,ko.intersection=ec,ko.intersectionBy=nc,ko.intersectionWith=oc,ko.invert=xf,ko.invertBy=wf,ko.invokeMap=ps,ko.iteratee=Rm,ko.keyBy=hs,ko.keys=Sf,ko.keysIn=Cf,ko.map=gs,ko.mapKeys=_f,ko.mapValues=Of,ko.matches=Fm,ko.matchesProperty=Mm,ko.memoize=Ns,ko.merge=Df,ko.mergeWith=Tf,ko.method=Pm,ko.methodOf=Bm,ko.mixin=jm,ko.negate=Ls,ko.nthArg=Nm,ko.omit=If,ko.omitBy=Ef,ko.once=Hs,ko.orderBy=vs,ko.over=Lm,ko.overArgs=$s,ko.overEvery=Hm,ko.overSome=$m,ko.partial=Js,ko.partialRight=Us,ko.partition=bs,ko.pick=Af,ko.pickBy=Rf,ko.property=Jm,ko.propertyOf=Um,ko.pull=cc,ko.pullAll=sc,ko.pullAllBy=lc,ko.pullAllWith=fc,ko.pullAt=mc,ko.range=Wm,ko.rangeRight=Gm,ko.rearg=Ws,ko.reject=ws,ko.remove=dc,ko.rest=Gs,ko.reverse=pc,ko.sampleSize=Ss,ko.set=Mf,ko.setWith=Pf,ko.shuffle=Cs,ko.slice=hc,ko.sortBy=Ds,ko.sortedUniq=kc,ko.sortedUniqBy=Sc,ko.split=sm,ko.spread=Xs,ko.tail=Cc,ko.take=_c,ko.takeRight=Oc,ko.takeRightWhile=Dc,ko.takeWhile=Tc,ko.tap=Wc,ko.throttle=Ys,ko.thru=Gc,ko.toArray=Wl,ko.toPairs=Bf,ko.toPairsIn=jf,ko.toPath=td,ko.toPlainObject=ql,ko.transform=zf,ko.unary=Ks,ko.union=Ic,ko.unionBy=Ec,ko.unionWith=Ac,ko.uniq=Rc,ko.uniqBy=Fc,ko.uniqWith=Mc,ko.unset=Vf,ko.unzip=Pc,ko.unzipWith=Bc,ko.update=Nf,ko.updateWith=Lf,ko.values=Hf,ko.valuesIn=$f,ko.without=jc,ko.words=km,ko.wrap=qs,ko.xor=zc,ko.xorBy=Vc,ko.xorWith=Nc,ko.zip=Lc,ko.zipObject=Hc,ko.zipObjectDeep=$c,ko.zipWith=Jc,ko.entries=Bf,ko.entriesIn=jf,ko.extend=ef,ko.extendWith=nf,jm(ko,ko),ko.add=nd,ko.attempt=Sm,ko.camelCase=Gf,ko.capitalize=Xf,ko.ceil=od,ko.clamp=Jf,ko.clone=Qs,ko.cloneDeep=el,ko.cloneDeepWith=nl,ko.cloneWith=tl,ko.conformsTo=ol,ko.deburr=Yf,ko.defaultTo=Tm,ko.divide=rd,ko.endsWith=Kf,ko.eq=rl,ko.escape=qf,ko.escapeRegExp=Zf,ko.every=os,ko.find=is,ko.findIndex=Wu,ko.findKey=sf,ko.findLast=as,ko.findLastIndex=Gu,ko.findLastKey=lf,ko.floor=id,ko.forEach=ls,ko.forEachRight=fs,ko.forIn=ff,ko.forInRight=mf,ko.forOwn=df,ko.forOwnRight=pf,ko.get=vf,ko.gt=il,ko.gte=al,ko.has=bf,ko.hasIn=yf,ko.head=Zu,ko.identity=Am,ko.includes=ds,ko.indexOf=Qu,ko.inRange=Uf,ko.invoke=kf,ko.isArguments=ul,ko.isArray=cl,ko.isArrayBuffer=sl,ko.isArrayLike=ll,ko.isArrayLikeObject=fl,ko.isBoolean=ml,ko.isBuffer=dl,ko.isDate=pl,ko.isElement=hl,ko.isEmpty=gl,ko.isEqual=vl,ko.isEqualWith=bl,ko.isError=yl,ko.isFinite=xl,ko.isFunction=wl,ko.isInteger=kl,ko.isLength=Sl,ko.isMap=Ol,ko.isMatch=Dl,ko.isMatchWith=Tl,ko.isNaN=Il,ko.isNative=El,ko.isNil=Rl,ko.isNull=Al,ko.isNumber=Fl,ko.isObject=Cl,ko.isObjectLike=_l,ko.isPlainObject=Ml,ko.isRegExp=Pl,ko.isSafeInteger=Bl,ko.isSet=jl,ko.isString=zl,ko.isSymbol=Vl,ko.isTypedArray=Nl,ko.isUndefined=Ll,ko.isWeakMap=Hl,ko.isWeakSet=$l,ko.join=rc,ko.kebabCase=Qf,ko.last=ic,ko.lastIndexOf=ac,ko.lowerCase=tm,ko.lowerFirst=em,ko.lt=Jl,ko.lte=Ul,ko.max=ad,ko.maxBy=ud,ko.mean=cd,ko.meanBy=sd,ko.min=ld,ko.minBy=fd,ko.stubArray=Xm,ko.stubFalse=Ym,ko.stubObject=Km,ko.stubString=qm,ko.stubTrue=Zm,ko.multiply=md,ko.nth=uc,ko.noConflict=zm,ko.noop=Vm,ko.now=Ts,ko.pad=nm,ko.padEnd=om,ko.padStart=rm,ko.parseInt=im,ko.random=Wf,ko.reduce=ys,ko.reduceRight=xs,ko.repeat=am,ko.replace=um,ko.result=Ff,ko.round=dd,ko.runInContext=t,ko.sample=ks,ko.size=_s,ko.snakeCase=cm,ko.some=Os,ko.sortedIndex=gc,ko.sortedIndexBy=vc,ko.sortedIndexOf=bc,ko.sortedLastIndex=yc,ko.sortedLastIndexBy=xc,ko.sortedLastIndexOf=wc,ko.startCase=lm,ko.startsWith=fm,ko.subtract=pd,ko.sum=hd,ko.sumBy=gd,ko.template=mm,ko.times=Qm,ko.toFinite=Gl,ko.toInteger=Xl,ko.toLength=Yl,ko.toLower=dm,ko.toNumber=Kl,ko.toSafeInteger=Zl,ko.toString=Ql,ko.toUpper=pm,ko.trim=hm,ko.trimEnd=gm,ko.trimStart=vm,ko.truncate=bm,ko.unescape=ym,ko.uniqueId=ed,ko.upperCase=xm,ko.upperFirst=wm,ko.each=ls,ko.eachRight=fs,ko.first=Zu,jm(ko,function(){var t={};return Rr(ko,(function(e,n){fe.call(ko.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),ko.VERSION=a,kn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){ko[t].placeholder=ko})),kn(["drop","take"],(function(t,e){To.prototype[t]=function(n){n=n===i?1:Ne(Xl(n),0);var o=this.__filtered__&&!e?new To(this):this.clone();return o.__filtered__?o.__takeCount__=Le(n,o.__takeCount__):o.__views__.push({size:Le(n,N),type:t+(o.__dir__<0?"Right":"")}),o},To.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),kn(["filter","map","takeWhile"],(function(t,e){var n=e+1,o=n==F||n==P;To.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ja(t,3),type:n}),e.__filtered__=e.__filtered__||o,e}})),kn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");To.prototype[t]=function(){return this[n](1).value()[0]}})),kn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");To.prototype[t]=function(){return this.__filtered__?new To(this):this[n](1)}})),To.prototype.compact=function(){return this.filter(Am)},To.prototype.find=function(t){return this.filter(t).head()},To.prototype.findLast=function(t){return this.reverse().find(t)},To.prototype.invokeMap=wi((function(t,e){return"function"==typeof t?new To(this):this.map((function(n){return Jr(n,t,e)}))})),To.prototype.reject=function(t){return this.filter(Ls(Ja(t)))},To.prototype.slice=function(t,e){t=Xl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new To(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(e=Xl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},To.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},To.prototype.toArray=function(){return this.take(N)},Rr(To.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),r=ko[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);r&&(ko.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof To,s=u[0],l=c||cl(e),f=function(t){var e=r.apply(ko,In([t],u));return o&&m?e[0]:e};l&&n&&"function"==typeof s&&1!=s.length&&(c=l=!1);var m=this.__chain__,d=!!this.__actions__.length,p=a&&!m,h=c&&!d;if(!a&&l){e=h?e:new To(this);var g=t.apply(e,u);return g.__actions__.push({func:Gc,args:[f],thisArg:i}),new Do(g,m)}return p&&h?t.apply(this,u):(g=this.thru(f),p?o?g.value()[0]:g.value():g)})})),kn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);ko.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var r=this.value();return e.apply(cl(r)?r:[],t)}return this[n]((function(n){return e.apply(cl(n)?n:[],t)}))}})),Rr(To.prototype,(function(t,e){var n=ko[e];if(n){var o=n.name+"";fe.call(sn,o)||(sn[o]=[]),sn[o].push({name:e,func:n})}})),sn[ya(i,x).name]=[{name:"wrapper",func:i}],To.prototype.clone=Io,To.prototype.reverse=Eo,To.prototype.value=Ao,ko.prototype.at=Xc,ko.prototype.chain=Yc,ko.prototype.commit=Kc,ko.prototype.next=qc,ko.prototype.plant=Qc,ko.prototype.reverse=ts,ko.prototype.toJSON=ko.prototype.valueOf=ko.prototype.value=es,ko.prototype.first=ko.prototype.head,De&&(ko.prototype[De]=Zc),ko},_o=Co();cn._=_o,r=function(){return _o}.call(e,n,e,o),r===i||(o.exports=r)}).call(this)}).call(this,n("c8ba"),n("62e4")(t))},3:function(t,e){},"31f1":function(t,e,n){"use strict";n("a8a8")},"32af":function(t,e,n){},"34e7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/team-building/"+t,method:"get"})}},3796:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.handleClick}}),n("div",{staticClass:"drop",on:{drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[t._v(" 将文件拖拽至此或 "),n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:t.loading,size:"mini",type:"primary"},on:{click:t.handleUpload}},[t._v(" 浏览文件 ")])],1)])},r=[],i=(n("d3b7"),n("b0c0"),n("1146")),a=n.n(i),u={props:{beforeUpload:Function,onSuccess:Function,header:Array,attr:Array},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(t){var e=t.header,n=t.res;this.excelData.header=e,this.excelData.results=n,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(t){if(t.stopPropagation(),t.preventDefault(),!this.loading){var e=t.dataTransfer.files;if(1===e.length){var n=e[0];if(!this.isExcel(n))return this.$message.error("只支持导入 .xlsx, .xls, .csv 为后缀的文件！"),!1;this.upload(n),t.stopPropagation(),t.preventDefault()}else this.$message.error("一次仅支持上传一个文件！")}},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(t){var e=t.target.files,n=e[0];n&&this.upload(n)},upload:function(t){if(this.$refs["excel-upload-input"].value=null,this.beforeUpload){var e=this.beforeUpload(t);e&&this.readerData(t)}else this.readerData(t)},readerData:function(t){var e=this;return this.loading=!0,new Promise((function(n,o){var r=new FileReader;r.onload=function(t){for(var o=t.target.result,r=a.a.read(o,{type:"array"}),i=r.SheetNames[0],u=r.Sheets[i],c=e.getHeaderRow(u),s=a.a.utils.sheet_to_json(u),l=[],f=0;f<s.length;f++){for(var m={},d=0;d<c.length;d++){var p=e.header[d],h=e.attr[d],g=s[f][h]+"";if(-1!==g.indexOf("年")&&-1!==g.indexOf("月")){var v=g.indexOf("年"),b=g.substring(0,4),y=g.indexOf("月"),x=g.substring(v+1,y),w=g.substring(y+1),k=b+"-"+x+"-"+w;m[p]=k}else m[p]=s[f][h]}l.push(m)}e.generateData({header:c,res:l}),e.loading=!1,n()},r.readAsArrayBuffer(t)}))},getHeaderRow:function(t){var e=this.header;return e},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)}}},c=u,s=(n("2a3c"),n("2877")),l=Object(s["a"])(c,o,r,!1,null,"fa563972",null);e["a"]=l.exports},"3a0a":function(t,e,n){"use strict";n("52c2")},"3ec1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/talent-cultivation-ability/"+t,method:"get"})}},4738:function(t,e,n){},"4c42":function(t,e,n){"use strict";n("4738")},"4d47":function(t,e,n){"use strict";n("96d7")},"52c2":function(t,e,n){},"537c":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/future-construction-plan/"+t,method:"get"})}},5793:function(t,e,n){},"58bd":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teachers/"+t,method:"get"})}},6160:function(t,e,n){},"6b84":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/specialty-construction/"+t,method:"get"})}},"7c27":function(t,e,n){(function(t){var e=n("7037").default;n("99af"),n("a4d3"),n("b0c0"),n("fb6a"),n("a630"),n("3ca3"),n("b64b"),n("a15b"),n("d3b7"),n("ddb0"),n("d81d"),n("25f0"),n("a9e3"),n("5319"),n("ac1f"),n("841c"),n("dca8"),n("1276"),n("4de4"),n("466d"),n("c7cd"),n("498a"),n("7db0"),n("18a5"),n("4d63"),n("a434"),n("9911"),n("e01a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("b680"),n("4ec9"),function(){"use strict";var n=function(){},o=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},r=function(t){return function(){return t}},i=function(t){return t};function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var u=function(t){return function(e){return!t(e)}},c=function(t){return function(){throw new Error(t)}},s=r(!1),l=r(!0),f=tinymce.util.Tools.resolve("tinymce.ThemeManager"),m=function(){return(m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function d(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function p(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var h,g,v,b,y,x,w=function(){return k},k=(h=function(t){return t.isNone()},{fold:function(t,e){return t()},is:s,isSome:s,isNone:l,getOr:v=function(t){return t},getOrThunk:g=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:v,orThunk:g,map:w,each:n,bind:w,exists:s,forall:l,filter:w,equals:h,equals_:h,toArray:function(){return[]},toString:r("none()")}),S=function t(e){var n=r(e),o=function(){return a},i=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?a:k},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return a},C={some:S,none:w,from:function(t){return null===t||void 0===t?k:S(t)}},_=function(t){return function(n){return r=e(o=n),(null===o?"null":"object"==r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===t;var o,r}},O=function(t){return function(n){return e(n)===t}},D=_("string"),T=_("object"),I=_("array"),E=O("boolean"),A=(b=void 0,function(t){return b===t}),R=function(t){return!(null===(e=t)||void 0===e);var e},F=O("function"),M=O("number"),P=function(t,e){if(I(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},B=Array.prototype.slice,j=Array.prototype.indexOf,z=Array.prototype.push,V=function(t,e){return j.call(t,e)},N=function(t,e){return-1<V(t,e)},L=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},H=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},$=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=B.call(t,o,o+e);n.push(r)}return n},J=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},U=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},W=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},G=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},X=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},Y=function(t,e,n){return U(t,(function(t){n=e(n,t)})),n},K=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return C.some(i);if(n(i,o))break}return C.none()}(t,e,s)},q=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},Z=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!I(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);z.apply(e,t[n])}return e},Q=function(t,e){return Z(J(t,e))},tt=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},et=function(t){var e=B.call(t,0);return e.reverse(),e},nt=function(t,e){return G(t,(function(t){return!N(e,t)}))},ot=function(t,e){var n=B.call(t,0);return n.sort(e),n},rt=function(t,e){return 0<=e&&e<t.length?C.some(t[e]):C.none()},it=function(t){return rt(t,0)},at=function(t){return rt(t,t.length-1)},ut=F(Array.from)?Array.from:function(t){return B.call(t)},ct=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return C.none()},st=function t(e){return{is:function(t){return e===t},isValue:l,isError:s,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return C.some(e)}}},lt=function t(e){return{is:s,isValue:s,isError:l,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return c(String(e))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:n,bind:function(n){return t(e)},exists:s,forall:l,toOptional:C.none}},ft={value:st,error:lt,fromOption:function(t,e){return t.fold((function(){return lt(e)}),st)}};(x=y=y||{})[x.Error=0]="Error",x[x.Value=1]="Value";var mt,dt,pt=function(t,e,n){return t.stype===y.Error?e(t.serror):n(t.svalue)},ht=function(t){return{stype:y.Value,svalue:t}},gt=function(t){return{stype:y.Error,serror:t}},vt=function(t){return t.fold(gt,ht)},bt=function(t){return pt(t,ft.error,ft.value)},yt=ht,xt=function(t){var e=[],n=[];return U(t,(function(t){pt(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},wt=gt,kt=function(t,e){return t.stype===y.Value?e(t.svalue):t},St=function(t,e){return t.stype===y.Error?e(t.serror):t},Ct=function(t,e){return t.stype===y.Value?{stype:y.Value,svalue:e(t.svalue)}:t},_t=function(t,e){return t.stype===y.Error?{stype:y.Error,serror:e(t.serror)}:t},Ot=Object.keys,Dt=Object.hasOwnProperty,Tt=function(t,e){for(var n=Ot(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},It=function(t,e){return Et(t,(function(t,n){return{k:n,v:e(t,n)}}))},Et=function(t,e){var n={};return Tt(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},At=function(t,e){var o,r,i,a,u={};return o=e,a=u,r=function(t,e){a[e]=t},i=n,Tt(t,(function(t,e){(o(t,e)?r:i)(t,e)})),u},Rt=function(t,e){var n=[];return Tt(t,(function(t,o){n.push(e(t,o))})),n},Ft=function(t,e){for(var n=Ot(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return C.some(a)}return C.none()},Mt=function(t){return Rt(t,(function(t){return t}))},Pt=function(t,e){return Bt(t,e)?C.from(t[e]):C.none()},Bt=function(t,e){return Dt.call(t,e)},jt=function(t,e){return Bt(t,e)&&void 0!==t[e]&&null!==t[e]},zt=function(t){if(!I(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return U(t,(function(o,r){var i=Ot(o);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!I(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=Ot(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!tt(e,(function(t){return N(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n},Vt=Object.prototype.hasOwnProperty,Nt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i=e[r];for(var a in i)Vt.call(i,a)&&(o[a]=t(o[a],i[a]))}return o}},Lt=Nt((function(t,e){return T(t)&&T(e)?Lt(t,e):e})),Ht=Nt((function(t,e){return e})),$t=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},Jt=zt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Ut=function(t){return Jt.defaultedThunk(r(t))},Wt=Jt.strict,Gt=Jt.asOption,Xt=Jt.defaultedThunk,Yt=(Jt.asDefaultedOptionThunk,Jt.mergeWithThunk),Kt=(zt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){var n={};return n[t]=e,n}),qt=function(t,e){return n=e,o={},Tt(t,(function(t,e){N(n,e)||(o[e]=t)})),o;var n,o},Zt=Kt,Qt=function(t){return e={},U(t,(function(t){e[t.key]=t.value})),e;var e},te=function(t,e){var n,o,r,i,a,u=(n=[],o=[],U(t,(function(t){t.fold((function(t){n.push(t)}),(function(t){o.push(t)}))})),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,ft.error(Z(a))):(i=e,0===(r=u.values).length?ft.value(i):ft.value(Lt(i,Ht.apply(void 0,r))))},ee=function(t){return o(wt,Z)(t)},ne=function(t,e){var n,o,r=xt(t);return 0<r.errors.length?ee(r.errors):(n=r.values,o=e,0<n.length?yt(Lt(o,Ht.apply(void 0,n))):yt(o))},oe=function(t){var e=xt(t);return 0<e.errors.length?ee(e.errors):yt(e.values)},re=function(t){return T(t)&&100<Ot(t).length?" removed due to size":JSON.stringify(t,null,2)},ie=function(t,e){return wt([{path:t,getErrorInfo:e}])},ae=zt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ue=function(t,e,n){return Pt(e,n).fold((function(){return o=n,r=e,ie(t,(function(){return'Could not find valid *strict* value for "'+o+'" in '+re(r)}));var o,r}),yt)},ce=function(t,e,n){var o=Pt(t,e).fold((function(){return n(t)}),i);return yt(o)},se=function(t,e,n,o){return n.fold((function(n,i,a,u){var c=function(e){var r=u.extract(t.concat([n]),o,e);return Ct(r,(function(t){return Kt(i,o(t))}))},s=function(e){return e.fold((function(){var t=Kt(i,o(C.none()));return yt(t)}),(function(e){var r=u.extract(t.concat([n]),o,e);return Ct(r,(function(t){return Kt(i,o(C.some(t)))}))}))};return a.fold((function(){return kt(ue(t,e,n),c)}),(function(t){return kt(ce(e,n,t),c)}),(function(){return kt(yt(Pt(e,n)),s)}),(function(t){return kt((r=t,i=Pt(o=e,n).map((function(t){return!0===t?r(o):t})),yt(i)),s);var o,r,i}),(function(t){var o=t(e),i=Ct(ce(e,n,r({})),(function(t){return Lt(o,t)}));return kt(i,c)}))}),(function(t,n){var r=n(e);return yt(Kt(t,o(r)))}))},le=function(t){return{extract:function(e,n,o){return St(t(o,n),(function(t){return n=t,ie(e,(function(){return n}));var n}))},toString:function(){return"val"}}},fe=function(t){var e=me(t),n=X(t,(function(t,e){return e.fold((function(e){return Lt(t,Zt(e,!0))}),r(t))}),{});return{extract:function(t,o,r){var i,a=E(r)?[]:Ot(At(r,(function(t){return void 0!==t&&null!==t}))),u=G(a,(function(t){return!jt(n,t)}));return 0===u.length?e.extract(t,o,r):(i=u,ie(t,(function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"})))},toString:e.toString}},me=function(t){return{extract:function(e,n,o){return r=e,i=o,a=n,u=J(t,(function(t){return se(r,i,t,a)})),ne(u,{});var r,i,a,u},toString:function(){return"obj{\n"+J(t,(function(t){return t.fold((function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},de=function(t){return{extract:function(e,n,o){var r=J(o,(function(o,r){return t.extract(e.concat(["["+r+"]"]),n,o)}));return oe(r)},toString:function(){return"array("+t.toString()+")"}}},pe=function(t){return{extract:function(e,n,o){for(var r=[],i=0,a=t;i<a.length;i++){var u=a[i].extract(e,n,o);if(u.stype===y.Value)return u;r.push(u)}return oe(r)},toString:function(){return"oneOf("+J(t,(function(t){return t.toString()})).join(", ")+")"}}},he=function(t,e){return{extract:function(n,o,r){var a,u,c=Ot(r),s=(a=n,u=c,de(le(t)).extract(a,i,u));return kt(s,(function(t){var i=J(t,(function(t){return ae.field(t,t,Wt(),e)}));return me(i).extract(n,o,r)}))},toString:function(){return"setOf("+e.toString()+")"}}},ge=r(le(yt)),ve=o(de,me),be=ae.state,ye=ae.field,xe=function(t,e,n,o,r){return Pt(o,r).fold((function(){return e=o,n=r,ie(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+re(e)}));var e,n}),(function(o){return o.extract(t.concat(["branch: "+r]),e,n)}))},we=function(t,e){return{extract:function(n,o,r){return Pt(r,t).fold((function(){return e=t,ie(n,(function(){return'Choice schema did not contain choice key: "'+e+'"'}));var e}),(function(t){return xe(n,o,r,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+Ot(e)}}},ke=le(yt),Se=function(t){return ve(t)},Ce=function(t){return{extract:function(e,n,o){return t().extract(e,n,o)},toString:function(){return t().toString()}}},_e=function(t){return le((function(e){return t(e).fold(wt,yt)}))},Oe=function(t,e){return he((function(e){return vt(t(e))}),e)},De=function(t,e,n){return bt((o=t,r=i,a=n,u=e.extract([o],r,a),_t(u,(function(t){return{input:a,errors:t}}))));var o,r,a,u},Te=function(t){return t.fold((function(t){throw new Error(Ee(t))}),i)},Ie=function(t,e,n){return Te(De(t,e,n))},Ee=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,J(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: ")+re(t.input);var e,n},Ae=we,Re=function(t,e){return we(t,It(e,me))},Fe=r(ke),Me=function(t,n){return le((function(o){var r=e(o);return t(o)?yt(o):wt("Expected type: "+n+" but got: "+r)}))},Pe=Me(M,"number"),Be=Me(D,"string"),je=Me(E,"boolean"),ze=Me(F,"function"),Ve=function t(e){var n=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(n){return t(e[n])}));case"Map":return n(e.keys(),t)&&n(e.values(),t);case"Set":return n(e.keys(),t);default:return!1}},Ne=le((function(t){return Ve(t)?yt(t):wt("Expected value to be acceptable for sending via postMessage")})),Le=function(t){return _e((function(e){return N(t,e)?ft.value(e):ft.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},He=function(t){return ye(t,t,Wt(),ge())},$e=function(t,e){return ye(t,t,Wt(),e)},Je=function(t){return $e(t,Be)},Ue=function(t,e){return ye(t,t,Wt(),Le(e))},We=function(t){return $e(t,ze)},Ge=function(t,e){return ye(t,t,Wt(),me(e))},Xe=function(t,e){return ye(t,t,Wt(),ve(e))},Ye=function(t,e){return ye(t,t,Wt(),de(e))},Ke=function(t){return ye(t,t,Gt(),ge())},qe=function(t,e){return ye(t,t,Gt(),e)},Ze=function(t){return qe(t,Pe)},Qe=function(t){return qe(t,Be)},tn=function(t){return qe(t,ze)},en=function(t,e){return qe(t,me(e))},nn=function(t,e){return ye(t,t,Ut(e),ge())},on=function(t,e,n){return ye(t,t,Ut(e),n)},rn=function(t,e){return on(t,e,Pe)},an=function(t,e){return on(t,e,Be)},un=function(t,e,n){return on(t,e,Le(n))},cn=function(t,e){return on(t,e,je)},sn=function(t,e){return on(t,e,ze)},ln=function(t,e,n){return on(t,e,de(n))},fn=function(t,e,n){return on(t,e,me(n))},mn=function(t,e){return be(t,e)},dn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},pn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},hn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return pn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return pn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return pn(n)},fromDom:pn,fromPoint:function(t,e,n){return C.from(t.dom.elementFromPoint(e,n)).map(pn)}},gn=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return bn(o(1),o(2))},vn=function(){return bn(0,0)},bn=function(t,e){return{major:t,minor:e}},yn={nu:bn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():gn(t,n)},unknown:vn},xn=function(t,e){var n=String(e).toLowerCase();return K(t,(function(t){return t.search(n)}))},wn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},kn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Sn=function(t,e){return-1!==t.indexOf(e)},Cn=function(t,e){return o=e,r=(n=t).length-e.length,""===o||n.length>=o.length&&n.substr(r,r+o.length)===o;var n,o,r},_n=(mt=/^\s+|\s+$/g,function(t){return t.replace(mt,"")}),On=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Dn=function(t){return function(e){return Sn(e,t)}},Tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Sn(t,"edge/")&&Sn(t,"chrome")&&Sn(t,"safari")&&Sn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,On],search:function(t){return Sn(t,"chrome")&&!Sn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Sn(t,"msie")||Sn(t,"trident")}},{name:"Opera",versionRegexes:[On,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Dn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Dn("firefox")},{name:"Safari",versionRegexes:[On,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Sn(t,"safari")||Sn(t,"mobile/"))&&Sn(t,"applewebkit")}}],In=[{name:"Windows",search:Dn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Sn(t,"iphone")||Sn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Dn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Dn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Dn("linux"),versionRegexes:[]},{name:"Solaris",search:Dn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Dn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Dn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],En={browsers:r(Tn),oses:r(In)},An="Firefox",Rn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(An),isSafari:o("Safari")}},Fn={unknown:function(){return Rn({current:void 0,version:yn.unknown()})},nu:Rn,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(An),safari:r("Safari")},Mn="Windows",Pn="Android",Bn="Solaris",jn="FreeBSD",zn="ChromeOS",Vn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Mn),isiOS:o("iOS"),isAndroid:o(Pn),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(Bn),isFreeBSD:o(jn),isChromeOS:o(zn)}},Nn={unknown:function(){return Vn({current:void 0,version:yn.unknown()})},nu:Vn,windows:r(Mn),ios:r("iOS"),android:r(Pn),linux:r("Linux"),osx:r("OSX"),solaris:r(Bn),freebsd:r(jn),chromeos:r(zn)},Ln=function(t,e){var n,o,i,a,u,c,s,l,f,m,d,p,h=En.browsers(),g=En.oses(),v=wn(h,t).fold(Fn.unknown,Fn.nu),b=kn(g,t).fold(Nn.unknown,Nn.nu);return{browser:v,os:b,deviceType:(o=v,i=t,a=e,u=(n=b).isiOS()&&!0===/ipad/i.test(i),c=n.isiOS()&&!u,s=n.isiOS()||n.isAndroid(),l=s||a("(pointer:coarse)"),f=u||!c&&s&&a("(min-device-width:768px)"),m=c||s&&!f,d=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(i),p=!m&&!f&&!d,{isiPad:r(u),isiPhone:r(c),isTablet:r(f),isPhone:r(m),isTouch:r(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(d),isDesktop:r(p)})}},Hn=function(t){return window.matchMedia(t).matches},$n=$t((function(){return Ln(navigator.userAgent,Hn)})),Jn=function(){return $n()},Un=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Wn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Gn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return n=t.dom,o=e.dom,r=n,i=o,a=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(i)&a);var n,o,r,i,a},Yn=function(t,e){return Jn().browser.isIE()?Xn(t,e):(n=e,o=t.dom,r=n.dom,o!==r&&o.contains(r));var n,o,r},Kn=function(t){return F(t)?t:s},qn=function(t,e,n){for(var o=t.dom,r=Kn(n);o.parentNode;){o=o.parentNode;var i=hn.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return C.none()},Zn=function(t,e,n){var o=e(t),r=Kn(n);return o.orThunk((function(){return r(t)?C.none():qn(t,e,r)}))},Qn=function(t,e){return Gn(t.element,e.event.target)},to=function(t){if(!jt(t,"can")&&!jt(t,"abort")&&!jt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Ie("Extracting event.handler",fe([nn("can",l),nn("abort",s),nn("run",n)]),t)},eo=function(t){var e,n,o,r,i=(n=function(t){return t.can},function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return Y(e,(function(e,o){return e&&n(o).apply(void 0,t)}),!0)}),a=(o=e=t,r=function(t){return t.abort},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y(o,(function(e,n){return e||r(n).apply(void 0,t)}),!1)});return to({can:i,abort:a,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];U(t,(function(t){t.run.apply(void 0,e)}))}})},no=r,oo=no("touchstart"),ro=no("touchmove"),io=no("touchend"),ao=no("touchcancel"),uo=no("mousedown"),co=no("mousemove"),so=no("mouseout"),lo=no("mouseup"),fo=no("mouseover"),mo=no("focusin"),po=no("focusout"),ho=no("keydown"),go=no("keyup"),vo=no("input"),bo=no("change"),yo=no("click"),xo=no("transitionend"),wo=no("selectstart"),ko=function(t){return r("alloy."+t)},So={tap:ko("tap")},Co=ko("focus"),_o=ko("blur.post"),Oo=ko("paste.post"),Do=ko("receive"),To=ko("execute"),Io=ko("focus.item"),Eo=So.tap,Ao=ko("longpress"),Ro=ko("sandbox.close"),Fo=ko("typeahead.cancel"),Mo=ko("system.init"),Po=ko("system.touchmove"),Bo=ko("system.touchend"),jo=ko("system.scroll"),zo=ko("system.resize"),Vo=ko("system.attached"),No=ko("system.detached"),Lo=ko("system.dismissRequested"),Ho=ko("system.repositionRequested"),$o=ko("focusmanager.shifted"),Jo=ko("slotcontainer.visibility"),Uo=ko("change.tab"),Wo=ko("dismiss.tab"),Go=ko("highlight"),Xo=ko("dehighlight"),Yo=function(t,e){Qo(t,t.element,e,{})},Ko=function(t,e,n){Qo(t,t.element,e,n)},qo=function(t){Yo(t,To())},Zo=function(t,e,n){Qo(t,e,n,{})},Qo=function(t,e,n,o){var r=m({target:e},o);t.getSystem().triggerEvent(n,e,r)},tr=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},er=Qt,nr=function(t,e){return{key:t,value:to({abort:e})}},or=function(t){return{key:t,value:to({run:function(t,e){e.event.prevent()}})}},rr=function(t,e){return{key:t,value:to({run:e})}},ir=function(t,e,n){return{key:t,value:to({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}},ar=function(t){return function(e){return{key:t,value:to({run:function(t,n){Qn(t,n)&&e(t,n)}})}}},ur=function(t,e,n){var o,r,i=e.partUids[n];return r=i,rr(o=t,(function(t,e){t.getSystem().getByUid(r).each((function(t){tr(t,t.element,o,e)}))}))},cr=function(t,e){return rr(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).fold((function(){return Zn(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),s).getOr(t)}),(function(t){return t}));e(t,r,n)}))},sr=function(t){return rr(t,(function(t,e){e.cut()}))},lr=function(t,e){return ar(t)(e)},fr=ar(Vo()),mr=ar(No()),dr=ar(Mo()),pr=(dt=To(),function(t){return rr(dt,t)}),hr=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),gr=function(t){return function(e){return e.dom.nodeType===t}},vr=gr(1),br=gr(3),yr=gr(9),xr=gr(11),wr=function(t){return hn.fromDom(t.dom.ownerDocument)},kr=function(t){return yr(t)?t:wr(t)},Sr=function(t){return hn.fromDom(kr(t).dom.documentElement)},Cr=function(t){return hn.fromDom(kr(t).dom.defaultView)},_r=function(t){return C.from(t.dom.parentNode).map(hn.fromDom)},Or=_r,Dr=function(t){return C.from(t.dom.offsetParent).map(hn.fromDom)},Tr=function(t){return J(t.dom.childNodes,hn.fromDom)},Ir=function(t,e){var n=t.dom.childNodes;return C.from(n[e]).map(hn.fromDom)},Er=function(t){return xr(t)&&R(t.dom.host)},Ar=F(Element.prototype.attachShadow)&&F(Node.prototype.getRootNode),Rr=r(Ar),Fr=Ar?function(t){return hn.fromDom(t.dom.getRootNode())}:kr,Mr=function(t){return Er(t)?t:hn.fromDom(kr(t).dom.body)},Pr=function(t){var e=Fr(t);return Er(e)?C.some(e):C.none()},Br=function(t){return hn.fromDom(t.dom.host)},jr=function(t){return R(t.dom.shadowRoot)},zr=function(t,e){_r(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},Vr=function(t,e){var n;(n=t,C.from(n.dom.nextSibling).map(hn.fromDom)).fold((function(){_r(t).each((function(t){Lr(t,e)}))}),(function(t){zr(t,e)}))},Nr=function(t,e){Ir(t,0).fold((function(){Lr(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},Lr=function(t,e){t.dom.appendChild(e.dom)},Hr=function(t,e){U(e,(function(e){Lr(t,e)}))},$r=function(t){t.dom.textContent="",U(Tr(t),(function(t){Jr(t)}))},Jr=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ur=function(t){var e,n=Tr(t);0<n.length&&(e=t,U(n,(function(t){zr(e,t)}))),Jr(t)},Wr=function(t){return t.dom.innerHTML},Gr=function(t,e){var n,o,r=wr(t).dom,i=hn.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,Tr(hn.fromDom(o)));Hr(i,a),$r(t),Lr(t,i)},Xr=function(t,e,n){if(!(D(n)||E(n)||M(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Yr=function(t,e,n){Xr(t.dom,e,n)},Kr=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},qr=function(t,e){return C.from(Kr(t,e))},Zr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Qr=function(t,e){t.dom.removeAttribute(e)},ti=function(t){return e=t,n=!1,hn.fromDom(e.dom.cloneNode(n));var e,n},ei=function(t){if(Er(t))return"#shadow-root";var e,n,o,r=ti(t);return e=r,n=hn.fromTag("div"),o=hn.fromDom(e.dom.cloneNode(!0)),Lr(n,o),Wr(n)},ni=er([{key:Co(),value:to({can:function(t,e){var n,o,r=e.event,i=r.originator,a=r.target;return o=a,!(Gn(n=i,t.element)&&!Gn(n,o))||(console.warn(Co()+" did not get interpreted by the desired target. \nOriginator: "+ei(i)+"\nTarget: "+ei(a)+"\nCheck the "+Co()+" event handlers"),!1)}})}]),oi=Object.freeze({__proto__:null,events:ni}),ri=0,ii=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ri+String(e)},ai=r("alloy-id-"),ui=r("data-alloy-id"),ci=ai(),si=ui(),li=function(t,e){Object.defineProperty(t.dom,si,{value:e,writable:!0})},fi=function(t){var e=vr(t)?t.dom[si]:null;return C.from(e)},mi=ii,di=i,pi=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+ei(t().element)+" is not in context.":""))}};return{debugInfo:r("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:s}},hi=pi(),gi=function(t){return J(t,(function(t){return Cn(t,"/*")?t.substring(0,t.length-"/*".length):t}))},vi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:gi(i)}},t},bi=ii("alloy-premade"),yi=function(t){return Zt(bi,t)},xi=function(t){return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,p([e.getApis(),e],n))},n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:gi(i.slice(1))}},e;var e,n,o,r,i},wi={init:function(){return ki({readState:function(){return"No State required"}})}},ki=function(t){return t},Si=function(t,e){var n={};return Tt(t,(function(t,o){Tt(t,(function(t,r){var i=Pt(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n},Ci=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},_i=function(t){return t.cHandler},Oi=function(t,e){return{name:t,handler:e}},Di=function(t,e,n){var o,r,i=m(m({},n),(o=t,r={},U(e,(function(t){r[t.name()]=t.handlers(o)})),r));return Si(i,Oi)},Ti=function(t){var e,n=F(e=t)?{can:l,abort:s,run:e}:e;return function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=[t,e].concat(o);n.abort.apply(void 0,i)?e.stop():n.can.apply(void 0,i)&&n.run.apply(void 0,i)}},Ii=function(t,e,n){var o,r,i=e[n];return i?function(t,e,o,r){try{var i=ot(o,(function(n,o){var i=n[e],a=o[e],u=r.indexOf(i),c=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<c?-1:c<u?1:0}));return ft.value(i)}catch(n){return ft.error([n])}}("Event: "+n,"name",t,i).map((function(t){var e=J(t,(function(t){return t.handler}));return eo(e)})):(o=n,r=t,ft.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(J(r,(function(t){return t.name})),null,2)]))},Ei=function(t,e){var n=Rt(t,(function(t,n){return(1===t.length?ft.value(t[0].handler):Ii(t,e,n)).map((function(o){var r=Ti(o),i=1<t.length?G(e[n],(function(e){return L(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return Zt(n,{handler:r,purpose:i})}))}));return te(n,{})},Ai="alloy.base.behaviour",Ri=function(t){var e,n;return De("custom.definition",me([ye("dom","dom",Wt(),me([He("tag"),nn("styles",{}),nn("classes",[]),nn("attributes",{}),Ke("value"),Ke("innerHtml")])),He("components"),He("uid"),nn("events",{}),nn("apis",{}),ye("eventOrder","eventOrder",((e={})[To()]=["disabling",Ai,"toggling","typeaheadevents"],e[Co()]=[Ai,"focusing","keying"],e[Mo()]=[Ai,"disabling","toggling","representing"],e[vo()]=[Ai,"representing","streaming","invalidating"],e[No()]=[Ai,"representing","item-events","tooltipping"],e[uo()]=["focusing",Ai,"item-type-events"],e[oo()]=["focusing",Ai,"item-type-events"],e[fo()]=["item-type-events","tooltipping"],e[Do()]=["receiving","reflecting","tooltipping"],n=e,Jt.mergeWithThunk(r(n))),Fe()),Ke("domModification")]),t)},Fi=function(t,e){var n=Kr(t,e);return void 0===n||""===n?[]:n.split(" ")},Mi=function(t){return void 0!==t.dom.classList},Pi=function(t,e){return r=e,i=Fi(n=t,o="class").concat([r]),Yr(n,o,i.join(" ")),!0;var n,o,r,i},Bi=function(t,e){return r=e,0<(i=G(Fi(n=t,o="class"),(function(t){return t!==r}))).length?Yr(n,o,i.join(" ")):Qr(n,o),!1;var n,o,r,i},ji=function(t,e){Mi(t)?t.dom.classList.add(e):Pi(t,e)},zi=function(t){0===(Mi(t)?t.dom.classList:Fi(t,"class")).length&&Qr(t,"class")},Vi=function(t,e){Mi(t)?t.dom.classList.remove(e):Bi(t,e),zi(t)},Ni=function(t,e){return Mi(t)&&t.dom.classList.contains(e)},Li=function(t,e){U(e,(function(e){ji(t,e)}))},Hi=function(t,e){U(e,(function(e){Vi(t,e)}))},$i=function(t){return void 0!==t.style&&F(t.style.getPropertyValue)},Ji=function t(e){var n=br(e)?e.dom.parentNode:e.dom;if(void 0===n||null===n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return Pr(hn.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=Br,function(t){return o(r(t))}))},Ui=function(){return Wi(hn.fromDom(document))},Wi=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return hn.fromDom(e)},Gi=function(t,e,n){if(!D(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);$i(t)&&t.style.setProperty(e,n)},Xi=function(t,e){$i(t)&&t.style.removeProperty(e)},Yi=function(t,e,n){var o=t.dom;Gi(o,e,n)},Ki=function(t,e){var n=t.dom;Tt(e,(function(t,e){Gi(n,e,t)}))},qi=function(t,e){var n=t.dom;Tt(e,(function(t,e){t.fold((function(){Xi(n,e)}),(function(t){Gi(n,e,t)}))}))},Zi=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Ji(t)?o:Qi(n,e)},Qi=function(t,e){return $i(t)?t.style.getPropertyValue(e):""},ta=function(t,e){var n=t.dom,o=Qi(n,e);return C.from(o).filter((function(t){return 0<t.length}))},ea=function(t,e,n){var o=hn.fromTag(t);return Yi(o,e,n),ta(o,e).isSome()},na=function(t,e){var n=t.dom;Xi(n,e),qr(t,"style").map(_n).is("")&&Qr(t,"style")},oa=function(t){return t.dom.offsetWidth},ra=function(t){return t.dom.value},ia=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},aa=function(t){var e,n,o,r=hn.fromTag(t.tag);e=r,n=t.attributes,o=e.dom,Tt(n,(function(t,e){Xr(o,e,t)})),Li(r,t.classes),Ki(r,t.styles),t.innerHtml.each((function(t){return Gr(r,t)}));var i=t.domChildren;return Hr(r,i),t.value.each((function(t){ia(r,t)})),t.uid,li(r,t.uid),r},ua=function(t,e){return n=t,r=J(o=e,(function(t){return en(t.name(),[He("config"),nn("state",wi)])})),i=De("component.behaviours",me(r),n.behaviours).fold((function(t){throw new Error(Ee(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(t){return t})),{list:o,data:It(i,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))};var n,o,r,i},ca=function(t){var e,n,o=(e=Pt(t,"behaviours").getOr({}),n=G(Ot(e),(function(t){return void 0!==e[t]})),J(n,(function(t){return e[t].me})));return ua(t,o)},sa=function(t,e,n){var o,r,i,a=m(m({},(o=t).dom),{uid:o.uid,domChildren:J(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return Ci({})}),Ci),c={"alloy.base.modification":u},s=0<e.length?function(t,e,n,o){var r=m({},e);U(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var i=Si(r,(function(t,e){return{name:t,modification:e}})),a=function(t){return X(t,(function(t,e){return m(m({},e.modification),t)}),{})},u=X(i.classes,(function(t,e){return e.modification.concat(t)}),[]),c=a(i.attributes),s=a(i.styles);return Ci({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,m(m({},r=a),{attributes:m(m({},r.attributes),i.attributes),styles:m(m({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},la=function(t,e,n){var o,r,i,a={"alloy.base.behaviour":t.events};return o=n,r=t.eventOrder,i=Di(o,e,a),Ei(i,r).getOrDie()},fa=function(t){var e,n,o,r,i,a,u,c,s,l,f,p,h,g=di(t),v=g.events,b=d(g,["events"]),y=(e=Pt(b,"components").getOr([]),J(e,ha)),x=m(m({},b),{events:m(m({},oi),v),components:y});return ft.value((o=function(){return h},r=dn(hi),i=Te(Ri(n=x)),a=ca(n),u=a.list,c=a.data,s=sa(i,u,c),l=aa(s),f=la(i,u,c),p=dn(i.components),h={getSystem:r.get,config:function(t){var e=c;return(F(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(t){return F(c[t.name()])},spec:n,readState:function(t){return c[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return i.apis},connect:function(t){r.set(t)},disconnect:function(){r.set(pi(o))},element:l,syncComponents:function(){var t=Tr(l),e=Q(t,(function(t){return r.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));p.set(e)},components:p.get,events:f}))},ma=function(t){var e=hn.fromText(t);return da({element:e})},da=function(t){var e=Ie("external.component",fe([He("element"),Ke("uid")]),t),o=dn(pi());e.uid.each((function(t){li(e.element,t)}));var i={getSystem:o.get,config:C.none,hasConfigured:s,connect:function(t){o.set(t)},disconnect:function(){o.set(pi((function(){return i})))},getApis:function(){return{}},element:e.element,spec:t,readState:r("No state"),syncComponents:n,components:r([]),events:{}};return yi(i)},pa=mi,ha=function(t){return Pt(t,bi).fold((function(){var e=t.hasOwnProperty("uid")?t:m({uid:pa("")},t);return fa(e).getOrDie()}),(function(t){return t}))},ga=yi,va=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=Zi(n,t);return parseFloat(r)||0}return o},o=function(t,e){return Y(e,(function(e,n){var o=Zi(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!M(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;$i(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}},ba=va("height",(function(t){var e=t.dom;return Ji(t)?e.getBoundingClientRect().height:e.offsetHeight})),ya=function(t){return ba.get(t)},xa=function(t){return ba.getOuter(t)},wa=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},ka=wa,Sa=function(t,e){return void 0!==t?t:void 0!==e?e:0},Ca=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return ka(n.offsetLeft,n.offsetTop);var i=Sa(null==o?void 0:o.pageYOffset,r.scrollTop),a=Sa(null==o?void 0:o.pageXOffset,r.scrollLeft),u=Sa(r.clientTop,n.clientTop),c=Sa(r.clientLeft,n.clientLeft);return _a(t).translate(a-c,i-u)},_a=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?ka(o.offsetLeft,o.offsetTop):Ji(t)?(e=n.getBoundingClientRect(),ka(e.left,e.top)):ka(0,0)},Oa=va("width",(function(t){return t.dom.offsetWidth})),Da=function(t){return Oa.get(t)},Ta=function(t){return Oa.getOuter(t)},Ia=function(t){var e=hn.fromDom(function(t){if(Rr()&&R(t.target)){var e=hn.fromDom(t.target);if(vr(e)&&jr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return it(n)}}return C.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},i=o(r,n);return{target:e,x:t.clientX,y:t.clientY,stop:n,prevent:r,kill:i,raw:t}},Ea=function(t,e,n,o,r){var i,u,c=(i=n,u=o,function(t){i(t)&&u(Ia(t))});return t.dom.addEventListener(e,c,r),{unbind:a(Aa,t,e,c,r)}},Aa=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Ra=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return ka(n,o)},Fa=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Ma=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Pa=function(t){var e,n,o=void 0===t?window:t,r=o.document,i=Ra(hn.fromDom(r));return n=void 0===(e=o)?window:e,C.from(n.visualViewport).fold((function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Ma(i.left,i.top,e,n)}),(function(t){return Ma(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)}))},Ba=function t(e,n){return e.view(n).fold(r([]),(function(n){var o=e.owner(n),r=t(e,o);return[n].concat(r)}))},ja=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(hn.fromDom)},owner:wr}),za=function(t){var e,n,o,r,i=hn.fromDom(document),u=Ra(i);return(e=t,o=(n=ja).owner(e),r=Ba(n,o),C.some(r)).fold(a(Ca,t),(function(e){var n=_a(t),o=X(e,(function(t,e){var n=_a(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return ka(o.left+n.left+u.left,o.top+n.top+u.top)}))},Va=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Na=function(t){var e=Ca(t),n=Ta(t),o=xa(t);return Va(e.left,e.top,n,o)},La=function(t){var e=za(t),n=Ta(t),o=xa(t);return Va(e.left,e.top,n,o)},Ha=function(){return Pa(window)};function $a(t,e,n,o,r){return t(n,o)?C.some(n):F(r)&&r(n)?C.none():e(n,o,r)}var Ja,Ua,Wa=function(t,e,n){for(var o=t.dom,r=F(n)?n:s;o.parentNode;){o=o.parentNode;var i=hn.fromDom(o);if(e(i))return C.some(i);if(r(i))break}return C.none()},Ga=function(t,e,n){return $a((function(t,e){return e(t)}),Wa,t,e,n)},Xa=function(t,e,n){return Ga(t,e,n).isSome()},Ya=function(t,e,n){return Wa(t,(function(t){return Un(t,e)}),n)},Ka=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Wn(r)?C.none():C.from(r.querySelector(n)).map(hn.fromDom);var n,o,r},qa=function(t,e,n){return $a(Un,Ya,t,e,n)},Za=function(){var t=ii("aria-owns");return{id:t,link:function(e){Yr(e,"aria-owns",t)},unlink:function(t){Qr(t,"aria-owns")}}},Qa=function(t,e){return Ga(e,(function(t){if(!vr(t))return!1;var e=Kr(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")})).bind((function(t){var e=Kr(t,"id"),n=Fr(t);return Ka(n,'[aria-owns="'+e+'"]')})).exists((function(e){return tu(t,e)}))},tu=function(t,e){return Xa(e,(function(e){return Gn(e,t.element)}),s)||Qa(t,e)},eu="unknown";(Ua=Ja=Ja||{})[Ua.STOP=0]="STOP",Ua[Ua.NORMAL=1]="NORMAL",Ua[Ua.LOGGING=2]="LOGGING";var nu,ou,ru=dn({}),iu=["alloy/data/Fields","alloy/debugging/Debugging"],au=function(t,e,n){var o,r,i,a;switch(Pt(ru.get(),t).orThunk((function(){var e=Ot(ru.get());return ct(e,(function(e){return-1<t.indexOf(e)?C.some(ru.get()[e]):C.none()}))})).getOr(Ja.NORMAL)){case Ja.NORMAL:return n(uu());case Ja.LOGGING:var u=(o=t,r=e,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();N(["mousemove","mouseover","mouseout",Mo()],o)||console.log(o,{event:o,time:t-a,target:r.dom,sequence:J(i,(function(t){return N(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+ei(t.target)+")":t.outcome}))})}}),c=n(u);return u.write(),c;case Ja.STOP:return!0}},uu=r({logEventCut:n,logEventStopped:n,logNoParent:n,logEventNoHandlers:n,logEventResponse:n,write:n}),cu=r([He("menu"),He("selectedMenu")]),su=r([He("item"),He("selectedItem")]),lu=(r(me(su().concat(cu()))),r(me(su()))),fu=Ge("initSize",[He("numColumns"),He("numRows")]),mu=function(){return Ge("markers",[He("backgroundMenu")].concat(cu()).concat(su()))},du=function(t){return Ge("markers",J(t,He))},pu=function(t,e,n){return function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");K(e,(function(t){return 0<t.indexOf("alloy")&&!L(iu,(function(e){return-1<t.indexOf(e)}))})).getOr(eu)}}(),ye(e,e,n,_e((function(t){return ft.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},hu=function(t){return pu(0,t,Ut(n))},gu=function(t){return pu(0,t,Ut(C.none))},vu=function(t){return pu(0,t,Wt())},bu=function(t){return pu(0,t,Wt())},yu=function(t,e){return mn(t,r(e))},xu=function(t){return mn(t,i)},wu=r(fu),ku=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},Su=zt([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Cu=Su.southeast,_u=Su.southwest,Ou=Su.northeast,Du=Su.northwest,Tu=Su.south,Iu=Su.north,Eu=Su.east,Au=Su.west,Ru=function(t,e){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],(function(n){return Pt(e,n).map((function(e){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,e)}))}))},Fu=function(t){return t.x},Mu=function(t,e){return t.x+t.width/2-e.width/2},Pu=function(t,e){return t.x+t.width-e.width},Bu=function(t,e){return t.y-e.height},ju=function(t){return t.y+t.height},zu=function(t,e){return t.y+t.height/2-e.height/2},Vu=function(t,e,n){return ku(Fu(t),ju(t),n.southeast(),Cu(),Ru(t,{left:1,top:3}),"layout-se")},Nu=function(t,e,n){return ku(Pu(t,e),ju(t),n.southwest(),_u(),Ru(t,{right:0,top:3}),"layout-sw")},Lu=function(t,e,n){return ku(Fu(t),Bu(t,e),n.northeast(),Ou(),Ru(t,{left:1,bottom:2}),"layout-ne")},Hu=function(t,e,n){return ku(Pu(t,e),Bu(t,e),n.northwest(),Du(),Ru(t,{right:0,bottom:2}),"layout-nw")},$u=function(t,e,n){return ku(Mu(t,e),Bu(t,e),n.north(),Iu(),Ru(t,{bottom:2}),"layout-n")},Ju=function(t,e,n){return ku(Mu(t,e),ju(t),n.south(),Tu(),Ru(t,{top:3}),"layout-s")},Uu=function(t,e,n){return ku((o=t).x+o.width,zu(t,e),n.east(),Eu(),Ru(t,{left:0}),"layout-e");var o},Wu=function(t,e,n){return ku((o=e,t.x-o.width),zu(t,e),n.west(),Au(),Ru(t,{right:1}),"layout-w");var o},Gu=function(){return[Vu,Nu,Lu,Hu,Ju,$u,Uu,Wu]},Xu=function(){return[Nu,Vu,Hu,Lu,Ju,$u,Uu,Wu]},Yu=function(){return[Lu,Hu,Vu,Nu,$u,Ju]},Ku=function(){return[Hu,Lu,Nu,Vu,$u,Ju]},qu=function(){return[Vu,Nu,Lu,Hu,Ju,$u]},Zu=function(){return[Nu,Vu,Hu,Lu,Ju,$u]},Qu=Object.freeze({__proto__:null,events:function(t){return er([rr(Do(),(function(e,n){var o,r,i=t.channels,a=Ot(i),u=n,c=(o=a,(r=u).universal?o:G(o,(function(t){return N(r.channels,t)})));U(c,(function(t){var n=i[t],o=n.schema,r=Ie("channel["+t+"] data\nReceiver: "+ei(e.element),o,u.data);n.onReceive(e,r)}))}))])}}),tc=[$e("channels",Oe(ft.value,fe([vu("onReceive"),nn("schema",Fe())])))],ec=function(t,e,n){return dr((function(o,r){n(o,t,e)}))},nc=function(t,e,n,o,r,i){var a=fe(t),u=en(e,[qe("config",fe(t))]);return ic(a,u,e,n,o,r,i)},oc=function(t,e,n){var o,i,a,u,c,s;return o=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var u=[o].concat(i);return o.config({name:r(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(u,1);return e.apply(void 0,[o,t.config,t.state].concat(n))}))},i=n,a=e.toString(),u=a.indexOf(")")+1,c=a.indexOf("("),s=a.substring(c+1,u-1).split(/,\s*/),o.toFunctionAnnotation=function(){return{name:i,parameters:gi(s.slice(0,1).concat(s.slice(3)))}},o},rc=function(t){return{key:t,value:void 0}},ic=function(t,e,n,o,i,u,c){var s=function(t){return jt(t,n)?t[n]():C.none()},l=It(i,(function(t,e){return oc(n,t,e)})),f=It(u,vi),d=m(m(m({},f),l),{revoke:a(rc,n),config:function(e){var o=Ie(n+"-config",t,e);return{key:n,value:{config:o,me:d,configAsRaw:$t((function(){return Ie(n+"-config",t,e)})),initialConfig:e,state:c}}},schema:r(e),exhibit:function(t,e){return s(t).bind((function(t){return Pt(o,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(Ci({}))},name:r(n),handlers:function(t){return s(t).map((function(t){return Pt(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return d},ac=Qt,uc=fe([He("fields"),He("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),cc=function(t){var e=Ie("Creating behaviour: "+t.name,uc,t);return nc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},sc=fe([He("branchKey"),He("branches"),He("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),lc=function(t){var e,n,o,r,i,a,u,c,s=Ie("Creating behaviour: "+t.name,sc,t);return e=Re(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=en(n,[qe("config",u=e)]),ic(u,c,n,o,r,i,a)},fc=r(void 0),mc=cc({fields:tc,name:"receiving",active:Qu}),dc=Object.freeze({__proto__:null,exhibit:function(t,e){return Ci({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),pc=function(t){return t.dom.focus()},hc=function(t){return void 0===t&&(t=hn.fromDom(document)),C.from(t.dom.activeElement).map(hn.fromDom)},gc=function(t){return hc(Fr(t)).filter((function(e){return t.dom.contains(e.dom)}))},vc=function(t,e){var o=Fr(e),r=hc(o).bind((function(t){var n,o,r=function(e){return Gn(t,e)};return r(e)?C.some(e):(n=r,(o=function(t){for(var e=0;e<t.childNodes.length;e++){var r=hn.fromDom(t.childNodes[e]);if(n(r))return C.some(r);var i=o(t.childNodes[e]);if(i.isSome())return i}return C.none()})(e.dom))})),i=t(e);return r.each((function(t){hc(o).filter((function(e){return Gn(e,t)})).fold((function(){pc(t)}),n)})),i},bc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},yc=function(t,e){var n=function(t){return t+"px"};qi(t,{position:C.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},xc=zt([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),wc=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,h=e.x-n,g=e.y-o,v=r-(h+e.width),b=i-(g+e.height),y=C.some(h),x=C.some(g),w=C.some(v),k=C.some(b),S=C.none();return a=e.direction,u=function(){return bc(t,y,x,S,S)},c=function(){return bc(t,S,x,w,S)},s=function(){return bc(t,y,S,S,k)},l=function(){return bc(t,S,S,w,k)},f=function(){return bc(t,y,x,S,S)},m=function(){return bc(t,y,S,S,k)},d=function(){return bc(t,y,x,S,S)},p=function(){return bc(t,S,x,w,S)},a.fold(u,c,s,l,f,m,d,p)},kc=function(t,e){var n=a(za,e),o=t.fold(n,n,(function(){var t=Ra();return za(e).translate(-t.left,-t.top)})),r=Ta(e),i=xa(e);return Va(o.left,o.top,r,i)},Sc=function(t,e,n){var o=ka(e,n);return t.fold(r(o),r(o),(function(){var t=Ra();return o.translate(-t.left,-t.top)}))},Cc=(xc.none,xc.relative),_c=xc.fixed,Oc=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Dc=function(t,e,n){return Math.min(Math.max(t,e),n)},Tc=zt([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Ic=function(t,e,n,o){var a,u,c,s,l,f,m,d,p,h,g,v,b,y,x,w,k,S,_,O,D,T,I,E,A,R,F,M,P,B,j,z,V,N=t.x,L=t.y,H=t.bubble.offset,$=H.left,J=H.top,U=(a=o,u=t.boundsRestriction,c=H,l=(s=function(t,e){var n="top"===t||"bottom"===t?c.top:c.left;return Pt(u,t).bind(i).bind((function(n){return"left"===t||"top"===t?e<=n?C.some(n):C.none():n<=e?C.some(n):C.none()})).map((function(t){return t+n})).getOr(e)})("left",a.x),f=s("top",a.y),m=s("right",a.right),d=s("bottom",a.bottom),Va(l,f,m-l,d-f)),W=U.y,G=U.bottom,X=U.x,Y=U.right,K=L+J,q=(p=N+$,h=K,g=e,v=n,y=(b=U).x,x=b.y,w=b.width,k=b.height,_=x<=h,O=(S=y<=p)&&_,D=p+g<=y+w&&h+v<=x+k,T=Math.abs(Math.min(g,S?y+w-p:y-(p+g))),I=Math.abs(Math.min(v,_?x+k-h:x-(h+v))),E=Math.max(b.x,b.right-g),A=Math.max(b.y,b.bottom-v),{originInBounds:O,sizeInBounds:D,limitX:Dc(p,b.x,E),limitY:Dc(h,b.y,A),deltaW:T,deltaH:I}),Z=q.originInBounds,Q=q.sizeInBounds,tt=q.limitX,et=q.limitY,nt=q.deltaW,ot=q.deltaH,rt=r(et+ot-W),it=r(G-et),at=(R=t.direction,M=F=it,P=rt,R.fold(F,F,P,P,F,P,M,M)),ut=r(tt+nt-X),ct=r(Y-tt),st={x:tt,y:et,width:nt,height:ot,maxHeight:at,maxWidth:(B=t.direction,z=j=ct,V=ut,B.fold(j,V,j,V,z,z,j,V)),direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:K};return Z&&Q?Tc.fit(st):Tc.nofit(st,nt,ot)},Ec=function(t,e,n,o){na(e,"max-height"),na(e,"max-width");var r,u,c,s,l,f,m,d,p,h={width:Ta(r=e),height:xa(r)};return u=o.preference,c=t,s=h,l=n,f=o.bounds,m=s.width,d=s.height,p=function(t,e,n,o){var r=t(c,s,l);return Ic(r,m,d,f).fold(Tc.fit,(function(t,r,i){return o<i||n<r?Tc.nofit(t,r,i):Tc.nofit(e,n,o)}))},Y(u,(function(t,e){var n=a(p,e);return t.fold(Tc.fit,n)}),Tc.nofit({x:c.x,y:c.y,width:s.width,height:s.height,maxHeight:s.height,maxWidth:s.width,direction:Cu(),classes:{on:[],off:[]},label:"none",candidateYforTest:c.y},-1,-1)).fold(i,i)},Ac=function(t,e,n){var o,r;yc(t,(o=n.origin,r=e,o.fold((function(){return bc("absolute",C.some(r.x),C.some(r.y),C.none(),C.none())}),(function(t,e,n,o){return wc("absolute",r,t,e,n,o)}),(function(t,e,n,o){return wc("fixed",r,t,e,n,o)}))))},Rc=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ba.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),Yi(n,"max-height",r+"px")},Fc=r((function(t,e){Rc(t,e),Ki(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Mc=r((function(t,e){Rc(t,e)})),Pc=function(t,e,n){return void 0===t[e]?n:t[e]},Bc=function(t,e,o,r,i,a){var u,c=Pc(a,"maxHeightFunction",Fc()),s=Pc(a,"maxWidthFunction",n),l=t.anchorBox,f=t.origin,m={bounds:(u=f,i.fold((function(){return u.fold(Ha,Ha,Va)}),(function(t){return u.fold(t,t,(function(){var e=t(),n=Sc(u,e.x,e.y);return Va(n.left,n.top,e.width,e.height)}))}))),origin:f,preference:r,maxHeightFunction:c,maxWidthFunction:s};jc(l,e,o,m)},jc=function(t,e,n,o){var r,i,a,u,c,s,l=Ec(t,e,n,o);Ac(e,l,o),r=e,i=l.classes,Hi(r,i.off),Li(r,i.on),a=e,u=l,(0,o.maxHeightFunction)(a,u.maxHeight),c=e,s=l,(0,o.maxWidthFunction)(c,s.maxWidth)},zc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Vc=function(t,e,n){var o=function(t){return Pt(n,t).getOr([])},r=function(t,e,n){var r=nt(zc,n);return{offset:ka(t,e),classesOn:Q(n,o),classesOff:Q(r,o)}};return{southeast:function(){return r(-t,e,["top","alignLeft"])},southwest:function(){return r(t,e,["top","alignRight"])},south:function(){return r(-t/2,e,["top","alignCentre"])},northeast:function(){return r(-t,-e,["bottom","alignLeft"])},northwest:function(){return r(t,-e,["bottom","alignRight"])},north:function(){return r(-t/2,-e,["bottom","alignCentre"])},east:function(){return r(t,-e/2,["valignCentre","left"])},west:function(){return r(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,e,["top","alignRight"])},innerNortheast:function(){return r(t,e,["top","alignLeft"])},innerNorth:function(){return r(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-e,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return r(t,-e/2,["valignCentre","right"])},innerEast:function(){return r(-t,-e/2,["valignCentre","left"])}}},Nc=function(){return Vc(0,0,{})},Lc=function(t,e){return function(n){return"rtl"===Hc(n)?e:t}},Hc=function(t){return"rtl"===Zi(t,"direction")?"rtl":"ltr"};(ou=nu=nu||{}).TopToBottom="toptobottom",ou.BottomToTop="bottomtotop";var $c,Jc,Uc,Wc,Gc,Xc="data-alloy-vertical-dir",Yc=function(t){return Xa(t,(function(t){return vr(t)&&Kr(t,"data-alloy-vertical-dir")===nu.BottomToTop}))},Kc=function(){return en("layouts",[He("onLtr"),He("onRtl"),Ke("onBottomLtr"),Ke("onBottomRtl")])},qc=function(t,e,n,o,r,i,a){var u=a.map(Yc).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),s=e.layouts.map((function(e){return e.onRtl(t)})),l=u?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),f=u?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(s).getOr(i):s.getOr(o);return Lc(l,f)(t)},Zc=[He("hotspot"),Ke("bubble"),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=e.hotspot,r=kc(n,o.element),i=qc(t.element,e,qu(),Zu(),Yu(),Ku(),C.some(e.hotspot.element));return C.some({anchorBox:r,bubble:e.bubble.getOr(Nc()),overrides:e.overrides,layouts:i,placer:C.none()})}))],Qc=[He("x"),He("y"),nn("height",0),nn("width",0),nn("bubble",Nc()),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=Sc(n,e.x,e.y),r=Va(o.left,o.top,e.width,e.height),i=qc(t.element,e,Gu(),Xu(),Gu(),Xu(),C.none());return C.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:C.none()})}))],ts=zt([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),es=function(t){return t.fold(i,(function(t,e,n){return t.translate(-e,-n)}))},ns=function(t){return t.fold(i,i)},os=function(t){return Y(t,(function(t,e){return t.translate(e.left,e.top)}),ka(0,0))},rs=function(t){var e=J(t,ns);return os(e)},is=ts.screen,as=ts.absolute,us=function(t,e,n){var o,r,i=wr(t.element),a=Ra(i),u=(o=t,r=Cr(n.root).dom,C.from(r.frameElement).map(hn.fromDom).filter((function(t){var e=wr(t),n=wr(o.element);return Gn(e,n)})).map(Ca).getOr(a));return as(u,a.left,a.top)},cs=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=is(ka(r,i));return C.some({point:c,width:a,height:u})},ss=function(t,e,n,o,r){return t.map((function(t){var i,a,u,c=[e,t.point],s=(i=function(){return rs(c)},a=function(){return rs(c)},u=function(){return t=J(c,es),os(t);var t},o.fold(i,a,u)),l={x:s.left,y:s.top,width:t.width,height:t.height},f=(n.showAbove?Yu:qu)(),m=(n.showAbove?Ku:Zu)(),d=qc(r,n,f,m,f,m,C.none());return{anchorBox:l,bubble:n.bubble.getOr(Nc()),overrides:n.overrides,layouts:d,placer:C.none()}}))},ls=[He("node"),He("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=us(t,0,e);return e.node.filter(Ji).bind((function(r){var i=r.dom.getBoundingClientRect(),a=cs(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ss(a,o,e,n,u)}))}))],fs=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ms=zt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ds=(ms.before,ms.on,ms.after,function(t){return t.fold(i,i,i)}),ps=zt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),hs={domRange:ps.domRange,relative:ps.relative,exact:ps.exact,exactFromRange:function(t){return ps.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=t.match({domRange:function(t){return hn.fromDom(t.startContainer)},relative:function(t,e){return ds(t)},exact:function(t,e,n,o){return t}});return Cr(e)},range:fs},gs=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),r=i,n.fold((function(t){r.setEndBefore(t.dom)}),(function(t,e){r.setEnd(t.dom,e)}),(function(t){r.setEndAfter(t.dom)})),i},vs=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},bs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},ys=zt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xs=function(t,e,n){return e(hn.fromDom(n.startContainer),n.startOffset,hn.fromDom(n.endContainer),n.endOffset)},ws=function(t,e){var n,o,i,a=(n=t,e.match({domRange:function(t){return{ltr:r(t),rtl:C.none}},relative:function(t,e){return{ltr:$t((function(){return gs(n,t,e)})),rtl:$t((function(){return C.some(gs(n,e,t))}))}},exact:function(t,e,o,r){return{ltr:$t((function(){return vs(n,t,e,o,r)})),rtl:$t((function(){return C.some(vs(n,o,r,t,e))}))}}}));return(i=(o=a).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return ys.rtl(hn.fromDom(t.endContainer),t.endOffset,hn.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return xs(0,ys.ltr,i)})):xs(0,ys.ltr,i)},ks=(ys.ltr,ys.rtl,$c=br,Jc="text",{get:function(t){if(!$c(t))throw new Error("Can only get "+Jc+" value of a "+Jc+" node");return Uc(t).getOr("")},getOption:Uc=function(t){return $c(t)?C.from(t.dom.nodeValue):C.none()},set:function(t,e){if(!$c(t))throw new Error("Can only set raw "+Jc+" value of a "+Jc+" node");t.dom.nodeValue=e}}),Ss=function(t){return ks.getOption(t)},Cs=["img","br"],_s=function(t){return Ss(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf(" ")})).isSome()||N(Cs,hr(t))},Os=function(t,e){var n=function t(n){for(var o=Tr(n),r=o.length-1;0<=r;r--){var i=o[r];if(e(i))return C.some(i);var a=t(i);if(a.isSome())return a}return C.none()};return n(t)},Ds=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Wn(r)?[]:J(r.querySelectorAll(n),hn.fromDom);var n,o,r},Ts=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=wr(r=t).dom.createRange()).setStart(r.dom,i),c.setEnd(a.dom,u),c),l=Gn(t,n)&&e===o;return s.collapsed&&!l},Is=function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return C.some(fs(hn.fromDom(e.startContainer),e.startOffset,hn.fromDom(n.endContainer),n.endOffset))}return C.none()},Es=function(t){if(null===t.anchorNode||null===t.focusNode)return Is(t);var e=hn.fromDom(t.anchorNode),n=hn.fromDom(t.focusNode);return Ts(e,t.anchorOffset,n,t.focusOffset)?C.some(fs(e,t.anchorOffset,n,t.focusOffset)):Is(t)},As=function(t){return e=t,C.from(e.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(Es);var e},Rs=function(t,e){var n,o,r,i,a=ws(n=t,e).match({ltr:function(t,e,o,r){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(o.dom,r),i},rtl:function(t,e,o,r){var i=n.document.createRange();return i.setStart(o.dom,r),i.setEnd(t.dom,e),i}});return r=(o=a).getClientRects(),0<(i=0<r.length?r[0]:o.getBoundingClientRect()).width||0<i.height?C.some(i).map(bs):C.none()},Fs=function(t,e){return{element:t,offset:e}},Ms=function(t,e){var n=Tr(t);if(0===n.length)return Fs(t,e);if(e<n.length)return Fs(n[e],0);var o,r=n[n.length-1],i=br(r)?(o=r,ks.get(o).length):Tr(r).length;return Fs(r,i)},Ps=function(t,e){return(br(t)?Fs:Ms)(t,e)},Bs=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return As(t)}}))().map((function(t){var e=Ps(t.start,t.soffset),n=Ps(t.finish,t.foffset);return hs.range(e.element,e.offset,n.element,n.offset)}))},js=[Ke("getSelection"),He("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=Cr(e.root).dom,r=us(t,0,e),i=Bs(o,e).bind((function(t){return Rs(o,hs.exactFromRange(t)).orThunk((function(){var e=hn.fromText("\ufeff");return zr(t.start,e),Rs(o,hs.exact(e,0,e,1)).map((function(t){return Jr(e),t}))})).bind((function(t){return cs(t.left,t.top,t.width,t.height)}))})),a=Bs(o,e).bind((function(t){return vr(t.start)?C.some(t.start):Or(t.start)})).getOr(t.element);return ss(i,r,e,n,a)}))],zs=function(t){return t.x+t.width},Vs=function(t,e){return t.x-e.width},Ns=function(t,e){return t.y-e.height+t.height},Ls=function(t){return t.y},Hs=function(t,e,n){return ku(zs(t),Ls(t),n.southeast(),Cu(),Ru(t,{left:0,top:2}),"link-layout-se")},$s=function(t,e,n){return ku(Vs(t,e),Ls(t),n.southwest(),_u(),Ru(t,{right:1,top:2}),"link-layout-sw")},Js=function(t,e,n){return ku(zs(t),Ns(t,e),n.northeast(),Ou(),Ru(t,{left:0,bottom:3}),"link-layout-ne")},Us=function(t,e,n){return ku(Vs(t,e),Ns(t,e),n.northwest(),Du(),Ru(t,{right:1,bottom:3}),"link-layout-nw")},Ws=function(){return[Hs,$s,Js,Us]},Gs=function(){return[$s,Hs,Us,Js]},Xs=[He("item"),Kc(),nn("overrides",{}),yu("placement",(function(t,e,n){var o=kc(n,e.item.element),r=qc(t.element,e,Ws(),Gs(),Ws(),Gs(),C.none());return C.some({anchorBox:o,bubble:Nc(),overrides:e.overrides,layouts:r,placer:C.none()})}))],Ys=Re("anchor",{selection:js,node:ls,hotspot:Zc,submenu:Xs,makeshift:Qc}),Ks=function(t,e,n,o,r){var i={anchorBox:n.anchorBox,origin:e};Bc(i,r.element,n.bubble,n.layouts,o,n.overrides)},qs=function(t,e,n,o,r,i){var a=i.map(Na);return Zs(t,e,n,o,r,a)},Zs=function(t,e,n,o,i,a){var u=Ie("positioning anchor.info",Ys,o);vc((function(){Yi(i.element,"position","fixed");var n=ta(i.element,"visibility");Yi(i.element,"visibility","hidden");var o,c,s,l,f=e.useFixed()?(l=document.documentElement,_c(0,0,l.clientWidth,l.clientHeight)):(c=Ca((o=t).element),s=o.element.dom.getBoundingClientRect(),Cc(c.left,c.top,s.width,s.height)),m=u.placement,d=a.map(r).or(e.getBounds);m(t,u,f).each((function(e){e.placer.getOr(Ks)(t,f,e,d,i)})),n.fold((function(){na(i.element,"visibility")}),(function(t){Yi(i.element,"visibility",t)})),ta(i.element,"left").isNone()&&ta(i.element,"top").isNone()&&ta(i.element,"right").isNone()&&ta(i.element,"bottom").isNone()&&ta(i.element,"position").is("fixed")&&na(i.element,"position")}),i.element)},Qs=Object.freeze({__proto__:null,position:function(t,e,n,o,r){qs(t,e,n,o,r,C.none())},positionWithin:qs,positionWithinBounds:Zs,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),tl=[nn("useFixed",s),Ke("getBounds")],el=cc({fields:tl,name:"positioning",active:dc,apis:Qs}),nl=function t(e){Yo(e,No());var n=e.components();U(n,t)},ol=function t(e){var n=e.components();U(n,t),Yo(e,Vo())},rl=function(t,e){Lr(t.element,e.element)},il=function(t,e){var n,o=t.components();U((n=t).components(),(function(t){return Jr(t.element)})),$r(n.element),n.syncComponents();var r=nt(o,e);U(r,(function(e){nl(e),t.getSystem().removeFromWorld(e)})),U(e,(function(e){e.getSystem().isConnected()?rl(t,e):(t.getSystem().addToWorld(e),rl(t,e),Ji(t.element)&&ol(e)),t.syncComponents()}))},al=function(t,e){ul(t,e,Lr)},ul=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),Ji(t.element)&&ol(e),t.syncComponents()},cl=function(t){nl(t),Jr(t.element),t.getSystem().removeFromWorld(t)},sl=function(t){var e=_r(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));cl(t),e.each((function(t){t.syncComponents()}))},ll=function(t){var e=t.components();U(e,cl),$r(t.element),t.syncComponents()},fl=function(t,e){ml(t,e,Lr)},ml=function(t,e,n){n(t,e.element);var o=Tr(e.element);U(o,(function(t){e.getByDom(t).each(ol)}))},dl=function(t){var e=Tr(t.element);U(e,(function(e){t.getByDom(e).each(nl)})),Jr(t.element)},pl=function(t,e,n,o){n.get().each((function(e){ll(t)}));var r=e.getAttachPoint(t);al(r,t);var i=t.getSystem().build(o);return al(t,i),n.set(i),i},hl=function(t,e,n,o){var r=pl(t,e,n,o);return e.onOpen(t,r),r},gl=function(t,e,n){n.get().each((function(o){ll(t),sl(t),e.onClose(t,o),n.clear()}))},vl=function(t,e,n){return n.isOpen()},bl=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);Yi(t.element,"position",el.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",ta(o.element,r).fold((function(){Qr(o.element,i)}),(function(t){Yr(o.element,i,t)})),Yi(o.element,r,a)},yl=function(t,e,n){var o,r,i,a;o=t.element,L(["top","left","right","bottom"],(function(t){return ta(o,t).isSome()}))||na(t.element,"position"),r=t,i="visibility",a=e.cloakVisibilityAttr,qr(r.element,a).fold((function(){return na(r.element,i)}),(function(t){return Yi(r.element,i,t)}))},xl=Object.freeze({__proto__:null,cloak:bl,decloak:yl,open:hl,openWhileCloaked:function(t,e,n,o,r){bl(t,e),hl(t,e,n,o),r(),yl(t,e)},close:gl,isOpen:vl,isPartOf:function(t,e,n,o){return vl(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return pl(t,e,n,o)}))}}),wl=Object.freeze({__proto__:null,events:function(t,e){return er([rr(Ro(),(function(n,o){gl(n,t,e)}))])}}),kl=[hu("onOpen"),hu("onClose"),He("isPartOf"),He("getAttachPoint"),nn("cloakVisibilityAttr","data-precloak-visibility")],Sl=cc({fields:kl,name:"sandboxing",active:wl,apis:xl,state:Object.freeze({__proto__:null,init:function(){var t=dn(C.none()),e=r("not-implemented");return ki({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(C.none())},set:function(e){t.set(C.some(e))},get:function(){return t.get()}})}})}),Cl=r("dismiss.popups"),_l=r("reposition.popups"),Ol=r("mouse.released"),Dl=fe([nn("isExtraPart",s),en("fireEventInstead",[nn("event",Lo())])]),Tl=function(t){var e=Ie("Dismissal",Dl,t),n={};return n[Cl()]={schema:fe([He("target")]),onReceive:function(t,n){Sl.isOpen(t)&&(Sl.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold((function(){return Sl.close(t)}),(function(e){return Yo(t,e.event)})))}},n},Il=fe([en("fireEventInstead",[nn("event",Ho())]),We("doReposition")]),El=function(t){var e=Ie("Reposition",Il,t),n={};return n[_l()]={onReceive:function(t){Sl.isOpen(t)&&e.fireEventInstead.fold((function(){return e.doReposition(t)}),(function(e){return Yo(t,e.event)}))}},n},Al=function(t,e,n){e.store.manager.onLoad(t,e,n)},Rl=function(t,e,n){e.store.manager.onUnload(t,e,n)},Fl=Object.freeze({__proto__:null,onLoad:Al,onUnload:Rl,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Ml=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[fr((function(n,o){Al(n,t,e)})),mr((function(n,o){Rl(n,t,e)}))]:[ec(t,e,Al)];return er(n)}}),Pl=function(){var t=dn(null);return ki({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Bl=function(){var t=dn({}),e=dn({});return ki({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Pt(t.get(),n).orThunk((function(){return Pt(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},a={};U(n,(function(t){i[t.value]=t,Pt(t,"meta").each((function(e){Pt(e,"text").each((function(e){a[e]=t}))}))})),t.set(m(m({},o),i)),e.set(m(m({},r),a))},clear:function(){t.set({}),e.set({})}})},jl=Object.freeze({__proto__:null,memory:Pl,dataset:Bl,manual:function(){return ki({readState:n})},init:function(t){return t.store.manager.state(t)}}),zl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},Vl=[Ke("initialValue"),He("getFallbackEntry"),He("getDataKey"),He("setValue"),yu("manager",{setValue:zl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold((function(){return o.getFallbackEntry(r)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){zl(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:Bl})],Nl=[He("getValue"),nn("setValue",n),Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:n,state:wi.init})],Ll=[Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Pl})],Hl=[on("store",{mode:"memory"},Re("mode",{memory:Ll,manual:Nl,dataset:Vl})),hu("onSetValue"),nn("resetOnDom",!1)],$l=cc({fields:Hl,name:"representing",active:Ml,apis:Fl,extra:{setValueFrom:function(t,e){var n=$l.getValue(e);$l.setValue(t,n)}},state:jl}),Jl=function(t,e){return fn(t,{},J(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ye(n,n,Gt(),le((function(t){return wt("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([mn("dump",i)]))},Ul=function(t){return t.dump},Wl=function(t,e){return m(m({},t.dump),ac(e))},Gl=Jl,Xl=Wl,Yl="placeholder",Kl=zt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ql=function(t){return Bt(t,"uiType")},Zl=function(t,e,n,o){return ql(n)&&n.uiType===Yl?(a=n,u=o,(i=t).exists((function(t){return t!==a.owner}))?Kl.single(!0,r(a)):Pt(u,a.name).fold((function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+Ot(u)+"]\nNamespace: "+i.getOr("none")+"\nSpec: "+JSON.stringify(a,null,2))}),(function(t){return t.replace()}))):Kl.single(!1,r(n));var i,a,u},Ql=function t(e,n,o,r){return Zl(e,0,o,r).fold((function(i,a){var u=ql(o)?a(n,o.config,o.validated):a(n),c=Pt(u,"components").getOr([]),s=Q(c,(function(o){return t(e,n,o,r)}));return[m(m({},u),{components:s})]}),(function(t,e){if(ql(o)){var r=e(n,o.config,o.validated);return o.validated.preprocess.getOr(i)(r)}return e(n)}))},tf=function(t,e,n,o){var i,a,u,c=It(o,(function(t,e){return o=t,i=!1,{name:r(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return i},replace:function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,o}};var n,o,i})),s=(i=t,a=e,u=c,Q(n,(function(t){return Ql(i,a,t,u)})));return Tt(c,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),s},ef=Kl.single,nf=Kl.multiple,of=r(Yl),rf=zt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),af=nn("factory",{sketch:i}),uf=nn("schema",[]),cf=He("name"),sf=ye("pname","pname",Xt((function(t){return"<alloy."+ii(t.name)+">"})),Fe()),lf=mn("schema",(function(){return[Ke("preprocess")]})),ff=nn("defaults",r({})),mf=nn("overrides",r({})),df=me([af,uf,cf,sf,ff,mf]),pf=me([af,uf,cf,ff,mf]),hf=me([af,uf,cf,sf,ff,mf]),gf=me([af,lf,cf,He("unit"),sf,ff,mf]),vf=function(t){return t.fold(C.some,C.none,C.some,C.some)},bf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},yf=function(t,e){return function(n){var o=Ie("Converting part type",e,n);return t(o)}},xf=yf(rf.required,df),wf=yf(rf.external,pf),kf=yf(rf.optional,hf),Sf=yf(rf.group,gf),Cf=r("entirety"),_f=Object.freeze({__proto__:null,required:xf,external:wf,optional:kf,group:Sf,asNamedPart:vf,name:bf,asCommon:function(t){return t.fold(i,i,i,i)},original:Cf}),Of=function(t,e,n,o){return Lt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Df=function(t,e){var n={};return U(e,(function(e){vf(e).each((function(e){var o=Tf(t,e.pname);n[e.name]=function(n){var r=Ie("Part: "+e.name+" in "+t,me(e.schema),n);return m(m({},o),{config:n,validated:r})}}))})),n},Tf=function(t,e){return{uiType:of(),owner:t,name:e}},If=function(t,e,n){return{uiType:of(),owner:t,name:e,config:n,validated:{}}},Ef=function(t){return Q(t,(function(t){return t.fold(C.none,C.some,C.none,C.none).map((function(t){return Ge(t.name,t.schema.concat([xu(Cf())]))})).toArray()}))},Af=function(t){return J(t,bf)},Rf=function(t,e,n){return o=e,i={},a={},U(n,(function(t){t.fold((function(t){i[t.pname]=ef(!0,(function(e,n,o){return t.factory.sketch(Of(e,t,n,o))}))}),(function(t){var e=o.parts[t.name];a[t.name]=r(t.factory.sketch(Of(o,t,e[Cf()]),e))}),(function(t){i[t.pname]=ef(!1,(function(e,n,o){return t.factory.sketch(Of(e,t,n,o))}))}),(function(t){i[t.pname]=nf(!0,(function(e,n,o){var r=e[t.name];return J(r,(function(n){return t.factory.sketch(Lt(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:r(i),externals:r(a)};var o,i,a},Ff=function(t,e,n){return tf(C.some(t),e,e.components,n)},Mf=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Pf=function(t,e,n){return Mf(t,e,n).getOrDie("Could not find part: "+n)},Bf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return U(n,(function(t){o[t]=r(a.getByUid(i[t]))})),o},jf=function(t,e){var n=t.getSystem();return It(e.partUids,(function(t,e){return r(n.getByUid(t))}))},zf=function(t){return Ot(t.partUids)},Vf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return U(n,(function(t){o[t]=r(a.getByUid(i[t]).getOrDie())})),o},Nf=function(t,e){var n=Af(e);return Qt(J(n,(function(e){return{key:e,value:t+"-"+e}})))},Lf=function(t){return ye("partUids","partUids",Yt((function(e){return Nf(e.uid,t)})),Fe())},Hf=Object.freeze({__proto__:null,generate:Df,generateOne:If,schemas:Ef,names:Af,substitutes:Rf,components:Ff,defaultUids:Nf,defaultUidsSchema:Lf,getAllParts:jf,getAllPartNames:zf,getPart:Mf,getPartOrDie:Pf,getParts:Bf,getPartsOrDie:Vf}),$f=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[Ge("parts",i)]:[]).concat([He("uid"),nn("dom",{}),nn("components",[]),xu("originalSpec"),nn("debug.sketcher",{})]).concat(a));return Ie(t+" [SpecSchema]",fe(u.concat(e)),n)},Jf=function(t,e,n,o,r){var i=Uf(r),a=Ef(n),u=Lf(n),c=$f(t,e,i,a,[u]),s=Rf(0,c,n);return o(c,Ff(t,c,s.internals()),i,s.externals())},Uf=function(t){return Bt(t,"uid")?t:m(m({},t),{uid:mi("uid")})},Wf=fe([He("name"),He("factory"),He("configFields"),nn("apis",{}),nn("extraApis",{})]),Gf=fe([He("name"),He("factory"),He("configFields"),He("partFields"),nn("apis",{}),nn("extraApis",{})]),Xf=function(t){var e=Ie("Sketcher for "+t.name,Wf,t),n=It(e.apis,xi),o=It(e.extraApis,vi);return m(m({name:e.name,configFields:e.configFields,sketch:function(t){return n=e.name,o=e.configFields,r=e.factory,i=Uf(t),r($f(n,o,i,[],[]),i);var n,o,r,i}},n),o)},Yf=function(t){var e=Ie("Sketcher for "+t.name,Gf,t),n=Df(e.name,e.partFields),o=It(e.apis,xi),r=It(e.extraApis,vi);return m(m({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return Jf(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},Kf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},qf=function(t,e){return t?C.some(e):C.none()},Zf=function(t){return"input"===hr(t)&&"radio"!==Kr(t,"type")||"textarea"===hr(t)},Qf=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),tm=[He("find")],em=cc({fields:tm,name:"composing",apis:Qf}),nm=function(t,e,n,o){var r=Ds(t.element,"."+e.highlightClass);U(r,(function(n){L(o,(function(t){return t.element===n}))||(Vi(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),Yo(n,Xo())})))}))},om=function(t,e,n,o){nm(t,e,0,[o]),rm(t,e,n,o)||(ji(o.element,e.highlightClass),e.onHighlight(t,o),Yo(o,Go()))},rm=function(t,e,n,o){return Ni(o.element,e.highlightClass)},im=function(t,e,n,o){var r=Ds(t.element,"."+e.itemClass);return C.from(r[o]).fold((function(){return ft.error(new Error("No element found with index "+o))}),t.getSystem().getByDom)},am=function(t,e,n){return Ka(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},um=function(t,e,n){var o=Ds(t.element,"."+e.itemClass);return(0<o.length?C.some(o[o.length-1]):C.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},cm=function(t,e,n,o){var r=Ds(t.element,"."+e.itemClass);return q(r,(function(t){return Ni(t,e.highlightClass)})).bind((function(e){var n=Oc(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))},sm=function(t,e,n){var o=Ds(t.element,"."+e.itemClass);return Kf(J(o,(function(e){return t.getSystem().getByDom(e).toOptional()})))},lm=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return nm(t,e,0,[])},dehighlight:function(t,e,n,o){rm(t,e,n,o)&&(Vi(o.element,e.highlightClass),e.onDehighlight(t,o),Yo(o,Xo()))},highlight:om,highlightFirst:function(t,e,n){am(t,e).each((function(o){om(t,e,n,o)}))},highlightLast:function(t,e,n){um(t,e).each((function(o){om(t,e,n,o)}))},highlightAt:function(t,e,n,o){im(t,e,n,o).fold((function(t){throw t}),(function(o){om(t,e,n,o)}))},highlightBy:function(t,e,n,o){var r=sm(t,e);K(r,o).each((function(o){om(t,e,n,o)}))},isHighlighted:rm,getHighlighted:function(t,e,n){return Ka(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:am,getLast:um,getPrevious:function(t,e,n){return cm(t,e,0,-1)},getNext:function(t,e,n){return cm(t,e,0,1)},getCandidates:sm}),fm=[He("highlightClass"),He("itemClass"),hu("onHighlight"),hu("onDehighlight")],mm=cc({fields:fm,name:"highlighting",apis:lm}),dm=[8],pm=[9],hm=[13],gm=[27],vm=[32],bm=[37],ym=[38],xm=[39],wm=[40],km=function(t,e,n){var o=et(t.slice(0,e)),r=et(t.slice(e+1));return K(o.concat(r),n)},Sm=function(t,e,n){var o=et(t.slice(0,e));return K(o,n)},Cm=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return K(r.concat(o),n)},_m=function(t,e,n){var o=t.slice(e+1);return K(o,n)},Om=function(t){return function(e){var n=e.raw;return N(t,n.which)}},Dm=function(t){return function(e){return tt(t,(function(t){return t(e)}))}},Tm=function(t){return!0===t.raw.shiftKey},Im=function(t){return!0===t.raw.ctrlKey},Em=u(Tm),Am=function(t,e){return{matches:t,classification:e}},Rm=function(t,e,n){e.exists((function(t){return n.exists((function(e){return Gn(e,t)}))}))||Ko(t,$o(),{prevFocus:e,newFocus:n})},Fm=function(){var t=function(t){return gc(t.element)};return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element);var r=t(e);Rm(e,o,r)}}},Mm=function(){var t=function(t){return mm.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:function(e,o){var r=t(e);e.getSystem().getByDom(o).fold(n,(function(t){mm.highlight(e,t)}));var i=t(e);Rm(e,r,i)}}};(Gc=Wc=Wc||{}).OnFocusMode="onFocus",Gc.OnEnterOrSpaceMode="onEnterOrSpace",Gc.OnApiMode="onApi";var Pm,Bm=function(t,e,n,o,r){var i=function(t,e,n,o,r){var i,a,u=n(t,e,o,r);return i=u,a=e.event,K(i,(function(t){return t.matches(a)})).map((function(t){return t.classification})).bind((function(n){return n(t,e,o,r)}))},a={schema:function(){return t.concat([nn("focusManager",Fm()),on("focusInside","onFocus",_e((function(t){return N(["onFocus","onEnterOrSpace","onApi"],t)?ft.value(t):ft.error("Invalid value for focusInside")}))),yu("handler",a),yu("state",e),yu("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var a=t.focusInside!==Wc.OnFocusMode?C.none():r(t).map((function(n){return rr(Co(),(function(o,r){n(o,t,e),r.stop()}))})),u=[rr(ho(),(function(o,a){i(o,a,n,t,e).fold((function(){var n,i,u;n=o,i=a,u=Om(vm.concat(hm))(i.event),t.focusInside===Wc.OnEnterOrSpaceMode&&u&&Qn(n,i)&&r(t).each((function(o){o(n,t,e),i.stop()}))}),(function(t){a.stop()}))})),rr(go(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return er(a.toArray().concat(u))}};return a},jm=function(t){var e=[Ke("onEscape"),Ke("onEnter"),nn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),nn("firstTabstop",0),nn("useTabstopAt",l),Ke("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return qa(e,t)})).getOr(e);return 0<ya(n)},o=function(t,e,o){var r,i,a;r=e,i=Ds(t.element,r.selector),a=G(i,(function(t){return n(r,t)})),C.from(a[r.firstTabstop]).each((function(n){e.focusManager.set(t,n)}))},i=function(t,e,o,r,i){return i(e,o,(function(t){return n(e=r,o=t)&&e.useTabstopAt(o);var e,o})).fold((function(){return r.cyclic?C.some(!0):C.none()}),(function(e){return r.focusManager.set(t,e),C.some(!0)}))},u=function(t,e,n,o){var r,u,c=Ds(t.element,n.selector);return r=t,(u=n).focusManager.get(r).bind((function(t){return qa(t,u.selector)})).bind((function(e){return q(c,a(Gn,e)).bind((function(e){return i(t,c,e,n,o)}))}))},c=r([Am(Dm([Tm,Om(pm)]),(function(t,e,n){var o=n.cyclic?km:Sm;return u(t,0,n,o)})),Am(Om(pm),(function(t,e,n){var o=n.cyclic?Cm:_m;return u(t,0,n,o)})),Am(Om(gm),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Am(Dm([Em,Om(hm)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),s=r([]);return Bm(e,wi.init,c,s,(function(){return C.some(o)}))},zm=jm(mn("cyclic",s)),Vm=jm(mn("cyclic",l)),Nm=function(t,e,n){return Zf(n)&&Om(vm)(e.event)?C.none():(Zo(t,n,To()),C.some(!0))},Lm=function(t,e){return C.some(!0)},Hm=[nn("execute",Nm),nn("useSpace",!1),nn("useEnter",!0),nn("useControlEnter",!1),nn("useDown",!1)],$m=function(t,e,n){return n.execute(t,e,t.element)},Jm=Bm(Hm,wi.init,(function(t,e,n,o){var r=n.useSpace&&!Zf(t.element)?vm:[],i=n.useEnter?hm:[],a=n.useDown?wm:[],u=r.concat(i).concat(a);return[Am(Om(u),$m)].concat(n.useControlEnter?[Am(Dm([Im,Om(hm)]),$m)]:[])}),(function(t,e,n,o){return n.useSpace&&!Zf(t.element)?[Am(Om(vm),Lm)]:[]}),(function(){return C.none()})),Um=function(){var t=dn(C.none());return ki({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(C.some({numRows:e,numColumns:n}))},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})},Wm=Object.freeze({__proto__:null,flatgrid:Um,init:function(t){return t.state(t)}}),Gm=function(t){return function(e,n,o,r){var i=t(e.element);return qm(i,e,n,o,r)}},Xm=function(t,e){var n=Lc(t,e);return Gm(n)},Ym=function(t,e){var n=Lc(e,t);return Gm(n)},Km=function(t){return function(e,n,o,r){return qm(t,e,n,o,r)}},qm=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},Zm=Km,Qm=Km,td=Km,ed=function(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e},nd=function(t,e,n){var o,r=Ds(t,n),i=G(r,ed);return q(o=i,(function(t){return Gn(t,e)})).map((function(t){return{index:t,candidates:o}}))},od=function(t,e){return q(t,(function(t){return Gn(e,t)}))},rd=function(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?C.some(t[o]):C.none()}))},id=function(t,e,n,o,r){return rd(t,e,o,(function(e,i){var a=e===n-1?t.length-e*o:o,u=Oc(i,r,0,a-1);return C.some({row:e,column:u})}))},ad=function(t,e,n,o,r){return rd(t,e,o,(function(e,i){var a=Oc(e,r,0,n-1),u=a===n-1?t.length-a*o:o,c=Dc(i,0,u-1);return C.some({row:a,column:c})}))},ud=[He("selector"),nn("execute",Nm),gu("onEscape"),nn("captureTab",!1),wu()],cd=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},sd=function(t){return function(e,n,o,r){return nd(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}},ld=function(t,e,n){return n.captureTab?C.some(!0):C.none()},fd=sd((function(t,e,n,o){return id(t,e,n,o,-1)})),md=sd((function(t,e,n,o){return id(t,e,n,o,1)})),dd=sd((function(t,e,n,o){return ad(t,e,n,o,-1)})),pd=sd((function(t,e,n,o){return ad(t,e,n,o,1)})),hd=r([Am(Om(bm),Xm(fd,md)),Am(Om(xm),Ym(fd,md)),Am(Om(ym),Zm(dd)),Am(Om(wm),Qm(pd)),Am(Dm([Tm,Om(pm)]),ld),Am(Dm([Em,Om(pm)]),ld),Am(Om(gm),(function(t,e,n){return n.onEscape(t,e)})),Am(Om(vm.concat(hm)),(function(t,e,n,o){return r=t,(i=n).focusManager.get(r).bind((function(t){return qa(t,i.selector)})).bind((function(o){return n.execute(t,e,o)}));var r,i}))]),gd=r([Am(Om(vm),Lm)]),vd=Bm(ud,Um,hd,gd,(function(){return C.some(cd)})),bd=function(t,e,n,o){var r=function t(e,n,r){var i,a=Oc(n,o,0,r.length-1);return a===e?C.none():(i=r[a],"button"===hr(i)&&"disabled"===Kr(i,"disabled")?t(e,a,r):C.from(r[a]))};return nd(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))},yd=[He("selector"),nn("getInitial",C.none),nn("execute",Nm),gu("onEscape"),nn("executeOnMove",!1),nn("allowVertical",!0)],xd=function(t,e,n){return o=t,(r=n).focusManager.get(o).bind((function(t){return qa(t,r.selector)})).bind((function(o){return n.execute(t,e,o)}));var o,r},wd=function(t,e,n){e.getInitial(t).orThunk((function(){return Ka(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},kd=function(t,e,n){return bd(t,n.selector,e,-1)},Sd=function(t,e,n){return bd(t,n.selector,e,1)},Cd=function(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?xd(e,n,o):C.some(!0)}))}},_d=function(t,e,n){return n.onEscape(t,e)},Od=r([Am(Om(vm),Lm)]),Dd=Bm(yd,wi.init,(function(t,e,n,o){var r=bm.concat(n.allowVertical?ym:[]),i=xm.concat(n.allowVertical?wm:[]);return[Am(Om(r),Cd(Xm(kd,Sd))),Am(Om(i),Cd(Ym(kd,Sd))),Am(Om(hm),xd),Am(Om(vm),xd),Am(Om(gm),_d)]}),Od,(function(){return C.some(wd)})),Td=function(t,e,n){return C.from(t[e]).bind((function(t){return C.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},Id=function(t,e,n,o){var r=t[e].length,i=Oc(n,o,0,r-1);return Td(t,e,i)},Ed=function(t,e,n,o){var r=Oc(n,o,0,t.length-1),i=t[r].length,a=Dc(e,0,i-1);return Td(t,r,a)},Ad=function(t,e,n,o){var r=t[e].length,i=Dc(n+o,0,r-1);return Td(t,e,i)},Rd=function(t,e,n,o){var r=Dc(n+o,0,t.length-1),i=t[r].length,a=Dc(e,0,i-1);return Td(t,r,a)},Fd=[Ge("selectors",[He("row"),He("cell")]),nn("cycles",!0),nn("previousSelector",C.none),nn("execute",Nm)],Md=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Ka(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))},Pd=function(t,e){return function(n,o,r){var i=r.cycles?t:e;return qa(o,r.selectors.row).bind((function(t){var e=Ds(t,r.selectors.cell);return od(e,o).bind((function(e){var o=Ds(n,r.selectors.row);return od(o,t).bind((function(t){var n,a=(n=r,J(o,(function(t){return Ds(t,n.selectors.cell)})));return i(a,t,e).map((function(t){return t.cell}))}))}))}))}},Bd=Pd((function(t,e,n){return Id(t,e,n,-1)}),(function(t,e,n){return Ad(t,e,n,-1)})),jd=Pd((function(t,e,n){return Id(t,e,n,1)}),(function(t,e,n){return Ad(t,e,n,1)})),zd=Pd((function(t,e,n){return Ed(t,n,e,-1)}),(function(t,e,n){return Rd(t,n,e,-1)})),Vd=Pd((function(t,e,n){return Ed(t,n,e,1)}),(function(t,e,n){return Rd(t,n,e,1)})),Nd=r([Am(Om(bm),Xm(Bd,jd)),Am(Om(xm),Ym(Bd,jd)),Am(Om(ym),Zm(zd)),Am(Om(wm),Qm(Vd)),Am(Om(vm.concat(hm)),(function(t,e,n){return gc(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),Ld=r([Am(Om(vm),Lm)]),Hd=Bm(Fd,wi.init,Nd,Ld,(function(){return C.some(Md)})),$d=[He("selector"),nn("execute",Nm),nn("moveOnTab",!1)],Jd=function(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))},Ud=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Wd=function(t,e,n){return bd(t,n.selector,e,-1)},Gd=function(t,e,n){return bd(t,n.selector,e,1)},Xd=r([Am(Om(ym),td(Wd)),Am(Om(wm),td(Gd)),Am(Dm([Tm,Om(pm)]),(function(t,e,n,o){return n.moveOnTab?td(Wd)(t,e,n,o):C.none()})),Am(Dm([Em,Om(pm)]),(function(t,e,n,o){return n.moveOnTab?td(Gd)(t,e,n,o):C.none()})),Am(Om(hm),Jd),Am(Om(vm),Jd)]),Yd=r([Am(Om(vm),Lm)]),Kd=Bm($d,wi.init,Xd,Yd,(function(){return C.some(Ud)})),qd=[gu("onSpace"),gu("onEnter"),gu("onShiftEnter"),gu("onLeft"),gu("onRight"),gu("onTab"),gu("onShiftTab"),gu("onUp"),gu("onDown"),gu("onEscape"),nn("stopSpaceKeyup",!1),Ke("focusIn")],Zd=Bm(qd,wi.init,(function(t,e,n){return[Am(Om(vm),n.onSpace),Am(Dm([Em,Om(hm)]),n.onEnter),Am(Dm([Tm,Om(hm)]),n.onShiftEnter),Am(Dm([Tm,Om(pm)]),n.onShiftTab),Am(Dm([Em,Om(pm)]),n.onTab),Am(Om(ym),n.onUp),Am(Om(wm),n.onDown),Am(Om(bm),n.onLeft),Am(Om(xm),n.onRight),Am(Om(vm),n.onSpace),Am(Om(gm),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Am(Om(vm),Lm)]:[]}),(function(t){return t.focusIn})),Qd=zm.schema(),tp=Vm.schema(),ep=Dd.schema(),np=vd.schema(),op=Hd.schema(),rp=Jm.schema(),ip=Kd.schema(),ap=Zd.schema(),up=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Qd,cyclic:tp,flow:ep,flatgrid:np,matrix:op,execution:rp,menu:ip,special:ap}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){jt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Wm}),cp=function(t,e,n,o){var r=t.getSystem().build(o);ul(t,r,n)},sp=function(t,e,n,o){var r=lp(t);K(r,(function(t){return Gn(o.element,t.element)})).each(sl)},lp=function(t,e){return t.components()},fp=function(t,e,n,o,r){var i=lp(t);return C.from(i[o]).map((function(e){return sp(t,0,0,e),r.each((function(e){cp(t,0,(function(t,e){var n,r;r=e,Ir(n=t,o).fold((function(){Lr(n,r)}),(function(t){zr(t,r)}))}),e)})),e}))},mp=cc({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){cp(t,0,Lr,o)},prepend:function(t,e,n,o){cp(t,0,Nr,o)},remove:sp,replaceAt:fp,replaceBy:function(t,e,n,o,r){var i=lp(t);return q(i,o).bind((function(e){return fp(t,0,0,e,r)}))},set:function(t,e,n,o){vc((function(){var e=J(o,t.getSystem().build);il(t,e)}),t.element)},contents:lp})}),dp=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=er(e),cc({fields:[He("enabled")],name:n,active:{events:r(o)}})),configAsRaw:r({}),initialConfig:{},state:wi}}},pp=function(t,e){e.ignore||(pc(t.element),e.onFocus(t))},hp=Object.freeze({__proto__:null,focus:pp,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return e=t.element,n=Fr(e).dom,e.dom===n.activeElement;var e,n}}),gp=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return Ci(n)},events:function(t){return er([rr(Co(),(function(e,n){pp(e,t),n.stop()}))].concat(t.stopMousedown?[rr(uo(),(function(t,e){e.event.prevent()}))]:[]))}}),vp=[hu("onFocus"),nn("stopMousedown",!1),nn("ignore",!1)],bp=cc({fields:vp,name:"focusing",active:gp,apis:hp}),yp=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},xp=function(t,e,n){e.toggleClass.each((function(e){(n.get()?ji:Vi)(t.element,e)}))},wp=function(t,e,n){Cp(t,e,n,!n.get())},kp=function(t,e,n){n.set(!0),xp(t,e,n),yp(t,e,n)},Sp=function(t,e,n){n.set(!1),xp(t,e,n),yp(t,e,n)},Cp=function(t,e,n,o){(o?kp:Sp)(t,e,n)},_p=function(t,e,n){Cp(t,e,n,e.selected)},Op=Object.freeze({__proto__:null,onLoad:_p,toggle:wp,isOn:function(t,e,n){return n.get()},on:kp,off:Sp,set:Cp}),Dp=Object.freeze({__proto__:null,exhibit:function(){return Ci({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=wp,pr((function(t){r(t,n,o)}))),a=ec(t,e,_p);return er(Z([t.toggleOnExecute?[i]:[],[a]]))}}),Tp=function(t,e,n){Yr(t.element,"aria-expanded",n)},Ip=[nn("selected",!1),Ke("toggleClass"),nn("toggleOnExecute",!0),on("aria",{mode:"none"},Re("mode",{pressed:[nn("syncWithExpanded",!1),yu("update",(function(t,e,n){Yr(t.element,"aria-pressed",n),e.syncWithExpanded&&Tp(t,e,n)}))],checked:[yu("update",(function(t,e,n){Yr(t.element,"aria-checked",n)}))],expanded:[yu("update",Tp)],selected:[yu("update",(function(t,e,n){Yr(t.element,"aria-selected",n)}))],none:[yu("update",n)]}))],Ep=cc({fields:Ip,name:"toggling",active:Dp,apis:Op,state:(Pm=!1,{init:function(){var t=dn(Pm);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Pm)},readState:function(){return t.get()}}}})}),Ap=function(){var t=function(t,e){e.stop(),qo(t)};return[rr(yo(),t),rr(Eo(),t),sr(oo()),sr(uo())]},Rp=function(t){return er(Z([t.map((function(t){return pr((function(e,n){t(e),n.stop()}))})).toArray(),Ap()]))},Fp="alloy.item-hover",Mp="alloy.item-focus",Pp=function(t){(gc(t.element).isNone()||bp.isFocused(t))&&(bp.isFocused(t)||bp.focus(t),Ko(t,Fp,{item:t}))},Bp=function(t){Ko(t,Mp,{item:t})},jp=r(Fp),zp=r(Mp),Vp=[He("data"),He("components"),He("dom"),nn("hasSubmenu",!1),Ke("toggling"),Gl("itemBehaviours",[Ep,bp,up,$l]),nn("ignoreFocus",!1),nn("domModification",{}),yu("builder",(function(t){return{dom:t.dom,domModification:m(m({},t.domModification),{attributes:m(m(m({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Xl(t.itemBehaviours,[t.toggling.fold(Ep.revoke,(function(t){return Ep.config(m({aria:{mode:"checked"}},t))})),bp.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Bp(t)}}),up.config({mode:"execution"}),$l.config({store:{mode:"memory",initialValue:t.data}}),dp("item-type-events",p(Ap(),[rr(fo(),Pp),rr(Io(),bp.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),nn("eventOrder",{})],Np=[He("dom"),He("components"),yu("builder",(function(t){return{dom:t.dom,components:t.components,events:er([(e=Io(),rr(e,(function(t,e){e.stop()})))])};var e}))],Lp=r("item-widget"),Hp=r([xf({name:"widget",overrides:function(t){return{behaviours:ac([$l.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:n}})])}}})]),$p=[He("uid"),He("data"),He("components"),He("dom"),nn("autofocus",!1),nn("ignoreFocus",!1),Gl("widgetBehaviours",[$l,bp,up]),nn("domModification",{}),Lf(Hp()),yu("builder",(function(t){var e=Rf(Lp(),t,Hp()),n=Ff(Lp(),t,e.internals()),o=function(e){return Mf(e,t,"widget").map((function(t){return up.focusIn(t),t}))},r=function(e,n){return Zf(n.event.target)||t.autofocus&&n.setSource(e.element),C.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:er([pr((function(t,e){o(t).each((function(t){e.stop()}))})),rr(fo(),Pp),rr(Io(),(function(e,n){t.autofocus?o(e):bp.focus(e)}))]),behaviours:Xl(t.widgetBehaviours,[$l.config({store:{mode:"memory",initialValue:t.data}}),bp.config({ignore:t.ignoreFocus,onFocus:function(t){Bp(t)}}),up.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:fc(),onLeft:r,onRight:r,onEscape:function(e,n){return bp.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),C.none()):(bp.focus(e),C.some(!0))}})])}}))],Jp=Re("type",{widget:$p,item:Vp,separator:Np}),Up=r([Sf({factory:{sketch:function(t){var e=Ie("menu.spec item",Jp,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:m(m({},e),{uid:mi("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Wp=r([He("value"),He("items"),He("dom"),He("components"),nn("eventOrder",{}),Jl("menuBehaviours",[mm,$l,em,up]),on("movement",{mode:"menu",moveOnTab:!0},Re("mode",{grid:[wu(),yu("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[yu("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),He("rowSelector")],menu:[nn("moveOnTab",!0),yu("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),$e("markers",lu()),nn("fakeFocus",!1),nn("focusManager",Fm()),hu("onHighlight")]),Gp=r("alloy.menu-focus"),Xp=Yf({name:"Menu",configFields:Wp(),partFields:Up(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Wl(t.menuBehaviours,[mm.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),$l.config({store:{mode:"memory",initialValue:t.value}}),em.config({find:C.some}),up.config(t.movement.config(t,t.movement))]),events:er([rr(zp(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){mm.highlight(t,n),e.stop(),Ko(t,Gp(),{menu:t,item:n})}))})),rr(jp(),(function(t,e){var n=e.event.item;mm.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Yp=function t(e,n,o,r){return Pt(o,r).bind((function(r){return Pt(e,r).bind((function(r){var i=t(e,n,o,r);return C.some([r].concat(i))}))})).getOr([])},Kp=function(t,e){var n={};Tt(t,(function(t,e){U(t,(function(t){n[t]=e}))}));var o=e,r=Et(e,(function(t,e){return{k:t,v:e}})),i=It(r,(function(t,e){return[e].concat(Yp(n,o,r,e))}));return It(n,(function(t){return Pt(i,t).getOr([t])}))},qp=function(t){return"prepared"===t.type?C.some(t.menu):C.none()},Zp={init:function(){var t=dn({}),e=dn({}),n=dn({}),o=dn(C.none()),r=dn({}),i=function(e,n,o){return a(e).bind((function(r){return i=e,Ft(t.get(),(function(t,e){return t===i})).bind((function(t){return n(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:o}}))}));var i}))},a=function(t){return u(t).bind(qp)},u=function(t){return Pt(e.get(),t)},c=function(e){return Pt(t.get(),e)};return{setMenuBuilt:function(t,n){var o;e.set(m(m({},e.get()),((o={})[t]={type:"prepared",menu:n},o)))},setContents:function(i,a,u,c){o.set(C.some(i)),t.set(u),e.set(a),r.set(c);var s=Kp(c,u);n.set(s)},expand:function(e){return Pt(t.get(),e).map((function(t){var o=Pt(n.get(),e).getOr([]);return[t].concat(o)}))},refresh:function(t){return Pt(n.get(),t)},collapse:function(t){return Pt(n.get(),t).bind((function(t){return 1<t.length?C.some(t.slice(1)):C.none()}))},lookupMenu:u,lookupItem:c,otherMenus:function(t){var e=r.get();return nt(Ot(e),t)},getPrimary:function(){return o.get().bind(a)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),o.set(C.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var r=G(c(t).toArray(),(function(t){return a(t).isSome()}));return Pt(n.get(),t).bind((function(t){var n=et(r.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return C.none();e.push(o.getOrDie())}return C.some(e)}(Q(n,(function(t,r){return i(t,e,n.slice(0,r+1)).fold((function(){return o.get().is(t)?[]:[C.none()]}),(function(t){return[C.some(t)]}))})))}))}}},extractPreparedMenu:qp},Qp=r("collapse-item"),th=Xf({name:"TieredMenu",configFields:[bu("onExecute"),bu("onEscape"),vu("onOpenMenu"),vu("onOpenSubmenu"),hu("onRepositionMenu"),hu("onCollapseMenu"),nn("highlightImmediately",!0),Ge("data",[He("primary"),He("menus"),He("expansions")]),nn("fakeFocus",!1),hu("onHighlight"),hu("onHover"),mu(),He("dom"),nn("navigateOnHover",!0),nn("stayInDom",!1),Jl("tmenuBehaviours",[up,mm,em,mp]),nn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var o,r,i=dn(C.none()),a=Zp.init(),u=function(e){var n,o,r,i=(n=e,o=t.data.primary,r=t.data.menus,It(r,(function(e,r){var i=function(){return Xp.sketch(m(m({},e),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Mm:Fm)()}))};return r===o?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),u=s();return a.setContents(t.data.primary,i,t.data.expansions,u),a.getPrimary()},c=function(t){return $l.getValue(t).value},s=function(e){return It(t.data.menus,(function(t,e){return Q(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},f=function(t,e){mm.highlight(t,e),mm.getHighlighted(e).orThunk((function(){return mm.getFirst(e)})).each((function(e){Zo(t,e.element,Io())}))},d=function(t,e){return Kf(J(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?C.some(t.menu):C.none()}))})))},p=function(e,n,o){var r=d(n,n.otherMenus(o));U(r,(function(n){Hi(n.element,[t.markers.backgroundMenu]),t.stayInDom||mp.remove(e,n)}))},h=function(e,n){var o,r=(o=e,i.get().getOrThunk((function(){var e={},n=Ds(o.element,"."+t.markers.item),r=G(n,(function(t){return"true"===Kr(t,"aria-haspopup")}));return U(r,(function(t){o.getSystem().getByDom(t).each((function(t){var n=c(t);e[n]=t}))})),i.set(C.some(e)),e})));Tt(r,(function(t,e){var o=N(n,e);Yr(t.element,"aria-expanded",o)}))},g=function(e,n,o){return C.from(o[0]).bind((function(r){return n.lookupMenu(r).bind((function(r){if("notbuilt"===r.type)return C.none();var i=r.menu,a=d(n,o.slice(1));return U(a,(function(e){ji(e.element,t.markers.backgroundMenu)})),Ji(i.element)||mp.append(e,ga(i)),Hi(i.element,[t.markers.backgroundMenu]),f(e,i),p(e,n,o),C.some(i)}))}))};(r=o=o||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=function(e,n,r){void 0===r&&(r=o.HighlightSubmenu);var i=c(n);return a.expand(i).bind((function(i){return h(e,i),C.from(i[0]).bind((function(u){return a.lookupMenu(u).bind((function(c){var s=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return a.setMenuBuilt(e,o),o}(e,u,c);return Ji(s.element)||mp.append(e,ga(s)),t.onOpenSubmenu(e,n,s,et(i)),r===o.HighlightSubmenu?(mm.highlightFirst(s),g(e,a,i)):(mm.dehighlightAll(s),C.some(n))}))}))}))},b=function(e,n){var o=c(n);return a.collapse(o).bind((function(o){return h(e,o),g(e,a,o).map((function(o){return t.onCollapseMenu(e,n,o),o}))}))},y=function(e){return function(n,o){return qa(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(l)}))}))}},x=er([rr(Gp(),(function(t,e){var n=e.event.item;a.lookupItem(c(n)).each((function(){var n=e.event.menu;mm.highlight(t,n);var o=c(e.event.item);a.refresh(o).each((function(e){return p(t,a,e)}))}))})),pr((function(e,r){var i=r.event.target;e.getSystem().getByDom(i).each((function(r){0===c(r).indexOf("collapse-item")&&b(e,r),v(e,r,o.HighlightSubmenu).fold((function(){t.onExecute(e,r)}),n)}))})),fr((function(e,n){u(e).each((function(n){mp.append(e,ga(n)),t.onOpenMenu(e,n),t.highlightImmediately&&f(e,n)}))}))].concat(t.navigateOnHover?[rr(jp(),(function(e,n){var r,i,u=n.event.item;r=e,i=c(u),a.refresh(i).bind((function(t){return h(r,t),g(r,a,t)})),v(e,u,o.HighlightParent),t.onHover(e,u)}))]:[])),w=function(t){return mm.getHighlighted(t).bind(mm.getHighlighted)},k={collapseMenu:function(t){w(t).each((function(e){b(t,e)}))},highlightPrimary:function(t){a.getPrimary().each((function(e){f(t,e)}))},repositionMenus:function(e){a.getPrimary().bind((function(t){return w(e).bind((function(t){var e=c(t),n=Mt(a.getMenus()),o=Kf(J(n,Zp.extractPreparedMenu));return a.getTriggeringPath(e,(function(t){return e=t,ct(o,(function(t){if(!t.getSystem().isConnected())return C.none();var n=mm.getCandidates(t);return K(n,(function(t){return c(t)===e}))}));var e}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){var n;n=e,C.from(n.components()[0]).filter((function(t){return"menu"===Kr(t.element,"role")})).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Wl(t.tmenuBehaviours,[up.config({mode:"special",onRight:y((function(t,e){return Zf(e.element)?C.none():v(t,e,o.HighlightSubmenu)})),onLeft:y((function(t,e){return Zf(e.element)?C.none():b(t,e)})),onEscape:y((function(e,n){return b(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){a.getPrimary().each((function(e){Zo(t,e.element,Io())}))}}),mm.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),em.config({find:function(t){return mm.getHighlighted(t)}}),mp.config({})]),eventOrder:t.eventOrder,apis:k,events:x}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Zt(t,e),expansions:{}}},collapseItem:function(t){return{value:ii(Qp()),meta:{text:t}}}}}),eh=Xf({name:"InlineView",configFields:[He("lazySink"),hu("onShow"),hu("onHide"),tn("onEscape"),Jl("inlineBehaviours",[Sl,$l,mc]),en("fireDismissalEventInstead",[nn("event",Lo())]),en("fireRepositionEventInstead",[nn("event",Ho())]),nn("getRelated",C.none),nn("isExtraPart",s),nn("eventOrder",C.none)],factory:function(t,e){var n=function(t,e,n,r){o(t,e,n,(function(){return r.map(Na)}))},o=function(e,n,o,r){var i=t.lazySink(e).getOrDie();Sl.openWhileCloaked(e,o,(function(){return el.positionWithinBounds(i,n,e,r())})),$l.setValue(e,C.some({mode:"position",anchor:n,getBounds:r}))},r=function(e,n,o,r){var i,a,u,c,s,l,f,d,p=(i=t,a=e,u=n,s=r,l=function(){return i.lazySink(a)},f="horizontal"===(c=o).type?{layouts:{onLtr:qu,onRtl:Zu}}:{},d=function(t){return 2===t.length?f:{}},th.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return Sl.close(a),i.onEscape.map((function(t){return t(a)})),C.some(!0)},onExecute:function(){return C.some(!0)},onOpenMenu:function(t,e){el.positionWithinBounds(l().getOrDie(),u,e,s())},onOpenSubmenu:function(t,e,n,o){var r=l().getOrDie();el.position(r,m({anchor:"submenu",item:e},d(o)),n)},onRepositionMenu:function(t,e,n){var o=l().getOrDie();el.positionWithinBounds(o,u,e,s()),U(n,(function(t){var e=d(t.triggeringPath);el.position(o,m({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}}));Sl.open(e,p),$l.setValue(e,C.some({mode:"menu",menu:p}))},i=function(e){Sl.isOpen(e)&&$l.getValue(e).each((function(n){switch(n.mode){case"menu":Sl.getState(e).each((function(t){th.repositionMenus(t)}));break;case"position":var o=t.lazySink(e).getOrDie();el.positionWithinBounds(o,n.anchor,e,n.getBounds())}}))},a={setContent:function(t,e){Sl.setContent(t,e)},showAt:function(t,e,o){n(t,e,o,C.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(t,e,n){r(t,e,n,(function(){return C.none()}))},showMenuWithinBounds:r,hide:function(t){Sl.isOpen(t)&&($l.setValue(t,C.none()),Sl.close(t))},getContent:function(t){return Sl.getState(t)},reposition:i,isOpen:Sl.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Wl(t.inlineBehaviours,[Sl.config({isPartOf:function(e,n,o){return tu(n,o)||(r=e,i=o,t.getRelated(r).exists((function(t){return tu(t,i)})));var r,i},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),$l.config({store:{mode:"memory",initialValue:C.none()}}),mc.config({channels:m(m({},Tl(m({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),El(m(m({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:a}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),nh=function(t){return t.x},oh=function(t,e){return t.x+t.width/2-e.width/2},rh=function(t,e){return t.x+t.width-e.width},ih=function(t){return t.y},ah=function(t,e){return t.y+t.height-e.height},uh=function(t,e,n){return ku(rh(t,e),ah(t,e),n.innerSoutheast(),Du(),Ru(t,{right:0,bottom:3}),"layout-inner-se")},ch=function(t,e,n){return ku(nh(t),ah(t,e),n.innerSouthwest(),Ou(),Ru(t,{left:1,bottom:3}),"layout-inner-sw")},sh=function(t,e,n){return ku(rh(t,e),ih(t),n.innerNortheast(),_u(),Ru(t,{right:0,top:2}),"layout-inner-ne")},lh=function(t,e,n){return ku(nh(t),ih(t),n.innerNorthwest(),Cu(),Ru(t,{left:1,top:2}),"layout-inner-nw")},fh=function(t,e,n){return ku(oh(t,e),ih(t),n.innerNorth(),Tu(),Ru(t,{top:2}),"layout-inner-n")},mh=function(t,e,n){return ku(oh(t,e),ah(t,e),n.innerSouth(),Iu(),Ru(t,{bottom:3}),"layout-inner-s")},dh=tinymce.util.Tools.resolve("tinymce.util.Delay"),ph=Xf({name:"Button",factory:function(t){var e=Rp(t.action),n=t.dom.tag,o=function(e){return Pt(t.dom,"attributes").bind((function(t){return Pt(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Xl(t.buttonBehaviours,[bp.config({}),up.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map((function(t){return{role:t}})).getOr({});return m({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[nn("uid",void 0),He("dom"),nn("components",[]),Gl("buttonBehaviours",[bp,up]),Ke("action"),Ke("role"),nn("eventOrder",{})]}),hh=function(t){var e=void 0!==t.uid&&jt(t,"uid")?t.uid:mi("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return m(m({},t),{uid:e})}}},gh=function(t){return C.from(t()["temporary-placeholder"]).getOr("!not found!")},vh=function(t,e){return C.from(e()[t.toLowerCase()]).getOrThunk((function(){return gh(e)}))},bh={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},yh=Xf({name:"Notification",factory:function(t){var e,n,o=hh({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:ac([mp.config({})])}),r=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},i=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},a=hh({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},i(0)],behaviours:ac([mp.config({})])}),u={updateProgress:function(t,e){t.getSystem().isConnected()&&a.getOpt(t).each((function(t){mp.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(e)]},i(e)])}))},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=o.get(t),mp.set(n,[ma(e)]))}},c=Z([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return C.from(bh[t])})).toArray()]),s=hh(ph.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vh("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=c,n=t.iconProvider,ct(e,(function(t){return C.from(n()[t.toLowerCase()])})).getOrThunk((function(){return gh(n)})))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:ac([mp.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ac([bp.config({}),dp("notification-events",[rr(mo(),(function(t){s.getOpt(t).each(bp.focus)}))])]),components:l.concat(t.progress?[a.asSpec()]:[]).concat(t.closeButton?[s.asSpec()]:[]),apis:u}},configFields:[Ke("level"),He("progress"),He("icon"),He("onAction"),He("text"),He("iconProvider"),He("translationProvider"),cn("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function xh(t,e,n){var o=e.backstage;return{open:function(t,r){var i=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=function(){r(),eh.hide(c)},u=ha(yh.sketch({text:t.text,level:N(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:C.from(t.icon),closeButton:!i,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),c=ha(eh.sketch(m({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},o.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),0<t.timeout&&dh.setTimeout((function(){a()}),t.timeout),{close:a,moveTo:function(t,e){eh.showAt(c,{anchor:"makeshift",x:t,y:e},ga(u))},moveRel:function(t,n){var o,r;"banner"!==n?(o=function(t){switch(t){case"bc-bc":return mh;case"tc-tc":return fh;case"tc-bc":return $u;case"bc-tc":default:return Ju}}(n),r={anchor:"node",root:Ui(),node:C.some(hn.fromDom(t)),layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}},eh.showAt(c,r,ga(u))):eh.showAt(c,e.backstage.shared.anchors.banner(),ga(u))},text:function(t){yh.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){yh.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(t){var e;U(t,(function(t){return t.moveTo(0,0)})),0<(e=t).length&&(it(e).each((function(t){return t.moveRel(null,"banner")})),U(e,(function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")})))},getArgs:function(t){return t.settings}}}var wh,kh,Sh=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Ch=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),_h=function(t,e,n,o,r){var i=Ch(t,(function(e){return o=e,(n=t).isBlock(o)||N(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===n.getContentEditable(o);var n,o}));return C.from(i.backwards(e,n,o,r))},Oh=function(t,e){return Dh(hn.fromDom(t.selection.getNode())).getOrThunk((function(){var n=hn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Lr(n,hn.fromDom(e.extractContents())),e.insertNode(n.dom),_r(n).each((function(t){return t.dom.normalize()})),Os(n,_s).map((function(e){var n;t.selection.setCursorLocation(e.dom,"img"===hr(n=e)?1:Ss(n).fold((function(){return Tr(n).length}),(function(t){return t.length})))})),n}))},Dh=function(t){return qa(t,"[data-mce-autocompleter]")},Th=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Ih=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},Eh=function(t,e){return t.substring(e.length)},Ah=function(t,e,n,o){if(void 0===o&&(o=0),!(r=e).collapsed||3!==r.startContainer.nodeType)return C.none();var r,i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return _h(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,e,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(Ih(r))return C.none();if(r===n)break}return C.some(o)}(o,e,n).getOr(e)}),i).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return C.none();var i=Th(r);return 0!==i.lastIndexOf(n)||Eh(i,n).length<o?C.none():C.some({text:Eh(i,n),range:r,triggerChar:n})}))},Rh=function(t,e,n,o){return void 0===o&&(o=0),Dh(hn.fromDom(e.startContainer)).fold((function(){return Ah(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=Th(o);return C.some({range:o,text:Eh(r,n),triggerChar:n})}))},Fh=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){Ko(t,ho(),{raw:e})};e.on("keydown",(function(e){var o=function(){return t.getView().bind(mm.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(o().each(qo),e.preventDefault()):40===e.which?(o().fold((function(){t.getView().each(mm.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||o().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&Dh(hn.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},Mh=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ph=function(t,e){return{container:t,offset:e}},Bh=function t(e){if(3===e.nodeType)return Ph(e,e.data.length);var n=e.childNodes;return 0<n.length?t(n[n.length-1]):Ph(e,n.length)},jh=function t(e,n){var o=e.childNodes;return 0<o.length&&n<o.length?t(o[n],0):0<o.length&&1===e.nodeType&&o.length===n?Bh(o[o.length-1]):Ph(e,n)},zh=function(t){return function(e){var n,o,r=jh(e.startContainer,e.startOffset);return!_h(n=t,(o=r).container,o.offset,(function(t,e){return 0===e?-1:e}),n.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!Ih(e)})).isSome()}},Vh=function(t,e){var n,o,r=e(),i=t.selection.getRng();return n=t.dom,o=i,ct(r.triggerChars,(function(t){return Rh(n,o,t)})).bind((function(n){return Nh(t,e,n)}))},Nh=function(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,a=G(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return zh(t.dom)}))(n.range,i,n.text)}));if(0===a.length)return C.none();var u=Mh.all(J(a,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return C.some({lookupData:u,context:n})},Lh=me([Je("type"),Qe("text")]),Hh=me([nn("type","autocompleteitem"),nn("active",!1),nn("disabled",!1),nn("meta",{}),Je("value"),Qe("text"),Qe("icon")]),$h=me([Je("type"),Je("ch"),rn("minChars",1),nn("columns",1),rn("maxResults",10),tn("matches"),We("fetch"),We("onAction"),ln("highlightOn",[],Be)]),Jh=[cn("disabled",!1),Qe("tooltip"),Qe("icon"),Qe("text"),sn("onSetup",(function(){return n}))],Uh=me([Je("type"),We("onAction")].concat(Jh)),Wh=function(t){return De("toolbarbutton",Uh,t)},Gh=[cn("active",!1)].concat(Jh),Xh=me(Gh.concat([Je("type"),We("onAction")])),Yh=function(t){return De("ToggleButton",Xh,t)},Kh=[sn("predicate",s),un("scope","node",["node","editor"]),un("position","selection",["node","selection","line"])],qh=Jh.concat([nn("type","contextformbutton"),nn("primary",!1),We("onAction"),mn("original",i)]),Zh=Gh.concat([nn("type","contextformbutton"),nn("primary",!1),We("onAction"),mn("original",i)]),Qh=Jh.concat([nn("type","contextformbutton")]),tg=Gh.concat([nn("type","contextformtogglebutton")]),eg=Re("type",{contextformbutton:qh,contextformtogglebutton:Zh}),ng=me([nn("type","contextform"),sn("initValue",(function(){return""})),Qe("label"),Ye("commands",eg),qe("launch",Re("type",{contextformbutton:Qh,contextformtogglebutton:tg}))].concat(Kh)),og=me([nn("type","contexttoolbar"),Je("items")].concat(Kh)),rg=function(t){var e,n,o=t.ui.registry.getAll().popups,r=It(o,(function(t){return De("Autocompleter",$h,t).fold((function(t){throw new Error(Ee(t))}),(function(t){return t}))})),i=(e=Rt(r,(function(t){return t.ch})),n={},U(e,(function(t){n[t]={}})),Ot(n)),a=Mt(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return G(a,(function(e){return e.ch===t}))}}};(kh=wh=wh||{})[kh.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",kh[kh.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ig,ag,ug=wh,cg="tox-menu-nav__js",sg="tox-collection__item",lg="tox-swatch",fg={normal:cg,color:lg},mg="tox-collection__item--enabled",dg="tox-collection__item-label",pg="tox-collection__item-caret",hg="tox-collection__item--active",gg="tox-collection__item-container",vg="tox-collection__item-container--row",bg=function(t){return Pt(fg,t).getOr(cg)},yg=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},xg=function(t){var e=yg(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:bg(t)}},wg=[Xp.parts.items({})],kg=function(t,e,n){var o=yg(n);return{dom:{tag:"div",classes:Z([[o.tieredMenu]])},markers:xg(n)}},Sg=function(t,e){return function(n){var o=$(n,e);return J(o,(function(e){return{dom:t,components:e}}))}},Cg=function(t,e){var n=[],o=[];return U(t,(function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],Bt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&n.push(o),J(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},_g=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Xp.parts.items({preprocess:function(n){return"auto"!==t&&1<t?Sg({tag:"div",classes:["tox-collection__group"]},t)(n):Cg(n,(function(t,n){return"separator"===e[n].type}))}})]}},Og=function(t){return L(t,(function(t){return"icon"in t&&void 0!==t.icon}))},Dg=function(t){return console.error(Ee(t)),console.log(t),C.none()},Tg=function(t,e,n,o,r){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xp.parts.items({preprocess:function(t){return Cg(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:a.dom,components:a.components,items:n}},Ig=function(t,e,n,o,r){var a,u,c,s,l,f;return"color"===r?{value:t,dom:(a=o,c={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xp.parts.items({preprocess:"auto"!==a?Sg({tag:"div",classes:["tox-swatches__row"]},a):i})]}]}).dom,components:c.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(c=_g(o,n)).dom,components:c.components,items:n}:"normal"===r&&1===o?{value:t,dom:(c=_g(1,n)).dom,components:c.components,items:n}:"normal"===r?{value:t,dom:(c=_g(o,n)).dom,components:c.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:(s=e,l=o,f=yg(r),{tag:"div",classes:Z([[f.menu,"tox-menu-"+l+"-column"],s?[f.hasIcons]:[]])}),components:wg,items:n}:{value:t,dom:(u=o,c={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xp.parts.items({preprocess:Sg({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:c.components,items:n}},Eg=[Je("type"),Je("src"),Qe("alt"),ln("classes",[],Be)],Ag=me(Eg),Rg=[Je("type"),Je("text"),Qe("name"),ln("classes",["tox-collection__item-label"],Be)],Fg=me(Rg),Mg=Ce((function(){return Ae("type",{cardimage:Ag,cardtext:Fg,cardcontainer:Pg})})),Pg=me([Je("type"),an("direction","horizontal"),an("align","left"),an("valign","middle"),Ye("items",Mg)]),Bg=[cn("disabled",!1),Qe("text"),Qe("shortcut"),ye("value","value",Xt((function(){return ii("menuitem-value")})),Fe()),nn("meta",{})],jg=me([Je("type"),Qe("label"),Ye("items",Mg),sn("onSetup",(function(){return n})),sn("onAction",n)].concat(Bg)),zg=me([Je("type"),cn("active",!1),Qe("icon")].concat(Bg)),Vg=me([Je("type"),Ue("fancytype",["inserttable","colorswatch"]),sn("onAction",n)]),Ng=me([Je("type"),sn("onSetup",(function(){return n})),sn("onAction",n),Qe("icon")].concat(Bg)),Lg=me([Je("type"),We("getSubmenuItems"),sn("onSetup",(function(){return n})),Qe("icon")].concat(Bg)),Hg=me([Je("type"),Qe("icon"),cn("active",!1),sn("onSetup",(function(){return n})),We("onAction")].concat(Bg)),$g=function(t,e,n){var o=Ds(t.element,"."+n);if(0<o.length){var r=q(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return C.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return C.none()},Jg=function(t,e){return ac([dp(t,e)])},Ug=function(t){return Jg(ii("unnamed-events"),t)},Wg=ii("tooltip.exclusive"),Gg=ii("tooltip.show"),Xg=ii("tooltip.hide"),Yg=function(t,e,n){t.getSystem().broadcastOn([Wg],{})},Kg=Object.freeze({__proto__:null,hideAllExclusive:Yg,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&mp.set(t,o)}))}}),qg=Object.freeze({__proto__:null,events:function(t,e){var n=function(n){e.getTooltip().each((function(o){sl(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()};return er(Z([[rr(Gg,(function(n){e.resetTimer((function(){var o,r,i;o=n,e.isShowing()||(Yg(o),r=t.lazySink(o).getOrDie(),i=o.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:er("normal"===t.mode?[rr(fo(),(function(t){Yo(o,Gg)})),rr(so(),(function(t){Yo(o,Xg)}))]:[]),behaviours:ac([mp.config({})])}),e.setTooltip(i),al(r,i),t.onShow(o,i),el.position(r,t.anchor(o),i))}),t.delay)})),rr(Xg,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),rr(Do(),(function(t,e){e.universal||N(e.channels,Wg)&&n(t)})),mr((function(t){n(t)}))],"normal"===t.mode?[rr(mo(),(function(t){Yo(t,Gg)})),rr(_o(),(function(t){Yo(t,Xg)})),rr(fo(),(function(t){Yo(t,Gg)})),rr(so(),(function(t){Yo(t,Xg)}))]:[rr(Go(),(function(t,e){Yo(t,Gg)})),rr(Xo(),(function(t){Yo(t,Xg)}))]]))}}),Zg=[He("lazySink"),He("tooltipDom"),nn("exclusive",!0),nn("tooltipComponents",[]),nn("delay",300),un("mode","normal",["normal","follow-highlight"]),nn("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:r([Ju,$u,Vu,Lu,Nu,Hu]),onRtl:r([Ju,$u,Vu,Lu,Nu,Hu])}}})),hu("onHide"),hu("onShow")],Qg=cc({fields:Zg,name:"tooltipping",active:qg,state:Object.freeze({__proto__:null,init:function(){var t=dn(C.none()),e=dn(C.none()),n=function(){t.get().each((function(t){clearTimeout(t)}))},o=r("not-implemented");return ki({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(C.some(t))},clearTooltip:function(){e.set(C.none())},clearTimer:n,resetTimer:function(e,o){n(),t.set(C.some(setTimeout((function(){e()}),o)))},readState:o})}}),apis:Kg}),tv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ev=tinymce.util.Tools.resolve("tinymce.util.I18n"),nv=["input","button","textarea","select"],ov=function(t,e,n){(e.disabled()?sv:lv)(t,e)},rv=function(t,e){return!0===e.useNative&&N(nv,hr(t.element))},iv=function(t){Yr(t.element,"disabled","disabled")},av=function(t){Qr(t.element,"disabled")},uv=function(t){Yr(t.element,"aria-disabled","true")},cv=function(t){Yr(t.element,"aria-disabled","false")},sv=function(t,e,n){e.disableClass.each((function(e){ji(t.element,e)})),(rv(t,e)?iv:uv)(t),e.onDisabled(t)},lv=function(t,e,n){e.disableClass.each((function(e){Vi(t.element,e)})),(rv(t,e)?av:cv)(t),e.onEnabled(t)},fv=function(t,e){return rv(t,e)?Zr(t.element,"disabled"):"true"===Kr(t.element,"aria-disabled")},mv=Object.freeze({__proto__:null,enable:lv,disable:sv,isDisabled:fv,onLoad:ov,set:function(t,e,n,o){(o?sv:lv)(t,e)}}),dv=Object.freeze({__proto__:null,exhibit:function(t,e){return Ci({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return er([nr(To(),(function(e,n){return fv(e,t)})),ec(t,e,ov)])}}),pv=[sn("disabled",s),nn("useNative",!0),Ke("disableClass"),hu("onDisabled"),hu("onEnabled")],hv=cc({fields:pv,name:"disabling",active:dv,apis:mv}),gv=tinymce.util.Tools.resolve("tinymce.EditorManager"),vv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},bv=function(t){return t.getParam("width",tv.DOM.getStyle(t.getElement(),"width"))},yv=function(t){return C.from(t.getParam("min_width")).filter(M)},xv=function(t){return C.from(t.getParam("min_height")).filter(M)},wv=function(t){return C.from(t.getParam("max_width")).filter(M)},kv=function(t){return C.from(t.getParam("max_height")).filter(M)},Sv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},Cv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=D(e),r=I(e)&&0<e.length;return!Ov(t)&&(r||o||n)},_v=function(t){var e=H(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=G(e,(function(t){return"string"==typeof t}));return 0<n.length?C.some(n):C.none()},Ov=function(t){return _v(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),l)};(ag=ig=ig||{})["default"]="wrap",ag.floating="floating",ag.sliding="sliding",ag.scrolling="scrolling";var Dv,Tv,Iv=function(t){return t.getParam("toolbar_mode","","string")};(Tv=Dv=Dv||{}).auto="auto",Tv.top="top",Tv.bottom="bottom";var Ev,Av,Rv,Fv=function(t){return t.getParam("toolbar_location",Dv.auto,"string")},Mv=function(t){return Fv(t)===Dv.bottom},Pv=function(t){var e=t.getParam("fixed_toolbar_container","","string");return 0<e.length&&t.inline?Ka(Ui(),e):C.none()},Bv=function(t){return t.inline&&Pv(t).isSome()},jv=function(t){return Pv(t).getOrThunk((function(){return Mr(Fr(hn.fromDom(t.getElement())))}))},zv=function(t){return t.inline&&!Sv(t)&&!Cv(t)&&!Ov(t)},Vv=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Bv(t)&&!zv(t)},Nv="silver.readonly",Lv=me([$e("readonly",je)]),Hv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([Cl()],{target:n}),t.uiMothership.broadcastOn([Cl()],{target:n})),t.mothership.broadcastOn([Nv],{readonly:e}),t.uiMothership.broadcastOn([Nv],{readonly:e})},$v=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&Hv(e,!0)})),t.on("SwitchMode",(function(){return Hv(e,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")},Jv=function(){var t;return mc.config({channels:((t={})[Nv]={schema:Lv,onReceive:function(t,e){hv.set(t,e.readonly)}},t)})},Uv=function(t){return hv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Wv=function(t){return hv.config({disabled:t})},Gv=function(t){return hv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Xv=function(t){return hv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Yv=function(t,e){var n=t.getApi(e);return function(t){t(n)}},Kv=function(t,e){return fr((function(n){Yv(t,n)((function(n){var o=t.onSetup(n);F(o)&&e.set(o)}))}))},qv=function(t,e){return mr((function(n){return Yv(t,n)(e.get())}))},Zv=((Ev={})[To()]=["disabling","alloy.base.behaviour","toggling","item-events"],Ev),Qv=function(t){return Q(t,(function(t){return t.toArray()}))},tb=function(t,e,o,r){var i,a,u=dn(n);return{type:"item",dom:e.dom,components:Qv(e.optComponents),data:t.data,eventOrder:Zv,hasSubmenu:t.triggersSubmenu,itemBehaviours:ac([dp("item-events",[(i=t,a=o,pr((function(t,e){Yv(i,t)(i.onAction),i.triggersSubmenu||a!==ug.CLOSE_ON_EXECUTE||(t.getSystem().isConnected()&&Yo(t,Ro()),e.stop())}))),Kv(t,u),qv(t,u)]),Uv((function(){return t.disabled||r.isDisabled()})),Jv(),mp.config({})].concat(t.itemBehaviours))}},eb=function(t){return{value:t.value,meta:m({text:t.text.getOr("")},t.meta)}},nb=tinymce.util.Tools.resolve("tinymce.Env"),ob=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},rb=function(t){return{dom:{tag:"div",classes:[dg]},components:[ma(ev.translate(t))]}},ib=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},ab=function(t,e){return{dom:{tag:"div",classes:[dg]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ma(ev.translate(e))]}]}},ub=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=nb.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=J(o,(function(t){var e=t.toLowerCase().trim();return Bt(n,e)?n[e]:t})),nb.mac?r.join(""):r.join("+"))}};var e,n,o,r},cb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:vh("checkmark",t)}}},sb=function(t,e){var n=e.map((function(t){return{attributes:{title:ev.translate(t)}}})).getOr({});return m({tag:"div",classes:[cg,sg].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},lb=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],fb=["list-bull-circle","list-bull-default","list-bull-square"],mb=function(t,e,n,o){void 0===o&&(o=C.none());var r,i,u,c,s,l,f,d,h,g,v,b,y=ev.isRtl()&&t.iconContent.exists((function(t){return N(fb,t)})),x=t.iconContent.map((function(t){return ev.isRtl()&&N(lb,t)?t+"-rtl":t})).map((function(t){return n=t,r=e.icons,i=o,C.from(r()[n.toLowerCase()]).or(i).getOrThunk((function(){return gh(r)}));var n,r,i})),w=C.from(t.meta).fold((function(){return rb}),(function(t){return Bt(t,"style")?a(ab,t.style):rb}));return"color"===t.presets?(d=t.ariaLabel,h=t.value,g=e,{dom:(v=x.getOr(""),b={tag:"div",attributes:d.map((function(t){return{title:g.translate(t)}})).getOr({}),classes:["tox-swatch"]},m(m({},b),"custom"===h?{tag:"button",classes:p(b.classes,["tox-swatches__picker-btn"]),innerHtml:v}:"remove"===h?{classes:p(b.classes,["tox-swatch--remove"]),innerHtml:v}:{attributes:m(m({},b.attributes),{"data-mce-color":h}),styles:{"background-color":h}})),optComponents:[]}):(r=t,i=x,u=w,c=y,s=n?i.or(C.some("")).map(ob):C.none(),l=r.checkMark,f=r.htmlContent.fold((function(){return r.textContent.map(u)}),(function(t){return C.some(ib(t,[dg]))})),{dom:sb(c,r.ariaLabel),optComponents:[s,f,r.shortcutContent.map(ub),l,r.caret]})},db=function(t,e){return Pt(t,"tooltipWorker").map((function(t){return[Qg.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Mc}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Qg.setComponents(e,[da({element:hn.fromDom(t)})])}))}})]})).getOr([])},pb=function(t,e){var n,o=ev.translate(t),r=(n=o,tv.DOM.encode(n));if(0<e.length){var i=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return r.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return r},hb=function t(e,n){return J(e,(function(e){switch(e.type){case"cardcontainer":return c=t((u=e).items,n),s="vertical"===u.direction?"tox-collection__item-container--column":vg,l="left"===u.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[gg,s,l,function(){switch(u.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:c};case"cardimage":return r=e.src,i=e.classes,a=e.alt,{dom:{tag:"img",classes:i,attributes:{src:r,alt:a.getOr("")}}};case"cardtext":var o=e.name.exists((function(t){return N(n.cardText.highlightOn,t)}))?C.from(n.cardText.matchText).getOr(""):"";return ib(pb(e.text,o),e.classes)}var r,i,a,u,c,s,l}))},gb=Df(Lp(),Hp()),vb=function(t){return{value:t}},bb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xb=function(t){return bb.test(t)||yb.test(t)},wb=function(t){var e={value:t.value.replace(bb,(function(t,e,n,o){return e+e+n+n+o+o}))},n=yb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},kb=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},Sb=function(t){var e=kb(t.red)+kb(t.green)+kb(t.blue);return vb(e)},Cb=Math.min,_b=Math.max,Ob=Math.round,Db=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Tb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Ib=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},Eb=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},Ab=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;i=_b(0,Cb(i,1)),a=_b(0,Cb(a,1));if(0===i)return e=n=o=Ob(255*a),Ib(e,n,o,1);var u=r/60,c=a*i,s=c*(1-Math.abs(u%2-1)),l=a-c;switch(Math.floor(u)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return e=Ob(255*(e+l)),n=Ob(255*(n+l)),o=Ob(255*(o+l)),Ib(e,n,o,1)},Rb=function(t){var e=wb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Ib(n,o,r,1)},Fb=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return Ib(r,i,a,u)},Mb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Pb=Ib(255,0,0,1),Bb=function(t,e){return t.fire("ResizeContent",e)},jb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),zb="tinymce-custom-colors",Vb="choiceitem",Nb=[{type:Vb,text:"Light Green",value:"#BFEDD2"},{type:Vb,text:"Light Yellow",value:"#FBEEB8"},{type:Vb,text:"Light Red",value:"#F8CAC6"},{type:Vb,text:"Light Purple",value:"#ECCAFA"},{type:Vb,text:"Light Blue",value:"#C2E0F4"},{type:Vb,text:"Green",value:"#2DC26B"},{type:Vb,text:"Yellow",value:"#F1C40F"},{type:Vb,text:"Red",value:"#E03E2D"},{type:Vb,text:"Purple",value:"#B96AD9"},{type:Vb,text:"Blue",value:"#3598DB"},{type:Vb,text:"Dark Turquoise",value:"#169179"},{type:Vb,text:"Orange",value:"#E67E23"},{type:Vb,text:"Dark Red",value:"#BA372A"},{type:Vb,text:"Dark Purple",value:"#843FA1"},{type:Vb,text:"Dark Blue",value:"#236FA1"},{type:Vb,text:"Light Gray",value:"#ECF0F1"},{type:Vb,text:"Medium Gray",value:"#CED4D9"},{type:Vb,text:"Gray",value:"#95A5A6"},{type:Vb,text:"Dark Gray",value:"#7E8C8D"},{type:Vb,text:"Navy Blue",value:"#34495E"},{type:Vb,text:"Black",value:"#000000"},{type:Vb,text:"White",value:"#ffffff"}],Lb=function(t){void 0===t&&(t=10);var e,n=jb.getItem(zb),o=D(n)?JSON.parse(n):[],r=t-(e=o).length<0?e.slice(0,t):e,i=function(t){r.splice(t,1)};return{add:function(e){var n;(-1===(n=V(r,e))?C.none():C.some(n)).each(i),r.unshift(e),r.length>t&&r.pop(),jb.setItem(zb,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),Hb=function(t){return!1!==t.getParam("custom_colors")},$b=function(t){var e=t.getParam("color_map");return void 0!==e?function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var o=n.getContext("2d"),r=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=0;i<t.length;i+=2)e.push({text:t[i+1],value:function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();o.clearRect(0,0,n.width,n.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var e=o.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],c=e[3];return"#"+r(i,c)+r(a,c)+r(u,c)}(t[i]),type:"choiceitem"});return e}(e):Nb},Jb=function(t){Lb.add(t)},Ub=function(t){t.addCommand("mceApplyTextcolor",(function(e,n){var o,r,i;r=e,i=n,(o=t).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),t.addCommand("mceRemoveTextcolor",(function(e){var n,o;o=e,(n=t).undoManager.transact((function(){n.focus(),n.formatter.remove(o,{value:null},null,!0),n.nodeChanged()}))}))},Wb=function(t){var e,n,o=$b(t),r=(e=o.length,Math.max(5,Math.ceil(Math.sqrt(e))));return n=r,t.getParam("color_cols",n,"number")},Gb=function(t,e,n,o){"custom"===n?Qb(t)((function(n){n.each((function(n){Jb(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),"#000000"):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))},Xb=function(t,e){return t.concat(J(Lb.state(),(function(t){return{type:Vb,text:t,value:t}})).concat((o={type:n="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},e?[o,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var n,o},Yb=function(t,e){return function(n){n(Xb(t,e))}},Kb=function(t,e,n){var o,r;o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=n,t.setIconFill(o,r),t.setIconStroke(o,r)},qb=function(t,e,o,r,i){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var n,r,i;return C.from((r=o,(n=t).dom.getParents(n.selection.getStart(),(function(t){var e;(e=t.style["forecolor"===r?"color":"background-color"])&&(i=i||e)})),i)).bind((function(t){return function(t){if("transparent"===t)return C.some(Ib(0,0,0,0));var e=Db.exec(t);if(null!==e)return C.some(Fb(e[1],e[2],e[3],"1"));var n=Tb.exec(t);return null!==n?C.some(Fb(n[1],n[2],n[3],n[4])):C.none()}(t).map((function(t){var n=Sb(t).value;return Sn(e.toLowerCase(),n)}))})).getOr(!1)},columns:Wb(t),fetch:Yb($b(t),Hb(t)),onAction:function(e){null!==i.get()&&Gb(t,o,i.get(),n)},onItemAction:function(n,r){Gb(t,o,r,(function(n){var o;i.set(n),o={name:e,color:n},t.fire("TextColorChange",o)}))},onSetup:function(n){null!==i.get()&&Kb(n,e,i.get());var o=function(t){t.name===e&&Kb(n,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},Zb=function(t,e,o,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){Gb(t,o,e.value,n)}}]}})},Qb=function(t){return function(e,o){var r,i={colorpicker:o},a=(r=e,function(t){var e=t.getData();r(C.from(e.colorpicker)),t.close()});t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:a,onClose:n,onCancel:function(){e(C.none())}})}},ty=function(t,e,n,o,r,i,a,u){var c=Og(e),s=ey(e,n,o,"color"!==r?"normal":"color",i,a,u);return Ig(t,c,s,o,r)},ey=function(t,e,o,r,i,a,u){return Kf(J(t,(function(c){return"choiceitem"===c.type?De("choicemenuitem",zg,c).fold(Dg,(function(s){return C.some(function(t,e,o,r,i,a,u,c){void 0===c&&(c=!0);var s=mb({presets:o,textContent:e?t.text:C.none(),htmlContent:C.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:C.none(),checkMark:e?C.some(cb(u.icons)):C.none(),caret:C.none(),value:t.value},u,c);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(i),n},triggersSubmenu:!1,itemBehaviours:[]},s,a,u),{toggling:{toggleClass:mg,toggleOnExecute:!1,selected:t.active}})}(s,1===o,r,e,a(c.value),i,u,Og(t)))})):C.none()})))},ny=function(t,e){var n=xg(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},oy=ii("cell-over"),ry=ii("cell-execute"),iy=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(function(t,e,n){var o,r=function(n){return Ko(n,ry,{row:t,col:e})},i=function(t,e){e.stop(),r(t)};return ha({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=n,o)},behaviours:ac([dp("insert-table-picker-cell",[rr(fo(),bp.focus),rr(To(),r),rr(yo(),i),rr(Eo(),i)]),Ep.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bp.config({onFocus:function(n){return Ko(n,oy,{row:t,col:e})}})])})}(r,a,t));o.push(i)}return o},ay={inserttable:function(t){var e=ii("size-label"),n=iy(e,10,10),o=hh({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[ma("0x0")],behaviours:ac([mp.config({})])});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Q(n,(function(t){return J(t,ga)})).concat(o.asSpec()),behaviours:ac([dp("insert-table-picker",[cr(oy,(function(t,e,r){var i=r.event.row,a=r.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Ep.set(t[i][a],i<=e&&a<=n)}(n,i,a,10,10),mp.set(o.get(t),[ma(a+1+"x"+(i+1))])})),cr(ry,(function(e,n,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),Yo(e,Ro())}))]),up.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n=Xb(e.colorinput.getColors(),e.colorinput.hasCustomColors()),o=e.colorinput.getColorCols(),r=ty(ii("menu-value"),n,(function(e){t.onAction({value:e})}),o,"color",ug.CLOSE_ON_EXECUTE,s,e.shared.providers),i=m(m({},r),{markers:xg("color"),movement:ny(o,"color")});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gb.widget(Xp.sketch(i))]}}},uy=function(t,e,o,i,a,u,c,s){void 0===s&&(s=!0);var l=mb({presets:i,textContent:C.none(),htmlContent:o?t.text.map((function(t){return pb(t,e)})):C.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:C.none(),checkMark:C.none(),caret:C.none(),value:t.value},c.providers,s,t.icon);return tb({data:eb(t),disabled:t.disabled,getApi:r({}),onAction:function(e){return a(t.value,t.meta)},onSetup:r(n),triggersSubmenu:!1,itemBehaviours:db(t.meta,c)},l,u,c.providers)},cy=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:m({tag:"div",classes:[sg,"tox-collection__group-heading"]},e),components:[]}},sy=function(t,e,n,o){void 0===o&&(o=!0);var r=mb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:C.none(),ariaLabel:t.text,caret:C.none(),checkMark:C.none(),shortcutContent:t.shortcut},n,o);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},ly=function(t,e,o,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var a,u,c=i?(u=o.icons,{dom:{tag:"div",classes:[pg],innerHtml:vh("chevron-down",u)}}):(a=o.icons,{dom:{tag:"div",classes:[pg],innerHtml:vh("chevron-right",a)}}),s=mb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:C.none(),ariaLabel:t.text,caret:C.some(c),checkMark:C.none(),shortcutContent:t.shortcut},o,r);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},disabled:t.disabled,onAction:n,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,e,o)},fy=function(t,e,n,o){void 0===o&&(o=!0);var r=mb({iconContent:t.icon,textContent:t.text,htmlContent:C.none(),ariaLabel:t.text,checkMark:C.some(cb(n.icons)),caret:C.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:mg,toggleOnExecute:!1,selected:t.active}})},my=function(t,e){return n=ay,o=t.fancytype,(Object.prototype.hasOwnProperty.call(n,o)?C.some(n[o]):C.none()).map((function(n){return n(t,e)}));var n,o},dy=function(t,e,n,o){var r={dom:sb(!1,t.label),optComponents:[C.some({dom:{tag:"div",classes:[gg,vg]},components:hb(t.items,o)})]};return tb({data:eb(m({text:C.none()},t)),disabled:t.disabled,getApi:function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){hv.set(t,e),U(Ds(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(hv)&&hv.set(t,e)}))}))}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:C.from(o.itemBehaviours).getOr([])},r,e,n.providers)};(Rv=Av=Av||{})[Rv.ContentFocus=0]="ContentFocus",Rv[Rv.UiFocus=1]="UiFocus";var py,hy,gy,vy,by=function(t,e,n,o,r){var i=n.shared.providers,a=function(t){return r?m(m({},t),{shortcut:C.none(),icon:t.text.isSome()?C.none():t.icon}):t};switch(t.type){case"menuitem":return De("menuitem",Ng,t).fold(Dg,(function(t){return C.some(sy(a(t),e,i,o))}));case"nestedmenuitem":return De("nestedmenuitem",Lg,t).fold(Dg,(function(t){return C.some(ly(a(t),e,i,o,r))}));case"togglemenuitem":return De("togglemenuitem",Hg,t).fold(Dg,(function(t){return C.some(fy(a(t),e,i,o))}));case"separator":return De("separatormenuitem",Lh,t).fold(Dg,(function(t){return C.some(cy(t))}));case"fancymenuitem":return De("fancymenuitem",Vg,t).fold(Dg,(function(t){return my(a(t),n)}));default:return console.error("Unknown item in general menu",t),C.none()}},yy=function(t,e,n,o,r,i,a){var u=1===o,c=!u||Og(t);return Kf(J(t,(function(t){switch(t.type){case"separator":return De("Autocompleter.Separator",Lh,t).fold(Dg,(function(t){return C.some(cy(t))}));case"cardmenuitem":return De("cardmenuitem",jg,t).fold(Dg,(function(t){return C.some(dy(m(m({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),r,i,{itemBehaviours:db(t.meta,i),cardText:{matchText:e,highlightOn:a}}))}));case"autocompleteitem":default:return De("Autocompleter.Item",Hh,t).fold(Dg,(function(t){return C.some(uy(t,e,u,"normal",n,r,i,c))}))}})))},xy=function(t,e,n,o,r){var i=Og(e),a=Kf(J(e,(function(t){var e=function(t){return by(t,n,o,(e=t,r?!e.hasOwnProperty("text"):i),r);var e};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(m(m({},t),{disabled:!0})):e(t)})));return(r?Tg:Ig)(t,i,a,1,"normal")},wy=function(t){return th.singleData(t.value,t)},ky=function(t,e){var n=dn(C.none()),o=dn(!1),r=ha(eh.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ac([dp("dismissAutocompleter",[rr(Lo(),(function(){return u()}))])]),lazySink:e.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&eh.hide(r)},u=function(){var e;i()&&(e=n.get().map((function(t){return t.element})),Dh(e.getOr(hn.fromDom(t.selection.getNode()))).each(Ur),a(),n.set(C.none()),o.set(!1))},c=$t((function(){return rg(t)})),s=function(e,n,o,i){e.matchLength=n.text.length;var a,u,c,s,l,f,m,d=ct(o,(function(t){return C.from(t.columns)})).getOr(1);eh.showAt(r,{anchor:"node",root:hn.fromDom(t.getBody()),node:C.from(e.element)},Xp.sketch((a=Ig("autocompleter-value",!0,i,d,"normal"),u=d,c=Av.ContentFocus,s="normal",l=(c===Av.ContentFocus?Mm:Fm)(),f=ny(u,s),m=xg(s),{dom:a.dom,components:a.components,items:a.items,value:a.value,markers:{selectedItem:m.selectedItem,item:m.item},movement:f,fakeFocus:c===Av.ContentFocus,focusManager:l,menuBehaviours:Ug("auto"!==u?[]:[fr((function(t,e){$g(t,4,m.item).each((function(e){var n=e.numColumns,o=e.numRows;up.setGridSize(t,o,n)}))}))])}))),eh.getContent(r).each(mm.highlightFirst)},l=function r(l){var f;f=l,n.get().map((function(e){return Rh(t.dom,t.selection.getRng(),e.triggerChar).bind((function(e){return Nh(t,c,e,f)}))})).getOrThunk((function(){return Vh(t,c)})).fold(u,(function(c){var l,f;l=c.context,i()||(f=Oh(t,l.range),n.set(C.some({triggerChar:l.triggerChar,element:f,matchLength:l.text.length})),o.set(!1)),c.lookupData.then((function(i){n.get().map((function(n){var l,f,m,d,p=c.context;n.triggerChar===p.triggerChar&&(f=p.triggerChar,d=ct(m=i,(function(t){return C.from(t.columns)})).getOr(1),0<(l=Q(m,(function(n){var i=n.items;return yy(i,n.matchText,(function(e,i){var c=t.selection.getRng();Rh(t.dom,c,f).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var c=t.range,s={hide:function(){u()},reload:function(t){a(),r(t)}};o.set(!0),n.onAction(s,c,e,i),o.set(!1)}))}),d,ug.BUBBLE_TO_SANDBOX,e,n.highlightOn)}))).length?s(n,p,i,l):(10<=p.text.length-n.matchLength?u:a)())}))}))}))},f={onKeypress:Sh((function(t){27!==t.which&&l()}),50),cancelIfNecessary:u,isMenuOpen:function(){return eh.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return eh.getContent(r)}};!1===t.hasPlugin("rtc")&&Fh(f,t)},Sy=l,Cy=function(t,e,n){return Ea(t,e,Sy,n,!1)},_y=function(t,e,n){return Ea(t,e,Sy,n,!0)},Oy=Ia,Dy=function(t,e,n){return qa(t,e,n).isSome()},Ty=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Iy=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?C.none():C.some(e.touches[0])},Ey=function(t){var e=dn(C.none()),n=dn(!1),o=Ty((function(e){t.triggerEvent(Ao(),e),n.set(!0)}),400),r=Qt([{key:oo(),value:function(t){return Iy(t).each((function(r){o.cancel();var i={x:r.clientX,y:r.clientY,target:t.target};o.schedule(t),n.set(!1),e.set(C.some(i))})),C.none()}},{key:ro(),value:function(t){return o.cancel(),Iy(t).each((function(t){e.get().each((function(n){var o,r,i,a;o=t,r=n,i=Math.abs(o.clientX-r.x),a=Math.abs(o.clientY-r.y),(5<i||5<a)&&e.set(C.none())}))})),C.none()}},{key:io(),value:function(r){return o.cancel(),e.get().filter((function(t){return Gn(t.target,r.target)})).map((function(e){return n.get()?(r.prevent(),!1):t.triggerEvent(Eo(),r)}))}}]);return{fireIfReady:function(t,e){return Pt(r,e).bind((function(e){return e(t)}))}}},Ay=function(){return Jn().browser.isFirefox()},Ry=fe([We("triggerEvent"),nn("stopBackspace",!0)]),Fy=function(t,e){var n,o,r,i,a=Ie("Getting GUI events settings",Ry,e),u=Ey(a),c=J(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return Cy(t,e,(function(t){u.fireIfReady(t,e).each((function(e){e&&t.kill()})),a.triggerEvent(e,t)&&t.kill()}))})),s=dn(C.none()),l=Cy(t,"paste",(function(t){u.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),a.triggerEvent("paste",t)&&t.kill(),s.set(C.some(setTimeout((function(){a.triggerEvent(Oo(),t)}),0)))})),f=Cy(t,"keydown",(function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||(e=t).raw.which!==dm[0]||N(["input","textarea"],hr(e.target))||Dy(e.target,'[contenteditable="true"]')||t.prevent()})),m=(n=t,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},Ay()?_y(n,"focus",o):Cy(n,"focusin",o)),d=dn(C.none()),p=(r=t,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),d.set(C.some(setTimeout((function(){a.triggerEvent(_o(),t)}),0)))},Ay()?_y(r,"blur",i):Cy(r,"focusout",i));return{unbind:function(){U(c,(function(t){t.unbind()})),f.unbind(),m.unbind(),p.unbind(),l.unbind(),s.get().each(clearTimeout),d.get().each(clearTimeout)}}},My=function(t,e){var n=Pt(t,"target").getOr(e);return dn(n)},Py=zt([{stopped:[]},{resume:["element"]},{complete:[]}]),By=function(t,e,n,o,r,i){var a,u,c,s,l=t(e,o),f=(a=n,u=r,c=dn(!1),s=dn(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:a,setSource:u.set,getSource:u.get});return l.fold((function(){return i.logEventNoHandlers(e,o),Py.complete()}),(function(t){var n=t.descHandler;return _i(n)(f),f.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Py.stopped()):f.isCut()?(i.logEventCut(e,t.element,n.purpose),Py.complete()):_r(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),Py.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),Py.resume(o)}))}))},jy=function t(e,n,o,r,i,a){return By(e,n,o,r,i,a).fold(l,(function(r){return t(e,n,o,r,i,a)}),s)},zy=function(t,e,o){var r,i,a=(r=e,i=dn(!1),{stop:function(){i.set(!0)},cut:n,isStopped:i.get,isCut:s,event:r,setSource:c("Cannot set source of a broadcasted event"),getSource:c("Cannot get source of a broadcasted event")});return U(t,(function(t){var e=t.descHandler;_i(e)(a)})),a.isStopped()},Vy=function(t,e,n,o,r){var i=My(n,o);return jy(t,e,n,o,i,r)},Ny=function(){var t={};return{registerId:function(e,n,o){Tt(o,(function(o,r){var i,u,c=void 0!==t[r]?t[r]:{};c[n]=(i=o,u=e,{cHandler:a.apply(void 0,[i.handler].concat(u)),purpose:i.purpose}),t[r]=c}))},unregisterId:function(e){Tt(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return Pt(t,e).map((function(t){return Rt(t,(function(t,e){return{id:e,descHandler:t}}))})).getOr([])},find:function(e,n,o){var r=Pt(t,n);return Zn(o,(function(t){return e=r,fi(n=t).fold((function(){return C.none()}),(function(t){return e.bind((function(e){return Pt(e,t)})).map((function(t){return{element:n,descHandler:t}}))}));var e,n}),e)}}},Ly=function(){var t=Ny(),e={},n=function(t){var e=t.element;return fi(e).fold((function(){return e="uid-",n=t.element,o=ii(ci+e),li(n,o),o;var e,n,o}),(function(t){return t}))},o=function(n){fi(n.element).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,o){return t.find(e,n,o)},filter:function(e){return t.filterByType(e)},register:function(r){var i=n(r);jt(e,i)&&function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+ei(r.element)+"\nCannot use it for: "+ei(t.element)+"\nThe conflicting element is"+(Ji(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var a=[r];t.registerId(a,i,r.events),e[i]=r},unregister:o,getById:function(t){return Pt(e,t)}}},Hy=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=d(e,["attributes"]);return{uid:t.uid,dom:m({tag:"div",attributes:m({role:"presentation"},n)},o),components:t.components,behaviours:Ul(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[nn("components",[]),Jl("containerBehaviours",[]),nn("events",{}),nn("domModification",{}),nn("eventOrder",{})]}),$y=function(t){var e=function(e){return _r(t.element).fold(l,(function(t){return Gn(e,t)}))},o=Ly(),i=function(t,n){return o.find(e,t,n)},a=Fy(t.element,{triggerEvent:function(t,e){return au(t,e.target,(function(n){return r=n,Vy(i,t,o=e,o.target,r);var o,r}))}}),u={debugInfo:r("real"),triggerEvent:function(t,e,n){au(t,e,(function(o){return Vy(i,t,n,e,o)}))},triggerFocus:function(t,e){fi(t).fold((function(){pc(t)}),(function(o){au(Co(),t,(function(o){var r,a,u,c,s,l;return r=i,a=Co(),s=o,l=My(u={originator:e,kill:n,prevent:n,target:t},c=t),By(r,a,u,c,l,s),!1}))}))},triggerEscape:function(t,e){u.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return v(t)},getByDom:function(t){return b(t)},build:ha,addToGui:function(t){f(t)},removeFromGui:function(t){m(t)},addToWorld:function(t){c(t)},removeFromWorld:function(t){s(t)},broadcast:function(t){p(t)},broadcastOn:function(t,e){h(t,e)},broadcastEvent:function(t,e){g(t,e)},isConnected:l},c=function t(e){e.connect(u),br(e.element)||(o.register(e),U(e.components(),t),u.triggerEvent(Mo(),e.element,{target:e.element}))},s=function t(e){br(e.element)||(U(e.components(),t),o.unregister(e)),e.disconnect()},f=function(e){al(t,e)},m=function(t){sl(t)},d=function(t){var e=o.filter(Do());U(e,(function(e){var n=e.descHandler;_i(n)(t)}))},p=function(t){d({universal:!0,data:t})},h=function(t,e){d({universal:!1,channels:t,data:e})},g=function(t,e){var n=o.filter(t);return zy(n,e)},v=function(t){return o.getById(t).fold((function(){return ft.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),ft.value)},b=function(t){var e=fi(t).getOr("not found");return v(e)};return c(t),{root:t,element:t.element,destroy:function(){a.unbind(),Jr(t.element)},add:f,remove:m,getByUid:v,getByDom:b,addToWorld:c,removeFromWorld:s,broadcast:p,broadcastOn:h,broadcastEvent:g}},Jy=r([nn("prefix","form-field"),Jl("fieldBehaviours",[em,$l])]),Uy=r([kf({schema:[He("dom")],name:"label"}),kf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[He("text")],name:"aria-descriptor"}),xf({factory:{sketch:function(t){var e=qt(t,["factory"]);return t.factory.sketch(e)}},schema:[He("factory")],name:"field"})]),Wy=Yf({name:"FormField",configFields:Jy(),partFields:Uy(),factory:function(t,e,n,o){var r=Wl(t.fieldBehaviours,[em.config({find:function(e){return Mf(e,t,"field")}}),$l.config({store:{mode:"manual",getValue:function(t){return em.getCurrent(t).bind($l.getValue)},setValue:function(t,e){em.getCurrent(t).each((function(t){$l.setValue(t,e)}))}}})]),i=er([fr((function(e,n){var o=Bf(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=ii(t.prefix);o.label().each((function(t){Yr(t.element,"for",n),Yr(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=ii(t.prefix);Yr(n.element,"id",o),Yr(e.element,"aria-describedby",o)}))}))}))]),a={getField:function(e){return Mf(e,t,"field")},getLabel:function(e){return Mf(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Gy=Object.freeze({__proto__:null,exhibit:function(t,e){return Ci({attributes:Qt([{key:e.tabAttr,value:"true"}])})}}),Xy=[nn("tabAttr","data-alloy-tabstop")],Yy=cc({fields:Xy,name:"tabstopping",active:Gy}),Ky=tinymce.util.Tools.resolve("tinymce.html.Entities"),qy=function(t,e,n,o){var r=Zy(t,e,n,o);return Wy.sketch(r)},Zy=function(t,e,n,o){return{dom:Qy(n),components:t.toArray().concat([e]),fieldBehaviours:ac(o)}},Qy=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},tx=function(t,e){return Wy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},ex=ii("form-component-change"),nx=ii("form-close"),ox=ii("form-cancel"),rx=ii("form-action"),ix=ii("form-submit"),ax=ii("form-block"),ux=ii("form-unblock"),cx=ii("form-tabchange"),sx=ii("form-resize"),lx=function(t,e){var n,o,r,a=t.label.map((function(t){return tx(t,e)})),u=function(t){return function(e,n){qa(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,Kr(o,"data-collection-item-value"))}))}},c=u((function(n,o,r,i){o.stop(),e.isDisabled()||Ko(n,rx,{name:t.name,value:i})})),s=[rr(fo(),u((function(t,e,n){pc(n)}))),rr(yo(),c),rr(Eo(),c),rr(mo(),u((function(t,e,n){Ka(t.element,"."+hg).each((function(t){Vi(t,hg)})),ji(n,hg)}))),rr(po(),u((function(t){Ka(t.element,"."+hg).each((function(t){Vi(t,hg)}))}))),pr(u((function(e,n,o,r){Ko(e,rx,{name:t.name,value:r})})))],l=function(t,e){return J(Ds(t.element,".tox-collection__item"),e)},f=Wy.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:i},behaviours:ac([hv.config({disabled:e.isDisabled,onDisabled:function(t){l(t,(function(t){ji(t,"tox-collection__item--state-disabled"),Yr(t,"aria-disabled",!0)}))},onEnabled:function(t){l(t,(function(t){Vi(t,"tox-collection__item--state-disabled"),Qr(t,"aria-disabled")}))}}),Jv(),mp.config({}),$l.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,o){var r,i,a,u;r=n,i=J(o,(function(n){var o=ev.translate(n.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=o.replace(/\_| \- |\-/g,(function(t){return a[t]}));return'<div class="tox-collection__item'+(e.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Ky.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+r+"</div>"})),a="auto"!==t.columns&&1<t.columns?$(i,t.columns):[i],u=J(a,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"})),Gr(r.element,u.join("")),"auto"===t.columns&&$g(n,5,"tox-collection__item").each((function(t){var e=t.numRows,o=t.numColumns;up.setGridSize(n,e,o)})),Yo(n,sx)}}),Yy.config({}),up.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?"."+lg:"."+sg}})),dp("collection-events",s)]),eventOrder:((n={})[To()]=["disabling","alloy.base.behaviour","collection-events"],n)});return qy(a,f,["tox-form__group--collection"],[])},fx=r([Ke("data"),nn("inputAttributes",{}),nn("inputStyles",{}),nn("tag","input"),nn("inputClasses",[]),hu("onSetValue"),nn("styles",{}),nn("eventOrder",{}),Jl("inputBehaviours",[$l,bp]),nn("selectOnFocus",!0)]),mx=function(t){return ac([bp.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=ra(e);e.dom.setSelectionRange(0,n.length)}:n})])},dx=function(t){return{tag:t.tag,attributes:m({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},px=Xf({name:"Input",configFields:fx(),factory:function(t,e){return{uid:t.uid,dom:dx(t),components:[],behaviours:m(m({},mx(n=t)),Wl(n.inputBehaviours,[$l.config({store:m(m({mode:"manual"},n.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return ra(t.element)},setValue:function(t,e){ra(t.element)!==e&&ia(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),hx={},gx={exports:hx};py=void 0,hy=hx,gy=gx,vy=void 0,function(n){"object"==e(hy)&&void 0!==gy?gy.exports=n():"function"==typeof py&&py.amd?py([],n):("undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}((function(){return function t(e,n,o){function r(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof vy&&vy;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof vy&&vy,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){var o,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,l=[],f=!1,m=-1;function d(){f&&s&&(f=!1,s.length?l=s.concat(l):m=-1,l.length&&p())}function p(){if(!f){var t=c(d);f=!0;for(var e=l.length;e;){for(s=l,l=[];++m<e;)s&&s[m].run();m=-1,e=l.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||f||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,o){(function(t){function o(){}function r(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(m){return void u(e.promise,m)}a(e.promise,n)}else(1===t._state?a:u)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==e(n)||"function"==typeof n)){var o=n.then;if(n instanceof r)return t._state=3,t._value=n,void c(t);if("function"==typeof o)return void l((i=o,s=n,function(){i.apply(s,arguments)}),t)}t._state=1,t._value=n,c(t)}catch(a){u(t,a)}var i,s}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn((function(){t._handled||r._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,u(e,t))}))}catch(o){if(n)return;n=!0,u(e,o)}}var f,m;f=this,m=setTimeout,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return i(this,new s(t,e,n)),n},r.all=function(t){var n=Array.prototype.slice.call(t);return new r((function(t,r){if(0===n.length)return t([]);for(var i=n.length,a=0;a<n.length;a++)!function a(u,c){try{if(c&&("object"==e(c)||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,(function(t){a(u,t)}),r)}n[u]=c,0==--i&&t(n)}catch(o){r(o)}}(a,n[a])}))},r.resolve=function(t){return t&&"object"==e(t)&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},r._immediateFn="function"==typeof t?function(e){t(e)}:function(t){m(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=r:f.Promise||(f.Promise=r)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var r=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function s(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new s(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new s(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,o=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,r((function(){u[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof o?o:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)}));var vx,bx,yx=gx.exports.boltExport,xx=function t(e){var n=C.none(),o=[],r=function(t){i()?u(t):o.push(t)},i=function(){return n.isSome()},a=function(t){U(t,u)},u=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return e((function(t){i()||(n=C.some(t),a(o),o=[])})),{get:r,map:function(e){return t((function(t){r((function(n){t(e(n))}))}))},isReady:i}},wx={nu:xx,pure:function(t){return xx((function(e){e(t)}))}},kx=function(t){setTimeout((function(){throw t}),0)},Sx=function t(e){var n=function(t){e().then(t,kx)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return wx.nu(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},Cx=function(t){return Sx((function(){return new yx(t)}))},_x=function(t){return Sx((function(){return yx.resolve(t)}))},Ox=["input","textarea"],Dx=function(t){var e=hr(t);return N(Ox,e)},Tx=function(t,e){var n=e.getRoot(t).getOr(t.element);Vi(n,e.invalidClass),e.notify.each((function(e){Dx(t.element)&&Yr(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){Gr(t,e.validHtml)})),e.onValid(t)}))},Ix=function(t,e,n,o){var r=e.getRoot(t).getOr(t.element);ji(r,e.invalidClass),e.notify.each((function(e){Dx(t.element)&&Yr(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){Gr(t,o)})),e.onInvalid(t,o)}))},Ex=function(t,e,n){return e.validator.fold((function(){return _x(ft.value(!0))}),(function(e){return e.validate(t)}))},Ax=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Ex(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return Ix(t,e,0,n),ft.error(n)}),(function(n){return Tx(t,e),ft.value(n)})):ft.error("No longer in system")}))},Rx=Object.freeze({__proto__:null,markValid:Tx,markInvalid:Ix,query:Ex,run:Ax,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return Ni(n,e.invalidClass)}}),Fx=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return er([rr(e.onEvent,(function(e){Ax(e,t).get(i)}))].concat(e.validateOnLoad?[fr((function(e){Ax(e,t).get(n)}))]:[]))})).getOr({})}}),Mx=[He("invalidClass"),nn("getRoot",C.none),en("notify",[nn("aria","alert"),nn("getContainer",C.none),nn("validHtml",""),hu("onValid"),hu("onInvalid"),hu("onValidate")]),en("validator",[He("validate"),nn("onEvent","input"),nn("validateOnLoad",!0)])],Px=cc({fields:Mx,name:"invalidating",active:Fx,apis:Rx,extra:{validation:function(t){return function(e){var n=$l.getValue(e);return _x(t(n))}}}}),Bx=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),jx=[$e("others",Oe(ft.value,Fe()))],zx=cc({fields:jx,name:"coupling",apis:Bx,state:Object.freeze({__proto__:null,init:function(){var t={},e=r({});return ki({readState:e,getOrCreate:function(e,n,o){var r=Ot(n.others);if(r)return Pt(t,o).getOrThunk((function(){var r=Pt(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),Vx=r("sink"),Nx=r(kf({name:Vx(),overrides:r({dom:{tag:"div"},behaviours:ac([el.config({useFixed:l})]),events:er([sr(ho()),sr(uo()),sr(yo())])})}));(bx=vx=vx||{})[bx.HighlightFirst=0]="HighlightFirst",bx[bx.HighlightNone=1]="HighlightNone";var Lx,Hx,$x,Jx,Ux,Wx,Gx=function(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:"hotspot",hotspot:n,overrides:o}}),(function(t){return{anchor:"hotspot",hotspot:n,overrides:o,layouts:t}}))},Xx=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,p,h,g,v,b=Gx(t,n);return(c=b,l=o,f=r,d=a,p=e,h=s=n,g=(0,(u=t).fetch)(h).map(p),v=Zx(s,u),g.map((function(t){return t.bind((function(t){return C.from(th.sketch(m(m({},f.menu()),{uid:mi(""),data:t,highlightImmediately:d===vx.HighlightFirst,onOpenMenu:function(t,e){var n=v().getOrDie();el.position(n,c,e),Sl.decloak(l)},onOpenSubmenu:function(t,e,n){var o=v().getOrDie();el.position(o,{anchor:"submenu",item:e},n),Sl.decloak(l)},onRepositionMenu:function(t,e,n){var o=v().getOrDie();el.position(o,c,e),U(n,(function(t){el.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return bp.focus(s),Sl.close(l),C.some(!0)}})))}))}))).map((function(t){return t.fold((function(){Sl.isOpen(o)&&Sl.close(o)}),(function(t){Sl.cloak(o),Sl.open(o,t),i(o)})),o}))},Yx=function(t,e,n,o,r,i,a){return Sl.close(o),_x(o)},Kx=function(t,e,n,o,r,i){var a=zx.getCoupled(n,"sandbox");return(Sl.isOpen(a)?Yx:Xx)(t,e,n,a,o,r,i)},qx=function(t,e,n){var o,r,i=em.getCurrent(e).getOr(e),a=Da(t.element);n?Yi(i.element,"min-width",a+"px"):(o=i.element,r=a,Oa.set(o,r))},Zx=function(t,e){return t.getSystem().getByUid(e.uid+"-"+Vx()).map((function(t){return function(){return ft.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return ft.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},Qx=function(t){Sl.getState(t).each((function(t){th.repositionMenus(t)}))},tw=function(t,e,n){var o=Za(),r=Zx(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Xl(t.sandboxBehaviours,[$l.config({store:{mode:"memory",initialValue:e}}),Sl.config({onOpen:function(r,i){var a=Gx(t,e);o.link(e.element),t.matchWidth&&qx(a.hotspot,i,t.useMinWidth),t.onOpen(a,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return tu(n,o)||tu(e,o)},getAttachPoint:function(){return r().getOrDie()}}),em.config({find:function(t){return Sl.getState(t).bind((function(t){return em.getCurrent(t)}))}}),mc.config({channels:m(m({},Tl({isExtraPart:s})),El({doReposition:Qx}))})])}},ew=function(t){var e=zx.getCoupled(t,"sandbox");Qx(e)},nw=function(){return[nn("sandboxClasses",[]),Gl("sandboxBehaviours",[em,mc,Sl,$l])]},ow=r([He("dom"),He("fetch"),hu("onOpen"),gu("onExecute"),nn("getHotspot",C.some),nn("getAnchorOverrides",r({})),Kc(),Jl("dropdownBehaviours",[Ep,zx,up,bp]),He("toggleClass"),nn("eventOrder",{}),Ke("lazySink"),nn("matchWidth",!1),nn("useMinWidth",!1),Ke("role")].concat(nw())),rw=r([wf({schema:[mu()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Nx()]),iw=Yf({name:"Dropdown",configFields:ow(),partFields:rw(),factory:function(t,e,o,r){var i,a,u=function(t){Sl.getState(t).each((function(t){th.highlightPrimary(t)}))},c={expand:function(e){Ep.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightNone).get(n)},open:function(e){Ep.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},isOpen:Ep.isOn,close:function(e){Ep.isOn(e)&&Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},repositionMenus:function(t){Ep.isOn(t)&&ew(t)}},s=function(t,e){return qo(t),C.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.dropdownBehaviours,[Ep.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),zx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Ep.on(e)},onClose:function(){return Ep.off(e)}})}}}),up.config({mode:"special",onSpace:s,onEnter:s,onDown:function(t,e){var n;return iw.isOpen(t)?(n=zx.getCoupled(t,"sandbox"),u(n)):iw.open(t),C.some(!0)},onEscape:function(t,e){return iw.isOpen(t)?(iw.close(t),C.some(!0)):C.none()}}),bp.config({})]),events:Rp(C.some((function(e){Kx(t,(function(t){return t}),e,r,u,vx.HighlightFirst).get(n)}))),eventOrder:m(m({},t.eventOrder),((i={})[To()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:c,domModification:{attributes:m(m({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(a="type",Pt(t.dom,"attributes").bind((function(t){return Pt(t,a)})).getOr("button"))}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),aw=cc({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return er([nr(wo(),l)])},exhibit:function(){return Ci({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),uw=ii("color-input-change"),cw=ii("color-swatch-change"),sw=ii("color-picker-cancel"),lw=function(t,e,o){var r,i,a=Wy.parts.field({factory:px,inputClasses:["tox-textfield"],onSetValue:function(t){return Px.run(t).get(n)},inputBehaviours:ac([hv.config({disabled:e.providers.isDisabled}),Jv(),Yy.config({}),Px.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return _r(t.element)},notify:{onValid:function(t){var e=$l.getValue(t);Ko(t,uw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=$l.getValue(t);if(0===e.length)return _x(ft.value(!0));var n=hn.fromTag("span");Yi(n,"background-color",e);var o=ta(n,"background-color").fold((function(){return ft.error("blah")}),(function(t){return ft.value(e)}));return _x(o)}}})]),selectOnFocus:!1}),u=t.label.map((function(t){return tx(t,e.providers)})),c=function(t,e){Ko(t,cw,{value:e})},l=hh((r={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Nu,Vu,Ju]},onLtr:function(){return[Vu,Nu,Ju]}},components:[],fetch:Yb(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){l.getOpt(t).each((function(t){"custom"===e?o.colorPicker((function(e){e.fold((function(){return Yo(t,sw)}),(function(e){c(t,e),Jb(e)}))}),"#ffffff"):c(t,"remove"===e?"":e)}))}},i=e,iw.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:ac([Wv(i.providers.isDisabled),Jv(),aw.config({}),Yy.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:i.getSink,fetch:function(t){return Cx((function(t){return r.fetch(t)})).map((function(e){return C.from(wy(Lt(ty(ii("menu-value"),e,(function(e){r.onItemAction(t,e)}),r.columns,r.presets,ug.CLOSE_ON_EXECUTE,s,i.providers),{movement:ny(r.columns,r.presets)})))}))},parts:{menu:kg(0,0,r.presets)}})));return Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:u.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[a,l.asSpec()]}]),fieldBehaviours:ac([dp("form-field-events",[rr(uw,(function(e,n){l.getOpt(e).each((function(t){Yi(t.element,"background-color",n.event.color)})),Ko(e,ex,{name:t.name})})),rr(cw,(function(t,e){Wy.getField(t).each((function(n){$l.setValue(n,e.event.value),em.getCurrent(t).each(bp.focus)}))})),rr(sw,(function(t,e){Wy.getField(t).each((function(e){em.getCurrent(t).each(bp.focus)}))}))])])})},fw=function(t,e,n){return{hue:t,saturation:e,value:n}},mw=ii("rgb-hex-update"),dw=ii("slider-update"),pw=ii("palette-update"),hw=kf({schema:[He("dom")],name:"label"}),gw=function(t){return kf({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:er([ir(oo(),(function(e,n,o){return t(e,o)}),[e]),ir(uo(),(function(e,n,o){return t(e,o)}),[e]),ir(co(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})},vw=gw("top-left"),bw=gw("top"),yw=gw("top-right"),xw=gw("right"),ww=gw("bottom-right"),kw=gw("bottom"),Sw=gw("bottom-left"),Cw=[hw,gw("left"),xw,bw,kw,vw,yw,Sw,ww,xf({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:er([ur(oo(),t,"spectrum"),ur(ro(),t,"spectrum"),ur(io(),t,"spectrum"),ur(uo(),t,"spectrum"),ur(co(),t,"spectrum"),ur(lo(),t,"spectrum")])}}}),xf({schema:[mn("mouseIsDown",(function(){return dn(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,n=function(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))};return{behaviours:ac([up.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),bp.config({})]),events:er([rr(oo(),n),rr(ro(),n),rr(uo(),n),rr(co(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}})],_w=r("slider.change.value"),Ow=function(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?C.some(e).map((function(t){return ka(t.clientX,t.clientY)})):C.none():void 0!==e.touches&&1===e.touches.length?C.some(e.touches[0]).map((function(t){return ka(t.clientX,t.clientY)})):C.none()},Dw=function(t){return t.model.minX},Tw=function(t){return t.model.minY},Iw=function(t){return t.model.minX-1},Ew=function(t){return t.model.minY-1},Aw=function(t){return t.model.maxX},Rw=function(t){return t.model.maxY},Fw=function(t){return t.model.maxX+1},Mw=function(t){return t.model.maxY+1},Pw=function(t,e,n){return e(t)-n(t)},Bw=function(t){return Pw(t,Aw,Dw)},jw=function(t){return Pw(t,Rw,Tw)},zw=function(t){return Bw(t)/2},Vw=function(t){return jw(t)/2},Nw=function(t){return t.stepSize},Lw=function(t){return t.snapToGrid},Hw=function(t){return t.snapStart},$w=function(t){return t.rounded},Jw=function(t,e){return void 0!==t[e+"-edge"]},Uw=function(t){return Jw(t,"left")},Ww=function(t){return Jw(t,"right")},Gw=function(t){return Jw(t,"top")},Xw=function(t){return Jw(t,"bottom")},Yw=function(t){return t.model.value.get()},Kw=function(t){return{x:t}},qw=function(t){return{y:t}},Zw=function(t,e){return{x:t,y:e}},Qw=function(t,e){Ko(t,_w(),{value:e})},tk=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},ek=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},nk=function(t,e,n){return Math.max(e,Math.min(n,t))},ok=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,m=t.maxBound,d=t.screenRange,p=s?e-1:e,h=l?n+1:n;if(r<f)return p;if(m<r)return h;var g,v,b,y,x,w,k,S=(x=r,w=f,k=m,Math.min(k,Math.max(x,w))-w),C=nk(S/d*o+e,p,h);return a&&e<=C&&C<=n?(g=C,v=e,b=n,y=i,u.fold((function(){var t=g-v,e=Math.round(t/y)*y;return nk(v+e,v-1,b+1)}),(function(t){var e=(g-t)%y,n=Math.round(e/y),o=Math.floor((g-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)}))):c?Math.round(C):C},rk=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},ik="left",ak=function(t){return t.element.dom.getBoundingClientRect()},uk=function(t,e){return t[e]},ck=function(t){var e=ak(t);return uk(e,ik)},sk=function(t){var e=ak(t);return uk(e,"right")},lk=function(t){var e=ak(t);return uk(e,"top")},fk=function(t){var e=ak(t);return uk(e,"bottom")},mk=function(t){var e=ak(t);return uk(e,"width")},dk=function(t){var e=ak(t);return uk(e,"height")},pk=function(t,e,n){return(t+e)/2-n},hk=function(t,e){var n=ak(t),o=ak(e),r=uk(n,ik),i=uk(n,"right"),a=uk(o,ik);return pk(r,i,a)},gk=function(t,e){var n=ak(t),o=ak(e),r=uk(n,"top"),i=uk(n,"bottom"),a=uk(o,"top");return pk(r,i,a)},vk=function(t,e){Ko(t,_w(),{value:e})},bk=function(t){return{x:t}},yk=function(t,e,n){var o={min:Dw(e),max:Aw(e),range:Bw(e),value:n,step:Nw(e),snap:Lw(e),snapStart:Hw(e),rounded:$w(e),hasMinEdge:Uw(e),hasMaxEdge:Ww(e),minBound:ck(t),maxBound:sk(t),screenRange:mk(t)};return ok(o)},xk=function(t){return function(e,n){return o=e,i=(0<t?ek:tk)(Yw(r=n).x,Dw(r),Aw(r),Nw(r)),vk(o,bk(i)),C.some(i).map(l);var o,r,i}},wk=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,h=(u=i,c=n,s=o,l=r,f=mk(a=e),m=s.bind((function(t){return C.some(hk(t,a))})).getOr(0),d=l.bind((function(t){return C.some(hk(t,a))})).getOr(f),p={min:Dw(u),max:Aw(u),range:Bw(u),value:c,hasMinEdge:Uw(u),hasMaxEdge:Ww(u),minBound:ck(a),minOffset:0,maxBound:sk(a),maxOffset:f,centerMinEdge:m,centerMaxEdge:d},rk(p));return ck(e)-ck(t)+h},kk=xk(-1),Sk=xk(1),Ck=C.none,_k=C.none,Ok={"top-left":C.none(),top:C.none(),"top-right":C.none(),right:C.some((function(t,e){Qw(t,Kw(Fw(e)))})),"bottom-right":C.none(),bottom:C.none(),"bottom-left":C.none(),left:C.some((function(t,e){Qw(t,Kw(Iw(e)))}))},Dk=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yk(t,e,n),r=bk(o);return vk(t,r),o},setToMin:function(t,e){var n=Dw(e);vk(t,bk(n))},setToMax:function(t,e){var n=Aw(e);vk(t,bk(n))},findValueOfOffset:yk,getValueFromEvent:function(t){return Ow(t).map((function(t){return t.left}))},findPositionOfValue:wk,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=wk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Da(e.element)/2;Yi(e.element,"left",i-a+"px")},onLeft:kk,onRight:Sk,onUp:Ck,onDown:_k,edgeActions:Ok}),Tk=function(t,e){Ko(t,_w(),{value:e})},Ik=function(t){return{y:t}},Ek=function(t,e,n){var o={min:Tw(e),max:Rw(e),range:jw(e),value:n,step:Nw(e),snap:Lw(e),snapStart:Hw(e),rounded:$w(e),hasMinEdge:Gw(e),hasMaxEdge:Xw(e),minBound:lk(t),maxBound:fk(t),screenRange:dk(t)};return ok(o)},Ak=function(t){return function(e,n){return o=e,i=(0<t?ek:tk)(Yw(r=n).y,Tw(r),Rw(r),Nw(r)),Tk(o,Ik(i)),C.some(i).map(l);var o,r,i}},Rk=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,h=(u=i,c=n,s=o,l=r,f=dk(a=e),m=s.bind((function(t){return C.some(gk(t,a))})).getOr(0),d=l.bind((function(t){return C.some(gk(t,a))})).getOr(f),p={min:Tw(u),max:Rw(u),range:jw(u),value:c,hasMinEdge:Gw(u),hasMaxEdge:Xw(u),minBound:lk(a),minOffset:0,maxBound:fk(a),maxOffset:f,centerMinEdge:m,centerMaxEdge:d},rk(p));return lk(e)-lk(t)+h},Fk=C.none,Mk=C.none,Pk=Ak(-1),Bk=Ak(1),jk={"top-left":C.none(),top:C.some((function(t,e){Qw(t,qw(Ew(e)))})),"top-right":C.none(),right:C.none(),"bottom-right":C.none(),bottom:C.some((function(t,e){Qw(t,qw(Mw(e)))})),"bottom-left":C.none(),left:C.none()},zk=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ek(t,e,n),r=Ik(o);return Tk(t,r),o},setToMin:function(t,e){var n=Tw(e);Tk(t,Ik(n))},setToMax:function(t,e){var n=Rw(e);Tk(t,Ik(n))},findValueOfOffset:Ek,getValueFromEvent:function(t){return Ow(t).map((function(t){return t.top}))},findPositionOfValue:Rk,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=Rk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=ya(e.element)/2;Yi(e.element,"top",i-a+"px")},onLeft:Fk,onRight:Mk,onUp:Pk,onDown:Bk,edgeActions:jk}),Vk=function(t,e){Ko(t,_w(),{value:e})},Nk=function(t,e){return{x:t,y:e}},Lk=function(t,e){return function(n,o){return i=n,a=o,u=0<t?ek:tk,c=(r=e)?Yw(a).x:u(Yw(a).x,Dw(a),Aw(a),Nw(a)),s=r?u(Yw(a).y,Tw(a),Rw(a),Nw(a)):Yw(a).y,Vk(i,Nk(c,s)),C.some(c).map(l);var r,i,a,u,c,s}},Hk=Ow,$k=Lk(-1,!1),Jk=Lk(1,!1),Uk=Lk(-1,!0),Wk=Lk(1,!0),Gk={"top-left":C.some((function(t,e){Qw(t,Zw(Iw(e),Ew(e)))})),top:C.some((function(t,e){Qw(t,Zw(zw(e),Ew(e)))})),"top-right":C.some((function(t,e){Qw(t,Zw(Fw(e),Ew(e)))})),right:C.some((function(t,e){Qw(t,Zw(Fw(e),Vw(e)))})),"bottom-right":C.some((function(t,e){Qw(t,Zw(Fw(e),Mw(e)))})),bottom:C.some((function(t,e){Qw(t,Zw(zw(e),Mw(e)))})),"bottom-left":C.some((function(t,e){Qw(t,Zw(Iw(e),Mw(e)))})),left:C.some((function(t,e){Qw(t,Zw(Iw(e),Vw(e)))}))},Xk=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yk(t,e,n.left),r=Ek(t,e,n.top),i=Nk(o,r);return Vk(t,i),i},setToMin:function(t,e){var n=Dw(e),o=Tw(e);Vk(t,Nk(n,o))},setToMax:function(t,e){var n=Aw(e),o=Rw(e);Vk(t,Nk(n,o))},getValueFromEvent:Hk,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=wk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Rk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=Da(e.element)/2,c=ya(e.element)/2;Yi(e.element,"left",i-u+"px"),Yi(e.element,"top",a-c+"px")},onLeft:$k,onRight:Jk,onUp:Uk,onDown:Wk,edgeActions:Gk}),Yk=Yf({name:"Slider",configFields:[nn("stepSize",1),nn("onChange",n),nn("onChoose",n),nn("onInit",n),nn("onDragStart",n),nn("onDragEnd",n),nn("snapToGrid",!1),nn("rounded",!0),Ke("snapStart"),$e("model",Re("mode",{x:[nn("minX",0),nn("maxX",100),mn("value",(function(t){return dn(t.mode.minX)})),He("getInitialValue"),yu("manager",Dk)],y:[nn("minY",0),nn("maxY",100),mn("value",(function(t){return dn(t.mode.minY)})),He("getInitialValue"),yu("manager",zk)],xy:[nn("minX",0),nn("maxX",100),nn("minY",0),nn("maxY",100),mn("value",(function(t){return dn({x:t.mode.minX,y:t.mode.minY})})),He("getInitialValue"),yu("manager",Xk)]})),Jl("sliderBehaviours",[up,$l]),mn("mouseIsDown",(function(){return dn(!1)}))],partFields:Cw,factory:function(t,e,n,o){var r,i=function(e){return Pf(e,t,"thumb")},a=function(e){return Pf(e,t,"spectrum")},u=function(e){return Mf(e,t,"left-edge")},c=function(e){return Mf(e,t,"right-edge")},s=function(e){return Mf(e,t,"top-edge")},f=function(e){return Mf(e,t,"bottom-edge")},m=t.model,d=m.manager,p=function(e,n){d.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:c,getTopEdge:s,getBottomEdge:f,getSpectrum:a})},h=function(e,n){m.value.set(n);var o=i(e);return p(e,o),t.onChange(e,o,n),C.some(!0)},g=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&Mf(e,t,"thumb").each((function(n){var o=m.value.get();t.onChoose(e,n,o)}))},v=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},b=function(e,n){n.stop(),t.onDragEnd(e,i(e)),g(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.sliderBehaviours,[up.config({mode:"special",focusIn:function(e){return Mf(e,t,"spectrum").map(up.focusIn).map(l)}}),$l.config({store:{mode:"manual",getValue:function(t){return m.value.get()}}}),mc.config({channels:((r={})[Ol()]={onReceive:g},r)})]),events:er([rr(_w(),(function(t,e){h(t,e.event.value)})),fr((function(e,n){var o=m.getInitialValue();m.value.set(o);var r=i(e);p(e,r);var u=a(e);t.onInit(e,r,u,m.value.get())})),rr(oo(),v),rr(io(),b),rr(uo(),v),rr(lo(),b)]),apis:{resetToMin:function(e){d.setToMin(e,t)},resetToMax:function(e){d.setToMax(e,t)},changeValue:h,refresh:p},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),Kk=[Jl("formBehaviours",[$l])],qk=function(t){return"<alloy.field."+t+">"},Zk=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.formBehaviours,[$l.config({store:{mode:"manual",getValue:function(e){var n=jf(e,t);return It(n,(function(t,e){return t().bind((function(t){var n,o,r=em.getCurrent(t);return n=r,o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+ei(t.element)),n.fold((function(){return ft.error(o)}),ft.value)})).map($l.getValue)}))},setValue:function(e,n){Tt(n,(function(n,o){Mf(e,t,o).each((function(t){em.getCurrent(t).each((function(t){$l.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return Mf(e,t,n).bind(em.getCurrent)}}}},Qk={getField:xi((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),If("form",qk(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=J(r,(function(t){return xf({name:t,pname:qk(t)})}));return Jf("form",Kk,i,Zk,o)}},tS=ii("valid-input"),eS=ii("invalid-input"),nS=ii("validating-input"),oS="colorcustom.rgb.",rS=function(t,e,o,r){var i=function(o,r,i,a,u){var c,s,l=t(oS+"range"),f=[Wy.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),Wy.parts.field({data:u,factory:px,inputAttributes:m({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:ac([(c=r,s=o,Px.config({invalidClass:e("invalid"),notify:{onValidate:function(t){Ko(t,nS,{type:c})},onValid:function(t){Ko(t,tS,{type:c,value:$l.getValue(t)})},onInvalid:function(t){Ko(t,eS,{type:c,value:$l.getValue(t)})}},validator:{validate:function(e){var n=$l.getValue(e),o=s(n)?ft.value(!0):ft.error(t("aria.input.invalid"));return _x(o)},validateOnLoad:!1}})),Yy.config({})]),onSetValue:function(t){Px.isInvalid(t)&&Px.run(t).get(n)}})],d="hex"!==r?[Wy.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(d)}},a=function(t,e){var n=e.red,o=e.green,r=e.blue;$l.setValue(t,{red:n,green:o,blue:r})},u=hh({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,e){u.getOpt(t).each((function(t){Yi(t.element,"background-color","#"+e.value)}))};return Xf({factory:function(){var n={red:dn(C.some(255)),green:dn(C.some(255)),blue:dn(C.some(255)),hex:dn(C.some("ffffff"))},s=function(t){return n[t].get()},l=function(t,e){n[t].set(e)},f=function(t){var e=t.red,n=t.green,o=t.blue;l("red",C.some(e)),l("green",C.some(n)),l("blue",C.some(o))},m=function(t,e){var n=e.event;"hex"!==n.type?l(n.type,C.none()):r(t)},d=function(t,e,n){var o=parseInt(n,10);l(e,C.some(o)),s("red").bind((function(t){return s("green").bind((function(e){return s("blue").map((function(n){return Ib(t,e,n,1)}))}))})).each((function(e){var n,o,r=(n=t,o=Sb(e),Qk.getField(n,"hex").each((function(t){bp.isFocused(t)||$l.setValue(n,{hex:o.value})})),o);c(t,r)}))},p=function(t,e){var n=e.event;"hex"===n.type?function(t,e){o(t);var n=vb(e);l("hex",C.some(e));var r=Rb(n);a(t,r),f(r),Ko(t,mw,{hex:n}),c(t,n)}(t,n.value):d(t,n.type,n.value)},h=function(e){return{label:t(oS+e+".label"),description:t(oS+e+".description")}},g=h("red"),v=h("green"),b=h("blue"),y=h("hex");return Lt(Qk.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Wy.sketch(i(Eb,"red",g.label,g.description,255))),n.field("green",Wy.sketch(i(Eb,"green",v.label,v.description,255))),n.field("blue",Wy.sketch(i(Eb,"blue",b.label,b.description,255))),n.field("hex",Wy.sketch(i(xb,"hex",y.label,y.description,"ffffff"))),u.asSpec()],formBehaviours:ac([Px.config({invalidClass:e("form-invalid")}),dp("rgb-form-events",[rr(tS,p),rr(eS,m),rr(nS,m)])])}})),{apis:{updateHex:function(t,e){var n,o;$l.setValue(t,{hex:e.value}),n=t,o=Rb(e),a(n,o),f(o),c(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},iS=function(t,e){var n=Yk.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),o=Yk.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),i=function(t,e){var n,o,r=t.width,i=t.height,a=t.getContext("2d");null!==a&&(a.fillStyle=e,a.fillRect(0,0,r,i),(n=a.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=n,a.fillRect(0,0,r,i),(o=a.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=o,a.fillRect(0,0,r,i))};return Xf({factory:function(t){var a=r({x:0,y:0}),u=ac([em.config({find:C.some}),bp.config({})]);return Yk.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[n,o],onChange:function(t,e,n){Ko(t,pw,{value:n})},onInit:function(t,e,n,o){i(n.element.dom,Mb(Pb))},sliderBehaviours:u})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element.dom,i(r,Mb(o))}},extraApis:{}})},aS=function(t,e){return Xf({name:"ColourPicker",configFields:[He("dom"),nn("onValidHex",n),nn("onInvalidHex",n)],factory:function(n){var o,i,a,u,c,s=rS(t,e,n.onValidHex,n.onInvalidHex),l=iS(0,e),f={paletteRgba:dn(Pb)},m=hh(l.sketch({})),d=hh(s.sketch({})),p=function(t,e){m.getOpt(t).each((function(t){var n=Rb(e);f.paletteRgba.set(n),l.setRgba(t,n)}))},h=function(t,e){d.getOpt(t).each((function(t){s.updateHex(t,e)}))},g=function(t,e,n){U(n,(function(n){n(t,e)}))};return{uid:n.uid,dom:n.dom,components:[m.asSpec(),(a=e,u=Yk.parts.spectrum({dom:{tag:"div",classes:[a("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Yk.parts.thumb({dom:{tag:"div",classes:[a("hue-slider-thumb")],attributes:{role:"presentation"}}}),Yk.sketch({dom:{tag:"div",classes:[a("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[u,c],sliderBehaviours:ac([bp.config({})]),onChange:function(t,e,n){Ko(t,dw,{value:n})}})),d.asSpec()],behaviours:ac([dp("colour-picker-events",[rr(pw,(i=[h],function(t,e){var n,o,r,a,u,c,s,l,m,d=e.event.value,p=f.paletteRgba.get(),h=(a=r=0,u=(n=p).red/255,c=n.green/255,s=n.blue/255,l=Math.min(u,Math.min(c,s)),m=Math.max(u,Math.max(c,s)),l===m?fw(0,0,100*(a=l)):(r=60*((r=u===l?3:s===l?1:5)-(u===l?c-s:s===l?u-c:s-u)/(m-l)),o=(m-l)/m,a=m,fw(Math.round(r),Math.round(100*o),Math.round(100*a)))),v=fw(h.hue,d.x,100-d.y),b=Ab(v),y=Sb(b);g(t,y,i)})),rr(dw,(o=[p,h],function(t,e){var n,r,i,a=e.event.value,u=(n=a.y,r=fw((100-n)/100*360,100,100),i=Ab(r),Sb(i));g(t,u,o)}))]),em.config({find:function(t){return d.getOpt(t)}}),up.config({mode:"acyclic"})])}}})},uS=function(){return em.config({find:C.some})},cS=function(t){return em.config({find:t.getOpt})},sS=function(t){return em.config({find:function(e){return Ir(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},lS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},fS=function(t){return lS[t]},mS=tinymce.util.Tools.resolve("tinymce.Resource"),dS=tinymce.util.Tools.resolve("tinymce.util.Tools"),pS=me([nn("preprocess",i),nn("postprocess",i)]),hS=function(t,e,n){return $l.config(Lt({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},gS=function(t,e,n){return hS(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}))},vS=function(t,e){var n=Ie("RepresentingConfigs.memento processors",pS,e);return $l.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=$l.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);$l.setValue(i,r)}}})},bS=hS,yS=function(t){return gS(t,Wr,Gr)},xS=function(t){return $l.config({store:{mode:"memory",initialValue:t}})},wS=function(t,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){U(t,(function(t){t(e,n)}))}},r=function(t,e){var n;hv.isDisabled(t)||(n=e.event.raw,a(t,n.dataTransfer.files))},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,o){var r,i,a;$l.setValue(n,(r=o,i=e,a=dS.explode(i.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),G(ut(r),(function(t){return L(a,(function(e){return Cn(t.name.toLowerCase(),"."+e.toLowerCase())}))})))),Ko(n,ex,{name:t.name})},u=hh({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ac([dp("input-file-events",[sr(yo()),sr(Eo())])])}),c=t.label.map((function(t){return tx(t,e)})),s=Wy.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ac([xS([]),uS(),hv.config({}),Ep.config({toggleClass:"dragenter",toggleOnExecute:!1}),dp("dropzone-events",[rr("dragenter",o([n,Ep.toggle])),rr("dragleave",o([n,Ep.toggle])),rr("dragover",n),rr("drop",o([n,r])),rr(bo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},ph.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){u.get(t).element.dom.click()},buttonBehaviours:ac([Yy.config({}),Wv(e.isDisabled),Jv()])})]}]}}}});return qy(c,s,["tox-form__group--stretched"],[])},kS=ii("alloy-fake-before-tabstop"),SS=ii("alloy-fake-after-tabstop"),CS=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ac([bp.config({ignore:!0}),Yy.config({})])}},_S=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[CS([kS]),t,CS([SS])],behaviours:ac([sS(1)])}},OS=function(t,e){Ko(t,ho(),{raw:{which:9,shiftKey:e}})},DS=function(t,e){var n=e.element;Ni(n,kS)?OS(t,!0):Ni(n,SS)&&OS(t,!1)},TS=function(t){return Dy(t,["."+kS,"."+SS].join(","),s)},IS=!(Jn().browser.isIE()||Jn().browser.isEdge()),ES=function(t,e){var n,o,r=IS&&t.sandboxed,i=m(m({},t.label.map((function(t){return{title:t}})).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),a=(n=r,o=dn(""),{getValue:function(t){return o.get()},setValue:function(t,e){var r;n?Yr(t.element,"srcdoc",e):(Yr(t.element,"src","javascript:''"),(r=t.element.dom.contentWindow.document).open(),r.write(e),r.close()),o.set(e)}}),u=t.label.map((function(t){return tx(t,e)})),c=Wy.parts.field({factory:{sketch:function(t){return _S({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:ac([Yy.config({}),bp.config({}),bS(C.none(),a.getValue,a.setValue)])})}}});return qy(u,c,["tox-form__group--stretched"],[])},AS=function(t,e){return MS(document.createElement("canvas"),t,e)},RS=function(t){var e=AS(t.width,t.height);return FS(e).drawImage(t,0,0),e},FS=function(t){return t.getContext("2d")},MS=function(t,e,n){return t.width=e,t.height=n,t},PS=function(t){return t.naturalWidth||t.width},BS=function(t){return t.naturalHeight||t.height},jS=window.Promise?window.Promise:(Lx=function(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Wx(t,Jx(VS,this),Jx(NS,this))},Hx=window,$x=Lx.immediateFn||"function"==typeof Hx.setImmediate&&Hx.setImmediate||function(t){return setTimeout(t,1)},Jx=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.apply(e,n)}},Ux=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Wx=function(t,e,n){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,n(t))}))}catch(b){if(o)return;o=!0,n(b)}},Lx.prototype["catch"]=function(t){return this.then(null,t)},Lx.prototype.then=function(t,e){var n=this;return new Lx((function(o,r){zS.call(n,new HS(t,e,o,r))}))},Lx.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.prototype.slice.call(1===t.length&&Ux(t[0])?t[0]:t);return new Lx((function(t,n){if(0===o.length)return t([]);for(var r=o.length,i=function i(a,u){try{if(u&&("object"==e(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),n)}o[a]=u,0==--r&&t(o)}catch(v){n(v)}},a=0;a<o.length;a++)i(a,o[a])}))},Lx.resolve=function(t){return t&&"object"==e(t)&&t.constructor===Lx?t:new Lx((function(e){e(t)}))},Lx.reject=function(t){return new Lx((function(e,n){n(t)}))},Lx.race=function(t){return new Lx((function(e,n){for(var o=0,r=t;o<r.length;o++)r[o].then(e,n)}))},Lx);function zS(t){var e=this;null!==this._state?$x((function(){var n,o=e._state?t.onFulfilled:t.onRejected;if(null!==o){try{n=o(e._value)}catch(g){return void t.reject(g)}t.resolve(n)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function VS(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==e(t)||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void Wx(Jx(n,t),Jx(VS,this),Jx(NS,this))}this._state=!0,this._value=t,LS.call(this)}catch(g){NS.call(this,g)}}function NS(t){this._state=!1,this._value=t,LS.call(this)}function LS(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];zS.call(this,n)}this._deferreds=[]}function HS(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var $S,JS,US,WS,GS=function(t){return new jS((function(e,n){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return C.none();for(var o=n[1],r=e[1],i=atob(r),a=i.length,u=Math.ceil(a/1024),c=new Array(u),s=0;s<u;++s){for(var l=1024*s,f=Math.min(1024+l,a),m=new Array(f-l),d=l,p=0;d<f;++p,++d)m[p]=i[d].charCodeAt(0);c[s]=new Uint8Array(m)}return C.some(new Blob(c,{type:o}))})(t).fold((function(){n("uri is not base64: "+t)}),e)}))},XS=function(t,e,n){return e=e||"image/png",F(HTMLCanvasElement.prototype.toBlob)?new jS((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):GS(t.toDataURL(e,n))},YS=function(t){return e=t,new jS((function(t,n){var o=URL.createObjectURL(e),r=new Image,i=function(){r.removeEventListener("load",a),r.removeEventListener("error",u)},a=function(){i(),t(r)},u=function(){i(),n("Unable to load data of type "+e.type+": "+o)};r.addEventListener("load",a),r.addEventListener("error",u),r.src=o,r.complete&&setTimeout(a,0)})).then((function(t){KS(t);var e=AS(PS(t),BS(t));return FS(e).drawImage(t,0,0),e}));var e},KS=function(t){URL.revokeObjectURL(t.src)},qS=function(t,e,n){var o=e.type,i=r(o),a=r(n),u=function(e,n){return t.then((function(t){return r=n,o=(o=e)||"image/png",t.toDataURL(o,r);var o,r}))};return{getType:i,toBlob:function(){return jS.resolve(e)},toDataURL:a,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return XS(t,e,n)}))},toAdjustedDataURL:u,toAdjustedBase64:function(t,e){return u(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(RS)}}},ZS=function(t,e){return XS(t,e).then((function(e){return qS(jS.resolve(t),e,t.toDataURL())}))},QS=function(t){return e=t,new jS((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})).then((function(e){return qS(YS(t),t,e)}));var e},tC=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o},eC=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},nC=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],oC=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)o[a]=e[a+5*i];for(a=0;a<5;a++){for(var u=n=0;u<5;u++)n+=t[a+5*u]*o[u];r[a+5*i]=n}}return r},rC=function(t,e){return t.toCanvas().then((function(n){return iC(n,t.getType(),e)}))},iC=function(t,e,n){var o=FS(t),r=function(t,e){for(var n,o,r,i,a=t.data,u=e[0],c=e[1],s=e[2],l=e[3],f=e[4],m=e[5],d=e[6],p=e[7],h=e[8],g=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],k=e[15],S=e[16],C=e[17],_=e[18],O=e[19],D=0;D<a.length;D+=4)n=a[D],o=a[D+1],r=a[D+2],i=a[D+3],a[D]=n*u+o*c+r*s+i*l+f,a[D+1]=n*m+o*d+r*p+i*h+g,a[D+2]=n*v+o*b+r*y+i*x+w,a[D+3]=n*k+o*S+r*C+i*_+O;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),ZS(t,e)},aC=function(t,e,n){var o=FS(t),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),a=t.data,u=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var m=0,d=0,p=0,h=0;h<r;h++)for(var g=0;g<r;g++){var v=o(f+g-i,0,c-1),b=4*(o(l+h-i,0,s-1)*c+v),y=n[h*r+g];m+=a[b]*y,d+=a[1+b]*y,p+=a[2+b]*y}var x=4*(l*c+f);u[x]=o(m,0,255),u[1+x]=o(d,0,255),u[2+x]=o(p,0,255)}return e}(o.getImageData(0,0,t.width,t.height),r=o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),ZS(t,e)},uC=function(t){return function(e,n){return rC(e,t(eC(),n))}},cC=($S=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return rC(t,$S)}),sC=uC((function(t,e){return e=tC(255*e,-255,255),oC(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),lC=uC((function(t,e){var n;return e=tC(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?nC[e]:nC[Math.floor(e)]*(1-n)+nC[Math.floor(e)+1]*n)+127,oC(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),fC=(JS=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=JS,(e=t).toCanvas().then((function(t){return aC(t,e.getType(),n)}));var e,n}),mC=(US=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=FS(t),r=new Array(256),i=0;i<r.length;i++)r[i]=US(i,n);var a=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(a,0,0),ZS(t,e)}(n,t.getType(),e)}))}),dC=function t(e,n,o){var r=PS(e),i=BS(e),a=n/r,u=o/i,c=!1;(a<.5||2<a)&&(a=a<.5?.5:2,c=!0),(u<.5||2<u)&&(u=u<.5?.5:2,c=!0);var s=pC(e,a,u);return c?s.then((function(e){return t(e,n,o)})):s},pC=function(t,e,n){return new jS((function(o){var r=PS(t),i=BS(t),a=Math.floor(r*e),u=Math.floor(i*n),c=AS(a,u);FS(c).drawImage(t,0,0,r,i,0,0,a,u),o(c)}))},hC=function(t,e,n){var o=AS(t.width,t.height),r=FS(o),i=0,a=0;return 90!==(n=n<0?360+n:n)&&270!==n||MS(o,o.height,o.width),90!==n&&180!==n||(i=o.width),270!==n&&180!==n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),ZS(o,e)},gC=function(t,e,n){var o=AS(t.width,t.height),r=FS(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),ZS(o,e)},vC=function(t,e,n,o,r,i){var a=AS(r,i);return FS(a).drawImage(t,-n,-o),ZS(a,e)},bC=function(t){return cC(t)},yC=function(t){return fC(t)},xC=function(t,e){return mC(t,e)},wC=function(t,e,n,o){return rC(t,(r=eC(),a=n,u=o,i=tC(i=e,0,2),a=tC(a,0,2),u=tC(u,0,2),oC(r,[i,0,0,0,0,0,a,0,0,0,0,0,u,0,0,0,0,0,1,0,0,0,0,0,1])));var r,i,a,u},kC=function(t,e){return sC(t,e)},SC=function(t,e){return lC(t,e)},CC=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return gC(t,n.getType(),o)}));var n,o},_C=function(t,e,n,o,r){return a=e,u=n,c=o,s=r,(i=t).toCanvas().then((function(t){return vC(t,i.getType(),a,u,c,s)}));var i,a,u,c,s},OC=function(t,e,n){return r=e,i=n,(o=t).toCanvas().then((function(t){return dC(t,r,i).then((function(t){return ZS(t,o.getType())}))}));var o,r,i},DC=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return hC(t,n.getType(),o)}));var n,o},TC=function(t,e){return m({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},IC=function(t,e){return TC(vh(t,e),{})},EC=function(t,e){return TC(vh(t,e),{behaviours:ac([mp.config({})])})},AC=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:ac([mp.config({})])}},RC=ii("toolbar.button.execute"),FC=((WS={})[To()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],WS),MC=ii("update-menu-text"),PC=ii("update-menu-icon"),BC=function(t,e,o){var r=dn(n),i=t.text.map((function(t){return hh(AC(t,e,o.providers))})),u=t.icon.map((function(t){return hh(EC(t,o.providers.icons))})),c=function(t,e){var n=$l.getValue(t);return bp.focus(n),Ko(n,"keydown",{raw:e.event.raw}),iw.close(n),C.some(!0)},s=t.role.fold((function(){return{}}),(function(t){return{role:t}})),l=t.tooltip.fold((function(){return{}}),(function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}}));return hh(iw.sketch(m(m(m({},t.uid?{uid:t.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat(J(t.classes,(function(t){return e+"--"+t}))),attributes:m({},l)},components:Qv([u.map((function(t){return t.asSpec()})),i.map((function(t){return t.asSpec()})),C.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:vh("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:ac(p(t.dropdownBehaviours,[Wv((function(){return t.disabled||o.providers.isDisabled()})),Jv(),aw.config({}),mp.config({}),dp("dropdown-events",[Kv(t,r),qv(t,r)]),dp("menubutton-update-display-text",[rr(MC,(function(t,e){i.bind((function(e){return e.getOpt(t)})).each((function(t){mp.set(t,[ma(o.providers.translate(e.event.text))])}))})),rr(PC,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){mp.set(t,[EC(e.event.icon,o.providers.icons)])}))}))])])),eventOrder:Lt(FC,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ac([up.config({mode:"special",onLeft:c,onRight:c})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:kg(0,t.columns,t.presets)},fetch:function(e){return Cx(a(t.fetch,e))}}))).asSpec()},jC=function(t){return"separator"===t.type},zC={type:"separator"},VC=function(t,e){var n=Y(t,(function(t,n){return D(n)?""===n?t:"|"===n?0<t.length&&!jC(t[t.length-1])?t.concat([zC]):t:Bt(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return 0<n.length&&jC(n[n.length-1])&&n.pop(),n},NC=function(t,e){return Bt(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=LC(r,o),{item:n,menus:Lt(i.menus,Zt(n.value,i.items)),expansions:Lt(i.expansions,Zt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},LC=function(t,e){var n=VC(D(t)?t.split(" "):t,e);return X(n,(function(t,n){var o=function(t){if(jC(t))return t;var e=Pt(t,"value").getOrThunk((function(){return ii("generated-menu-item")}));return Lt({value:e},t)}(n),r=NC(o,e);return{menus:Lt(t.menus,r.menus),items:[r.item].concat(t.items),expansions:Lt(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},HC=function(t,e,n,o){var r=ii("primary-menu"),i=LC(t,n.shared.providers.menuItems());if(0===i.items.length)return C.none();var a=xy(r,i.items,e,n,o),u=It(i.menus,(function(t,o){return xy(o,t,e,n,!1)})),c=Lt(u,Zt(r,a));return C.from(th.tieredData(r,c,i.expansions))},$C=function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)},setActive:function(e){var n=t.element;e?(ji(n,"tox-tbtn--enabled"),Yr(n,"aria-pressed",!0)):(Vi(n,"tox-tbtn--enabled"),Qr(n,"aria-pressed"))},isActive:function(){return Ni(t.element,"tox-tbtn--enabled")}}},JC=function(t,e,n,o){return BC({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o(HC(t,ug.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:$C,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yy.config({})]},e,n.shared)},UC=function(t,e,n){return function(o){o(J(t,(function(t){var o,r,i=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return m(m({type:t.type,active:!1},i),{onAction:function(t){var o=!t.isActive();t.setActive(o),r.storage.set(o),n.shared.getSink().each((function(t){e().getOpt(t).each((function(t){pc(t.element),Ko(t,rx,{name:r.name,value:r.storage.get()})}))}))},onSetup:(o=r=t,function(t){t.setActive(o.storage.get())})})})))}},WC=function(t,e,n,o,r,i){void 0===n&&(n=[]);var a=e.fold((function(){return{}}),(function(t){return{action:t}})),u=m({buttonBehaviours:ac([Wv((function(){return t.disabled||i.isDisabled()})),Jv(),Yy.config({}),dp("button press",[or("click"),or("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=Lt(u,{dom:o});return Lt(c,{components:r})},GC=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return IC(t,n.icons)})),a=Qv([i]);return WC(t,e,o,r,a,n)},XC=function(t,e,n,o){void 0===o&&(o=[]);var r=GC(t,C.some(e),n,o);return ph.sketch(r)},YC=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),a=t.icon?t.icon.map((function(t){return IC(t,n.icons)})):C.none(),u=a.isSome()?Qv([a]):[],c=a.isSome()?{}:{innerHtml:i},s=p(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),l=m(m({tag:"button",classes:s},c),{attributes:{title:i}});return WC(t,e,o,l,u,n)},KC=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=YC(t,C.some(e),n,o,r);return ph.sketch(i)},qC=function(t,e){return function(n){"custom"===e?Ko(n,rx,{name:t,value:{}}):"submit"===e?Yo(n,ix):"cancel"===e?Yo(n,ox):console.error("Unknown button type: ",e)}},ZC=function(t,e,o){if("menu"===e){var r=t,i=m(m({},t),{onSetup:function(e){return e.setDisabled(t.disabled),n},fetch:UC(r.items,(function(){return a}),o)}),a=hh(JC(i,"tox-tbtn",o,C.none()));return a.asSpec()}if("custom"===(s=e)||"cancel"===s||"submit"===s){var u=qC(t.name,e),c=m(m({},t),{borderless:!1});return KC(c,u,o.shared.providers,[])}var s;console.error("Unknown footer button type: ",e)},QC=function(t,e){var n,o,r=qC(t.name,"custom");return n=C.none(),o=Wy.parts.field(m({factory:ph},YC(t,C.some(r),e,[xS(""),uS()]))),qy(n,o,[],[])},t_=r([nn("field1Name","field1"),nn("field2Name","field2"),vu("onLockedChange"),du(["lockClass"]),nn("locked",!1),Gl("coupledFieldBehaviours",[em,$l])]),e_=function(t,e){return xf({factory:Wy,name:t,overrides:function(t){return{fieldBehaviours:ac([dp("coupled-input-behaviour",[rr(vo(),(function(n){Mf(n,t,e).bind(em.getCurrent).each((function(e){Mf(n,t,"lock").each((function(o){Ep.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})},n_=r([e_("field1","field2"),e_("field2","field1"),xf({factory:ph,schema:[He("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:ac([Ep.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),o_=Yf({name:"FormCoupledInputs",configFields:t_(),partFields:n_(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Xl(t.coupledFieldBehaviours,[em.config({find:C.some}),$l.config({store:{mode:"manual",getValue:function(e){var n=Vf(e,t,["field1","field2"]),o={};return o[t.field1Name]=$l.getValue(n.field1()),o[t.field2Name]=$l.getValue(n.field2()),o},setValue:function(e,n){var o=Vf(e,t,["field1","field2"]);jt(n,t.field1Name)&&$l.setValue(o.field1(),n[t.field1Name]),jt(n,t.field2Name)&&$l.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Mf(e,t,"field1")},getField2:function(e){return Mf(e,t,"field2")},getLock:function(e){return Mf(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),r_=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return ft.error(t);var n=parseFloat(e[1]),o=e[2];return ft.value({value:n,unit:o})},i_=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?C.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?C.some(t.value):C.some(t.value/n[t.unit]*n[e]):C.none()},a_=function(t){return C.none()},u_=function(t,e){var n,o,r,i=r_(t).toOptional(),a=r_(e).toOptional();return o=a,r=function(t,e){return i_(t,e.unit).map((function(t){return e.value/t})).map((function(t){return n=t,o=e.unit,function(t){return i_(t,o).map((function(t){return{value:t*n,unit:o}}))};var n,o})).getOr(a_)},((n=i).isSome()&&o.isSome()?C.some(r(n.getOrDie(),o.getOrDie())):C.none()).getOr(a_)},c_=function(t,e){var n=a_,o=ii("ratio-event"),r=o_.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:vh("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:vh("unlock",e.icons)}}],buttonBehaviours:ac([hv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Jv(),Yy.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return Wy.parts.field({factory:px,inputClasses:["tox-textfield"],inputBehaviours:ac([hv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Jv(),Yy.config({}),dp("size-input-events",[rr(mo(),(function(t,e){Ko(t,o,{isField1:n})})),rr(bo(),(function(e,n){Ko(e,ex,{name:t.name})}))])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=o_.parts.field1(i([Wy.parts.label(u("Width")),a(!0)])),s=o_.parts.field2(i([Wy.parts.label(u("Height")),a(!1)]));return o_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,i([u("&nbsp;"),r])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,o){r_($l.getValue(t)).each((function(t){n(t).each((function(t){var n,o,r,i;$l.setValue(e,(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(i=(n=t).value.toFixed((o=n.unit)in r?r[o]:1)).indexOf(".")&&(i=i.replace(/\.?0*$/,"")),i+n.unit))}))}))},coupledFieldBehaviours:ac([hv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){o_.getField1(t).bind(Wy.getField).each(hv.disable),o_.getField2(t).bind(Wy.getField).each(hv.disable),o_.getLock(t).each(hv.disable)},onEnabled:function(t){o_.getField1(t).bind(Wy.getField).each(hv.enable),o_.getField2(t).bind(Wy.getField).each(hv.enable),o_.getLock(t).each(hv.enable)}}),Jv(),dp("size-input-events2",[rr(o,(function(t,e){var o=e.event.isField1,r=o?o_.getField1(t):o_.getField2(t),i=o?o_.getField2(t):o_.getField1(t),a=r.map($l.getValue).getOr(""),u=i.map($l.getValue).getOr("");n=u_(a,u)}))])])})},s_={undo:r(ii("undo")),redo:r(ii("redo")),zoom:r(ii("zoom")),back:r(ii("back")),apply:r(ii("apply")),swap:r(ii("swap")),transform:r(ii("transform")),tempTransform:r(ii("temp-transform")),transformApply:r(ii("transform-apply"))},l_=r("save-state"),f_=r("disable"),m_=r("enable"),d_={formActionEvent:rx,saveState:l_,disable:f_,enable:m_},p_=function(t,e){var o=function(t,n,o,r){return hh(KC({name:t,text:t,disabled:o,primary:r,icon:C.none(),borderless:!1},n,e))},i=function(t,n,o,r){return hh(XC({name:t,icon:C.some(t),tooltip:C.some(n),disabled:r,primary:!1,borderless:!1},o,e))},a=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(hv)&&hv.disable(n)}))},u=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(hv)&&hv.enable(n)}))},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},s=n,l=function(t,e,n){Ko(t,e,n)},f=function(t){return Yo(t,d_.disable())},m=function(t){return Yo(t,d_.enable())},d=function(t,e){f(t),l(t,s_.transform(),{transform:e}),m(t)},p=function(t){return function(){Q.getOpt(t).each((function(t){mp.set(t,[q])}))}},h=function(t,e){f(t),l(t,s_.transformApply(),{transform:e,swap:p(t)}),m(t)},g=function(){return o("Back",(function(t){return l(t,s_.back(),{swap:p(t)})}),!1,!1)},v=function(){return hh({dom:{tag:"div",classes:["tox-spacer"]},behaviours:ac([hv.config({})])})},b=function(){return o("Apply",(function(t){return l(t,s_.apply(),{swap:p(t)})}),!0,!0)},y=[g(),v(),o("Apply",(function(e){h(e,(function(e){var n=t.getRect();return _C(e,n.x,n.y,n.w,n.h)})),t.hideCrop()}),!1,!0)],x=Hy.sketch({dom:c,components:y.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-crop-buttons-events",[rr(d_.disable(),(function(t,e){a(y,t)})),rr(d_.enable(),(function(t,e){u(y,t)}))])])}),w=hh(c_({name:"size",label:C.none(),constrain:!0,disabled:!1},e)),k=[g(),v(),w,v(),o("Apply",(function(t){w.getOpt(t).each((function(e){var n,o,r=$l.getValue(e),i=parseInt(r.width,10),a=parseInt(r.height,10),u=(n=i,o=a,function(t){return OC(t,n,o)});h(t,u)}))}),!1,!0)],S=Hy.sketch({dom:c,components:k.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-resize-buttons-events",[rr(d_.disable(),(function(t,e){a(k,t)})),rr(d_.enable(),(function(t,e){u(k,t)}))])])}),_=function(t,e){return function(n){return t(n,e)}},O=_(CC,"h"),D=_(CC,"v"),T=_(DC,-90),I=_(DC,90),E=function(t,e){var n,o;o=e,f(n=t),l(n,s_.tempTransform(),{transform:o}),m(n)},A=[g(),v(),i("flip-horizontally","Flip horizontally",(function(t){E(t,O)}),!1),i("flip-vertically","Flip vertically",(function(t){E(t,D)}),!1),i("rotate-left","Rotate counterclockwise",(function(t){E(t,T)}),!1),i("rotate-right","Rotate clockwise",(function(t){E(t,I)}),!1),v(),b()],R=Hy.sketch({dom:c,components:A.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-fliprotate-buttons-events",[rr(d_.disable(),(function(t,e){a(A,t)})),rr(d_.enable(),(function(t,e){u(A,t)}))])])}),F=function(t,n,o,i,a){var u=Yk.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=Yk.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=Yk.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return hh(Yk.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:a,getInitialValue:r({x:i})},components:[u,c,s],sliderBehaviours:ac([bp.config({})]),onChoose:n}))},M=function(t,e,n,o,r){return[g(),(i=e,F(t,(function(t,e,n){var o=_(i,n.x/100);d(t,o)}),n,o,r)),b()];var i},P=function(t,e,n,o,r){var i=M(t,e,n,o,r);return Hy.sketch({dom:c,components:i.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-filter-panel-buttons-events",[rr(d_.disable(),(function(t,e){a(i,t)})),rr(d_.enable(),(function(t,e){u(i,t)}))])])})},B=[g(),v(),b()],j=Hy.sketch({dom:c,components:B.map((function(t){return t.asSpec()}))}),z=P("Brightness",kC,-100,0,100),V=P("Contrast",SC,-100,0,100),N=P("Gamma",xC,-100,0,100),L=function(t){return F(t,(function(t,e,n){var o=H.getOpt(t),r=J.getOpt(t),i=$.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r,i,a,u=$l.getValue(e).x/100,c=$l.getValue(o).x/100,s=$l.getValue(n).x/100,l=(r=u,i=c,a=s,function(t){return wC(t,r,i,a)});d(t,l)}))}))}))}),0,100,200)},H=L("R"),$=L("G"),J=L("B"),U=[g(),H,$,J,b()],W=Hy.sketch({dom:c,components:U.map((function(t){return t.asSpec()}))}),G=function(t,e,n){return function(o){l(o,s_.swap(),{transform:e,swap:function(){Q.getOpt(o).each((function(e){mp.set(e,[t]),n(e)}))}})}},X=C.some(yC),Y=C.some(bC),K=[i("crop","Crop",G(x,C.none(),(function(e){t.showCrop()})),!1),i("resize","Resize",G(S,C.none(),(function(e){w.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;$l.setValue(e,{width:o,height:r})}))})),!1),i("orientation","Orientation",G(R,C.none(),s),!1),i("brightness","Brightness",G(z,C.none(),s),!1),i("sharpen","Sharpen",G(j,X,s),!1),i("contrast","Contrast",G(V,C.none(),s),!1),i("color-levels","Color levels",G(W,C.none(),s),!1),i("gamma","Gamma",G(N,C.none(),s),!1),i("invert","Invert",G(j,Y,s),!1)],q=Hy.sketch({dom:c,components:K.map((function(t){return t.asSpec()}))}),Z=Hy.sketch({dom:{tag:"div"},components:[q],containerBehaviours:ac([mp.config({})])}),Q=hh(Z);return{memContainer:Q,getApplyButton:function(t){return Q.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},h_=tinymce.util.Tools.resolve("tinymce.geom.Rect"),g_=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),v_=tinymce.util.Tools.resolve("tinymce.util.Observable"),b_=tinymce.util.Tools.resolve("tinymce.util.VK"),y_=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function x_(t,e){var n,o,r,i,a=e.document||document,u=a.getElementById(e.handle||t),c=function(t){if(y_(t),t.button!==o)return s(t);t.deltaX=t.screenX-r,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},s=function t(o){y_(o),g_(a).off("mousemove touchmove",c).off("mouseup touchend",t),n.remove(),e.stop&&e.stop(o)};return g_(u).on("mousedown touchstart",(function(t){var l,f,m,d,p,h,g,v,b,y,x=(l=a,f=Math.max,m=l.documentElement,d=l.body,p=f(m.scrollWidth,d.scrollWidth),h=f(m.clientWidth,d.clientWidth),g=f(m.offsetWidth,d.offsetWidth),v=f(m.scrollHeight,d.scrollHeight),b=f(m.clientHeight,d.clientHeight),{width:p<g?h:p,height:v<f(m.offsetHeight,d.offsetHeight)?b:v});y_(t),t.preventDefault(),o=t.button;var w=u;r=t.screenX,i=t.screenY,y=window.getComputedStyle?window.getComputedStyle(w,null).getPropertyValue("cursor"):w.runtimeStyle.cursor,n=g_("<div></div>").css({position:"absolute",top:0,left:0,width:x.width,height:x.height,zIndex:2147483647,opacity:1e-4,cursor:y}).appendTo(a.body),g_(a).on("mousemove touchmove",c).on("mouseup touchend",s),e.start(t)})),{destroy:function(){g_(u).off()}}}var w_,k_,S_,C_=0,__=function(t,e,n,o,r){var i,a="tox-",u="tox-crid-"+C_++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],l=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},f=function(e,o,r,i){var a,u=o.x,c=o.y,s=o.w,f=o.h;u+=r*e.deltaX,c+=i*e.deltaY,(s+=r*e.deltaW)<20&&(s=20),(f+=i*e.deltaH)<20&&(f=20),a=t=h_.clamp({x:u,y:c,w:s,h:f},n,"move"===e.name),a=l(n,a),h.fire("updateRect",{rect:a}),p(a)},m=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),g_("#"+u+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};dS.each(c,(function(e){g_("#"+u+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},d=function(e){m(t=e)},p=function(t){var e,o;d((e=n,{x:(o=t).x+e.x,y:o.y+e.y,w:o.w,h:o.h}))};g_('<div id="'+u+'" class="'+a+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),dS.each(s,(function(t){g_("#"+u,o).append('<div id="'+u+"-"+t+'"class="'+a+'croprect-block" style="display: none" data-mce-bogus="all">')})),dS.each(c,(function(t){g_("#"+u,o).append('<div id="'+u+"-"+t.name+'" class="'+a+"croprect-handle "+a+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),i=dS.map(c,(function(e){var n;return x_(u,{document:o.ownerDocument,handle:u+"-"+e.name,start:function(){n=t},drag:function(t){f(e,n,t.deltaX,t.deltaY)}})})),m(t),g_(o).on("focusin focusout",(function(t){g_(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),g_(o).on("keydown",(function(e){var n;dS.each(c,(function(t){if(e.target.id===u+"-"+t.name)return n=t,!1}));var o=function(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),f(n,o,r,i)};switch(e.keyCode){case b_.LEFT:o(e,0,t,-10,0);break;case b_.RIGHT:o(e,0,t,10,0);break;case b_.UP:o(e,0,t,0,-10);break;case b_.DOWN:o(e,0,t,0,10);break;case b_.ENTER:case b_.SPACEBAR:e.preventDefault(),r()}}));var h=dS.extend({toggleVisibility:function(t){var e=dS.map(c,(function(t){return"#"+u+"-"+t.name})).concat(dS.map(s,(function(t){return"#"+u+"-"+t}))).join(",");t?g_(e,o).show():g_(e,o).hide()},setClampRect:function(e){n=e,m(t)},setRect:d,getInnerRect:function(){return l(n,t)},setInnerRect:p,setViewPortRect:function(n){e=n,m(t)},destroy:function(){dS.each(i,(function(t){t.destroy()})),i=[]}},v_);return h},O_=function(t){var e=hh({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=dn(1),r=dn(C.none()),i=dn({x:0,y:0,w:1,h:1}),a=dn({x:0,y:0,w:1,h:1}),u=function(t,n){l.getOpt(t).each((function(t){var a=o.get(),u=Da(t.element),c=ya(t.element),s=n.dom.naturalWidth*a,l=n.dom.naturalHeight*a,f=Math.max(0,u/2-s/2),m=Math.max(0,c/2-l/2),d={left:f.toString()+"px",top:m.toString()+"px",width:s.toString()+"px",height:l.toString()+"px",position:"absolute"};Ki(n,d),e.getOpt(t).each((function(t){Ki(t.element,d)})),r.get().each((function(t){var e=i.get();t.setRect({x:e.x*a+f,y:e.y*a+m,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:m,w:s,h:l}),t.setViewPortRect({x:0,y:0,w:u,h:c})}))}))},c=function(t,e){var n,r=hn.fromTag("img");return Yr(r,"src",e),n=r.dom,new Mh((function(t){var e=function e(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then((function(){return l.getOpt(t).map((function(t){var e=da({element:r});mp.replaceAt(t,1,C.some(e));var n=a.get(),c={x:0,y:0,w:r.dom.naturalWidth,h:r.dom.naturalHeight};a.set(c);var s,f,m=h_.inflate(c,-20,-20);return i.set(m),n.w===c.w&&n.h===c.h||(s=t,f=r,l.getOpt(s).each((function(t){var e=Da(t.element),n=ya(t.element),r=f.dom.naturalWidth,i=f.dom.naturalHeight,a=Math.min(e/r,n/i);1<=a?o.set(1):o.set(a)}))),u(t,r),r}))}))},s=Hy.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:ac([dp("image-panel-crop-events",[fr((function(t){l.getOpt(t).each((function(t){var e=t.element.dom,a=__({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,n);a.toggleVisibility(!1),a.on("updateRect",(function(t){var e=t.rect,n=o.get(),r={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};i.set(r)})),r.set(C.some(a))}))}))])])}],containerBehaviours:ac([mp.config({}),dp("image-panel-events",[fr((function(e){c(e,t)}))])])}),l=hh(s);return{memContainer:l,updateSrc:c,zoom:function(t,e){var n=o.get(),r=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);o.set(r),l.getOpt(t).each((function(t){var e=t.components()[1].element;u(t,e)}))},showCrop:function(){r.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){r.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return i.get()},getMeasurements:function(){var t=a.get();return{width:t.w,height:t.h}}}},D_=function(t,e,n,o,r){return XC({name:t,icon:C.some(e),disabled:n,tooltip:C.some(t),primary:!1,borderless:!1},o,r)},T_=function(t,e){e?hv.enable(t):hv.disable(t)},I_=function(t){var e,o,r,i,a=dn(t),u=dn(C.none()),c=(o=-1,{data:e=[],add:function(t){var n=e.splice(++o);return e.push(t),{state:t,removed:n}},undo:function(){if(r())return e[--o]},redo:function(){if(i())return e[++o]},canUndo:r=function(){return 0<o},canRedo:i=function(){return-1!==o&&o<e.length-1}});c.add(t);var s=function(t){a.set(t)},l=function(t){return{blob:t,url:URL.createObjectURL(t)}},f=function(t){URL.revokeObjectURL(t.url)},m=function(){u.get().each(f),u.set(C.none())},d=function(t){var e=l(t);s(e);var n,o=c.add(e).removed;return n=o,dS.each(n,f),e.url};return{getBlobState:function(){return a.get()},setBlobState:s,addBlobState:d,getTempState:function(){return u.get().fold((function(){return a.get()}),(function(t){return t}))},updateTempState:function(t){var e=l(t);return m(),u.set(C.some(e)),e.url},addTempState:function(t){var e=l(t);return u.set(C.some(e)),e.url},applyTempState:function(t){return u.get().fold(n,(function(e){d(e.blob),t()}))},destroyTempState:m,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}},E_=function(t,e){var o,r,i,a=I_(t.currentState),u=function(t){var e=a.getHistoryStates();g.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Ko(t,d_.formActionEvent,{name:d_.saveState(),value:e.undoEnabled})},c=function(t){return t.toBlob()},s=function(t){Ko(t,d_.formActionEvent,{name:d_.disable(),value:{}})},l=function(t){v.getApplyButton(t).each((function(t){hv.enable(t)})),Ko(t,d_.formActionEvent,{name:d_.enable(),value:{}})},f=function(t,e){return s(t),h.updateSrc(t,e)},m=function(t,e,n,o,r){return s(t),QS(e).then(n).then(c).then(o).then((function(e){return f(t,e).then((function(e){return u(t),r(),l(t),e}))}))["catch"]((function(e){return console.log(e),l(t),e}))},d=function(t,e,n){var o=a.getBlobState().blob;m(t,o,e,(function(t){return a.updateTempState(t)}),n)},p=function(t){var e=a.getBlobState().url;return a.destroyTempState(),u(t),e},h=O_(t.currentState.url),g=(r=hh(D_("Undo","undo",!0,(function(t){Ko(t,s_.undo(),{direction:1})}),o=e)),i=hh(D_("Redo","redo",!0,(function(t){Ko(t,s_.redo(),{direction:1})}),o)),{container:Hy.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[r.asSpec(),i.asSpec(),D_("Zoom in","zoom-in",!1,(function(t){Ko(t,s_.zoom(),{direction:1})}),o),D_("Zoom out","zoom-out",!1,(function(t){Ko(t,s_.zoom(),{direction:-1})}),o)]}),updateButtonUndoStates:function(t,e,n){r.getOpt(t).each((function(t){T_(t,e)})),i.getOpt(t).each((function(t){T_(t,n)}))}}),v=p_(h,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),h.memContainer.asSpec(),g.container],behaviours:ac([$l.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),dp("image-tools-events",[rr(s_.undo(),(function(t,e){var n=a.undo();f(t,n).then((function(e){l(t),u(t)}))})),rr(s_.redo(),(function(t,e){var n=a.redo();f(t,n).then((function(e){l(t),u(t)}))})),rr(s_.zoom(),(function(t,e){var n=e.event.direction;h.zoom(t,n)})),rr(s_.back(),(function(t,e){var n,o;o=p(n=t),f(n,o).then((function(t){l(n)})),(0,e.event.swap)(),h.hideCrop()})),rr(s_.apply(),(function(t,e){a.applyTempState((function(){p(t),(0,e.event.swap)()}))})),rr(s_.transform(),(function(t,e){return d(t,e.event.transform,n)})),rr(s_.tempTransform(),(function(t,e){return o=t,r=e.event.transform,i=a.getTempState().blob,void m(o,i,r,(function(t){return a.addTempState(t)}),n);var o,r,i})),rr(s_.transformApply(),(function(t,e){return n=t,o=e.event.transform,r=e.event.swap,i=a.getBlobState().blob,void m(n,i,o,(function(t){var e=a.addBlobState(t);return p(n),e}),r);var n,o,r,i})),rr(s_.swap(),(function(t,e){var n;n=t,g.updateButtonUndoStates(n,!1,!1);var o=e.event.transform,r=e.event.swap;o.fold((function(){r()}),(function(e){d(t,e,r)}))}))]),uS()])}},A_=function(t){return!Bt(t,"items")},R_="data-value",F_=function t(e,n,o,r){return J(o,(function(o){return A_(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===r,onAction:function(){$l.setValue(e,o.value),Ko(e,ex,{name:n}),bp.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:function(){return t(e,n,o.items,r)}}}))},M_=function t(e,n){return ct(e,(function(e){return A_(e)?qf(e.value===n,e):t(e.items,n)}))},P_=Xf({name:"HtmlSelect",configFields:[He("options"),Jl("selectBehaviours",[bp,$l]),nn("selectClasses",[]),nn("selectAttributes",{}),Ke("data")],factory:function(t,e){var n=J(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return Zt("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:Wl(t.selectBehaviours,[bp.config({}),$l.config({store:m({mode:"manual",getValue:function(t){return ra(t.element)},setValue:function(e,n){K(t.options,(function(t){return t.value===n})).isSome()&&ia(e.element,n)}},o)})])}}}),B_=function(t,e){var n=t.label.map((function(t){return tx(t,e)})),o=[hv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Jv(),up.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return Yo(t,ix),C.some(!0)}}),dp("textfield-change",[rr(vo(),(function(e,n){Ko(e,ex,{name:t.name})})),rr(Oo(),(function(e,n){Ko(e,ex,{name:t.name})}))]),Yy.config({})],i=t.validation.map((function(t){return Px.config({getRoot:function(t){return _r(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=$l.getValue(e),o=t.validator(n);return _x(!0===o?ft.value(n):ft.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),a=t.placeholder.fold(r({}),(function(t){return{placeholder:e.translate(t)}})),u=t.inputMode.fold(r({}),(function(t){return{inputmode:t}})),c=m(m({},a),u),s=Wy.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:ac(Z([o,i])),selectOnFocus:!1,factory:px}),l=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[hv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Wy.getField(t).each(hv.disable)},onEnabled:function(t){Wy.getField(t).each(hv.enable)}}),Jv()];return qy(n,s,l,f)},j_=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return er([rr(t.event,n),mr((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[rr(t,(function(){return e.cancel()}))]})).getOr([])))}}),z_=function(t){var e=dn(null);return ki({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},V_=Object.freeze({__proto__:null,throttle:z_,init:function(t){return t.stream.streams.state(t)}}),N_=[$e("stream",Re("mode",{throttle:[He("delay"),nn("stopEvent",!0),yu("streams",{setup:function(t,e){var n=t.stream,o=Sh(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:z_})]})),nn("event","input"),Ke("cancelEvent"),vu("onStream")],L_=cc({fields:N_,name:"streaming",active:j_,state:V_}),H_=function(t,e,n){var o=$l.getValue(n);$l.setValue(e,o),J_(e)},$_=function(t,e){var n=t.element,o=ra(n),r=n.dom;"number"!==Kr(n,"type")&&e(r,o)},J_=function(t){$_(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},U_=function(t,e,n){if(t.selectsOver){var o=$l.getValue(e),r=t.getDisplayText(o),i=$l.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?C.some((function(){var t,o;H_(0,e,n),t=e,o=r.length,$_(t,(function(t,e){return t.setSelectionRange(o,e.length)}))})):C.none()}return C.none()},W_=r("alloy.typeahead.itemexecute"),G_=r([Ke("lazySink"),He("fetch"),nn("minChars",5),nn("responseTime",1e3),hu("onOpen"),nn("getHotspot",C.some),nn("getAnchorOverrides",r({})),nn("layouts",C.none()),nn("eventOrder",{}),fn("model",{},[nn("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),nn("selectsOver",!0),nn("populateFromBrowse",!0)]),hu("onSetValue"),gu("onExecute"),hu("onItemExecute"),nn("inputClasses",[]),nn("inputAttributes",{}),nn("inputStyles",{}),nn("matchWidth",!0),nn("useMinWidth",!1),nn("dismissOnBlur",!0),du(["openClass"]),Ke("initialData"),Jl("typeaheadBehaviours",[bp,$l,L_,up,Ep,zx]),mn("previewing",(function(){return dn(!0)}))].concat(fx()).concat(nw())),X_=r([wf({schema:[mu()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){U_(t.model,o,n).fold((function(){return mm.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&H_(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return Ko(t,W_(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&H_(t.model,e,n)}))}}}})]),Y_=Yf({name:"Typeahead",configFields:G_(),partFields:X_(),factory:function(t,e,o,r){var i=function(e,o,i){t.previewing.set(!1);var a=zx.getCoupled(e,"sandbox");Sl.isOpen(a)?em.getCurrent(a).each((function(t){mm.getHighlighted(t).fold((function(){i(t)}),(function(){tr(a,t.element,"keydown",o)}))})):Xx(t,u(e),e,a,r,(function(t){em.getCurrent(t).each(i)}),vx.HighlightFirst).get(n)},a=mx(t),u=function(t){return function(e){return e.map((function(e){var n=Mt(e.menus),o=Q(n,(function(t){return G(t.items,(function(t){return"item"===t.type}))}));return $l.getState(t).update(J(o,(function(t){return t.data}))),e}))}},c=[bp.config({}),$l.config({onSetValue:t.onSetValue,store:m({mode:"dataset",getDataKey:function(t){return ra(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){ia(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return Zt("initialValue",t)})).getOr({}))}),L_.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,o){var i,a=zx.getCoupled(e,"sandbox");bp.isFocused(e)&&ra(e.element).length>=t.minChars&&(i=em.getCurrent(a).bind((function(t){return mm.getHighlighted(t).map($l.getValue)})),t.previewing.set(!0),Xx(t,u(e),e,a,r,(function(e){em.getCurrent(a).each((function(e){i.fold((function(){t.model.selectsOver&&mm.highlightFirst(e)}),(function(t){mm.highlightBy(e,(function(e){return $l.getValue(e).value===t.value})),mm.getHighlighted(e).orThunk((function(){return mm.highlightFirst(e),C.none()}))}))}))}),vx.HighlightFirst).get(n))},cancelEvent:Fo()}),up.config({mode:"special",onDown:function(t,e){return i(t,e,mm.highlightFirst),C.some(!0)},onEscape:function(t){var e=zx.getCoupled(t,"sandbox");return Sl.isOpen(e)?(Sl.close(e),C.some(!0)):C.none()},onUp:function(t,e){return i(t,e,mm.highlightLast),C.some(!0)},onEnter:function(e){var n=zx.getCoupled(e,"sandbox"),o=Sl.isOpen(n);if(o&&!t.previewing.get())return em.getCurrent(n).bind((function(t){return mm.getHighlighted(t)})).map((function(t){return Ko(e,W_(),{item:t}),!0}));var r=$l.getValue(e);return Yo(e,Fo()),t.onExecute(n,e,r),o&&Sl.close(n),C.some(!0)}}),Ep.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),zx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Ep.on(e)},onClose:function(){return Ep.off(e)}})}}}),dp("typeaheadevents",[pr((function(e){var o=n;Kx(t,u(e),e,r,o,vx.HighlightFirst).get(n)})),rr(W_(),(function(e,n){var o=zx.getCoupled(e,"sandbox");H_(t.model,e,n.event.item),Yo(e,Fo()),t.onItemExecute(e,o,n.event.item,$l.getValue(e)),Sl.close(o),J_(e)}))].concat(t.dismissOnBlur?[rr(_o(),(function(t){var e=zx.getCoupled(t,"sandbox");gc(e.element).isNone()&&Sl.close(e)}))]:[]))];return{uid:t.uid,dom:dx(Lt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:m(m({},a),Wl(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),K_=function t(e){return m(m({},e),{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return _x(ft.error(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(n,o){return t(Cx((function(t){var r=!1,i=setTimeout((function(){r=!0,t(ft.error(o()))}),n);e.get((function(e){r||(clearTimeout(i),t(e))}))})))}})},q_=function(t){return K_(Cx(t))},Z_=q_,Q_={type:"separator"},tO=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:n}},eO=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:n}},nO=function(t,e){return o=t,n=G(e,(function(t){return t.type===o})),J(n,tO);var n,o},oO=function(t,e){var n=t.toLowerCase();return G(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return Sn(e.toLowerCase(),n)||Sn(t.value.toLowerCase(),n)}))},rO=function(t,e,n){var o=$l.getValue(e),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var o,i,a,u,c=oO(r,(o=n.getHistory(t),J(o,(function(t){return eO(t,t)}))));return"file"===t?(i=[c,oO(r,nO("header",e.targets)),oO(r,Z([(u=e,C.from(u.anchorTop).map((function(t){return eO("<top>",t)})).toArray()),nO("anchor",e.targets),(a=e,C.from(a.anchorBottom).map((function(t){return eO("<bottom>",t)})).toArray())]))],Y(i,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(Q_,e)}),[])):c}))},iO=ii("aria-invalid"),aO=function(t,e,o){var r,i,a,u,c,s=e.shared.providers,l=function(e){var n=$l.getValue(e);o.addToHistory(n.value,t.filetype)},f=Wy.parts.field({factory:Y_,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":iO,type:"url"},minChars:0,responseTime:0,fetch:function(n){var r=rO(t.filetype,n,o),i=HC(r,ug.BUBBLE_TO_SANDBOX,e,!1);return _x(i)},getHotspot:function(t){return b.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Px)&&Px.run(t).get(n)},typeaheadBehaviours:ac(Z([o.getValidationHandler().map((function(e){return Px.config({getRoot:function(t){return _r(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){p.getOpt(t).each((function(t){Yr(t.element,"title",s.translate(e))}))}},validator:{validate:function(n){var o=$l.getValue(n);return Z_((function(n){e({type:t.filetype,url:o.value},(function(t){var e,o;"invalid"===t.status?(e=ft.error(t.message),n(e)):(o=ft.value(t.message),n(o))}))}))},validateOnLoad:!1}})})).toArray(),[hv.config({disabled:function(){return t.disabled||s.isDisabled()}}),Yy.config({}),dp("urlinput-events",Z(["file"===t.filetype?[rr(vo(),(function(e){Ko(e,ex,{name:t.name})}))]:[],[rr(bo(),(function(e){Ko(e,ex,{name:t.name}),l(e)})),rr(Oo(),(function(e){Ko(e,ex,{name:t.name}),l(e)}))]]))]])),eventOrder:((r={})[vo()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:kg(0,0,"normal")},onExecute:function(t,e,n){Ko(e,ix,{})},onItemExecute:function(e,n,o,r){l(e),Ko(e,ex,{name:t.name})}}),d=t.label.map((function(t){return tx(t,s)})),p=hh((i="invalid",a=C.some(iO),void 0===(u="warning")&&(u=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:vh(u,s.icons),attributes:m({title:s.translate(c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))}})),h=hh({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[p.asSpec()]}),g=o.getUrlPicker(t.filetype),v=ii("browser.url.event"),b=hh({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,h.asSpec()],behaviours:ac([hv.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),y=hh(KC({name:t.name,icon:C.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return Yo(t,v)}),s,[],["tox-browse-url"]));return Wy.sketch({dom:Qy([]),components:d.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Z([[b.asSpec()],g.map((function(){return y.asSpec()})).toArray()])}]),fieldBehaviours:ac([hv.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Wy.getField(t).each(hv.disable),y.getOpt(t).each(hv.disable)},onEnabled:function(t){Wy.getField(t).each(hv.enable),y.getOpt(t).each(hv.enable)}}),Jv(),dp("url-input-events",[rr(v,(function(e){em.getCurrent(e).each((function(n){var o=$l.getValue(n),r=m({fieldname:t.name},o);g.each((function(o){o(r).get((function(o){$l.setValue(n,o),Ko(e,ex,{name:t.name})}))}))}))}))])])})},uO=function(t){return function(e,n,o){return Pt(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}},cO={bar:uO((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:J(n.items,o.interpreter)};var n,o})),collection:uO((function(t,e){return lx(t,e.shared.providers)})),alertbanner:uO((function(t,e){return n=t,o=e.shared.providers,Hy.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[ph.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:vh(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){Ko(t,rx,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o})),input:uO((function(t,e){return n=t,o=e.shared.providers,B_({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:C.none(),maximized:n.maximized},o);var n,o})),textarea:uO((function(t,e){return n=t,o=e.shared.providers,B_({name:n.name,multiline:!0,label:n.label,inputMode:C.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:C.none(),maximized:n.maximized},o);var n,o})),label:uO((function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=J(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:ac([uS(),mp.config({}),yS(C.none()),up.config({mode:"acyclic"})])};var n,o,r,i})),iframe:(w_=function(t,e){return ES(t,e.shared.providers)},function(t,e,n){var o=Lt(e,{source:"dynamic"});return uO(w_)(t,o,n)}),button:uO((function(t,e){return QC(t,e.shared.providers)})),checkbox:uO((function(t,e){return n=t,o=e.shared.providers,r=$l.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),a=function(t){return t.element.dom.click(),C.some(!0)},u=Wy.parts.field({factory:{sketch:i},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ac([uS(),hv.config({disabled:function(){return n.disabled||o.isDisabled()}}),Yy.config({}),bp.config({}),r,up.config({mode:"special",onEnter:a,onSpace:a,stopSpaceKeyup:!0}),dp("checkbox-events",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),c=Wy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:ac([aw.config({})])}),l=hh({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(s=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:vh("checked"===t?"selected":"unselected",o.icons)}}})("checked"),s("unchecked")]}),Wy.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,l.asSpec(),c],fieldBehaviours:ac([hv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Wy.getField(t).each(hv.disable)},onEnabled:function(t){Wy.getField(t).each(hv.enable)}}),Jv()])});var n,o,r,a,u,c,s,l})),colorinput:uO((function(t,e){return lw(t,e.shared,e.colorinput)})),colorpicker:uO((function(t){var e=function(t){return"tox-"+t},n=aS(fS,e),o=hh(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:ac([$l.config({store:{mode:"manual",getValue:function(t){var e=o.get(t);return em.getCurrent(e).bind((function(t){return $l.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=o.get(t);em.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){$l.setValue(t,{hex:C.from(n[1]).getOr("")}),Qk.getField(t,"hex").each((function(t){Yo(t,vo())}))}))}}}),uS()])}})),dropzone:uO((function(t,e){return wS(t,e.shared.providers)})),grid:uO((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:J(n.items,o.interpreter)};var n,o})),listbox:uO((function(t,e){return o=t,a=(i=e).shared.providers,u=it(o.items).filter(A_),c=o.label.map((function(t){return tx(t,a)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Wy.parts.field({dom:{},factory:{sketch:function(t){return BC({uid:t.uid,text:u.map((function(t){return t.text})),icon:C.none(),tooltip:o.label,role:C.none(),fetch:function(t,e){var n=F_(t,o.name,o.items,$l.getValue(t));e(HC(n,ug.CLOSE_ON_EXECUTE,i,!1))},onSetup:r(n),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yy.config({}),$l.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return Kr(t.element,R_)},setValue:function(t,e){M_(o.items,e).each((function(e){Yr(t.element,R_,e.value),Ko(t,MC,{text:e.text})}))}}})]},"tox-listbox",i.shared)}}})]},Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Z([c.toArray(),[s]]),fieldBehaviours:ac([hv.config({disabled:r(o.disabled),onDisabled:function(t){Wy.getField(t).each(hv.disable)},onEnabled:function(t){Wy.getField(t).each(hv.enable)}})])});var o,i,a,u,c,s})),selectbox:uO((function(t,e){return n=t,o=e.shared.providers,r=J(n.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=n.label.map((function(t){return tx(t,o)})),a=Wy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:P_,selectBehaviours:ac([hv.config({disabled:function(){return n.disabled||o.isDisabled()}}),Yy.config({}),dp("selectbox-change",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),u=1<n.size?C.none():C.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:vh("chevron-down",o.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:Z([[a],u.toArray()])},Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Z([i.toArray(),[c]]),fieldBehaviours:ac([hv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Wy.getField(t).each(hv.disable)},onEnabled:function(t){Wy.getField(t).each(hv.enable)}}),Jv()])});var n,o,r,i,a,u,c})),sizeinput:uO((function(t,e){return c_(t,e.shared.providers)})),urlinput:uO((function(t,e){return aO(t,e,e.urlinput)})),customeditor:uO((function(t){var e=dn(C.none()),n=hh({dom:{tag:t.tag}}),o=dn(C.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ac([dp("custom-editor-events",[fr((function(r){n.getOpt(r).each((function(n){var r;r=t,(Object.prototype.hasOwnProperty.call(r,"init")?t.init(n.element.dom):mS.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)}))).then((function(t){o.get().each((function(e){t.setValue(e)})),o.set(C.none()),e.set(C.some(t))}))}))}))]),$l.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(C.some(n))}),(function(t){return t.setValue(n)}))}}}),uS()]),components:[n.asSpec()]}})),htmlpanel:uO((function(t){return"presentation"===t.presets?Hy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Hy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ac([Yy.config({}),bp.config({})])})})),imagetools:uO((function(t,e){return E_(t,e.shared.providers)})),table:uO((function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:J(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:J(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:J(r,c)})],behaviours:ac([Yy.config({}),bp.config({})])};var n,o,r,i,a,u,c})),panel:uO((function(t,e){return o=e,{dom:{tag:"div",classes:(n=t).classes},components:J(n.items,o.shared.interpreter)};var n,o}))},sO={field:function(t,e){return e}},lO=function(t,e,n){var o=Lt(n,{shared:{interpreter:function(e){return fO(t,e,o)}}});return fO(t,e,o)},fO=function(t,e,n){return Pt(cO,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},mO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dO=function(t,e,n){var o=Vc(-12,12,mO),r={maxHeightFunction:Mc()};return function(){return n()?{anchor:"node",root:Mr(t()),node:C.from(t()),bubble:o,layouts:{onRtl:function(){return[lh]},onLtr:function(){return[sh]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[Vu]},onLtr:function(){return[Nu]}},overrides:r}}},pO=function(t,e,n){return function(){return n()?{anchor:"node",root:Mr(t()),node:C.from(t()),layouts:{onRtl:function(){return[fh]},onLtr:function(){return[fh]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[Ju]},onLtr:function(){return[Ju]}}}}},hO=function(t,e,n){var o,r,i,a=Bv(t),u=function(){return hn.fromDom(t.getBody())},c=function(){return hn.fromDom(t.getContentAreaContainer())},s=function(){return a||!n()};return{inlineDialog:dO(c,e,s),banner:pO(c,e,s),cursor:(r=t,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return C.some(hs.range(hn.fromDom(t.startContainer),t.startOffset,hn.fromDom(t.endContainer),t.endOffset))}}}),node:(o=i=u,function(t){return{anchor:"node",root:o(),node:t}})}},gO=function(t){return{colorPicker:function(t,e){Qb(r)(t,e)},hasCustomColors:function(){return Hb(o)},getColors:function(){return $b(n)},getColorCols:(e=n=o=r=t,function(){return Wb(e)})};var e,n,o,r},vO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],bO=function t(e){return Y(e,(function(e,n){if(Bt(n,"items")){var o=t(n.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:n.title,items:o.formats}])}}if(Bt(n,"inline")||Bt(n,"block")||Bt(n,"selector")){var r="custom-"+(D(n.name)?n.name:n.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:n}]),formats:e.formats.concat([{title:n.title,format:r,icon:n.icon}])}}return m(m({},e),{formats:e.formats.concat(n)})}),{customFormats:[],formats:[]})},yO=function(t){return e=t,C.from(e.getParam("style_formats")).filter(I).map((function(e){var n,o,r,i=(n=t,o=bO(e),r=function(t){U(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))},n.formatter?r(o.customFormats):n.on("init",(function(){r(o.customFormats)})),o.formats);return t.getParam("style_formats_merge",!1,"boolean")?vO.concat(i):i})).getOr(vO);var e},xO=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Lt(t,o)},wO=function(t,e,n,o){var r=function e(r){return J(r,(function(r){var i,a,u,c,s,l=Ot(r);if(jt(r,"items")){var f=e(r.items);return Lt(Lt(r,{type:"submenu"}),{getStyleItems:function(){return f}})}return jt(r,"format")?xO(r,n,o):1===l.length&&N(l,"title")?Lt(r,{type:"separator"}):(a=D((i=r).name)?i.name:ii(i.title),c={type:"formatter",format:u="custom-"+a,isSelected:n(u),getStylePreview:o(u)},s=Lt(i,c),t.formatter.register(a,s),s)}))};return r(e)},kO=dS.trim,SO=function(t){return function(e){if(R(n=e)&&1===n.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}var n;return!1}},CO=SO("true"),_O=SO("false"),OO=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},DO=function(t){return t.innerText||t.textContent},TO=function(t){return(e=t)&&"A"===e.nodeName&&void 0!==(e.id||e.name)&&EO(t);var e},IO=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},EO=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return CO(t)}return!1}(t)&&!_O(t)},AO=function(t){return IO(t)&&EO(t)},RO=function(t){var e,n,o=(e=t).id?e.id:ii("h");return OO("header",DO(t),"#"+o,IO(n=t)?parseInt(n.nodeName.substr(1),10):0,(function(){t.id=o}))},FO=function(t){var e=t.id||t.name,o=DO(t);return OO("anchor",o||"#"+e,"#"+e,0,n)},MO=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,J(Ds(hn.fromDom(n),e),(function(t){return t.dom}))},PO=function(t){return 0<kO(t.title).length},BO=function(t){var e=MO(t);return G(J(G(e,AO),RO).concat(J(G(e,TO),FO)),PO)},jO="tinymce-url-history",zO=function(t){return D(t)&&/^https?/.test(t)},VO=function(t){return T(t)&&Ft(t,(function(t){return!(I(e=t)&&e.length<=5&&tt(e,zO));var e})).isNone()},NO=function(){var t,e=jb.getItem(jO);if(null===e)return{};try{t=JSON.parse(e)}catch(g){if(g instanceof SyntaxError)return console.log("Local storage "+jO+" was not valid JSON",g),{};throw g}return VO(t)?t:(console.log("Local storage "+jO+" was not valid format",t),{})},LO=function(t){var e=NO();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},HO=function(t,e){var n,o,r;zO(t)&&(n=NO(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=G(o,(function(e){return e!==t})),n[e]=[t].concat(r).slice(0,5),function(t){if(!VO(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));jb.setItem(jO,JSON.stringify(t))}(n))},$O=function(t){return!!t},JO=function(t){return It(dS.makeMap(t,/[, ]/),$O)},UO=function(t){return C.from(t.getParam("file_picker_callback")).filter(F)},WO=function(t,e){var n,o,r,i,a=(n=t,o=C.some(n.getParam("file_picker_types")).filter($O),r=C.some(n.getParam("file_browser_callback_types")).filter($O),i=o.or(r).map(JO),UO(n).fold(s,(function(t){return i.fold(l,(function(t){return 0<Ot(t).length&&t}))})));return E(a)?a?UO(t):C.none():a[e]?UO(t):C.none()},GO=function(t){return C.from(t).filter(D).getOrUndefined()},XO=function(t){return C.from(void 0===(n=(e=t).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):n);var e,n},YO=function(t){return{getHistory:LO,addToHistory:HO,getLinkInformation:function(){return!1===(e=t).getParam("typeahead_urls")?C.none():C.some({targets:BO(e.getBody()),anchorTop:GO(e.getParam("anchor_top","#top")),anchorBottom:GO(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return XO(t)},getUrlPicker:function(e){return WO(n=t,o=e).map((function(t){return function(e){return Cx((function(r){var i=m({filetype:o,fieldname:e.fieldname},C.from(e.meta).getOr({}));t.call(n,(function(t,e){if(!D(t))throw new Error("Expected value to be string");if(void 0!==e&&!T(e))throw new Error("Expected meta to be a object");r({value:t,meta:e})}),e.value,i)}))}}));var n,o}}},KO=function(t,e,n){var o,r,i=dn(!1),a={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=dn(Mv(e)?"bottom":"top")).get,setDockingMode:o.set},u={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:ev.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return fO(sO,t,u)},anchors:hO(e,n,a.isPositionedAtTop),header:a,getSink:function(){return ft.value(t)}},urlinput:YO(e),styleselect:function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?C.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):C.none()}},o=function t(e){var n=e.items;return void 0!==n&&0<n.length?Q(n,t):[e.format]},r=dn([]),i=dn([]),a=dn([]),u=dn([]),c=dn(!1);return t.on("PreInit",(function(a){var u=yO(t),c=wO(t,u,e,n);r.set(c),i.set(Q(c,o))})),t.on("addStyleModifications",(function(r){var i=wO(t,r.items,e,n);a.set(i),c.set(r.replace),u.set(Q(i,o))})),{getData:function(){var t=c.get()?[]:r.get(),e=a.get();return t.concat(e)},getFlattenedKeys:function(){var t=c.get()?[]:i.get(),e=u.get();return t.concat(e)}}}(e),colorinput:gO(e),dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return u},qO=r((function(t,e){var n,o,r;n=t,o=Math.floor(e),r=Oa.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),Yi(n,"max-width",r+"px")})),ZO="contexttoolbar-hide",QO=r([He("dom"),nn("shell",!0),Jl("toolbarBehaviours",[mp])]),tD=r([kf({name:"groups",overrides:function(){return{behaviours:ac([mp.config({})])}}})]),eD=Yf({name:"Toolbar",configFields:QO(),partFields:tD(),factory:function(t,e,n,o){var r=function(e){return t.shell?C.some(e):Mf(e,t,"groups")},i=t.shell?{behaviours:[mp.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Wl(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){mp.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),nD=function(t,e,n){return{within:t,extra:e,withinWidth:n}},oD=function(t,e,n){var o,i=(o=function(t,e){var o=n(t);return C.some({element:t,start:e,finish:e+o,width:o})},Y(t,(function(t,e){return o(e,t.len).fold(r(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]}).list),a=G(i,(function(t){return t.finish<=e})),u=X(a,(function(t,e){return t+e.width}),0);return{within:a,extra:i.slice(a.length),withinWidth:u}},rD=function(t){return J(t,(function(t){return t.element}))},iD=function(t,e,n,o){var r,i,a,u,c,s,l,f,m,d=(0===(r=oD(e,t,n)).extra.length?C.some(r):C.none()).getOrThunk((function(){return oD(e,t-n(o),n)})),p=d.within,h=d.extra,g=d.withinWidth;return 1===h.length&&h[0].width<=n(o)?(l=h,f=g,m=rD(p.concat(l)),nD(m,[],f)):1<=h.length?(a=h,u=o,c=g,s=rD(p).concat([u]),nD(s,rD(a),c)):(i=g,nD(rD(p),[],i))},aD=function(t,e){var n=J(e,(function(t){return ga(t)}));eD.setGroups(t,n)},uD=function(t,e,n){var o=Pf(t,e,"primary"),r=zx.getCoupled(t,"overflowGroup");Yi(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),a=ct(i,(function(t){return gc(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}));n([]),aD(o,i);var u=Da(o.element),c=iD(u,e.builtGroups.get(),(function(t){return Da(t.element)}),r);0===c.extra.length?(mp.remove(o,r),n([])):(aD(o,c.within),n(c.extra)),na(o.element,"visibility"),oa(o.element),a.each(bp.focus)},cD=r([Jl("splitToolbarBehaviours",[zx]),mn("builtGroups",(function(){return dn([])}))]),sD=r([du(["overflowToggledClass"]),tn("getOverflowBounds"),He("lazySink"),mn("overflowGroups",(function(){return dn([])}))].concat(cD())),lD=r([xf({factory:eD,schema:QO(),name:"primary"}),wf({schema:QO(),name:"overflow"}),wf({name:"overflow-button"}),wf({name:"overflow-group"})]),fD=r([du(["toggledClass"]),He("lazySink"),We("fetch"),tn("getBounds"),en("fireDismissalEventInstead",[nn("event",Lo())]),Kc()]),mD=r([wf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ac([Ep.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),wf({factory:eD,schema:QO(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:ac([up.config({mode:"cyclic",onEscape:function(e){return Mf(e,t,"button").each(bp.focus),C.none()}})])}}})]),dD=function(t,e){var n=zx.getCoupled(t,"toolbarSandbox");Sl.isOpen(n)?Sl.close(n):Sl.open(n,e.toolbar())},pD=function(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();el.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:qO()}},e,r)},hD=function(t,e,n,o,r){eD.setGroups(e,r),pD(t,e,n,o),Ep.on(t)},gD=Yf({name:"FloatingToolbarButton",factory:function(t,e,n,o){return m(m({},ph.sketch(m(m({},o.button()),{action:function(t){dD(t,o)},buttonBehaviours:Xl({dump:o.button().buttonBehaviours},[zx.config({others:{toolbarSandbox:function(e){return o=e,r=n,i=t,{dom:{tag:"div",attributes:{id:(a=Za()).id}},behaviours:ac([up.config({mode:"special",onEscape:function(t){return Sl.close(t),C.some(!0)}}),Sl.config({onOpen:function(t,e){i.fetch().get((function(t){hD(o,e,i,r.layouts,t),a.link(o.element),up.focusIn(e)}))},onClose:function(){Ep.off(o),bp.focus(o),a.unlink(o.element)},isPartOf:function(t,e,n){return tu(e,n)||tu(o,n)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),mc.config({channels:m(m({},Tl(m({isExtraPart:s},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),El({doReposition:function(){Sl.getState(zx.getCoupled(o,"toolbarSandbox")).each((function(t){pD(o,t,i,r.layouts)}))}}))})])};var o,r,i,a}}})])}))),{apis:{setGroups:function(e,o){Sl.getState(zx.getCoupled(e,"toolbarSandbox")).each((function(r){hD(e,r,t,n.layouts,o)}))},reposition:function(e){Sl.getState(zx.getCoupled(e,"toolbarSandbox")).each((function(o){pD(e,o,t,n.layouts)}))},toggle:function(t){dD(t,o)},getToolbar:function(t){return Sl.getState(zx.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return Sl.isOpen(zx.getCoupled(t,"toolbarSandbox"))}}})},configFields:fD(),partFields:mD(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),vD=r([He("items"),du(["itemSelector"]),Jl("tgroupBehaviours",[up])]),bD=r([Sf({name:"items",unit:"item"})]),yD=Yf({name:"ToolbarGroup",configFields:vD(),partFields:bD(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.tgroupBehaviours,[up.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),xD=function(t){return J(t,(function(t){return ga(t)}))},wD=function(t,e,n){uD(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){gD.setGroups(t,xD(o))}))}))},kD=Yf({name:"SplitFloatingToolbar",configFields:sD(),partFields:lD(),factory:function(t,e,n,o){var r=hh(gD.sketch({fetch:function(){return Cx((function(e){e(xD(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[Nu,Vu]},onRtl:function(){return[Vu,Nu]},onBottomLtr:function(){return[Hu,Lu]},onBottomRtl:function(){return[Lu,Hu]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.splitToolbarBehaviours,[zx.config({others:{overflowGroup:function(){return yD.sketch(m(m({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(J(n,e.getSystem().build)),wD(e,r,t)},refresh:function(e){return wD(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){gD.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(gD.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){gD.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(gD.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),SD=function(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))},CD=function(t){return t.dimension.property},_D=function(t,e){return t.dimension.getDimension(e)},OD=function(t,e){var n=SD(t,e);Hi(n,[e.shrinkingClass,e.growingClass])},DD=function(t,e){Vi(t.element,e.openClass),ji(t.element,e.closedClass),Yi(t.element,CD(e),"0px"),oa(t.element)},TD=function(t,e){Vi(t.element,e.closedClass),ji(t.element,e.openClass),na(t.element,CD(e))},ID=function(t,e,n,o){n.setCollapsed(),Yi(t.element,CD(e),_D(e,t.element)),oa(t.element),OD(t,e),DD(t,e),e.onStartShrink(t),e.onShrunk(t)},ED=function(t,e,n,o){var r=o.getOrThunk((function(){return _D(e,t.element)}));n.setCollapsed(),Yi(t.element,CD(e),r),oa(t.element);var i=SD(t,e);Vi(i,e.growingClass),ji(i,e.shrinkingClass),DD(t,e),e.onStartShrink(t)},AD=function(t,e,n){var o=_D(e,t.element);("0px"===o?ID:ED)(t,e,n,C.some(o))},RD=function(t,e,n){var o=SD(t,e),r=Ni(o,e.shrinkingClass),i=_D(e,t.element);TD(t,e);var a=_D(e,t.element);(r?function(){Yi(t.element,CD(e),i),oa(t.element)}:function(){DD(t,e)})(),Vi(o,e.shrinkingClass),ji(o,e.growingClass),TD(t,e),Yi(t.element,CD(e),a),n.setExpanded(),e.onStartGrow(t)},FD=function(t,e,n){var o=SD(t,e);return!0===Ni(o,e.growingClass)},MD=function(t,e,n){var o=SD(t,e);return!0===Ni(o,e.shrinkingClass)},PD=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(na(t.element,CD(e)),o=_D(e,t.element),Yi(t.element,CD(e),o))},grow:function(t,e,n){n.isExpanded()||RD(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&AD(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&ID(t,e,n,C.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:FD,isShrinking:MD,isTransitioning:function(t,e,n){return FD(t,e)||MD(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?AD:RD)(t,e,n)},disableTransitions:OD}),BD=Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return Ci(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Zt(e.dimension.property,"0px")})},events:function(t,e){return er([lr(xo(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(OD(n,t),e.isExpanded()&&na(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),jD=[He("closedClass"),He("openClass"),He("shrinkingClass"),He("growingClass"),Ke("getAnimationRoot"),hu("onShrunk"),hu("onStartShrink"),hu("onGrown"),hu("onStartGrow"),nn("expanded",!1),$e("dimension",Re("property",{width:[yu("property","width"),yu("getDimension",(function(t){return Da(t)+"px"}))],height:[yu("property","height"),yu("getDimension",(function(t){return ya(t)+"px"}))]}))],zD=cc({fields:jD,name:"sliding",active:BD,apis:PD,state:Object.freeze({__proto__:null,init:function(t){var e=dn(t.expanded);return ki({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:a(e.set,!1),setExpanded:a(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),VD=r([du(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),hu("onOpened"),hu("onClosed")].concat(cD())),ND=r([xf({factory:eD,schema:QO(),name:"primary"}),xf({factory:eD,schema:QO(),name:"overflow",overrides:function(t){return{toolbarBehaviours:ac([zD.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Mf(e,t,"overflow-button").each((function(t){Ep.off(t),bp.focus(t)})),t.onClosed(e)},onGrown:function(e){up.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Mf(e,t,"overflow-button").each(Ep.on)}}),up.config({mode:"acyclic",onEscape:function(e){return Mf(e,t,"overflow-button").each(bp.focus),C.some(!0)}})])}}}),wf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:ac([Ep.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),wf({name:"overflow-group"})]),LD=function(t,e){Mf(t,e,"overflow-button").bind((function(){return Mf(t,e,"overflow")})).each((function(n){HD(t,e),zD.toggleGrow(n)}))},HD=function(t,e){Mf(t,e,"overflow").each((function(n){uD(t,e,(function(t){var e=J(t,(function(t){return ga(t)}));eD.setGroups(n,e)})),Mf(t,e,"overflow-button").each((function(t){zD.hasGrown(n)&&Ep.on(t)})),zD.refresh(n)}))},$D=Yf({name:"SplitSlidingToolbar",configFields:VD(),partFields:ND(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.splitToolbarBehaviours,[zx.config({others:{overflowGroup:function(t){return yD.sketch(m(m({},o["overflow-group"]()),{items:[ph.sketch(m(m({},o["overflow-button"]()),{action:function(e){Yo(t,r)}}))]}))}}}),dp("toolbar-toggle-events",[rr(r,(function(e){LD(e,t)}))])]),apis:{setGroups:function(e,n){var o;o=J(n,e.getSystem().build),t.builtGroups.set(o),HD(e,t)},refresh:function(e){return HD(e,t)},toggle:function(e){return LD(e,t)},isOpen:function(e){return Mf(e,t,"overflow").map(zD.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),JD=r(ii("toolbar-height-change")),UD=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:m({tag:"div",classes:["tox-toolbar__group"]},e),components:[yD.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ac([Yy.config({}),bp.config({})])}},WD=function(t){return yD.sketch(UD(t))},GD=function(t,e){var n=fr((function(e){var n=J(t.initGroups,WD);eD.setGroups(e,n)}));return ac([Xv(t.providers.isDisabled),Jv(),up.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),dp("toolbar-events",[n])])},XD=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":UD({title:C.none(),items:[]}),"overflow-button":GC({name:"more",icon:C.some("more-drawer"),disabled:!1,tooltip:C.some("More..."),primary:!1,borderless:!1},C.none(),t.providers)},splitToolbarBehaviours:GD(t,e)}},YD=function(t){var e=XD(t),n=kD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return kD.sketch(m(m({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=La(e),o=Sr(e),r=La(o),i=Math.max(o.dom.scrollHeight,r.height);return Va(n.x+4,r.y,n.width-8,i)},parts:m(m({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},KD=function(t){var e=$D.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=$D.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=XD(t);return $D.sketch(m(m({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([JD()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([JD()],{type:"closed"})}}))},qD=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return eD.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ig.scrolling?["tox-toolbar--scrolling"]:[])},components:[eD.parts.groups({})],toolbarBehaviours:GD(t,e)})},ZD=me([Je("type"),$e("items",pe([Se([Je("name"),Ye("items",Be)]),Be]))].concat(Jh)),QD=[Qe("text"),Qe("tooltip"),Qe("icon"),We("fetch"),sn("onSetup",(function(){return n}))],tT=me(p([Je("type")],QD)),eT=function(t){return De("menubutton",tT,t)},nT=me([Je("type"),Qe("tooltip"),Qe("icon"),Qe("text"),tn("select"),We("fetch"),sn("onSetup",(function(){return n})),un("presets","normal",["normal","color","listpreview"]),nn("columns",1),We("onAction"),We("onItemAction")]),oT=Object.freeze({__proto__:null,events:function(t,e){var n=function(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=t(o,e.get()),i=J(r,n.getSystem().build);il(n,i)}))};return er([rr(Do(),(function(e,o){var r,i=o;i.universal||(r=t.channel,N(i.channels,r)&&n(e,i.data))})),fr((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),rT=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),iT=[He("channel"),Ke("renderComponents"),Ke("updateState"),Ke("initialData")],aT=cc({fields:iT,name:"reflecting",active:oT,apis:rT,state:Object.freeze({__proto__:null,init:function(){var t=dn(C.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(C.none())}}}})}),uT=r([He("toggleClass"),He("fetch"),vu("onExecute"),nn("getHotspot",C.some),nn("getAnchorOverrides",r({})),Kc(),vu("onItemExecute"),Ke("lazySink"),He("dom"),hu("onOpen"),Jl("splitDropdownBehaviours",[zx,up,bp]),nn("matchWidth",!1),nn("useMinWidth",!1),nn("eventOrder",{}),Ke("role")].concat(nw())),cT=xf({factory:ph,schema:[He("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:ac([bp.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(qo)},buttonBehaviours:ac([Ep.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),sT=xf({factory:ph,schema:[He("dom")],name:"button",defaults:function(){return{buttonBehaviours:ac([bp.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),lT=r([cT,sT,kf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[He("text")],name:"aria-descriptor"}),wf({schema:[mu()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),Nx()]),fT=Yf({name:"SplitDropdown",configFields:uT(),partFields:lT(),factory:function(t,e,o,r){var i,a=function(t){em.getCurrent(t).each((function(t){mm.highlightFirst(t),up.focusIn(t)}))},u=function(e){Kx(t,(function(t){return t}),e,r,a,vx.HighlightFirst).get(n)},c=function(e){var n=Pf(e,t,"button");return qo(n),C.some(!0)},s=m(m({},er([fr((function(e,n){Mf(e,t,"aria-descriptor").each((function(t){var n=ii("aria");Yr(t.element,"id",n),Yr(e.element,"aria-describedby",n)}))}))])),Rp(C.some(u))),l={repositionMenus:function(t){Ep.isOn(t)&&ew(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:l,eventOrder:m(m({},t.eventOrder),((i={})[To()]=["disabling","toggling","alloy.base.behaviour"],i)),events:s,behaviours:Wl(t.splitDropdownBehaviours,[zx.config({others:{sandbox:function(e){var n=Pf(e,t,"arrow");return tw(t,e,{onOpen:function(){Ep.on(n),Ep.on(e)},onClose:function(){Ep.off(n),Ep.off(e)}})}}}),up.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t){return u(t),C.some(!0)}}),bp.config({}),Ep.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),mT=function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},dT=function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)}}},pT=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},hT=ii("focus-button"),gT=["checklist","ordered-list"],vT=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],bT=function(t,e,n,o,r,i){var a,u=function(t){return ev.isRtl()&&N(gT,t)?t+"-rtl":t},c=ev.isRtl()&&t.exists((function(t){return N(vT,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:pT(n,i)},components:Qv([t.map((function(t){return IC(u(t),i.icons)})),e.map((function(t){return AC(t,"tox-tbtn",i)}))]),eventOrder:((a={})[uo()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:ac([Xv(i.isDisabled),Jv(),dp("common-button-display-events",[rr(uo(),(function(t,e){e.event.prevent(),Yo(t,hT)}))])].concat(o.map((function(n){return aT.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return Qv([t.icon.map((function(t){return IC(u(t),i.icons)})),t.text.map((function(t){return AC(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}},yT=function(t,e,o){var r,i=dn(n),a=bT(t.icon,t.text,t.tooltip,C.none(),C.none(),o);return ph.sketch({dom:a.dom,components:a.components,eventOrder:FC,buttonBehaviours:ac([dp("toolbar-button-events",[(r={onAction:t.onAction,getApi:e.getApi},pr((function(t,e){Yv(r,t)((function(e){Ko(t,RC,{buttonApi:e}),r.onAction(e)}))}))),Kv(e,i),qv(e,i)]),Xv((function(){return t.disabled||o.isDisabled()})),Jv()].concat(e.toolbarButtonBehaviours))})},xT=function(t,e,n){return yT(t,{toolbarButtonBehaviours:[].concat(0<n.length?[dp("toolbarButtonWith",n)]:[]),getApi:mT,onSetup:t.onSetup},e)},wT=function(t,e,n){return Lt(yT(t,{toolbarButtonBehaviours:[mp.config({}),Ep.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[dp("toolbarToggleButtonWith",n)]:[]),getApi:dT,onSetup:t.onSetup},e))},kT=function(t,e){var o,r,i,a,u=ii("channel-update-split-dropdown-display"),c=function(t){return{isDisabled:function(){return hv.isDisabled(t)},setDisabled:function(e){return hv.set(t,e)},setIconFill:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Yr(t,"fill",n)}))},setIconStroke:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Yr(t,"stroke",n)}))},setActive:function(e){Yr(t.element,"aria-pressed",e),Ka(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Ep.set(t,e)}))}))},isActive:function(){return Ka(t.element,"span").exists((function(e){return t.getSystem().getByDom(e).exists(Ep.isOn)}))}}},l=dn(n),f={getApi:c,onSetup:t.onSetup};return fT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:m({"aria-pressed":!1},pT(t.tooltip,e.providers))},onExecute:function(e){t.onAction(c(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:ac([Gv(e.providers.isDisabled),Jv(),dp("split-dropdown-events",[rr(hT,bp.focus),Kv(f,l),qv(f,l)]),aw.config({})]),eventOrder:((o={})[Vo()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:(r=c,i=t,a=e.providers,function(t){return Cx((function(t){return i.fetch(t)})).map((function(e){return C.from(wy(Lt(ty(ii("menu-value"),e,(function(e){i.onItemAction(r(t),e)}),i.columns,i.presets,ug.CLOSE_ON_EXECUTE,i.select.getOr(s),a),{movement:ny(i.columns,i.presets),menuBehaviours:Ug("auto"!==i.columns?[]:[fr((function(t,e){$g(t,4,bg(i.presets)).each((function(e){var n=e.numRows,o=e.numColumns;up.setGridSize(t,n,o)}))}))])})))}))}),parts:{menu:kg(0,t.columns,t.presets)},components:[fT.parts.button(bT(t.icon,t.text,C.none(),C.some(u),C.some([Ep.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),fT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:vh("chevron-down",e.providers.icons)},buttonBehaviours:ac([Gv(e.providers.isDisabled),Jv()])}),fT.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},ST=function(t,e){return rr(RC,(function(n,o){var r,i=t.get(n),a=(r=i,{hide:function(){return Yo(r,Ro())},getValue:function(){return $l.getValue(r)}});e.onAction(a,o.event.buttonApi)}))},CT=function(t,e,o){var r,i,a,u,c,s,l,f,p,h,g,v,b={backstage:{shared:{providers:o}}};return"contextformtogglebutton"===e.type?(l=t,p=b,(h=(f=e).original).primary,g=d(h,["primary"]),v=Te(Yh(m(m({},g),{type:"togglebutton",onAction:n}))),wT(v,p.backstage.shared.providers,[ST(l,f)])):(r=t,a=b,(u=(i=e).original).primary,c=d(u,["primary"]),s=Te(Wh(m(m({},c),{type:"button",onAction:n}))),xT(s,a.backstage.shared.providers,[ST(r,i)]))},_T=function(t,e){var n,o,r,i,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=hh(px.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ac([up.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return qo(t),!0}))},onLeft:function(t,e){return e.cut(),C.none()},onRight:function(t,e){return e.cut(),C.none()}})])})),s=(n=c,o=t.commands,r=e,i=J(o,(function(t){return hh(CT(n,t,r))})),{asSpecs:function(){return J(i,(function(t){return t.asSpec()}))},findPrimary:function(t){return ct(o,(function(e,n){return e.primary?C.from(i[n]).bind((function(e){return e.getOpt(t)})).filter(u(hv.isDisabled)):C.none()}))}});return[{title:C.none(),items:[c.asSpec()]},{title:C.none(),items:s.asSpecs()}]},OT=_T,DT=function(t,e){var n,o,r,i,a,u=Pa(window),c=Na(hn.fromDom(t.getContentAreaContainer())),s=Sv(t)||Cv(t)||Ov(t),l=(n=c,o=u,r=Math.max(o.x,n.x),i=n.right-r,a=o.width-(r-o.x),{x:r,width:Math.min(i,a)}),f=l.x,m=l.width;if(t.inline&&!s)return Va(f,u.y,m,u.height);var d=function(t,e,n,o){var r=hn.fromDom(t.getContainer()),i=Ka(r,".tox-editor-header").getOr(r),a=Na(i),u=a.y>=e.bottom,c=o&&!u;if(t.inline&&c)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var s=Na(r);return c?{y:Math.max(a.bottom,n.y),bottom:Math.min(s.bottom,n.bottom)}:{y:Math.max(s.y,n.y),bottom:Math.min(a.y,n.bottom)}}(t,c,u,e.header.isPositionedAtTop()),p=d.y,h=d.bottom;return Va(f,p,m,h-p)},TT=function(t,e){var n=G(e,(function(e){return e.predicate(t.dom)})),o=W(n,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},IT=function(t,e,n){var o=TT(t,e);if(0<o.contextForms.length)return C.some({elem:t,toolbars:[o.contextForms[0]]});var r=TT(t,n);if(0<r.contextForms.length)return C.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;var e=function(e){return L(t,(function(t){return t.position===e}))},n=function(e){return G(t,(function(t){return t.position===e}))},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),a=J(n("selection"),(function(t){return m(m({},t),{position:"node"})}));return i.concat(a)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return C.some({elem:t,toolbars:i})}return C.none()},ET=function(t,e,n){return t(e)?C.none():qn(e,(function(t){var e=TT(t,n.inNodeScope),o=e.contextToolbars,r=e.contextForms,i=0<r.length?r:function(t){if(t.length<=1)return t;var e=function(e){return K(t,(function(t){return t.position===e}))};return e("selection").orThunk((function(){return e("node")})).orThunk((function(){return e("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(e){return G(t,(function(t){return t.position===e}))}))}(o);return 0<i.length?C.some({elem:t,toolbars:i}):C.none()}),t)},AT=function(t,e){var n={},o=[],r=[],i={},a={},u=function(t,u){var c=Te(De("ContextForm",ng,u));(n[t]=c).launch.map((function(n){i["form:"+t]=m(m({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(c)}})})),"editor"===c.scope?r.push(c):o.push(c),a[t]=c},c=function(t,e){De("ContextToolbar",og,e).each((function(n){"editor"===e.scope?r.push(n):o.push(n),a[t]=n}))},s=Ot(t);return U(s,(function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&c(e,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:a,formNavigators:i}},RT=ii("forward-slide"),FT=ii("backward-slide"),MT=ii("change-slide-event"),PT="tox-pop--resizing",BT=function(t,e,n){var o,r,i,a,u,c=n.dataset,s="basic"===c.type?function(){return J(c.data,(function(t){return xO(t,n.isSelectedFor,n.getPreviewFor)}))}:c.getData;return{items:(o=e,r=n,i=function(t,e,n,i){var u=o.shared.providers.translate(t.title);if("separator"===t.type)return C.some({type:"separator",text:u});if("submenu"!==t.type)return C.some(m({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(i),disabled:n,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))));var c=Q(t.getStyleItems(),(function(t){return a(t,e,i)}));return 0===e&&c.length<=0?C.none():C.some({type:"nestedmenuitem",text:u,disabled:c.length<=0,getSubmenuItems:function(){return Q(t.getStyleItems(),(function(t){return a(t,e,i)}))}})},a=function(t,e,n){var o="formatter"===t.type&&r.isInvalid(t);return 0===e?o?[]:i(t,e,!1,n).toArray():i(t,e,o,n).toArray()},{validateItems:u=function(t){var e=r.getCurrentValue(),n=r.shouldHide?0:1;return Q(t,(function(t){return a(t,n,e)}))},getFetch:function(t,e){return function(n,o){var r=e(),i=u(r);o(HC(i,ug.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:s}},jT=function(t,e,o){var r=BT(0,e,o),i=r.items,a=r.getStyleItems;return BC({text:o.icon.isSome()?C.none():C.some(""),icon:o.icon,tooltip:C.from(o.tooltip),role:C.none(),fetch:i.getFetch(e,a),onSetup:function(e){return o.setInitialValue.each((function(t){return t(e.getComponent())})),o.nodeChangeHandler.map((function(n){var o=n(e.getComponent());return t.on("NodeChange",o),function(){t.off("NodeChange",o)}})).getOr(n)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};(S_=k_=k_||{})[S_.SemiColon=0]="SemiColon",S_[S_.Space=1]="Space";var zT,VT,NT,LT,HT,$T,JT=function(t,e,n,o){var r,i,a=t.getParam(e,n,"string");return{type:"basic",data:(i=a,r=o===k_.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),J(r,(function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}})))}},UT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],WT=function(t){var e=function(e){var n=K(UT,(function(e){return t.formatter.match(e.format)})).fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));Ko(e,PC,{icon:"align-"+n})},n=C.some((function(t){return function(){return e(t)}})),o=C.some(e),r={type:"basic",data:UT};return{tooltip:"Align",icon:C.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:C.none,getPreviewFor:function(t){return function(){return C.none()}},onAction:function(e){return function(){return K(UT,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},GT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],XT=function(t){var e=t.split(/\s*,\s*/);return J(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},YT=function(t){var e;return 0===t.indexOf("-apple-system")&&(e=XT(t.toLowerCase()),tt(GT,(function(t){return-1<e.indexOf(t.toLowerCase())})))},KT=function(t){var e=function(){var e=function(t){return t?XT(t)[0]:""},n=t.queryCommandValue("FontName"),o=i.data,r=n?n.toLowerCase():"";return{matchOpt:K(o,(function(t){var n=t.format;return n.toLowerCase()===r||e(n).toLowerCase()===e(r).toLowerCase()})).orThunk((function(){return YT(r)?C.from({title:"System Font",format:r}):C.none()})),font:n}},n=function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,MC,{text:i})},o=C.some((function(t){return function(){return n(t)}})),r=C.some(n),i=JT(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",k_.SemiColon);return{tooltip:"Fonts",icon:C.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return C.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},setInitialValue:r,nodeChangeHandler:o,dataset:i,shouldHide:!1,isInvalid:s}},qT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},ZT={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},QT=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):Pt(ZT,t).getOr(t);var n,o,r},tI=function(t){var e=function(){var e=C.none(),n=u.data,o=t.queryCommandValue("FontSize");if(o)for(var r=function(t){var r=QT(o,t),i=Pt(qT,r).getOr("");e=K(n,(function(t){return t.format===o||t.format===r||t.format===i}))},i=3;e.isNone()&&0<=i;i--)r(i);return{matchOpt:e,size:o}},n=r(C.none),o=function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,MC,{text:i})},i=C.some((function(t){return function(){return o(t)}})),a=C.some(o),u=JT(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",k_.Space);return{tooltip:"Font sizes",icon:C.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},setInitialValue:a,nodeChangeHandler:i,dataset:u,shouldHide:!1,isInvalid:s}},eI=function(t,e){var n=e(),o=J(n,(function(t){return t.format}));return C.from(t.formatter.closest(o)).bind((function(t){return K(n,(function(e){return e.format===t}))})).orThunk((function(){return qf(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))},nI=function(t){var e=dn(C.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(C.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(C.some(t))}}},oI=function(){return nI((function(t){return t.destroy()}))},rI=function(){return nI((function(t){return t.unbind()}))},iI=function(t,e){return function(n){var o=rI(),r=function(){n.setActive(t.formatter.match(e));var r=t.formatter.formatChanged(e,n.setActive);o.set(r)};return t.initialized?r():t.on("init",r),o.clear}},aI=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},uI=function(t){var e=function(e){var n=eI(t,(function(){return r.data})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,MC,{text:n})},n=C.some((function(t){return function(){return e(t)}})),o=C.some(e),r=JT(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",k_.SemiColon);return{tooltip:"Blocks",icon:C.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:C.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return C.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:aI(t),setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},cI=function(t,e){var n=function(e){var n=function t(e){var n=e.items;return void 0!==n&&0<n.length?Q(n,t):[{title:e.title,format:e.format}]},o=Q(yO(t),n),r=eI(t,(function(){return o})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,MC,{text:r})},o=C.some((function(t){return function(){return n(t)}})),r=C.some(n);return{tooltip:"Formats",icon:C.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:C.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?C.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):C.none()}},onAction:aI(t),setInitialValue:r,nodeChangeHandler:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},sI=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],lI=function(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return Ee(t)})).getOrDie();return e(i,o,r)}},fI={button:lI(Wh,(function(t,e){return n=t,o=e.backstage.shared.providers,xT(n,o,[]);var n,o})),togglebutton:lI(Yh,(function(t,e){return n=t,o=e.backstage.shared.providers,wT(n,o,[]);var n,o})),menubutton:lI(eT,(function(t,e){return JC(t,"tox-tbtn",e.backstage,C.none())})),splitbutton:lI((function(t){return De("SplitButton",nT,t)}),(function(t,e){return kT(t,e.backstage.shared)})),grouptoolbarbutton:lI((function(t){return De("GroupToolbarButton",ZD,t)}),(function(t,e,n){var o,r,i,a,u,c,s=n.ui.registry.getAll().buttons,l=((o={})[Xc]=e.backstage.shared.header.isPositionedAtTop()?nu.TopToBottom:nu.BottomToTop,o);switch(Iv(n)){case ig.floating:return r=t,i=e.backstage,a=function(t){return hI(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,C.none())},u=l,c=i.shared,gD.sketch({lazySink:c.getSink,fetch:function(){return Cx((function(t){t(J(a(r.items),WD))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:bT(r.icon,r.text,r.tooltip,C.none(),C.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:u}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=m({type:"advanced"},o.styleselect),jT(n,o,cI(n,r));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,jT(n,o,tI(n));var n,o},fontSelectButton:function(t,e){return n=t,o=e.backstage,jT(n,o,KT(n));var n,o},formatButton:function(t,e){return n=t,o=e.backstage,jT(n,o,uI(n));var n,o},alignMenuButton:function(t,e){return n=t,o=e.backstage,jT(n,o,WT(n));var n,o}},mI={styleselect:fI.styleSelectButton,fontsizeselect:fI.fontsizeSelectButton,fontselect:fI.fontSelectButton,formatselect:fI.formatButton,align:fI.alignMenuButton},dI=function(t){var e,n,o,r=t.toolbar,i=t.buttons;return!1===r?[]:void 0===r||!0===r?(n=i,o=J(sI,(function(t){var e=G(t.items,(function(t){return Bt(n,t)||Bt(mI,t)}));return{name:t.name,items:e}})),G(o,(function(t){return 0<t.items.length}))):D(r)?(e=r.split("|"),J(e,(function(t){return{items:t.trim().split(" ")}}))):P(r,(function(t){return Bt(t,"name")&&Bt(t,"items")}))?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},pI=function(t,e,n,o,r,i){return Pt(e,n.toLowerCase()).orThunk((function(){return i.bind((function(t){return ct(t,(function(t){return Pt(e,t+n.toLowerCase())}))}))})).fold((function(){return Pt(mI,n.toLowerCase()).map((function(e){return e(t,r)})).orThunk((function(){return C.none()}))}),(function(e){return"grouptoolbarbutton"!==e.type||o?(a=r,u=t,Pt(fI,(i=e).type).fold((function(){return console.error("skipping button defined by",i),C.none()}),(function(t){return C.some(t(i,a,u))}))):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),C.none());var i,a,u}))},hI=function(t,e,n,o){var r=dI(e),i=J(r,(function(r){var i=Q(r.items,(function(r){return 0===r.trim().length?[]:pI(t,e.buttons,r,e.allowToolbarGroups,n,o).toArray()}));return{title:C.from(t.translate(r.name)),items:i}}));return G(i,(function(t){return 0<t.items.length}))},gI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},vI={maxHeightFunction:Mc(),maxWidthFunction:qO()},bI={onLtr:function(){return[$u,Ju,Lu,Vu,Hu,Nu,fh,mh,sh,uh,lh,ch]},onRtl:function(){return[$u,Ju,Hu,Nu,Lu,Vu,fh,mh,lh,ch,sh,uh]}},yI={onLtr:function(){return[Ju,Vu,Nu,Lu,Hu,$u,fh,mh,sh,uh,lh,ch]},onRtl:function(){return[Ju,Nu,Vu,Hu,Lu,$u,fh,mh,lh,ch,sh,uh]}},xI=function(t,e,o,r){var i,a,u=Jn().deviceType.isTouch,c=ha((i={sink:o,onEscape:function(){return t.focus(),C.some(!0)}},a=dn([]),eh.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){a.set([]),eh.getContent(t).each((function(t){na(t.element,"visibility")})),Vi(t.element,PT),na(t.element,"width")},inlineBehaviours:ac([dp("context-toolbar-events",[lr(xo(),(function(t,e){Vi(t.element,PT),na(t.element,"width")})),rr(MT,(function(t,e){var n=t.element;na(n,"width");var o=Da(n);eh.setContent(t,e.event.contents),ji(n,PT);var r=Da(n);Yi(n,"width",o+"px"),eh.getContent(t).each((function(t){e.event.focus.bind((function(t){return pc(t),gc(n)})).orThunk((function(){return up.focusIn(t),hc(Fr(n))}))})),dh.setTimeout((function(){Yi(t.element,"width",r+"px")}),0)})),rr(RT,(function(t,e){eh.getContent(t).each((function(e){a.set(a.get().concat([{bar:e,focus:hc(Fr(t.element))}]))})),Ko(t,MT,{contents:e.event.forwardContents,focus:C.none()})})),rr(FT,(function(t,e){at(a.get()).each((function(e){a.set(a.get().slice(0,a.get().length-1)),Ko(t,MT,{contents:ga(e.bar),focus:e.focus})}))}))]),up.config({mode:"special",onEscape:function(t){return at(a.get()).fold((function(){return i.onEscape()}),(function(e){return Yo(t,FT),C.some(!0)}))}})]),lazySink:function(){return ft.value(i.sink)}}))),s=function(){return DT(t,r.backstage.shared)},l=function(){if(u()&&r.backstage.isContextMenuOpen())return!0;var e,n,o,i,a,c,l=(e=g.get().filter((function(t){return Ji(hn.fromDom(t))})).map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Ra().top:La(hn.fromDom(t.getBody())).y,{y:e.top+n,bottom:e.bottom+n}),f=s();return o=l.y,i=l.bottom,a=f.y,c=f.bottom,!(Math.max(o,a)<=Math.min(i,c))},f=function(){h.set(C.none()),eh.hide(c)},d=function(){eh.hide(c)},p=function(){h.get().each((function(t){var e=c.element;na(e,"display"),l()?Yi(e,"display","none"):el.positionWithinBounds(o,t,c,C.some(s()))}))},h=dn(C.none()),g=dn(C.none()),v=dn(null),b=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:ac([up.config({mode:"acyclic"}),dp("pop-dialog-wrap-events",[fr((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return up.focusIn(e)}))})),mr((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},y=$t((function(){return AT(e,(function(t){var e=x([t]);Ko(c,RT,{forwardContents:b(e)})}))})),x=function(e){var n=t.ui.registry.getAll().buttons,o=y(),i=m(m({},n),o.formNavigators),a=Iv(t)===ig.scrolling?ig.scrolling:ig["default"],u=Z(J(e,(function(e){return"contexttoolbar"===e.type?hI(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},r,C.some(["form:"])):(n=e,o=r.backstage.shared.providers,OT(n,o));var n,o})));return qD({type:a,uid:ii("context-toolbar"),initGroups:u,onEscape:C.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};t.on("contexttoolbar-show",(function(e){var n=y();Pt(n.lookupTable,e.toolbarKey).each((function(n){k([n],e.target===t?C.none():C.some(e)),eh.getContent(c).each(up.focusIn)}))}));var w=function(t,e){var n,o,i="node"===t?r.backstage.shared.anchors.node(e):r.backstage.shared.anchors.cursor();return Lt(i,(n=t,o=u(),"line"===n?{bubble:Vc(12,0,gI),layouts:{onLtr:function(){return[Uu]},onRtl:function(){return[Wu]}},overrides:vI}:{bubble:Vc(0,12,gI),layouts:o?yI:bI,overrides:vI}))},k=function(t,e){var n,o,i,a;_(),u()&&r.backstage.isContextMenuOpen()||(n=x(t),o=e.map(hn.fromDom),i=w(t[0].position,o),h.set(C.some(i)),g.set(e),a=c.element,na(a,"display"),eh.showWithinBounds(c,i,b(n),(function(){return C.some(s())})),l()&&Yi(a,"display","none"))},S=function(){var e,n,o,r,i,a,u;t.hasFocus()&&(e=y(),n=e,o=t,i=hn.fromDom(o.getBody()),a=function(t){return Gn(t,i)},u=hn.fromDom(o.selection.getNode()),(a(r=u)||Yn(i,r)?IT(u,n.inNodeScope,n.inEditorScope).orThunk((function(){return ET(a,u,n)})):C.none()).fold(f,(function(t){k(t.toolbars,C.some(t.elem.dom))})))},_=function(){var t=v.get();null!==t&&(dh.clearTimeout(t),v.set(null))},O=function(){_(),v.set(dh.setEditorTimeout(t,S,0))};t.on("init",(function(){t.on(ZO,d),t.on("ScrollContent ScrollWindow longpress",p),t.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){O()})),t.on("focusout",(function(e){dh.setEditorTimeout(t,(function(){gc(o.element).isNone()&&gc(c.element).isNone()&&f()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&f()})),t.on("AfterProgressState",(function(e){e.state?f():t.hasFocus()&&O()})),t.on("NodeChange",(function(t){gc(c.element).fold(O,n)}))}))},wI=Hf,kI=_f,SI=r([nn("shell",!1),He("makeItem"),nn("setupItem",n),Gl("listBehaviours",[mp])]),CI=kf({name:"items",overrides:function(){return{behaviours:ac([mp.config({})])}}}),_I=r([CI]),OI=Yf({name:r("CustomList")(),configFields:SI(),partFields:_I(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[mp.config({})],components:[]}:{behaviours:[],components:e},i=function(e){return t.shell?C.some(e):Mf(e,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Wl(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){i(e).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=mp.contents(o),i=n.length,a=i-r.length,u=0<a?H(a,(function(){return t.makeItem()})):[],c=r.slice(i);U(c,(function(t){return mp.remove(o,t)})),U(u,(function(t){return mp.append(o,t)}));var s=mp.contents(o);U(s,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),DI=r([]),TI=Object.freeze({__proto__:null,setup:n,isDocked:s,getBehaviours:DI}),II=function(t){return(ta(t,"position").is("fixed")?C.none():Dr(t)).orThunk((function(){var e=hn.fromTag("span");return _r(t).bind((function(t){Lr(t,e);var n=Dr(e);return Jr(e),n}))}))},EI=function(t){return II(t).map(Ca).getOrThunk((function(){return ka(0,0)}))},AI=zt([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),RI=function(t,e){var n=t.element;ji(n,e.transitionClass),Vi(n,e.fadeOutClass),ji(n,e.fadeInClass),e.onShow(t)},FI=function(t,e){var n=t.element;ji(n,e.transitionClass),Vi(n,e.fadeInClass),ji(n,e.fadeOutClass),e.onHide(t)},MI=function(t,e,n){return tt(t,(function(t){switch(t){case"bottom":return r=n,e.bottom<=r.bottom;case"top":return o=n,e.y>=o.y}var o,r}))},PI=function(t,e){return e.getInitialPosition().map((function(e){return Va(e.bounds.x,e.bounds.y,Da(t),ya(t))}))},BI=function(t,e,n){n.setInitialPosition(C.some({style:function(t){var e={},n=t.dom;if($i(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(t),position:Zi(t,"position")||"static",bounds:e}))},jI=function(t,e,n){return n.getInitialPosition().bind((function(o){switch(n.setInitialPosition(C.none()),o.position){case"static":return C.some(AI["static"]());case"absolute":var r=II(t).map(Na).getOrThunk((function(){return Na(Ui())}));return C.some(AI.absolute(bc("absolute",Pt(o.style,"left").map((function(t){return e.x-r.x})),Pt(o.style,"top").map((function(t){return e.y-r.y})),Pt(o.style,"right").map((function(t){return r.right-e.right})),Pt(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return C.none()}}))},zI=function(t,e,n){var o,r,i,a=t.element;return ta(a,"position").is("fixed")?(r=e,PI(o=a,i=n).filter((function(t){return MI(i.getModes(),t,r)})).bind((function(t){return jI(o,t,i)}))):function(t,e,n){var o=Na(t);if(MI(n.getModes(),o,e))return C.none();BI(t,o,n);var r=Ha(),i=o.x-r.x,a=e.y-r.y,u=r.bottom-e.bottom,c=o.y<=e.y;return C.some(AI.fixed(bc("fixed",C.some(i),c?C.some(a):C.none(),C.none(),c?C.none():C.some(u))))}(a,e,n)},VI=function(t,e){U(["left","right","top","bottom","position"],(function(e){return na(t.element,e)})),e.onUndocked(t)},NI=function(t,e,n){yc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},LI=function(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var a,u,c=(u=o,(a=i).y<u.bottom&&a.bottom>u.y);c!==n.isVisible()&&(n.setVisible(c),r&&!c?(Li(t.element,[e.fadeOutClass]),e.onHide(t)):(c?RI:FI)(t,e))}))}))},HI=function(t,e,o){var r,i,a=t.element;o.setDocked(!1),r=o,i=t.element,PI(i,r).bind((function(t){return jI(i,t,r)})).each((function(o){o.fold((function(){return VI(t,e)}),(function(n){return NI(t,e,n)}),n)})),o.setVisible(!0),e.contextual.each((function(e){Hi(a,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),$I(t,e,o)},$I=function(t,e,n){var o,r,i,a,u;t.getSystem().isConnected()&&(o=t,i=n,a=(r=e).lazyViewport(o),(u=i.isDocked())&&LI(o,r,i,a),zI(o,a,i).each((function(t){i.setDocked(!u),t.fold((function(){return VI(o,r)}),(function(t){return NI(o,r,t)}),(function(t){LI(o,r,i,a,!0),NI(o,r,t)}))})))},JI=function(t,e,n){n.isDocked()&&HI(t,e,n)},UI=Object.freeze({__proto__:null,refresh:$I,reset:JI,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),WI=Object.freeze({__proto__:null,events:function(t,e){return er([lr(xo(),(function(n,o){t.contextual.each((function(t){Ni(n.element,t.transitionClass)&&(Hi(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()}))})),rr(jo(),(function(n,o){$I(n,t,e)})),rr(zo(),(function(n,o){JI(n,t,e)}))])}}),GI=[en("contextual",[Je("fadeInClass"),Je("fadeOutClass"),Je("transitionClass"),We("lazyContext"),hu("onShow"),hu("onShown"),hu("onHide"),hu("onHidden")]),sn("lazyViewport",Ha),ln("modes",["top","bottom"],Be),hu("onDocked"),hu("onUndocked")],XI=cc({fields:GI,name:"docking",active:WI,apis:UI,state:Object.freeze({__proto__:null,init:function(t){var e=dn(!1),n=dn(!0),o=dn(C.none()),r=dn(t.modes);return ki({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),YI={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},KI="tox-tinymce--toolbar-sticky-on",qI="tox-tinymce--toolbar-sticky-off",ZI=function(t){var e=t.element;_r(e).each((function(n){var o,r,i="padding-"+XI.getModes(t)[0];XI.isDocked(t)?(o=Da(n),Yi(e,"width",o+"px"),Yi(n,i,xa(r=e)+(parseInt(Zi(r,"margin-top"),10)||0)+(parseInt(Zi(r,"margin-bottom"),10)||0)+"px")):(na(e,"width"),na(n,i))}))},QI=function(t,e){e?(Vi(t,YI.fadeOutClass),Li(t,[YI.transitionClass,YI.fadeInClass])):(Vi(t,YI.fadeInClass),Li(t,[YI.fadeOutClass,YI.transitionClass]))},tE=function(t,e){var n=hn.fromDom(t.getContainer());e?(ji(n,KI),Vi(n,qI)):(ji(n,qI),Vi(n,KI))},eE=function(t,e){var n,o=dn(C.none()),r=e.getSink,i=function(t){r().each((function(e){return t(e.element)}))},a=function(e){t.inline||ZI(e),tE(t,XI.isDocked(e)),e.getSystem().broadcastOn([_l()],{}),r().each((function(t){return t.getSystem().broadcastOn([_l()],{})}))},u=t.inline?[]:[mc.config({channels:((n={})[JD()]={onReceive:ZI},n)})];return p([bp.config({}),XI.config({contextual:m({lazyContext:function(e){var n,o,r=xa(e.element),i=t.inline?t.getContentAreaContainer():t.getContainer(),a=Na(hn.fromDom(i)),u=a.height-r,c=a.y+(n=e,o="top",N(XI.getModes(n),o)?0:r);return C.some(Va(a.x,c,a.width,u))},onShow:function(){i((function(t){return QI(t,!0)}))},onShown:function(t){i((function(t){return Hi(t,[YI.transitionClass,YI.fadeInClass])})),o.get().each((function(e){var n,r,i;n=t.element,i=wr(r=e),hc(i).filter((function(t){return!Gn(r,t)})).filter((function(t){return Gn(t,hn.fromDom(i.dom.body))||Yn(n,t)})).each((function(){return pc(r)})),o.set(C.none())}))},onHide:function(t){var e,n;o.set((e=t.element,n=r,gc(e).orThunk((function(){return n().toOptional().bind((function(t){return gc(t.element)}))})))),i((function(t){return QI(t,!1)}))},onHidden:function(){i((function(t){return Hi(t,[YI.transitionClass])}))}},YI),modes:[e.header.getDockingMode()],onDocked:a,onUndocked:a})],u)},nE=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(XI.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(ZI)})),t.on("SkinLoaded",(function(){n().each((function(t){XI.isDocked(t)?XI.reset(t):XI.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(XI.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){XI.refresh(e);var n,o,r,i,a,u,c,s,l,f,m,d,p,h,g,v,b,y=e.element;ed(y)&&(n=t,i=wr(o=y),a=i.dom.defaultView.innerHeight,u=Ra(i),c=hn.fromDom(n.elm),s=La(c),l=ya(c),f=s.y,m=f+l,d=Ca(o),p=ya(o),h=d.top,g=h+p,v=Math.abs(h-u.top)<2,b=Math.abs(g-(u.top+a))<2,v&&f<g?Fa(u.left,f-p,i):b&&h<m&&(r=f-a+l+p,Fa(u.left,r,i)))}))})),t.on("PostRender",(function(){tE(t,!1)}))},isDocked:function(t){return t().map(XI.isDocked).getOr(!1)},getBehaviours:eE}),oE=Xf({factory:function(t,e){var n={focus:up.focusIn,setMenus:function(t,n){var o=J(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},o=eT(n).mapError((function(t){return Ee(t)})).getOrDie();return JC(o,"tox-mbtn",e.backstage,C.some("menuitem"))}));mp.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:ac([mp.config({}),dp("menubar-events",[fr((function(e){t.onSetup(e)})),rr(fo(),(function(t,e){Ka(t.element,".tox-mbtn--active").each((function(n){qa(e.event.target,".tox-mbtn").each((function(e){Gn(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){iw.expand(t),iw.close(n),bp.focus(t)}))}))}))}))})),rr($o(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){iw.isOpen(n)&&(iw.expand(t),iw.close(n))}))}))}))]),up.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),C.some(!0)}}),Yy.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[He("dom"),He("uid"),He("onEscape"),He("backstage"),nn("onSetup",n)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),rE="container",iE=[Jl("slotBehaviours",[])],aE=function(t){return"<alloy.field."+t+">"},uE=function(t,e){var n,o=function(e){return zf(t)},r=function(e,n){return function(o,r){return Mf(o,t,r).map((function(t){return e(t,r)})).getOr(n)}},i=function(t,e){return"true"!==Kr(t.element,"aria-hidden")},a=r(i,!1),u=r((function(t,e){var n;i(t)&&(n=t.element,Yi(n,"display","none"),Yr(n,"aria-hidden","true"),Ko(t,Jo(),{name:e,visible:!1}))})),c=function(t,e){U(e,(function(e){return n(t,e)}))},s=r((function(t,e){var n;i(t)||(n=t.element,na(n,"display"),Qr(n,"aria-hidden"),Ko(t,Jo(),{name:e,visible:!0}))})),l={getSlotNames:o,getSlot:function(e,n){return Mf(e,t,n)},isShowing:a,hideSlot:n=u,hideAllSlots:function(t){return c(t,o())},showSlot:s};return{uid:t.uid,dom:t.dom,components:e,behaviours:Ul(t.slotBehaviours),apis:l}},cE=It({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},xi),sE=m(m({},cE),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),If(rE,aE(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=J(r,(function(t){return xf({name:t,pname:aE(t)})}));return Jf(rE,iE,i,uE,o)}}),lE=me([Qe("icon"),Qe("tooltip"),sn("onShow",n),sn("onHide",n),sn("onSetup",(function(){return n}))]),fE=function(t){return{element:function(){return t.element.dom}}},mE=function(t,e){var o=J(Ot(e),(function(t){var n=e[t],o=Te(De("sidebar",lE,n));return{name:t,getApi:fE,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return J(o,(function(e){var r=dn(n);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Ug([Kv(e,r),qv(e,r),rr(Jo(),(function(t,e){var n=e.event;K(o,(function(t){return t.name===n.name})).each((function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},dE=function(t,e){em.getCurrent(t).each((function(t){return mp.set(t,[(n=e,sE.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:mE(t,n),slotBehaviours:Ug([fr((function(t){return sE.hideAllSlots(t)}))])}})))]);var n}))},pE=function(t){return em.getCurrent(t).bind((function(t){return zD.isGrowing(t)||zD.hasGrown(t)?em.getCurrent(t).bind((function(t){return K(sE.getSlotNames(t),(function(e){return sE.isShowing(t,e)}))})):C.none()}))},hE=ii("FixSizeEvent"),gE=ii("AutoSizeEvent"),vE=function(t){var e,n,o,r=hn.fromHtml(t),i=Tr(r),a=(n=void 0!==(e=r).dom.attributes?e.dom.attributes:[],Y(n,(function(t,e){var n;return"class"===e.name?t:m(m({},t),((n={})[e.name]=e.value,n))}),{})),u=(o=r,Array.prototype.slice.call(o.dom.classList,0)),c=0===i.length?{}:{innerHtml:Wr(r)};return m({tag:hr(r),classes:u,attributes:a},c)},bE=function(t,e,n){var o=t.element;!0===e?(mp.set(t,[{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:vE('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:ac([up.config({mode:"special",onTab:function(){return C.some(!0)},onShiftTab:function(){return C.some(!0)}}),bp.config({})])}]),na(o,"display"),Qr(o,"aria-hidden")):(mp.set(t,[]),Yi(o,"display","none"),Yr(o,"aria-hidden","true"))},yE=kI.optional({factory:oE,name:"menubar",schema:[He("backstage")]}),xE=kI.optional({factory:{sketch:function(t){return OI.sketch({uid:t.uid,dom:t.dom,listBehaviours:ac([up.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return qD({type:t.type,uid:ii("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),C.some(!0)}})},setupItem:function(t,e,n,o){eD.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[He("dom"),He("onEscape")]}),wE=kI.optional({factory:{sketch:function(t){var e;return((e=t).type===ig.sliding?KD:e.type===ig.floating?YD:qD)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),C.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[He("dom"),He("onEscape"),He("getSink")]}),kE=kI.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?eE:DI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ac(n(e,t.sharedBackstage))}}},name:"header",schema:[He("dom")]}),SE=kI.optional({name:"socket",schema:[He("dom")]}),CE=kI.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ac([Yy.config({}),bp.config({}),zD.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){em.getCurrent(t).each(sE.hideAllSlots),Yo(t,gE)},onGrown:function(t){Yo(t,gE)},onStartGrow:function(t){Ko(t,hE,{width:ta(t.element,"width").getOr("")})},onStartShrink:function(t){Ko(t,hE,{width:Da(t.element)+"px"})}}),mp.config({}),em.config({find:function(t){var e=mp.contents(t);return it(e)}})])}],behaviours:ac([sS(0),dp("sidebar-sliding-events",[rr(hE,(function(t,e){Yi(t.element,"width",e.event.width)})),rr(gE,(function(t,e){na(t.element,"width")}))])])}}},name:"sidebar",schema:[He("dom")]}),_E=kI.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ac([mp.config({})]),components:[]}}},name:"throbber",schema:[He("dom")]}),OE=Yf({name:"OuterContainer",factory:function(t,e,n){var o={getSocket:function(e){return wI.getPart(e,t,"socket")},setSidebar:function(e,n){wI.getPart(e,t,"sidebar").each((function(t){return dE(t,n)}))},toggleSidebar:function(e,n){wI.getPart(e,t,"sidebar").each((function(t){return e=t,o=n,void em.getCurrent(e).each((function(t){em.getCurrent(t).each((function(e){zD.hasGrown(t)?sE.isShowing(e,o)?zD.shrink(t):(sE.hideAllSlots(e),sE.showSlot(e,o)):(sE.hideAllSlots(e),sE.showSlot(e,o),zD.grow(t))}))}));var e,o}))},whichSidebar:function(e){return wI.getPart(e,t,"sidebar").bind(pE).getOrNull()},getHeader:function(e){return wI.getPart(e,t,"header")},getToolbar:function(e){return wI.getPart(e,t,"toolbar")},setToolbar:function(e,n){wI.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){wI.getPart(e,t,"multiple-toolbar").each((function(t){OI.setItems(t,n)}))},refreshToolbar:function(e){wI.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){wI.getPart(e,t,"toolbar").each((function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},void 0!==e&&null!==e?C.some(n(e)):C.none()}))},isToolbarDrawerToggled:function(e){return wI.getPart(e,t,"toolbar").bind((function(t){return C.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return wI.getPart(e,t,"throbber")},focusToolbar:function(e){wI.getPart(e,t,"toolbar").orThunk((function(){return wI.getPart(e,t,"multiple-toolbar")})).each((function(t){up.focusIn(t)}))},setMenubar:function(e,n){wI.getPart(e,t,"menubar").each((function(t){oE.setMenus(t,n)}))},focusMenubar:function(e){wI.getPart(e,t,"menubar").each((function(t){oE.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:o,behaviours:t.behaviours}},configFields:[He("dom"),He("behaviours")],partFields:[kE,yE,wE,xE,SE,CE,_E],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=J(n,WD);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=J(n,(function(t){return J(t,WD)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),DE={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},TE=function(t){return"string"==typeof t?t.split(" "):t},IE=function(t,e){var n=m(m({},DE),e.menus),o=0<Ot(e.menus).length,r=void 0===e.menubar||!0===e.menubar?TE("file edit view insert format tools table help"):TE(!1===e.menubar?"":e.menubar),i=G(r,(function(t){return o&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||DE.hasOwnProperty(t)})),a=J(i,(function(o){var r,i,a,u=n[o];return r={title:u.title,items:TE(u.items)},i=e,a=t.getParam("removed_menuitems","").split(/[ ,]/),{text:r.title,getItems:function(){return Q(r.items,(function(t){var e=t.toLowerCase();return 0===e.trim().length||L(a,(function(t){return t===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:i.menuItems[e]?[i.menuItems[e]]:[]}))}}}));return G(a,(function(t){return 0<t.getItems().length&&L(t.getItems(),(function(t){return"separator"!==t.type}))}))},EE=function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}},AE=function(t,e){return function(){return n={message:e},t.fire("SkinLoadError",n);var n}},RE=function(t,e,n){return new Mh((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))},FE=function(t,e){var n;return n=hn.fromDom(t.getElement()),Pr(n).isSome()?RE(t,e+"/skin.shadowdom.min.css",tv.DOM.styleSheetLoader):Mh.resolve()},ME=function(t,e){var n,o,r,i,a,u=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):gv.baseURL+"/skins/ui/"+o),i);u&&e.contentCSS.push(u+(t?"/content.inline":"/content")+".min.css"),0==(!1===e.getParam("skin"))&&D(u)?Mh.all([RE(a=e,u+"/skin.min.css",a.ui.styleSheetLoader),FE(e,u)]).then(EE(e),AE(e,"Skin could not be loaded")):EE(e)()},PE=a(ME,!1),BE=a(ME,!0),jE=function(t,e,n,o){var r,i=e.outerContainer,a=n.toolbar,u=n.buttons;P(a,D)?(r=a.map((function(e){var r={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return hI(t,r,{backstage:o},C.none())})),OE.setToolbars(i,r)):OE.setToolbar(i,hI(t,n,{backstage:o},C.none()))},zE=Jn(),VE=zE.os.isiOS()&&zE.os.version.major<=12,NE=function(t,e){var n=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=dn(ka(o.innerWidth,o.innerHeight)),a=dn(ka(r.offsetWidth,r.offsetHeight)),u=function(){var e=i.get();e.left===o.innerWidth&&e.top===o.innerHeight||(i.set(ka(o.innerWidth,o.innerHeight)),Bb(t))},c=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(ka(e.offsetWidth,e.offsetHeight)),Bb(t))},s=function(e){return n=e,t.fire("ScrollContent",n);var n};n.bind(o,"resize",u),n.bind(o,"scroll",s);var l=_y(hn.fromDom(t.getBody()),"load",c),f=e.uiMothership.element;t.on("hide",(function(){Yi(f,"display","none")})),t.on("show",(function(){na(f,"display")})),t.on("NodeChange",c),t.on("remove",(function(){l.unbind(),n.unbind(o,"resize",u),n.unbind(o,"scroll",s),o=null}))},LE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=dn(0),a=e.outerContainer;PE(t);var u,c,s=hn.fromDom(r.targetNode),l=Mr(Fr(s));u=s,c=e.mothership,ml(u,c,Vr),fl(l,e.uiMothership),t.on("PostRender",(function(){jE(t,e,n,o),i.set(t.getWin().innerWidth),OE.setMenubar(a,IE(t,n)),OE.setSidebar(a,n.sidebar),NE(t,e)}));var f,m,d,p,h,g=OE.getSocket(a).getOrDie("Could not find expected socket element");VE&&(Ki(g.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),d=function(){t.fire("ScrollContent")},p=20,h=null,f={cancel:function(){null!==h&&(clearTimeout(h),h=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===h&&(h=setTimeout((function(){d.apply(null,t),h=null}),p))}},m=Cy(g.element,"scroll",f.throttle),t.on("remove",m.unbind)),$v(t,e),t.addCommand("ToggleSidebar",(function(e,n){OE.toggleSidebar(a,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return OE.whichSidebar(a)}));var v=Iv(t);v!==ig.sliding&&v!==ig.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(OE.refreshToolbar(e.outerContainer),i.set(n))}));var b={enable:function(){Hv(e,!1)},disable:function(){Hv(e,!0)},isDisabled:function(){return hv.isDisabled(a)}};return{iframeContainer:g.element.dom,editorContainer:a.element.dom,api:b}}}),HE=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?C.some(parseInt(""+t,10)):C.none()},$E=function(t){return M(t)?t+"px":t},JE=function(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return e<t}));return o.or(r).getOr(t)},UE=function(t){var e,n,o,r;return(n=vv(e=t),o=xv(e),r=kv(e),HE(n).map((function(t){return JE(t,o,r)}))).getOr(vv(t))},WE=function(t){var e=bv(t),n=yv(t),o=wv(t);return HE(e).map((function(t){return JE(t,n,o)}))},GE=function(t,e,n,o,r){var i=n.uiMothership,a=n.outerContainer,u=tv.DOM,c=Bv(t),s=Vv(t),l=wv(t).or(WE(t)),f=o.shared.header,m=f.isPositionedAtTop,d=Iv(t),p=d===ig.sliding||d===ig.floating,h=dn(!1),g=function(){return h.get()&&!t.removed},v=function(t){return p?t.fold((function(){return 0}),(function(t){return 1<t.components().length?ya(t.components()[1].element):0})):0},b=function(){i.broadcastOn([_l()],{})},y=function(t){var n,o,i,u,f,d;void 0===t&&(t=!1),g()&&(c||(n=l.getOrThunk((function(){var t=HE(Zi(Ui(),"margin-left")).getOr(0);return Da(Ui())-Ca(e).left+t})),Yi(r.get().element,"max-width",n+"px")),p&&OE.refreshToolbar(a),c||(o=OE.getToolbar(a),i=v(o),u=Na(e),f=m()?Math.max(u.y-ya(r.get().element)+i,0):u.bottom,Ki(a.element,{position:"absolute",top:Math.round(f)+"px",left:Math.round(u.x)+"px"})),s&&(d=r.get(),t?XI.reset(d):XI.refresh(d)),b())},x=function(n){var o,i;void 0===n&&(n=!0),!c&&s&&g()&&(o=f.getDockingMode(),(i=function(n){switch(Fv(t)){case Dv.auto:var o=OE.getToolbar(a),r=v(o),i=ya(n.element)-r,u=Na(e);if(u.y>i)return"top";var c=Sr(e),s=Math.max(c.dom.scrollHeight,ya(c));return u.bottom<s-i||Ha().bottom<u.bottom-i?"bottom":"top";case Dv.bottom:return"bottom";case Dv.top:default:return"top"}}(r.get()))!==o&&(function(t){var e=r.get();XI.setModes(e,[t]),f.setDockingMode(t);var n=m()?nu.TopToBottom:nu.BottomToTop;Yr(e.element,Xc,n)}(i),n&&y(!0)))};return{isVisible:g,isPositionedAtTop:m,show:function(){h.set(!0),Yi(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),na(i.element,"display"),x(!1),y()},hide:function(){h.set(!1),n.outerContainer&&(Yi(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),Yi(i.element,"display","none")},update:y,updateMode:x,repositionPopups:b}},XE=function(t,e){var n=Na(t);return{pos:e?n.y:n.bottom,bounds:n}},YE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,c=dn(null),s=hn.fromDom(r.targetNode),l=GE(t,s,e,o,c),f=t.getParam("toolbar_persist",!1,"boolean");BE(t);var m=function(){var r;c.get()?l.show():(c.set(OE.getHeader(u).getOrDie()),r=jv(t),fl(r,i),fl(r,a),jE(t,e,n,o),OE.setMenubar(u,IE(t,n)),l.show(),function(t,e,n,o){var r=dn(XE(e,n.isPositionedAtTop())),i=function(o){var i=XE(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,c=r.get(),s=c.pos,l=c.bounds,f=u.height!==l.height||u.width!==l.width;r.set({pos:a,bounds:u}),f&&Bb(t,o),n.isVisible()&&(s!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){dh.requestAnimationFrame((function(){return i(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var a=rI();a.set(_y(hn.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){a.clear()}))}(t,s,l,f),t.nodeChanged())};t.on("show",m),t.on("hide",l.hide),f||(t.on("focus",m),t.on("blur",l.hide)),t.on("init",(function(){(t.hasFocus()||f)&&m()})),$v(t,e);var d={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Hv(e,!1)},disable:function(){Hv(e,!0)},isDisabled:function(){return hv.isDisabled(u)}};return{editorContainer:u.element.dom,api:d}}}),KE=function(t,e){var n,o,r,i,a,u,c,s,l,f,d,p,h,g;r=BT(0,o=e,WT(n=t)),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}}),u=BT(0,a=e,KT(i=t)),i.ui.registry.addNestedMenuItem("fontformats",{text:a.shared.providers.translate("Fonts"),getSubmenuItems:function(){return u.items.validateItems(u.getStyleItems())}}),c=t,l=m({type:"advanced"},(s=e).styleselect),f=BT(0,s,cI(c,l)),c.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),p=BT(0,e,uI(d=t)),d.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return p.items.validateItems(p.getStyleItems())}}),g=BT(0,e,tI(h=t)),h.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return g.items.validateItems(g.getStyleItems())}})},qE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ZE=(VT="[eE][+-]?[0-9]+",LT=["Infinity",(zT="[0-9]+")+"\\."+(NT=function(t){return"(?:"+t+")?"})(zT)+NT(VT),"\\."+zT+NT(VT),zT+NT(VT)].join("|"),new RegExp("^([+-]?(?:"+LT+"))(.*)$")),QE=function(t,e){return C.from(ZE.exec(t)).bind((function(t){var n,o=Number(t[1]),r=t[2];return n=r,L(e,(function(t){return L(qE[t],(function(t){return n===t}))}))?C.some({value:o,unit:r}):C.none()}))},tA=function(t){return QE(t,["fixed","relative","empty"]).map((function(t){return t.value+t.unit})).getOr(t)},eA=function(t){var e=t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" "),n=new Map,o=oI(),r=function(){var e=tA(t.queryCommandValue("LineHeight"));C.from(n.get(e)).fold((function(){return o.clear()}),(function(t){o.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)}))};return t.on("nodeChange",r),J(e,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(tA(i),u),a+1===e.length&&r(),function(){0===a&&(t.off("nodeChange",r),o.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}}))},nA=function(t){var e,n;(e=t).ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return eA(e)}}),(n=t).ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(eA(n))}})},oA=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},rA=function(t){var e,n;!function(t){dS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:iI(t,e.name),onAction:oA(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:iI(t,n),onAction:oA(t,n)})}}(t),e=t,dS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})),n=t,dS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:iI(n,t.name)})}))},iA=function(t){var e;rA(t),e=t,dS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:oA(e,"code")})},aA=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},uA=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return aA(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return aA(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return aA(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return aA(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},cA=function(t,e){var n,o,r,i;!function(t){dS.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:iI(t,e.name)})}));var e="alignnone",n="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(o)},icon:r})}(t),iA(t),KE(t,e),uA(t),function(t){Ub(t);var e=dn(null),n=dn(null);qb(t,"forecolor","forecolor","Text color",e),qb(t,"backcolor","hilitecolor","Background color",n),Zb(t,"forecolor","forecolor","Text color"),Zb(t,"backcolor","hilitecolor","Background color")}(t),(o=n=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return o.execCommand("mceToggleVisualAid")}}),(r=n).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(t,r)},onAction:function(){r.execCommand("mceToggleVisualAid")}}),(i=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(t,i)},onAction:function(){return i.execCommand("outdent")}}),i.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return i.execCommand("indent")}}),nA(t)},sA=function(t,e){return{anchor:"makeshift",x:t,y:e}},lA=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},fA=function(t,e){var n,o,r,i=tv.DOM.getPos(t);return n=e,o=i.x,r=i.y,sA(n.x+o,n.y+r)},mA=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(lA(t)){var e=t.touches[0];return sA(e.pageX,e.pageY)}return sA(t.pageX,t.pageY)}(e):fA(t.getContentAreaContainer(),function(t){if(lA(t)){var e=t.touches[0];return sA(e.clientX,e.clientY)}return sA(t.clientX,t.clientY)}(e)):dA(t)},dA=function(t){return{anchor:"selection",root:hn.fromDom(t.selection.getNode())}},pA=function(t){return{anchor:"node",node:C.some(hn.fromDom(t.selection.getNode())),root:hn.fromDom(t.getBody())}},hA=function(t,e,n,o,r,i){var a=n(),u=i?pA(t):mA(t,e);HC(a,ug.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),eh.showMenuAt(r,u,{menu:{markers:xg("normal")},data:t})}))},gA={onLtr:function(){return[Ju,Vu,Nu,Lu,Hu,$u,fh,mh,sh,uh,lh,ch]},onRtl:function(){return[Ju,Nu,Vu,Hu,Lu,$u,fh,mh,lh,ch,sh,uh]}},vA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bA=function(t,e,n,o,r,i,a){var u,c,s=i?pA(t):(u=t,c=e,m({bubble:Vc(0,12,vA),layouts:gA,overrides:{maxWidthFunction:qO(),maxHeightFunction:Mc()}},mA(u,c)));HC(n,ug.CLOSE_ON_EXECUTE,o,!0).map((function(n){e.preventDefault(),eh.showMenuWithinBounds(r,s,{menu:{markers:xg("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return C.some(DT(t,o.shared))})),t.fire(ZO)}))},yA=function(t,e,n,o,r,i){var a,u=Jn(),c=u.os.isiOS(),s=u.os.isOSX(),l=u.os.isAndroid(),f=u.deviceType.isTouch(),m=function(){var a=n();bA(t,e,a,o,r,i,!(l||c||s&&f))};!s&&!c||i?(l&&!i&&t.selection.setCursorLocation(e.target,0),m()):(a=function(){!function(t){var e=t.selection.getRng(),n=function(){dh.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(t),m()},function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Rs(t.getWin(),hs.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)}))))},xA=function(t){return"string"==typeof t?t.split(/[ ,]/):t},wA=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},kA=function(t){return n="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(e=t).ui.registry.getAll().contextMenus,C.from(e.getParam(n)).map(xA).getOrThunk((function(){return G(xA(o),(function(t){return Bt(r,t)}))}));var e,n,o,r},SA=function(t){return D(t)?"|"===t:"separator"===t.type},CA={type:"separator"},_A=function t(e){if(D(e))return e;switch(e.type){case"separator":return CA;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var n=e.getSubmenuItems();return D(n)?n:J(n,t)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){return n()})}}var n},OA=function(t,e){if(0===e.length)return t;var n=at(t).filter((function(t){return!SA(t)})).fold((function(){return[]}),(function(t){return[CA]}));return t.concat(n).concat(e).concat([CA])},DA=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},TA=function(t,e){return DA(t,e)?t.selection.getStart(!0):e.target},IA=function(t,e,n){var o=Jn().deviceType.isTouch,r=ha(eh.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ac([dp("dismissContextMenu",[rr(Lo(),(function(e,n){Sl.close(e),t.focus()}))])])})),i=function(t){return eh.hide(r)},a=function(e){var i,a;wA(t)&&e.preventDefault(),i=t,e.ctrlKey&&!wA(i)||!1===t.getParam("contextmenu")||(a=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string");if(DA(t,e))return!0;if(n){var o=TA(t,e);return Dy(hn.fromDom(o),n)}return!1}(t,e),(o()?yA:hA)(t,e,(function(){var n,o,r,i=TA(t,e),a=t.ui.registry.getAll(),u=kA(t);return n=a.contextMenus,o=i,0<(r=Y(u,(function(t,e){if(Bt(n,e)){var r=n[e].update(o);if(D(r))return OA(t,r.split(" "));if(0<r.length){var i=J(r,_A);return OA(t,i)}return t}return t.concat([e])}),[])).length&&SA(r[r.length-1])&&r.pop(),r}),n,r,a))};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,i),t.on("longpress contextmenu",a)}))},EA=zt([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AA=function(t){return function(e){return e.translate(-t.left,-t.top)}},RA=function(t){return function(e){return e.translate(t.left,t.top)}},FA=function(t){return function(e,n){return Y(t,(function(t,e){return e(t)}),ka(e,n))}},MA=function(t,e,n){return t.fold(FA([RA(n),AA(e)]),FA([AA(e)]),FA([]))},PA=function(t,e,n){return t.fold(FA([RA(n)]),FA([]),FA([RA(e)]))},BA=function(t,e,n){return t.fold(FA([]),FA([AA(n)]),FA([RA(e),AA(n)]))},jA=function(t,e,n){var o=t.fold((function(t,e){return{position:C.some("absolute"),left:C.some(t+"px"),top:C.some(e+"px")}}),(function(t,e){return{position:C.some("absolute"),left:C.some(t-n.left+"px"),top:C.some(e-n.top+"px")}}),(function(t,e){return{position:C.some("fixed"),left:C.some(t+"px"),top:C.some(e+"px")}}));return m({right:C.none(),bottom:C.none()},o)},zA=function(t,e,n,o){var r=function(t,r){return function(i,a){var u=t(e,n,o);return r(i.getOr(u.left),a.getOr(u.top))}};return t.fold(r(BA,VA),r(PA,NA),r(MA,LA))},VA=EA.offset,NA=EA.absolute,LA=EA.fixed,HA=function(t,e){var n=Kr(t,e);return A(n)?NaN:parseInt(n,10)},$A=function(t,e,n,o){return r=e,i=t.element,a=HA(i,r.leftAttr),u=HA(i,r.topAttr),(isNaN(a)||isNaN(u)?C.none():C.some(ka(a,u))).fold((function(){return n}),(function(t){return LA(t.left+o.left,t.top+o.top)}));var r,i,a,u},JA=function(t,e,n,o,r,i){var a,u,c,s=$A(t,e,n,o),l=(e.mustSnap?GA:XA)(t,e,s,r,i),f=MA(s,r,i);return a=e,u=f,c=t.element,Yr(c,a.leftAttr,u.left+"px"),Yr(c,a.topAttr,u.top+"px"),l.fold((function(){return{coord:LA(f.left,f.top),extra:C.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))},UA=function(t,e){var n,o;n=e,o=t.element,Qr(o,n.leftAttr),Qr(o,n.topAttr)},WA=function(t,e,n,o){return ct(t,(function(t){var r,i,a,u,c,s,l,f,m=t.sensor;return r=e,i=m,a=t.range.left,u=t.range.top,l=PA(r,c=n,s=o),f=PA(i,c,s),Math.abs(l.left-f.left)<=a&&Math.abs(l.top-f.top)<=u?C.some({output:zA(t.output,e,n,o),extra:t.extra}):C.none()}))},GA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return WA(i,n,o,r).orThunk((function(){return Y(i,(function(t,e){var i,a,u,c,s,l,f,m,d=e.sensor,p=(i=n,a=d,e.range.left,e.range.top,s=PA(i,u=o,c=r),l=PA(a,u,c),f=Math.abs(s.left-l.left),m=Math.abs(s.top-l.top),ka(f,m));return t.deltas.fold((function(){return{deltas:C.some(p),snap:C.some(e)}}),(function(n){return(p.left+p.top)/2<=(n.left+n.top)/2?{deltas:C.some(p),snap:C.some(e)}:t}))}),{deltas:C.none(),snap:C.none()}).snap.map((function(t){return{output:zA(t.output,n,o,r),extra:t.extra}}))}))},XA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return WA(i,n,o,r)},YA=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,a,u,c,s,l,f,m=e.getTarget(t.element);e.repositionTarget&&(r=wr(t.element),i=Ra(r),a=EI(m),l=i,f=a,u={coord:zA((s=o).output,s.output,l,f),extra:s.extra},c=jA(u.coord,0,a),qi(m,c))}}),KA="data-initial-z-index",qA=function(t,e){var n;t.getSystem().addToGui(e),_r((n=e).element).filter(vr).each((function(t){ta(t,"z-index").each((function(e){Yr(t,KA,e)})),Yi(t,"z-index",Zi(n.element,"z-index"))}))},ZA=function(t){_r(t.element).filter(vr).each((function(t){qr(t,KA).fold((function(){return na(t,"z-index")}),(function(e){return Yi(t,"z-index",e)})),Qr(t,KA)})),t.getSystem().removeFromGui(t)},QA=function(t,e,n){return t.getSystem().build(Hy.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},tR=en("snaps",[He("getSnapPoints"),hu("onSensor"),He("leftAttr"),He("topAttr"),nn("lazyViewport",Ha),nn("mustSnap",!1)]),eR=[nn("useFixed",s),He("blockerClass"),nn("getTarget",i),nn("onDrag",n),nn("repositionTarget",!0),nn("onDrop",n),sn("getBounds",Ha),tR],nR=function(t){return e=ta(t,"left"),n=ta(t,"top"),o=ta(t,"position"),r=function(t,e,n){return("fixed"===n?LA:VA)(parseInt(t,10),parseInt(e,10))},(e.isSome()&&n.isSome()&&o.isSome()?C.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):C.none()).getOrThunk((function(){var e=Ca(t);return NA(e.left,e.top)}));var e,n,o,r},oR=function(t,e,n,o,r,i,a){var u,c,s,l,f,m,d,p,h,g=e.fold((function(){var t,e,a,u=(t=n,e=i.left,a=i.top,t.fold((function(t,n){return VA(t+e,n+a)}),(function(t,n){return NA(t+e,n+a)}),(function(t,n){return LA(t+e,n+a)}))),c=MA(u,o,r);return LA(c.left,c.top)}),(function(e){var a=JA(t,e,n,i,o,r);return a.extra.each((function(n){e.onSensor(t,n)})),a.coord}));return u=g,c=o,s=r,f=(l=a).bounds,m=PA(u,c,s),d=Dc(m.left,f.x,f.x+f.width-l.width),p=Dc(m.top,f.y,f.y+f.height-l.height),h=NA(d,p),u.fold((function(){var t=BA(h,c,s);return VA(t.left,t.top)}),(function(){return h}),(function(){var t=MA(h,c,s);return LA(t.left,t.top)}))},rR=function(t,e){return{bounds:t.getBounds(),height:xa(e.element),width:Ta(e.element)}},iR=function(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk((function(){return rR(e,t)}));i.each((function(n){var o,r,i,u,c,s,l,f,m,d,p;o=t,i=a,u=n,p=(r=e).getTarget(o.element),r.repositionTarget&&(c=wr(o.element),s=Ra(c),l=EI(p),f=nR(p),m=oR(o,r.snaps,f,s,l,u,i),d=jA(m,0,l),qi(p,d)),r.onDrag(o,p,u)}))},aR=function(t,e,n,o){e.each(ZA),n.snaps.each((function(e){UA(t,e)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)},uR=function(t){return function(e,n){var o=function(t){n.setStartData(rR(e,t))};return er(p([rr(jo(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o)))}},cR=Object.freeze({__proto__:null,getData:function(t){return C.from(ka(t.x,t.y))},getDelta:function(t,e){return ka(e.left-t.left,e.top-t.top)}}),sR=function(t,e,n){return[rr(uo(),(function(o,r){var i,a,u,c,s;0===r.event.raw.button&&(r.stop(),u={drop:i=function(){return aR(o,C.some(c),t,e)},delayDrop:(a=Ty(i,200)).schedule,forceDrop:i,move:function(n){a.cancel(),iR(o,t,e,cR,n)}},c=QA(o,t.blockerClass,(s=u,er([rr(uo(),s.forceDrop),rr(lo(),s.drop),rr(co(),(function(t,e){s.move(e.event)})),rr(so(),s.delayDrop)]))),n(o),qA(o,c))}))]},lR=p(eR,[yu("dragger",{handlers:uR(sR)})]),fR=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],C.some(ka(e.clientX,e.clientY))):C.none()},getDelta:function(t,e){return ka(e.left-t.left,e.top-t.top)}}),mR=function(t,e,o){var r=dn(C.none());return[rr(oo(),(function(i,a){a.stop();var u,c=function(){aR(i,r.get(),t,e),r.set(C.none())},s={drop:c,delayDrop:n,forceDrop:c,move:function(n){iR(i,t,e,fR,n)}},l=QA(i,t.blockerClass,(u=s,er([rr(oo(),u.forceDrop),rr(io(),u.drop),rr(ao(),u.drop),rr(ro(),(function(t,e){u.move(e.event)}))])));r.set(C.some(l)),o(i),qA(i,l)})),rr(ro(),(function(n,o){o.stop(),iR(n,t,e,fR,o.event)})),rr(io(),(function(n,o){o.stop(),aR(n,r.get(),t,e),r.set(C.none())})),rr(ao(),(function(n){aR(n,r.get(),t,e),r.set(C.none())}))]},dR=p(eR,[yu("dragger",{handlers:uR(mR)})]),pR=p(eR,[yu("dragger",{handlers:uR((function(t,e,n){return p(sR(t,e,n),mR(t,e,n))}))})]),hR=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:lR,touch:dR,mouseOrTouch:pR}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:C.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=C.none(),e=C.none(),n=r({});return ki({readState:n,reset:function(){t=C.none(),e=C.none()},update:function(e,n){return e.getData(n).bind((function(n){return o=e,r=n,i=t.map((function(t){return o.getDelta(t,r)})),t=C.some(r),i;var o,r,i}))},getStartData:function(){return e},setStartData:function(t){e=C.some(t)}})}}),apis:YA}),gR=function(t,e,n,o,r,i){return t.fold((function(){return hR.snap({sensor:NA(n-20,o-20),range:ka(r,i),output:NA(C.some(n),C.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,a=t.element.dom.getBoundingClientRect();return hR.snap({sensor:NA(r,i),range:ka(40,40),output:NA(C.some(n-a.width/2),C.some(o-a.height/2)),extra:{td:e}})}))},vR=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r,i,a=o.td;r=e.get(),i=a,r.exists((function(t){return Gn(t,i)}))||(e.set(C.some(a)),n(a))},mustSnap:!0}},bR=function(t){return hh(ph.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ac([hR.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),aw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},yR=function(t,e){var n=dn([]),o=dn([]),r=dn(!1),i=dn(C.none()),a=dn(C.none()),u=function(t){var n=La(t);return gR(f.getOpt(e),t,n.x,n.y,n.width,n.height)},c=function(t){var n=La(t);return gR(m.getOpt(e),t,n.right,n.bottom,n.width,n.height)},s=vR((function(){return J(n.get(),u)}),i,(function(e){a.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),l=vR((function(){return J(o.get(),c)}),a,(function(e){i.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=bR(s),m=bR(l),d=ha(f.asSpec()),p=ha(m.asSpec()),h=function(e,n,o,r){var i=o(n);hR.snapTo(e,i),function(e,n,o,r){var i=n.dom.getBoundingClientRect();na(e.element,"display");var a=Cr(hn.fromDom(t.getBody())).dom.innerHeight,u=o(i),c=r(i,a);(u||c)&&Yi(e.element,"display","none")}(e,n,(function(t){return t[r]<0}),(function(t,e){return t[r]>e}))},g=function(t){return h(d,t,u,"top")},v=function(t){return h(p,t,c,"bottom")};Jn().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){r.get()||(al(e,d),al(e,p),r.set(!0)),i.set(C.some(t.start)),a.set(C.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),o.set(e.downOrRightCells),g(t.start),v(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(g),a.get().each(v)})),t.on("TableSelectionClear",(function(){r.get()&&(sl(d),sl(p),r.set(!1)),i.set(C.none()),a.set(C.none())})))};($T=HT=HT||{})[$T.None=0]="None",$T[$T.Both=1]="Both",$T[$T.Vertical=2]="Vertical";var xR,wR,kR,SR=function(t,e,n){var o,r,i,a,u,c,s=hn.fromDom(t.getContainer()),l=(o=t,r=e,i=n,a=ya(s),u=Da(s),(c={}).height=JE(a+r.top,xv(o),kv(o)),i===HT.Both&&(c.width=JE(u+r.left,yv(o),wv(o))),c);Tt(l,(function(t,e){return Yi(s,e,$E(t)),0})),t.fire("ResizeEditor")},CR=function(t,e,n){return e.delimiter||(e.delimiter="»"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ac([up.config({mode:"flow",selector:"div[role=button]"}),hv.config({disabled:n.isDisabled}),Jv(),Yy.config({}),mp.config({}),dp("elementPathEvents",[fr((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return up.focusIn(o)})),t.on("NodeChange",(function(r){var i,a,u=function(e){for(var n=[],o=e.length;0<o--;){var r=e[o];if(1===r.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(r.parents);0<u.length?mp.set(o,(i=J(u||[],(function(e,o){return ph.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:ac([Wv(n.isDisabled),Jv()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},Y(i.slice(1),(function(t,e){var n=t;return n.push(a),n.push(e),n}),[i[0]]))):mp.set(o,[])}))}))])]),components:[]}},_R=function(t,e){var n,o,r,i,a,u;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(a=function(){var n,o,r,i,a,u=[];return t.getParam("elementpath",!0,"boolean")&&u.push(CR(t,{},e)),t.hasPlugin("wordcount")&&u.push((n=t,o=e,i=function(t,e,n){return mp.set(t,[ma(o.translate(["{0} "+n,e[n]]))])},ph.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ac([Wv(o.isDisabled),Jv(),Yy.config({}),mp.config({}),$l.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),dp("wordcount-events",[pr((function(t){var e=$l.getValue(t),n="words"===e.mode?"characters":"words";$l.setValue(t,{mode:n,count:e.count}),i(t,e.count,n)})),fr((function(t){n.on("wordCountUpdate",(function(e){var n=$l.getValue(t).mode;$l.setValue(t,{mode:n,count:e.wordCount}),i(t,e.wordCount,n)}))}))])]),eventOrder:((r={})[To()]=["disabling","alloy.base.behaviour","wordcount-events"],r)}))),t.getParam("branding",!0,"boolean")&&u.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(a=ev.translate(["Powered by {0}","Tiny"]))+'">'+a+"</a>"}}),0<u.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:u}]:[]}(),o=!(n=t).hasPlugin("autoresize"),(u=!1===(r=n.getParam("resize",o))?HT.None:"both"===r?HT.Both:HT.Vertical)!==HT.None&&a.push((i=u,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize"),"aria-hidden":"true"},innerHtml:vh("resize-handle",e.icons)},behaviours:ac([hR.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,n,o){SR(t,o,i)},blockerClass:"tox-blocker"})])})),a)}},OR=function(t){var e,o,r,i,a=t.inline,u=a?YE:LE,c=Vv(t)?nE:TI,s=C.none(),l=Jn(),f=l.browser.isIE()?["tox-platform-ie"]:[],d=l.deviceType.isTouch()?["tox-platform-touch"]:[],p=Mv(t),h=jv(t),g=ev.isRtl()?{attributes:{dir:"rtl"}}:{},v={attributes:((e={})[Xc]=p?nu.BottomToTop:nu.TopToBottom,e)},b=function(){return s.bind(OE.getHeader)},y=function(){Yi(mt.element,"width",document.body.clientWidth+"px")},x=ha((o=Gn(Ui(),h)&&"grid"===Zi(h,"display"),r={dom:m({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(d)},g),behaviours:ac([el.config({useFixed:function(){return c.isDocked(b)}})])},i={dom:{styles:{width:document.body.clientWidth+"px"}},events:er([rr(zo(),y)])},Lt(r,o?i:{}))),w=function(){return ft.value(x)},k=hh({dom:{tag:"div",classes:["tox-anchorbar"]}}),S=function(){return s.bind((function(t){return OE.getThrobber(t)})).getOrDie("Could not find throbber element")},_=KO(x,t,(function(){return s.bind((function(t){return k.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),O=OE.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:_,onEscape:function(){t.focus()}}),D=Iv(t),T=OE.parts.toolbar(m({dom:{tag:"div",classes:["tox-toolbar"]},getSink:w,providers:_.shared.providers,onEscape:function(){t.focus()},type:D,lazyToolbar:function(){return s.bind((function(t){return OE.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return b().getOrDie("Could not find header element")}},v)),I=OE.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:_.shared.providers,onEscape:function(){t.focus()},type:D}),E=OE.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),A=OE.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),R=OE.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:_}),F=t.getParam("statusbar",!0,"boolean")&&!a?C.some(_R(t,_.shared.providers)):C.none(),P={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[E,A]},B=Ov(t),j=Cv(t),z=Sv(t),V=OE.parts.header({dom:m({tag:"div",classes:["tox-editor-header"]},v),components:Z([z?[O]:[],B?[I]:j?[T]:[],Bv(t)?[]:[k.asSpec()]]),sticky:Vv(t),editor:t,sharedBackstage:_.shared}),N=Z([p?[]:[V],a?[]:[P],p?[V]:[]]),L=Z([[{dom:{tag:"div",classes:["tox-editor-container"]},components:N}],a?[]:F.toArray(),[R]]),H=zv(t),$=m(m({role:"application"},ev.isRtl()?{dir:"rtl"}:{}),H?{"aria-hidden":"true"}:{}),J=ha(OE.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(p?["tox-tinymce--toolbar-bottom"]:[]).concat(d).concat(f),styles:m({visibility:"hidden"},H?{opacity:"0",border:"0"}:{}),attributes:$},components:L,behaviours:ac([Jv(),hv.config({disableClass:"tox-tinymce--disabled"}),up.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));s=C.some(J);t.shortcuts.add("alt+F9","focus menubar",(function(){OE.focusMenubar(J)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){OE.focusToolbar(J)})),t.addCommand("ToggleToolbarDrawer",(function(){OE.toggleToolbarDrawer(J)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return OE.isToolbarDrawerToggled(J)}));var W,G,X,Y,K,q,Q,tt,et,nt,ot,rt,it,at,ut,ct,st,lt=$y(J),mt=$y(x);W=t,G=lt,X=mt,Y=function(t,e){U([G,X],(function(n){n.broadcastEvent(t,e)}))},K=function(t,e){U([G,X],(function(n){n.broadcastOn([t],e)}))},q=function(t){return K(Cl(),{target:t.target})},Q=Cy(hn.fromDom(document),"touchstart",q),tt=Cy(hn.fromDom(document),"touchmove",(function(t){return Y(Po(),t)})),et=Cy(hn.fromDom(document),"touchend",(function(t){return Y(Bo(),t)})),nt=Cy(hn.fromDom(document),"mousedown",q),ot=Cy(hn.fromDom(document),"mouseup",(function(t){0===t.raw.button&&K(Ol(),{target:t.target})})),rt=function(t){return K(Cl(),{target:hn.fromDom(t.target)})},it=function(t){0===t.button&&K(Ol(),{target:hn.fromDom(t.target)})},at=function(t){return Y(jo(),Oy(t))},ut=function(t){K(_l(),{}),Y(zo(),Oy(t))},ct=function(){return K(_l(),{})},st=function(t){t.state&&K(Cl(),{target:hn.fromDom(W.getContainer())})},W.on("PostRender",(function(){W.on("click",rt),W.on("tap",rt),W.on("mouseup",it),W.on("ScrollWindow",at),W.on("ResizeWindow",ut),W.on("ResizeEditor",ct),W.on("AfterProgressState",st)})),W.on("remove",(function(){W.off("click",rt),W.off("tap",rt),W.off("mouseup",it),W.off("ScrollWindow",at),W.off("ResizeWindow",ut),W.off("ResizeEditor",ct),W.off("AfterProgressState",st),nt.unbind(),Q.unbind(),tt.unbind(),et.unbind(),ot.unbind()})),W.on("detach",(function(){dl(G),dl(X),G.destroy(),X.destroy()}));var dt=function(){var e,n=$E(UE(t)),o=$E(WE(e=t).getOr(bv(e)));return t.inline||(ea("div","width",o)&&Yi(J.element,"width",o),ea("div","height",n)?Yi(J.element,"height",n):Yi(J.element,"height","200px")),n};return{mothership:lt,uiMothership:mt,backstage:_,renderUI:function(){var e,n,o,r,i,a,s,l;c.setup(t,_.shared,b),cA(t,_),IA(t,w,_),n=(e=t).ui.registry.getAll().sidebars,U(Ot(n),(function(t){var o=n[t],r=function(){return C.from(e.queryCommandValue("ToggleSidebar")).is(t)};e.ui.registry.addToggleButton(t,{icon:o.icon,tooltip:o.tooltip,onAction:function(n){e.execCommand("ToggleSidebar",!1,t),n.setActive(r())},onSetup:function(t){var n=function(){return t.setActive(r())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})),o=t,r=S,i=_.shared,a=dn(!1),s=dn(C.none()),l=function(t){t!==a.get()&&(bE(r(),t,i.providers),a.set(t),o.fire("AfterProgressState",{state:t}))},o.on("ProgressState",(function(t){var e;s.get().each(dh.clearTimeout),M(t.time)?(e=dh.setEditorTimeout(o,(function(){return l(t.state)}),t.time),s.set(C.some(e))):(l(t.state),s.set(C.none()))})),It(t.getParam("toolbar_groups",{},"object"),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var f,d=t.ui.registry.getAll(),p=d.buttons,h=d.menuItems,g=d.contextToolbars,v=d.sidebars,y=_v(t),k={menuItems:h,menus:(f=t.getParam("menu"))?It(f,(function(t){return m(m({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:y.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:D===ig.floating,buttons:p,sidebar:v};xI(t,g,x,{backstage:_}),yR(t,x);var O=t.getElement(),T=dt(),I={mothership:lt,uiMothership:mt,outerContainer:J},E={targetNode:O,height:T};return u.render(t,I,k,_,E)},getUi:function(){return{channels:{broadcastAll:mt.broadcast,broadcastOn:mt.broadcastOn,register:n}}}}},DR=r([He("lazySink"),Ke("dragBlockClass"),sn("getBounds",Ha),nn("useTabstopAt",l),nn("eventOrder",{}),Jl("modalBehaviours",[up]),gu("onExecute"),bu("onEscape")]),TR={sketch:i},IR=r([kf({name:"draghandle",overrides:function(t,e){return{behaviours:ac([hR.config({mode:"mouse",getTarget:function(t){return Ya(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),xf({schema:[He("dom")],name:"title"}),xf({factory:TR,schema:[He("dom")],name:"close"}),xf({factory:TR,schema:[He("dom")],name:"body"}),kf({factory:TR,schema:[He("dom")],name:"footer"}),wf({factory:{sketch:function(t,e){return m(m({},t),{dom:e.dom,components:e.components})}},schema:[nn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),nn("components",[])],name:"blocker"})]),ER=Object.freeze({__proto__:null,block:function(t,e,n,o){Yr(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=ac([up.config({mode:"special",onTab:function(){return C.some(!0)},onShiftTab:function(){return C.some(!0)}}),bp.config({})]),a=o(r,i),u=r.getSystem().build(a);mp.append(r,ga(u)),u.hasConfigured(up)&&up.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return mp.remove(r,u)}))},unblock:function(t,e,n){Qr(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),AR=[sn("getRoot",C.none),hu("onBlock"),hu("onUnblock")],RR=cc({fields:AR,name:"blocking",apis:ER,state:Object.freeze({__proto__:null,init:function(){var t=oI();return ki({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),FR=Yf({name:"ModalDialog",configFields:DR(),partFields:IR(),factory:function(t,e,n,o){var r,a=dn(C.none()),u=ii("modal-events"),c=m(m({},t.eventOrder),((r={})[Vo()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){a.set(C.some(e));var n=t.lazySink(e).getOrDie(),r=o.blocker(),i=n.getSystem().build(m(m({},r),{components:r.components.concat([ga(e)]),behaviours:ac([bp.config({}),dp("dialog-blocker-events",[lr(mo(),(function(){up.focusIn(e)}))])])}));al(n,i),up.focusIn(e)},hide:function(t){a.set(C.none()),_r(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){sl(t)}))}))},getBody:function(e){return Pf(e,t,"body")},getFooter:function(e){return Pf(e,t,"footer")},setIdle:function(t){RR.unblock(t)},setBusy:function(t,e){RR.block(t,e)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Wl(t.modalBehaviours,[mp.config({}),up.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),RR.config({getRoot:a.get}),dp(u,[fr((function(e){var n,o,r,a,u,c;n=e.element,o=Pf(e,t,"title").element,r=qr(n,"id").fold((function(){var t=ii("dialog-label");return Yr(o,"id",t),t}),i),Yr(n,"aria-labelledby",r),a=e.element,u=Pf(e,t,"body").element,c=C.from(Kr(a,"id")).fold((function(){var t=ii("dialog-describe");return Yr(u,"id",t),t}),i),Yr(a,"aria-describedby",c)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),MR=me([Je("type"),Je("name")].concat(Bg)),PR=je,BR=[ye("name","name",Xt((function(){return ii("button-name")})),Be),Qe("icon"),un("align","end",["start","end"]),cn("primary",!1),cn("disabled",!1)],jR=p(BR,[Je("text")]),zR=p([Ue("type",["submit","cancel","custom"])],jR),VR=p([Ue("type",["menu"]),Qe("text"),Qe("tooltip"),Qe("icon"),Ye("items",MR)],BR),NR=Re("type",{submit:zR,cancel:zR,custom:zR,menu:VR}),LR=[Je("type"),Je("text"),Ue("level",["info","warn","error","success"]),Je("icon"),nn("url","")],HR=me(LR),$R=[Je("type"),Je("text"),cn("disabled",!1),cn("primary",!1),ye("name","name",Xt((function(){return ii("button-name")})),Be),Qe("icon"),cn("borderless",!1)],JR=me($R),UR=[Je("type"),Je("name"),Je("label"),cn("disabled",!1)],WR=me(UR),GR=je,XR=[Je("type"),Je("name")],YR=XR.concat([Qe("label")]),KR=YR.concat([nn("columns","auto")]),qR=me(KR),ZR=Se([Je("value"),Je("text"),Je("icon")]),QR=me(YR),tF=Be,eF=me(YR),nF=Be,oF=XR.concat([an("tag","textarea"),Je("scriptId"),Je("scriptUrl"),(xR=void 0,on("settings",xR,Ne))]),rF=XR.concat([an("tag","textarea"),We("init")]),iF=_e((function(t){return De("customeditor.old",fe(rF),t).orThunk((function(){return De("customeditor.new",fe(oF),t)}))})),aF=Be,uF=me(YR),cF=de(ke),sF=function(t){return[Je("type"),$e("columns",Pe),t]},lF=[Je("type"),Je("html"),un("presets","presentation",["presentation","document"])],fF=me(lF),mF=YR.concat([cn("sandboxed",!0)]),dF=me(mF),pF=Be,hF=YR.concat([$e("currentState",me([He("blob"),Je("url")]))]),gF=me(hF),vF=YR.concat([Qe("inputMode"),Qe("placeholder"),cn("maximized",!1),cn("disabled",!1)]),bF=me(vF),yF=Be,xF=[Je("text"),Je("value")],wF=[Je("text"),Ye("items",(wR=function(){return kF},kR=$t((function(){return wR()})),{extract:function(t,e,n){return kR().extract(t,e,n)},toString:function(){return kR().toString()}}))],kF=pe([me(xF),me(wF)]),SF=YR.concat([Ye("items",kF),cn("disabled",!1)]),CF=me(SF),_F=Be,OF=YR.concat([Xe("items",[Je("text"),Je("value")]),rn("size",1),cn("disabled",!1)]),DF=me(OF),TF=Be,IF=YR.concat([cn("constrain",!0),cn("disabled",!1)]),EF=me(IF),AF=me([Je("width"),Je("height")]),RF=[Je("type"),Ye("header",Be),Ye("cells",de(Be))],FF=me(RF),MF=YR.concat([Qe("placeholder"),cn("maximized",!1),cn("disabled",!1)]),PF=me(MF),BF=Be,jF=YR.concat([un("filetype","file",["image","media","file"]),nn("disabled",!1)]),zF=me(jF),VF=me([Je("value"),nn("meta",{})]),NF=function(t){return ye("items","items",Wt(),de(_e((function(e){return De("Checking item of "+t,LF,e).fold((function(t){return ft.error(Ee(t))}),(function(t){return ft.value(t)}))}))))},LF=Ce((function(){return Ae("type",{alertbanner:HR,bar:me((e=NF("bar"),[Je("type"),e])),button:JR,checkbox:WR,colorinput:QR,colorpicker:eF,dropzone:uF,grid:me(sF(NF("grid"))),iframe:dF,input:bF,listbox:CF,selectbox:DF,sizeinput:EF,textarea:PF,urlinput:zF,customeditor:iF,htmlpanel:fF,imagetools:gF,collection:qR,label:me((t=NF("label"),[Je("type"),Je("label"),t])),table:FF,panel:$F});var t,e})),HF=[Je("type"),nn("classes",[]),Ye("items",LF)],$F=me(HF),JF=[ye("name","name",Xt((function(){return ii("tab-name")})),Be),Je("title"),Ye("items",LF)],UF=[Je("type"),Xe("tabs",JF)],WF=me(UF),GF=jR,XF=NR,YF=me([Je("title"),$e("body",Ae("type",{panel:$F,tabpanel:WF})),an("size","normal"),Ye("buttons",XF),nn("initialData",{}),sn("onAction",n),sn("onChange",n),sn("onSubmit",n),sn("onClose",n),sn("onCancel",n),nn("onTabChange",n)]),KF=me(p([Ue("type",["cancel","custom"])],GF)),qF=me([Je("title"),Je("url"),Ze("height"),Ze("width"),qe("buttons",de(KF)),sn("onAction",n),sn("onCancel",n),sn("onClose",n),sn("onMessage",n)]),ZF=function t(e){return T(e)?[e].concat(Q(Mt(e),t)):I(e)?Q(e,t):[]},QF=function(t){return D(t.type)&&D(t.name)},tM={checkbox:GR,colorinput:tF,colorpicker:nF,dropzone:cF,input:yF,iframe:pF,sizeinput:AF,selectbox:TF,listbox:_F,size:AF,textarea:BF,urlinput:VF,customeditor:aF,collection:ZR,togglemenuitem:PR},eM=function(t){var e=G(ZF(t),QF),n=Q(e,(function(t){return e=t,C.from(tM[e.type]).fold((function(){return[]}),(function(e){return[$e(t.name,e)]}));var e}));return me(n)},nM=function(t){return{internalDialog:Te(De("dialog",YF,t)),dataValidator:eM(t),initialData:t.initialData}},oM={open:function(t,e){var n=nM(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(Te(De("dialog",qF,e)))},redial:nM},rM=function(t){var e=[],n={};return Tt(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),0<e.length?ft.error(e):ft.value(n)},iM=Xf({name:"TabButton",configFields:[nn("uid",void 0),He("value"),ye("dom","dom",Yt((function(){return{attributes:{role:"tab",id:ii("aria"),"aria-selected":"false"}}})),Fe()),Ke("action"),nn("domModification",{}),Jl("tabButtonBehaviours",[bp,up,$l]),He("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Rp(t.action),behaviours:Wl(t.tabButtonBehaviours,[bp.config({}),up.config({mode:"execution",useSpace:!0,useEnter:!0}),$l.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),aM=r([He("tabs"),He("dom"),nn("clickToDismiss",!1),Jl("tabbarBehaviours",[mm,up]),du(["tabClass","selectedClass"])]),uM=Sf({factory:iM,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){mm.dehighlight(t,e),Ko(t,Wo(),{tabbar:t,button:e})},o=function(t,e){mm.highlight(t,e),Ko(t,Uo(),{tabbar:t,button:e})};return{action:function(r){var i=r.getSystem().getByUid(t.uid).getOrDie(),a=mm.isHighlighted(i,r);(a&&t.clickToDismiss?e:a?n:o)(i,r)},domModification:{classes:[t.markers.tabClass]}}}}),cM=r([uM]),sM=Yf({name:"Tabbar",configFields:aM(),partFields:cM(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Wl(t.tabbarBehaviours,[mm.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Yr(e.element,"aria-selected","true")},onDehighlight:function(t,e){Yr(e.element,"aria-selected","false")}}),up.config({mode:"flow",getInitial:function(t){return mm.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),lM=Xf({name:"Tabview",configFields:[Jl("tabviewBehaviours",[mp])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Wl(t.tabviewBehaviours,[mp.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),fM=r([nn("selectFirst",!0),hu("onChangeTab"),hu("onDismissTab"),nn("tabs",[]),Jl("tabSectionBehaviours",[])]),mM=xf({factory:sM,schema:[He("dom"),Ge("markers",[He("tabClass"),He("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),dM=xf({factory:lM,name:"tabview"}),pM=r([mM,dM]),hM=Yf({name:"TabSection",configFields:fM(),partFields:pM(),factory:function(t,e,n,o){var r=function(e,n){Mf(e,t,"tabbar").each((function(t){n(t).each(qo)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:Ul(t.tabSectionBehaviours),events:er(Z([t.selectFirst?[fr((function(t,e){r(t,mm.getFirst)}))]:[],[rr(Uo(),(function(e,n){var o,r,i=n.event.button;o=i,r=$l.getValue(o),Mf(o,t,"tabview").each((function(e){K(t.tabs,(function(t){return t.value===r})).each((function(n){var r=n.view();qr(o.element,"id").each((function(t){Yr(e.element,"aria-labelledby",t)})),mp.set(e,r),t.onChangeTab(e,o,r)}))}))})),rr(Wo(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return Mf(e,t,"tabview").map((function(t){return mp.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){var n=mm.getCandidates(t);return K(n,(function(t){return $l.getValue(t)===e})).filter((function(e){return!mm.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),gM=function(t,e){Yi(t,"height",e+"px"),Jn().browser.isIE()?na(t,"flex-basis"):Yi(t,"flex-basis",e+"px")},vM=function(t,e,n){Ya(t,'[role="dialog"]').each((function(t){Ka(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return Yi(e,"height","0"),Yi(e,"flex-basis","0"),Math.min(n,(i=e,a=o,u=Sr(r=t).dom,c=Ya(r,".tox-dialog-wrap").getOr(r),s="fixed"===Zi(c,"position")?Math.max(u.clientHeight,window.innerHeight):Math.max(u.offsetHeight,u.scrollHeight),l=ya(i),f=i.dom.offsetLeft>=a.dom.offsetLeft+Da(a)?Math.max(ya(a),l):l,m=parseInt(Zi(r,"margin-top"),10)||0,d=parseInt(Zi(r,"margin-bottom"),10)||0,s-(ya(r)+m+d-f)));var r,i,a,u,c,s,l,f,m,d})).each((function(t){gM(e,t)}))}))}))},bM=function(t){return Ka(t,'[role="tabpanel"]')},yM=function(t){var e;return{smartTabHeight:(e=dn(C.none()),{extraEvents:[fr((function(n){var o=n.element;bM(o).each((function(r){var i;Yi(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((function(n){var o,i,a,u=(i=r,a=n,J(o=t,(function(t,e){mp.set(a,o[e].view());var n=i.dom.getBoundingClientRect();return mp.set(a,[]),n.height}))),c=it(ot(u,(function(t,e){return e<t?-1:t<e?1:0})));e.set(c)})),vM(o,r,e),na(r,"visibility"),i=n,it(t).each((function(t){return hM.showTab(i,t.value)})),dh.requestAnimationFrame((function(){vM(o,r,e)}))}))})),rr(zo(),(function(t){var n=t.element;bM(n).each((function(t){vM(n,t,e)}))})),rr(sx,(function(t,n){var o=t.element;bM(o).each((function(t){var n=hc(Fr(t));Yi(t,"visibility","hidden");var r=ta(t,"height").map((function(t){return parseInt(t,10)}));na(t,"height"),na(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall((function(t){return t<i}))?(e.set(C.from(i)),vM(o,t,e)):r.each((function(e){gM(t,e)})),na(t,"visibility"),n.each(pc)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},xM="send-data-to-section",wM="send-data-to-view",kM=ii("update-dialog"),SM=ii("update-title"),CM=ii("update-body"),_M=ii("update-footer"),OM=ii("body-send-message"),DM=function(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:m(m({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:ac([sS(0),aT.config({channel:CM,updateState:function(t,e){return C.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(i=t.body,a=n,c=dn({}),s=function(t){var e=$l.getValue(t),n=rM(e).getOr({}),o=c.get(),r=Lt(o,n);c.set(r)},l=function(t){var e=c.get();$l.setValue(t,e)},f=dn(null),m=J(i.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:a.shared.providers.translate(t.title)},view:function(){return[Qk.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"]},components:J(t.items,(function(t){return lO(e,t,a)})),formBehaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(TS)}),dp("TabView.form.events",[fr(l),mr(s)]),mc.config({channels:Qt([{key:xM,value:{onReceive:s}},{key:wM,value:{onReceive:l}}])})])}}))]}}})),d=yM(m).smartTabHeight,hM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=$l.getValue(e);Ko(t,cx,{name:o,oldName:f.get()}),f.set(o)},tabs:m,components:[hM.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[sM.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ac([Yy.config({})])}),hM.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:d.selectFirst,tabSectionBehaviours:ac([dp("tabpanel",d.extraEvents),up.config({mode:"acyclic"}),em.config({find:function(t){return it(hM.getViewItems(t))}}),$l.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([xM],{}),c.get()},setValue:function(t,e){c.set(e),t.getSystem().broadcastOn([wM],{})}}})])}))];default:return[(e=t.body,o=n,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=hh(Qk.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:J(e.items,(function(e){return lO(t,e,o)}))}})))).asSpec()]}],behaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(TS)}),cS(r),vS(r,{postprocess:function(t){return rM(t).fold((function(t){return console.error(t),{}}),(function(t){return t}))}})])})]}var e,o,r,i,a,c,s,l,f,m,d},initialData:t})])}},TM=nb.deviceType.isTouch(),IM=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},EM=function(t,e){return FR.parts.close(ph.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:ac([Yy.config({})])}))},AM=function(){return FR.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},RM=function(t,e){return FR.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:vE("<p>"+e.translate(t)+"</p>")}]}]})},FM=function(t){return FR.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},MM=function(t,e){return[Hy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Hy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},PM=function(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return FR.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),C.some(!0)},useTabstopAt:function(t){return!TS(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:m({position:"relative"},t.extraStyles)},components:p([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:vE('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:TM?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:ac(p([bp.config({}),dp("dialog-events",t.dialogEvents.concat([lr(mo(),(function(t,e){up.focusIn(t)}))])),dp("scroll-lock",[fr((function(){ji(Ui(),i)})),mr((function(){Vi(Ui(),i)}))])],t.extraBehaviours)),eventOrder:m(((e={})[To()]=["dialog-events"],e[Vo()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[No()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},BM=function(t){return ph.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vh("close",t.icons)}}],action:function(t){Yo(t,ox)}})},jM=function(t,e,n){var o=function(t){return[ma(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:m({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:ac([aT.config({channel:SM,renderComponents:o})])}},zM=function(){return{dom:vE('<div class="tox-dialog__draghandle"></div>')}},VM=function(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=FR.parts.title(jM(n,C.none(),o)),i=FR.parts.draghandle(zM()),a=FR.parts.close(BM(o)),u=[r].concat(n.draggable?[i]:[]).concat([a]),Hy.sketch({dom:vE('<div class="tox-dialog__header"></div>'),components:u});var n,o,r,i,a,u},NM=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:vE('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},LM=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){FR.setBusy(t(),(function(t,o){return NM(n.message,o,e)}))},onUnblock:function(){FR.setIdle(t())}}},HM=function(t,e,n,o){var r;return ha(PM(m(m({},t),{lazySink:o.shared.getSink,extraBehaviours:p([aT.config({channel:kM,updateState:function(t,e){return C.some(e)},initialData:e}),xS({})],t.extraBehaviours),onEscape:function(t){Yo(t,ox)},dialogEvents:n,eventOrder:((r={})[Do()]=[aT.name(),mc.name()],r[Vo()]=["scroll-lock",aT.name(),"messages","dialog-events","alloy.base.behaviour"],r[No()]=["alloy.base.behaviour","dialog-events","messages",aT.name(),"scroll-lock"],r)})))},$M=function(t){return J(t,(function(t){return"menu"===t.type?(n=J((e=t).items,(function(t){var e=dn(!1);return m(m({},t),{storage:e})})),m(m({},e),{items:n})):t;var e,n}))},JM=function(t){return Y(t,(function(t,e){return"menu"!==e.type?t:Y(e.items,(function(t,e){return t[e.name]=e.storage,t}),t)}),{})},UM=function(t,e){return[cr(mo(),DS),t(nx,(function(t,n){e.onClose(),n.onClose()})),t(ox,(function(t,e,n,o){e.onCancel(t),Yo(o,nx)})),rr(ux,(function(t,n){return e.onUnblock()})),rr(ax,(function(t,n){return e.onBlock(n.event)}))]},WM=function(t,e){var n=function(e,n){return rr(e,(function(e,r){o(e,(function(o,i){n(t(),o,r.event,e)}))}))},o=function(t,e){aT.getState(t).get().each((function(n){e(n,t)}))};return p(UM(n,e),[n(rx,(function(t,e,n){e.onAction(t,{name:n.name})}))])},GM=function(t,e,n){var o=function(e,n){return rr(e,(function(e,o){r(e,(function(r,i){n(t(),r,o.event,e)}))}))},r=function(t,e){aT.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return p(UM(o,e),[o(ix,(function(t,e){return e.onSubmit(t)})),o(ex,(function(t,e,n){e.onChange(t,{name:n.name})})),o(rx,(function(t,e,o,r){var i=function(){return up.focusIn(r)},a=function(t){return Zr(t,"disabled")||qr(t,"aria-disabled").exists((function(t){return"true"===t}))},u=Fr(r.element),c=hc(u);e.onAction(t,{name:o.name,value:o.value}),hc(u).fold(i,(function(t){a(t)||c.exists((function(e){return Yn(t,e)&&a(e)}))?i():n().toOptional().filter((function(e){return!Yn(e.element,t)})).each(i)}))})),o(cx,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),mr((function(e){var n=t();$l.setValue(e,n.getData())}))])},XM=function(t,e){var n=e.map((function(t){return t.footerButtons})).getOr([]),o=W(n,(function(t){return"start"===t.align})),r=function(t,e){return Hy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:J(e,(function(t){return t.memento.asSpec()}))})};return[r("start",o.pass),r("end",o.fail)]},YM=function(t,e){return{dom:vE('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ac([aT.config({channel:_M,initialData:t,updateState:function(t,n){var o=J(n.buttons,(function(t){var n,o,r=hh((o=e,ZC(n=t,n.type,o)));return{name:t.name,align:t.align,memento:r}}));return C.some({lookupByName:function(t,e){return n=t,r=e,K(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(n)}));var n,r},footerButtons:o})},renderComponents:XM})])}},KM=YM,qM=function(t,e){return FR.parts.footer(YM(t,e))},ZM=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=em.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Qk.getField(n,e).fold((function(){var o=t.getFooter();return aT.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return C.some(t)}))}return C.none()},QM=function(t,e,n){var o=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=$l.getValue(o),i=It(n,(function(t){return t.get()}));return m(m({},r),i)},setData:function(e){o((function(o){var i,a,u=r.getData(),c=m(m({},u),e),s=(i=c,a=t.getRoot(),aT.getState(a).get().map((function(t){return Te(De("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper();$l.setValue(l,s),Tt(n,(function(t,e){Bt(c,e)&&t.set(c[e])}))}))},disable:function(e){ZM(t,e).each(hv.disable)},enable:function(e){ZM(t,e).each(hv.enable)},focus:function(e){ZM(t,e).each(bp.focus)},block:function(t){if(!D(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){Ko(e,ax,{message:t})}))},unblock:function(){o((function(t){Yo(t,ux)}))},showTab:function(e){o((function(n){var o=t.getBody();aT.getState(o).get().exists((function(t){return t.isTabPanel()}))&&em.getCurrent(o).each((function(t){hM.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([kM],o),n.getSystem().broadcastOn([SM],o.internalDialog),n.getSystem().broadcastOn([CM],o.internalDialog),n.getSystem().broadcastOn([_M],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){Yo(t,nx)}))}};return r},tP=function(t,e,n){var o,r,i,a=VM(t.internalDialog.title,n),u=(o={body:t.internalDialog.body},r=n,i=DM(o,C.none(),r,!1),FR.parts.body(i)),c=$M(t.internalDialog.buttons),s=JM(c),l=qM({buttons:c},n),f=GM((function(){return h}),LM((function(){return p}),n.shared.providers,e),n.shared.getSink),m=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),d={header:a,body:u,footer:C.some(l),extraClasses:m,extraBehaviours:[],extraStyles:{}},p=HM(d,t,f,n),h=QM({getRoot:function(){return p},getBody:function(){return FR.getBody(p)},getFooter:function(){return FR.getFooter(p)},getFormWrapper:function(){var t=FR.getBody(p);return em.getCurrent(t).getOr(t)}},e.redial,s);return{dialog:p,instanceApi:h}},eP=function(t,e,n,o){var r,i,a,u,c,s,l,f,m,d=ii("dialog-label"),p=ii("dialog-content"),h=hh((a={title:t.internalDialog.title,draggable:!0},u=d,c=n.shared.providers,Hy.sketch({dom:vE('<div class="tox-dialog__header"></div>'),components:[jM(a,C.some(u),c),zM(),BM(c)],containerBehaviours:ac([hR.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return qa(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),g=hh((s={body:t.internalDialog.body},l=p,f=n,m=o,DM(s,C.some(l),f,m))),v=$M(t.internalDialog.buttons),b=JM(v),y=hh(KM({buttons:v},n)),x=GM((function(){return k}),{onBlock:function(t){RR.block(w,(function(e,o){return NM(t.message,o,n.shared.providers)}))},onUnblock:function(){RR.unblock(w)},onClose:function(){return e.closeWindow()}},n.shared.getSink),w=ha({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((r={role:"dialog"})["aria-labelledby"]=d,r["aria-describedby"]=""+p,r)},eventOrder:((i={})[Do()]=[aT.name(),mc.name()],i[To()]=["execute-on-form"],i[Vo()]=["reflecting","execute-on-form"],i),behaviours:ac([up.config({mode:"cyclic",onEscape:function(t){return Yo(t,nx),C.some(!0)},useTabstopAt:function(t){return!TS(t)&&("button"!==hr(t)||"disabled"!==Kr(t,"disabled"))}}),aT.config({channel:kM,updateState:function(t,e){return C.some(e)},initialData:t}),bp.config({}),dp("execute-on-form",x.concat([lr(mo(),(function(t,e){up.focusIn(t)}))])),RR.config({getRoot:function(){return C.some(w)}}),mp.config({}),xS({})]),components:[h.asSpec(),g.asSpec(),y.asSpec()]}),k=QM({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return g.get(w)},getFormWrapper:function(){var t=g.get(w);return em.getCurrent(t).getOr(t)}},e.redial,b);return{dialog:w,instanceApi:k}},nP=tinymce.util.Tools.resolve("tinymce.util.URI"),oP=["insertContent","setContent","execCommand","close","block","unblock"],rP=function(t){return T(t)&&-1!==oP.indexOf(t.mceAction)},iP=function(t,e,n,o){var r,i,a,c,s=VM(t.title,o),l=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[_S({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ac([Yy.config({}),bp.config({})])})]}],behaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(TS)})])},FR.parts.body(i)),f=t.buttons.bind((function(t){return 0===t.length?C.none():C.some(qM({buttons:t},o))})),d=WM((function(){return w}),LM((function(){return x}),o.shared.providers,e)),p=m(m({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),h=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],g=new nP(t.url,{base_uri:new nP(window.location.href)}),v=g.protocol+"://"+g.host+(g.port?":"+g.port:""),b=dn(C.none()),y=[dp("messages",[fr((function(){var e=Cy(hn.fromDom(window),"message",(function(e){var o,r;g.isSameOrigin(new nP(e.raw.origin))&&(o=e.raw.data,rP(o)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!E(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!rP(r=o)&&T(r)&&Bt(r,"mceAction")&&t.onMessage(w,o))}));b.set(C.some(e))})),mr((function(){b.get().each((function(t){return t.unbind()}))}))]),mc.config({channels:((r={})[OM]={onReceive:function(t,e){Ka(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},r)})],x=HM({header:s,body:l,footer:f,extraClasses:h,extraBehaviours:y,extraStyles:p},t,d,o),w=(c=function(t){a.getSystem().isConnected()&&t(a)},{block:function(t){if(!D(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((function(e){Ko(e,ax,{message:t})}))},unblock:function(){c((function(t){Yo(t,ux)}))},close:function(){c((function(t){Yo(t,nx)}))},sendMessage:function(t){c((function(e){e.getSystem().broadcastOn([OM],t)}))}});return{dialog:a=x,instanceApi:w}},aP=function(t){var e,n,o,r,i=t.backstage,a=t.editor,u=Vv(a),c=(n=(e=t).backstage.shared,{open:function(t,o){var r=function(){FR.hide(c),o()},i=hh(ZC({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:C.none()},"cancel",e.backstage)),a=AM(),u=EM(r,n.providers),c=ha(PM({lazySink:function(){return n.getSink()},header:IM(a,u),body:RM(t,n.providers),footer:C.some(FM(MM([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,r)],eventOrder:{}}));FR.show(c);var s=i.get(c);bp.focus(s)}}),s=(r=(o=t).backstage.shared,{open:function(t,e){var n=function(t){FR.hide(s),e(t)},i=hh(ZC({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:C.none()},"submit",o.backstage)),a=ZC({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:C.none()},"cancel",o.backstage),u=AM(),c=EM((function(){return n(!1)}),r.providers),s=ha(PM({lazySink:function(){return r.getSink()},header:IM(u,c),body:RM(t,r.providers),footer:C.some(FM(MM([],[a,i.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,(function(){return n(!1)})),rr(ix,(function(){return n(!0)}))],eventOrder:{}}));FR.show(s);var l=i.get(s);bp.focus(l)}}),l=function(t,e){return oM.openUrl((function(t){var n=iP(t,{closeWindow:function(){FR.hide(n.dialog),e(n.instanceApi)}},a,i);return FR.show(n.dialog),n.instanceApi}),t)},f=function(t,e){return oM.open((function(t,n,o){var r=n,a=tP({dataValidator:o,initialData:r,internalDialog:t},{redial:oM.redial,closeWindow:function(){FR.hide(a.dialog),e(a.instanceApi)}},i);return FR.show(a.dialog),a.instanceApi.setData(r),a.instanceApi}),t)},d=function(t,e,n,o){return oM.open((function(t,r,c){var s,l,f,d=Te(De("data",c,r)),h=(s=dn(C.none()),{clear:function(){return s.set(C.none())},set:function(t){return s.set(C.some(t))},isSet:function(){return s.get().isSome()},on:function(t){return s.get().each(t)}}),g=i.shared.header.isPositionedAtTop(),v=function(){return h.on((function(t){eh.reposition(t),XI.refresh(t)}))},b=eP({dataValidator:c,initialData:d,internalDialog:t},{redial:oM.redial,closeWindow:function(){h.on(eh.hide),a.off("ResizeEditor",v),h.clear(),n(b.instanceApi)}},i,o),y=ha(eh.sketch(m(m({lazySink:i.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},g?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:ac(p([dp("window-manager-inline-events",[rr(Lo(),(function(t,e){Yo(b.dialog,ox)}))])],(l=a,f=g,u&&f?[]:[XI.config({contextual:{lazyContext:function(){return C.some(Na(hn.fromDom(l.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]))),isExtraPart:function(t,e){return Dy(n=e,".tox-alert-dialog")||Dy(n,".tox-confirm-dialog");var n}})));return h.set(y),eh.showWithin(y,e,ga(b.dialog),C.some(Ui())),u&&g||(XI.refresh(y),a.on("ResizeEditor",v)),b.instanceApi.setData(d),up.focusIn(b.dialog),b.instanceApi}),t)};return{open:function(t,e,n){return void 0!==e&&"toolbar"===e.inline?d(t,i.shared.anchors.inlineDialog(),n,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?d(t,i.shared.anchors.cursor(),n,e.ariaAttrs):f(t,n)},openUrl:function(t,e){return l(t,e)},alert:function(t,e){c.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){s.open(t,(function(t){e(t)}))}}};f.add("silver",(function(t){var e=OR(t),n=e.uiMothership,o=e.backstage,i=e.renderUI,a=e.getUi;ky(t,o.shared);var u=aP({editor:t,backstage:o});return{renderUI:i,getWindowManagerImpl:r(u),getNotificationManagerImpl:function(){return xh(0,{backstage:o},n)},ui:a()}}))}()}).call(this,n("c8ba"))},"7df4":function(t,e,n){},"831c":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var o=n("b775");function r(){return Object(o["a"])({url:"/approval-page",method:"get"})}function i(t){return Object(o["a"])({url:"/approval-page",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/approval-page",method:"delete",data:t})}},"84bb":function(t,e,n){"use strict";n("a076")},"86ec":function(t,e,n){"use strict";n("32af")},9367:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-organization/"+t,method:"get"})}},9695:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/total/"+t,method:"get"})}function i(t,e){return Object(o["a"])({url:"declaration-form/status-reviewer/"+t,method:"post",data:e})}},"96d7":function(t,e,n){},9944:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/condition-guarantee/"+t,method:"get"})}},"9b97":function(t,e,n){},a076:function(t,e,n){},a7f8:function(t,e,n){"use strict";n("e6e5")},a8a8:function(t,e,n){},c551:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s}));var o=n("b775");function r(t){return Object(o["a"])({url:"/data-maintenance/add-college",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/data-maintenance/add-organization",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/data-maintenance/add-import-organization",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/data-maintenance/add-import-majors",method:"post",data:t})}function c(){return Object(o["a"])({url:"/data-maintenance/get-organizations",method:"get"})}function s(){return Object(o["a"])({url:"/data-maintenance/get-majors",method:"get"})}},c710:function(t,e,n){"use strict";n("6160")},c805:function(t,e,n){"use strict";n("f840")},d4b4:function(t,e,n){"use strict";n("ebe0")},d5a5:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{attrs:{id:t.tinymceId}})])},r=[],i=(n("b680"),n("7c27"),n("22da"),{props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,required:!0}},data:function(){return{tinymceId:this.id,tinymceFlag:1,hasChange:!1,hasInit:!1}},mounted:function(){var t=this;tinymce.init({selector:"#".concat(this.tinymceId),language:"zh_CN",menubar:"bar1 bar2",menu:{bar1:{title:"菜单栏",items:"copy paste"}},toolbar:"undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright | fontsizeselect | fontselect ",font_formats:"宋体=宋体;仿宋=仿宋;黑体=黑体'",init_instance_callback:function(e){e.on("input",(function(e){t.$emit("input",e.target.innerHTML)})),e.on("change",(function(e){t.$emit("input",e.level.content)}))},setup:function(e){e.on("init",(function(n){e.setContent(t.value)}))},height:600})},created:function(){},watch:{value:function(t,e){var n=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(n.tinymceId).setContent(t)}))}},methods:{setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.status&&t.destroy(),t&&t.destroy(),console.log("aa")}}}),a=i,u=(n("a7f8"),n("2877")),c=Object(u["a"])(a,o,r,!1,null,null,null);e["a"]=c.exports},dc08:function(t,e,n){"use strict";n("0e8d")},e5ac:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/rules-and-regulations/"+t,method:"get"})}},e6e5:function(t,e,n){},e8c0:function(t,e,n){"use strict";n("5793")},ebe0:function(t,e,n){},f840:function(t,e,n){},fc0e:function(t,e,n){"use strict";n("7df4")},fc60:function(t,e,n){"use strict";n("9b97")},fdc2:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var o=n("b775");function r(t,e){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"post",data:e})}function i(t){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"get"})}},fe41:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/course-material/"+t,method:"get"})}},ff84:function(t,e,n){"use strict";n("1488")}}]);