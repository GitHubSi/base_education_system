(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65676d93"],{"0135":function(t,e,n){},"04eb":function(t,e,n){"use strict";n("32d8")},"0762":function(t,e,n){"use strict";n("5ad0")},"09bf":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-research/"+t,method:"get"})}},"0d78":function(t,e,n){},1981:function(t,e,n){"use strict";n("8528")},"1d7f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/principal/"+t,method:"get"})}},"22da":function(t,e){tinymce.addI18n("zh_CN",{Redo:"重做",Undo:"撤销",Cut:"剪切",Copy:"复制",Paste:"粘贴","Select all":"全选","New document":"新文件",Ok:"确定",Cancel:"取消","Visual aids":"网格线",Bold:"粗体",Italic:"斜体",Underline:"下划线",Strikethrough:"删除线",Superscript:"上标",Subscript:"下标","Clear formatting":"清除格式","Align left":"左边对齐","Align center":"中间对齐","Align right":"右边对齐",Justify:"两端对齐","Bullet list":"项目符号","Numbered list":"编号列表","Decrease indent":"减少缩进","Increase indent":"增加缩进",Close:"关闭",Formats:"格式","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",Headers:"标题","Header 1":"标题1","Header 2":"标题2","Header 3":"标题3","Header 4":"标题4","Header 5":"标题5","Header 6":"标题6",Headings:"标题","Heading 1":"标题1","Heading 2":"标题2","Heading 3":"标题3","Heading 4":"标题4","Heading 5":"标题5","Heading 6":"标题6",Preformatted:"预先格式化的",Div:"Div",Pre:"Pre",Code:"代码",Paragraph:"段落",Blockquote:"引文区块",Inline:"文本",Blocks:"基块","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Fonts:"字体","Font Sizes":"字号",Class:"类型","Browse for an image":"浏览图像",OR:"或","Drop an image here":"拖放一张图像至此",Upload:"上传",Block:"块",Align:"对齐",Default:"默认",Circle:"空心圆",Disc:"实心圆",Square:"方块","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马字母","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Anchor...":"锚点...",Name:"名称",Id:"标识符","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character...":"特殊字符...","Source code":"源代码","Insert/Edit code sample":"插入/编辑代码示例",Language:"语言","Code sample...":"示例代码...","Color Picker":"选色器",R:"R",G:"G",B:"B","Left to right":"从左到右","Right to left":"从右到左","Emoticons...":"表情符号...","Metadata and Document Properties":"元数据和文档属性",Title:"标题",Keywords:"关键词",Description:"描述",Robots:"机器人",Author:"作者",Encoding:"编码",Fullscreen:"全屏",Action:"操作",Shortcut:"快捷键",Help:"帮助",Address:"地址","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏","Focus to element path":"移动焦点到元素路径","Focus to contextual toolbar":"移动焦点到上下文菜单","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Save (if save plugin activated)":"保存(如果保存插件已激活)","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Plugins installed ({0}):":"已安装插件 ({0}):","Premium plugins:":"优秀插件：","Learn more...":"了解更多...","You are using {0}":"你正在使用 {0}",Plugins:"插件","Handy Shortcuts":"快捷键","Horizontal line":"水平分割线","Insert/edit image":"插入/编辑图片","Image description":"图片描述",Source:"地址",Dimensions:"大小","Constrain proportions":"保持纵横比",General:"普通",Advanced:"高级",Style:"样式","Vertical space":"垂直边距","Horizontal space":"水平边距",Border:"边框","Insert image":"插入图片","Image...":"图片...","Image list":"图片列表","Rotate counterclockwise":"逆时针旋转","Rotate clockwise":"顺时针旋转","Flip vertically":"垂直翻转","Flip horizontally":"水平翻转","Edit image":"编辑图片","Image options":"图片选项","Zoom in":"放大","Zoom out":"缩小",Crop:"裁剪",Resize:"调整大小",Orientation:"方向",Brightness:"亮度",Sharpen:"锐化",Contrast:"对比度","Color levels":"颜色层次",Gamma:"伽马值",Invert:"反转",Apply:"应用",Back:"后退","Insert date/time":"插入日期/时间","Date/time":"日期/时间","Insert/Edit Link":"插入/编辑链接","Insert/edit link":"插入/编辑链接","Text to display":"显示文字",Url:"地址","Open link in...":"链接打开位置...","Current window":"当前窗口",None:"无","New window":"在新窗口打开","Remove link":"删除链接",Anchors:"锚点","Link...":"链接...","Paste or type a link":"粘贴或输入链接","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Link list":"链接列表","Insert video":"插入视频","Insert/edit video":"插入/编辑视频","Insert/edit media":"插入/编辑媒体","Alternative source":"镜像","Alternative source URL":"替代来源网址","Media poster (Image URL)":"封面(图片地址)","Paste your embed code below:":"将内嵌代码粘贴在下面:",Embed:"内嵌","Media...":"多媒体...","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览","Print...":"打印...",Save:"保存",Find:"查找","Replace with":"替换为",Replace:"替换","Replace all":"全部替换",Previous:"上一个",Next:"下一个","Find and replace...":"查找并替换...","Could not find the specified string.":"未找到搜索内容.","Match case":"区分大小写","Find whole words only":"全字匹配","Spell check":"拼写检查",Ignore:"忽略","Ignore all":"全部忽略",Finish:"完成","Add to Dictionary":"添加到字典","Insert table":"插入表格","Table properties":"表格属性","Delete table":"删除表格",Cell:"单元格",Row:"行",Column:"列","Cell properties":"单元格属性","Merge cells":"合并单元格","Split cell":"拆分单元格","Insert row before":"在上方插入","Insert row after":"在下方插入","Delete row":"删除行","Row properties":"行属性","Cut row":"剪切行","Copy row":"复制行","Paste row before":"粘贴到上方","Paste row after":"粘贴到下方","Insert column before":"在左侧插入","Insert column after":"在右侧插入","Delete column":"删除列",Cols:"列",Rows:"行",Width:"宽",Height:"高","Cell spacing":"单元格外间距","Cell padding":"单元格内边距","Show caption":"显示标题",Left:"左对齐",Center:"居中",Right:"右对齐","Cell type":"单元格类型",Scope:"范围",Alignment:"对齐方式","H Align":"水平对齐","V Align":"垂直对齐",Top:"顶部对齐",Middle:"垂直居中",Bottom:"底部对齐","Header cell":"表头单元格","Row group":"行组","Column group":"列组","Row type":"行类型",Header:"表头",Body:"表体",Footer:"表尾","Border color":"边框颜色","Insert template...":"插入模板...",Templates:"模板",Template:"模板","Text color":"文字颜色","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Remove color":"移除颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Word count":"字数",Count:"计数",Document:"文档",Selection:"选择",Words:"单词","Words: {0}":"字数：{0}","{0} words":"{0} 字",File:"文件",Edit:"编辑",Insert:"插入",View:"视图",Format:"格式",Table:"表格",Tools:"工具","Powered by {0}":"由{0}驱动","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助","Image title":"图片标题","Border width":"边框宽度","Border style":"边框样式",Error:"错误",Warn:"警告",Valid:"有效","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","System Font":"系统字体","Failed to upload image: {0}":"图片上传失败: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to initialize plugin: {0}":"插件初始化失败: {0}",example:"示例",Search:"搜索",All:"全部",Currency:"货币",Text:"文字",Quotations:"引用",Mathematical:"数学","Extended Latin":"拉丁语扩充",Symbols:"符号",Arrows:"箭头","User Defined":"自定义","dollar sign":"美元符号","currency sign":"货币符号","euro-currency sign":"欧元符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","french franc sign":"法郎符号","lira sign":"里拉符号","mill sign":"密尔符号","naira sign":"奈拉符号","peseta sign":"比塞塔符号","rupee sign":"卢比符号","won sign":"韩元符号","new sheqel sign":"新谢克尔符号","dong sign":"越南盾符号","kip sign":"老挝基普符号","tugrik sign":"图格里克符号","drachma sign":"德拉克马符号","german penny symbol":"德国便士符号","peso sign":"比索符号","guarani sign":"瓜拉尼符号","austral sign":"澳元符号","hryvnia sign":"格里夫尼亚符号","cedi sign":"塞地符号","livre tournois sign":"里弗弗尔符号","spesmilo sign":"spesmilo符号","tenge sign":"坚戈符号","indian rupee sign":"印度卢比","turkish lira sign":"土耳其里拉","nordic mark sign":"北欧马克","manat sign":"马纳特符号","ruble sign":"卢布符号","yen character":"日元字样","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","yen/yuan character variant one":"元字样（大写）","Loading emoticons...":"加载表情符号...","Could not load emoticons":"不能加载表情符号",People:"人类","Animals and Nature":"动物和自然","Food and Drink":"食物和饮品",Activity:"活动","Travel and Places":"旅游和地点",Objects:"物件",Flags:"旗帜",Characters:"字符","Characters (no spaces)":"字符(无空格)","{0} characters":"{0} 个字符","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。",Update:"更新","Color swatch":"颜色样本",Turquoise:"青绿色",Green:"绿色",Blue:"蓝色",Purple:"紫色","Navy Blue":"海军蓝","Dark Turquoise":"深蓝绿色","Dark Green":"深绿色","Medium Blue":"中蓝色","Medium Purple":"中紫色","Midnight Blue":"深蓝色",Yellow:"黄色",Orange:"橙色",Red:"红色","Light Gray":"浅灰色",Gray:"灰色","Dark Yellow":"暗黄色","Dark Orange":"深橙色","Dark Red":"深红色","Medium Gray":"中灰色","Dark Gray":"深灰色","Light Green":"浅绿色","Light Yellow":"浅黄色","Light Red":"浅红色","Light Purple":"浅紫色","Light Blue":"浅蓝色","Dark Purple":"深紫色","Dark Blue":"深蓝色",Black:"黑色",White:"白色","Switch to or from fullscreen mode":"切换全屏模式","Open help dialog":"打开帮助对话框",history:"历史",styles:"样式",formatting:"格式化",alignment:"对齐",indentation:"缩进","permanent pen":"记号笔",comments:"备注","Format Painter":"格式刷","Insert/edit iframe":"插入/编辑框架",Capitalization:"大写",lowercase:"小写",UPPERCASE:"大写","Title Case":"首字母大写","Permanent Pen Properties":"永久笔属性","Permanent pen properties...":"永久笔属性...",Font:"字体",Size:"字号","More...":"更多...","Spellcheck Language":"拼写检查语言","Select...":"选择...",Preferences:"首选项",Yes:"是",No:"否","Keyboard Navigation":"键盘指引",Version:"版本",Anchor:"锚点","Special character":"特殊符号","Code sample":"代码示例",Color:"颜色",Emoticons:"表情","Document properties":"文档属性",Image:"图片","Insert link":"插入链接",Target:"打开方式",Link:"链接",Poster:"封面",Media:"媒体",Print:"打印",Prev:"上一个","Find and replace":"查找和替换","Whole words":"全字匹配",Spellcheck:"拼写检查",Caption:"标题","Insert template":"插入模板"})},2411:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/practical-teaching/"+t,method:"get"})}},2673:function(t,e,n){},2721:function(t,e,n){"use strict";n("cfee")},"32d8":function(t,e,n){},"34e7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/team-building/"+t,method:"get"})}},3689:function(t,e,n){"use strict";n("fb80")},"368b":function(t,e,n){},"3ec1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/talent-cultivation-ability/"+t,method:"get"})}},4248:function(t,e,n){"use strict";n("0135")},4678:function(t,e,n){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id="4678"},"537c":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/future-construction-plan/"+t,method:"get"})}},"58bd":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teachers/"+t,method:"get"})}},"5ad0":function(t,e,n){},"65bb":function(t,e,n){"use strict";n("af38d")},"6b84":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/specialty-construction/"+t,method:"get"})}},"6cb0":function(t,e,n){"use strict";n("af38")},"6d79a":function(t,e,n){},"7c27":function(t,e,n){(function(t){var e=n("7037").default;n("99af"),n("a4d3"),n("b0c0"),n("fb6a"),n("a630"),n("3ca3"),n("b64b"),n("a15b"),n("d3b7"),n("ddb0"),n("d81d"),n("25f0"),n("a9e3"),n("5319"),n("ac1f"),n("841c"),n("dca8"),n("1276"),n("4de4"),n("466d"),n("c7cd"),n("498a"),n("7db0"),n("18a5"),n("4d63"),n("a434"),n("9911"),n("e01a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("b680"),n("4ec9"),function(){"use strict";var n=function(){},o=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},r=function(t){return function(){return t}},i=function(t){return t};function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var u=function(t){return function(e){return!t(e)}},c=function(t){return function(){throw new Error(t)}},s=r(!1),l=r(!0),f=tinymce.util.Tools.resolve("tinymce.ThemeManager"),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function m(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var p,h,v,b,y,x,w=function(){return S},S=(p=function(t){return t.isNone()},{fold:function(t,e){return t()},is:s,isSome:s,isNone:l,getOr:v=function(t){return t},getOrThunk:h=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:v,orThunk:h,map:w,each:n,bind:w,exists:s,forall:l,filter:w,equals:p,equals_:p,toArray:function(){return[]},toString:r("none()")}),C=function t(e){var n=r(e),o=function(){return a},i=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?a:S},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return a},k={some:C,none:w,from:function(t){return null===t||void 0===t?S:C(t)}},O=function(t){return function(n){return r=e(o=n),(null===o?"null":"object"==r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===t;var o,r}},_=function(t){return function(n){return e(n)===t}},T=O("string"),D=O("object"),E=O("array"),B=_("boolean"),A=(b=void 0,function(t){return b===t}),I=function(t){return!(null===(e=t)||void 0===e);var e},M=_("function"),F=_("number"),R=function(t,e){if(E(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},P=Array.prototype.slice,V=Array.prototype.indexOf,H=Array.prototype.push,z=function(t,e){return V.call(t,e)},j=function(t,e){return-1<z(t,e)},L=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},N=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},U=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=P.call(t,o,o+e);n.push(r)}return n},W=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},G=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},Y=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},q=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},X=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},$=function(t,e,n){return G(t,(function(t){n=e(n,t)})),n},K=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return k.some(i);if(n(i,o))break}return k.none()}(t,e,s)},J=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return k.some(n);return k.none()},Q=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!E(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);H.apply(e,t[n])}return e},Z=function(t,e){return Q(W(t,e))},tt=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},et=function(t){var e=P.call(t,0);return e.reverse(),e},nt=function(t,e){return q(t,(function(t){return!j(e,t)}))},ot=function(t,e){var n=P.call(t,0);return n.sort(e),n},rt=function(t,e){return 0<=e&&e<t.length?k.some(t[e]):k.none()},it=function(t){return rt(t,0)},at=function(t){return rt(t,t.length-1)},ut=M(Array.from)?Array.from:function(t){return P.call(t)},ct=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return k.none()},st=function t(e){return{is:function(t){return e===t},isValue:l,isError:s,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return k.some(e)}}},lt=function t(e){return{is:s,isValue:s,isError:l,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return c(String(e))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:n,bind:function(n){return t(e)},exists:s,forall:l,toOptional:k.none}},ft={value:st,error:lt,fromOption:function(t,e){return t.fold((function(){return lt(e)}),st)}};(x=y=y||{})[x.Error=0]="Error",x[x.Value=1]="Value";var dt,mt,gt=function(t,e,n){return t.stype===y.Error?e(t.serror):n(t.svalue)},pt=function(t){return{stype:y.Value,svalue:t}},ht=function(t){return{stype:y.Error,serror:t}},vt=function(t){return t.fold(ht,pt)},bt=function(t){return gt(t,ft.error,ft.value)},yt=pt,xt=function(t){var e=[],n=[];return G(t,(function(t){gt(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},wt=ht,St=function(t,e){return t.stype===y.Value?e(t.svalue):t},Ct=function(t,e){return t.stype===y.Error?e(t.serror):t},kt=function(t,e){return t.stype===y.Value?{stype:y.Value,svalue:e(t.svalue)}:t},Ot=function(t,e){return t.stype===y.Error?{stype:y.Error,serror:e(t.serror)}:t},_t=Object.keys,Tt=Object.hasOwnProperty,Dt=function(t,e){for(var n=_t(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},Et=function(t,e){return Bt(t,(function(t,n){return{k:n,v:e(t,n)}}))},Bt=function(t,e){var n={};return Dt(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},At=function(t,e){var o,r,i,a,u={};return o=e,a=u,r=function(t,e){a[e]=t},i=n,Dt(t,(function(t,e){(o(t,e)?r:i)(t,e)})),u},It=function(t,e){var n=[];return Dt(t,(function(t,o){n.push(e(t,o))})),n},Mt=function(t,e){for(var n=_t(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return k.some(a)}return k.none()},Ft=function(t){return It(t,(function(t){return t}))},Rt=function(t,e){return Pt(t,e)?k.from(t[e]):k.none()},Pt=function(t,e){return Tt.call(t,e)},Vt=function(t,e){return Pt(t,e)&&void 0!==t[e]&&null!==t[e]},Ht=function(t){if(!E(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return G(t,(function(o,r){var i=_t(o);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!E(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=_t(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!tt(e,(function(t){return j(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n},zt=Object.prototype.hasOwnProperty,jt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i=e[r];for(var a in i)zt.call(i,a)&&(o[a]=t(o[a],i[a]))}return o}},Lt=jt((function(t,e){return D(t)&&D(e)?Lt(t,e):e})),Nt=jt((function(t,e){return e})),Ut=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},Wt=Ht([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Gt=function(t){return Wt.defaultedThunk(r(t))},Yt=Wt.strict,qt=Wt.asOption,Xt=Wt.defaultedThunk,$t=(Wt.asDefaultedOptionThunk,Wt.mergeWithThunk),Kt=(Ht([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){var n={};return n[t]=e,n}),Jt=function(t,e){return n=e,o={},Dt(t,(function(t,e){j(n,e)||(o[e]=t)})),o;var n,o},Qt=Kt,Zt=function(t){return e={},G(t,(function(t){e[t.key]=t.value})),e;var e},te=function(t,e){var n,o,r,i,a,u=(n=[],o=[],G(t,(function(t){t.fold((function(t){n.push(t)}),(function(t){o.push(t)}))})),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,ft.error(Q(a))):(i=e,0===(r=u.values).length?ft.value(i):ft.value(Lt(i,Nt.apply(void 0,r))))},ee=function(t){return o(wt,Q)(t)},ne=function(t,e){var n,o,r=xt(t);return 0<r.errors.length?ee(r.errors):(n=r.values,o=e,0<n.length?yt(Lt(o,Nt.apply(void 0,n))):yt(o))},oe=function(t){var e=xt(t);return 0<e.errors.length?ee(e.errors):yt(e.values)},re=function(t){return D(t)&&100<_t(t).length?" removed due to size":JSON.stringify(t,null,2)},ie=function(t,e){return wt([{path:t,getErrorInfo:e}])},ae=Ht([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ue=function(t,e,n){return Rt(e,n).fold((function(){return o=n,r=e,ie(t,(function(){return'Could not find valid *strict* value for "'+o+'" in '+re(r)}));var o,r}),yt)},ce=function(t,e,n){var o=Rt(t,e).fold((function(){return n(t)}),i);return yt(o)},se=function(t,e,n,o){return n.fold((function(n,i,a,u){var c=function(e){var r=u.extract(t.concat([n]),o,e);return kt(r,(function(t){return Kt(i,o(t))}))},s=function(e){return e.fold((function(){var t=Kt(i,o(k.none()));return yt(t)}),(function(e){var r=u.extract(t.concat([n]),o,e);return kt(r,(function(t){return Kt(i,o(k.some(t)))}))}))};return a.fold((function(){return St(ue(t,e,n),c)}),(function(t){return St(ce(e,n,t),c)}),(function(){return St(yt(Rt(e,n)),s)}),(function(t){return St((r=t,i=Rt(o=e,n).map((function(t){return!0===t?r(o):t})),yt(i)),s);var o,r,i}),(function(t){var o=t(e),i=kt(ce(e,n,r({})),(function(t){return Lt(o,t)}));return St(i,c)}))}),(function(t,n){var r=n(e);return yt(Kt(t,o(r)))}))},le=function(t){return{extract:function(e,n,o){return Ct(t(o,n),(function(t){return n=t,ie(e,(function(){return n}));var n}))},toString:function(){return"val"}}},fe=function(t){var e=de(t),n=X(t,(function(t,e){return e.fold((function(e){return Lt(t,Qt(e,!0))}),r(t))}),{});return{extract:function(t,o,r){var i,a=B(r)?[]:_t(At(r,(function(t){return void 0!==t&&null!==t}))),u=q(a,(function(t){return!Vt(n,t)}));return 0===u.length?e.extract(t,o,r):(i=u,ie(t,(function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"})))},toString:e.toString}},de=function(t){return{extract:function(e,n,o){return r=e,i=o,a=n,u=W(t,(function(t){return se(r,i,t,a)})),ne(u,{});var r,i,a,u},toString:function(){return"obj{\n"+W(t,(function(t){return t.fold((function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},me=function(t){return{extract:function(e,n,o){var r=W(o,(function(o,r){return t.extract(e.concat(["["+r+"]"]),n,o)}));return oe(r)},toString:function(){return"array("+t.toString()+")"}}},ge=function(t){return{extract:function(e,n,o){for(var r=[],i=0,a=t;i<a.length;i++){var u=a[i].extract(e,n,o);if(u.stype===y.Value)return u;r.push(u)}return oe(r)},toString:function(){return"oneOf("+W(t,(function(t){return t.toString()})).join(", ")+")"}}},pe=function(t,e){return{extract:function(n,o,r){var a,u,c=_t(r),s=(a=n,u=c,me(le(t)).extract(a,i,u));return St(s,(function(t){var i=W(t,(function(t){return ae.field(t,t,Yt(),e)}));return de(i).extract(n,o,r)}))},toString:function(){return"setOf("+e.toString()+")"}}},he=r(le(yt)),ve=o(me,de),be=ae.state,ye=ae.field,xe=function(t,e,n,o,r){return Rt(o,r).fold((function(){return e=o,n=r,ie(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+re(e)}));var e,n}),(function(o){return o.extract(t.concat(["branch: "+r]),e,n)}))},we=function(t,e){return{extract:function(n,o,r){return Rt(r,t).fold((function(){return e=t,ie(n,(function(){return'Choice schema did not contain choice key: "'+e+'"'}));var e}),(function(t){return xe(n,o,r,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+_t(e)}}},Se=le(yt),Ce=function(t){return ve(t)},ke=function(t){return{extract:function(e,n,o){return t().extract(e,n,o)},toString:function(){return t().toString()}}},Oe=function(t){return le((function(e){return t(e).fold(wt,yt)}))},_e=function(t,e){return pe((function(e){return vt(t(e))}),e)},Te=function(t,e,n){return bt((o=t,r=i,a=n,u=e.extract([o],r,a),Ot(u,(function(t){return{input:a,errors:t}}))));var o,r,a,u},De=function(t){return t.fold((function(t){throw new Error(Be(t))}),i)},Ee=function(t,e,n){return De(Te(t,e,n))},Be=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,W(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: ")+re(t.input);var e,n},Ae=we,Ie=function(t,e){return we(t,Et(e,de))},Me=r(Se),Fe=function(t,n){return le((function(o){var r=e(o);return t(o)?yt(o):wt("Expected type: "+n+" but got: "+r)}))},Re=Fe(F,"number"),Pe=Fe(T,"string"),Ve=Fe(B,"boolean"),He=Fe(M,"function"),ze=function t(e){var n=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(n){return t(e[n])}));case"Map":return n(e.keys(),t)&&n(e.values(),t);case"Set":return n(e.keys(),t);default:return!1}},je=le((function(t){return ze(t)?yt(t):wt("Expected value to be acceptable for sending via postMessage")})),Le=function(t){return Oe((function(e){return j(t,e)?ft.value(e):ft.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},Ne=function(t){return ye(t,t,Yt(),he())},Ue=function(t,e){return ye(t,t,Yt(),e)},We=function(t){return Ue(t,Pe)},Ge=function(t,e){return ye(t,t,Yt(),Le(e))},Ye=function(t){return Ue(t,He)},qe=function(t,e){return ye(t,t,Yt(),de(e))},Xe=function(t,e){return ye(t,t,Yt(),ve(e))},$e=function(t,e){return ye(t,t,Yt(),me(e))},Ke=function(t){return ye(t,t,qt(),he())},Je=function(t,e){return ye(t,t,qt(),e)},Qe=function(t){return Je(t,Re)},Ze=function(t){return Je(t,Pe)},tn=function(t){return Je(t,He)},en=function(t,e){return Je(t,de(e))},nn=function(t,e){return ye(t,t,Gt(e),he())},on=function(t,e,n){return ye(t,t,Gt(e),n)},rn=function(t,e){return on(t,e,Re)},an=function(t,e){return on(t,e,Pe)},un=function(t,e,n){return on(t,e,Le(n))},cn=function(t,e){return on(t,e,Ve)},sn=function(t,e){return on(t,e,He)},ln=function(t,e,n){return on(t,e,me(n))},fn=function(t,e,n){return on(t,e,de(n))},dn=function(t,e){return be(t,e)},mn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},gn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},pn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return gn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return gn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return gn(n)},fromDom:gn,fromPoint:function(t,e,n){return k.from(t.dom.elementFromPoint(e,n)).map(gn)}},hn=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return bn(o(1),o(2))},vn=function(){return bn(0,0)},bn=function(t,e){return{major:t,minor:e}},yn={nu:bn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():hn(t,n)},unknown:vn},xn=function(t,e){var n=String(e).toLowerCase();return K(t,(function(t){return t.search(n)}))},wn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Sn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Cn=function(t,e){return-1!==t.indexOf(e)},kn=function(t,e){return o=e,r=(n=t).length-e.length,""===o||n.length>=o.length&&n.substr(r,r+o.length)===o;var n,o,r},On=(dt=/^\s+|\s+$/g,function(t){return t.replace(dt,"")}),_n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tn=function(t){return function(e){return Cn(e,t)}},Dn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Cn(t,"edge/")&&Cn(t,"chrome")&&Cn(t,"safari")&&Cn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_n],search:function(t){return Cn(t,"chrome")&&!Cn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Cn(t,"msie")||Cn(t,"trident")}},{name:"Opera",versionRegexes:[_n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Tn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Tn("firefox")},{name:"Safari",versionRegexes:[_n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Cn(t,"safari")||Cn(t,"mobile/"))&&Cn(t,"applewebkit")}}],En=[{name:"Windows",search:Tn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Cn(t,"iphone")||Cn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Tn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Tn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Tn("linux"),versionRegexes:[]},{name:"Solaris",search:Tn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Tn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Tn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Bn={browsers:r(Dn),oses:r(En)},An="Firefox",In=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(An),isSafari:o("Safari")}},Mn={unknown:function(){return In({current:void 0,version:yn.unknown()})},nu:In,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(An),safari:r("Safari")},Fn="Windows",Rn="Android",Pn="Solaris",Vn="FreeBSD",Hn="ChromeOS",zn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Fn),isiOS:o("iOS"),isAndroid:o(Rn),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(Pn),isFreeBSD:o(Vn),isChromeOS:o(Hn)}},jn={unknown:function(){return zn({current:void 0,version:yn.unknown()})},nu:zn,windows:r(Fn),ios:r("iOS"),android:r(Rn),linux:r("Linux"),osx:r("OSX"),solaris:r(Pn),freebsd:r(Vn),chromeos:r(Hn)},Ln=function(t,e){var n,o,i,a,u,c,s,l,f,d,m,g,p=Bn.browsers(),h=Bn.oses(),v=wn(p,t).fold(Mn.unknown,Mn.nu),b=Sn(h,t).fold(jn.unknown,jn.nu);return{browser:v,os:b,deviceType:(o=v,i=t,a=e,u=(n=b).isiOS()&&!0===/ipad/i.test(i),c=n.isiOS()&&!u,s=n.isiOS()||n.isAndroid(),l=s||a("(pointer:coarse)"),f=u||!c&&s&&a("(min-device-width:768px)"),d=c||s&&!f,m=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(i),g=!d&&!f&&!m,{isiPad:r(u),isiPhone:r(c),isTablet:r(f),isPhone:r(d),isTouch:r(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(m),isDesktop:r(g)})}},Nn=function(t){return window.matchMedia(t).matches},Un=Ut((function(){return Ln(navigator.userAgent,Nn)})),Wn=function(){return Un()},Gn=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Yn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},qn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return n=t.dom,o=e.dom,r=n,i=o,a=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(i)&a);var n,o,r,i,a},$n=function(t,e){return Wn().browser.isIE()?Xn(t,e):(n=e,o=t.dom,r=n.dom,o!==r&&o.contains(r));var n,o,r},Kn=function(t){return M(t)?t:s},Jn=function(t,e,n){for(var o=t.dom,r=Kn(n);o.parentNode;){o=o.parentNode;var i=pn.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return k.none()},Qn=function(t,e,n){var o=e(t),r=Kn(n);return o.orThunk((function(){return r(t)?k.none():Jn(t,e,r)}))},Zn=function(t,e){return qn(t.element,e.event.target)},to=function(t){if(!Vt(t,"can")&&!Vt(t,"abort")&&!Vt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Ee("Extracting event.handler",fe([nn("can",l),nn("abort",s),nn("run",n)]),t)},eo=function(t){var e,n,o,r,i=(n=function(t){return t.can},function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return $(e,(function(e,o){return e&&n(o).apply(void 0,t)}),!0)}),a=(o=e=t,r=function(t){return t.abort},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $(o,(function(e,n){return e||r(n).apply(void 0,t)}),!1)});return to({can:i,abort:a,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];G(t,(function(t){t.run.apply(void 0,e)}))}})},no=r,oo=no("touchstart"),ro=no("touchmove"),io=no("touchend"),ao=no("touchcancel"),uo=no("mousedown"),co=no("mousemove"),so=no("mouseout"),lo=no("mouseup"),fo=no("mouseover"),mo=no("focusin"),go=no("focusout"),po=no("keydown"),ho=no("keyup"),vo=no("input"),bo=no("change"),yo=no("click"),xo=no("transitionend"),wo=no("selectstart"),So=function(t){return r("alloy."+t)},Co={tap:So("tap")},ko=So("focus"),Oo=So("blur.post"),_o=So("paste.post"),To=So("receive"),Do=So("execute"),Eo=So("focus.item"),Bo=Co.tap,Ao=So("longpress"),Io=So("sandbox.close"),Mo=So("typeahead.cancel"),Fo=So("system.init"),Ro=So("system.touchmove"),Po=So("system.touchend"),Vo=So("system.scroll"),Ho=So("system.resize"),zo=So("system.attached"),jo=So("system.detached"),Lo=So("system.dismissRequested"),No=So("system.repositionRequested"),Uo=So("focusmanager.shifted"),Wo=So("slotcontainer.visibility"),Go=So("change.tab"),Yo=So("dismiss.tab"),qo=So("highlight"),Xo=So("dehighlight"),$o=function(t,e){Zo(t,t.element,e,{})},Ko=function(t,e,n){Zo(t,t.element,e,n)},Jo=function(t){$o(t,Do())},Qo=function(t,e,n){Zo(t,e,n,{})},Zo=function(t,e,n,o){var r=d({target:e},o);t.getSystem().triggerEvent(n,e,r)},tr=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},er=Zt,nr=function(t,e){return{key:t,value:to({abort:e})}},or=function(t){return{key:t,value:to({run:function(t,e){e.event.prevent()}})}},rr=function(t,e){return{key:t,value:to({run:e})}},ir=function(t,e,n){return{key:t,value:to({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}},ar=function(t){return function(e){return{key:t,value:to({run:function(t,n){Zn(t,n)&&e(t,n)}})}}},ur=function(t,e,n){var o,r,i=e.partUids[n];return r=i,rr(o=t,(function(t,e){t.getSystem().getByUid(r).each((function(t){tr(t,t.element,o,e)}))}))},cr=function(t,e){return rr(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).fold((function(){return Qn(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),s).getOr(t)}),(function(t){return t}));e(t,r,n)}))},sr=function(t){return rr(t,(function(t,e){e.cut()}))},lr=function(t,e){return ar(t)(e)},fr=ar(zo()),dr=ar(jo()),mr=ar(Fo()),gr=(mt=Do(),function(t){return rr(mt,t)}),pr=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),hr=function(t){return function(e){return e.dom.nodeType===t}},vr=hr(1),br=hr(3),yr=hr(9),xr=hr(11),wr=function(t){return pn.fromDom(t.dom.ownerDocument)},Sr=function(t){return yr(t)?t:wr(t)},Cr=function(t){return pn.fromDom(Sr(t).dom.documentElement)},kr=function(t){return pn.fromDom(Sr(t).dom.defaultView)},Or=function(t){return k.from(t.dom.parentNode).map(pn.fromDom)},_r=Or,Tr=function(t){return k.from(t.dom.offsetParent).map(pn.fromDom)},Dr=function(t){return W(t.dom.childNodes,pn.fromDom)},Er=function(t,e){var n=t.dom.childNodes;return k.from(n[e]).map(pn.fromDom)},Br=function(t){return xr(t)&&I(t.dom.host)},Ar=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode),Ir=r(Ar),Mr=Ar?function(t){return pn.fromDom(t.dom.getRootNode())}:Sr,Fr=function(t){return Br(t)?t:pn.fromDom(Sr(t).dom.body)},Rr=function(t){var e=Mr(t);return Br(e)?k.some(e):k.none()},Pr=function(t){return pn.fromDom(t.dom.host)},Vr=function(t){return I(t.dom.shadowRoot)},Hr=function(t,e){Or(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},zr=function(t,e){var n;(n=t,k.from(n.dom.nextSibling).map(pn.fromDom)).fold((function(){Or(t).each((function(t){Lr(t,e)}))}),(function(t){Hr(t,e)}))},jr=function(t,e){Er(t,0).fold((function(){Lr(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},Lr=function(t,e){t.dom.appendChild(e.dom)},Nr=function(t,e){G(e,(function(e){Lr(t,e)}))},Ur=function(t){t.dom.textContent="",G(Dr(t),(function(t){Wr(t)}))},Wr=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Gr=function(t){var e,n=Dr(t);0<n.length&&(e=t,G(n,(function(t){Hr(e,t)}))),Wr(t)},Yr=function(t){return t.dom.innerHTML},qr=function(t,e){var n,o,r=wr(t).dom,i=pn.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,Dr(pn.fromDom(o)));Nr(i,a),Ur(t),Lr(t,i)},Xr=function(t,e,n){if(!(T(n)||B(n)||F(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},$r=function(t,e,n){Xr(t.dom,e,n)},Kr=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Jr=function(t,e){return k.from(Kr(t,e))},Qr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Zr=function(t,e){t.dom.removeAttribute(e)},ti=function(t){return e=t,n=!1,pn.fromDom(e.dom.cloneNode(n));var e,n},ei=function(t){if(Br(t))return"#shadow-root";var e,n,o,r=ti(t);return e=r,n=pn.fromTag("div"),o=pn.fromDom(e.dom.cloneNode(!0)),Lr(n,o),Yr(n)},ni=er([{key:ko(),value:to({can:function(t,e){var n,o,r=e.event,i=r.originator,a=r.target;return o=a,!(qn(n=i,t.element)&&!qn(n,o))||(console.warn(ko()+" did not get interpreted by the desired target. \nOriginator: "+ei(i)+"\nTarget: "+ei(a)+"\nCheck the "+ko()+" event handlers"),!1)}})}]),oi=Object.freeze({__proto__:null,events:ni}),ri=0,ii=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ri+String(e)},ai=r("alloy-id-"),ui=r("data-alloy-id"),ci=ai(),si=ui(),li=function(t,e){Object.defineProperty(t.dom,si,{value:e,writable:!0})},fi=function(t){var e=vr(t)?t.dom[si]:null;return k.from(e)},di=ii,mi=i,gi=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+ei(t().element)+" is not in context.":""))}};return{debugInfo:r("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:s}},pi=gi(),hi=function(t){return W(t,(function(t){return kn(t,"/*")?t.substring(0,t.length-"/*".length):t}))},vi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:hi(i)}},t},bi=ii("alloy-premade"),yi=function(t){return Qt(bi,t)},xi=function(t){return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,g([e.getApis(),e],n))},n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:hi(i.slice(1))}},e;var e,n,o,r,i},wi={init:function(){return Si({readState:function(){return"No State required"}})}},Si=function(t){return t},Ci=function(t,e){var n={};return Dt(t,(function(t,o){Dt(t,(function(t,r){var i=Rt(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n},ki=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},Oi=function(t){return t.cHandler},_i=function(t,e){return{name:t,handler:e}},Ti=function(t,e,n){var o,r,i=d(d({},n),(o=t,r={},G(e,(function(t){r[t.name()]=t.handlers(o)})),r));return Ci(i,_i)},Di=function(t){var e,n=M(e=t)?{can:l,abort:s,run:e}:e;return function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=[t,e].concat(o);n.abort.apply(void 0,i)?e.stop():n.can.apply(void 0,i)&&n.run.apply(void 0,i)}},Ei=function(t,e,n){var o,r,i=e[n];return i?function(t,e,o,r){try{var i=ot(o,(function(n,o){var i=n[e],a=o[e],u=r.indexOf(i),c=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<c?-1:c<u?1:0}));return ft.value(i)}catch(n){return ft.error([n])}}("Event: "+n,"name",t,i).map((function(t){var e=W(t,(function(t){return t.handler}));return eo(e)})):(o=n,r=t,ft.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(W(r,(function(t){return t.name})),null,2)]))},Bi=function(t,e){var n=It(t,(function(t,n){return(1===t.length?ft.value(t[0].handler):Ei(t,e,n)).map((function(o){var r=Di(o),i=1<t.length?q(e[n],(function(e){return L(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return Qt(n,{handler:r,purpose:i})}))}));return te(n,{})},Ai="alloy.base.behaviour",Ii=function(t){var e,n;return Te("custom.definition",de([ye("dom","dom",Yt(),de([Ne("tag"),nn("styles",{}),nn("classes",[]),nn("attributes",{}),Ke("value"),Ke("innerHtml")])),Ne("components"),Ne("uid"),nn("events",{}),nn("apis",{}),ye("eventOrder","eventOrder",((e={})[Do()]=["disabling",Ai,"toggling","typeaheadevents"],e[ko()]=[Ai,"focusing","keying"],e[Fo()]=[Ai,"disabling","toggling","representing"],e[vo()]=[Ai,"representing","streaming","invalidating"],e[jo()]=[Ai,"representing","item-events","tooltipping"],e[uo()]=["focusing",Ai,"item-type-events"],e[oo()]=["focusing",Ai,"item-type-events"],e[fo()]=["item-type-events","tooltipping"],e[To()]=["receiving","reflecting","tooltipping"],n=e,Wt.mergeWithThunk(r(n))),Me()),Ke("domModification")]),t)},Mi=function(t,e){var n=Kr(t,e);return void 0===n||""===n?[]:n.split(" ")},Fi=function(t){return void 0!==t.dom.classList},Ri=function(t,e){return r=e,i=Mi(n=t,o="class").concat([r]),$r(n,o,i.join(" ")),!0;var n,o,r,i},Pi=function(t,e){return r=e,0<(i=q(Mi(n=t,o="class"),(function(t){return t!==r}))).length?$r(n,o,i.join(" ")):Zr(n,o),!1;var n,o,r,i},Vi=function(t,e){Fi(t)?t.dom.classList.add(e):Ri(t,e)},Hi=function(t){0===(Fi(t)?t.dom.classList:Mi(t,"class")).length&&Zr(t,"class")},zi=function(t,e){Fi(t)?t.dom.classList.remove(e):Pi(t,e),Hi(t)},ji=function(t,e){return Fi(t)&&t.dom.classList.contains(e)},Li=function(t,e){G(e,(function(e){Vi(t,e)}))},Ni=function(t,e){G(e,(function(e){zi(t,e)}))},Ui=function(t){return void 0!==t.style&&M(t.style.getPropertyValue)},Wi=function t(e){var n=br(e)?e.dom.parentNode:e.dom;if(void 0===n||null===n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return Rr(pn.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=Pr,function(t){return o(r(t))}))},Gi=function(){return Yi(pn.fromDom(document))},Yi=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return pn.fromDom(e)},qi=function(t,e,n){if(!T(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ui(t)&&t.style.setProperty(e,n)},Xi=function(t,e){Ui(t)&&t.style.removeProperty(e)},$i=function(t,e,n){var o=t.dom;qi(o,e,n)},Ki=function(t,e){var n=t.dom;Dt(e,(function(t,e){qi(n,e,t)}))},Ji=function(t,e){var n=t.dom;Dt(e,(function(t,e){t.fold((function(){Xi(n,e)}),(function(t){qi(n,e,t)}))}))},Qi=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Wi(t)?o:Zi(n,e)},Zi=function(t,e){return Ui(t)?t.style.getPropertyValue(e):""},ta=function(t,e){var n=t.dom,o=Zi(n,e);return k.from(o).filter((function(t){return 0<t.length}))},ea=function(t,e,n){var o=pn.fromTag(t);return $i(o,e,n),ta(o,e).isSome()},na=function(t,e){var n=t.dom;Xi(n,e),Jr(t,"style").map(On).is("")&&Zr(t,"style")},oa=function(t){return t.dom.offsetWidth},ra=function(t){return t.dom.value},ia=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},aa=function(t){var e,n,o,r=pn.fromTag(t.tag);e=r,n=t.attributes,o=e.dom,Dt(n,(function(t,e){Xr(o,e,t)})),Li(r,t.classes),Ki(r,t.styles),t.innerHtml.each((function(t){return qr(r,t)}));var i=t.domChildren;return Nr(r,i),t.value.each((function(t){ia(r,t)})),t.uid,li(r,t.uid),r},ua=function(t,e){return n=t,r=W(o=e,(function(t){return en(t.name(),[Ne("config"),nn("state",wi)])})),i=Te("component.behaviours",de(r),n.behaviours).fold((function(t){throw new Error(Be(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(t){return t})),{list:o,data:Et(i,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))};var n,o,r,i},ca=function(t){var e,n,o=(e=Rt(t,"behaviours").getOr({}),n=q(_t(e),(function(t){return void 0!==e[t]})),W(n,(function(t){return e[t].me})));return ua(t,o)},sa=function(t,e,n){var o,r,i,a=d(d({},(o=t).dom),{uid:o.uid,domChildren:W(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return ki({})}),ki),c={"alloy.base.modification":u},s=0<e.length?function(t,e,n,o){var r=d({},e);G(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var i=Ci(r,(function(t,e){return{name:t,modification:e}})),a=function(t){return X(t,(function(t,e){return d(d({},e.modification),t)}),{})},u=X(i.classes,(function(t,e){return e.modification.concat(t)}),[]),c=a(i.attributes),s=a(i.styles);return ki({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,d(d({},r=a),{attributes:d(d({},r.attributes),i.attributes),styles:d(d({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},la=function(t,e,n){var o,r,i,a={"alloy.base.behaviour":t.events};return o=n,r=t.eventOrder,i=Ti(o,e,a),Bi(i,r).getOrDie()},fa=function(t){var e,n,o,r,i,a,u,c,s,l,f,g,p,h=mi(t),v=h.events,b=m(h,["events"]),y=(e=Rt(b,"components").getOr([]),W(e,pa)),x=d(d({},b),{events:d(d({},oi),v),components:y});return ft.value((o=function(){return p},r=mn(pi),i=De(Ii(n=x)),a=ca(n),u=a.list,c=a.data,s=sa(i,u,c),l=aa(s),f=la(i,u,c),g=mn(i.components),p={getSystem:r.get,config:function(t){var e=c;return(M(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(t){return M(c[t.name()])},spec:n,readState:function(t){return c[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return i.apis},connect:function(t){r.set(t)},disconnect:function(){r.set(gi(o))},element:l,syncComponents:function(){var t=Dr(l),e=Z(t,(function(t){return r.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));g.set(e)},components:g.get,events:f}))},da=function(t){var e=pn.fromText(t);return ma({element:e})},ma=function(t){var e=Ee("external.component",fe([Ne("element"),Ke("uid")]),t),o=mn(gi());e.uid.each((function(t){li(e.element,t)}));var i={getSystem:o.get,config:k.none,hasConfigured:s,connect:function(t){o.set(t)},disconnect:function(){o.set(gi((function(){return i})))},getApis:function(){return{}},element:e.element,spec:t,readState:r("No state"),syncComponents:n,components:r([]),events:{}};return yi(i)},ga=di,pa=function(t){return Rt(t,bi).fold((function(){var e=t.hasOwnProperty("uid")?t:d({uid:ga("")},t);return fa(e).getOrDie()}),(function(t){return t}))},ha=yi,va=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=Qi(n,t);return parseFloat(r)||0}return o},o=function(t,e){return $(e,(function(e,n){var o=Qi(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!F(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;Ui(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}},ba=va("height",(function(t){var e=t.dom;return Wi(t)?e.getBoundingClientRect().height:e.offsetHeight})),ya=function(t){return ba.get(t)},xa=function(t){return ba.getOuter(t)},wa=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},Sa=wa,Ca=function(t,e){return void 0!==t?t:void 0!==e?e:0},ka=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return Sa(n.offsetLeft,n.offsetTop);var i=Ca(null==o?void 0:o.pageYOffset,r.scrollTop),a=Ca(null==o?void 0:o.pageXOffset,r.scrollLeft),u=Ca(r.clientTop,n.clientTop),c=Ca(r.clientLeft,n.clientLeft);return Oa(t).translate(a-c,i-u)},Oa=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?Sa(o.offsetLeft,o.offsetTop):Wi(t)?(e=n.getBoundingClientRect(),Sa(e.left,e.top)):Sa(0,0)},_a=va("width",(function(t){return t.dom.offsetWidth})),Ta=function(t){return _a.get(t)},Da=function(t){return _a.getOuter(t)},Ea=function(t){var e=pn.fromDom(function(t){if(Ir()&&I(t.target)){var e=pn.fromDom(t.target);if(vr(e)&&Vr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return it(n)}}return k.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},i=o(r,n);return{target:e,x:t.clientX,y:t.clientY,stop:n,prevent:r,kill:i,raw:t}},Ba=function(t,e,n,o,r){var i,u,c=(i=n,u=o,function(t){i(t)&&u(Ea(t))});return t.dom.addEventListener(e,c,r),{unbind:a(Aa,t,e,c,r)}},Aa=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Ia=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Sa(n,o)},Ma=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Fa=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Ra=function(t){var e,n,o=void 0===t?window:t,r=o.document,i=Ia(pn.fromDom(r));return n=void 0===(e=o)?window:e,k.from(n.visualViewport).fold((function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Fa(i.left,i.top,e,n)}),(function(t){return Fa(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)}))},Pa=function t(e,n){return e.view(n).fold(r([]),(function(n){var o=e.owner(n),r=t(e,o);return[n].concat(r)}))},Va=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(pn.fromDom)},owner:wr}),Ha=function(t){var e,n,o,r,i=pn.fromDom(document),u=Ia(i);return(e=t,o=(n=Va).owner(e),r=Pa(n,o),k.some(r)).fold(a(ka,t),(function(e){var n=Oa(t),o=X(e,(function(t,e){var n=Oa(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Sa(o.left+n.left+u.left,o.top+n.top+u.top)}))},za=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},ja=function(t){var e=ka(t),n=Da(t),o=xa(t);return za(e.left,e.top,n,o)},La=function(t){var e=Ha(t),n=Da(t),o=xa(t);return za(e.left,e.top,n,o)},Na=function(){return Ra(window)};function Ua(t,e,n,o,r){return t(n,o)?k.some(n):M(r)&&r(n)?k.none():e(n,o,r)}var Wa,Ga,Ya=function(t,e,n){for(var o=t.dom,r=M(n)?n:s;o.parentNode;){o=o.parentNode;var i=pn.fromDom(o);if(e(i))return k.some(i);if(r(i))break}return k.none()},qa=function(t,e,n){return Ua((function(t,e){return e(t)}),Ya,t,e,n)},Xa=function(t,e,n){return qa(t,e,n).isSome()},$a=function(t,e,n){return Ya(t,(function(t){return Gn(t,e)}),n)},Ka=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Yn(r)?k.none():k.from(r.querySelector(n)).map(pn.fromDom);var n,o,r},Ja=function(t,e,n){return Ua(Gn,$a,t,e,n)},Qa=function(){var t=ii("aria-owns");return{id:t,link:function(e){$r(e,"aria-owns",t)},unlink:function(t){Zr(t,"aria-owns")}}},Za=function(t,e){return qa(e,(function(t){if(!vr(t))return!1;var e=Kr(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")})).bind((function(t){var e=Kr(t,"id"),n=Mr(t);return Ka(n,'[aria-owns="'+e+'"]')})).exists((function(e){return tu(t,e)}))},tu=function(t,e){return Xa(e,(function(e){return qn(e,t.element)}),s)||Za(t,e)},eu="unknown";(Ga=Wa=Wa||{})[Ga.STOP=0]="STOP",Ga[Ga.NORMAL=1]="NORMAL",Ga[Ga.LOGGING=2]="LOGGING";var nu,ou,ru=mn({}),iu=["alloy/data/Fields","alloy/debugging/Debugging"],au=function(t,e,n){var o,r,i,a;switch(Rt(ru.get(),t).orThunk((function(){var e=_t(ru.get());return ct(e,(function(e){return-1<t.indexOf(e)?k.some(ru.get()[e]):k.none()}))})).getOr(Wa.NORMAL)){case Wa.NORMAL:return n(uu());case Wa.LOGGING:var u=(o=t,r=e,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();j(["mousemove","mouseover","mouseout",Fo()],o)||console.log(o,{event:o,time:t-a,target:r.dom,sequence:W(i,(function(t){return j(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+ei(t.target)+")":t.outcome}))})}}),c=n(u);return u.write(),c;case Wa.STOP:return!0}},uu=r({logEventCut:n,logEventStopped:n,logNoParent:n,logEventNoHandlers:n,logEventResponse:n,write:n}),cu=r([Ne("menu"),Ne("selectedMenu")]),su=r([Ne("item"),Ne("selectedItem")]),lu=(r(de(su().concat(cu()))),r(de(su()))),fu=qe("initSize",[Ne("numColumns"),Ne("numRows")]),du=function(){return qe("markers",[Ne("backgroundMenu")].concat(cu()).concat(su()))},mu=function(t){return qe("markers",W(t,Ne))},gu=function(t,e,n){return function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");K(e,(function(t){return 0<t.indexOf("alloy")&&!L(iu,(function(e){return-1<t.indexOf(e)}))})).getOr(eu)}}(),ye(e,e,n,Oe((function(t){return ft.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},pu=function(t){return gu(0,t,Gt(n))},hu=function(t){return gu(0,t,Gt(k.none))},vu=function(t){return gu(0,t,Yt())},bu=function(t){return gu(0,t,Yt())},yu=function(t,e){return dn(t,r(e))},xu=function(t){return dn(t,i)},wu=r(fu),Su=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},Cu=Ht([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ku=Cu.southeast,Ou=Cu.southwest,_u=Cu.northeast,Tu=Cu.northwest,Du=Cu.south,Eu=Cu.north,Bu=Cu.east,Au=Cu.west,Iu=function(t,e){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],(function(n){return Rt(e,n).map((function(e){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,e)}))}))},Mu=function(t){return t.x},Fu=function(t,e){return t.x+t.width/2-e.width/2},Ru=function(t,e){return t.x+t.width-e.width},Pu=function(t,e){return t.y-e.height},Vu=function(t){return t.y+t.height},Hu=function(t,e){return t.y+t.height/2-e.height/2},zu=function(t,e,n){return Su(Mu(t),Vu(t),n.southeast(),ku(),Iu(t,{left:1,top:3}),"layout-se")},ju=function(t,e,n){return Su(Ru(t,e),Vu(t),n.southwest(),Ou(),Iu(t,{right:0,top:3}),"layout-sw")},Lu=function(t,e,n){return Su(Mu(t),Pu(t,e),n.northeast(),_u(),Iu(t,{left:1,bottom:2}),"layout-ne")},Nu=function(t,e,n){return Su(Ru(t,e),Pu(t,e),n.northwest(),Tu(),Iu(t,{right:0,bottom:2}),"layout-nw")},Uu=function(t,e,n){return Su(Fu(t,e),Pu(t,e),n.north(),Eu(),Iu(t,{bottom:2}),"layout-n")},Wu=function(t,e,n){return Su(Fu(t,e),Vu(t),n.south(),Du(),Iu(t,{top:3}),"layout-s")},Gu=function(t,e,n){return Su((o=t).x+o.width,Hu(t,e),n.east(),Bu(),Iu(t,{left:0}),"layout-e");var o},Yu=function(t,e,n){return Su((o=e,t.x-o.width),Hu(t,e),n.west(),Au(),Iu(t,{right:1}),"layout-w");var o},qu=function(){return[zu,ju,Lu,Nu,Wu,Uu,Gu,Yu]},Xu=function(){return[ju,zu,Nu,Lu,Wu,Uu,Gu,Yu]},$u=function(){return[Lu,Nu,zu,ju,Uu,Wu]},Ku=function(){return[Nu,Lu,ju,zu,Uu,Wu]},Ju=function(){return[zu,ju,Lu,Nu,Wu,Uu]},Qu=function(){return[ju,zu,Nu,Lu,Wu,Uu]},Zu=Object.freeze({__proto__:null,events:function(t){return er([rr(To(),(function(e,n){var o,r,i=t.channels,a=_t(i),u=n,c=(o=a,(r=u).universal?o:q(o,(function(t){return j(r.channels,t)})));G(c,(function(t){var n=i[t],o=n.schema,r=Ee("channel["+t+"] data\nReceiver: "+ei(e.element),o,u.data);n.onReceive(e,r)}))}))])}}),tc=[Ue("channels",_e(ft.value,fe([vu("onReceive"),nn("schema",Me())])))],ec=function(t,e,n){return mr((function(o,r){n(o,t,e)}))},nc=function(t,e,n,o,r,i){var a=fe(t),u=en(e,[Je("config",fe(t))]);return ic(a,u,e,n,o,r,i)},oc=function(t,e,n){var o,i,a,u,c,s;return o=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var u=[o].concat(i);return o.config({name:r(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(u,1);return e.apply(void 0,[o,t.config,t.state].concat(n))}))},i=n,a=e.toString(),u=a.indexOf(")")+1,c=a.indexOf("("),s=a.substring(c+1,u-1).split(/,\s*/),o.toFunctionAnnotation=function(){return{name:i,parameters:hi(s.slice(0,1).concat(s.slice(3)))}},o},rc=function(t){return{key:t,value:void 0}},ic=function(t,e,n,o,i,u,c){var s=function(t){return Vt(t,n)?t[n]():k.none()},l=Et(i,(function(t,e){return oc(n,t,e)})),f=Et(u,vi),m=d(d(d({},f),l),{revoke:a(rc,n),config:function(e){var o=Ee(n+"-config",t,e);return{key:n,value:{config:o,me:m,configAsRaw:Ut((function(){return Ee(n+"-config",t,e)})),initialConfig:e,state:c}}},schema:r(e),exhibit:function(t,e){return s(t).bind((function(t){return Rt(o,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(ki({}))},name:r(n),handlers:function(t){return s(t).map((function(t){return Rt(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return m},ac=Zt,uc=fe([Ne("fields"),Ne("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),cc=function(t){var e=Ee("Creating behaviour: "+t.name,uc,t);return nc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},sc=fe([Ne("branchKey"),Ne("branches"),Ne("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),lc=function(t){var e,n,o,r,i,a,u,c,s=Ee("Creating behaviour: "+t.name,sc,t);return e=Ie(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=en(n,[Je("config",u=e)]),ic(u,c,n,o,r,i,a)},fc=r(void 0),dc=cc({fields:tc,name:"receiving",active:Zu}),mc=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),gc=function(t){return t.dom.focus()},pc=function(t){return void 0===t&&(t=pn.fromDom(document)),k.from(t.dom.activeElement).map(pn.fromDom)},hc=function(t){return pc(Mr(t)).filter((function(e){return t.dom.contains(e.dom)}))},vc=function(t,e){var o=Mr(e),r=pc(o).bind((function(t){var n,o,r=function(e){return qn(t,e)};return r(e)?k.some(e):(n=r,(o=function(t){for(var e=0;e<t.childNodes.length;e++){var r=pn.fromDom(t.childNodes[e]);if(n(r))return k.some(r);var i=o(t.childNodes[e]);if(i.isSome())return i}return k.none()})(e.dom))})),i=t(e);return r.each((function(t){pc(o).filter((function(e){return qn(e,t)})).fold((function(){gc(t)}),n)})),i},bc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},yc=function(t,e){var n=function(t){return t+"px"};Ji(t,{position:k.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},xc=Ht([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),wc=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=e.x-n,h=e.y-o,v=r-(p+e.width),b=i-(h+e.height),y=k.some(p),x=k.some(h),w=k.some(v),S=k.some(b),C=k.none();return a=e.direction,u=function(){return bc(t,y,x,C,C)},c=function(){return bc(t,C,x,w,C)},s=function(){return bc(t,y,C,C,S)},l=function(){return bc(t,C,C,w,S)},f=function(){return bc(t,y,x,C,C)},d=function(){return bc(t,y,C,C,S)},m=function(){return bc(t,y,x,C,C)},g=function(){return bc(t,C,x,w,C)},a.fold(u,c,s,l,f,d,m,g)},Sc=function(t,e){var n=a(Ha,e),o=t.fold(n,n,(function(){var t=Ia();return Ha(e).translate(-t.left,-t.top)})),r=Da(e),i=xa(e);return za(o.left,o.top,r,i)},Cc=function(t,e,n){var o=Sa(e,n);return t.fold(r(o),r(o),(function(){var t=Ia();return o.translate(-t.left,-t.top)}))},kc=(xc.none,xc.relative),Oc=xc.fixed,_c=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Tc=function(t,e,n){return Math.min(Math.max(t,e),n)},Dc=Ht([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Ec=function(t,e,n,o){var a,u,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C,O,_,T,D,E,B,A,I,M,F,R,P,V,H,z,j=t.x,L=t.y,N=t.bubble.offset,U=N.left,W=N.top,G=(a=o,u=t.boundsRestriction,c=N,l=(s=function(t,e){var n="top"===t||"bottom"===t?c.top:c.left;return Rt(u,t).bind(i).bind((function(n){return"left"===t||"top"===t?e<=n?k.some(n):k.none():n<=e?k.some(n):k.none()})).map((function(t){return t+n})).getOr(e)})("left",a.x),f=s("top",a.y),d=s("right",a.right),m=s("bottom",a.bottom),za(l,f,d-l,m-f)),Y=G.y,q=G.bottom,X=G.x,$=G.right,K=L+W,J=(g=j+U,p=K,h=e,v=n,y=(b=G).x,x=b.y,w=b.width,S=b.height,O=x<=p,_=(C=y<=g)&&O,T=g+h<=y+w&&p+v<=x+S,D=Math.abs(Math.min(h,C?y+w-g:y-(g+h))),E=Math.abs(Math.min(v,O?x+S-p:x-(p+v))),B=Math.max(b.x,b.right-h),A=Math.max(b.y,b.bottom-v),{originInBounds:_,sizeInBounds:T,limitX:Tc(g,b.x,B),limitY:Tc(p,b.y,A),deltaW:D,deltaH:E}),Q=J.originInBounds,Z=J.sizeInBounds,tt=J.limitX,et=J.limitY,nt=J.deltaW,ot=J.deltaH,rt=r(et+ot-Y),it=r(q-et),at=(I=t.direction,F=M=it,R=rt,I.fold(M,M,R,R,M,R,F,F)),ut=r(tt+nt-X),ct=r($-tt),st={x:tt,y:et,width:nt,height:ot,maxHeight:at,maxWidth:(P=t.direction,H=V=ct,z=ut,P.fold(V,z,V,z,H,H,V,z)),direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:K};return Q&&Z?Dc.fit(st):Dc.nofit(st,nt,ot)},Bc=function(t,e,n,o){na(e,"max-height"),na(e,"max-width");var r,u,c,s,l,f,d,m,g,p={width:Da(r=e),height:xa(r)};return u=o.preference,c=t,s=p,l=n,f=o.bounds,d=s.width,m=s.height,g=function(t,e,n,o){var r=t(c,s,l);return Ec(r,d,m,f).fold(Dc.fit,(function(t,r,i){return o<i||n<r?Dc.nofit(t,r,i):Dc.nofit(e,n,o)}))},$(u,(function(t,e){var n=a(g,e);return t.fold(Dc.fit,n)}),Dc.nofit({x:c.x,y:c.y,width:s.width,height:s.height,maxHeight:s.height,maxWidth:s.width,direction:ku(),classes:{on:[],off:[]},label:"none",candidateYforTest:c.y},-1,-1)).fold(i,i)},Ac=function(t,e,n){var o,r;yc(t,(o=n.origin,r=e,o.fold((function(){return bc("absolute",k.some(r.x),k.some(r.y),k.none(),k.none())}),(function(t,e,n,o){return wc("absolute",r,t,e,n,o)}),(function(t,e,n,o){return wc("fixed",r,t,e,n,o)}))))},Ic=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ba.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),$i(n,"max-height",r+"px")},Mc=r((function(t,e){Ic(t,e),Ki(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Fc=r((function(t,e){Ic(t,e)})),Rc=function(t,e,n){return void 0===t[e]?n:t[e]},Pc=function(t,e,o,r,i,a){var u,c=Rc(a,"maxHeightFunction",Mc()),s=Rc(a,"maxWidthFunction",n),l=t.anchorBox,f=t.origin,d={bounds:(u=f,i.fold((function(){return u.fold(Na,Na,za)}),(function(t){return u.fold(t,t,(function(){var e=t(),n=Cc(u,e.x,e.y);return za(n.left,n.top,e.width,e.height)}))}))),origin:f,preference:r,maxHeightFunction:c,maxWidthFunction:s};Vc(l,e,o,d)},Vc=function(t,e,n,o){var r,i,a,u,c,s,l=Bc(t,e,n,o);Ac(e,l,o),r=e,i=l.classes,Ni(r,i.off),Li(r,i.on),a=e,u=l,(0,o.maxHeightFunction)(a,u.maxHeight),c=e,s=l,(0,o.maxWidthFunction)(c,s.maxWidth)},Hc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],zc=function(t,e,n){var o=function(t){return Rt(n,t).getOr([])},r=function(t,e,n){var r=nt(Hc,n);return{offset:Sa(t,e),classesOn:Z(n,o),classesOff:Z(r,o)}};return{southeast:function(){return r(-t,e,["top","alignLeft"])},southwest:function(){return r(t,e,["top","alignRight"])},south:function(){return r(-t/2,e,["top","alignCentre"])},northeast:function(){return r(-t,-e,["bottom","alignLeft"])},northwest:function(){return r(t,-e,["bottom","alignRight"])},north:function(){return r(-t/2,-e,["bottom","alignCentre"])},east:function(){return r(t,-e/2,["valignCentre","left"])},west:function(){return r(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,e,["top","alignRight"])},innerNortheast:function(){return r(t,e,["top","alignLeft"])},innerNorth:function(){return r(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-e,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return r(t,-e/2,["valignCentre","right"])},innerEast:function(){return r(-t,-e/2,["valignCentre","left"])}}},jc=function(){return zc(0,0,{})},Lc=function(t,e){return function(n){return"rtl"===Nc(n)?e:t}},Nc=function(t){return"rtl"===Qi(t,"direction")?"rtl":"ltr"};(ou=nu=nu||{}).TopToBottom="toptobottom",ou.BottomToTop="bottomtotop";var Uc,Wc,Gc,Yc,qc,Xc="data-alloy-vertical-dir",$c=function(t){return Xa(t,(function(t){return vr(t)&&Kr(t,"data-alloy-vertical-dir")===nu.BottomToTop}))},Kc=function(){return en("layouts",[Ne("onLtr"),Ne("onRtl"),Ke("onBottomLtr"),Ke("onBottomRtl")])},Jc=function(t,e,n,o,r,i,a){var u=a.map($c).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),s=e.layouts.map((function(e){return e.onRtl(t)})),l=u?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),f=u?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(s).getOr(i):s.getOr(o);return Lc(l,f)(t)},Qc=[Ne("hotspot"),Ke("bubble"),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=e.hotspot,r=Sc(n,o.element),i=Jc(t.element,e,Ju(),Qu(),$u(),Ku(),k.some(e.hotspot.element));return k.some({anchorBox:r,bubble:e.bubble.getOr(jc()),overrides:e.overrides,layouts:i,placer:k.none()})}))],Zc=[Ne("x"),Ne("y"),nn("height",0),nn("width",0),nn("bubble",jc()),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=Cc(n,e.x,e.y),r=za(o.left,o.top,e.width,e.height),i=Jc(t.element,e,qu(),Xu(),qu(),Xu(),k.none());return k.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:k.none()})}))],ts=Ht([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),es=function(t){return t.fold(i,(function(t,e,n){return t.translate(-e,-n)}))},ns=function(t){return t.fold(i,i)},os=function(t){return $(t,(function(t,e){return t.translate(e.left,e.top)}),Sa(0,0))},rs=function(t){var e=W(t,ns);return os(e)},is=ts.screen,as=ts.absolute,us=function(t,e,n){var o,r,i=wr(t.element),a=Ia(i),u=(o=t,r=kr(n.root).dom,k.from(r.frameElement).map(pn.fromDom).filter((function(t){var e=wr(t),n=wr(o.element);return qn(e,n)})).map(ka).getOr(a));return as(u,a.left,a.top)},cs=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=is(Sa(r,i));return k.some({point:c,width:a,height:u})},ss=function(t,e,n,o,r){return t.map((function(t){var i,a,u,c=[e,t.point],s=(i=function(){return rs(c)},a=function(){return rs(c)},u=function(){return t=W(c,es),os(t);var t},o.fold(i,a,u)),l={x:s.left,y:s.top,width:t.width,height:t.height},f=(n.showAbove?$u:Ju)(),d=(n.showAbove?Ku:Qu)(),m=Jc(r,n,f,d,f,d,k.none());return{anchorBox:l,bubble:n.bubble.getOr(jc()),overrides:n.overrides,layouts:m,placer:k.none()}}))},ls=[Ne("node"),Ne("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=us(t,0,e);return e.node.filter(Wi).bind((function(r){var i=r.dom.getBoundingClientRect(),a=cs(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ss(a,o,e,n,u)}))}))],fs=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ds=Ht([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ms=(ds.before,ds.on,ds.after,function(t){return t.fold(i,i,i)}),gs=Ht([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ps={domRange:gs.domRange,relative:gs.relative,exact:gs.exact,exactFromRange:function(t){return gs.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=t.match({domRange:function(t){return pn.fromDom(t.startContainer)},relative:function(t,e){return ms(t)},exact:function(t,e,n,o){return t}});return kr(e)},range:fs},hs=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),r=i,n.fold((function(t){r.setEndBefore(t.dom)}),(function(t,e){r.setEnd(t.dom,e)}),(function(t){r.setEndAfter(t.dom)})),i},vs=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},bs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},ys=Ht([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xs=function(t,e,n){return e(pn.fromDom(n.startContainer),n.startOffset,pn.fromDom(n.endContainer),n.endOffset)},ws=function(t,e){var n,o,i,a=(n=t,e.match({domRange:function(t){return{ltr:r(t),rtl:k.none}},relative:function(t,e){return{ltr:Ut((function(){return hs(n,t,e)})),rtl:Ut((function(){return k.some(hs(n,e,t))}))}},exact:function(t,e,o,r){return{ltr:Ut((function(){return vs(n,t,e,o,r)})),rtl:Ut((function(){return k.some(vs(n,o,r,t,e))}))}}}));return(i=(o=a).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return ys.rtl(pn.fromDom(t.endContainer),t.endOffset,pn.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return xs(0,ys.ltr,i)})):xs(0,ys.ltr,i)},Ss=(ys.ltr,ys.rtl,Uc=br,Wc="text",{get:function(t){if(!Uc(t))throw new Error("Can only get "+Wc+" value of a "+Wc+" node");return Gc(t).getOr("")},getOption:Gc=function(t){return Uc(t)?k.from(t.dom.nodeValue):k.none()},set:function(t,e){if(!Uc(t))throw new Error("Can only set raw "+Wc+" value of a "+Wc+" node");t.dom.nodeValue=e}}),Cs=function(t){return Ss.getOption(t)},ks=["img","br"],Os=function(t){return Cs(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf(" ")})).isSome()||j(ks,pr(t))},_s=function(t,e){var n=function t(n){for(var o=Dr(n),r=o.length-1;0<=r;r--){var i=o[r];if(e(i))return k.some(i);var a=t(i);if(a.isSome())return a}return k.none()};return n(t)},Ts=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Yn(r)?[]:W(r.querySelectorAll(n),pn.fromDom);var n,o,r},Ds=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=wr(r=t).dom.createRange()).setStart(r.dom,i),c.setEnd(a.dom,u),c),l=qn(t,n)&&e===o;return s.collapsed&&!l},Es=function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return k.some(fs(pn.fromDom(e.startContainer),e.startOffset,pn.fromDom(n.endContainer),n.endOffset))}return k.none()},Bs=function(t){if(null===t.anchorNode||null===t.focusNode)return Es(t);var e=pn.fromDom(t.anchorNode),n=pn.fromDom(t.focusNode);return Ds(e,t.anchorOffset,n,t.focusOffset)?k.some(fs(e,t.anchorOffset,n,t.focusOffset)):Es(t)},As=function(t){return e=t,k.from(e.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(Bs);var e},Is=function(t,e){var n,o,r,i,a=ws(n=t,e).match({ltr:function(t,e,o,r){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(o.dom,r),i},rtl:function(t,e,o,r){var i=n.document.createRange();return i.setStart(o.dom,r),i.setEnd(t.dom,e),i}});return r=(o=a).getClientRects(),0<(i=0<r.length?r[0]:o.getBoundingClientRect()).width||0<i.height?k.some(i).map(bs):k.none()},Ms=function(t,e){return{element:t,offset:e}},Fs=function(t,e){var n=Dr(t);if(0===n.length)return Ms(t,e);if(e<n.length)return Ms(n[e],0);var o,r=n[n.length-1],i=br(r)?(o=r,Ss.get(o).length):Dr(r).length;return Ms(r,i)},Rs=function(t,e){return(br(t)?Ms:Fs)(t,e)},Ps=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return As(t)}}))().map((function(t){var e=Rs(t.start,t.soffset),n=Rs(t.finish,t.foffset);return ps.range(e.element,e.offset,n.element,n.offset)}))},Vs=[Ke("getSelection"),Ne("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=kr(e.root).dom,r=us(t,0,e),i=Ps(o,e).bind((function(t){return Is(o,ps.exactFromRange(t)).orThunk((function(){var e=pn.fromText("\ufeff");return Hr(t.start,e),Is(o,ps.exact(e,0,e,1)).map((function(t){return Wr(e),t}))})).bind((function(t){return cs(t.left,t.top,t.width,t.height)}))})),a=Ps(o,e).bind((function(t){return vr(t.start)?k.some(t.start):_r(t.start)})).getOr(t.element);return ss(i,r,e,n,a)}))],Hs=function(t){return t.x+t.width},zs=function(t,e){return t.x-e.width},js=function(t,e){return t.y-e.height+t.height},Ls=function(t){return t.y},Ns=function(t,e,n){return Su(Hs(t),Ls(t),n.southeast(),ku(),Iu(t,{left:0,top:2}),"link-layout-se")},Us=function(t,e,n){return Su(zs(t,e),Ls(t),n.southwest(),Ou(),Iu(t,{right:1,top:2}),"link-layout-sw")},Ws=function(t,e,n){return Su(Hs(t),js(t,e),n.northeast(),_u(),Iu(t,{left:0,bottom:3}),"link-layout-ne")},Gs=function(t,e,n){return Su(zs(t,e),js(t,e),n.northwest(),Tu(),Iu(t,{right:1,bottom:3}),"link-layout-nw")},Ys=function(){return[Ns,Us,Ws,Gs]},qs=function(){return[Us,Ns,Gs,Ws]},Xs=[Ne("item"),Kc(),nn("overrides",{}),yu("placement",(function(t,e,n){var o=Sc(n,e.item.element),r=Jc(t.element,e,Ys(),qs(),Ys(),qs(),k.none());return k.some({anchorBox:o,bubble:jc(),overrides:e.overrides,layouts:r,placer:k.none()})}))],$s=Ie("anchor",{selection:Vs,node:ls,hotspot:Qc,submenu:Xs,makeshift:Zc}),Ks=function(t,e,n,o,r){var i={anchorBox:n.anchorBox,origin:e};Pc(i,r.element,n.bubble,n.layouts,o,n.overrides)},Js=function(t,e,n,o,r,i){var a=i.map(ja);return Qs(t,e,n,o,r,a)},Qs=function(t,e,n,o,i,a){var u=Ee("positioning anchor.info",$s,o);vc((function(){$i(i.element,"position","fixed");var n=ta(i.element,"visibility");$i(i.element,"visibility","hidden");var o,c,s,l,f=e.useFixed()?(l=document.documentElement,Oc(0,0,l.clientWidth,l.clientHeight)):(c=ka((o=t).element),s=o.element.dom.getBoundingClientRect(),kc(c.left,c.top,s.width,s.height)),d=u.placement,m=a.map(r).or(e.getBounds);d(t,u,f).each((function(e){e.placer.getOr(Ks)(t,f,e,m,i)})),n.fold((function(){na(i.element,"visibility")}),(function(t){$i(i.element,"visibility",t)})),ta(i.element,"left").isNone()&&ta(i.element,"top").isNone()&&ta(i.element,"right").isNone()&&ta(i.element,"bottom").isNone()&&ta(i.element,"position").is("fixed")&&na(i.element,"position")}),i.element)},Zs=Object.freeze({__proto__:null,position:function(t,e,n,o,r){Js(t,e,n,o,r,k.none())},positionWithin:Js,positionWithinBounds:Qs,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),tl=[nn("useFixed",s),Ke("getBounds")],el=cc({fields:tl,name:"positioning",active:mc,apis:Zs}),nl=function t(e){$o(e,jo());var n=e.components();G(n,t)},ol=function t(e){var n=e.components();G(n,t),$o(e,zo())},rl=function(t,e){Lr(t.element,e.element)},il=function(t,e){var n,o=t.components();G((n=t).components(),(function(t){return Wr(t.element)})),Ur(n.element),n.syncComponents();var r=nt(o,e);G(r,(function(e){nl(e),t.getSystem().removeFromWorld(e)})),G(e,(function(e){e.getSystem().isConnected()?rl(t,e):(t.getSystem().addToWorld(e),rl(t,e),Wi(t.element)&&ol(e)),t.syncComponents()}))},al=function(t,e){ul(t,e,Lr)},ul=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),Wi(t.element)&&ol(e),t.syncComponents()},cl=function(t){nl(t),Wr(t.element),t.getSystem().removeFromWorld(t)},sl=function(t){var e=Or(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));cl(t),e.each((function(t){t.syncComponents()}))},ll=function(t){var e=t.components();G(e,cl),Ur(t.element),t.syncComponents()},fl=function(t,e){dl(t,e,Lr)},dl=function(t,e,n){n(t,e.element);var o=Dr(e.element);G(o,(function(t){e.getByDom(t).each(ol)}))},ml=function(t){var e=Dr(t.element);G(e,(function(e){t.getByDom(e).each(nl)})),Wr(t.element)},gl=function(t,e,n,o){n.get().each((function(e){ll(t)}));var r=e.getAttachPoint(t);al(r,t);var i=t.getSystem().build(o);return al(t,i),n.set(i),i},pl=function(t,e,n,o){var r=gl(t,e,n,o);return e.onOpen(t,r),r},hl=function(t,e,n){n.get().each((function(o){ll(t),sl(t),e.onClose(t,o),n.clear()}))},vl=function(t,e,n){return n.isOpen()},bl=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);$i(t.element,"position",el.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",ta(o.element,r).fold((function(){Zr(o.element,i)}),(function(t){$r(o.element,i,t)})),$i(o.element,r,a)},yl=function(t,e,n){var o,r,i,a;o=t.element,L(["top","left","right","bottom"],(function(t){return ta(o,t).isSome()}))||na(t.element,"position"),r=t,i="visibility",a=e.cloakVisibilityAttr,Jr(r.element,a).fold((function(){return na(r.element,i)}),(function(t){return $i(r.element,i,t)}))},xl=Object.freeze({__proto__:null,cloak:bl,decloak:yl,open:pl,openWhileCloaked:function(t,e,n,o,r){bl(t,e),pl(t,e,n,o),r(),yl(t,e)},close:hl,isOpen:vl,isPartOf:function(t,e,n,o){return vl(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return gl(t,e,n,o)}))}}),wl=Object.freeze({__proto__:null,events:function(t,e){return er([rr(Io(),(function(n,o){hl(n,t,e)}))])}}),Sl=[pu("onOpen"),pu("onClose"),Ne("isPartOf"),Ne("getAttachPoint"),nn("cloakVisibilityAttr","data-precloak-visibility")],Cl=cc({fields:Sl,name:"sandboxing",active:wl,apis:xl,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none()),e=r("not-implemented");return Si({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(k.none())},set:function(e){t.set(k.some(e))},get:function(){return t.get()}})}})}),kl=r("dismiss.popups"),Ol=r("reposition.popups"),_l=r("mouse.released"),Tl=fe([nn("isExtraPart",s),en("fireEventInstead",[nn("event",Lo())])]),Dl=function(t){var e=Ee("Dismissal",Tl,t),n={};return n[kl()]={schema:fe([Ne("target")]),onReceive:function(t,n){Cl.isOpen(t)&&(Cl.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold((function(){return Cl.close(t)}),(function(e){return $o(t,e.event)})))}},n},El=fe([en("fireEventInstead",[nn("event",No())]),Ye("doReposition")]),Bl=function(t){var e=Ee("Reposition",El,t),n={};return n[Ol()]={onReceive:function(t){Cl.isOpen(t)&&e.fireEventInstead.fold((function(){return e.doReposition(t)}),(function(e){return $o(t,e.event)}))}},n},Al=function(t,e,n){e.store.manager.onLoad(t,e,n)},Il=function(t,e,n){e.store.manager.onUnload(t,e,n)},Ml=Object.freeze({__proto__:null,onLoad:Al,onUnload:Il,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Fl=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[fr((function(n,o){Al(n,t,e)})),dr((function(n,o){Il(n,t,e)}))]:[ec(t,e,Al)];return er(n)}}),Rl=function(){var t=mn(null);return Si({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Pl=function(){var t=mn({}),e=mn({});return Si({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Rt(t.get(),n).orThunk((function(){return Rt(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},a={};G(n,(function(t){i[t.value]=t,Rt(t,"meta").each((function(e){Rt(e,"text").each((function(e){a[e]=t}))}))})),t.set(d(d({},o),i)),e.set(d(d({},r),a))},clear:function(){t.set({}),e.set({})}})},Vl=Object.freeze({__proto__:null,memory:Rl,dataset:Pl,manual:function(){return Si({readState:n})},init:function(t){return t.store.manager.state(t)}}),Hl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},zl=[Ke("initialValue"),Ne("getFallbackEntry"),Ne("getDataKey"),Ne("setValue"),yu("manager",{setValue:Hl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold((function(){return o.getFallbackEntry(r)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){Hl(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:Pl})],jl=[Ne("getValue"),nn("setValue",n),Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:n,state:wi.init})],Ll=[Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Rl})],Nl=[on("store",{mode:"memory"},Ie("mode",{memory:Ll,manual:jl,dataset:zl})),pu("onSetValue"),nn("resetOnDom",!1)],Ul=cc({fields:Nl,name:"representing",active:Fl,apis:Ml,extra:{setValueFrom:function(t,e){var n=Ul.getValue(e);Ul.setValue(t,n)}},state:Vl}),Wl=function(t,e){return fn(t,{},W(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ye(n,n,qt(),le((function(t){return wt("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([dn("dump",i)]))},Gl=function(t){return t.dump},Yl=function(t,e){return d(d({},t.dump),ac(e))},ql=Wl,Xl=Yl,$l="placeholder",Kl=Ht([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Jl=function(t){return Pt(t,"uiType")},Ql=function(t,e,n,o){return Jl(n)&&n.uiType===$l?(a=n,u=o,(i=t).exists((function(t){return t!==a.owner}))?Kl.single(!0,r(a)):Rt(u,a.name).fold((function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+_t(u)+"]\nNamespace: "+i.getOr("none")+"\nSpec: "+JSON.stringify(a,null,2))}),(function(t){return t.replace()}))):Kl.single(!1,r(n));var i,a,u},Zl=function t(e,n,o,r){return Ql(e,0,o,r).fold((function(i,a){var u=Jl(o)?a(n,o.config,o.validated):a(n),c=Rt(u,"components").getOr([]),s=Z(c,(function(o){return t(e,n,o,r)}));return[d(d({},u),{components:s})]}),(function(t,e){if(Jl(o)){var r=e(n,o.config,o.validated);return o.validated.preprocess.getOr(i)(r)}return e(n)}))},tf=function(t,e,n,o){var i,a,u,c=Et(o,(function(t,e){return o=t,i=!1,{name:r(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return i},replace:function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,o}};var n,o,i})),s=(i=t,a=e,u=c,Z(n,(function(t){return Zl(i,a,t,u)})));return Dt(c,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),s},ef=Kl.single,nf=Kl.multiple,of=r($l),rf=Ht([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),af=nn("factory",{sketch:i}),uf=nn("schema",[]),cf=Ne("name"),sf=ye("pname","pname",Xt((function(t){return"<alloy."+ii(t.name)+">"})),Me()),lf=dn("schema",(function(){return[Ke("preprocess")]})),ff=nn("defaults",r({})),df=nn("overrides",r({})),mf=de([af,uf,cf,sf,ff,df]),gf=de([af,uf,cf,ff,df]),pf=de([af,uf,cf,sf,ff,df]),hf=de([af,lf,cf,Ne("unit"),sf,ff,df]),vf=function(t){return t.fold(k.some,k.none,k.some,k.some)},bf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},yf=function(t,e){return function(n){var o=Ee("Converting part type",e,n);return t(o)}},xf=yf(rf.required,mf),wf=yf(rf.external,gf),Sf=yf(rf.optional,pf),Cf=yf(rf.group,hf),kf=r("entirety"),Of=Object.freeze({__proto__:null,required:xf,external:wf,optional:Sf,group:Cf,asNamedPart:vf,name:bf,asCommon:function(t){return t.fold(i,i,i,i)},original:kf}),_f=function(t,e,n,o){return Lt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Tf=function(t,e){var n={};return G(e,(function(e){vf(e).each((function(e){var o=Df(t,e.pname);n[e.name]=function(n){var r=Ee("Part: "+e.name+" in "+t,de(e.schema),n);return d(d({},o),{config:n,validated:r})}}))})),n},Df=function(t,e){return{uiType:of(),owner:t,name:e}},Ef=function(t,e,n){return{uiType:of(),owner:t,name:e,config:n,validated:{}}},Bf=function(t){return Z(t,(function(t){return t.fold(k.none,k.some,k.none,k.none).map((function(t){return qe(t.name,t.schema.concat([xu(kf())]))})).toArray()}))},Af=function(t){return W(t,bf)},If=function(t,e,n){return o=e,i={},a={},G(n,(function(t){t.fold((function(t){i[t.pname]=ef(!0,(function(e,n,o){return t.factory.sketch(_f(e,t,n,o))}))}),(function(t){var e=o.parts[t.name];a[t.name]=r(t.factory.sketch(_f(o,t,e[kf()]),e))}),(function(t){i[t.pname]=ef(!1,(function(e,n,o){return t.factory.sketch(_f(e,t,n,o))}))}),(function(t){i[t.pname]=nf(!0,(function(e,n,o){var r=e[t.name];return W(r,(function(n){return t.factory.sketch(Lt(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:r(i),externals:r(a)};var o,i,a},Mf=function(t,e,n){return tf(k.some(t),e,e.components,n)},Ff=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Rf=function(t,e,n){return Ff(t,e,n).getOrDie("Could not find part: "+n)},Pf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return G(n,(function(t){o[t]=r(a.getByUid(i[t]))})),o},Vf=function(t,e){var n=t.getSystem();return Et(e.partUids,(function(t,e){return r(n.getByUid(t))}))},Hf=function(t){return _t(t.partUids)},zf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return G(n,(function(t){o[t]=r(a.getByUid(i[t]).getOrDie())})),o},jf=function(t,e){var n=Af(e);return Zt(W(n,(function(e){return{key:e,value:t+"-"+e}})))},Lf=function(t){return ye("partUids","partUids",$t((function(e){return jf(e.uid,t)})),Me())},Nf=Object.freeze({__proto__:null,generate:Tf,generateOne:Ef,schemas:Bf,names:Af,substitutes:If,components:Mf,defaultUids:jf,defaultUidsSchema:Lf,getAllParts:Vf,getAllPartNames:Hf,getPart:Ff,getPartOrDie:Rf,getParts:Pf,getPartsOrDie:zf}),Uf=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[qe("parts",i)]:[]).concat([Ne("uid"),nn("dom",{}),nn("components",[]),xu("originalSpec"),nn("debug.sketcher",{})]).concat(a));return Ee(t+" [SpecSchema]",fe(u.concat(e)),n)},Wf=function(t,e,n,o,r){var i=Gf(r),a=Bf(n),u=Lf(n),c=Uf(t,e,i,a,[u]),s=If(0,c,n);return o(c,Mf(t,c,s.internals()),i,s.externals())},Gf=function(t){return Pt(t,"uid")?t:d(d({},t),{uid:di("uid")})},Yf=fe([Ne("name"),Ne("factory"),Ne("configFields"),nn("apis",{}),nn("extraApis",{})]),qf=fe([Ne("name"),Ne("factory"),Ne("configFields"),Ne("partFields"),nn("apis",{}),nn("extraApis",{})]),Xf=function(t){var e=Ee("Sketcher for "+t.name,Yf,t),n=Et(e.apis,xi),o=Et(e.extraApis,vi);return d(d({name:e.name,configFields:e.configFields,sketch:function(t){return n=e.name,o=e.configFields,r=e.factory,i=Gf(t),r(Uf(n,o,i,[],[]),i);var n,o,r,i}},n),o)},$f=function(t){var e=Ee("Sketcher for "+t.name,qf,t),n=Tf(e.name,e.partFields),o=Et(e.apis,xi),r=Et(e.extraApis,vi);return d(d({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return Wf(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},Kf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Jf=function(t,e){return t?k.some(e):k.none()},Qf=function(t){return"input"===pr(t)&&"radio"!==Kr(t,"type")||"textarea"===pr(t)},Zf=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),td=[Ne("find")],ed=cc({fields:td,name:"composing",apis:Zf}),nd=function(t,e,n,o){var r=Ts(t.element,"."+e.highlightClass);G(r,(function(n){L(o,(function(t){return t.element===n}))||(zi(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),$o(n,Xo())})))}))},od=function(t,e,n,o){nd(t,e,0,[o]),rd(t,e,n,o)||(Vi(o.element,e.highlightClass),e.onHighlight(t,o),$o(o,qo()))},rd=function(t,e,n,o){return ji(o.element,e.highlightClass)},id=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return k.from(r[o]).fold((function(){return ft.error(new Error("No element found with index "+o))}),t.getSystem().getByDom)},ad=function(t,e,n){return Ka(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},ud=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return(0<o.length?k.some(o[o.length-1]):k.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},cd=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return J(r,(function(t){return ji(t,e.highlightClass)})).bind((function(e){var n=_c(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))},sd=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return Kf(W(o,(function(e){return t.getSystem().getByDom(e).toOptional()})))},ld=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return nd(t,e,0,[])},dehighlight:function(t,e,n,o){rd(t,e,n,o)&&(zi(o.element,e.highlightClass),e.onDehighlight(t,o),$o(o,Xo()))},highlight:od,highlightFirst:function(t,e,n){ad(t,e).each((function(o){od(t,e,n,o)}))},highlightLast:function(t,e,n){ud(t,e).each((function(o){od(t,e,n,o)}))},highlightAt:function(t,e,n,o){id(t,e,n,o).fold((function(t){throw t}),(function(o){od(t,e,n,o)}))},highlightBy:function(t,e,n,o){var r=sd(t,e);K(r,o).each((function(o){od(t,e,n,o)}))},isHighlighted:rd,getHighlighted:function(t,e,n){return Ka(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:ad,getLast:ud,getPrevious:function(t,e,n){return cd(t,e,0,-1)},getNext:function(t,e,n){return cd(t,e,0,1)},getCandidates:sd}),fd=[Ne("highlightClass"),Ne("itemClass"),pu("onHighlight"),pu("onDehighlight")],dd=cc({fields:fd,name:"highlighting",apis:ld}),md=[8],gd=[9],pd=[13],hd=[27],vd=[32],bd=[37],yd=[38],xd=[39],wd=[40],Sd=function(t,e,n){var o=et(t.slice(0,e)),r=et(t.slice(e+1));return K(o.concat(r),n)},Cd=function(t,e,n){var o=et(t.slice(0,e));return K(o,n)},kd=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return K(r.concat(o),n)},Od=function(t,e,n){var o=t.slice(e+1);return K(o,n)},_d=function(t){return function(e){var n=e.raw;return j(t,n.which)}},Td=function(t){return function(e){return tt(t,(function(t){return t(e)}))}},Dd=function(t){return!0===t.raw.shiftKey},Ed=function(t){return!0===t.raw.ctrlKey},Bd=u(Dd),Ad=function(t,e){return{matches:t,classification:e}},Id=function(t,e,n){e.exists((function(t){return n.exists((function(e){return qn(e,t)}))}))||Ko(t,Uo(),{prevFocus:e,newFocus:n})},Md=function(){var t=function(t){return hc(t.element)};return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element);var r=t(e);Id(e,o,r)}}},Fd=function(){var t=function(t){return dd.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:function(e,o){var r=t(e);e.getSystem().getByDom(o).fold(n,(function(t){dd.highlight(e,t)}));var i=t(e);Id(e,r,i)}}};(qc=Yc=Yc||{}).OnFocusMode="onFocus",qc.OnEnterOrSpaceMode="onEnterOrSpace",qc.OnApiMode="onApi";var Rd,Pd=function(t,e,n,o,r){var i=function(t,e,n,o,r){var i,a,u=n(t,e,o,r);return i=u,a=e.event,K(i,(function(t){return t.matches(a)})).map((function(t){return t.classification})).bind((function(n){return n(t,e,o,r)}))},a={schema:function(){return t.concat([nn("focusManager",Md()),on("focusInside","onFocus",Oe((function(t){return j(["onFocus","onEnterOrSpace","onApi"],t)?ft.value(t):ft.error("Invalid value for focusInside")}))),yu("handler",a),yu("state",e),yu("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var a=t.focusInside!==Yc.OnFocusMode?k.none():r(t).map((function(n){return rr(ko(),(function(o,r){n(o,t,e),r.stop()}))})),u=[rr(po(),(function(o,a){i(o,a,n,t,e).fold((function(){var n,i,u;n=o,i=a,u=_d(vd.concat(pd))(i.event),t.focusInside===Yc.OnEnterOrSpaceMode&&u&&Zn(n,i)&&r(t).each((function(o){o(n,t,e),i.stop()}))}),(function(t){a.stop()}))})),rr(ho(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return er(a.toArray().concat(u))}};return a},Vd=function(t){var e=[Ke("onEscape"),Ke("onEnter"),nn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),nn("firstTabstop",0),nn("useTabstopAt",l),Ke("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return Ja(e,t)})).getOr(e);return 0<ya(n)},o=function(t,e,o){var r,i,a;r=e,i=Ts(t.element,r.selector),a=q(i,(function(t){return n(r,t)})),k.from(a[r.firstTabstop]).each((function(n){e.focusManager.set(t,n)}))},i=function(t,e,o,r,i){return i(e,o,(function(t){return n(e=r,o=t)&&e.useTabstopAt(o);var e,o})).fold((function(){return r.cyclic?k.some(!0):k.none()}),(function(e){return r.focusManager.set(t,e),k.some(!0)}))},u=function(t,e,n,o){var r,u,c=Ts(t.element,n.selector);return r=t,(u=n).focusManager.get(r).bind((function(t){return Ja(t,u.selector)})).bind((function(e){return J(c,a(qn,e)).bind((function(e){return i(t,c,e,n,o)}))}))},c=r([Ad(Td([Dd,_d(gd)]),(function(t,e,n){var o=n.cyclic?Sd:Cd;return u(t,0,n,o)})),Ad(_d(gd),(function(t,e,n){var o=n.cyclic?kd:Od;return u(t,0,n,o)})),Ad(_d(hd),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Ad(Td([Bd,_d(pd)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),s=r([]);return Pd(e,wi.init,c,s,(function(){return k.some(o)}))},Hd=Vd(dn("cyclic",s)),zd=Vd(dn("cyclic",l)),jd=function(t,e,n){return Qf(n)&&_d(vd)(e.event)?k.none():(Qo(t,n,Do()),k.some(!0))},Ld=function(t,e){return k.some(!0)},Nd=[nn("execute",jd),nn("useSpace",!1),nn("useEnter",!0),nn("useControlEnter",!1),nn("useDown",!1)],Ud=function(t,e,n){return n.execute(t,e,t.element)},Wd=Pd(Nd,wi.init,(function(t,e,n,o){var r=n.useSpace&&!Qf(t.element)?vd:[],i=n.useEnter?pd:[],a=n.useDown?wd:[],u=r.concat(i).concat(a);return[Ad(_d(u),Ud)].concat(n.useControlEnter?[Ad(Td([Ed,_d(pd)]),Ud)]:[])}),(function(t,e,n,o){return n.useSpace&&!Qf(t.element)?[Ad(_d(vd),Ld)]:[]}),(function(){return k.none()})),Gd=function(){var t=mn(k.none());return Si({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(k.some({numRows:e,numColumns:n}))},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})},Yd=Object.freeze({__proto__:null,flatgrid:Gd,init:function(t){return t.state(t)}}),qd=function(t){return function(e,n,o,r){var i=t(e.element);return Jd(i,e,n,o,r)}},Xd=function(t,e){var n=Lc(t,e);return qd(n)},$d=function(t,e){var n=Lc(e,t);return qd(n)},Kd=function(t){return function(e,n,o,r){return Jd(t,e,n,o,r)}},Jd=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},Qd=Kd,Zd=Kd,tm=Kd,em=function(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e},nm=function(t,e,n){var o,r=Ts(t,n),i=q(r,em);return J(o=i,(function(t){return qn(t,e)})).map((function(t){return{index:t,candidates:o}}))},om=function(t,e){return J(t,(function(t){return qn(e,t)}))},rm=function(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?k.some(t[o]):k.none()}))},im=function(t,e,n,o,r){return rm(t,e,o,(function(e,i){var a=e===n-1?t.length-e*o:o,u=_c(i,r,0,a-1);return k.some({row:e,column:u})}))},am=function(t,e,n,o,r){return rm(t,e,o,(function(e,i){var a=_c(e,r,0,n-1),u=a===n-1?t.length-a*o:o,c=Tc(i,0,u-1);return k.some({row:a,column:c})}))},um=[Ne("selector"),nn("execute",jd),hu("onEscape"),nn("captureTab",!1),wu()],cm=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},sm=function(t){return function(e,n,o,r){return nm(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}},lm=function(t,e,n){return n.captureTab?k.some(!0):k.none()},fm=sm((function(t,e,n,o){return im(t,e,n,o,-1)})),dm=sm((function(t,e,n,o){return im(t,e,n,o,1)})),mm=sm((function(t,e,n,o){return am(t,e,n,o,-1)})),gm=sm((function(t,e,n,o){return am(t,e,n,o,1)})),pm=r([Ad(_d(bd),Xd(fm,dm)),Ad(_d(xd),$d(fm,dm)),Ad(_d(yd),Qd(mm)),Ad(_d(wd),Zd(gm)),Ad(Td([Dd,_d(gd)]),lm),Ad(Td([Bd,_d(gd)]),lm),Ad(_d(hd),(function(t,e,n){return n.onEscape(t,e)})),Ad(_d(vd.concat(pd)),(function(t,e,n,o){return r=t,(i=n).focusManager.get(r).bind((function(t){return Ja(t,i.selector)})).bind((function(o){return n.execute(t,e,o)}));var r,i}))]),hm=r([Ad(_d(vd),Ld)]),vm=Pd(um,Gd,pm,hm,(function(){return k.some(cm)})),bm=function(t,e,n,o){var r=function t(e,n,r){var i,a=_c(n,o,0,r.length-1);return a===e?k.none():(i=r[a],"button"===pr(i)&&"disabled"===Kr(i,"disabled")?t(e,a,r):k.from(r[a]))};return nm(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))},ym=[Ne("selector"),nn("getInitial",k.none),nn("execute",jd),hu("onEscape"),nn("executeOnMove",!1),nn("allowVertical",!0)],xm=function(t,e,n){return o=t,(r=n).focusManager.get(o).bind((function(t){return Ja(t,r.selector)})).bind((function(o){return n.execute(t,e,o)}));var o,r},wm=function(t,e,n){e.getInitial(t).orThunk((function(){return Ka(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},Sm=function(t,e,n){return bm(t,n.selector,e,-1)},Cm=function(t,e,n){return bm(t,n.selector,e,1)},km=function(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?xm(e,n,o):k.some(!0)}))}},Om=function(t,e,n){return n.onEscape(t,e)},_m=r([Ad(_d(vd),Ld)]),Tm=Pd(ym,wi.init,(function(t,e,n,o){var r=bd.concat(n.allowVertical?yd:[]),i=xd.concat(n.allowVertical?wd:[]);return[Ad(_d(r),km(Xd(Sm,Cm))),Ad(_d(i),km($d(Sm,Cm))),Ad(_d(pd),xm),Ad(_d(vd),xm),Ad(_d(hd),Om)]}),_m,(function(){return k.some(wm)})),Dm=function(t,e,n){return k.from(t[e]).bind((function(t){return k.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},Em=function(t,e,n,o){var r=t[e].length,i=_c(n,o,0,r-1);return Dm(t,e,i)},Bm=function(t,e,n,o){var r=_c(n,o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return Dm(t,r,a)},Am=function(t,e,n,o){var r=t[e].length,i=Tc(n+o,0,r-1);return Dm(t,e,i)},Im=function(t,e,n,o){var r=Tc(n+o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return Dm(t,r,a)},Mm=[qe("selectors",[Ne("row"),Ne("cell")]),nn("cycles",!0),nn("previousSelector",k.none),nn("execute",jd)],Fm=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Ka(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))},Rm=function(t,e){return function(n,o,r){var i=r.cycles?t:e;return Ja(o,r.selectors.row).bind((function(t){var e=Ts(t,r.selectors.cell);return om(e,o).bind((function(e){var o=Ts(n,r.selectors.row);return om(o,t).bind((function(t){var n,a=(n=r,W(o,(function(t){return Ts(t,n.selectors.cell)})));return i(a,t,e).map((function(t){return t.cell}))}))}))}))}},Pm=Rm((function(t,e,n){return Em(t,e,n,-1)}),(function(t,e,n){return Am(t,e,n,-1)})),Vm=Rm((function(t,e,n){return Em(t,e,n,1)}),(function(t,e,n){return Am(t,e,n,1)})),Hm=Rm((function(t,e,n){return Bm(t,n,e,-1)}),(function(t,e,n){return Im(t,n,e,-1)})),zm=Rm((function(t,e,n){return Bm(t,n,e,1)}),(function(t,e,n){return Im(t,n,e,1)})),jm=r([Ad(_d(bd),Xd(Pm,Vm)),Ad(_d(xd),$d(Pm,Vm)),Ad(_d(yd),Qd(Hm)),Ad(_d(wd),Zd(zm)),Ad(_d(vd.concat(pd)),(function(t,e,n){return hc(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),Lm=r([Ad(_d(vd),Ld)]),Nm=Pd(Mm,wi.init,jm,Lm,(function(){return k.some(Fm)})),Um=[Ne("selector"),nn("execute",jd),nn("moveOnTab",!1)],Wm=function(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))},Gm=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Ym=function(t,e,n){return bm(t,n.selector,e,-1)},qm=function(t,e,n){return bm(t,n.selector,e,1)},Xm=r([Ad(_d(yd),tm(Ym)),Ad(_d(wd),tm(qm)),Ad(Td([Dd,_d(gd)]),(function(t,e,n,o){return n.moveOnTab?tm(Ym)(t,e,n,o):k.none()})),Ad(Td([Bd,_d(gd)]),(function(t,e,n,o){return n.moveOnTab?tm(qm)(t,e,n,o):k.none()})),Ad(_d(pd),Wm),Ad(_d(vd),Wm)]),$m=r([Ad(_d(vd),Ld)]),Km=Pd(Um,wi.init,Xm,$m,(function(){return k.some(Gm)})),Jm=[hu("onSpace"),hu("onEnter"),hu("onShiftEnter"),hu("onLeft"),hu("onRight"),hu("onTab"),hu("onShiftTab"),hu("onUp"),hu("onDown"),hu("onEscape"),nn("stopSpaceKeyup",!1),Ke("focusIn")],Qm=Pd(Jm,wi.init,(function(t,e,n){return[Ad(_d(vd),n.onSpace),Ad(Td([Bd,_d(pd)]),n.onEnter),Ad(Td([Dd,_d(pd)]),n.onShiftEnter),Ad(Td([Dd,_d(gd)]),n.onShiftTab),Ad(Td([Bd,_d(gd)]),n.onTab),Ad(_d(yd),n.onUp),Ad(_d(wd),n.onDown),Ad(_d(bd),n.onLeft),Ad(_d(xd),n.onRight),Ad(_d(vd),n.onSpace),Ad(_d(hd),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Ad(_d(vd),Ld)]:[]}),(function(t){return t.focusIn})),Zm=Hd.schema(),tg=zd.schema(),eg=Tm.schema(),ng=vm.schema(),og=Nm.schema(),rg=Wd.schema(),ig=Km.schema(),ag=Qm.schema(),ug=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Zm,cyclic:tg,flow:eg,flatgrid:ng,matrix:og,execution:rg,menu:ig,special:ag}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){Vt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Yd}),cg=function(t,e,n,o){var r=t.getSystem().build(o);ul(t,r,n)},sg=function(t,e,n,o){var r=lg(t);K(r,(function(t){return qn(o.element,t.element)})).each(sl)},lg=function(t,e){return t.components()},fg=function(t,e,n,o,r){var i=lg(t);return k.from(i[o]).map((function(e){return sg(t,0,0,e),r.each((function(e){cg(t,0,(function(t,e){var n,r;r=e,Er(n=t,o).fold((function(){Lr(n,r)}),(function(t){Hr(t,r)}))}),e)})),e}))},dg=cc({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){cg(t,0,Lr,o)},prepend:function(t,e,n,o){cg(t,0,jr,o)},remove:sg,replaceAt:fg,replaceBy:function(t,e,n,o,r){var i=lg(t);return J(i,o).bind((function(e){return fg(t,0,0,e,r)}))},set:function(t,e,n,o){vc((function(){var e=W(o,t.getSystem().build);il(t,e)}),t.element)},contents:lg})}),mg=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=er(e),cc({fields:[Ne("enabled")],name:n,active:{events:r(o)}})),configAsRaw:r({}),initialConfig:{},state:wi}}},gg=function(t,e){e.ignore||(gc(t.element),e.onFocus(t))},pg=Object.freeze({__proto__:null,focus:gg,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return e=t.element,n=Mr(e).dom,e.dom===n.activeElement;var e,n}}),hg=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return ki(n)},events:function(t){return er([rr(ko(),(function(e,n){gg(e,t),n.stop()}))].concat(t.stopMousedown?[rr(uo(),(function(t,e){e.event.prevent()}))]:[]))}}),vg=[pu("onFocus"),nn("stopMousedown",!1),nn("ignore",!1)],bg=cc({fields:vg,name:"focusing",active:hg,apis:pg}),yg=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},xg=function(t,e,n){e.toggleClass.each((function(e){(n.get()?Vi:zi)(t.element,e)}))},wg=function(t,e,n){kg(t,e,n,!n.get())},Sg=function(t,e,n){n.set(!0),xg(t,e,n),yg(t,e,n)},Cg=function(t,e,n){n.set(!1),xg(t,e,n),yg(t,e,n)},kg=function(t,e,n,o){(o?Sg:Cg)(t,e,n)},Og=function(t,e,n){kg(t,e,n,e.selected)},_g=Object.freeze({__proto__:null,onLoad:Og,toggle:wg,isOn:function(t,e,n){return n.get()},on:Sg,off:Cg,set:kg}),Tg=Object.freeze({__proto__:null,exhibit:function(){return ki({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=wg,gr((function(t){r(t,n,o)}))),a=ec(t,e,Og);return er(Q([t.toggleOnExecute?[i]:[],[a]]))}}),Dg=function(t,e,n){$r(t.element,"aria-expanded",n)},Eg=[nn("selected",!1),Ke("toggleClass"),nn("toggleOnExecute",!0),on("aria",{mode:"none"},Ie("mode",{pressed:[nn("syncWithExpanded",!1),yu("update",(function(t,e,n){$r(t.element,"aria-pressed",n),e.syncWithExpanded&&Dg(t,e,n)}))],checked:[yu("update",(function(t,e,n){$r(t.element,"aria-checked",n)}))],expanded:[yu("update",Dg)],selected:[yu("update",(function(t,e,n){$r(t.element,"aria-selected",n)}))],none:[yu("update",n)]}))],Bg=cc({fields:Eg,name:"toggling",active:Tg,apis:_g,state:(Rd=!1,{init:function(){var t=mn(Rd);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Rd)},readState:function(){return t.get()}}}})}),Ag=function(){var t=function(t,e){e.stop(),Jo(t)};return[rr(yo(),t),rr(Bo(),t),sr(oo()),sr(uo())]},Ig=function(t){return er(Q([t.map((function(t){return gr((function(e,n){t(e),n.stop()}))})).toArray(),Ag()]))},Mg="alloy.item-hover",Fg="alloy.item-focus",Rg=function(t){(hc(t.element).isNone()||bg.isFocused(t))&&(bg.isFocused(t)||bg.focus(t),Ko(t,Mg,{item:t}))},Pg=function(t){Ko(t,Fg,{item:t})},Vg=r(Mg),Hg=r(Fg),zg=[Ne("data"),Ne("components"),Ne("dom"),nn("hasSubmenu",!1),Ke("toggling"),ql("itemBehaviours",[Bg,bg,ug,Ul]),nn("ignoreFocus",!1),nn("domModification",{}),yu("builder",(function(t){return{dom:t.dom,domModification:d(d({},t.domModification),{attributes:d(d(d({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Xl(t.itemBehaviours,[t.toggling.fold(Bg.revoke,(function(t){return Bg.config(d({aria:{mode:"checked"}},t))})),bg.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Pg(t)}}),ug.config({mode:"execution"}),Ul.config({store:{mode:"memory",initialValue:t.data}}),mg("item-type-events",g(Ag(),[rr(fo(),Rg),rr(Eo(),bg.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),nn("eventOrder",{})],jg=[Ne("dom"),Ne("components"),yu("builder",(function(t){return{dom:t.dom,components:t.components,events:er([(e=Eo(),rr(e,(function(t,e){e.stop()})))])};var e}))],Lg=r("item-widget"),Ng=r([xf({name:"widget",overrides:function(t){return{behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:n}})])}}})]),Ug=[Ne("uid"),Ne("data"),Ne("components"),Ne("dom"),nn("autofocus",!1),nn("ignoreFocus",!1),ql("widgetBehaviours",[Ul,bg,ug]),nn("domModification",{}),Lf(Ng()),yu("builder",(function(t){var e=If(Lg(),t,Ng()),n=Mf(Lg(),t,e.internals()),o=function(e){return Ff(e,t,"widget").map((function(t){return ug.focusIn(t),t}))},r=function(e,n){return Qf(n.event.target)||t.autofocus&&n.setSource(e.element),k.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:er([gr((function(t,e){o(t).each((function(t){e.stop()}))})),rr(fo(),Rg),rr(Eo(),(function(e,n){t.autofocus?o(e):bg.focus(e)}))]),behaviours:Xl(t.widgetBehaviours,[Ul.config({store:{mode:"memory",initialValue:t.data}}),bg.config({ignore:t.ignoreFocus,onFocus:function(t){Pg(t)}}),ug.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:fc(),onLeft:r,onRight:r,onEscape:function(e,n){return bg.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),k.none()):(bg.focus(e),k.some(!0))}})])}}))],Wg=Ie("type",{widget:Ug,item:zg,separator:jg}),Gg=r([Cf({factory:{sketch:function(t){var e=Ee("menu.spec item",Wg,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:d(d({},e),{uid:di("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Yg=r([Ne("value"),Ne("items"),Ne("dom"),Ne("components"),nn("eventOrder",{}),Wl("menuBehaviours",[dd,Ul,ed,ug]),on("movement",{mode:"menu",moveOnTab:!0},Ie("mode",{grid:[wu(),yu("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[yu("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),Ne("rowSelector")],menu:[nn("moveOnTab",!0),yu("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),Ue("markers",lu()),nn("fakeFocus",!1),nn("focusManager",Md()),pu("onHighlight")]),qg=r("alloy.menu-focus"),Xg=$f({name:"Menu",configFields:Yg(),partFields:Gg(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yl(t.menuBehaviours,[dd.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Ul.config({store:{mode:"memory",initialValue:t.value}}),ed.config({find:k.some}),ug.config(t.movement.config(t,t.movement))]),events:er([rr(Hg(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){dd.highlight(t,n),e.stop(),Ko(t,qg(),{menu:t,item:n})}))})),rr(Vg(),(function(t,e){var n=e.event.item;dd.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),$g=function t(e,n,o,r){return Rt(o,r).bind((function(r){return Rt(e,r).bind((function(r){var i=t(e,n,o,r);return k.some([r].concat(i))}))})).getOr([])},Kg=function(t,e){var n={};Dt(t,(function(t,e){G(t,(function(t){n[t]=e}))}));var o=e,r=Bt(e,(function(t,e){return{k:t,v:e}})),i=Et(r,(function(t,e){return[e].concat($g(n,o,r,e))}));return Et(n,(function(t){return Rt(i,t).getOr([t])}))},Jg=function(t){return"prepared"===t.type?k.some(t.menu):k.none()},Qg={init:function(){var t=mn({}),e=mn({}),n=mn({}),o=mn(k.none()),r=mn({}),i=function(e,n,o){return a(e).bind((function(r){return i=e,Mt(t.get(),(function(t,e){return t===i})).bind((function(t){return n(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:o}}))}));var i}))},a=function(t){return u(t).bind(Jg)},u=function(t){return Rt(e.get(),t)},c=function(e){return Rt(t.get(),e)};return{setMenuBuilt:function(t,n){var o;e.set(d(d({},e.get()),((o={})[t]={type:"prepared",menu:n},o)))},setContents:function(i,a,u,c){o.set(k.some(i)),t.set(u),e.set(a),r.set(c);var s=Kg(c,u);n.set(s)},expand:function(e){return Rt(t.get(),e).map((function(t){var o=Rt(n.get(),e).getOr([]);return[t].concat(o)}))},refresh:function(t){return Rt(n.get(),t)},collapse:function(t){return Rt(n.get(),t).bind((function(t){return 1<t.length?k.some(t.slice(1)):k.none()}))},lookupMenu:u,lookupItem:c,otherMenus:function(t){var e=r.get();return nt(_t(e),t)},getPrimary:function(){return o.get().bind(a)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),o.set(k.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var r=q(c(t).toArray(),(function(t){return a(t).isSome()}));return Rt(n.get(),t).bind((function(t){var n=et(r.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return k.none();e.push(o.getOrDie())}return k.some(e)}(Z(n,(function(t,r){return i(t,e,n.slice(0,r+1)).fold((function(){return o.get().is(t)?[]:[k.none()]}),(function(t){return[k.some(t)]}))})))}))}}},extractPreparedMenu:Jg},Zg=r("collapse-item"),tp=Xf({name:"TieredMenu",configFields:[bu("onExecute"),bu("onEscape"),vu("onOpenMenu"),vu("onOpenSubmenu"),pu("onRepositionMenu"),pu("onCollapseMenu"),nn("highlightImmediately",!0),qe("data",[Ne("primary"),Ne("menus"),Ne("expansions")]),nn("fakeFocus",!1),pu("onHighlight"),pu("onHover"),du(),Ne("dom"),nn("navigateOnHover",!0),nn("stayInDom",!1),Wl("tmenuBehaviours",[ug,dd,ed,dg]),nn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var o,r,i=mn(k.none()),a=Qg.init(),u=function(e){var n,o,r,i=(n=e,o=t.data.primary,r=t.data.menus,Et(r,(function(e,r){var i=function(){return Xg.sketch(d(d({},e),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Fd:Md)()}))};return r===o?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),u=s();return a.setContents(t.data.primary,i,t.data.expansions,u),a.getPrimary()},c=function(t){return Ul.getValue(t).value},s=function(e){return Et(t.data.menus,(function(t,e){return Z(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},f=function(t,e){dd.highlight(t,e),dd.getHighlighted(e).orThunk((function(){return dd.getFirst(e)})).each((function(e){Qo(t,e.element,Eo())}))},m=function(t,e){return Kf(W(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?k.some(t.menu):k.none()}))})))},g=function(e,n,o){var r=m(n,n.otherMenus(o));G(r,(function(n){Ni(n.element,[t.markers.backgroundMenu]),t.stayInDom||dg.remove(e,n)}))},p=function(e,n){var o,r=(o=e,i.get().getOrThunk((function(){var e={},n=Ts(o.element,"."+t.markers.item),r=q(n,(function(t){return"true"===Kr(t,"aria-haspopup")}));return G(r,(function(t){o.getSystem().getByDom(t).each((function(t){var n=c(t);e[n]=t}))})),i.set(k.some(e)),e})));Dt(r,(function(t,e){var o=j(n,e);$r(t.element,"aria-expanded",o)}))},h=function(e,n,o){return k.from(o[0]).bind((function(r){return n.lookupMenu(r).bind((function(r){if("notbuilt"===r.type)return k.none();var i=r.menu,a=m(n,o.slice(1));return G(a,(function(e){Vi(e.element,t.markers.backgroundMenu)})),Wi(i.element)||dg.append(e,ha(i)),Ni(i.element,[t.markers.backgroundMenu]),f(e,i),g(e,n,o),k.some(i)}))}))};(r=o=o||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=function(e,n,r){void 0===r&&(r=o.HighlightSubmenu);var i=c(n);return a.expand(i).bind((function(i){return p(e,i),k.from(i[0]).bind((function(u){return a.lookupMenu(u).bind((function(c){var s=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return a.setMenuBuilt(e,o),o}(e,u,c);return Wi(s.element)||dg.append(e,ha(s)),t.onOpenSubmenu(e,n,s,et(i)),r===o.HighlightSubmenu?(dd.highlightFirst(s),h(e,a,i)):(dd.dehighlightAll(s),k.some(n))}))}))}))},b=function(e,n){var o=c(n);return a.collapse(o).bind((function(o){return p(e,o),h(e,a,o).map((function(o){return t.onCollapseMenu(e,n,o),o}))}))},y=function(e){return function(n,o){return Ja(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(l)}))}))}},x=er([rr(qg(),(function(t,e){var n=e.event.item;a.lookupItem(c(n)).each((function(){var n=e.event.menu;dd.highlight(t,n);var o=c(e.event.item);a.refresh(o).each((function(e){return g(t,a,e)}))}))})),gr((function(e,r){var i=r.event.target;e.getSystem().getByDom(i).each((function(r){0===c(r).indexOf("collapse-item")&&b(e,r),v(e,r,o.HighlightSubmenu).fold((function(){t.onExecute(e,r)}),n)}))})),fr((function(e,n){u(e).each((function(n){dg.append(e,ha(n)),t.onOpenMenu(e,n),t.highlightImmediately&&f(e,n)}))}))].concat(t.navigateOnHover?[rr(Vg(),(function(e,n){var r,i,u=n.event.item;r=e,i=c(u),a.refresh(i).bind((function(t){return p(r,t),h(r,a,t)})),v(e,u,o.HighlightParent),t.onHover(e,u)}))]:[])),w=function(t){return dd.getHighlighted(t).bind(dd.getHighlighted)},S={collapseMenu:function(t){w(t).each((function(e){b(t,e)}))},highlightPrimary:function(t){a.getPrimary().each((function(e){f(t,e)}))},repositionMenus:function(e){a.getPrimary().bind((function(t){return w(e).bind((function(t){var e=c(t),n=Ft(a.getMenus()),o=Kf(W(n,Qg.extractPreparedMenu));return a.getTriggeringPath(e,(function(t){return e=t,ct(o,(function(t){if(!t.getSystem().isConnected())return k.none();var n=dd.getCandidates(t);return K(n,(function(t){return c(t)===e}))}));var e}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){var n;n=e,k.from(n.components()[0]).filter((function(t){return"menu"===Kr(t.element,"role")})).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yl(t.tmenuBehaviours,[ug.config({mode:"special",onRight:y((function(t,e){return Qf(e.element)?k.none():v(t,e,o.HighlightSubmenu)})),onLeft:y((function(t,e){return Qf(e.element)?k.none():b(t,e)})),onEscape:y((function(e,n){return b(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){a.getPrimary().each((function(e){Qo(t,e.element,Eo())}))}}),dd.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ed.config({find:function(t){return dd.getHighlighted(t)}}),dg.config({})]),eventOrder:t.eventOrder,apis:S,events:x}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Qt(t,e),expansions:{}}},collapseItem:function(t){return{value:ii(Zg()),meta:{text:t}}}}}),ep=Xf({name:"InlineView",configFields:[Ne("lazySink"),pu("onShow"),pu("onHide"),tn("onEscape"),Wl("inlineBehaviours",[Cl,Ul,dc]),en("fireDismissalEventInstead",[nn("event",Lo())]),en("fireRepositionEventInstead",[nn("event",No())]),nn("getRelated",k.none),nn("isExtraPart",s),nn("eventOrder",k.none)],factory:function(t,e){var n=function(t,e,n,r){o(t,e,n,(function(){return r.map(ja)}))},o=function(e,n,o,r){var i=t.lazySink(e).getOrDie();Cl.openWhileCloaked(e,o,(function(){return el.positionWithinBounds(i,n,e,r())})),Ul.setValue(e,k.some({mode:"position",anchor:n,getBounds:r}))},r=function(e,n,o,r){var i,a,u,c,s,l,f,m,g=(i=t,a=e,u=n,s=r,l=function(){return i.lazySink(a)},f="horizontal"===(c=o).type?{layouts:{onLtr:Ju,onRtl:Qu}}:{},m=function(t){return 2===t.length?f:{}},tp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return Cl.close(a),i.onEscape.map((function(t){return t(a)})),k.some(!0)},onExecute:function(){return k.some(!0)},onOpenMenu:function(t,e){el.positionWithinBounds(l().getOrDie(),u,e,s())},onOpenSubmenu:function(t,e,n,o){var r=l().getOrDie();el.position(r,d({anchor:"submenu",item:e},m(o)),n)},onRepositionMenu:function(t,e,n){var o=l().getOrDie();el.positionWithinBounds(o,u,e,s()),G(n,(function(t){var e=m(t.triggeringPath);el.position(o,d({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}}));Cl.open(e,g),Ul.setValue(e,k.some({mode:"menu",menu:g}))},i=function(e){Cl.isOpen(e)&&Ul.getValue(e).each((function(n){switch(n.mode){case"menu":Cl.getState(e).each((function(t){tp.repositionMenus(t)}));break;case"position":var o=t.lazySink(e).getOrDie();el.positionWithinBounds(o,n.anchor,e,n.getBounds())}}))},a={setContent:function(t,e){Cl.setContent(t,e)},showAt:function(t,e,o){n(t,e,o,k.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(t,e,n){r(t,e,n,(function(){return k.none()}))},showMenuWithinBounds:r,hide:function(t){Cl.isOpen(t)&&(Ul.setValue(t,k.none()),Cl.close(t))},getContent:function(t){return Cl.getState(t)},reposition:i,isOpen:Cl.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Yl(t.inlineBehaviours,[Cl.config({isPartOf:function(e,n,o){return tu(n,o)||(r=e,i=o,t.getRelated(r).exists((function(t){return tu(t,i)})));var r,i},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Ul.config({store:{mode:"memory",initialValue:k.none()}}),dc.config({channels:d(d({},Dl(d({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Bl(d(d({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:a}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),np=function(t){return t.x},op=function(t,e){return t.x+t.width/2-e.width/2},rp=function(t,e){return t.x+t.width-e.width},ip=function(t){return t.y},ap=function(t,e){return t.y+t.height-e.height},up=function(t,e,n){return Su(rp(t,e),ap(t,e),n.innerSoutheast(),Tu(),Iu(t,{right:0,bottom:3}),"layout-inner-se")},cp=function(t,e,n){return Su(np(t),ap(t,e),n.innerSouthwest(),_u(),Iu(t,{left:1,bottom:3}),"layout-inner-sw")},sp=function(t,e,n){return Su(rp(t,e),ip(t),n.innerNortheast(),Ou(),Iu(t,{right:0,top:2}),"layout-inner-ne")},lp=function(t,e,n){return Su(np(t),ip(t),n.innerNorthwest(),ku(),Iu(t,{left:1,top:2}),"layout-inner-nw")},fp=function(t,e,n){return Su(op(t,e),ip(t),n.innerNorth(),Du(),Iu(t,{top:2}),"layout-inner-n")},dp=function(t,e,n){return Su(op(t,e),ap(t,e),n.innerSouth(),Eu(),Iu(t,{bottom:3}),"layout-inner-s")},mp=tinymce.util.Tools.resolve("tinymce.util.Delay"),gp=Xf({name:"Button",factory:function(t){var e=Ig(t.action),n=t.dom.tag,o=function(e){return Rt(t.dom,"attributes").bind((function(t){return Rt(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Xl(t.buttonBehaviours,[bg.config({}),ug.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map((function(t){return{role:t}})).getOr({});return d({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[nn("uid",void 0),Ne("dom"),nn("components",[]),ql("buttonBehaviours",[bg,ug]),Ke("action"),Ke("role"),nn("eventOrder",{})]}),pp=function(t){var e=void 0!==t.uid&&Vt(t,"uid")?t.uid:di("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return d(d({},t),{uid:e})}}},hp=function(t){return k.from(t()["temporary-placeholder"]).getOr("!not found!")},vp=function(t,e){return k.from(e()[t.toLowerCase()]).getOrThunk((function(){return hp(e)}))},bp={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},yp=Xf({name:"Notification",factory:function(t){var e,n,o=pp({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:ac([dg.config({})])}),r=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},i=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},a=pp({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},i(0)],behaviours:ac([dg.config({})])}),u={updateProgress:function(t,e){t.getSystem().isConnected()&&a.getOpt(t).each((function(t){dg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(e)]},i(e)])}))},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=o.get(t),dg.set(n,[da(e)]))}},c=Q([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return k.from(bp[t])})).toArray()]),s=pp(gp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vp("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=c,n=t.iconProvider,ct(e,(function(t){return k.from(n()[t.toLowerCase()])})).getOrThunk((function(){return hp(n)})))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:ac([dg.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ac([bg.config({}),mg("notification-events",[rr(mo(),(function(t){s.getOpt(t).each(bg.focus)}))])]),components:l.concat(t.progress?[a.asSpec()]:[]).concat(t.closeButton?[s.asSpec()]:[]),apis:u}},configFields:[Ke("level"),Ne("progress"),Ne("icon"),Ne("onAction"),Ne("text"),Ne("iconProvider"),Ne("translationProvider"),cn("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function xp(t,e,n){var o=e.backstage;return{open:function(t,r){var i=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=function(){r(),ep.hide(c)},u=pa(yp.sketch({text:t.text,level:j(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:k.from(t.icon),closeButton:!i,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),c=pa(ep.sketch(d({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},o.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),0<t.timeout&&mp.setTimeout((function(){a()}),t.timeout),{close:a,moveTo:function(t,e){ep.showAt(c,{anchor:"makeshift",x:t,y:e},ha(u))},moveRel:function(t,n){var o,r;"banner"!==n?(o=function(t){switch(t){case"bc-bc":return dp;case"tc-tc":return fp;case"tc-bc":return Uu;case"bc-tc":default:return Wu}}(n),r={anchor:"node",root:Gi(),node:k.some(pn.fromDom(t)),layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}},ep.showAt(c,r,ha(u))):ep.showAt(c,e.backstage.shared.anchors.banner(),ha(u))},text:function(t){yp.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){yp.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(t){var e;G(t,(function(t){return t.moveTo(0,0)})),0<(e=t).length&&(it(e).each((function(t){return t.moveRel(null,"banner")})),G(e,(function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")})))},getArgs:function(t){return t.settings}}}var wp,Sp,Cp=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},kp=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Op=function(t,e,n,o,r){var i=kp(t,(function(e){return o=e,(n=t).isBlock(o)||j(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===n.getContentEditable(o);var n,o}));return k.from(i.backwards(e,n,o,r))},_p=function(t,e){return Tp(pn.fromDom(t.selection.getNode())).getOrThunk((function(){var n=pn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Lr(n,pn.fromDom(e.extractContents())),e.insertNode(n.dom),Or(n).each((function(t){return t.dom.normalize()})),_s(n,Os).map((function(e){var n;t.selection.setCursorLocation(e.dom,"img"===pr(n=e)?1:Cs(n).fold((function(){return Dr(n).length}),(function(t){return t.length})))})),n}))},Tp=function(t){return Ja(t,"[data-mce-autocompleter]")},Dp=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Ep=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},Bp=function(t,e){return t.substring(e.length)},Ap=function(t,e,n,o){if(void 0===o&&(o=0),!(r=e).collapsed||3!==r.startContainer.nodeType)return k.none();var r,i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Op(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,e,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(Ep(r))return k.none();if(r===n)break}return k.some(o)}(o,e,n).getOr(e)}),i).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return k.none();var i=Dp(r);return 0!==i.lastIndexOf(n)||Bp(i,n).length<o?k.none():k.some({text:Bp(i,n),range:r,triggerChar:n})}))},Ip=function(t,e,n,o){return void 0===o&&(o=0),Tp(pn.fromDom(e.startContainer)).fold((function(){return Ap(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=Dp(o);return k.some({range:o,text:Bp(r,n),triggerChar:n})}))},Mp=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){Ko(t,po(),{raw:e})};e.on("keydown",(function(e){var o=function(){return t.getView().bind(dd.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(o().each(Jo),e.preventDefault()):40===e.which?(o().fold((function(){t.getView().each(dd.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||o().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&Tp(pn.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},Fp=tinymce.util.Tools.resolve("tinymce.util.Promise"),Rp=function(t,e){return{container:t,offset:e}},Pp=function t(e){if(3===e.nodeType)return Rp(e,e.data.length);var n=e.childNodes;return 0<n.length?t(n[n.length-1]):Rp(e,n.length)},Vp=function t(e,n){var o=e.childNodes;return 0<o.length&&n<o.length?t(o[n],0):0<o.length&&1===e.nodeType&&o.length===n?Pp(o[o.length-1]):Rp(e,n)},Hp=function(t){return function(e){var n,o,r=Vp(e.startContainer,e.startOffset);return!Op(n=t,(o=r).container,o.offset,(function(t,e){return 0===e?-1:e}),n.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!Ep(e)})).isSome()}},zp=function(t,e){var n,o,r=e(),i=t.selection.getRng();return n=t.dom,o=i,ct(r.triggerChars,(function(t){return Ip(n,o,t)})).bind((function(n){return jp(t,e,n)}))},jp=function(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,a=q(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return Hp(t.dom)}))(n.range,i,n.text)}));if(0===a.length)return k.none();var u=Fp.all(W(a,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return k.some({lookupData:u,context:n})},Lp=de([We("type"),Ze("text")]),Np=de([nn("type","autocompleteitem"),nn("active",!1),nn("disabled",!1),nn("meta",{}),We("value"),Ze("text"),Ze("icon")]),Up=de([We("type"),We("ch"),rn("minChars",1),nn("columns",1),rn("maxResults",10),tn("matches"),Ye("fetch"),Ye("onAction"),ln("highlightOn",[],Pe)]),Wp=[cn("disabled",!1),Ze("tooltip"),Ze("icon"),Ze("text"),sn("onSetup",(function(){return n}))],Gp=de([We("type"),Ye("onAction")].concat(Wp)),Yp=function(t){return Te("toolbarbutton",Gp,t)},qp=[cn("active",!1)].concat(Wp),Xp=de(qp.concat([We("type"),Ye("onAction")])),$p=function(t){return Te("ToggleButton",Xp,t)},Kp=[sn("predicate",s),un("scope","node",["node","editor"]),un("position","selection",["node","selection","line"])],Jp=Wp.concat([nn("type","contextformbutton"),nn("primary",!1),Ye("onAction"),dn("original",i)]),Qp=qp.concat([nn("type","contextformbutton"),nn("primary",!1),Ye("onAction"),dn("original",i)]),Zp=Wp.concat([nn("type","contextformbutton")]),th=qp.concat([nn("type","contextformtogglebutton")]),eh=Ie("type",{contextformbutton:Jp,contextformtogglebutton:Qp}),nh=de([nn("type","contextform"),sn("initValue",(function(){return""})),Ze("label"),$e("commands",eh),Je("launch",Ie("type",{contextformbutton:Zp,contextformtogglebutton:th}))].concat(Kp)),oh=de([nn("type","contexttoolbar"),We("items")].concat(Kp)),rh=function(t){var e,n,o=t.ui.registry.getAll().popups,r=Et(o,(function(t){return Te("Autocompleter",Up,t).fold((function(t){throw new Error(Be(t))}),(function(t){return t}))})),i=(e=It(r,(function(t){return t.ch})),n={},G(e,(function(t){n[t]={}})),_t(n)),a=Ft(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return q(a,(function(e){return e.ch===t}))}}};(Sp=wp=wp||{})[Sp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Sp[Sp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ih,ah,uh=wp,ch="tox-menu-nav__js",sh="tox-collection__item",lh="tox-swatch",fh={normal:ch,color:lh},dh="tox-collection__item--enabled",mh="tox-collection__item-label",gh="tox-collection__item-caret",ph="tox-collection__item--active",hh="tox-collection__item-container",vh="tox-collection__item-container--row",bh=function(t){return Rt(fh,t).getOr(ch)},yh=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},xh=function(t){var e=yh(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:bh(t)}},wh=[Xg.parts.items({})],Sh=function(t,e,n){var o=yh(n);return{dom:{tag:"div",classes:Q([[o.tieredMenu]])},markers:xh(n)}},Ch=function(t,e){return function(n){var o=U(n,e);return W(o,(function(e){return{dom:t,components:e}}))}},kh=function(t,e){var n=[],o=[];return G(t,(function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],Pt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&n.push(o),W(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},Oh=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Xg.parts.items({preprocess:function(n){return"auto"!==t&&1<t?Ch({tag:"div",classes:["tox-collection__group"]},t)(n):kh(n,(function(t,n){return"separator"===e[n].type}))}})]}},_h=function(t){return L(t,(function(t){return"icon"in t&&void 0!==t.icon}))},Th=function(t){return console.error(Be(t)),console.log(t),k.none()},Dh=function(t,e,n,o,r){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xg.parts.items({preprocess:function(t){return kh(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:a.dom,components:a.components,items:n}},Eh=function(t,e,n,o,r){var a,u,c,s,l,f;return"color"===r?{value:t,dom:(a=o,c={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xg.parts.items({preprocess:"auto"!==a?Ch({tag:"div",classes:["tox-swatches__row"]},a):i})]}]}).dom,components:c.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"normal"===r&&1===o?{value:t,dom:(c=Oh(1,n)).dom,components:c.components,items:n}:"normal"===r?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:(s=e,l=o,f=yh(r),{tag:"div",classes:Q([[f.menu,"tox-menu-"+l+"-column"],s?[f.hasIcons]:[]])}),components:wh,items:n}:{value:t,dom:(u=o,c={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xg.parts.items({preprocess:Ch({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:c.components,items:n}},Bh=[We("type"),We("src"),Ze("alt"),ln("classes",[],Pe)],Ah=de(Bh),Ih=[We("type"),We("text"),Ze("name"),ln("classes",["tox-collection__item-label"],Pe)],Mh=de(Ih),Fh=ke((function(){return Ae("type",{cardimage:Ah,cardtext:Mh,cardcontainer:Rh})})),Rh=de([We("type"),an("direction","horizontal"),an("align","left"),an("valign","middle"),$e("items",Fh)]),Ph=[cn("disabled",!1),Ze("text"),Ze("shortcut"),ye("value","value",Xt((function(){return ii("menuitem-value")})),Me()),nn("meta",{})],Vh=de([We("type"),Ze("label"),$e("items",Fh),sn("onSetup",(function(){return n})),sn("onAction",n)].concat(Ph)),Hh=de([We("type"),cn("active",!1),Ze("icon")].concat(Ph)),zh=de([We("type"),Ge("fancytype",["inserttable","colorswatch"]),sn("onAction",n)]),jh=de([We("type"),sn("onSetup",(function(){return n})),sn("onAction",n),Ze("icon")].concat(Ph)),Lh=de([We("type"),Ye("getSubmenuItems"),sn("onSetup",(function(){return n})),Ze("icon")].concat(Ph)),Nh=de([We("type"),Ze("icon"),cn("active",!1),sn("onSetup",(function(){return n})),Ye("onAction")].concat(Ph)),Uh=function(t,e,n){var o=Ts(t.element,"."+n);if(0<o.length){var r=J(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return k.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return k.none()},Wh=function(t,e){return ac([mg(t,e)])},Gh=function(t){return Wh(ii("unnamed-events"),t)},Yh=ii("tooltip.exclusive"),qh=ii("tooltip.show"),Xh=ii("tooltip.hide"),$h=function(t,e,n){t.getSystem().broadcastOn([Yh],{})},Kh=Object.freeze({__proto__:null,hideAllExclusive:$h,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&dg.set(t,o)}))}}),Jh=Object.freeze({__proto__:null,events:function(t,e){var n=function(n){e.getTooltip().each((function(o){sl(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()};return er(Q([[rr(qh,(function(n){e.resetTimer((function(){var o,r,i;o=n,e.isShowing()||($h(o),r=t.lazySink(o).getOrDie(),i=o.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:er("normal"===t.mode?[rr(fo(),(function(t){$o(o,qh)})),rr(so(),(function(t){$o(o,Xh)}))]:[]),behaviours:ac([dg.config({})])}),e.setTooltip(i),al(r,i),t.onShow(o,i),el.position(r,t.anchor(o),i))}),t.delay)})),rr(Xh,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),rr(To(),(function(t,e){e.universal||j(e.channels,Yh)&&n(t)})),dr((function(t){n(t)}))],"normal"===t.mode?[rr(mo(),(function(t){$o(t,qh)})),rr(Oo(),(function(t){$o(t,Xh)})),rr(fo(),(function(t){$o(t,qh)})),rr(so(),(function(t){$o(t,Xh)}))]:[rr(qo(),(function(t,e){$o(t,qh)})),rr(Xo(),(function(t){$o(t,Xh)}))]]))}}),Qh=[Ne("lazySink"),Ne("tooltipDom"),nn("exclusive",!0),nn("tooltipComponents",[]),nn("delay",300),un("mode","normal",["normal","follow-highlight"]),nn("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:r([Wu,Uu,zu,Lu,ju,Nu]),onRtl:r([Wu,Uu,zu,Lu,ju,Nu])}}})),pu("onHide"),pu("onShow")],Zh=cc({fields:Qh,name:"tooltipping",active:Jh,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none()),e=mn(k.none()),n=function(){t.get().each((function(t){clearTimeout(t)}))},o=r("not-implemented");return Si({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(k.some(t))},clearTooltip:function(){e.set(k.none())},clearTimer:n,resetTimer:function(e,o){n(),t.set(k.some(setTimeout((function(){e()}),o)))},readState:o})}}),apis:Kh}),tv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ev=tinymce.util.Tools.resolve("tinymce.util.I18n"),nv=["input","button","textarea","select"],ov=function(t,e,n){(e.disabled()?sv:lv)(t,e)},rv=function(t,e){return!0===e.useNative&&j(nv,pr(t.element))},iv=function(t){$r(t.element,"disabled","disabled")},av=function(t){Zr(t.element,"disabled")},uv=function(t){$r(t.element,"aria-disabled","true")},cv=function(t){$r(t.element,"aria-disabled","false")},sv=function(t,e,n){e.disableClass.each((function(e){Vi(t.element,e)})),(rv(t,e)?iv:uv)(t),e.onDisabled(t)},lv=function(t,e,n){e.disableClass.each((function(e){zi(t.element,e)})),(rv(t,e)?av:cv)(t),e.onEnabled(t)},fv=function(t,e){return rv(t,e)?Qr(t.element,"disabled"):"true"===Kr(t.element,"aria-disabled")},dv=Object.freeze({__proto__:null,enable:lv,disable:sv,isDisabled:fv,onLoad:ov,set:function(t,e,n,o){(o?sv:lv)(t,e)}}),mv=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return er([nr(Do(),(function(e,n){return fv(e,t)})),ec(t,e,ov)])}}),gv=[sn("disabled",s),nn("useNative",!0),Ke("disableClass"),pu("onDisabled"),pu("onEnabled")],pv=cc({fields:gv,name:"disabling",active:mv,apis:dv}),hv=tinymce.util.Tools.resolve("tinymce.EditorManager"),vv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},bv=function(t){return t.getParam("width",tv.DOM.getStyle(t.getElement(),"width"))},yv=function(t){return k.from(t.getParam("min_width")).filter(F)},xv=function(t){return k.from(t.getParam("min_height")).filter(F)},wv=function(t){return k.from(t.getParam("max_width")).filter(F)},Sv=function(t){return k.from(t.getParam("max_height")).filter(F)},Cv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},kv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=T(e),r=E(e)&&0<e.length;return!_v(t)&&(r||o||n)},Ov=function(t){var e=N(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=q(e,(function(t){return"string"==typeof t}));return 0<n.length?k.some(n):k.none()},_v=function(t){return Ov(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),l)};(ah=ih=ih||{})["default"]="wrap",ah.floating="floating",ah.sliding="sliding",ah.scrolling="scrolling";var Tv,Dv,Ev=function(t){return t.getParam("toolbar_mode","","string")};(Dv=Tv=Tv||{}).auto="auto",Dv.top="top",Dv.bottom="bottom";var Bv,Av,Iv,Mv=function(t){return t.getParam("toolbar_location",Tv.auto,"string")},Fv=function(t){return Mv(t)===Tv.bottom},Rv=function(t){var e=t.getParam("fixed_toolbar_container","","string");return 0<e.length&&t.inline?Ka(Gi(),e):k.none()},Pv=function(t){return t.inline&&Rv(t).isSome()},Vv=function(t){return Rv(t).getOrThunk((function(){return Fr(Mr(pn.fromDom(t.getElement())))}))},Hv=function(t){return t.inline&&!Cv(t)&&!kv(t)&&!_v(t)},zv=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Pv(t)&&!Hv(t)},jv="silver.readonly",Lv=de([Ue("readonly",Ve)]),Nv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([kl()],{target:n}),t.uiMothership.broadcastOn([kl()],{target:n})),t.mothership.broadcastOn([jv],{readonly:e}),t.uiMothership.broadcastOn([jv],{readonly:e})},Uv=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&Nv(e,!0)})),t.on("SwitchMode",(function(){return Nv(e,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")},Wv=function(){var t;return dc.config({channels:((t={})[jv]={schema:Lv,onReceive:function(t,e){pv.set(t,e.readonly)}},t)})},Gv=function(t){return pv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Yv=function(t){return pv.config({disabled:t})},qv=function(t){return pv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Xv=function(t){return pv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},$v=function(t,e){var n=t.getApi(e);return function(t){t(n)}},Kv=function(t,e){return fr((function(n){$v(t,n)((function(n){var o=t.onSetup(n);M(o)&&e.set(o)}))}))},Jv=function(t,e){return dr((function(n){return $v(t,n)(e.get())}))},Qv=((Bv={})[Do()]=["disabling","alloy.base.behaviour","toggling","item-events"],Bv),Zv=function(t){return Z(t,(function(t){return t.toArray()}))},tb=function(t,e,o,r){var i,a,u=mn(n);return{type:"item",dom:e.dom,components:Zv(e.optComponents),data:t.data,eventOrder:Qv,hasSubmenu:t.triggersSubmenu,itemBehaviours:ac([mg("item-events",[(i=t,a=o,gr((function(t,e){$v(i,t)(i.onAction),i.triggersSubmenu||a!==uh.CLOSE_ON_EXECUTE||(t.getSystem().isConnected()&&$o(t,Io()),e.stop())}))),Kv(t,u),Jv(t,u)]),Gv((function(){return t.disabled||r.isDisabled()})),Wv(),dg.config({})].concat(t.itemBehaviours))}},eb=function(t){return{value:t.value,meta:d({text:t.text.getOr("")},t.meta)}},nb=tinymce.util.Tools.resolve("tinymce.Env"),ob=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},rb=function(t){return{dom:{tag:"div",classes:[mh]},components:[da(ev.translate(t))]}},ib=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},ab=function(t,e){return{dom:{tag:"div",classes:[mh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[da(ev.translate(e))]}]}},ub=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=nb.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=W(o,(function(t){var e=t.toLowerCase().trim();return Pt(n,e)?n[e]:t})),nb.mac?r.join(""):r.join("+"))}};var e,n,o,r},cb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:vp("checkmark",t)}}},sb=function(t,e){var n=e.map((function(t){return{attributes:{title:ev.translate(t)}}})).getOr({});return d({tag:"div",classes:[ch,sh].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},lb=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],fb=["list-bull-circle","list-bull-default","list-bull-square"],db=function(t,e,n,o){void 0===o&&(o=k.none());var r,i,u,c,s,l,f,m,p,h,v,b,y=ev.isRtl()&&t.iconContent.exists((function(t){return j(fb,t)})),x=t.iconContent.map((function(t){return ev.isRtl()&&j(lb,t)?t+"-rtl":t})).map((function(t){return n=t,r=e.icons,i=o,k.from(r()[n.toLowerCase()]).or(i).getOrThunk((function(){return hp(r)}));var n,r,i})),w=k.from(t.meta).fold((function(){return rb}),(function(t){return Pt(t,"style")?a(ab,t.style):rb}));return"color"===t.presets?(m=t.ariaLabel,p=t.value,h=e,{dom:(v=x.getOr(""),b={tag:"div",attributes:m.map((function(t){return{title:h.translate(t)}})).getOr({}),classes:["tox-swatch"]},d(d({},b),"custom"===p?{tag:"button",classes:g(b.classes,["tox-swatches__picker-btn"]),innerHtml:v}:"remove"===p?{classes:g(b.classes,["tox-swatch--remove"]),innerHtml:v}:{attributes:d(d({},b.attributes),{"data-mce-color":p}),styles:{"background-color":p}})),optComponents:[]}):(r=t,i=x,u=w,c=y,s=n?i.or(k.some("")).map(ob):k.none(),l=r.checkMark,f=r.htmlContent.fold((function(){return r.textContent.map(u)}),(function(t){return k.some(ib(t,[mh]))})),{dom:sb(c,r.ariaLabel),optComponents:[s,f,r.shortcutContent.map(ub),l,r.caret]})},mb=function(t,e){return Rt(t,"tooltipWorker").map((function(t){return[Zh.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Fc}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Zh.setComponents(e,[ma({element:pn.fromDom(t)})])}))}})]})).getOr([])},gb=function(t,e){var n,o=ev.translate(t),r=(n=o,tv.DOM.encode(n));if(0<e.length){var i=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return r.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return r},pb=function t(e,n){return W(e,(function(e){switch(e.type){case"cardcontainer":return c=t((u=e).items,n),s="vertical"===u.direction?"tox-collection__item-container--column":vh,l="left"===u.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[hh,s,l,function(){switch(u.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:c};case"cardimage":return r=e.src,i=e.classes,a=e.alt,{dom:{tag:"img",classes:i,attributes:{src:r,alt:a.getOr("")}}};case"cardtext":var o=e.name.exists((function(t){return j(n.cardText.highlightOn,t)}))?k.from(n.cardText.matchText).getOr(""):"";return ib(gb(e.text,o),e.classes)}var r,i,a,u,c,s,l}))},hb=Tf(Lg(),Ng()),vb=function(t){return{value:t}},bb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xb=function(t){return bb.test(t)||yb.test(t)},wb=function(t){var e={value:t.value.replace(bb,(function(t,e,n,o){return e+e+n+n+o+o}))},n=yb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Sb=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},Cb=function(t){var e=Sb(t.red)+Sb(t.green)+Sb(t.blue);return vb(e)},kb=Math.min,Ob=Math.max,_b=Math.round,Tb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Db=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Eb=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},Bb=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},Ab=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;i=Ob(0,kb(i,1)),a=Ob(0,kb(a,1));if(0===i)return e=n=o=_b(255*a),Eb(e,n,o,1);var u=r/60,c=a*i,s=c*(1-Math.abs(u%2-1)),l=a-c;switch(Math.floor(u)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return e=_b(255*(e+l)),n=_b(255*(n+l)),o=_b(255*(o+l)),Eb(e,n,o,1)},Ib=function(t){var e=wb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Eb(n,o,r,1)},Mb=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return Eb(r,i,a,u)},Fb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Rb=Eb(255,0,0,1),Pb=function(t,e){return t.fire("ResizeContent",e)},Vb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Hb="tinymce-custom-colors",zb="choiceitem",jb=[{type:zb,text:"Light Green",value:"#BFEDD2"},{type:zb,text:"Light Yellow",value:"#FBEEB8"},{type:zb,text:"Light Red",value:"#F8CAC6"},{type:zb,text:"Light Purple",value:"#ECCAFA"},{type:zb,text:"Light Blue",value:"#C2E0F4"},{type:zb,text:"Green",value:"#2DC26B"},{type:zb,text:"Yellow",value:"#F1C40F"},{type:zb,text:"Red",value:"#E03E2D"},{type:zb,text:"Purple",value:"#B96AD9"},{type:zb,text:"Blue",value:"#3598DB"},{type:zb,text:"Dark Turquoise",value:"#169179"},{type:zb,text:"Orange",value:"#E67E23"},{type:zb,text:"Dark Red",value:"#BA372A"},{type:zb,text:"Dark Purple",value:"#843FA1"},{type:zb,text:"Dark Blue",value:"#236FA1"},{type:zb,text:"Light Gray",value:"#ECF0F1"},{type:zb,text:"Medium Gray",value:"#CED4D9"},{type:zb,text:"Gray",value:"#95A5A6"},{type:zb,text:"Dark Gray",value:"#7E8C8D"},{type:zb,text:"Navy Blue",value:"#34495E"},{type:zb,text:"Black",value:"#000000"},{type:zb,text:"White",value:"#ffffff"}],Lb=function(t){void 0===t&&(t=10);var e,n=Vb.getItem(Hb),o=T(n)?JSON.parse(n):[],r=t-(e=o).length<0?e.slice(0,t):e,i=function(t){r.splice(t,1)};return{add:function(e){var n;(-1===(n=z(r,e))?k.none():k.some(n)).each(i),r.unshift(e),r.length>t&&r.pop(),Vb.setItem(Hb,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),Nb=function(t){return!1!==t.getParam("custom_colors")},Ub=function(t){var e=t.getParam("color_map");return void 0!==e?function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var o=n.getContext("2d"),r=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=0;i<t.length;i+=2)e.push({text:t[i+1],value:function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();o.clearRect(0,0,n.width,n.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var e=o.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],c=e[3];return"#"+r(i,c)+r(a,c)+r(u,c)}(t[i]),type:"choiceitem"});return e}(e):jb},Wb=function(t){Lb.add(t)},Gb=function(t){t.addCommand("mceApplyTextcolor",(function(e,n){var o,r,i;r=e,i=n,(o=t).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),t.addCommand("mceRemoveTextcolor",(function(e){var n,o;o=e,(n=t).undoManager.transact((function(){n.focus(),n.formatter.remove(o,{value:null},null,!0),n.nodeChanged()}))}))},Yb=function(t){var e,n,o=Ub(t),r=(e=o.length,Math.max(5,Math.ceil(Math.sqrt(e))));return n=r,t.getParam("color_cols",n,"number")},qb=function(t,e,n,o){"custom"===n?Zb(t)((function(n){n.each((function(n){Wb(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),"#000000"):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))},Xb=function(t,e){return t.concat(W(Lb.state(),(function(t){return{type:zb,text:t,value:t}})).concat((o={type:n="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},e?[o,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var n,o},$b=function(t,e){return function(n){n(Xb(t,e))}},Kb=function(t,e,n){var o,r;o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=n,t.setIconFill(o,r),t.setIconStroke(o,r)},Jb=function(t,e,o,r,i){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var n,r,i;return k.from((r=o,(n=t).dom.getParents(n.selection.getStart(),(function(t){var e;(e=t.style["forecolor"===r?"color":"background-color"])&&(i=i||e)})),i)).bind((function(t){return function(t){if("transparent"===t)return k.some(Eb(0,0,0,0));var e=Tb.exec(t);if(null!==e)return k.some(Mb(e[1],e[2],e[3],"1"));var n=Db.exec(t);return null!==n?k.some(Mb(n[1],n[2],n[3],n[4])):k.none()}(t).map((function(t){var n=Cb(t).value;return Cn(e.toLowerCase(),n)}))})).getOr(!1)},columns:Yb(t),fetch:$b(Ub(t),Nb(t)),onAction:function(e){null!==i.get()&&qb(t,o,i.get(),n)},onItemAction:function(n,r){qb(t,o,r,(function(n){var o;i.set(n),o={name:e,color:n},t.fire("TextColorChange",o)}))},onSetup:function(n){null!==i.get()&&Kb(n,e,i.get());var o=function(t){t.name===e&&Kb(n,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},Qb=function(t,e,o,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){qb(t,o,e.value,n)}}]}})},Zb=function(t){return function(e,o){var r,i={colorpicker:o},a=(r=e,function(t){var e=t.getData();r(k.from(e.colorpicker)),t.close()});t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:a,onClose:n,onCancel:function(){e(k.none())}})}},ty=function(t,e,n,o,r,i,a,u){var c=_h(e),s=ey(e,n,o,"color"!==r?"normal":"color",i,a,u);return Eh(t,c,s,o,r)},ey=function(t,e,o,r,i,a,u){return Kf(W(t,(function(c){return"choiceitem"===c.type?Te("choicemenuitem",Hh,c).fold(Th,(function(s){return k.some(function(t,e,o,r,i,a,u,c){void 0===c&&(c=!0);var s=db({presets:o,textContent:e?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:k.none(),checkMark:e?k.some(cb(u.icons)):k.none(),caret:k.none(),value:t.value},u,c);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(i),n},triggersSubmenu:!1,itemBehaviours:[]},s,a,u),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})}(s,1===o,r,e,a(c.value),i,u,_h(t)))})):k.none()})))},ny=function(t,e){var n=xh(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},oy=ii("cell-over"),ry=ii("cell-execute"),iy=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(function(t,e,n){var o,r=function(n){return Ko(n,ry,{row:t,col:e})},i=function(t,e){e.stop(),r(t)};return pa({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=n,o)},behaviours:ac([mg("insert-table-picker-cell",[rr(fo(),bg.focus),rr(Do(),r),rr(yo(),i),rr(Bo(),i)]),Bg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bg.config({onFocus:function(n){return Ko(n,oy,{row:t,col:e})}})])})}(r,a,t));o.push(i)}return o},ay={inserttable:function(t){var e=ii("size-label"),n=iy(e,10,10),o=pp({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[da("0x0")],behaviours:ac([dg.config({})])});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Z(n,(function(t){return W(t,ha)})).concat(o.asSpec()),behaviours:ac([mg("insert-table-picker",[cr(oy,(function(t,e,r){var i=r.event.row,a=r.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Bg.set(t[i][a],i<=e&&a<=n)}(n,i,a,10,10),dg.set(o.get(t),[da(a+1+"x"+(i+1))])})),cr(ry,(function(e,n,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),$o(e,Io())}))]),ug.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n=Xb(e.colorinput.getColors(),e.colorinput.hasCustomColors()),o=e.colorinput.getColorCols(),r=ty(ii("menu-value"),n,(function(e){t.onAction({value:e})}),o,"color",uh.CLOSE_ON_EXECUTE,s,e.shared.providers),i=d(d({},r),{markers:xh("color"),movement:ny(o,"color")});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget(Xg.sketch(i))]}}},uy=function(t,e,o,i,a,u,c,s){void 0===s&&(s=!0);var l=db({presets:i,textContent:k.none(),htmlContent:o?t.text.map((function(t){return gb(t,e)})):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},c.providers,s,t.icon);return tb({data:eb(t),disabled:t.disabled,getApi:r({}),onAction:function(e){return a(t.value,t.meta)},onSetup:r(n),triggersSubmenu:!1,itemBehaviours:mb(t.meta,c)},l,u,c.providers)},cy=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:d({tag:"div",classes:[sh,"tox-collection__group-heading"]},e),components:[]}},sy=function(t,e,n,o){void 0===o&&(o=!0);var r=db({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},n,o);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},ly=function(t,e,o,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var a,u,c=i?(u=o.icons,{dom:{tag:"div",classes:[gh],innerHtml:vp("chevron-down",u)}}):(a=o.icons,{dom:{tag:"div",classes:[gh],innerHtml:vp("chevron-right",a)}}),s=db({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(c),checkMark:k.none(),shortcutContent:t.shortcut},o,r);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},disabled:t.disabled,onAction:n,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,e,o)},fy=function(t,e,n,o){void 0===o&&(o=!0);var r=db({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(cb(n.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})},dy=function(t,e){return n=ay,o=t.fancytype,(Object.prototype.hasOwnProperty.call(n,o)?k.some(n[o]):k.none()).map((function(n){return n(t,e)}));var n,o},my=function(t,e,n,o){var r={dom:sb(!1,t.label),optComponents:[k.some({dom:{tag:"div",classes:[hh,vh]},components:pb(t.items,o)})]};return tb({data:eb(d({text:k.none()},t)),disabled:t.disabled,getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){pv.set(t,e),G(Ts(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(pv)&&pv.set(t,e)}))}))}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(o.itemBehaviours).getOr([])},r,e,n.providers)};(Iv=Av=Av||{})[Iv.ContentFocus=0]="ContentFocus",Iv[Iv.UiFocus=1]="UiFocus";var gy,py,hy,vy,by=function(t,e,n,o,r){var i=n.shared.providers,a=function(t){return r?d(d({},t),{shortcut:k.none(),icon:t.text.isSome()?k.none():t.icon}):t};switch(t.type){case"menuitem":return Te("menuitem",jh,t).fold(Th,(function(t){return k.some(sy(a(t),e,i,o))}));case"nestedmenuitem":return Te("nestedmenuitem",Lh,t).fold(Th,(function(t){return k.some(ly(a(t),e,i,o,r))}));case"togglemenuitem":return Te("togglemenuitem",Nh,t).fold(Th,(function(t){return k.some(fy(a(t),e,i,o))}));case"separator":return Te("separatormenuitem",Lp,t).fold(Th,(function(t){return k.some(cy(t))}));case"fancymenuitem":return Te("fancymenuitem",zh,t).fold(Th,(function(t){return dy(a(t),n)}));default:return console.error("Unknown item in general menu",t),k.none()}},yy=function(t,e,n,o,r,i,a){var u=1===o,c=!u||_h(t);return Kf(W(t,(function(t){switch(t.type){case"separator":return Te("Autocompleter.Separator",Lp,t).fold(Th,(function(t){return k.some(cy(t))}));case"cardmenuitem":return Te("cardmenuitem",Vh,t).fold(Th,(function(t){return k.some(my(d(d({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),r,i,{itemBehaviours:mb(t.meta,i),cardText:{matchText:e,highlightOn:a}}))}));case"autocompleteitem":default:return Te("Autocompleter.Item",Np,t).fold(Th,(function(t){return k.some(uy(t,e,u,"normal",n,r,i,c))}))}})))},xy=function(t,e,n,o,r){var i=_h(e),a=Kf(W(e,(function(t){var e=function(t){return by(t,n,o,(e=t,r?!e.hasOwnProperty("text"):i),r);var e};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(d(d({},t),{disabled:!0})):e(t)})));return(r?Dh:Eh)(t,i,a,1,"normal")},wy=function(t){return tp.singleData(t.value,t)},Sy=function(t,e){var n=mn(k.none()),o=mn(!1),r=pa(ep.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ac([mg("dismissAutocompleter",[rr(Lo(),(function(){return u()}))])]),lazySink:e.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&ep.hide(r)},u=function(){var e;i()&&(e=n.get().map((function(t){return t.element})),Tp(e.getOr(pn.fromDom(t.selection.getNode()))).each(Gr),a(),n.set(k.none()),o.set(!1))},c=Ut((function(){return rh(t)})),s=function(e,n,o,i){e.matchLength=n.text.length;var a,u,c,s,l,f,d,m=ct(o,(function(t){return k.from(t.columns)})).getOr(1);ep.showAt(r,{anchor:"node",root:pn.fromDom(t.getBody()),node:k.from(e.element)},Xg.sketch((a=Eh("autocompleter-value",!0,i,m,"normal"),u=m,c=Av.ContentFocus,s="normal",l=(c===Av.ContentFocus?Fd:Md)(),f=ny(u,s),d=xh(s),{dom:a.dom,components:a.components,items:a.items,value:a.value,markers:{selectedItem:d.selectedItem,item:d.item},movement:f,fakeFocus:c===Av.ContentFocus,focusManager:l,menuBehaviours:Gh("auto"!==u?[]:[fr((function(t,e){Uh(t,4,d.item).each((function(e){var n=e.numColumns,o=e.numRows;ug.setGridSize(t,o,n)}))}))])}))),ep.getContent(r).each(dd.highlightFirst)},l=function r(l){var f;f=l,n.get().map((function(e){return Ip(t.dom,t.selection.getRng(),e.triggerChar).bind((function(e){return jp(t,c,e,f)}))})).getOrThunk((function(){return zp(t,c)})).fold(u,(function(c){var l,f;l=c.context,i()||(f=_p(t,l.range),n.set(k.some({triggerChar:l.triggerChar,element:f,matchLength:l.text.length})),o.set(!1)),c.lookupData.then((function(i){n.get().map((function(n){var l,f,d,m,g=c.context;n.triggerChar===g.triggerChar&&(f=g.triggerChar,m=ct(d=i,(function(t){return k.from(t.columns)})).getOr(1),0<(l=Z(d,(function(n){var i=n.items;return yy(i,n.matchText,(function(e,i){var c=t.selection.getRng();Ip(t.dom,c,f).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var c=t.range,s={hide:function(){u()},reload:function(t){a(),r(t)}};o.set(!0),n.onAction(s,c,e,i),o.set(!1)}))}),m,uh.BUBBLE_TO_SANDBOX,e,n.highlightOn)}))).length?s(n,g,i,l):(10<=g.text.length-n.matchLength?u:a)())}))}))}))},f={onKeypress:Cp((function(t){27!==t.which&&l()}),50),cancelIfNecessary:u,isMenuOpen:function(){return ep.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return ep.getContent(r)}};!1===t.hasPlugin("rtc")&&Mp(f,t)},Cy=l,ky=function(t,e,n){return Ba(t,e,Cy,n,!1)},Oy=function(t,e,n){return Ba(t,e,Cy,n,!0)},_y=Ea,Ty=function(t,e,n){return Ja(t,e,n).isSome()},Dy=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Ey=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?k.none():k.some(e.touches[0])},By=function(t){var e=mn(k.none()),n=mn(!1),o=Dy((function(e){t.triggerEvent(Ao(),e),n.set(!0)}),400),r=Zt([{key:oo(),value:function(t){return Ey(t).each((function(r){o.cancel();var i={x:r.clientX,y:r.clientY,target:t.target};o.schedule(t),n.set(!1),e.set(k.some(i))})),k.none()}},{key:ro(),value:function(t){return o.cancel(),Ey(t).each((function(t){e.get().each((function(n){var o,r,i,a;o=t,r=n,i=Math.abs(o.clientX-r.x),a=Math.abs(o.clientY-r.y),(5<i||5<a)&&e.set(k.none())}))})),k.none()}},{key:io(),value:function(r){return o.cancel(),e.get().filter((function(t){return qn(t.target,r.target)})).map((function(e){return n.get()?(r.prevent(),!1):t.triggerEvent(Bo(),r)}))}}]);return{fireIfReady:function(t,e){return Rt(r,e).bind((function(e){return e(t)}))}}},Ay=function(){return Wn().browser.isFirefox()},Iy=fe([Ye("triggerEvent"),nn("stopBackspace",!0)]),My=function(t,e){var n,o,r,i,a=Ee("Getting GUI events settings",Iy,e),u=By(a),c=W(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return ky(t,e,(function(t){u.fireIfReady(t,e).each((function(e){e&&t.kill()})),a.triggerEvent(e,t)&&t.kill()}))})),s=mn(k.none()),l=ky(t,"paste",(function(t){u.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),a.triggerEvent("paste",t)&&t.kill(),s.set(k.some(setTimeout((function(){a.triggerEvent(_o(),t)}),0)))})),f=ky(t,"keydown",(function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||(e=t).raw.which!==md[0]||j(["input","textarea"],pr(e.target))||Ty(e.target,'[contenteditable="true"]')||t.prevent()})),d=(n=t,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},Ay()?Oy(n,"focus",o):ky(n,"focusin",o)),m=mn(k.none()),g=(r=t,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),m.set(k.some(setTimeout((function(){a.triggerEvent(Oo(),t)}),0)))},Ay()?Oy(r,"blur",i):ky(r,"focusout",i));return{unbind:function(){G(c,(function(t){t.unbind()})),f.unbind(),d.unbind(),g.unbind(),l.unbind(),s.get().each(clearTimeout),m.get().each(clearTimeout)}}},Fy=function(t,e){var n=Rt(t,"target").getOr(e);return mn(n)},Ry=Ht([{stopped:[]},{resume:["element"]},{complete:[]}]),Py=function(t,e,n,o,r,i){var a,u,c,s,l=t(e,o),f=(a=n,u=r,c=mn(!1),s=mn(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:a,setSource:u.set,getSource:u.get});return l.fold((function(){return i.logEventNoHandlers(e,o),Ry.complete()}),(function(t){var n=t.descHandler;return Oi(n)(f),f.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Ry.stopped()):f.isCut()?(i.logEventCut(e,t.element,n.purpose),Ry.complete()):Or(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),Ry.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),Ry.resume(o)}))}))},Vy=function t(e,n,o,r,i,a){return Py(e,n,o,r,i,a).fold(l,(function(r){return t(e,n,o,r,i,a)}),s)},Hy=function(t,e,o){var r,i,a=(r=e,i=mn(!1),{stop:function(){i.set(!0)},cut:n,isStopped:i.get,isCut:s,event:r,setSource:c("Cannot set source of a broadcasted event"),getSource:c("Cannot get source of a broadcasted event")});return G(t,(function(t){var e=t.descHandler;Oi(e)(a)})),a.isStopped()},zy=function(t,e,n,o,r){var i=Fy(n,o);return Vy(t,e,n,o,i,r)},jy=function(){var t={};return{registerId:function(e,n,o){Dt(o,(function(o,r){var i,u,c=void 0!==t[r]?t[r]:{};c[n]=(i=o,u=e,{cHandler:a.apply(void 0,[i.handler].concat(u)),purpose:i.purpose}),t[r]=c}))},unregisterId:function(e){Dt(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return Rt(t,e).map((function(t){return It(t,(function(t,e){return{id:e,descHandler:t}}))})).getOr([])},find:function(e,n,o){var r=Rt(t,n);return Qn(o,(function(t){return e=r,fi(n=t).fold((function(){return k.none()}),(function(t){return e.bind((function(e){return Rt(e,t)})).map((function(t){return{element:n,descHandler:t}}))}));var e,n}),e)}}},Ly=function(){var t=jy(),e={},n=function(t){var e=t.element;return fi(e).fold((function(){return e="uid-",n=t.element,o=ii(ci+e),li(n,o),o;var e,n,o}),(function(t){return t}))},o=function(n){fi(n.element).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,o){return t.find(e,n,o)},filter:function(e){return t.filterByType(e)},register:function(r){var i=n(r);Vt(e,i)&&function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+ei(r.element)+"\nCannot use it for: "+ei(t.element)+"\nThe conflicting element is"+(Wi(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var a=[r];t.registerId(a,i,r.events),e[i]=r},unregister:o,getById:function(t){return Rt(e,t)}}},Ny=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=m(e,["attributes"]);return{uid:t.uid,dom:d({tag:"div",attributes:d({role:"presentation"},n)},o),components:t.components,behaviours:Gl(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[nn("components",[]),Wl("containerBehaviours",[]),nn("events",{}),nn("domModification",{}),nn("eventOrder",{})]}),Uy=function(t){var e=function(e){return Or(t.element).fold(l,(function(t){return qn(e,t)}))},o=Ly(),i=function(t,n){return o.find(e,t,n)},a=My(t.element,{triggerEvent:function(t,e){return au(t,e.target,(function(n){return r=n,zy(i,t,o=e,o.target,r);var o,r}))}}),u={debugInfo:r("real"),triggerEvent:function(t,e,n){au(t,e,(function(o){return zy(i,t,n,e,o)}))},triggerFocus:function(t,e){fi(t).fold((function(){gc(t)}),(function(o){au(ko(),t,(function(o){var r,a,u,c,s,l;return r=i,a=ko(),s=o,l=Fy(u={originator:e,kill:n,prevent:n,target:t},c=t),Py(r,a,u,c,l,s),!1}))}))},triggerEscape:function(t,e){u.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return v(t)},getByDom:function(t){return b(t)},build:pa,addToGui:function(t){f(t)},removeFromGui:function(t){d(t)},addToWorld:function(t){c(t)},removeFromWorld:function(t){s(t)},broadcast:function(t){g(t)},broadcastOn:function(t,e){p(t,e)},broadcastEvent:function(t,e){h(t,e)},isConnected:l},c=function t(e){e.connect(u),br(e.element)||(o.register(e),G(e.components(),t),u.triggerEvent(Fo(),e.element,{target:e.element}))},s=function t(e){br(e.element)||(G(e.components(),t),o.unregister(e)),e.disconnect()},f=function(e){al(t,e)},d=function(t){sl(t)},m=function(t){var e=o.filter(To());G(e,(function(e){var n=e.descHandler;Oi(n)(t)}))},g=function(t){m({universal:!0,data:t})},p=function(t,e){m({universal:!1,channels:t,data:e})},h=function(t,e){var n=o.filter(t);return Hy(n,e)},v=function(t){return o.getById(t).fold((function(){return ft.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),ft.value)},b=function(t){var e=fi(t).getOr("not found");return v(e)};return c(t),{root:t,element:t.element,destroy:function(){a.unbind(),Wr(t.element)},add:f,remove:d,getByUid:v,getByDom:b,addToWorld:c,removeFromWorld:s,broadcast:g,broadcastOn:p,broadcastEvent:h}},Wy=r([nn("prefix","form-field"),Wl("fieldBehaviours",[ed,Ul])]),Gy=r([Sf({schema:[Ne("dom")],name:"label"}),Sf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),xf({factory:{sketch:function(t){var e=Jt(t,["factory"]);return t.factory.sketch(e)}},schema:[Ne("factory")],name:"field"})]),Yy=$f({name:"FormField",configFields:Wy(),partFields:Gy(),factory:function(t,e,n,o){var r=Yl(t.fieldBehaviours,[ed.config({find:function(e){return Ff(e,t,"field")}}),Ul.config({store:{mode:"manual",getValue:function(t){return ed.getCurrent(t).bind(Ul.getValue)},setValue:function(t,e){ed.getCurrent(t).each((function(t){Ul.setValue(t,e)}))}}})]),i=er([fr((function(e,n){var o=Pf(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=ii(t.prefix);o.label().each((function(t){$r(t.element,"for",n),$r(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=ii(t.prefix);$r(n.element,"id",o),$r(e.element,"aria-describedby",o)}))}))}))]),a={getField:function(e){return Ff(e,t,"field")},getLabel:function(e){return Ff(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),qy=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({attributes:Zt([{key:e.tabAttr,value:"true"}])})}}),Xy=[nn("tabAttr","data-alloy-tabstop")],$y=cc({fields:Xy,name:"tabstopping",active:qy}),Ky=tinymce.util.Tools.resolve("tinymce.html.Entities"),Jy=function(t,e,n,o){var r=Qy(t,e,n,o);return Yy.sketch(r)},Qy=function(t,e,n,o){return{dom:Zy(n),components:t.toArray().concat([e]),fieldBehaviours:ac(o)}},Zy=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},tx=function(t,e){return Yy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},ex=ii("form-component-change"),nx=ii("form-close"),ox=ii("form-cancel"),rx=ii("form-action"),ix=ii("form-submit"),ax=ii("form-block"),ux=ii("form-unblock"),cx=ii("form-tabchange"),sx=ii("form-resize"),lx=function(t,e){var n,o,r,a=t.label.map((function(t){return tx(t,e)})),u=function(t){return function(e,n){Ja(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,Kr(o,"data-collection-item-value"))}))}},c=u((function(n,o,r,i){o.stop(),e.isDisabled()||Ko(n,rx,{name:t.name,value:i})})),s=[rr(fo(),u((function(t,e,n){gc(n)}))),rr(yo(),c),rr(Bo(),c),rr(mo(),u((function(t,e,n){Ka(t.element,"."+ph).each((function(t){zi(t,ph)})),Vi(n,ph)}))),rr(go(),u((function(t){Ka(t.element,"."+ph).each((function(t){zi(t,ph)}))}))),gr(u((function(e,n,o,r){Ko(e,rx,{name:t.name,value:r})})))],l=function(t,e){return W(Ts(t.element,".tox-collection__item"),e)},f=Yy.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:i},behaviours:ac([pv.config({disabled:e.isDisabled,onDisabled:function(t){l(t,(function(t){Vi(t,"tox-collection__item--state-disabled"),$r(t,"aria-disabled",!0)}))},onEnabled:function(t){l(t,(function(t){zi(t,"tox-collection__item--state-disabled"),Zr(t,"aria-disabled")}))}}),Wv(),dg.config({}),Ul.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,o){var r,i,a,u;r=n,i=W(o,(function(n){var o=ev.translate(n.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=o.replace(/\_| \- |\-/g,(function(t){return a[t]}));return'<div class="tox-collection__item'+(e.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Ky.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+r+"</div>"})),a="auto"!==t.columns&&1<t.columns?U(i,t.columns):[i],u=W(a,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"})),qr(r.element,u.join("")),"auto"===t.columns&&Uh(n,5,"tox-collection__item").each((function(t){var e=t.numRows,o=t.numColumns;ug.setGridSize(n,e,o)})),$o(n,sx)}}),$y.config({}),ug.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?"."+lh:"."+sh}})),mg("collection-events",s)]),eventOrder:((n={})[Do()]=["disabling","alloy.base.behaviour","collection-events"],n)});return Jy(a,f,["tox-form__group--collection"],[])},fx=r([Ke("data"),nn("inputAttributes",{}),nn("inputStyles",{}),nn("tag","input"),nn("inputClasses",[]),pu("onSetValue"),nn("styles",{}),nn("eventOrder",{}),Wl("inputBehaviours",[Ul,bg]),nn("selectOnFocus",!0)]),dx=function(t){return ac([bg.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=ra(e);e.dom.setSelectionRange(0,n.length)}:n})])},mx=function(t){return{tag:t.tag,attributes:d({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},gx=Xf({name:"Input",configFields:fx(),factory:function(t,e){return{uid:t.uid,dom:mx(t),components:[],behaviours:d(d({},dx(n=t)),Yl(n.inputBehaviours,[Ul.config({store:d(d({mode:"manual"},n.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return ra(t.element)},setValue:function(t,e){ra(t.element)!==e&&ia(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),px={},hx={exports:px};gy=void 0,py=px,hy=hx,vy=void 0,function(n){"object"==e(py)&&void 0!==hy?hy.exports=n():"function"==typeof gy&&gy.amd?gy([],n):("undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}((function(){return function t(e,n,o){function r(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof vy&&vy;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof vy&&vy,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){var o,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,l=[],f=!1,d=-1;function m(){f&&s&&(f=!1,s.length?l=s.concat(l):d=-1,l.length&&g())}function g(){if(!f){var t=c(m);f=!0;for(var e=l.length;e;){for(s=l,l=[];++d<e;)s&&s[d].run();d=-1,e=l.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||f||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,o){(function(t){function o(){}function r(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(d){return void u(e.promise,d)}a(e.promise,n)}else(1===t._state?a:u)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==e(n)||"function"==typeof n)){var o=n.then;if(n instanceof r)return t._state=3,t._value=n,void c(t);if("function"==typeof o)return void l((i=o,s=n,function(){i.apply(s,arguments)}),t)}t._state=1,t._value=n,c(t)}catch(a){u(t,a)}var i,s}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn((function(){t._handled||r._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,u(e,t))}))}catch(o){if(n)return;n=!0,u(e,o)}}var f,d;f=this,d=setTimeout,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return i(this,new s(t,e,n)),n},r.all=function(t){var n=Array.prototype.slice.call(t);return new r((function(t,r){if(0===n.length)return t([]);for(var i=n.length,a=0;a<n.length;a++)!function a(u,c){try{if(c&&("object"==e(c)||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,(function(t){a(u,t)}),r)}n[u]=c,0==--i&&t(n)}catch(o){r(o)}}(a,n[a])}))},r.resolve=function(t){return t&&"object"==e(t)&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},r._immediateFn="function"==typeof t?function(e){t(e)}:function(t){d(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=r:f.Promise||(f.Promise=r)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var r=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function s(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new s(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new s(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,o=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,r((function(){u[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof o?o:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)}));var vx,bx,yx=hx.exports.boltExport,xx=function t(e){var n=k.none(),o=[],r=function(t){i()?u(t):o.push(t)},i=function(){return n.isSome()},a=function(t){G(t,u)},u=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return e((function(t){i()||(n=k.some(t),a(o),o=[])})),{get:r,map:function(e){return t((function(t){r((function(n){t(e(n))}))}))},isReady:i}},wx={nu:xx,pure:function(t){return xx((function(e){e(t)}))}},Sx=function(t){setTimeout((function(){throw t}),0)},Cx=function t(e){var n=function(t){e().then(t,Sx)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return wx.nu(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},kx=function(t){return Cx((function(){return new yx(t)}))},Ox=function(t){return Cx((function(){return yx.resolve(t)}))},_x=["input","textarea"],Tx=function(t){var e=pr(t);return j(_x,e)},Dx=function(t,e){var n=e.getRoot(t).getOr(t.element);zi(n,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&$r(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){qr(t,e.validHtml)})),e.onValid(t)}))},Ex=function(t,e,n,o){var r=e.getRoot(t).getOr(t.element);Vi(r,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&$r(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){qr(t,o)})),e.onInvalid(t,o)}))},Bx=function(t,e,n){return e.validator.fold((function(){return Ox(ft.value(!0))}),(function(e){return e.validate(t)}))},Ax=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Bx(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return Ex(t,e,0,n),ft.error(n)}),(function(n){return Dx(t,e),ft.value(n)})):ft.error("No longer in system")}))},Ix=Object.freeze({__proto__:null,markValid:Dx,markInvalid:Ex,query:Bx,run:Ax,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return ji(n,e.invalidClass)}}),Mx=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return er([rr(e.onEvent,(function(e){Ax(e,t).get(i)}))].concat(e.validateOnLoad?[fr((function(e){Ax(e,t).get(n)}))]:[]))})).getOr({})}}),Fx=[Ne("invalidClass"),nn("getRoot",k.none),en("notify",[nn("aria","alert"),nn("getContainer",k.none),nn("validHtml",""),pu("onValid"),pu("onInvalid"),pu("onValidate")]),en("validator",[Ne("validate"),nn("onEvent","input"),nn("validateOnLoad",!0)])],Rx=cc({fields:Fx,name:"invalidating",active:Mx,apis:Ix,extra:{validation:function(t){return function(e){var n=Ul.getValue(e);return Ox(t(n))}}}}),Px=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Vx=[Ue("others",_e(ft.value,Me()))],Hx=cc({fields:Vx,name:"coupling",apis:Px,state:Object.freeze({__proto__:null,init:function(){var t={},e=r({});return Si({readState:e,getOrCreate:function(e,n,o){var r=_t(n.others);if(r)return Rt(t,o).getOrThunk((function(){var r=Rt(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),zx=r("sink"),jx=r(Sf({name:zx(),overrides:r({dom:{tag:"div"},behaviours:ac([el.config({useFixed:l})]),events:er([sr(po()),sr(uo()),sr(yo())])})}));(bx=vx=vx||{})[bx.HighlightFirst=0]="HighlightFirst",bx[bx.HighlightNone=1]="HighlightNone";var Lx,Nx,Ux,Wx,Gx,Yx,qx=function(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:"hotspot",hotspot:n,overrides:o}}),(function(t){return{anchor:"hotspot",hotspot:n,overrides:o,layouts:t}}))},Xx=function(t,e,n,o,r,i,a){var u,c,s,l,f,m,g,p,h,v,b=qx(t,n);return(c=b,l=o,f=r,m=a,g=e,p=s=n,h=(0,(u=t).fetch)(p).map(g),v=Qx(s,u),h.map((function(t){return t.bind((function(t){return k.from(tp.sketch(d(d({},f.menu()),{uid:di(""),data:t,highlightImmediately:m===vx.HighlightFirst,onOpenMenu:function(t,e){var n=v().getOrDie();el.position(n,c,e),Cl.decloak(l)},onOpenSubmenu:function(t,e,n){var o=v().getOrDie();el.position(o,{anchor:"submenu",item:e},n),Cl.decloak(l)},onRepositionMenu:function(t,e,n){var o=v().getOrDie();el.position(o,c,e),G(n,(function(t){el.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return bg.focus(s),Cl.close(l),k.some(!0)}})))}))}))).map((function(t){return t.fold((function(){Cl.isOpen(o)&&Cl.close(o)}),(function(t){Cl.cloak(o),Cl.open(o,t),i(o)})),o}))},$x=function(t,e,n,o,r,i,a){return Cl.close(o),Ox(o)},Kx=function(t,e,n,o,r,i){var a=Hx.getCoupled(n,"sandbox");return(Cl.isOpen(a)?$x:Xx)(t,e,n,a,o,r,i)},Jx=function(t,e,n){var o,r,i=ed.getCurrent(e).getOr(e),a=Ta(t.element);n?$i(i.element,"min-width",a+"px"):(o=i.element,r=a,_a.set(o,r))},Qx=function(t,e){return t.getSystem().getByUid(e.uid+"-"+zx()).map((function(t){return function(){return ft.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return ft.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},Zx=function(t){Cl.getState(t).each((function(t){tp.repositionMenus(t)}))},tw=function(t,e,n){var o=Qa(),r=Qx(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Xl(t.sandboxBehaviours,[Ul.config({store:{mode:"memory",initialValue:e}}),Cl.config({onOpen:function(r,i){var a=qx(t,e);o.link(e.element),t.matchWidth&&Jx(a.hotspot,i,t.useMinWidth),t.onOpen(a,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return tu(n,o)||tu(e,o)},getAttachPoint:function(){return r().getOrDie()}}),ed.config({find:function(t){return Cl.getState(t).bind((function(t){return ed.getCurrent(t)}))}}),dc.config({channels:d(d({},Dl({isExtraPart:s})),Bl({doReposition:Zx}))})])}},ew=function(t){var e=Hx.getCoupled(t,"sandbox");Zx(e)},nw=function(){return[nn("sandboxClasses",[]),ql("sandboxBehaviours",[ed,dc,Cl,Ul])]},ow=r([Ne("dom"),Ne("fetch"),pu("onOpen"),hu("onExecute"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),Kc(),Wl("dropdownBehaviours",[Bg,Hx,ug,bg]),Ne("toggleClass"),nn("eventOrder",{}),Ke("lazySink"),nn("matchWidth",!1),nn("useMinWidth",!1),Ke("role")].concat(nw())),rw=r([wf({schema:[du()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),jx()]),iw=$f({name:"Dropdown",configFields:ow(),partFields:rw(),factory:function(t,e,o,r){var i,a,u=function(t){Cl.getState(t).each((function(t){tp.highlightPrimary(t)}))},c={expand:function(e){Bg.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightNone).get(n)},open:function(e){Bg.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},isOpen:Bg.isOn,close:function(e){Bg.isOn(e)&&Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},repositionMenus:function(t){Bg.isOn(t)&&ew(t)}},s=function(t,e){return Jo(t),k.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.dropdownBehaviours,[Bg.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Hx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Bg.on(e)},onClose:function(){return Bg.off(e)}})}}}),ug.config({mode:"special",onSpace:s,onEnter:s,onDown:function(t,e){var n;return iw.isOpen(t)?(n=Hx.getCoupled(t,"sandbox"),u(n)):iw.open(t),k.some(!0)},onEscape:function(t,e){return iw.isOpen(t)?(iw.close(t),k.some(!0)):k.none()}}),bg.config({})]),events:Ig(k.some((function(e){Kx(t,(function(t){return t}),e,r,u,vx.HighlightFirst).get(n)}))),eventOrder:d(d({},t.eventOrder),((i={})[Do()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:c,domModification:{attributes:d(d({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(a="type",Rt(t.dom,"attributes").bind((function(t){return Rt(t,a)})).getOr("button"))}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),aw=cc({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return er([nr(wo(),l)])},exhibit:function(){return ki({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),uw=ii("color-input-change"),cw=ii("color-swatch-change"),sw=ii("color-picker-cancel"),lw=function(t,e,o){var r,i,a=Yy.parts.field({factory:gx,inputClasses:["tox-textfield"],onSetValue:function(t){return Rx.run(t).get(n)},inputBehaviours:ac([pv.config({disabled:e.providers.isDisabled}),Wv(),$y.config({}),Rx.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return Or(t.element)},notify:{onValid:function(t){var e=Ul.getValue(t);Ko(t,uw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Ul.getValue(t);if(0===e.length)return Ox(ft.value(!0));var n=pn.fromTag("span");$i(n,"background-color",e);var o=ta(n,"background-color").fold((function(){return ft.error("blah")}),(function(t){return ft.value(e)}));return Ox(o)}}})]),selectOnFocus:!1}),u=t.label.map((function(t){return tx(t,e.providers)})),c=function(t,e){Ko(t,cw,{value:e})},l=pp((r={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ju,zu,Wu]},onLtr:function(){return[zu,ju,Wu]}},components:[],fetch:$b(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){l.getOpt(t).each((function(t){"custom"===e?o.colorPicker((function(e){e.fold((function(){return $o(t,sw)}),(function(e){c(t,e),Wb(e)}))}),"#ffffff"):c(t,"remove"===e?"":e)}))}},i=e,iw.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:ac([Yv(i.providers.isDisabled),Wv(),aw.config({}),$y.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:i.getSink,fetch:function(t){return kx((function(t){return r.fetch(t)})).map((function(e){return k.from(wy(Lt(ty(ii("menu-value"),e,(function(e){r.onItemAction(t,e)}),r.columns,r.presets,uh.CLOSE_ON_EXECUTE,s,i.providers),{movement:ny(r.columns,r.presets)})))}))},parts:{menu:Sh(0,0,r.presets)}})));return Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:u.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[a,l.asSpec()]}]),fieldBehaviours:ac([mg("form-field-events",[rr(uw,(function(e,n){l.getOpt(e).each((function(t){$i(t.element,"background-color",n.event.color)})),Ko(e,ex,{name:t.name})})),rr(cw,(function(t,e){Yy.getField(t).each((function(n){Ul.setValue(n,e.event.value),ed.getCurrent(t).each(bg.focus)}))})),rr(sw,(function(t,e){Yy.getField(t).each((function(e){ed.getCurrent(t).each(bg.focus)}))}))])])})},fw=function(t,e,n){return{hue:t,saturation:e,value:n}},dw=ii("rgb-hex-update"),mw=ii("slider-update"),gw=ii("palette-update"),pw=Sf({schema:[Ne("dom")],name:"label"}),hw=function(t){return Sf({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:er([ir(oo(),(function(e,n,o){return t(e,o)}),[e]),ir(uo(),(function(e,n,o){return t(e,o)}),[e]),ir(co(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})},vw=hw("top-left"),bw=hw("top"),yw=hw("top-right"),xw=hw("right"),ww=hw("bottom-right"),Sw=hw("bottom"),Cw=hw("bottom-left"),kw=[pw,hw("left"),xw,bw,Sw,vw,yw,Cw,ww,xf({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:er([ur(oo(),t,"spectrum"),ur(ro(),t,"spectrum"),ur(io(),t,"spectrum"),ur(uo(),t,"spectrum"),ur(co(),t,"spectrum"),ur(lo(),t,"spectrum")])}}}),xf({schema:[dn("mouseIsDown",(function(){return mn(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,n=function(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))};return{behaviours:ac([ug.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),bg.config({})]),events:er([rr(oo(),n),rr(ro(),n),rr(uo(),n),rr(co(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}})],Ow=r("slider.change.value"),_w=function(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?k.some(e).map((function(t){return Sa(t.clientX,t.clientY)})):k.none():void 0!==e.touches&&1===e.touches.length?k.some(e.touches[0]).map((function(t){return Sa(t.clientX,t.clientY)})):k.none()},Tw=function(t){return t.model.minX},Dw=function(t){return t.model.minY},Ew=function(t){return t.model.minX-1},Bw=function(t){return t.model.minY-1},Aw=function(t){return t.model.maxX},Iw=function(t){return t.model.maxY},Mw=function(t){return t.model.maxX+1},Fw=function(t){return t.model.maxY+1},Rw=function(t,e,n){return e(t)-n(t)},Pw=function(t){return Rw(t,Aw,Tw)},Vw=function(t){return Rw(t,Iw,Dw)},Hw=function(t){return Pw(t)/2},zw=function(t){return Vw(t)/2},jw=function(t){return t.stepSize},Lw=function(t){return t.snapToGrid},Nw=function(t){return t.snapStart},Uw=function(t){return t.rounded},Ww=function(t,e){return void 0!==t[e+"-edge"]},Gw=function(t){return Ww(t,"left")},Yw=function(t){return Ww(t,"right")},qw=function(t){return Ww(t,"top")},Xw=function(t){return Ww(t,"bottom")},$w=function(t){return t.model.value.get()},Kw=function(t){return{x:t}},Jw=function(t){return{y:t}},Qw=function(t,e){return{x:t,y:e}},Zw=function(t,e){Ko(t,Ow(),{value:e})},tS=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},eS=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},nS=function(t,e,n){return Math.max(e,Math.min(n,t))},oS=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?e-1:e,p=l?n+1:n;if(r<f)return g;if(d<r)return p;var h,v,b,y,x,w,S,C=(x=r,w=f,S=d,Math.min(S,Math.max(x,w))-w),k=nS(C/m*o+e,g,p);return a&&e<=k&&k<=n?(h=k,v=e,b=n,y=i,u.fold((function(){var t=h-v,e=Math.round(t/y)*y;return nS(v+e,v-1,b+1)}),(function(t){var e=(h-t)%y,n=Math.round(e/y),o=Math.floor((h-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)}))):c?Math.round(k):k},rS=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},iS="left",aS=function(t){return t.element.dom.getBoundingClientRect()},uS=function(t,e){return t[e]},cS=function(t){var e=aS(t);return uS(e,iS)},sS=function(t){var e=aS(t);return uS(e,"right")},lS=function(t){var e=aS(t);return uS(e,"top")},fS=function(t){var e=aS(t);return uS(e,"bottom")},dS=function(t){var e=aS(t);return uS(e,"width")},mS=function(t){var e=aS(t);return uS(e,"height")},gS=function(t,e,n){return(t+e)/2-n},pS=function(t,e){var n=aS(t),o=aS(e),r=uS(n,iS),i=uS(n,"right"),a=uS(o,iS);return gS(r,i,a)},hS=function(t,e){var n=aS(t),o=aS(e),r=uS(n,"top"),i=uS(n,"bottom"),a=uS(o,"top");return gS(r,i,a)},vS=function(t,e){Ko(t,Ow(),{value:e})},bS=function(t){return{x:t}},yS=function(t,e,n){var o={min:Tw(e),max:Aw(e),range:Pw(e),value:n,step:jw(e),snap:Lw(e),snapStart:Nw(e),rounded:Uw(e),hasMinEdge:Gw(e),hasMaxEdge:Yw(e),minBound:cS(t),maxBound:sS(t),screenRange:dS(t)};return oS(o)},xS=function(t){return function(e,n){return o=e,i=(0<t?eS:tS)($w(r=n).x,Tw(r),Aw(r),jw(r)),vS(o,bS(i)),k.some(i).map(l);var o,r,i}},wS=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=(u=i,c=n,s=o,l=r,f=dS(a=e),d=s.bind((function(t){return k.some(pS(t,a))})).getOr(0),m=l.bind((function(t){return k.some(pS(t,a))})).getOr(f),g={min:Tw(u),max:Aw(u),range:Pw(u),value:c,hasMinEdge:Gw(u),hasMaxEdge:Yw(u),minBound:cS(a),minOffset:0,maxBound:sS(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},rS(g));return cS(e)-cS(t)+p},SS=xS(-1),CS=xS(1),kS=k.none,OS=k.none,_S={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some((function(t,e){Zw(t,Kw(Mw(e)))})),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some((function(t,e){Zw(t,Kw(Ew(e)))}))},TS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yS(t,e,n),r=bS(o);return vS(t,r),o},setToMin:function(t,e){var n=Tw(e);vS(t,bS(n))},setToMax:function(t,e){var n=Aw(e);vS(t,bS(n))},findValueOfOffset:yS,getValueFromEvent:function(t){return _w(t).map((function(t){return t.left}))},findPositionOfValue:wS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=wS(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Ta(e.element)/2;$i(e.element,"left",i-a+"px")},onLeft:SS,onRight:CS,onUp:kS,onDown:OS,edgeActions:_S}),DS=function(t,e){Ko(t,Ow(),{value:e})},ES=function(t){return{y:t}},BS=function(t,e,n){var o={min:Dw(e),max:Iw(e),range:Vw(e),value:n,step:jw(e),snap:Lw(e),snapStart:Nw(e),rounded:Uw(e),hasMinEdge:qw(e),hasMaxEdge:Xw(e),minBound:lS(t),maxBound:fS(t),screenRange:mS(t)};return oS(o)},AS=function(t){return function(e,n){return o=e,i=(0<t?eS:tS)($w(r=n).y,Dw(r),Iw(r),jw(r)),DS(o,ES(i)),k.some(i).map(l);var o,r,i}},IS=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=(u=i,c=n,s=o,l=r,f=mS(a=e),d=s.bind((function(t){return k.some(hS(t,a))})).getOr(0),m=l.bind((function(t){return k.some(hS(t,a))})).getOr(f),g={min:Dw(u),max:Iw(u),range:Vw(u),value:c,hasMinEdge:qw(u),hasMaxEdge:Xw(u),minBound:lS(a),minOffset:0,maxBound:fS(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},rS(g));return lS(e)-lS(t)+p},MS=k.none,FS=k.none,RS=AS(-1),PS=AS(1),VS={"top-left":k.none(),top:k.some((function(t,e){Zw(t,Jw(Bw(e)))})),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some((function(t,e){Zw(t,Jw(Fw(e)))})),"bottom-left":k.none(),left:k.none()},HS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=BS(t,e,n),r=ES(o);return DS(t,r),o},setToMin:function(t,e){var n=Dw(e);DS(t,ES(n))},setToMax:function(t,e){var n=Iw(e);DS(t,ES(n))},findValueOfOffset:BS,getValueFromEvent:function(t){return _w(t).map((function(t){return t.top}))},findPositionOfValue:IS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=IS(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=ya(e.element)/2;$i(e.element,"top",i-a+"px")},onLeft:MS,onRight:FS,onUp:RS,onDown:PS,edgeActions:VS}),zS=function(t,e){Ko(t,Ow(),{value:e})},jS=function(t,e){return{x:t,y:e}},LS=function(t,e){return function(n,o){return i=n,a=o,u=0<t?eS:tS,c=(r=e)?$w(a).x:u($w(a).x,Tw(a),Aw(a),jw(a)),s=r?u($w(a).y,Dw(a),Iw(a),jw(a)):$w(a).y,zS(i,jS(c,s)),k.some(c).map(l);var r,i,a,u,c,s}},NS=_w,US=LS(-1,!1),WS=LS(1,!1),GS=LS(-1,!0),YS=LS(1,!0),qS={"top-left":k.some((function(t,e){Zw(t,Qw(Ew(e),Bw(e)))})),top:k.some((function(t,e){Zw(t,Qw(Hw(e),Bw(e)))})),"top-right":k.some((function(t,e){Zw(t,Qw(Mw(e),Bw(e)))})),right:k.some((function(t,e){Zw(t,Qw(Mw(e),zw(e)))})),"bottom-right":k.some((function(t,e){Zw(t,Qw(Mw(e),Fw(e)))})),bottom:k.some((function(t,e){Zw(t,Qw(Hw(e),Fw(e)))})),"bottom-left":k.some((function(t,e){Zw(t,Qw(Ew(e),Fw(e)))})),left:k.some((function(t,e){Zw(t,Qw(Ew(e),zw(e)))}))},XS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yS(t,e,n.left),r=BS(t,e,n.top),i=jS(o,r);return zS(t,i),i},setToMin:function(t,e){var n=Tw(e),o=Dw(e);zS(t,jS(n,o))},setToMax:function(t,e){var n=Aw(e),o=Iw(e);zS(t,jS(n,o))},getValueFromEvent:NS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=wS(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=IS(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=Ta(e.element)/2,c=ya(e.element)/2;$i(e.element,"left",i-u+"px"),$i(e.element,"top",a-c+"px")},onLeft:US,onRight:WS,onUp:GS,onDown:YS,edgeActions:qS}),$S=$f({name:"Slider",configFields:[nn("stepSize",1),nn("onChange",n),nn("onChoose",n),nn("onInit",n),nn("onDragStart",n),nn("onDragEnd",n),nn("snapToGrid",!1),nn("rounded",!0),Ke("snapStart"),Ue("model",Ie("mode",{x:[nn("minX",0),nn("maxX",100),dn("value",(function(t){return mn(t.mode.minX)})),Ne("getInitialValue"),yu("manager",TS)],y:[nn("minY",0),nn("maxY",100),dn("value",(function(t){return mn(t.mode.minY)})),Ne("getInitialValue"),yu("manager",HS)],xy:[nn("minX",0),nn("maxX",100),nn("minY",0),nn("maxY",100),dn("value",(function(t){return mn({x:t.mode.minX,y:t.mode.minY})})),Ne("getInitialValue"),yu("manager",XS)]})),Wl("sliderBehaviours",[ug,Ul]),dn("mouseIsDown",(function(){return mn(!1)}))],partFields:kw,factory:function(t,e,n,o){var r,i=function(e){return Rf(e,t,"thumb")},a=function(e){return Rf(e,t,"spectrum")},u=function(e){return Ff(e,t,"left-edge")},c=function(e){return Ff(e,t,"right-edge")},s=function(e){return Ff(e,t,"top-edge")},f=function(e){return Ff(e,t,"bottom-edge")},d=t.model,m=d.manager,g=function(e,n){m.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:c,getTopEdge:s,getBottomEdge:f,getSpectrum:a})},p=function(e,n){d.value.set(n);var o=i(e);return g(e,o),t.onChange(e,o,n),k.some(!0)},h=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&Ff(e,t,"thumb").each((function(n){var o=d.value.get();t.onChoose(e,n,o)}))},v=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},b=function(e,n){n.stop(),t.onDragEnd(e,i(e)),h(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.sliderBehaviours,[ug.config({mode:"special",focusIn:function(e){return Ff(e,t,"spectrum").map(ug.focusIn).map(l)}}),Ul.config({store:{mode:"manual",getValue:function(t){return d.value.get()}}}),dc.config({channels:((r={})[_l()]={onReceive:h},r)})]),events:er([rr(Ow(),(function(t,e){p(t,e.event.value)})),fr((function(e,n){var o=d.getInitialValue();d.value.set(o);var r=i(e);g(e,r);var u=a(e);t.onInit(e,r,u,d.value.get())})),rr(oo(),v),rr(io(),b),rr(uo(),v),rr(lo(),b)]),apis:{resetToMin:function(e){m.setToMin(e,t)},resetToMax:function(e){m.setToMax(e,t)},changeValue:p,refresh:g},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),KS=[Wl("formBehaviours",[Ul])],JS=function(t){return"<alloy.field."+t+">"},QS=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.formBehaviours,[Ul.config({store:{mode:"manual",getValue:function(e){var n=Vf(e,t);return Et(n,(function(t,e){return t().bind((function(t){var n,o,r=ed.getCurrent(t);return n=r,o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+ei(t.element)),n.fold((function(){return ft.error(o)}),ft.value)})).map(Ul.getValue)}))},setValue:function(e,n){Dt(n,(function(n,o){Ff(e,t,o).each((function(t){ed.getCurrent(t).each((function(t){Ul.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return Ff(e,t,n).bind(ed.getCurrent)}}}},ZS={getField:xi((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),Ef("form",JS(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=W(r,(function(t){return xf({name:t,pname:JS(t)})}));return Wf("form",KS,i,QS,o)}},tC=ii("valid-input"),eC=ii("invalid-input"),nC=ii("validating-input"),oC="colorcustom.rgb.",rC=function(t,e,o,r){var i=function(o,r,i,a,u){var c,s,l=t(oC+"range"),f=[Yy.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),Yy.parts.field({data:u,factory:gx,inputAttributes:d({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:ac([(c=r,s=o,Rx.config({invalidClass:e("invalid"),notify:{onValidate:function(t){Ko(t,nC,{type:c})},onValid:function(t){Ko(t,tC,{type:c,value:Ul.getValue(t)})},onInvalid:function(t){Ko(t,eC,{type:c,value:Ul.getValue(t)})}},validator:{validate:function(e){var n=Ul.getValue(e),o=s(n)?ft.value(!0):ft.error(t("aria.input.invalid"));return Ox(o)},validateOnLoad:!1}})),$y.config({})]),onSetValue:function(t){Rx.isInvalid(t)&&Rx.run(t).get(n)}})],m="hex"!==r?[Yy.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(m)}},a=function(t,e){var n=e.red,o=e.green,r=e.blue;Ul.setValue(t,{red:n,green:o,blue:r})},u=pp({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,e){u.getOpt(t).each((function(t){$i(t.element,"background-color","#"+e.value)}))};return Xf({factory:function(){var n={red:mn(k.some(255)),green:mn(k.some(255)),blue:mn(k.some(255)),hex:mn(k.some("ffffff"))},s=function(t){return n[t].get()},l=function(t,e){n[t].set(e)},f=function(t){var e=t.red,n=t.green,o=t.blue;l("red",k.some(e)),l("green",k.some(n)),l("blue",k.some(o))},d=function(t,e){var n=e.event;"hex"!==n.type?l(n.type,k.none()):r(t)},m=function(t,e,n){var o=parseInt(n,10);l(e,k.some(o)),s("red").bind((function(t){return s("green").bind((function(e){return s("blue").map((function(n){return Eb(t,e,n,1)}))}))})).each((function(e){var n,o,r=(n=t,o=Cb(e),ZS.getField(n,"hex").each((function(t){bg.isFocused(t)||Ul.setValue(n,{hex:o.value})})),o);c(t,r)}))},g=function(t,e){var n=e.event;"hex"===n.type?function(t,e){o(t);var n=vb(e);l("hex",k.some(e));var r=Ib(n);a(t,r),f(r),Ko(t,dw,{hex:n}),c(t,n)}(t,n.value):m(t,n.type,n.value)},p=function(e){return{label:t(oC+e+".label"),description:t(oC+e+".description")}},h=p("red"),v=p("green"),b=p("blue"),y=p("hex");return Lt(ZS.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Yy.sketch(i(Bb,"red",h.label,h.description,255))),n.field("green",Yy.sketch(i(Bb,"green",v.label,v.description,255))),n.field("blue",Yy.sketch(i(Bb,"blue",b.label,b.description,255))),n.field("hex",Yy.sketch(i(xb,"hex",y.label,y.description,"ffffff"))),u.asSpec()],formBehaviours:ac([Rx.config({invalidClass:e("form-invalid")}),mg("rgb-form-events",[rr(tC,g),rr(eC,d),rr(nC,d)])])}})),{apis:{updateHex:function(t,e){var n,o;Ul.setValue(t,{hex:e.value}),n=t,o=Ib(e),a(n,o),f(o),c(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},iC=function(t,e){var n=$S.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),o=$S.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),i=function(t,e){var n,o,r=t.width,i=t.height,a=t.getContext("2d");null!==a&&(a.fillStyle=e,a.fillRect(0,0,r,i),(n=a.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=n,a.fillRect(0,0,r,i),(o=a.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=o,a.fillRect(0,0,r,i))};return Xf({factory:function(t){var a=r({x:0,y:0}),u=ac([ed.config({find:k.some}),bg.config({})]);return $S.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[n,o],onChange:function(t,e,n){Ko(t,gw,{value:n})},onInit:function(t,e,n,o){i(n.element.dom,Fb(Rb))},sliderBehaviours:u})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element.dom,i(r,Fb(o))}},extraApis:{}})},aC=function(t,e){return Xf({name:"ColourPicker",configFields:[Ne("dom"),nn("onValidHex",n),nn("onInvalidHex",n)],factory:function(n){var o,i,a,u,c,s=rC(t,e,n.onValidHex,n.onInvalidHex),l=iC(0,e),f={paletteRgba:mn(Rb)},d=pp(l.sketch({})),m=pp(s.sketch({})),g=function(t,e){d.getOpt(t).each((function(t){var n=Ib(e);f.paletteRgba.set(n),l.setRgba(t,n)}))},p=function(t,e){m.getOpt(t).each((function(t){s.updateHex(t,e)}))},h=function(t,e,n){G(n,(function(n){n(t,e)}))};return{uid:n.uid,dom:n.dom,components:[d.asSpec(),(a=e,u=$S.parts.spectrum({dom:{tag:"div",classes:[a("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=$S.parts.thumb({dom:{tag:"div",classes:[a("hue-slider-thumb")],attributes:{role:"presentation"}}}),$S.sketch({dom:{tag:"div",classes:[a("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[u,c],sliderBehaviours:ac([bg.config({})]),onChange:function(t,e,n){Ko(t,mw,{value:n})}})),m.asSpec()],behaviours:ac([mg("colour-picker-events",[rr(gw,(i=[p],function(t,e){var n,o,r,a,u,c,s,l,d,m=e.event.value,g=f.paletteRgba.get(),p=(a=r=0,u=(n=g).red/255,c=n.green/255,s=n.blue/255,l=Math.min(u,Math.min(c,s)),d=Math.max(u,Math.max(c,s)),l===d?fw(0,0,100*(a=l)):(r=60*((r=u===l?3:s===l?1:5)-(u===l?c-s:s===l?u-c:s-u)/(d-l)),o=(d-l)/d,a=d,fw(Math.round(r),Math.round(100*o),Math.round(100*a)))),v=fw(p.hue,m.x,100-m.y),b=Ab(v),y=Cb(b);h(t,y,i)})),rr(mw,(o=[g,p],function(t,e){var n,r,i,a=e.event.value,u=(n=a.y,r=fw((100-n)/100*360,100,100),i=Ab(r),Cb(i));h(t,u,o)}))]),ed.config({find:function(t){return m.getOpt(t)}}),ug.config({mode:"acyclic"})])}}})},uC=function(){return ed.config({find:k.some})},cC=function(t){return ed.config({find:t.getOpt})},sC=function(t){return ed.config({find:function(e){return Er(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},lC={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},fC=function(t){return lC[t]},dC=tinymce.util.Tools.resolve("tinymce.Resource"),mC=tinymce.util.Tools.resolve("tinymce.util.Tools"),gC=de([nn("preprocess",i),nn("postprocess",i)]),pC=function(t,e,n){return Ul.config(Lt({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},hC=function(t,e,n){return pC(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}))},vC=function(t,e){var n=Ee("RepresentingConfigs.memento processors",gC,e);return Ul.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=Ul.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);Ul.setValue(i,r)}}})},bC=pC,yC=function(t){return hC(t,Yr,qr)},xC=function(t){return Ul.config({store:{mode:"memory",initialValue:t}})},wC=function(t,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){G(t,(function(t){t(e,n)}))}},r=function(t,e){var n;pv.isDisabled(t)||(n=e.event.raw,a(t,n.dataTransfer.files))},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,o){var r,i,a;Ul.setValue(n,(r=o,i=e,a=mC.explode(i.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),q(ut(r),(function(t){return L(a,(function(e){return kn(t.name.toLowerCase(),"."+e.toLowerCase())}))})))),Ko(n,ex,{name:t.name})},u=pp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ac([mg("input-file-events",[sr(yo()),sr(Bo())])])}),c=t.label.map((function(t){return tx(t,e)})),s=Yy.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ac([xC([]),uC(),pv.config({}),Bg.config({toggleClass:"dragenter",toggleOnExecute:!1}),mg("dropzone-events",[rr("dragenter",o([n,Bg.toggle])),rr("dragleave",o([n,Bg.toggle])),rr("dragover",n),rr("drop",o([n,r])),rr(bo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},gp.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){u.get(t).element.dom.click()},buttonBehaviours:ac([$y.config({}),Yv(e.isDisabled),Wv()])})]}]}}}});return Jy(c,s,["tox-form__group--stretched"],[])},SC=ii("alloy-fake-before-tabstop"),CC=ii("alloy-fake-after-tabstop"),kC=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ac([bg.config({ignore:!0}),$y.config({})])}},OC=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[kC([SC]),t,kC([CC])],behaviours:ac([sC(1)])}},_C=function(t,e){Ko(t,po(),{raw:{which:9,shiftKey:e}})},TC=function(t,e){var n=e.element;ji(n,SC)?_C(t,!0):ji(n,CC)&&_C(t,!1)},DC=function(t){return Ty(t,["."+SC,"."+CC].join(","),s)},EC=!(Wn().browser.isIE()||Wn().browser.isEdge()),BC=function(t,e){var n,o,r=EC&&t.sandboxed,i=d(d({},t.label.map((function(t){return{title:t}})).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),a=(n=r,o=mn(""),{getValue:function(t){return o.get()},setValue:function(t,e){var r;n?$r(t.element,"srcdoc",e):($r(t.element,"src","javascript:''"),(r=t.element.dom.contentWindow.document).open(),r.write(e),r.close()),o.set(e)}}),u=t.label.map((function(t){return tx(t,e)})),c=Yy.parts.field({factory:{sketch:function(t){return OC({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:ac([$y.config({}),bg.config({}),bC(k.none(),a.getValue,a.setValue)])})}}});return Jy(u,c,["tox-form__group--stretched"],[])},AC=function(t,e){return FC(document.createElement("canvas"),t,e)},IC=function(t){var e=AC(t.width,t.height);return MC(e).drawImage(t,0,0),e},MC=function(t){return t.getContext("2d")},FC=function(t,e,n){return t.width=e,t.height=n,t},RC=function(t){return t.naturalWidth||t.width},PC=function(t){return t.naturalHeight||t.height},VC=window.Promise?window.Promise:(Lx=function(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Yx(t,Wx(zC,this),Wx(jC,this))},Nx=window,Ux=Lx.immediateFn||"function"==typeof Nx.setImmediate&&Nx.setImmediate||function(t){return setTimeout(t,1)},Wx=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.apply(e,n)}},Gx=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Yx=function(t,e,n){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,n(t))}))}catch(b){if(o)return;o=!0,n(b)}},Lx.prototype["catch"]=function(t){return this.then(null,t)},Lx.prototype.then=function(t,e){var n=this;return new Lx((function(o,r){HC.call(n,new NC(t,e,o,r))}))},Lx.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.prototype.slice.call(1===t.length&&Gx(t[0])?t[0]:t);return new Lx((function(t,n){if(0===o.length)return t([]);for(var r=o.length,i=function i(a,u){try{if(u&&("object"==e(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),n)}o[a]=u,0==--r&&t(o)}catch(v){n(v)}},a=0;a<o.length;a++)i(a,o[a])}))},Lx.resolve=function(t){return t&&"object"==e(t)&&t.constructor===Lx?t:new Lx((function(e){e(t)}))},Lx.reject=function(t){return new Lx((function(e,n){n(t)}))},Lx.race=function(t){return new Lx((function(e,n){for(var o=0,r=t;o<r.length;o++)r[o].then(e,n)}))},Lx);function HC(t){var e=this;null!==this._state?Ux((function(){var n,o=e._state?t.onFulfilled:t.onRejected;if(null!==o){try{n=o(e._value)}catch(h){return void t.reject(h)}t.resolve(n)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function zC(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==e(t)||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void Yx(Wx(n,t),Wx(zC,this),Wx(jC,this))}this._state=!0,this._value=t,LC.call(this)}catch(h){jC.call(this,h)}}function jC(t){this._state=!1,this._value=t,LC.call(this)}function LC(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];HC.call(this,n)}this._deferreds=[]}function NC(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var UC,WC,GC,YC,qC=function(t){return new VC((function(e,n){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return k.none();for(var o=n[1],r=e[1],i=atob(r),a=i.length,u=Math.ceil(a/1024),c=new Array(u),s=0;s<u;++s){for(var l=1024*s,f=Math.min(1024+l,a),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return k.some(new Blob(c,{type:o}))})(t).fold((function(){n("uri is not base64: "+t)}),e)}))},XC=function(t,e,n){return e=e||"image/png",M(HTMLCanvasElement.prototype.toBlob)?new VC((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):qC(t.toDataURL(e,n))},$C=function(t){return e=t,new VC((function(t,n){var o=URL.createObjectURL(e),r=new Image,i=function(){r.removeEventListener("load",a),r.removeEventListener("error",u)},a=function(){i(),t(r)},u=function(){i(),n("Unable to load data of type "+e.type+": "+o)};r.addEventListener("load",a),r.addEventListener("error",u),r.src=o,r.complete&&setTimeout(a,0)})).then((function(t){KC(t);var e=AC(RC(t),PC(t));return MC(e).drawImage(t,0,0),e}));var e},KC=function(t){URL.revokeObjectURL(t.src)},JC=function(t,e,n){var o=e.type,i=r(o),a=r(n),u=function(e,n){return t.then((function(t){return r=n,o=(o=e)||"image/png",t.toDataURL(o,r);var o,r}))};return{getType:i,toBlob:function(){return VC.resolve(e)},toDataURL:a,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return XC(t,e,n)}))},toAdjustedDataURL:u,toAdjustedBase64:function(t,e){return u(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(IC)}}},QC=function(t,e){return XC(t,e).then((function(e){return JC(VC.resolve(t),e,t.toDataURL())}))},ZC=function(t){return e=t,new VC((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})).then((function(e){return JC($C(t),t,e)}));var e},tk=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o},ek=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},nk=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ok=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)o[a]=e[a+5*i];for(a=0;a<5;a++){for(var u=n=0;u<5;u++)n+=t[a+5*u]*o[u];r[a+5*i]=n}}return r},rk=function(t,e){return t.toCanvas().then((function(n){return ik(n,t.getType(),e)}))},ik=function(t,e,n){var o=MC(t),r=function(t,e){for(var n,o,r,i,a=t.data,u=e[0],c=e[1],s=e[2],l=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],h=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],S=e[15],C=e[16],k=e[17],O=e[18],_=e[19],T=0;T<a.length;T+=4)n=a[T],o=a[T+1],r=a[T+2],i=a[T+3],a[T]=n*u+o*c+r*s+i*l+f,a[T+1]=n*d+o*m+r*g+i*p+h,a[T+2]=n*v+o*b+r*y+i*x+w,a[T+3]=n*S+o*C+r*k+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),QC(t,e)},ak=function(t,e,n){var o=MC(t),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),a=t.data,u=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=n[p*r+h];d+=a[b]*y,m+=a[1+b]*y,g+=a[2+b]*y}var x=4*(l*c+f);u[x]=o(d,0,255),u[1+x]=o(m,0,255),u[2+x]=o(g,0,255)}return e}(o.getImageData(0,0,t.width,t.height),r=o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),QC(t,e)},uk=function(t){return function(e,n){return rk(e,t(ek(),n))}},ck=(UC=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return rk(t,UC)}),sk=uk((function(t,e){return e=tk(255*e,-255,255),ok(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),lk=uk((function(t,e){var n;return e=tk(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?nk[e]:nk[Math.floor(e)]*(1-n)+nk[Math.floor(e)+1]*n)+127,ok(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),fk=(WC=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=WC,(e=t).toCanvas().then((function(t){return ak(t,e.getType(),n)}));var e,n}),dk=(GC=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=MC(t),r=new Array(256),i=0;i<r.length;i++)r[i]=GC(i,n);var a=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(a,0,0),QC(t,e)}(n,t.getType(),e)}))}),mk=function t(e,n,o){var r=RC(e),i=PC(e),a=n/r,u=o/i,c=!1;(a<.5||2<a)&&(a=a<.5?.5:2,c=!0),(u<.5||2<u)&&(u=u<.5?.5:2,c=!0);var s=gk(e,a,u);return c?s.then((function(e){return t(e,n,o)})):s},gk=function(t,e,n){return new VC((function(o){var r=RC(t),i=PC(t),a=Math.floor(r*e),u=Math.floor(i*n),c=AC(a,u);MC(c).drawImage(t,0,0,r,i,0,0,a,u),o(c)}))},pk=function(t,e,n){var o=AC(t.width,t.height),r=MC(o),i=0,a=0;return 90!==(n=n<0?360+n:n)&&270!==n||FC(o,o.height,o.width),90!==n&&180!==n||(i=o.width),270!==n&&180!==n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),QC(o,e)},hk=function(t,e,n){var o=AC(t.width,t.height),r=MC(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),QC(o,e)},vk=function(t,e,n,o,r,i){var a=AC(r,i);return MC(a).drawImage(t,-n,-o),QC(a,e)},bk=function(t){return ck(t)},yk=function(t){return fk(t)},xk=function(t,e){return dk(t,e)},wk=function(t,e,n,o){return rk(t,(r=ek(),a=n,u=o,i=tk(i=e,0,2),a=tk(a,0,2),u=tk(u,0,2),ok(r,[i,0,0,0,0,0,a,0,0,0,0,0,u,0,0,0,0,0,1,0,0,0,0,0,1])));var r,i,a,u},Sk=function(t,e){return sk(t,e)},Ck=function(t,e){return lk(t,e)},kk=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return hk(t,n.getType(),o)}));var n,o},Ok=function(t,e,n,o,r){return a=e,u=n,c=o,s=r,(i=t).toCanvas().then((function(t){return vk(t,i.getType(),a,u,c,s)}));var i,a,u,c,s},_k=function(t,e,n){return r=e,i=n,(o=t).toCanvas().then((function(t){return mk(t,r,i).then((function(t){return QC(t,o.getType())}))}));var o,r,i},Tk=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return pk(t,n.getType(),o)}));var n,o},Dk=function(t,e){return d({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},Ek=function(t,e){return Dk(vp(t,e),{})},Bk=function(t,e){return Dk(vp(t,e),{behaviours:ac([dg.config({})])})},Ak=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:ac([dg.config({})])}},Ik=ii("toolbar.button.execute"),Mk=((YC={})[Do()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],YC),Fk=ii("update-menu-text"),Rk=ii("update-menu-icon"),Pk=function(t,e,o){var r=mn(n),i=t.text.map((function(t){return pp(Ak(t,e,o.providers))})),u=t.icon.map((function(t){return pp(Bk(t,o.providers.icons))})),c=function(t,e){var n=Ul.getValue(t);return bg.focus(n),Ko(n,"keydown",{raw:e.event.raw}),iw.close(n),k.some(!0)},s=t.role.fold((function(){return{}}),(function(t){return{role:t}})),l=t.tooltip.fold((function(){return{}}),(function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}}));return pp(iw.sketch(d(d(d({},t.uid?{uid:t.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat(W(t.classes,(function(t){return e+"--"+t}))),attributes:d({},l)},components:Zv([u.map((function(t){return t.asSpec()})),i.map((function(t){return t.asSpec()})),k.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:vp("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:ac(g(t.dropdownBehaviours,[Yv((function(){return t.disabled||o.providers.isDisabled()})),Wv(),aw.config({}),dg.config({}),mg("dropdown-events",[Kv(t,r),Jv(t,r)]),mg("menubutton-update-display-text",[rr(Fk,(function(t,e){i.bind((function(e){return e.getOpt(t)})).each((function(t){dg.set(t,[da(o.providers.translate(e.event.text))])}))})),rr(Rk,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){dg.set(t,[Bk(e.event.icon,o.providers.icons)])}))}))])])),eventOrder:Lt(Mk,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ac([ug.config({mode:"special",onLeft:c,onRight:c})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:Sh(0,t.columns,t.presets)},fetch:function(e){return kx(a(t.fetch,e))}}))).asSpec()},Vk=function(t){return"separator"===t.type},Hk={type:"separator"},zk=function(t,e){var n=$(t,(function(t,n){return T(n)?""===n?t:"|"===n?0<t.length&&!Vk(t[t.length-1])?t.concat([Hk]):t:Pt(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return 0<n.length&&Vk(n[n.length-1])&&n.pop(),n},jk=function(t,e){return Pt(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=Lk(r,o),{item:n,menus:Lt(i.menus,Qt(n.value,i.items)),expansions:Lt(i.expansions,Qt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},Lk=function(t,e){var n=zk(T(t)?t.split(" "):t,e);return X(n,(function(t,n){var o=function(t){if(Vk(t))return t;var e=Rt(t,"value").getOrThunk((function(){return ii("generated-menu-item")}));return Lt({value:e},t)}(n),r=jk(o,e);return{menus:Lt(t.menus,r.menus),items:[r.item].concat(t.items),expansions:Lt(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},Nk=function(t,e,n,o){var r=ii("primary-menu"),i=Lk(t,n.shared.providers.menuItems());if(0===i.items.length)return k.none();var a=xy(r,i.items,e,n,o),u=Et(i.menus,(function(t,o){return xy(o,t,e,n,!1)})),c=Lt(u,Qt(r,a));return k.from(tp.tieredData(r,c,i.expansions))},Uk=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)},setActive:function(e){var n=t.element;e?(Vi(n,"tox-tbtn--enabled"),$r(n,"aria-pressed",!0)):(zi(n,"tox-tbtn--enabled"),Zr(n,"aria-pressed"))},isActive:function(){return ji(t.element,"tox-tbtn--enabled")}}},Wk=function(t,e,n,o){return Pk({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o(Nk(t,uh.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:Uk,columns:1,presets:"normal",classes:[],dropdownBehaviours:[$y.config({})]},e,n.shared)},Gk=function(t,e,n){return function(o){o(W(t,(function(t){var o,r,i=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return d(d({type:t.type,active:!1},i),{onAction:function(t){var o=!t.isActive();t.setActive(o),r.storage.set(o),n.shared.getSink().each((function(t){e().getOpt(t).each((function(t){gc(t.element),Ko(t,rx,{name:r.name,value:r.storage.get()})}))}))},onSetup:(o=r=t,function(t){t.setActive(o.storage.get())})})})))}},Yk=function(t,e,n,o,r,i){void 0===n&&(n=[]);var a=e.fold((function(){return{}}),(function(t){return{action:t}})),u=d({buttonBehaviours:ac([Yv((function(){return t.disabled||i.isDisabled()})),Wv(),$y.config({}),mg("button press",[or("click"),or("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=Lt(u,{dom:o});return Lt(c,{components:r})},qk=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return Ek(t,n.icons)})),a=Zv([i]);return Yk(t,e,o,r,a,n)},Xk=function(t,e,n,o){void 0===o&&(o=[]);var r=qk(t,k.some(e),n,o);return gp.sketch(r)},$k=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),a=t.icon?t.icon.map((function(t){return Ek(t,n.icons)})):k.none(),u=a.isSome()?Zv([a]):[],c=a.isSome()?{}:{innerHtml:i},s=g(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),l=d(d({tag:"button",classes:s},c),{attributes:{title:i}});return Yk(t,e,o,l,u,n)},Kk=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=$k(t,k.some(e),n,o,r);return gp.sketch(i)},Jk=function(t,e){return function(n){"custom"===e?Ko(n,rx,{name:t,value:{}}):"submit"===e?$o(n,ix):"cancel"===e?$o(n,ox):console.error("Unknown button type: ",e)}},Qk=function(t,e,o){if("menu"===e){var r=t,i=d(d({},t),{onSetup:function(e){return e.setDisabled(t.disabled),n},fetch:Gk(r.items,(function(){return a}),o)}),a=pp(Wk(i,"tox-tbtn",o,k.none()));return a.asSpec()}if("custom"===(s=e)||"cancel"===s||"submit"===s){var u=Jk(t.name,e),c=d(d({},t),{borderless:!1});return Kk(c,u,o.shared.providers,[])}var s;console.error("Unknown footer button type: ",e)},Zk=function(t,e){var n,o,r=Jk(t.name,"custom");return n=k.none(),o=Yy.parts.field(d({factory:gp},$k(t,k.some(r),e,[xC(""),uC()]))),Jy(n,o,[],[])},tO=r([nn("field1Name","field1"),nn("field2Name","field2"),vu("onLockedChange"),mu(["lockClass"]),nn("locked",!1),ql("coupledFieldBehaviours",[ed,Ul])]),eO=function(t,e){return xf({factory:Yy,name:t,overrides:function(t){return{fieldBehaviours:ac([mg("coupled-input-behaviour",[rr(vo(),(function(n){Ff(n,t,e).bind(ed.getCurrent).each((function(e){Ff(n,t,"lock").each((function(o){Bg.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})},nO=r([eO("field1","field2"),eO("field2","field1"),xf({factory:gp,schema:[Ne("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:ac([Bg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),oO=$f({name:"FormCoupledInputs",configFields:tO(),partFields:nO(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Xl(t.coupledFieldBehaviours,[ed.config({find:k.some}),Ul.config({store:{mode:"manual",getValue:function(e){var n=zf(e,t,["field1","field2"]),o={};return o[t.field1Name]=Ul.getValue(n.field1()),o[t.field2Name]=Ul.getValue(n.field2()),o},setValue:function(e,n){var o=zf(e,t,["field1","field2"]);Vt(n,t.field1Name)&&Ul.setValue(o.field1(),n[t.field1Name]),Vt(n,t.field2Name)&&Ul.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Ff(e,t,"field1")},getField2:function(e){return Ff(e,t,"field2")},getLock:function(e){return Ff(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),rO=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return ft.error(t);var n=parseFloat(e[1]),o=e[2];return ft.value({value:n,unit:o})},iO=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?k.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?k.some(t.value):k.some(t.value/n[t.unit]*n[e]):k.none()},aO=function(t){return k.none()},uO=function(t,e){var n,o,r,i=rO(t).toOptional(),a=rO(e).toOptional();return o=a,r=function(t,e){return iO(t,e.unit).map((function(t){return e.value/t})).map((function(t){return n=t,o=e.unit,function(t){return iO(t,o).map((function(t){return{value:t*n,unit:o}}))};var n,o})).getOr(aO)},((n=i).isSome()&&o.isSome()?k.some(r(n.getOrDie(),o.getOrDie())):k.none()).getOr(aO)},cO=function(t,e){var n=aO,o=ii("ratio-event"),r=oO.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:vp("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:vp("unlock",e.icons)}}],buttonBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),$y.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return Yy.parts.field({factory:gx,inputClasses:["tox-textfield"],inputBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),$y.config({}),mg("size-input-events",[rr(mo(),(function(t,e){Ko(t,o,{isField1:n})})),rr(bo(),(function(e,n){Ko(e,ex,{name:t.name})}))])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=oO.parts.field1(i([Yy.parts.label(u("Width")),a(!0)])),s=oO.parts.field2(i([Yy.parts.label(u("Height")),a(!1)]));return oO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,i([u("&nbsp;"),r])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,o){rO(Ul.getValue(t)).each((function(t){n(t).each((function(t){var n,o,r,i;Ul.setValue(e,(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(i=(n=t).value.toFixed((o=n.unit)in r?r[o]:1)).indexOf(".")&&(i=i.replace(/\.?0*$/,"")),i+n.unit))}))}))},coupledFieldBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){oO.getField1(t).bind(Yy.getField).each(pv.disable),oO.getField2(t).bind(Yy.getField).each(pv.disable),oO.getLock(t).each(pv.disable)},onEnabled:function(t){oO.getField1(t).bind(Yy.getField).each(pv.enable),oO.getField2(t).bind(Yy.getField).each(pv.enable),oO.getLock(t).each(pv.enable)}}),Wv(),mg("size-input-events2",[rr(o,(function(t,e){var o=e.event.isField1,r=o?oO.getField1(t):oO.getField2(t),i=o?oO.getField2(t):oO.getField1(t),a=r.map(Ul.getValue).getOr(""),u=i.map(Ul.getValue).getOr("");n=uO(a,u)}))])])})},sO={undo:r(ii("undo")),redo:r(ii("redo")),zoom:r(ii("zoom")),back:r(ii("back")),apply:r(ii("apply")),swap:r(ii("swap")),transform:r(ii("transform")),tempTransform:r(ii("temp-transform")),transformApply:r(ii("transform-apply"))},lO=r("save-state"),fO=r("disable"),dO=r("enable"),mO={formActionEvent:rx,saveState:lO,disable:fO,enable:dO},gO=function(t,e){var o=function(t,n,o,r){return pp(Kk({name:t,text:t,disabled:o,primary:r,icon:k.none(),borderless:!1},n,e))},i=function(t,n,o,r){return pp(Xk({name:t,icon:k.some(t),tooltip:k.some(n),disabled:r,primary:!1,borderless:!1},o,e))},a=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(pv)&&pv.disable(n)}))},u=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(pv)&&pv.enable(n)}))},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},s=n,l=function(t,e,n){Ko(t,e,n)},f=function(t){return $o(t,mO.disable())},d=function(t){return $o(t,mO.enable())},m=function(t,e){f(t),l(t,sO.transform(),{transform:e}),d(t)},g=function(t){return function(){Z.getOpt(t).each((function(t){dg.set(t,[J])}))}},p=function(t,e){f(t),l(t,sO.transformApply(),{transform:e,swap:g(t)}),d(t)},h=function(){return o("Back",(function(t){return l(t,sO.back(),{swap:g(t)})}),!1,!1)},v=function(){return pp({dom:{tag:"div",classes:["tox-spacer"]},behaviours:ac([pv.config({})])})},b=function(){return o("Apply",(function(t){return l(t,sO.apply(),{swap:g(t)})}),!0,!0)},y=[h(),v(),o("Apply",(function(e){p(e,(function(e){var n=t.getRect();return Ok(e,n.x,n.y,n.w,n.h)})),t.hideCrop()}),!1,!0)],x=Ny.sketch({dom:c,components:y.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-crop-buttons-events",[rr(mO.disable(),(function(t,e){a(y,t)})),rr(mO.enable(),(function(t,e){u(y,t)}))])])}),w=pp(cO({name:"size",label:k.none(),constrain:!0,disabled:!1},e)),S=[h(),v(),w,v(),o("Apply",(function(t){w.getOpt(t).each((function(e){var n,o,r=Ul.getValue(e),i=parseInt(r.width,10),a=parseInt(r.height,10),u=(n=i,o=a,function(t){return _k(t,n,o)});p(t,u)}))}),!1,!0)],C=Ny.sketch({dom:c,components:S.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-resize-buttons-events",[rr(mO.disable(),(function(t,e){a(S,t)})),rr(mO.enable(),(function(t,e){u(S,t)}))])])}),O=function(t,e){return function(n){return t(n,e)}},_=O(kk,"h"),T=O(kk,"v"),D=O(Tk,-90),E=O(Tk,90),B=function(t,e){var n,o;o=e,f(n=t),l(n,sO.tempTransform(),{transform:o}),d(n)},A=[h(),v(),i("flip-horizontally","Flip horizontally",(function(t){B(t,_)}),!1),i("flip-vertically","Flip vertically",(function(t){B(t,T)}),!1),i("rotate-left","Rotate counterclockwise",(function(t){B(t,D)}),!1),i("rotate-right","Rotate clockwise",(function(t){B(t,E)}),!1),v(),b()],I=Ny.sketch({dom:c,components:A.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-fliprotate-buttons-events",[rr(mO.disable(),(function(t,e){a(A,t)})),rr(mO.enable(),(function(t,e){u(A,t)}))])])}),M=function(t,n,o,i,a){var u=$S.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=$S.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=$S.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pp($S.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:a,getInitialValue:r({x:i})},components:[u,c,s],sliderBehaviours:ac([bg.config({})]),onChoose:n}))},F=function(t,e,n,o,r){return[h(),(i=e,M(t,(function(t,e,n){var o=O(i,n.x/100);m(t,o)}),n,o,r)),b()];var i},R=function(t,e,n,o,r){var i=F(t,e,n,o,r);return Ny.sketch({dom:c,components:i.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-filter-panel-buttons-events",[rr(mO.disable(),(function(t,e){a(i,t)})),rr(mO.enable(),(function(t,e){u(i,t)}))])])})},P=[h(),v(),b()],V=Ny.sketch({dom:c,components:P.map((function(t){return t.asSpec()}))}),H=R("Brightness",Sk,-100,0,100),z=R("Contrast",Ck,-100,0,100),j=R("Gamma",xk,-100,0,100),L=function(t){return M(t,(function(t,e,n){var o=N.getOpt(t),r=W.getOpt(t),i=U.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r,i,a,u=Ul.getValue(e).x/100,c=Ul.getValue(o).x/100,s=Ul.getValue(n).x/100,l=(r=u,i=c,a=s,function(t){return wk(t,r,i,a)});m(t,l)}))}))}))}),0,100,200)},N=L("R"),U=L("G"),W=L("B"),G=[h(),N,U,W,b()],Y=Ny.sketch({dom:c,components:G.map((function(t){return t.asSpec()}))}),q=function(t,e,n){return function(o){l(o,sO.swap(),{transform:e,swap:function(){Z.getOpt(o).each((function(e){dg.set(e,[t]),n(e)}))}})}},X=k.some(yk),$=k.some(bk),K=[i("crop","Crop",q(x,k.none(),(function(e){t.showCrop()})),!1),i("resize","Resize",q(C,k.none(),(function(e){w.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;Ul.setValue(e,{width:o,height:r})}))})),!1),i("orientation","Orientation",q(I,k.none(),s),!1),i("brightness","Brightness",q(H,k.none(),s),!1),i("sharpen","Sharpen",q(V,X,s),!1),i("contrast","Contrast",q(z,k.none(),s),!1),i("color-levels","Color levels",q(Y,k.none(),s),!1),i("gamma","Gamma",q(j,k.none(),s),!1),i("invert","Invert",q(V,$,s),!1)],J=Ny.sketch({dom:c,components:K.map((function(t){return t.asSpec()}))}),Q=Ny.sketch({dom:{tag:"div"},components:[J],containerBehaviours:ac([dg.config({})])}),Z=pp(Q);return{memContainer:Z,getApplyButton:function(t){return Z.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},pO=tinymce.util.Tools.resolve("tinymce.geom.Rect"),hO=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),vO=tinymce.util.Tools.resolve("tinymce.util.Observable"),bO=tinymce.util.Tools.resolve("tinymce.util.VK"),yO=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function xO(t,e){var n,o,r,i,a=e.document||document,u=a.getElementById(e.handle||t),c=function(t){if(yO(t),t.button!==o)return s(t);t.deltaX=t.screenX-r,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},s=function t(o){yO(o),hO(a).off("mousemove touchmove",c).off("mouseup touchend",t),n.remove(),e.stop&&e.stop(o)};return hO(u).on("mousedown touchstart",(function(t){var l,f,d,m,g,p,h,v,b,y,x=(l=a,f=Math.max,d=l.documentElement,m=l.body,g=f(d.scrollWidth,m.scrollWidth),p=f(d.clientWidth,m.clientWidth),h=f(d.offsetWidth,m.offsetWidth),v=f(d.scrollHeight,m.scrollHeight),b=f(d.clientHeight,m.clientHeight),{width:g<h?p:g,height:v<f(d.offsetHeight,m.offsetHeight)?b:v});yO(t),t.preventDefault(),o=t.button;var w=u;r=t.screenX,i=t.screenY,y=window.getComputedStyle?window.getComputedStyle(w,null).getPropertyValue("cursor"):w.runtimeStyle.cursor,n=hO("<div></div>").css({position:"absolute",top:0,left:0,width:x.width,height:x.height,zIndex:2147483647,opacity:1e-4,cursor:y}).appendTo(a.body),hO(a).on("mousemove touchmove",c).on("mouseup touchend",s),e.start(t)})),{destroy:function(){hO(u).off()}}}var wO,SO,CO,kO=0,OO=function(t,e,n,o,r){var i,a="tox-",u="tox-crid-"+kO++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],l=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},f=function(e,o,r,i){var a,u=o.x,c=o.y,s=o.w,f=o.h;u+=r*e.deltaX,c+=i*e.deltaY,(s+=r*e.deltaW)<20&&(s=20),(f+=i*e.deltaH)<20&&(f=20),a=t=pO.clamp({x:u,y:c,w:s,h:f},n,"move"===e.name),a=l(n,a),p.fire("updateRect",{rect:a}),g(a)},d=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),hO("#"+u+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};mC.each(c,(function(e){hO("#"+u+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},m=function(e){d(t=e)},g=function(t){var e,o;m((e=n,{x:(o=t).x+e.x,y:o.y+e.y,w:o.w,h:o.h}))};hO('<div id="'+u+'" class="'+a+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),mC.each(s,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t+'"class="'+a+'croprect-block" style="display: none" data-mce-bogus="all">')})),mC.each(c,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t.name+'" class="'+a+"croprect-handle "+a+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),i=mC.map(c,(function(e){var n;return xO(u,{document:o.ownerDocument,handle:u+"-"+e.name,start:function(){n=t},drag:function(t){f(e,n,t.deltaX,t.deltaY)}})})),d(t),hO(o).on("focusin focusout",(function(t){hO(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),hO(o).on("keydown",(function(e){var n;mC.each(c,(function(t){if(e.target.id===u+"-"+t.name)return n=t,!1}));var o=function(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),f(n,o,r,i)};switch(e.keyCode){case bO.LEFT:o(e,0,t,-10,0);break;case bO.RIGHT:o(e,0,t,10,0);break;case bO.UP:o(e,0,t,0,-10);break;case bO.DOWN:o(e,0,t,0,10);break;case bO.ENTER:case bO.SPACEBAR:e.preventDefault(),r()}}));var p=mC.extend({toggleVisibility:function(t){var e=mC.map(c,(function(t){return"#"+u+"-"+t.name})).concat(mC.map(s,(function(t){return"#"+u+"-"+t}))).join(",");t?hO(e,o).show():hO(e,o).hide()},setClampRect:function(e){n=e,d(t)},setRect:m,getInnerRect:function(){return l(n,t)},setInnerRect:g,setViewPortRect:function(n){e=n,d(t)},destroy:function(){mC.each(i,(function(t){t.destroy()})),i=[]}},vO);return p},_O=function(t){var e=pp({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=mn(1),r=mn(k.none()),i=mn({x:0,y:0,w:1,h:1}),a=mn({x:0,y:0,w:1,h:1}),u=function(t,n){l.getOpt(t).each((function(t){var a=o.get(),u=Ta(t.element),c=ya(t.element),s=n.dom.naturalWidth*a,l=n.dom.naturalHeight*a,f=Math.max(0,u/2-s/2),d=Math.max(0,c/2-l/2),m={left:f.toString()+"px",top:d.toString()+"px",width:s.toString()+"px",height:l.toString()+"px",position:"absolute"};Ki(n,m),e.getOpt(t).each((function(t){Ki(t.element,m)})),r.get().each((function(t){var e=i.get();t.setRect({x:e.x*a+f,y:e.y*a+d,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:d,w:s,h:l}),t.setViewPortRect({x:0,y:0,w:u,h:c})}))}))},c=function(t,e){var n,r=pn.fromTag("img");return $r(r,"src",e),n=r.dom,new Fp((function(t){var e=function e(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then((function(){return l.getOpt(t).map((function(t){var e=ma({element:r});dg.replaceAt(t,1,k.some(e));var n=a.get(),c={x:0,y:0,w:r.dom.naturalWidth,h:r.dom.naturalHeight};a.set(c);var s,f,d=pO.inflate(c,-20,-20);return i.set(d),n.w===c.w&&n.h===c.h||(s=t,f=r,l.getOpt(s).each((function(t){var e=Ta(t.element),n=ya(t.element),r=f.dom.naturalWidth,i=f.dom.naturalHeight,a=Math.min(e/r,n/i);1<=a?o.set(1):o.set(a)}))),u(t,r),r}))}))},s=Ny.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:ac([mg("image-panel-crop-events",[fr((function(t){l.getOpt(t).each((function(t){var e=t.element.dom,a=OO({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,n);a.toggleVisibility(!1),a.on("updateRect",(function(t){var e=t.rect,n=o.get(),r={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};i.set(r)})),r.set(k.some(a))}))}))])])}],containerBehaviours:ac([dg.config({}),mg("image-panel-events",[fr((function(e){c(e,t)}))])])}),l=pp(s);return{memContainer:l,updateSrc:c,zoom:function(t,e){var n=o.get(),r=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);o.set(r),l.getOpt(t).each((function(t){var e=t.components()[1].element;u(t,e)}))},showCrop:function(){r.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){r.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return i.get()},getMeasurements:function(){var t=a.get();return{width:t.w,height:t.h}}}},TO=function(t,e,n,o,r){return Xk({name:t,icon:k.some(e),disabled:n,tooltip:k.some(t),primary:!1,borderless:!1},o,r)},DO=function(t,e){e?pv.enable(t):pv.disable(t)},EO=function(t){var e,o,r,i,a=mn(t),u=mn(k.none()),c=(o=-1,{data:e=[],add:function(t){var n=e.splice(++o);return e.push(t),{state:t,removed:n}},undo:function(){if(r())return e[--o]},redo:function(){if(i())return e[++o]},canUndo:r=function(){return 0<o},canRedo:i=function(){return-1!==o&&o<e.length-1}});c.add(t);var s=function(t){a.set(t)},l=function(t){return{blob:t,url:URL.createObjectURL(t)}},f=function(t){URL.revokeObjectURL(t.url)},d=function(){u.get().each(f),u.set(k.none())},m=function(t){var e=l(t);s(e);var n,o=c.add(e).removed;return n=o,mC.each(n,f),e.url};return{getBlobState:function(){return a.get()},setBlobState:s,addBlobState:m,getTempState:function(){return u.get().fold((function(){return a.get()}),(function(t){return t}))},updateTempState:function(t){var e=l(t);return d(),u.set(k.some(e)),e.url},addTempState:function(t){var e=l(t);return u.set(k.some(e)),e.url},applyTempState:function(t){return u.get().fold(n,(function(e){m(e.blob),t()}))},destroyTempState:d,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}},BO=function(t,e){var o,r,i,a=EO(t.currentState),u=function(t){var e=a.getHistoryStates();h.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Ko(t,mO.formActionEvent,{name:mO.saveState(),value:e.undoEnabled})},c=function(t){return t.toBlob()},s=function(t){Ko(t,mO.formActionEvent,{name:mO.disable(),value:{}})},l=function(t){v.getApplyButton(t).each((function(t){pv.enable(t)})),Ko(t,mO.formActionEvent,{name:mO.enable(),value:{}})},f=function(t,e){return s(t),p.updateSrc(t,e)},d=function(t,e,n,o,r){return s(t),ZC(e).then(n).then(c).then(o).then((function(e){return f(t,e).then((function(e){return u(t),r(),l(t),e}))}))["catch"]((function(e){return console.log(e),l(t),e}))},m=function(t,e,n){var o=a.getBlobState().blob;d(t,o,e,(function(t){return a.updateTempState(t)}),n)},g=function(t){var e=a.getBlobState().url;return a.destroyTempState(),u(t),e},p=_O(t.currentState.url),h=(r=pp(TO("Undo","undo",!0,(function(t){Ko(t,sO.undo(),{direction:1})}),o=e)),i=pp(TO("Redo","redo",!0,(function(t){Ko(t,sO.redo(),{direction:1})}),o)),{container:Ny.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[r.asSpec(),i.asSpec(),TO("Zoom in","zoom-in",!1,(function(t){Ko(t,sO.zoom(),{direction:1})}),o),TO("Zoom out","zoom-out",!1,(function(t){Ko(t,sO.zoom(),{direction:-1})}),o)]}),updateButtonUndoStates:function(t,e,n){r.getOpt(t).each((function(t){DO(t,e)})),i.getOpt(t).each((function(t){DO(t,n)}))}}),v=gO(p,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),p.memContainer.asSpec(),h.container],behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),mg("image-tools-events",[rr(sO.undo(),(function(t,e){var n=a.undo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.redo(),(function(t,e){var n=a.redo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.zoom(),(function(t,e){var n=e.event.direction;p.zoom(t,n)})),rr(sO.back(),(function(t,e){var n,o;o=g(n=t),f(n,o).then((function(t){l(n)})),(0,e.event.swap)(),p.hideCrop()})),rr(sO.apply(),(function(t,e){a.applyTempState((function(){g(t),(0,e.event.swap)()}))})),rr(sO.transform(),(function(t,e){return m(t,e.event.transform,n)})),rr(sO.tempTransform(),(function(t,e){return o=t,r=e.event.transform,i=a.getTempState().blob,void d(o,i,r,(function(t){return a.addTempState(t)}),n);var o,r,i})),rr(sO.transformApply(),(function(t,e){return n=t,o=e.event.transform,r=e.event.swap,i=a.getBlobState().blob,void d(n,i,o,(function(t){var e=a.addBlobState(t);return g(n),e}),r);var n,o,r,i})),rr(sO.swap(),(function(t,e){var n;n=t,h.updateButtonUndoStates(n,!1,!1);var o=e.event.transform,r=e.event.swap;o.fold((function(){r()}),(function(e){m(t,e,r)}))}))]),uC()])}},AO=function(t){return!Pt(t,"items")},IO="data-value",MO=function t(e,n,o,r){return W(o,(function(o){return AO(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===r,onAction:function(){Ul.setValue(e,o.value),Ko(e,ex,{name:n}),bg.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:function(){return t(e,n,o.items,r)}}}))},FO=function t(e,n){return ct(e,(function(e){return AO(e)?Jf(e.value===n,e):t(e.items,n)}))},RO=Xf({name:"HtmlSelect",configFields:[Ne("options"),Wl("selectBehaviours",[bg,Ul]),nn("selectClasses",[]),nn("selectAttributes",{}),Ke("data")],factory:function(t,e){var n=W(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return Qt("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:Yl(t.selectBehaviours,[bg.config({}),Ul.config({store:d({mode:"manual",getValue:function(t){return ra(t.element)},setValue:function(e,n){K(t.options,(function(t){return t.value===n})).isSome()&&ia(e.element,n)}},o)})])}}}),PO=function(t,e){var n=t.label.map((function(t){return tx(t,e)})),o=[pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),ug.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return $o(t,ix),k.some(!0)}}),mg("textfield-change",[rr(vo(),(function(e,n){Ko(e,ex,{name:t.name})})),rr(_o(),(function(e,n){Ko(e,ex,{name:t.name})}))]),$y.config({})],i=t.validation.map((function(t){return Rx.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Ul.getValue(e),o=t.validator(n);return Ox(!0===o?ft.value(n):ft.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),a=t.placeholder.fold(r({}),(function(t){return{placeholder:e.translate(t)}})),u=t.inputMode.fold(r({}),(function(t){return{inputmode:t}})),c=d(d({},a),u),s=Yy.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:ac(Q([o,i])),selectOnFocus:!1,factory:gx}),l=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[pv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()];return Jy(n,s,l,f)},VO=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return er([rr(t.event,n),dr((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[rr(t,(function(){return e.cancel()}))]})).getOr([])))}}),HO=function(t){var e=mn(null);return Si({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},zO=Object.freeze({__proto__:null,throttle:HO,init:function(t){return t.stream.streams.state(t)}}),jO=[Ue("stream",Ie("mode",{throttle:[Ne("delay"),nn("stopEvent",!0),yu("streams",{setup:function(t,e){var n=t.stream,o=Cp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:HO})]})),nn("event","input"),Ke("cancelEvent"),vu("onStream")],LO=cc({fields:jO,name:"streaming",active:VO,state:zO}),NO=function(t,e,n){var o=Ul.getValue(n);Ul.setValue(e,o),WO(e)},UO=function(t,e){var n=t.element,o=ra(n),r=n.dom;"number"!==Kr(n,"type")&&e(r,o)},WO=function(t){UO(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},GO=function(t,e,n){if(t.selectsOver){var o=Ul.getValue(e),r=t.getDisplayText(o),i=Ul.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?k.some((function(){var t,o;NO(0,e,n),t=e,o=r.length,UO(t,(function(t,e){return t.setSelectionRange(o,e.length)}))})):k.none()}return k.none()},YO=r("alloy.typeahead.itemexecute"),qO=r([Ke("lazySink"),Ne("fetch"),nn("minChars",5),nn("responseTime",1e3),pu("onOpen"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),nn("layouts",k.none()),nn("eventOrder",{}),fn("model",{},[nn("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),nn("selectsOver",!0),nn("populateFromBrowse",!0)]),pu("onSetValue"),hu("onExecute"),pu("onItemExecute"),nn("inputClasses",[]),nn("inputAttributes",{}),nn("inputStyles",{}),nn("matchWidth",!0),nn("useMinWidth",!1),nn("dismissOnBlur",!0),mu(["openClass"]),Ke("initialData"),Wl("typeaheadBehaviours",[bg,Ul,LO,ug,Bg,Hx]),dn("previewing",(function(){return mn(!0)}))].concat(fx()).concat(nw())),XO=r([wf({schema:[du()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){GO(t.model,o,n).fold((function(){return dd.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&NO(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return Ko(t,YO(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&NO(t.model,e,n)}))}}}})]),$O=$f({name:"Typeahead",configFields:qO(),partFields:XO(),factory:function(t,e,o,r){var i=function(e,o,i){t.previewing.set(!1);var a=Hx.getCoupled(e,"sandbox");Cl.isOpen(a)?ed.getCurrent(a).each((function(t){dd.getHighlighted(t).fold((function(){i(t)}),(function(){tr(a,t.element,"keydown",o)}))})):Xx(t,u(e),e,a,r,(function(t){ed.getCurrent(t).each(i)}),vx.HighlightFirst).get(n)},a=dx(t),u=function(t){return function(e){return e.map((function(e){var n=Ft(e.menus),o=Z(n,(function(t){return q(t.items,(function(t){return"item"===t.type}))}));return Ul.getState(t).update(W(o,(function(t){return t.data}))),e}))}},c=[bg.config({}),Ul.config({onSetValue:t.onSetValue,store:d({mode:"dataset",getDataKey:function(t){return ra(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){ia(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return Qt("initialValue",t)})).getOr({}))}),LO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,o){var i,a=Hx.getCoupled(e,"sandbox");bg.isFocused(e)&&ra(e.element).length>=t.minChars&&(i=ed.getCurrent(a).bind((function(t){return dd.getHighlighted(t).map(Ul.getValue)})),t.previewing.set(!0),Xx(t,u(e),e,a,r,(function(e){ed.getCurrent(a).each((function(e){i.fold((function(){t.model.selectsOver&&dd.highlightFirst(e)}),(function(t){dd.highlightBy(e,(function(e){return Ul.getValue(e).value===t.value})),dd.getHighlighted(e).orThunk((function(){return dd.highlightFirst(e),k.none()}))}))}))}),vx.HighlightFirst).get(n))},cancelEvent:Mo()}),ug.config({mode:"special",onDown:function(t,e){return i(t,e,dd.highlightFirst),k.some(!0)},onEscape:function(t){var e=Hx.getCoupled(t,"sandbox");return Cl.isOpen(e)?(Cl.close(e),k.some(!0)):k.none()},onUp:function(t,e){return i(t,e,dd.highlightLast),k.some(!0)},onEnter:function(e){var n=Hx.getCoupled(e,"sandbox"),o=Cl.isOpen(n);if(o&&!t.previewing.get())return ed.getCurrent(n).bind((function(t){return dd.getHighlighted(t)})).map((function(t){return Ko(e,YO(),{item:t}),!0}));var r=Ul.getValue(e);return $o(e,Mo()),t.onExecute(n,e,r),o&&Cl.close(n),k.some(!0)}}),Bg.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Hx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Bg.on(e)},onClose:function(){return Bg.off(e)}})}}}),mg("typeaheadevents",[gr((function(e){var o=n;Kx(t,u(e),e,r,o,vx.HighlightFirst).get(n)})),rr(YO(),(function(e,n){var o=Hx.getCoupled(e,"sandbox");NO(t.model,e,n.event.item),$o(e,Mo()),t.onItemExecute(e,o,n.event.item,Ul.getValue(e)),Cl.close(o),WO(e)}))].concat(t.dismissOnBlur?[rr(Oo(),(function(t){var e=Hx.getCoupled(t,"sandbox");hc(e.element).isNone()&&Cl.close(e)}))]:[]))];return{uid:t.uid,dom:mx(Lt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:d(d({},a),Yl(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),KO=function t(e){return d(d({},e),{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return Ox(ft.error(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(n,o){return t(kx((function(t){var r=!1,i=setTimeout((function(){r=!0,t(ft.error(o()))}),n);e.get((function(e){r||(clearTimeout(i),t(e))}))})))}})},JO=function(t){return KO(kx(t))},QO=JO,ZO={type:"separator"},t_=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:n}},e_=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:n}},n_=function(t,e){return o=t,n=q(e,(function(t){return t.type===o})),W(n,t_);var n,o},o_=function(t,e){var n=t.toLowerCase();return q(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return Cn(e.toLowerCase(),n)||Cn(t.value.toLowerCase(),n)}))},r_=function(t,e,n){var o=Ul.getValue(e),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var o,i,a,u,c=o_(r,(o=n.getHistory(t),W(o,(function(t){return e_(t,t)}))));return"file"===t?(i=[c,o_(r,n_("header",e.targets)),o_(r,Q([(u=e,k.from(u.anchorTop).map((function(t){return e_("<top>",t)})).toArray()),n_("anchor",e.targets),(a=e,k.from(a.anchorBottom).map((function(t){return e_("<bottom>",t)})).toArray())]))],$(i,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(ZO,e)}),[])):c}))},i_=ii("aria-invalid"),a_=function(t,e,o){var r,i,a,u,c,s=e.shared.providers,l=function(e){var n=Ul.getValue(e);o.addToHistory(n.value,t.filetype)},f=Yy.parts.field({factory:$O,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":i_,type:"url"},minChars:0,responseTime:0,fetch:function(n){var r=r_(t.filetype,n,o),i=Nk(r,uh.BUBBLE_TO_SANDBOX,e,!1);return Ox(i)},getHotspot:function(t){return b.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Rx)&&Rx.run(t).get(n)},typeaheadBehaviours:ac(Q([o.getValidationHandler().map((function(e){return Rx.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){g.getOpt(t).each((function(t){$r(t.element,"title",s.translate(e))}))}},validator:{validate:function(n){var o=Ul.getValue(n);return QO((function(n){e({type:t.filetype,url:o.value},(function(t){var e,o;"invalid"===t.status?(e=ft.error(t.message),n(e)):(o=ft.value(t.message),n(o))}))}))},validateOnLoad:!1}})})).toArray(),[pv.config({disabled:function(){return t.disabled||s.isDisabled()}}),$y.config({}),mg("urlinput-events",Q(["file"===t.filetype?[rr(vo(),(function(e){Ko(e,ex,{name:t.name})}))]:[],[rr(bo(),(function(e){Ko(e,ex,{name:t.name}),l(e)})),rr(_o(),(function(e){Ko(e,ex,{name:t.name}),l(e)}))]]))]])),eventOrder:((r={})[vo()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:Sh(0,0,"normal")},onExecute:function(t,e,n){Ko(e,ix,{})},onItemExecute:function(e,n,o,r){l(e),Ko(e,ex,{name:t.name})}}),m=t.label.map((function(t){return tx(t,s)})),g=pp((i="invalid",a=k.some(i_),void 0===(u="warning")&&(u=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:vp(u,s.icons),attributes:d({title:s.translate(c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))}})),p=pp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[g.asSpec()]}),h=o.getUrlPicker(t.filetype),v=ii("browser.url.event"),b=pp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,p.asSpec()],behaviours:ac([pv.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),y=pp(Kk({name:t.name,icon:k.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return $o(t,v)}),s,[],["tox-browse-url"]));return Yy.sketch({dom:Zy([]),components:m.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Q([[b.asSpec()],h.map((function(){return y.asSpec()})).toArray()])}]),fieldBehaviours:ac([pv.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable),y.getOpt(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable),y.getOpt(t).each(pv.enable)}}),Wv(),mg("url-input-events",[rr(v,(function(e){ed.getCurrent(e).each((function(n){var o=Ul.getValue(n),r=d({fieldname:t.name},o);h.each((function(o){o(r).get((function(o){Ul.setValue(n,o),Ko(e,ex,{name:t.name})}))}))}))}))])])})},u_=function(t){return function(e,n,o){return Rt(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}},c_={bar:u_((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:W(n.items,o.interpreter)};var n,o})),collection:u_((function(t,e){return lx(t,e.shared.providers)})),alertbanner:u_((function(t,e){return n=t,o=e.shared.providers,Ny.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:vp(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){Ko(t,rx,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o})),input:u_((function(t,e){return n=t,o=e.shared.providers,PO({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:k.none(),maximized:n.maximized},o);var n,o})),textarea:u_((function(t,e){return n=t,o=e.shared.providers,PO({name:n.name,multiline:!0,label:n.label,inputMode:k.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:k.none(),maximized:n.maximized},o);var n,o})),label:u_((function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=W(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:ac([uC(),dg.config({}),yC(k.none()),ug.config({mode:"acyclic"})])};var n,o,r,i})),iframe:(wO=function(t,e){return BC(t,e.shared.providers)},function(t,e,n){var o=Lt(e,{source:"dynamic"});return u_(wO)(t,o,n)}),button:u_((function(t,e){return Zk(t,e.shared.providers)})),checkbox:u_((function(t,e){return n=t,o=e.shared.providers,r=Ul.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),a=function(t){return t.element.dom.click(),k.some(!0)},u=Yy.parts.field({factory:{sketch:i},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ac([uC(),pv.config({disabled:function(){return n.disabled||o.isDisabled()}}),$y.config({}),bg.config({}),r,ug.config({mode:"special",onEnter:a,onSpace:a,stopSpaceKeyup:!0}),mg("checkbox-events",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),c=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:ac([aw.config({})])}),l=pp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(s=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:vp("checked"===t?"selected":"unselected",o.icons)}}})("checked"),s("unchecked")]}),Yy.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,l.asSpec(),c],fieldBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()])});var n,o,r,a,u,c,s,l})),colorinput:u_((function(t,e){return lw(t,e.shared,e.colorinput)})),colorpicker:u_((function(t){var e=function(t){return"tox-"+t},n=aC(fC,e),o=pp(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(t){var e=o.get(t);return ed.getCurrent(e).bind((function(t){return Ul.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=o.get(t);ed.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){Ul.setValue(t,{hex:k.from(n[1]).getOr("")}),ZS.getField(t,"hex").each((function(t){$o(t,vo())}))}))}}}),uC()])}})),dropzone:u_((function(t,e){return wC(t,e.shared.providers)})),grid:u_((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:W(n.items,o.interpreter)};var n,o})),listbox:u_((function(t,e){return o=t,a=(i=e).shared.providers,u=it(o.items).filter(AO),c=o.label.map((function(t){return tx(t,a)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Yy.parts.field({dom:{},factory:{sketch:function(t){return Pk({uid:t.uid,text:u.map((function(t){return t.text})),icon:k.none(),tooltip:o.label,role:k.none(),fetch:function(t,e){var n=MO(t,o.name,o.items,Ul.getValue(t));e(Nk(n,uh.CLOSE_ON_EXECUTE,i,!1))},onSetup:r(n),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[$y.config({}),Ul.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return Kr(t.element,IO)},setValue:function(t,e){FO(o.items,e).each((function(e){$r(t.element,IO,e.value),Ko(t,Fk,{text:e.text})}))}}})]},"tox-listbox",i.shared)}}})]},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Q([c.toArray(),[s]]),fieldBehaviours:ac([pv.config({disabled:r(o.disabled),onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}})])});var o,i,a,u,c,s})),selectbox:u_((function(t,e){return n=t,o=e.shared.providers,r=W(n.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=n.label.map((function(t){return tx(t,o)})),a=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:RO,selectBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()}}),$y.config({}),mg("selectbox-change",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),u=1<n.size?k.none():k.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:vp("chevron-down",o.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:Q([[a],u.toArray()])},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Q([i.toArray(),[c]]),fieldBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()])});var n,o,r,i,a,u,c})),sizeinput:u_((function(t,e){return cO(t,e.shared.providers)})),urlinput:u_((function(t,e){return a_(t,e,e.urlinput)})),customeditor:u_((function(t){var e=mn(k.none()),n=pp({dom:{tag:t.tag}}),o=mn(k.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ac([mg("custom-editor-events",[fr((function(r){n.getOpt(r).each((function(n){var r;r=t,(Object.prototype.hasOwnProperty.call(r,"init")?t.init(n.element.dom):dC.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)}))).then((function(t){o.get().each((function(e){t.setValue(e)})),o.set(k.none()),e.set(k.some(t))}))}))}))]),Ul.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(k.some(n))}),(function(t){return t.setValue(n)}))}}}),uC()]),components:[n.asSpec()]}})),htmlpanel:u_((function(t){return"presentation"===t.presets?Ny.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ny.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ac([$y.config({}),bg.config({})])})})),imagetools:u_((function(t,e){return BO(t,e.shared.providers)})),table:u_((function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:W(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:W(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:W(r,c)})],behaviours:ac([$y.config({}),bg.config({})])};var n,o,r,i,a,u,c})),panel:u_((function(t,e){return o=e,{dom:{tag:"div",classes:(n=t).classes},components:W(n.items,o.shared.interpreter)};var n,o}))},s_={field:function(t,e){return e}},l_=function(t,e,n){var o=Lt(n,{shared:{interpreter:function(e){return f_(t,e,o)}}});return f_(t,e,o)},f_=function(t,e,n){return Rt(c_,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},d_={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},m_=function(t,e,n){var o=zc(-12,12,d_),r={maxHeightFunction:Fc()};return function(){return n()?{anchor:"node",root:Fr(t()),node:k.from(t()),bubble:o,layouts:{onRtl:function(){return[lp]},onLtr:function(){return[sp]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[zu]},onLtr:function(){return[ju]}},overrides:r}}},g_=function(t,e,n){return function(){return n()?{anchor:"node",root:Fr(t()),node:k.from(t()),layouts:{onRtl:function(){return[fp]},onLtr:function(){return[fp]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[Wu]},onLtr:function(){return[Wu]}}}}},p_=function(t,e,n){var o,r,i,a=Pv(t),u=function(){return pn.fromDom(t.getBody())},c=function(){return pn.fromDom(t.getContentAreaContainer())},s=function(){return a||!n()};return{inlineDialog:m_(c,e,s),banner:g_(c,e,s),cursor:(r=t,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return k.some(ps.range(pn.fromDom(t.startContainer),t.startOffset,pn.fromDom(t.endContainer),t.endOffset))}}}),node:(o=i=u,function(t){return{anchor:"node",root:o(),node:t}})}},h_=function(t){return{colorPicker:function(t,e){Zb(r)(t,e)},hasCustomColors:function(){return Nb(o)},getColors:function(){return Ub(n)},getColorCols:(e=n=o=r=t,function(){return Yb(e)})};var e,n,o,r},v_=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],b_=function t(e){return $(e,(function(e,n){if(Pt(n,"items")){var o=t(n.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:n.title,items:o.formats}])}}if(Pt(n,"inline")||Pt(n,"block")||Pt(n,"selector")){var r="custom-"+(T(n.name)?n.name:n.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:n}]),formats:e.formats.concat([{title:n.title,format:r,icon:n.icon}])}}return d(d({},e),{formats:e.formats.concat(n)})}),{customFormats:[],formats:[]})},y_=function(t){return e=t,k.from(e.getParam("style_formats")).filter(E).map((function(e){var n,o,r,i=(n=t,o=b_(e),r=function(t){G(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))},n.formatter?r(o.customFormats):n.on("init",(function(){r(o.customFormats)})),o.formats);return t.getParam("style_formats_merge",!1,"boolean")?v_.concat(i):i})).getOr(v_);var e},x_=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Lt(t,o)},w_=function(t,e,n,o){var r=function e(r){return W(r,(function(r){var i,a,u,c,s,l=_t(r);if(Vt(r,"items")){var f=e(r.items);return Lt(Lt(r,{type:"submenu"}),{getStyleItems:function(){return f}})}return Vt(r,"format")?x_(r,n,o):1===l.length&&j(l,"title")?Lt(r,{type:"separator"}):(a=T((i=r).name)?i.name:ii(i.title),c={type:"formatter",format:u="custom-"+a,isSelected:n(u),getStylePreview:o(u)},s=Lt(i,c),t.formatter.register(a,s),s)}))};return r(e)},S_=mC.trim,C_=function(t){return function(e){if(I(n=e)&&1===n.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}var n;return!1}},k_=C_("true"),O_=C_("false"),__=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},T_=function(t){return t.innerText||t.textContent},D_=function(t){return(e=t)&&"A"===e.nodeName&&void 0!==(e.id||e.name)&&B_(t);var e},E_=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},B_=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return k_(t)}return!1}(t)&&!O_(t)},A_=function(t){return E_(t)&&B_(t)},I_=function(t){var e,n,o=(e=t).id?e.id:ii("h");return __("header",T_(t),"#"+o,E_(n=t)?parseInt(n.nodeName.substr(1),10):0,(function(){t.id=o}))},M_=function(t){var e=t.id||t.name,o=T_(t);return __("anchor",o||"#"+e,"#"+e,0,n)},F_=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,W(Ts(pn.fromDom(n),e),(function(t){return t.dom}))},R_=function(t){return 0<S_(t.title).length},P_=function(t){var e=F_(t);return q(W(q(e,A_),I_).concat(W(q(e,D_),M_)),R_)},V_="tinymce-url-history",H_=function(t){return T(t)&&/^https?/.test(t)},z_=function(t){return D(t)&&Mt(t,(function(t){return!(E(e=t)&&e.length<=5&&tt(e,H_));var e})).isNone()},j_=function(){var t,e=Vb.getItem(V_);if(null===e)return{};try{t=JSON.parse(e)}catch(h){if(h instanceof SyntaxError)return console.log("Local storage "+V_+" was not valid JSON",h),{};throw h}return z_(t)?t:(console.log("Local storage "+V_+" was not valid format",t),{})},L_=function(t){var e=j_();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},N_=function(t,e){var n,o,r;H_(t)&&(n=j_(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=q(o,(function(e){return e!==t})),n[e]=[t].concat(r).slice(0,5),function(t){if(!z_(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));Vb.setItem(V_,JSON.stringify(t))}(n))},U_=function(t){return!!t},W_=function(t){return Et(mC.makeMap(t,/[, ]/),U_)},G_=function(t){return k.from(t.getParam("file_picker_callback")).filter(M)},Y_=function(t,e){var n,o,r,i,a=(n=t,o=k.some(n.getParam("file_picker_types")).filter(U_),r=k.some(n.getParam("file_browser_callback_types")).filter(U_),i=o.or(r).map(W_),G_(n).fold(s,(function(t){return i.fold(l,(function(t){return 0<_t(t).length&&t}))})));return B(a)?a?G_(t):k.none():a[e]?G_(t):k.none()},q_=function(t){return k.from(t).filter(T).getOrUndefined()},X_=function(t){return k.from(void 0===(n=(e=t).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):n);var e,n},$_=function(t){return{getHistory:L_,addToHistory:N_,getLinkInformation:function(){return!1===(e=t).getParam("typeahead_urls")?k.none():k.some({targets:P_(e.getBody()),anchorTop:q_(e.getParam("anchor_top","#top")),anchorBottom:q_(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return X_(t)},getUrlPicker:function(e){return Y_(n=t,o=e).map((function(t){return function(e){return kx((function(r){var i=d({filetype:o,fieldname:e.fieldname},k.from(e.meta).getOr({}));t.call(n,(function(t,e){if(!T(t))throw new Error("Expected value to be string");if(void 0!==e&&!D(e))throw new Error("Expected meta to be a object");r({value:t,meta:e})}),e.value,i)}))}}));var n,o}}},K_=function(t,e,n){var o,r,i=mn(!1),a={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=mn(Fv(e)?"bottom":"top")).get,setDockingMode:o.set},u={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:ev.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return f_(s_,t,u)},anchors:p_(e,n,a.isPositionedAtTop),header:a,getSink:function(){return ft.value(t)}},urlinput:$_(e),styleselect:function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):k.none()}},o=function t(e){var n=e.items;return void 0!==n&&0<n.length?Z(n,t):[e.format]},r=mn([]),i=mn([]),a=mn([]),u=mn([]),c=mn(!1);return t.on("PreInit",(function(a){var u=y_(t),c=w_(t,u,e,n);r.set(c),i.set(Z(c,o))})),t.on("addStyleModifications",(function(r){var i=w_(t,r.items,e,n);a.set(i),c.set(r.replace),u.set(Z(i,o))})),{getData:function(){var t=c.get()?[]:r.get(),e=a.get();return t.concat(e)},getFlattenedKeys:function(){var t=c.get()?[]:i.get(),e=u.get();return t.concat(e)}}}(e),colorinput:h_(e),dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return u},J_=r((function(t,e){var n,o,r;n=t,o=Math.floor(e),r=_a.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),$i(n,"max-width",r+"px")})),Q_="contexttoolbar-hide",Z_=r([Ne("dom"),nn("shell",!0),Wl("toolbarBehaviours",[dg])]),tT=r([Sf({name:"groups",overrides:function(){return{behaviours:ac([dg.config({})])}}})]),eT=$f({name:"Toolbar",configFields:Z_(),partFields:tT(),factory:function(t,e,n,o){var r=function(e){return t.shell?k.some(e):Ff(e,t,"groups")},i=t.shell?{behaviours:[dg.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Yl(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){dg.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),nT=function(t,e,n){return{within:t,extra:e,withinWidth:n}},oT=function(t,e,n){var o,i=(o=function(t,e){var o=n(t);return k.some({element:t,start:e,finish:e+o,width:o})},$(t,(function(t,e){return o(e,t.len).fold(r(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]}).list),a=q(i,(function(t){return t.finish<=e})),u=X(a,(function(t,e){return t+e.width}),0);return{within:a,extra:i.slice(a.length),withinWidth:u}},rT=function(t){return W(t,(function(t){return t.element}))},iT=function(t,e,n,o){var r,i,a,u,c,s,l,f,d,m=(0===(r=oT(e,t,n)).extra.length?k.some(r):k.none()).getOrThunk((function(){return oT(e,t-n(o),n)})),g=m.within,p=m.extra,h=m.withinWidth;return 1===p.length&&p[0].width<=n(o)?(l=p,f=h,d=rT(g.concat(l)),nT(d,[],f)):1<=p.length?(a=p,u=o,c=h,s=rT(g).concat([u]),nT(s,rT(a),c)):(i=h,nT(rT(g),[],i))},aT=function(t,e){var n=W(e,(function(t){return ha(t)}));eT.setGroups(t,n)},uT=function(t,e,n){var o=Rf(t,e,"primary"),r=Hx.getCoupled(t,"overflowGroup");$i(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),a=ct(i,(function(t){return hc(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}));n([]),aT(o,i);var u=Ta(o.element),c=iT(u,e.builtGroups.get(),(function(t){return Ta(t.element)}),r);0===c.extra.length?(dg.remove(o,r),n([])):(aT(o,c.within),n(c.extra)),na(o.element,"visibility"),oa(o.element),a.each(bg.focus)},cT=r([Wl("splitToolbarBehaviours",[Hx]),dn("builtGroups",(function(){return mn([])}))]),sT=r([mu(["overflowToggledClass"]),tn("getOverflowBounds"),Ne("lazySink"),dn("overflowGroups",(function(){return mn([])}))].concat(cT())),lT=r([xf({factory:eT,schema:Z_(),name:"primary"}),wf({schema:Z_(),name:"overflow"}),wf({name:"overflow-button"}),wf({name:"overflow-group"})]),fT=r([mu(["toggledClass"]),Ne("lazySink"),Ye("fetch"),tn("getBounds"),en("fireDismissalEventInstead",[nn("event",Lo())]),Kc()]),dT=r([wf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ac([Bg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),wf({factory:eT,schema:Z_(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:ac([ug.config({mode:"cyclic",onEscape:function(e){return Ff(e,t,"button").each(bg.focus),k.none()}})])}}})]),mT=function(t,e){var n=Hx.getCoupled(t,"toolbarSandbox");Cl.isOpen(n)?Cl.close(n):Cl.open(n,e.toolbar())},gT=function(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();el.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:J_()}},e,r)},pT=function(t,e,n,o,r){eT.setGroups(e,r),gT(t,e,n,o),Bg.on(t)},hT=$f({name:"FloatingToolbarButton",factory:function(t,e,n,o){return d(d({},gp.sketch(d(d({},o.button()),{action:function(t){mT(t,o)},buttonBehaviours:Xl({dump:o.button().buttonBehaviours},[Hx.config({others:{toolbarSandbox:function(e){return o=e,r=n,i=t,{dom:{tag:"div",attributes:{id:(a=Qa()).id}},behaviours:ac([ug.config({mode:"special",onEscape:function(t){return Cl.close(t),k.some(!0)}}),Cl.config({onOpen:function(t,e){i.fetch().get((function(t){pT(o,e,i,r.layouts,t),a.link(o.element),ug.focusIn(e)}))},onClose:function(){Bg.off(o),bg.focus(o),a.unlink(o.element)},isPartOf:function(t,e,n){return tu(e,n)||tu(o,n)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),dc.config({channels:d(d({},Dl(d({isExtraPart:s},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Bl({doReposition:function(){Cl.getState(Hx.getCoupled(o,"toolbarSandbox")).each((function(t){gT(o,t,i,r.layouts)}))}}))})])};var o,r,i,a}}})])}))),{apis:{setGroups:function(e,o){Cl.getState(Hx.getCoupled(e,"toolbarSandbox")).each((function(r){pT(e,r,t,n.layouts,o)}))},reposition:function(e){Cl.getState(Hx.getCoupled(e,"toolbarSandbox")).each((function(o){gT(e,o,t,n.layouts)}))},toggle:function(t){mT(t,o)},getToolbar:function(t){return Cl.getState(Hx.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return Cl.isOpen(Hx.getCoupled(t,"toolbarSandbox"))}}})},configFields:fT(),partFields:dT(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),vT=r([Ne("items"),mu(["itemSelector"]),Wl("tgroupBehaviours",[ug])]),bT=r([Cf({name:"items",unit:"item"})]),yT=$f({name:"ToolbarGroup",configFields:vT(),partFields:bT(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.tgroupBehaviours,[ug.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),xT=function(t){return W(t,(function(t){return ha(t)}))},wT=function(t,e,n){uT(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){hT.setGroups(t,xT(o))}))}))},ST=$f({name:"SplitFloatingToolbar",configFields:sT(),partFields:lT(),factory:function(t,e,n,o){var r=pp(hT.sketch({fetch:function(){return kx((function(e){e(xT(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[ju,zu]},onRtl:function(){return[zu,ju]},onBottomLtr:function(){return[Nu,Lu]},onBottomRtl:function(){return[Lu,Nu]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.splitToolbarBehaviours,[Hx.config({others:{overflowGroup:function(){return yT.sketch(d(d({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(W(n,e.getSystem().build)),wT(e,r,t)},refresh:function(e){return wT(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){hT.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(hT.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){hT.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(hT.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),CT=function(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))},kT=function(t){return t.dimension.property},OT=function(t,e){return t.dimension.getDimension(e)},_T=function(t,e){var n=CT(t,e);Ni(n,[e.shrinkingClass,e.growingClass])},TT=function(t,e){zi(t.element,e.openClass),Vi(t.element,e.closedClass),$i(t.element,kT(e),"0px"),oa(t.element)},DT=function(t,e){zi(t.element,e.closedClass),Vi(t.element,e.openClass),na(t.element,kT(e))},ET=function(t,e,n,o){n.setCollapsed(),$i(t.element,kT(e),OT(e,t.element)),oa(t.element),_T(t,e),TT(t,e),e.onStartShrink(t),e.onShrunk(t)},BT=function(t,e,n,o){var r=o.getOrThunk((function(){return OT(e,t.element)}));n.setCollapsed(),$i(t.element,kT(e),r),oa(t.element);var i=CT(t,e);zi(i,e.growingClass),Vi(i,e.shrinkingClass),TT(t,e),e.onStartShrink(t)},AT=function(t,e,n){var o=OT(e,t.element);("0px"===o?ET:BT)(t,e,n,k.some(o))},IT=function(t,e,n){var o=CT(t,e),r=ji(o,e.shrinkingClass),i=OT(e,t.element);DT(t,e);var a=OT(e,t.element);(r?function(){$i(t.element,kT(e),i),oa(t.element)}:function(){TT(t,e)})(),zi(o,e.shrinkingClass),Vi(o,e.growingClass),DT(t,e),$i(t.element,kT(e),a),n.setExpanded(),e.onStartGrow(t)},MT=function(t,e,n){var o=CT(t,e);return!0===ji(o,e.growingClass)},FT=function(t,e,n){var o=CT(t,e);return!0===ji(o,e.shrinkingClass)},RT=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(na(t.element,kT(e)),o=OT(e,t.element),$i(t.element,kT(e),o))},grow:function(t,e,n){n.isExpanded()||IT(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&AT(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&ET(t,e,n,k.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:MT,isShrinking:FT,isTransitioning:function(t,e,n){return MT(t,e)||FT(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?AT:IT)(t,e,n)},disableTransitions:_T}),PT=Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return ki(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Qt(e.dimension.property,"0px")})},events:function(t,e){return er([lr(xo(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(_T(n,t),e.isExpanded()&&na(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),VT=[Ne("closedClass"),Ne("openClass"),Ne("shrinkingClass"),Ne("growingClass"),Ke("getAnimationRoot"),pu("onShrunk"),pu("onStartShrink"),pu("onGrown"),pu("onStartGrow"),nn("expanded",!1),Ue("dimension",Ie("property",{width:[yu("property","width"),yu("getDimension",(function(t){return Ta(t)+"px"}))],height:[yu("property","height"),yu("getDimension",(function(t){return ya(t)+"px"}))]}))],HT=cc({fields:VT,name:"sliding",active:PT,apis:RT,state:Object.freeze({__proto__:null,init:function(t){var e=mn(t.expanded);return Si({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:a(e.set,!1),setExpanded:a(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),zT=r([mu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),pu("onOpened"),pu("onClosed")].concat(cT())),jT=r([xf({factory:eT,schema:Z_(),name:"primary"}),xf({factory:eT,schema:Z_(),name:"overflow",overrides:function(t){return{toolbarBehaviours:ac([HT.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Ff(e,t,"overflow-button").each((function(t){Bg.off(t),bg.focus(t)})),t.onClosed(e)},onGrown:function(e){ug.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Ff(e,t,"overflow-button").each(Bg.on)}}),ug.config({mode:"acyclic",onEscape:function(e){return Ff(e,t,"overflow-button").each(bg.focus),k.some(!0)}})])}}}),wf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:ac([Bg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),wf({name:"overflow-group"})]),LT=function(t,e){Ff(t,e,"overflow-button").bind((function(){return Ff(t,e,"overflow")})).each((function(n){NT(t,e),HT.toggleGrow(n)}))},NT=function(t,e){Ff(t,e,"overflow").each((function(n){uT(t,e,(function(t){var e=W(t,(function(t){return ha(t)}));eT.setGroups(n,e)})),Ff(t,e,"overflow-button").each((function(t){HT.hasGrown(n)&&Bg.on(t)})),HT.refresh(n)}))},UT=$f({name:"SplitSlidingToolbar",configFields:zT(),partFields:jT(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.splitToolbarBehaviours,[Hx.config({others:{overflowGroup:function(t){return yT.sketch(d(d({},o["overflow-group"]()),{items:[gp.sketch(d(d({},o["overflow-button"]()),{action:function(e){$o(t,r)}}))]}))}}}),mg("toolbar-toggle-events",[rr(r,(function(e){LT(e,t)}))])]),apis:{setGroups:function(e,n){var o;o=W(n,e.getSystem().build),t.builtGroups.set(o),NT(e,t)},refresh:function(e){return NT(e,t)},toggle:function(e){return LT(e,t)},isOpen:function(e){return Ff(e,t,"overflow").map(HT.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),WT=r(ii("toolbar-height-change")),GT=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:d({tag:"div",classes:["tox-toolbar__group"]},e),components:[yT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ac([$y.config({}),bg.config({})])}},YT=function(t){return yT.sketch(GT(t))},qT=function(t,e){var n=fr((function(e){var n=W(t.initGroups,YT);eT.setGroups(e,n)}));return ac([Xv(t.providers.isDisabled),Wv(),ug.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),mg("toolbar-events",[n])])},XT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":GT({title:k.none(),items:[]}),"overflow-button":qk({name:"more",icon:k.some("more-drawer"),disabled:!1,tooltip:k.some("More..."),primary:!1,borderless:!1},k.none(),t.providers)},splitToolbarBehaviours:qT(t,e)}},$T=function(t){var e=XT(t),n=ST.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return ST.sketch(d(d({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=La(e),o=Cr(e),r=La(o),i=Math.max(o.dom.scrollHeight,r.height);return za(n.x+4,r.y,n.width-8,i)},parts:d(d({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},KT=function(t){var e=UT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=UT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=XT(t);return UT.sketch(d(d({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([WT()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([WT()],{type:"closed"})}}))},JT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return eT.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ih.scrolling?["tox-toolbar--scrolling"]:[])},components:[eT.parts.groups({})],toolbarBehaviours:qT(t,e)})},QT=de([We("type"),Ue("items",ge([Ce([We("name"),$e("items",Pe)]),Pe]))].concat(Wp)),ZT=[Ze("text"),Ze("tooltip"),Ze("icon"),Ye("fetch"),sn("onSetup",(function(){return n}))],tD=de(g([We("type")],ZT)),eD=function(t){return Te("menubutton",tD,t)},nD=de([We("type"),Ze("tooltip"),Ze("icon"),Ze("text"),tn("select"),Ye("fetch"),sn("onSetup",(function(){return n})),un("presets","normal",["normal","color","listpreview"]),nn("columns",1),Ye("onAction"),Ye("onItemAction")]),oD=Object.freeze({__proto__:null,events:function(t,e){var n=function(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=t(o,e.get()),i=W(r,n.getSystem().build);il(n,i)}))};return er([rr(To(),(function(e,o){var r,i=o;i.universal||(r=t.channel,j(i.channels,r)&&n(e,i.data))})),fr((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),rD=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),iD=[Ne("channel"),Ke("renderComponents"),Ke("updateState"),Ke("initialData")],aD=cc({fields:iD,name:"reflecting",active:oD,apis:rD,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(k.none())}}}})}),uD=r([Ne("toggleClass"),Ne("fetch"),vu("onExecute"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),Kc(),vu("onItemExecute"),Ke("lazySink"),Ne("dom"),pu("onOpen"),Wl("splitDropdownBehaviours",[Hx,ug,bg]),nn("matchWidth",!1),nn("useMinWidth",!1),nn("eventOrder",{}),Ke("role")].concat(nw())),cD=xf({factory:gp,schema:[Ne("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:ac([bg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(Jo)},buttonBehaviours:ac([Bg.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),sD=xf({factory:gp,schema:[Ne("dom")],name:"button",defaults:function(){return{buttonBehaviours:ac([bg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),lD=r([cD,sD,Sf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),wf({schema:[du()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),jx()]),fD=$f({name:"SplitDropdown",configFields:uD(),partFields:lD(),factory:function(t,e,o,r){var i,a=function(t){ed.getCurrent(t).each((function(t){dd.highlightFirst(t),ug.focusIn(t)}))},u=function(e){Kx(t,(function(t){return t}),e,r,a,vx.HighlightFirst).get(n)},c=function(e){var n=Rf(e,t,"button");return Jo(n),k.some(!0)},s=d(d({},er([fr((function(e,n){Ff(e,t,"aria-descriptor").each((function(t){var n=ii("aria");$r(t.element,"id",n),$r(e.element,"aria-describedby",n)}))}))])),Ig(k.some(u))),l={repositionMenus:function(t){Bg.isOn(t)&&ew(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:l,eventOrder:d(d({},t.eventOrder),((i={})[Do()]=["disabling","toggling","alloy.base.behaviour"],i)),events:s,behaviours:Yl(t.splitDropdownBehaviours,[Hx.config({others:{sandbox:function(e){var n=Rf(e,t,"arrow");return tw(t,e,{onOpen:function(){Bg.on(n),Bg.on(e)},onClose:function(){Bg.off(n),Bg.off(e)}})}}}),ug.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t){return u(t),k.some(!0)}}),bg.config({}),Bg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),dD=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},mD=function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},gD=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},pD=ii("focus-button"),hD=["checklist","ordered-list"],vD=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],bD=function(t,e,n,o,r,i){var a,u=function(t){return ev.isRtl()&&j(hD,t)?t+"-rtl":t},c=ev.isRtl()&&t.exists((function(t){return j(vD,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:gD(n,i)},components:Zv([t.map((function(t){return Ek(u(t),i.icons)})),e.map((function(t){return Ak(t,"tox-tbtn",i)}))]),eventOrder:((a={})[uo()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:ac([Xv(i.isDisabled),Wv(),mg("common-button-display-events",[rr(uo(),(function(t,e){e.event.prevent(),$o(t,pD)}))])].concat(o.map((function(n){return aD.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return Zv([t.icon.map((function(t){return Ek(u(t),i.icons)})),t.text.map((function(t){return Ak(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}},yD=function(t,e,o){var r,i=mn(n),a=bD(t.icon,t.text,t.tooltip,k.none(),k.none(),o);return gp.sketch({dom:a.dom,components:a.components,eventOrder:Mk,buttonBehaviours:ac([mg("toolbar-button-events",[(r={onAction:t.onAction,getApi:e.getApi},gr((function(t,e){$v(r,t)((function(e){Ko(t,Ik,{buttonApi:e}),r.onAction(e)}))}))),Kv(e,i),Jv(e,i)]),Xv((function(){return t.disabled||o.isDisabled()})),Wv()].concat(e.toolbarButtonBehaviours))})},xD=function(t,e,n){return yD(t,{toolbarButtonBehaviours:[].concat(0<n.length?[mg("toolbarButtonWith",n)]:[]),getApi:dD,onSetup:t.onSetup},e)},wD=function(t,e,n){return Lt(yD(t,{toolbarButtonBehaviours:[dg.config({}),Bg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[mg("toolbarToggleButtonWith",n)]:[]),getApi:mD,onSetup:t.onSetup},e))},SD=function(t,e){var o,r,i,a,u=ii("channel-update-split-dropdown-display"),c=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)},setIconFill:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){$r(t,"fill",n)}))},setIconStroke:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){$r(t,"stroke",n)}))},setActive:function(e){$r(t.element,"aria-pressed",e),Ka(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Bg.set(t,e)}))}))},isActive:function(){return Ka(t.element,"span").exists((function(e){return t.getSystem().getByDom(e).exists(Bg.isOn)}))}}},l=mn(n),f={getApi:c,onSetup:t.onSetup};return fD.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:d({"aria-pressed":!1},gD(t.tooltip,e.providers))},onExecute:function(e){t.onAction(c(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:ac([qv(e.providers.isDisabled),Wv(),mg("split-dropdown-events",[rr(pD,bg.focus),Kv(f,l),Jv(f,l)]),aw.config({})]),eventOrder:((o={})[zo()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:(r=c,i=t,a=e.providers,function(t){return kx((function(t){return i.fetch(t)})).map((function(e){return k.from(wy(Lt(ty(ii("menu-value"),e,(function(e){i.onItemAction(r(t),e)}),i.columns,i.presets,uh.CLOSE_ON_EXECUTE,i.select.getOr(s),a),{movement:ny(i.columns,i.presets),menuBehaviours:Gh("auto"!==i.columns?[]:[fr((function(t,e){Uh(t,4,bh(i.presets)).each((function(e){var n=e.numRows,o=e.numColumns;ug.setGridSize(t,n,o)}))}))])})))}))}),parts:{menu:Sh(0,t.columns,t.presets)},components:[fD.parts.button(bD(t.icon,t.text,k.none(),k.some(u),k.some([Bg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),fD.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:vp("chevron-down",e.providers.icons)},buttonBehaviours:ac([qv(e.providers.isDisabled),Wv()])}),fD.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},CD=function(t,e){return rr(Ik,(function(n,o){var r,i=t.get(n),a=(r=i,{hide:function(){return $o(r,Io())},getValue:function(){return Ul.getValue(r)}});e.onAction(a,o.event.buttonApi)}))},kD=function(t,e,o){var r,i,a,u,c,s,l,f,g,p,h,v,b={backstage:{shared:{providers:o}}};return"contextformtogglebutton"===e.type?(l=t,g=b,(p=(f=e).original).primary,h=m(p,["primary"]),v=De($p(d(d({},h),{type:"togglebutton",onAction:n}))),wD(v,g.backstage.shared.providers,[CD(l,f)])):(r=t,a=b,(u=(i=e).original).primary,c=m(u,["primary"]),s=De(Yp(d(d({},c),{type:"button",onAction:n}))),xD(s,a.backstage.shared.providers,[CD(r,i)]))},OD=function(t,e){var n,o,r,i,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=pp(gx.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ac([ug.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return Jo(t),!0}))},onLeft:function(t,e){return e.cut(),k.none()},onRight:function(t,e){return e.cut(),k.none()}})])})),s=(n=c,o=t.commands,r=e,i=W(o,(function(t){return pp(kD(n,t,r))})),{asSpecs:function(){return W(i,(function(t){return t.asSpec()}))},findPrimary:function(t){return ct(o,(function(e,n){return e.primary?k.from(i[n]).bind((function(e){return e.getOpt(t)})).filter(u(pv.isDisabled)):k.none()}))}});return[{title:k.none(),items:[c.asSpec()]},{title:k.none(),items:s.asSpecs()}]},_D=OD,TD=function(t,e){var n,o,r,i,a,u=Ra(window),c=ja(pn.fromDom(t.getContentAreaContainer())),s=Cv(t)||kv(t)||_v(t),l=(n=c,o=u,r=Math.max(o.x,n.x),i=n.right-r,a=o.width-(r-o.x),{x:r,width:Math.min(i,a)}),f=l.x,d=l.width;if(t.inline&&!s)return za(f,u.y,d,u.height);var m=function(t,e,n,o){var r=pn.fromDom(t.getContainer()),i=Ka(r,".tox-editor-header").getOr(r),a=ja(i),u=a.y>=e.bottom,c=o&&!u;if(t.inline&&c)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var s=ja(r);return c?{y:Math.max(a.bottom,n.y),bottom:Math.min(s.bottom,n.bottom)}:{y:Math.max(s.y,n.y),bottom:Math.min(a.y,n.bottom)}}(t,c,u,e.header.isPositionedAtTop()),g=m.y,p=m.bottom;return za(f,g,d,p-g)},DD=function(t,e){var n=q(e,(function(e){return e.predicate(t.dom)})),o=Y(n,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},ED=function(t,e,n){var o=DD(t,e);if(0<o.contextForms.length)return k.some({elem:t,toolbars:[o.contextForms[0]]});var r=DD(t,n);if(0<r.contextForms.length)return k.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;var e=function(e){return L(t,(function(t){return t.position===e}))},n=function(e){return q(t,(function(t){return t.position===e}))},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),a=W(n("selection"),(function(t){return d(d({},t),{position:"node"})}));return i.concat(a)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return k.some({elem:t,toolbars:i})}return k.none()},BD=function(t,e,n){return t(e)?k.none():Jn(e,(function(t){var e=DD(t,n.inNodeScope),o=e.contextToolbars,r=e.contextForms,i=0<r.length?r:function(t){if(t.length<=1)return t;var e=function(e){return K(t,(function(t){return t.position===e}))};return e("selection").orThunk((function(){return e("node")})).orThunk((function(){return e("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(e){return q(t,(function(t){return t.position===e}))}))}(o);return 0<i.length?k.some({elem:t,toolbars:i}):k.none()}),t)},AD=function(t,e){var n={},o=[],r=[],i={},a={},u=function(t,u){var c=De(Te("ContextForm",nh,u));(n[t]=c).launch.map((function(n){i["form:"+t]=d(d({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(c)}})})),"editor"===c.scope?r.push(c):o.push(c),a[t]=c},c=function(t,e){Te("ContextToolbar",oh,e).each((function(n){"editor"===e.scope?r.push(n):o.push(n),a[t]=n}))},s=_t(t);return G(s,(function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&c(e,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:a,formNavigators:i}},ID=ii("forward-slide"),MD=ii("backward-slide"),FD=ii("change-slide-event"),RD="tox-pop--resizing",PD=function(t,e,n){var o,r,i,a,u,c=n.dataset,s="basic"===c.type?function(){return W(c.data,(function(t){return x_(t,n.isSelectedFor,n.getPreviewFor)}))}:c.getData;return{items:(o=e,r=n,i=function(t,e,n,i){var u=o.shared.providers.translate(t.title);if("separator"===t.type)return k.some({type:"separator",text:u});if("submenu"!==t.type)return k.some(d({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(i),disabled:n,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))));var c=Z(t.getStyleItems(),(function(t){return a(t,e,i)}));return 0===e&&c.length<=0?k.none():k.some({type:"nestedmenuitem",text:u,disabled:c.length<=0,getSubmenuItems:function(){return Z(t.getStyleItems(),(function(t){return a(t,e,i)}))}})},a=function(t,e,n){var o="formatter"===t.type&&r.isInvalid(t);return 0===e?o?[]:i(t,e,!1,n).toArray():i(t,e,o,n).toArray()},{validateItems:u=function(t){var e=r.getCurrentValue(),n=r.shouldHide?0:1;return Z(t,(function(t){return a(t,n,e)}))},getFetch:function(t,e){return function(n,o){var r=e(),i=u(r);o(Nk(i,uh.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:s}},VD=function(t,e,o){var r=PD(0,e,o),i=r.items,a=r.getStyleItems;return Pk({text:o.icon.isSome()?k.none():k.some(""),icon:o.icon,tooltip:k.from(o.tooltip),role:k.none(),fetch:i.getFetch(e,a),onSetup:function(e){return o.setInitialValue.each((function(t){return t(e.getComponent())})),o.nodeChangeHandler.map((function(n){var o=n(e.getComponent());return t.on("NodeChange",o),function(){t.off("NodeChange",o)}})).getOr(n)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};(CO=SO=SO||{})[CO.SemiColon=0]="SemiColon",CO[CO.Space=1]="Space";var HD,zD,jD,LD,ND,UD,WD=function(t,e,n,o){var r,i,a=t.getParam(e,n,"string");return{type:"basic",data:(i=a,r=o===SO.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),W(r,(function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}})))}},GD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],YD=function(t){var e=function(e){var n=K(GD,(function(e){return t.formatter.match(e.format)})).fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));Ko(e,Rk,{icon:"align-"+n})},n=k.some((function(t){return function(){return e(t)}})),o=k.some(e),r={type:"basic",data:GD};return{tooltip:"Align",icon:k.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(t){return function(){return k.none()}},onAction:function(e){return function(){return K(GD,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},qD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],XD=function(t){var e=t.split(/\s*,\s*/);return W(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},$D=function(t){var e;return 0===t.indexOf("-apple-system")&&(e=XD(t.toLowerCase()),tt(qD,(function(t){return-1<e.indexOf(t.toLowerCase())})))},KD=function(t){var e=function(){var e=function(t){return t?XD(t)[0]:""},n=t.queryCommandValue("FontName"),o=i.data,r=n?n.toLowerCase():"";return{matchOpt:K(o,(function(t){var n=t.format;return n.toLowerCase()===r||e(n).toLowerCase()===e(r).toLowerCase()})).orThunk((function(){return $D(r)?k.from({title:"System Font",format:r}):k.none()})),font:n}},n=function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,Fk,{text:i})},o=k.some((function(t){return function(){return n(t)}})),r=k.some(n),i=WD(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",SO.SemiColon);return{tooltip:"Fonts",icon:k.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return k.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},setInitialValue:r,nodeChangeHandler:o,dataset:i,shouldHide:!1,isInvalid:s}},JD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},QD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZD=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):Rt(QD,t).getOr(t);var n,o,r},tE=function(t){var e=function(){var e=k.none(),n=u.data,o=t.queryCommandValue("FontSize");if(o)for(var r=function(t){var r=ZD(o,t),i=Rt(JD,r).getOr("");e=K(n,(function(t){return t.format===o||t.format===r||t.format===i}))},i=3;e.isNone()&&0<=i;i--)r(i);return{matchOpt:e,size:o}},n=r(k.none),o=function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,Fk,{text:i})},i=k.some((function(t){return function(){return o(t)}})),a=k.some(o),u=WD(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",SO.Space);return{tooltip:"Font sizes",icon:k.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},setInitialValue:a,nodeChangeHandler:i,dataset:u,shouldHide:!1,isInvalid:s}},eE=function(t,e){var n=e(),o=W(n,(function(t){return t.format}));return k.from(t.formatter.closest(o)).bind((function(t){return K(n,(function(e){return e.format===t}))})).orThunk((function(){return Jf(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))},nE=function(t){var e=mn(k.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(k.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(k.some(t))}}},oE=function(){return nE((function(t){return t.destroy()}))},rE=function(){return nE((function(t){return t.unbind()}))},iE=function(t,e){return function(n){var o=rE(),r=function(){n.setActive(t.formatter.match(e));var r=t.formatter.formatChanged(e,n.setActive);o.set(r)};return t.initialized?r():t.on("init",r),o.clear}},aE=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},uE=function(t){var e=function(e){var n=eE(t,(function(){return r.data})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,Fk,{text:n})},n=k.some((function(t){return function(){return e(t)}})),o=k.some(e),r=WD(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",SO.SemiColon);return{tooltip:"Blocks",icon:k.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:aE(t),setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},cE=function(t,e){var n=function(e){var n=function t(e){var n=e.items;return void 0!==n&&0<n.length?Z(n,t):[{title:e.title,format:e.format}]},o=Z(y_(t),n),r=eE(t,(function(){return o})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,Fk,{text:r})},o=k.some((function(t){return function(){return n(t)}})),r=k.some(n);return{tooltip:"Formats",icon:k.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):k.none()}},onAction:aE(t),setInitialValue:r,nodeChangeHandler:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},sE=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],lE=function(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return Be(t)})).getOrDie();return e(i,o,r)}},fE={button:lE(Yp,(function(t,e){return n=t,o=e.backstage.shared.providers,xD(n,o,[]);var n,o})),togglebutton:lE($p,(function(t,e){return n=t,o=e.backstage.shared.providers,wD(n,o,[]);var n,o})),menubutton:lE(eD,(function(t,e){return Wk(t,"tox-tbtn",e.backstage,k.none())})),splitbutton:lE((function(t){return Te("SplitButton",nD,t)}),(function(t,e){return SD(t,e.backstage.shared)})),grouptoolbarbutton:lE((function(t){return Te("GroupToolbarButton",QT,t)}),(function(t,e,n){var o,r,i,a,u,c,s=n.ui.registry.getAll().buttons,l=((o={})[Xc]=e.backstage.shared.header.isPositionedAtTop()?nu.TopToBottom:nu.BottomToTop,o);switch(Ev(n)){case ih.floating:return r=t,i=e.backstage,a=function(t){return pE(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,k.none())},u=l,c=i.shared,hT.sketch({lazySink:c.getSink,fetch:function(){return kx((function(t){t(W(a(r.items),YT))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:bD(r.icon,r.text,r.tooltip,k.none(),k.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:u}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=d({type:"advanced"},o.styleselect),VD(n,o,cE(n,r));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,VD(n,o,tE(n));var n,o},fontSelectButton:function(t,e){return n=t,o=e.backstage,VD(n,o,KD(n));var n,o},formatButton:function(t,e){return n=t,o=e.backstage,VD(n,o,uE(n));var n,o},alignMenuButton:function(t,e){return n=t,o=e.backstage,VD(n,o,YD(n));var n,o}},dE={styleselect:fE.styleSelectButton,fontsizeselect:fE.fontsizeSelectButton,fontselect:fE.fontSelectButton,formatselect:fE.formatButton,align:fE.alignMenuButton},mE=function(t){var e,n,o,r=t.toolbar,i=t.buttons;return!1===r?[]:void 0===r||!0===r?(n=i,o=W(sE,(function(t){var e=q(t.items,(function(t){return Pt(n,t)||Pt(dE,t)}));return{name:t.name,items:e}})),q(o,(function(t){return 0<t.items.length}))):T(r)?(e=r.split("|"),W(e,(function(t){return{items:t.trim().split(" ")}}))):R(r,(function(t){return Pt(t,"name")&&Pt(t,"items")}))?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},gE=function(t,e,n,o,r,i){return Rt(e,n.toLowerCase()).orThunk((function(){return i.bind((function(t){return ct(t,(function(t){return Rt(e,t+n.toLowerCase())}))}))})).fold((function(){return Rt(dE,n.toLowerCase()).map((function(e){return e(t,r)})).orThunk((function(){return k.none()}))}),(function(e){return"grouptoolbarbutton"!==e.type||o?(a=r,u=t,Rt(fE,(i=e).type).fold((function(){return console.error("skipping button defined by",i),k.none()}),(function(t){return k.some(t(i,a,u))}))):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),k.none());var i,a,u}))},pE=function(t,e,n,o){var r=mE(e),i=W(r,(function(r){var i=Z(r.items,(function(r){return 0===r.trim().length?[]:gE(t,e.buttons,r,e.allowToolbarGroups,n,o).toArray()}));return{title:k.from(t.translate(r.name)),items:i}}));return q(i,(function(t){return 0<t.items.length}))},hE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},vE={maxHeightFunction:Fc(),maxWidthFunction:J_()},bE={onLtr:function(){return[Uu,Wu,Lu,zu,Nu,ju,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Uu,Wu,Nu,ju,Lu,zu,fp,dp,lp,cp,sp,up]}},yE={onLtr:function(){return[Wu,zu,ju,Lu,Nu,Uu,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Wu,ju,zu,Nu,Lu,Uu,fp,dp,lp,cp,sp,up]}},xE=function(t,e,o,r){var i,a,u=Wn().deviceType.isTouch,c=pa((i={sink:o,onEscape:function(){return t.focus(),k.some(!0)}},a=mn([]),ep.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){a.set([]),ep.getContent(t).each((function(t){na(t.element,"visibility")})),zi(t.element,RD),na(t.element,"width")},inlineBehaviours:ac([mg("context-toolbar-events",[lr(xo(),(function(t,e){zi(t.element,RD),na(t.element,"width")})),rr(FD,(function(t,e){var n=t.element;na(n,"width");var o=Ta(n);ep.setContent(t,e.event.contents),Vi(n,RD);var r=Ta(n);$i(n,"width",o+"px"),ep.getContent(t).each((function(t){e.event.focus.bind((function(t){return gc(t),hc(n)})).orThunk((function(){return ug.focusIn(t),pc(Mr(n))}))})),mp.setTimeout((function(){$i(t.element,"width",r+"px")}),0)})),rr(ID,(function(t,e){ep.getContent(t).each((function(e){a.set(a.get().concat([{bar:e,focus:pc(Mr(t.element))}]))})),Ko(t,FD,{contents:e.event.forwardContents,focus:k.none()})})),rr(MD,(function(t,e){at(a.get()).each((function(e){a.set(a.get().slice(0,a.get().length-1)),Ko(t,FD,{contents:ha(e.bar),focus:e.focus})}))}))]),ug.config({mode:"special",onEscape:function(t){return at(a.get()).fold((function(){return i.onEscape()}),(function(e){return $o(t,MD),k.some(!0)}))}})]),lazySink:function(){return ft.value(i.sink)}}))),s=function(){return TD(t,r.backstage.shared)},l=function(){if(u()&&r.backstage.isContextMenuOpen())return!0;var e,n,o,i,a,c,l=(e=h.get().filter((function(t){return Wi(pn.fromDom(t))})).map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Ia().top:La(pn.fromDom(t.getBody())).y,{y:e.top+n,bottom:e.bottom+n}),f=s();return o=l.y,i=l.bottom,a=f.y,c=f.bottom,!(Math.max(o,a)<=Math.min(i,c))},f=function(){p.set(k.none()),ep.hide(c)},m=function(){ep.hide(c)},g=function(){p.get().each((function(t){var e=c.element;na(e,"display"),l()?$i(e,"display","none"):el.positionWithinBounds(o,t,c,k.some(s()))}))},p=mn(k.none()),h=mn(k.none()),v=mn(null),b=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:ac([ug.config({mode:"acyclic"}),mg("pop-dialog-wrap-events",[fr((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return ug.focusIn(e)}))})),dr((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},y=Ut((function(){return AD(e,(function(t){var e=x([t]);Ko(c,ID,{forwardContents:b(e)})}))})),x=function(e){var n=t.ui.registry.getAll().buttons,o=y(),i=d(d({},n),o.formNavigators),a=Ev(t)===ih.scrolling?ih.scrolling:ih["default"],u=Q(W(e,(function(e){return"contexttoolbar"===e.type?pE(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},r,k.some(["form:"])):(n=e,o=r.backstage.shared.providers,_D(n,o));var n,o})));return JT({type:a,uid:ii("context-toolbar"),initGroups:u,onEscape:k.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};t.on("contexttoolbar-show",(function(e){var n=y();Rt(n.lookupTable,e.toolbarKey).each((function(n){S([n],e.target===t?k.none():k.some(e)),ep.getContent(c).each(ug.focusIn)}))}));var w=function(t,e){var n,o,i="node"===t?r.backstage.shared.anchors.node(e):r.backstage.shared.anchors.cursor();return Lt(i,(n=t,o=u(),"line"===n?{bubble:zc(12,0,hE),layouts:{onLtr:function(){return[Gu]},onRtl:function(){return[Yu]}},overrides:vE}:{bubble:zc(0,12,hE),layouts:o?yE:bE,overrides:vE}))},S=function(t,e){var n,o,i,a;O(),u()&&r.backstage.isContextMenuOpen()||(n=x(t),o=e.map(pn.fromDom),i=w(t[0].position,o),p.set(k.some(i)),h.set(e),a=c.element,na(a,"display"),ep.showWithinBounds(c,i,b(n),(function(){return k.some(s())})),l()&&$i(a,"display","none"))},C=function(){var e,n,o,r,i,a,u;t.hasFocus()&&(e=y(),n=e,o=t,i=pn.fromDom(o.getBody()),a=function(t){return qn(t,i)},u=pn.fromDom(o.selection.getNode()),(a(r=u)||$n(i,r)?ED(u,n.inNodeScope,n.inEditorScope).orThunk((function(){return BD(a,u,n)})):k.none()).fold(f,(function(t){S(t.toolbars,k.some(t.elem.dom))})))},O=function(){var t=v.get();null!==t&&(mp.clearTimeout(t),v.set(null))},_=function(){O(),v.set(mp.setEditorTimeout(t,C,0))};t.on("init",(function(){t.on(Q_,m),t.on("ScrollContent ScrollWindow longpress",g),t.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){_()})),t.on("focusout",(function(e){mp.setEditorTimeout(t,(function(){hc(o.element).isNone()&&hc(c.element).isNone()&&f()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&f()})),t.on("AfterProgressState",(function(e){e.state?f():t.hasFocus()&&_()})),t.on("NodeChange",(function(t){hc(c.element).fold(_,n)}))}))},wE=Nf,SE=Of,CE=r([nn("shell",!1),Ne("makeItem"),nn("setupItem",n),ql("listBehaviours",[dg])]),kE=Sf({name:"items",overrides:function(){return{behaviours:ac([dg.config({})])}}}),OE=r([kE]),_E=$f({name:r("CustomList")(),configFields:CE(),partFields:OE(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[dg.config({})],components:[]}:{behaviours:[],components:e},i=function(e){return t.shell?k.some(e):Ff(e,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Yl(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){i(e).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=dg.contents(o),i=n.length,a=i-r.length,u=0<a?N(a,(function(){return t.makeItem()})):[],c=r.slice(i);G(c,(function(t){return dg.remove(o,t)})),G(u,(function(t){return dg.append(o,t)}));var s=dg.contents(o);G(s,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),TE=r([]),DE=Object.freeze({__proto__:null,setup:n,isDocked:s,getBehaviours:TE}),EE=function(t){return(ta(t,"position").is("fixed")?k.none():Tr(t)).orThunk((function(){var e=pn.fromTag("span");return Or(t).bind((function(t){Lr(t,e);var n=Tr(e);return Wr(e),n}))}))},BE=function(t){return EE(t).map(ka).getOrThunk((function(){return Sa(0,0)}))},AE=Ht([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),IE=function(t,e){var n=t.element;Vi(n,e.transitionClass),zi(n,e.fadeOutClass),Vi(n,e.fadeInClass),e.onShow(t)},ME=function(t,e){var n=t.element;Vi(n,e.transitionClass),zi(n,e.fadeInClass),Vi(n,e.fadeOutClass),e.onHide(t)},FE=function(t,e,n){return tt(t,(function(t){switch(t){case"bottom":return r=n,e.bottom<=r.bottom;case"top":return o=n,e.y>=o.y}var o,r}))},RE=function(t,e){return e.getInitialPosition().map((function(e){return za(e.bounds.x,e.bounds.y,Ta(t),ya(t))}))},PE=function(t,e,n){n.setInitialPosition(k.some({style:function(t){var e={},n=t.dom;if(Ui(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(t),position:Qi(t,"position")||"static",bounds:e}))},VE=function(t,e,n){return n.getInitialPosition().bind((function(o){switch(n.setInitialPosition(k.none()),o.position){case"static":return k.some(AE["static"]());case"absolute":var r=EE(t).map(ja).getOrThunk((function(){return ja(Gi())}));return k.some(AE.absolute(bc("absolute",Rt(o.style,"left").map((function(t){return e.x-r.x})),Rt(o.style,"top").map((function(t){return e.y-r.y})),Rt(o.style,"right").map((function(t){return r.right-e.right})),Rt(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return k.none()}}))},HE=function(t,e,n){var o,r,i,a=t.element;return ta(a,"position").is("fixed")?(r=e,RE(o=a,i=n).filter((function(t){return FE(i.getModes(),t,r)})).bind((function(t){return VE(o,t,i)}))):function(t,e,n){var o=ja(t);if(FE(n.getModes(),o,e))return k.none();PE(t,o,n);var r=Na(),i=o.x-r.x,a=e.y-r.y,u=r.bottom-e.bottom,c=o.y<=e.y;return k.some(AE.fixed(bc("fixed",k.some(i),c?k.some(a):k.none(),k.none(),c?k.none():k.some(u))))}(a,e,n)},zE=function(t,e){G(["left","right","top","bottom","position"],(function(e){return na(t.element,e)})),e.onUndocked(t)},jE=function(t,e,n){yc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},LE=function(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var a,u,c=(u=o,(a=i).y<u.bottom&&a.bottom>u.y);c!==n.isVisible()&&(n.setVisible(c),r&&!c?(Li(t.element,[e.fadeOutClass]),e.onHide(t)):(c?IE:ME)(t,e))}))}))},NE=function(t,e,o){var r,i,a=t.element;o.setDocked(!1),r=o,i=t.element,RE(i,r).bind((function(t){return VE(i,t,r)})).each((function(o){o.fold((function(){return zE(t,e)}),(function(n){return jE(t,e,n)}),n)})),o.setVisible(!0),e.contextual.each((function(e){Ni(a,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),UE(t,e,o)},UE=function(t,e,n){var o,r,i,a,u;t.getSystem().isConnected()&&(o=t,i=n,a=(r=e).lazyViewport(o),(u=i.isDocked())&&LE(o,r,i,a),HE(o,a,i).each((function(t){i.setDocked(!u),t.fold((function(){return zE(o,r)}),(function(t){return jE(o,r,t)}),(function(t){LE(o,r,i,a,!0),jE(o,r,t)}))})))},WE=function(t,e,n){n.isDocked()&&NE(t,e,n)},GE=Object.freeze({__proto__:null,refresh:UE,reset:WE,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),YE=Object.freeze({__proto__:null,events:function(t,e){return er([lr(xo(),(function(n,o){t.contextual.each((function(t){ji(n.element,t.transitionClass)&&(Ni(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()}))})),rr(Vo(),(function(n,o){UE(n,t,e)})),rr(Ho(),(function(n,o){WE(n,t,e)}))])}}),qE=[en("contextual",[We("fadeInClass"),We("fadeOutClass"),We("transitionClass"),Ye("lazyContext"),pu("onShow"),pu("onShown"),pu("onHide"),pu("onHidden")]),sn("lazyViewport",Na),ln("modes",["top","bottom"],Pe),pu("onDocked"),pu("onUndocked")],XE=cc({fields:qE,name:"docking",active:YE,apis:GE,state:Object.freeze({__proto__:null,init:function(t){var e=mn(!1),n=mn(!0),o=mn(k.none()),r=mn(t.modes);return Si({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),$E={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},KE="tox-tinymce--toolbar-sticky-on",JE="tox-tinymce--toolbar-sticky-off",QE=function(t){var e=t.element;Or(e).each((function(n){var o,r,i="padding-"+XE.getModes(t)[0];XE.isDocked(t)?(o=Ta(n),$i(e,"width",o+"px"),$i(n,i,xa(r=e)+(parseInt(Qi(r,"margin-top"),10)||0)+(parseInt(Qi(r,"margin-bottom"),10)||0)+"px")):(na(e,"width"),na(n,i))}))},ZE=function(t,e){e?(zi(t,$E.fadeOutClass),Li(t,[$E.transitionClass,$E.fadeInClass])):(zi(t,$E.fadeInClass),Li(t,[$E.fadeOutClass,$E.transitionClass]))},tB=function(t,e){var n=pn.fromDom(t.getContainer());e?(Vi(n,KE),zi(n,JE)):(Vi(n,JE),zi(n,KE))},eB=function(t,e){var n,o=mn(k.none()),r=e.getSink,i=function(t){r().each((function(e){return t(e.element)}))},a=function(e){t.inline||QE(e),tB(t,XE.isDocked(e)),e.getSystem().broadcastOn([Ol()],{}),r().each((function(t){return t.getSystem().broadcastOn([Ol()],{})}))},u=t.inline?[]:[dc.config({channels:((n={})[WT()]={onReceive:QE},n)})];return g([bg.config({}),XE.config({contextual:d({lazyContext:function(e){var n,o,r=xa(e.element),i=t.inline?t.getContentAreaContainer():t.getContainer(),a=ja(pn.fromDom(i)),u=a.height-r,c=a.y+(n=e,o="top",j(XE.getModes(n),o)?0:r);return k.some(za(a.x,c,a.width,u))},onShow:function(){i((function(t){return ZE(t,!0)}))},onShown:function(t){i((function(t){return Ni(t,[$E.transitionClass,$E.fadeInClass])})),o.get().each((function(e){var n,r,i;n=t.element,i=wr(r=e),pc(i).filter((function(t){return!qn(r,t)})).filter((function(t){return qn(t,pn.fromDom(i.dom.body))||$n(n,t)})).each((function(){return gc(r)})),o.set(k.none())}))},onHide:function(t){var e,n;o.set((e=t.element,n=r,hc(e).orThunk((function(){return n().toOptional().bind((function(t){return hc(t.element)}))})))),i((function(t){return ZE(t,!1)}))},onHidden:function(){i((function(t){return Ni(t,[$E.transitionClass])}))}},$E),modes:[e.header.getDockingMode()],onDocked:a,onUndocked:a})],u)},nB=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(XE.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(QE)})),t.on("SkinLoaded",(function(){n().each((function(t){XE.isDocked(t)?XE.reset(t):XE.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(XE.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){XE.refresh(e);var n,o,r,i,a,u,c,s,l,f,d,m,g,p,h,v,b,y=e.element;em(y)&&(n=t,i=wr(o=y),a=i.dom.defaultView.innerHeight,u=Ia(i),c=pn.fromDom(n.elm),s=La(c),l=ya(c),f=s.y,d=f+l,m=ka(o),g=ya(o),p=m.top,h=p+g,v=Math.abs(p-u.top)<2,b=Math.abs(h-(u.top+a))<2,v&&f<h?Ma(u.left,f-g,i):b&&p<d&&(r=f-a+l+g,Ma(u.left,r,i)))}))})),t.on("PostRender",(function(){tB(t,!1)}))},isDocked:function(t){return t().map(XE.isDocked).getOr(!1)},getBehaviours:eB}),oB=Xf({factory:function(t,e){var n={focus:ug.focusIn,setMenus:function(t,n){var o=W(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},o=eD(n).mapError((function(t){return Be(t)})).getOrDie();return Wk(o,"tox-mbtn",e.backstage,k.some("menuitem"))}));dg.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:ac([dg.config({}),mg("menubar-events",[fr((function(e){t.onSetup(e)})),rr(fo(),(function(t,e){Ka(t.element,".tox-mbtn--active").each((function(n){Ja(e.event.target,".tox-mbtn").each((function(e){qn(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){iw.expand(t),iw.close(n),bg.focus(t)}))}))}))}))})),rr(Uo(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){iw.isOpen(n)&&(iw.expand(t),iw.close(n))}))}))}))]),ug.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),k.some(!0)}}),$y.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ne("dom"),Ne("uid"),Ne("onEscape"),Ne("backstage"),nn("onSetup",n)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),rB="container",iB=[Wl("slotBehaviours",[])],aB=function(t){return"<alloy.field."+t+">"},uB=function(t,e){var n,o=function(e){return Hf(t)},r=function(e,n){return function(o,r){return Ff(o,t,r).map((function(t){return e(t,r)})).getOr(n)}},i=function(t,e){return"true"!==Kr(t.element,"aria-hidden")},a=r(i,!1),u=r((function(t,e){var n;i(t)&&(n=t.element,$i(n,"display","none"),$r(n,"aria-hidden","true"),Ko(t,Wo(),{name:e,visible:!1}))})),c=function(t,e){G(e,(function(e){return n(t,e)}))},s=r((function(t,e){var n;i(t)||(n=t.element,na(n,"display"),Zr(n,"aria-hidden"),Ko(t,Wo(),{name:e,visible:!0}))})),l={getSlotNames:o,getSlot:function(e,n){return Ff(e,t,n)},isShowing:a,hideSlot:n=u,hideAllSlots:function(t){return c(t,o())},showSlot:s};return{uid:t.uid,dom:t.dom,components:e,behaviours:Gl(t.slotBehaviours),apis:l}},cB=Et({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},xi),sB=d(d({},cB),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),Ef(rB,aB(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=W(r,(function(t){return xf({name:t,pname:aB(t)})}));return Wf(rB,iB,i,uB,o)}}),lB=de([Ze("icon"),Ze("tooltip"),sn("onShow",n),sn("onHide",n),sn("onSetup",(function(){return n}))]),fB=function(t){return{element:function(){return t.element.dom}}},dB=function(t,e){var o=W(_t(e),(function(t){var n=e[t],o=De(Te("sidebar",lB,n));return{name:t,getApi:fB,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return W(o,(function(e){var r=mn(n);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Gh([Kv(e,r),Jv(e,r),rr(Wo(),(function(t,e){var n=e.event;K(o,(function(t){return t.name===n.name})).each((function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},mB=function(t,e){ed.getCurrent(t).each((function(t){return dg.set(t,[(n=e,sB.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:dB(t,n),slotBehaviours:Gh([fr((function(t){return sB.hideAllSlots(t)}))])}})))]);var n}))},gB=function(t){return ed.getCurrent(t).bind((function(t){return HT.isGrowing(t)||HT.hasGrown(t)?ed.getCurrent(t).bind((function(t){return K(sB.getSlotNames(t),(function(e){return sB.isShowing(t,e)}))})):k.none()}))},pB=ii("FixSizeEvent"),hB=ii("AutoSizeEvent"),vB=function(t){var e,n,o,r=pn.fromHtml(t),i=Dr(r),a=(n=void 0!==(e=r).dom.attributes?e.dom.attributes:[],$(n,(function(t,e){var n;return"class"===e.name?t:d(d({},t),((n={})[e.name]=e.value,n))}),{})),u=(o=r,Array.prototype.slice.call(o.dom.classList,0)),c=0===i.length?{}:{innerHtml:Yr(r)};return d({tag:pr(r),classes:u,attributes:a},c)},bB=function(t,e,n){var o=t.element;!0===e?(dg.set(t,[{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:vB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:ac([ug.config({mode:"special",onTab:function(){return k.some(!0)},onShiftTab:function(){return k.some(!0)}}),bg.config({})])}]),na(o,"display"),Zr(o,"aria-hidden")):(dg.set(t,[]),$i(o,"display","none"),$r(o,"aria-hidden","true"))},yB=SE.optional({factory:oB,name:"menubar",schema:[Ne("backstage")]}),xB=SE.optional({factory:{sketch:function(t){return _E.sketch({uid:t.uid,dom:t.dom,listBehaviours:ac([ug.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return JT({type:t.type,uid:ii("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),k.some(!0)}})},setupItem:function(t,e,n,o){eT.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[Ne("dom"),Ne("onEscape")]}),wB=SE.optional({factory:{sketch:function(t){var e;return((e=t).type===ih.sliding?KT:e.type===ih.floating?$T:JT)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),k.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[Ne("dom"),Ne("onEscape"),Ne("getSink")]}),SB=SE.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?eB:TE;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ac(n(e,t.sharedBackstage))}}},name:"header",schema:[Ne("dom")]}),CB=SE.optional({name:"socket",schema:[Ne("dom")]}),kB=SE.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ac([$y.config({}),bg.config({}),HT.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){ed.getCurrent(t).each(sB.hideAllSlots),$o(t,hB)},onGrown:function(t){$o(t,hB)},onStartGrow:function(t){Ko(t,pB,{width:ta(t.element,"width").getOr("")})},onStartShrink:function(t){Ko(t,pB,{width:Ta(t.element)+"px"})}}),dg.config({}),ed.config({find:function(t){var e=dg.contents(t);return it(e)}})])}],behaviours:ac([sC(0),mg("sidebar-sliding-events",[rr(pB,(function(t,e){$i(t.element,"width",e.event.width)})),rr(hB,(function(t,e){na(t.element,"width")}))])])}}},name:"sidebar",schema:[Ne("dom")]}),OB=SE.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ac([dg.config({})]),components:[]}}},name:"throbber",schema:[Ne("dom")]}),_B=$f({name:"OuterContainer",factory:function(t,e,n){var o={getSocket:function(e){return wE.getPart(e,t,"socket")},setSidebar:function(e,n){wE.getPart(e,t,"sidebar").each((function(t){return mB(t,n)}))},toggleSidebar:function(e,n){wE.getPart(e,t,"sidebar").each((function(t){return e=t,o=n,void ed.getCurrent(e).each((function(t){ed.getCurrent(t).each((function(e){HT.hasGrown(t)?sB.isShowing(e,o)?HT.shrink(t):(sB.hideAllSlots(e),sB.showSlot(e,o)):(sB.hideAllSlots(e),sB.showSlot(e,o),HT.grow(t))}))}));var e,o}))},whichSidebar:function(e){return wE.getPart(e,t,"sidebar").bind(gB).getOrNull()},getHeader:function(e){return wE.getPart(e,t,"header")},getToolbar:function(e){return wE.getPart(e,t,"toolbar")},setToolbar:function(e,n){wE.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){wE.getPart(e,t,"multiple-toolbar").each((function(t){_E.setItems(t,n)}))},refreshToolbar:function(e){wE.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){wE.getPart(e,t,"toolbar").each((function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},void 0!==e&&null!==e?k.some(n(e)):k.none()}))},isToolbarDrawerToggled:function(e){return wE.getPart(e,t,"toolbar").bind((function(t){return k.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return wE.getPart(e,t,"throbber")},focusToolbar:function(e){wE.getPart(e,t,"toolbar").orThunk((function(){return wE.getPart(e,t,"multiple-toolbar")})).each((function(t){ug.focusIn(t)}))},setMenubar:function(e,n){wE.getPart(e,t,"menubar").each((function(t){oB.setMenus(t,n)}))},focusMenubar:function(e){wE.getPart(e,t,"menubar").each((function(t){oB.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:o,behaviours:t.behaviours}},configFields:[Ne("dom"),Ne("behaviours")],partFields:[SB,yB,wB,xB,CB,kB,OB],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=W(n,YT);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=W(n,(function(t){return W(t,YT)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),TB={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},DB=function(t){return"string"==typeof t?t.split(" "):t},EB=function(t,e){var n=d(d({},TB),e.menus),o=0<_t(e.menus).length,r=void 0===e.menubar||!0===e.menubar?DB("file edit view insert format tools table help"):DB(!1===e.menubar?"":e.menubar),i=q(r,(function(t){return o&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||TB.hasOwnProperty(t)})),a=W(i,(function(o){var r,i,a,u=n[o];return r={title:u.title,items:DB(u.items)},i=e,a=t.getParam("removed_menuitems","").split(/[ ,]/),{text:r.title,getItems:function(){return Z(r.items,(function(t){var e=t.toLowerCase();return 0===e.trim().length||L(a,(function(t){return t===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:i.menuItems[e]?[i.menuItems[e]]:[]}))}}}));return q(a,(function(t){return 0<t.getItems().length&&L(t.getItems(),(function(t){return"separator"!==t.type}))}))},BB=function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}},AB=function(t,e){return function(){return n={message:e},t.fire("SkinLoadError",n);var n}},IB=function(t,e,n){return new Fp((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))},MB=function(t,e){var n;return n=pn.fromDom(t.getElement()),Rr(n).isSome()?IB(t,e+"/skin.shadowdom.min.css",tv.DOM.styleSheetLoader):Fp.resolve()},FB=function(t,e){var n,o,r,i,a,u=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):hv.baseURL+"/skins/ui/"+o),i);u&&e.contentCSS.push(u+(t?"/content.inline":"/content")+".min.css"),0==(!1===e.getParam("skin"))&&T(u)?Fp.all([IB(a=e,u+"/skin.min.css",a.ui.styleSheetLoader),MB(e,u)]).then(BB(e),AB(e,"Skin could not be loaded")):BB(e)()},RB=a(FB,!1),PB=a(FB,!0),VB=function(t,e,n,o){var r,i=e.outerContainer,a=n.toolbar,u=n.buttons;R(a,T)?(r=a.map((function(e){var r={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return pE(t,r,{backstage:o},k.none())})),_B.setToolbars(i,r)):_B.setToolbar(i,pE(t,n,{backstage:o},k.none()))},HB=Wn(),zB=HB.os.isiOS()&&HB.os.version.major<=12,jB=function(t,e){var n=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=mn(Sa(o.innerWidth,o.innerHeight)),a=mn(Sa(r.offsetWidth,r.offsetHeight)),u=function(){var e=i.get();e.left===o.innerWidth&&e.top===o.innerHeight||(i.set(Sa(o.innerWidth,o.innerHeight)),Pb(t))},c=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(Sa(e.offsetWidth,e.offsetHeight)),Pb(t))},s=function(e){return n=e,t.fire("ScrollContent",n);var n};n.bind(o,"resize",u),n.bind(o,"scroll",s);var l=Oy(pn.fromDom(t.getBody()),"load",c),f=e.uiMothership.element;t.on("hide",(function(){$i(f,"display","none")})),t.on("show",(function(){na(f,"display")})),t.on("NodeChange",c),t.on("remove",(function(){l.unbind(),n.unbind(o,"resize",u),n.unbind(o,"scroll",s),o=null}))},LB=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=mn(0),a=e.outerContainer;RB(t);var u,c,s=pn.fromDom(r.targetNode),l=Fr(Mr(s));u=s,c=e.mothership,dl(u,c,zr),fl(l,e.uiMothership),t.on("PostRender",(function(){VB(t,e,n,o),i.set(t.getWin().innerWidth),_B.setMenubar(a,EB(t,n)),_B.setSidebar(a,n.sidebar),jB(t,e)}));var f,d,m,g,p,h=_B.getSocket(a).getOrDie("Could not find expected socket element");zB&&(Ki(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),m=function(){t.fire("ScrollContent")},g=20,p=null,f={cancel:function(){null!==p&&(clearTimeout(p),p=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===p&&(p=setTimeout((function(){m.apply(null,t),p=null}),g))}},d=ky(h.element,"scroll",f.throttle),t.on("remove",d.unbind)),Uv(t,e),t.addCommand("ToggleSidebar",(function(e,n){_B.toggleSidebar(a,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return _B.whichSidebar(a)}));var v=Ev(t);v!==ih.sliding&&v!==ih.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(_B.refreshToolbar(e.outerContainer),i.set(n))}));var b={enable:function(){Nv(e,!1)},disable:function(){Nv(e,!0)},isDisabled:function(){return pv.isDisabled(a)}};return{iframeContainer:h.element.dom,editorContainer:a.element.dom,api:b}}}),NB=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none()},UB=function(t){return F(t)?t+"px":t},WB=function(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return e<t}));return o.or(r).getOr(t)},GB=function(t){var e,n,o,r;return(n=vv(e=t),o=xv(e),r=Sv(e),NB(n).map((function(t){return WB(t,o,r)}))).getOr(vv(t))},YB=function(t){var e=bv(t),n=yv(t),o=wv(t);return NB(e).map((function(t){return WB(t,n,o)}))},qB=function(t,e,n,o,r){var i=n.uiMothership,a=n.outerContainer,u=tv.DOM,c=Pv(t),s=zv(t),l=wv(t).or(YB(t)),f=o.shared.header,d=f.isPositionedAtTop,m=Ev(t),g=m===ih.sliding||m===ih.floating,p=mn(!1),h=function(){return p.get()&&!t.removed},v=function(t){return g?t.fold((function(){return 0}),(function(t){return 1<t.components().length?ya(t.components()[1].element):0})):0},b=function(){i.broadcastOn([Ol()],{})},y=function(t){var n,o,i,u,f,m;void 0===t&&(t=!1),h()&&(c||(n=l.getOrThunk((function(){var t=NB(Qi(Gi(),"margin-left")).getOr(0);return Ta(Gi())-ka(e).left+t})),$i(r.get().element,"max-width",n+"px")),g&&_B.refreshToolbar(a),c||(o=_B.getToolbar(a),i=v(o),u=ja(e),f=d()?Math.max(u.y-ya(r.get().element)+i,0):u.bottom,Ki(a.element,{position:"absolute",top:Math.round(f)+"px",left:Math.round(u.x)+"px"})),s&&(m=r.get(),t?XE.reset(m):XE.refresh(m)),b())},x=function(n){var o,i;void 0===n&&(n=!0),!c&&s&&h()&&(o=f.getDockingMode(),(i=function(n){switch(Mv(t)){case Tv.auto:var o=_B.getToolbar(a),r=v(o),i=ya(n.element)-r,u=ja(e);if(u.y>i)return"top";var c=Cr(e),s=Math.max(c.dom.scrollHeight,ya(c));return u.bottom<s-i||Na().bottom<u.bottom-i?"bottom":"top";case Tv.bottom:return"bottom";case Tv.top:default:return"top"}}(r.get()))!==o&&(function(t){var e=r.get();XE.setModes(e,[t]),f.setDockingMode(t);var n=d()?nu.TopToBottom:nu.BottomToTop;$r(e.element,Xc,n)}(i),n&&y(!0)))};return{isVisible:h,isPositionedAtTop:d,show:function(){p.set(!0),$i(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),na(i.element,"display"),x(!1),y()},hide:function(){p.set(!1),n.outerContainer&&($i(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),$i(i.element,"display","none")},update:y,updateMode:x,repositionPopups:b}},XB=function(t,e){var n=ja(t);return{pos:e?n.y:n.bottom,bounds:n}},$B=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,c=mn(null),s=pn.fromDom(r.targetNode),l=qB(t,s,e,o,c),f=t.getParam("toolbar_persist",!1,"boolean");PB(t);var d=function(){var r;c.get()?l.show():(c.set(_B.getHeader(u).getOrDie()),r=Vv(t),fl(r,i),fl(r,a),VB(t,e,n,o),_B.setMenubar(u,EB(t,n)),l.show(),function(t,e,n,o){var r=mn(XB(e,n.isPositionedAtTop())),i=function(o){var i=XB(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,c=r.get(),s=c.pos,l=c.bounds,f=u.height!==l.height||u.width!==l.width;r.set({pos:a,bounds:u}),f&&Pb(t,o),n.isVisible()&&(s!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){mp.requestAnimationFrame((function(){return i(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var a=rE();a.set(Oy(pn.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){a.clear()}))}(t,s,l,f),t.nodeChanged())};t.on("show",d),t.on("hide",l.hide),f||(t.on("focus",d),t.on("blur",l.hide)),t.on("init",(function(){(t.hasFocus()||f)&&d()})),Uv(t,e);var m={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Nv(e,!1)},disable:function(){Nv(e,!0)},isDisabled:function(){return pv.isDisabled(u)}};return{editorContainer:u.element.dom,api:m}}}),KB=function(t,e){var n,o,r,i,a,u,c,s,l,f,m,g,p,h;r=PD(0,o=e,YD(n=t)),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}}),u=PD(0,a=e,KD(i=t)),i.ui.registry.addNestedMenuItem("fontformats",{text:a.shared.providers.translate("Fonts"),getSubmenuItems:function(){return u.items.validateItems(u.getStyleItems())}}),c=t,l=d({type:"advanced"},(s=e).styleselect),f=PD(0,s,cE(c,l)),c.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),g=PD(0,e,uE(m=t)),m.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return g.items.validateItems(g.getStyleItems())}}),h=PD(0,e,tE(p=t)),p.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return h.items.validateItems(h.getStyleItems())}})},JB={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},QB=(zD="[eE][+-]?[0-9]+",LD=["Infinity",(HD="[0-9]+")+"\\."+(jD=function(t){return"(?:"+t+")?"})(HD)+jD(zD),"\\."+HD+jD(zD),HD+jD(zD)].join("|"),new RegExp("^([+-]?(?:"+LD+"))(.*)$")),ZB=function(t,e){return k.from(QB.exec(t)).bind((function(t){var n,o=Number(t[1]),r=t[2];return n=r,L(e,(function(t){return L(JB[t],(function(t){return n===t}))}))?k.some({value:o,unit:r}):k.none()}))},tA=function(t){return ZB(t,["fixed","relative","empty"]).map((function(t){return t.value+t.unit})).getOr(t)},eA=function(t){var e=t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" "),n=new Map,o=oE(),r=function(){var e=tA(t.queryCommandValue("LineHeight"));k.from(n.get(e)).fold((function(){return o.clear()}),(function(t){o.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)}))};return t.on("nodeChange",r),W(e,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(tA(i),u),a+1===e.length&&r(),function(){0===a&&(t.off("nodeChange",r),o.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}}))},nA=function(t){var e,n;(e=t).ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return eA(e)}}),(n=t).ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(eA(n))}})},oA=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},rA=function(t){var e,n;!function(t){mC.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:iE(t,e.name),onAction:oA(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:iE(t,n),onAction:oA(t,n)})}}(t),e=t,mC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})),n=t,mC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:iE(n,t.name)})}))},iA=function(t){var e;rA(t),e=t,mC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:oA(e,"code")})},aA=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},uA=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return aA(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return aA(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return aA(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return aA(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},cA=function(t,e){var n,o,r,i;!function(t){mC.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:iE(t,e.name)})}));var e="alignnone",n="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(o)},icon:r})}(t),iA(t),KB(t,e),uA(t),function(t){Gb(t);var e=mn(null),n=mn(null);Jb(t,"forecolor","forecolor","Text color",e),Jb(t,"backcolor","hilitecolor","Background color",n),Qb(t,"forecolor","forecolor","Text color"),Qb(t,"backcolor","hilitecolor","Background color")}(t),(o=n=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return o.execCommand("mceToggleVisualAid")}}),(r=n).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(t,r)},onAction:function(){r.execCommand("mceToggleVisualAid")}}),(i=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(t,i)},onAction:function(){return i.execCommand("outdent")}}),i.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return i.execCommand("indent")}}),nA(t)},sA=function(t,e){return{anchor:"makeshift",x:t,y:e}},lA=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},fA=function(t,e){var n,o,r,i=tv.DOM.getPos(t);return n=e,o=i.x,r=i.y,sA(n.x+o,n.y+r)},dA=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(lA(t)){var e=t.touches[0];return sA(e.pageX,e.pageY)}return sA(t.pageX,t.pageY)}(e):fA(t.getContentAreaContainer(),function(t){if(lA(t)){var e=t.touches[0];return sA(e.clientX,e.clientY)}return sA(t.clientX,t.clientY)}(e)):mA(t)},mA=function(t){return{anchor:"selection",root:pn.fromDom(t.selection.getNode())}},gA=function(t){return{anchor:"node",node:k.some(pn.fromDom(t.selection.getNode())),root:pn.fromDom(t.getBody())}},pA=function(t,e,n,o,r,i){var a=n(),u=i?gA(t):dA(t,e);Nk(a,uh.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),ep.showMenuAt(r,u,{menu:{markers:xh("normal")},data:t})}))},hA={onLtr:function(){return[Wu,zu,ju,Lu,Nu,Uu,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Wu,ju,zu,Nu,Lu,Uu,fp,dp,lp,cp,sp,up]}},vA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bA=function(t,e,n,o,r,i,a){var u,c,s=i?gA(t):(u=t,c=e,d({bubble:zc(0,12,vA),layouts:hA,overrides:{maxWidthFunction:J_(),maxHeightFunction:Fc()}},dA(u,c)));Nk(n,uh.CLOSE_ON_EXECUTE,o,!0).map((function(n){e.preventDefault(),ep.showMenuWithinBounds(r,s,{menu:{markers:xh("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return k.some(TD(t,o.shared))})),t.fire(Q_)}))},yA=function(t,e,n,o,r,i){var a,u=Wn(),c=u.os.isiOS(),s=u.os.isOSX(),l=u.os.isAndroid(),f=u.deviceType.isTouch(),d=function(){var a=n();bA(t,e,a,o,r,i,!(l||c||s&&f))};!s&&!c||i?(l&&!i&&t.selection.setCursorLocation(e.target,0),d()):(a=function(){!function(t){var e=t.selection.getRng(),n=function(){mp.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(t),d()},function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Is(t.getWin(),ps.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)}))))},xA=function(t){return"string"==typeof t?t.split(/[ ,]/):t},wA=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},SA=function(t){return n="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(e=t).ui.registry.getAll().contextMenus,k.from(e.getParam(n)).map(xA).getOrThunk((function(){return q(xA(o),(function(t){return Pt(r,t)}))}));var e,n,o,r},CA=function(t){return T(t)?"|"===t:"separator"===t.type},kA={type:"separator"},OA=function t(e){if(T(e))return e;switch(e.type){case"separator":return kA;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var n=e.getSubmenuItems();return T(n)?n:W(n,t)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){return n()})}}var n},_A=function(t,e){if(0===e.length)return t;var n=at(t).filter((function(t){return!CA(t)})).fold((function(){return[]}),(function(t){return[kA]}));return t.concat(n).concat(e).concat([kA])},TA=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},DA=function(t,e){return TA(t,e)?t.selection.getStart(!0):e.target},EA=function(t,e,n){var o=Wn().deviceType.isTouch,r=pa(ep.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ac([mg("dismissContextMenu",[rr(Lo(),(function(e,n){Cl.close(e),t.focus()}))])])})),i=function(t){return ep.hide(r)},a=function(e){var i,a;wA(t)&&e.preventDefault(),i=t,e.ctrlKey&&!wA(i)||!1===t.getParam("contextmenu")||(a=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string");if(TA(t,e))return!0;if(n){var o=DA(t,e);return Ty(pn.fromDom(o),n)}return!1}(t,e),(o()?yA:pA)(t,e,(function(){var n,o,r,i=DA(t,e),a=t.ui.registry.getAll(),u=SA(t);return n=a.contextMenus,o=i,0<(r=$(u,(function(t,e){if(Pt(n,e)){var r=n[e].update(o);if(T(r))return _A(t,r.split(" "));if(0<r.length){var i=W(r,OA);return _A(t,i)}return t}return t.concat([e])}),[])).length&&CA(r[r.length-1])&&r.pop(),r}),n,r,a))};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,i),t.on("longpress contextmenu",a)}))},BA=Ht([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AA=function(t){return function(e){return e.translate(-t.left,-t.top)}},IA=function(t){return function(e){return e.translate(t.left,t.top)}},MA=function(t){return function(e,n){return $(t,(function(t,e){return e(t)}),Sa(e,n))}},FA=function(t,e,n){return t.fold(MA([IA(n),AA(e)]),MA([AA(e)]),MA([]))},RA=function(t,e,n){return t.fold(MA([IA(n)]),MA([]),MA([IA(e)]))},PA=function(t,e,n){return t.fold(MA([]),MA([AA(n)]),MA([IA(e),AA(n)]))},VA=function(t,e,n){var o=t.fold((function(t,e){return{position:k.some("absolute"),left:k.some(t+"px"),top:k.some(e+"px")}}),(function(t,e){return{position:k.some("absolute"),left:k.some(t-n.left+"px"),top:k.some(e-n.top+"px")}}),(function(t,e){return{position:k.some("fixed"),left:k.some(t+"px"),top:k.some(e+"px")}}));return d({right:k.none(),bottom:k.none()},o)},HA=function(t,e,n,o){var r=function(t,r){return function(i,a){var u=t(e,n,o);return r(i.getOr(u.left),a.getOr(u.top))}};return t.fold(r(PA,zA),r(RA,jA),r(FA,LA))},zA=BA.offset,jA=BA.absolute,LA=BA.fixed,NA=function(t,e){var n=Kr(t,e);return A(n)?NaN:parseInt(n,10)},UA=function(t,e,n,o){return r=e,i=t.element,a=NA(i,r.leftAttr),u=NA(i,r.topAttr),(isNaN(a)||isNaN(u)?k.none():k.some(Sa(a,u))).fold((function(){return n}),(function(t){return LA(t.left+o.left,t.top+o.top)}));var r,i,a,u},WA=function(t,e,n,o,r,i){var a,u,c,s=UA(t,e,n,o),l=(e.mustSnap?qA:XA)(t,e,s,r,i),f=FA(s,r,i);return a=e,u=f,c=t.element,$r(c,a.leftAttr,u.left+"px"),$r(c,a.topAttr,u.top+"px"),l.fold((function(){return{coord:LA(f.left,f.top),extra:k.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))},GA=function(t,e){var n,o;n=e,o=t.element,Zr(o,n.leftAttr),Zr(o,n.topAttr)},YA=function(t,e,n,o){return ct(t,(function(t){var r,i,a,u,c,s,l,f,d=t.sensor;return r=e,i=d,a=t.range.left,u=t.range.top,l=RA(r,c=n,s=o),f=RA(i,c,s),Math.abs(l.left-f.left)<=a&&Math.abs(l.top-f.top)<=u?k.some({output:HA(t.output,e,n,o),extra:t.extra}):k.none()}))},qA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return YA(i,n,o,r).orThunk((function(){return $(i,(function(t,e){var i,a,u,c,s,l,f,d,m=e.sensor,g=(i=n,a=m,e.range.left,e.range.top,s=RA(i,u=o,c=r),l=RA(a,u,c),f=Math.abs(s.left-l.left),d=Math.abs(s.top-l.top),Sa(f,d));return t.deltas.fold((function(){return{deltas:k.some(g),snap:k.some(e)}}),(function(n){return(g.left+g.top)/2<=(n.left+n.top)/2?{deltas:k.some(g),snap:k.some(e)}:t}))}),{deltas:k.none(),snap:k.none()}).snap.map((function(t){return{output:HA(t.output,n,o,r),extra:t.extra}}))}))},XA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return YA(i,n,o,r)},$A=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,a,u,c,s,l,f,d=e.getTarget(t.element);e.repositionTarget&&(r=wr(t.element),i=Ia(r),a=BE(d),l=i,f=a,u={coord:HA((s=o).output,s.output,l,f),extra:s.extra},c=VA(u.coord,0,a),Ji(d,c))}}),KA="data-initial-z-index",JA=function(t,e){var n;t.getSystem().addToGui(e),Or((n=e).element).filter(vr).each((function(t){ta(t,"z-index").each((function(e){$r(t,KA,e)})),$i(t,"z-index",Qi(n.element,"z-index"))}))},QA=function(t){Or(t.element).filter(vr).each((function(t){Jr(t,KA).fold((function(){return na(t,"z-index")}),(function(e){return $i(t,"z-index",e)})),Zr(t,KA)})),t.getSystem().removeFromGui(t)},ZA=function(t,e,n){return t.getSystem().build(Ny.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},tI=en("snaps",[Ne("getSnapPoints"),pu("onSensor"),Ne("leftAttr"),Ne("topAttr"),nn("lazyViewport",Na),nn("mustSnap",!1)]),eI=[nn("useFixed",s),Ne("blockerClass"),nn("getTarget",i),nn("onDrag",n),nn("repositionTarget",!0),nn("onDrop",n),sn("getBounds",Na),tI],nI=function(t){return e=ta(t,"left"),n=ta(t,"top"),o=ta(t,"position"),r=function(t,e,n){return("fixed"===n?LA:zA)(parseInt(t,10),parseInt(e,10))},(e.isSome()&&n.isSome()&&o.isSome()?k.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):k.none()).getOrThunk((function(){var e=ka(t);return jA(e.left,e.top)}));var e,n,o,r},oI=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,m,g,p,h=e.fold((function(){var t,e,a,u=(t=n,e=i.left,a=i.top,t.fold((function(t,n){return zA(t+e,n+a)}),(function(t,n){return jA(t+e,n+a)}),(function(t,n){return LA(t+e,n+a)}))),c=FA(u,o,r);return LA(c.left,c.top)}),(function(e){var a=WA(t,e,n,i,o,r);return a.extra.each((function(n){e.onSensor(t,n)})),a.coord}));return u=h,c=o,s=r,f=(l=a).bounds,d=RA(u,c,s),m=Tc(d.left,f.x,f.x+f.width-l.width),g=Tc(d.top,f.y,f.y+f.height-l.height),p=jA(m,g),u.fold((function(){var t=PA(p,c,s);return zA(t.left,t.top)}),(function(){return p}),(function(){var t=FA(p,c,s);return LA(t.left,t.top)}))},rI=function(t,e){return{bounds:t.getBounds(),height:xa(e.element),width:Da(e.element)}},iI=function(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk((function(){return rI(e,t)}));i.each((function(n){var o,r,i,u,c,s,l,f,d,m,g;o=t,i=a,u=n,g=(r=e).getTarget(o.element),r.repositionTarget&&(c=wr(o.element),s=Ia(c),l=BE(g),f=nI(g),d=oI(o,r.snaps,f,s,l,u,i),m=VA(d,0,l),Ji(g,m)),r.onDrag(o,g,u)}))},aI=function(t,e,n,o){e.each(QA),n.snaps.each((function(e){GA(t,e)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)},uI=function(t){return function(e,n){var o=function(t){n.setStartData(rI(e,t))};return er(g([rr(Vo(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o)))}},cI=Object.freeze({__proto__:null,getData:function(t){return k.from(Sa(t.x,t.y))},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),sI=function(t,e,n){return[rr(uo(),(function(o,r){var i,a,u,c,s;0===r.event.raw.button&&(r.stop(),u={drop:i=function(){return aI(o,k.some(c),t,e)},delayDrop:(a=Dy(i,200)).schedule,forceDrop:i,move:function(n){a.cancel(),iI(o,t,e,cI,n)}},c=ZA(o,t.blockerClass,(s=u,er([rr(uo(),s.forceDrop),rr(lo(),s.drop),rr(co(),(function(t,e){s.move(e.event)})),rr(so(),s.delayDrop)]))),n(o),JA(o,c))}))]},lI=g(eI,[yu("dragger",{handlers:uI(sI)})]),fI=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],k.some(Sa(e.clientX,e.clientY))):k.none()},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),dI=function(t,e,o){var r=mn(k.none());return[rr(oo(),(function(i,a){a.stop();var u,c=function(){aI(i,r.get(),t,e),r.set(k.none())},s={drop:c,delayDrop:n,forceDrop:c,move:function(n){iI(i,t,e,fI,n)}},l=ZA(i,t.blockerClass,(u=s,er([rr(oo(),u.forceDrop),rr(io(),u.drop),rr(ao(),u.drop),rr(ro(),(function(t,e){u.move(e.event)}))])));r.set(k.some(l)),o(i),JA(i,l)})),rr(ro(),(function(n,o){o.stop(),iI(n,t,e,fI,o.event)})),rr(io(),(function(n,o){o.stop(),aI(n,r.get(),t,e),r.set(k.none())})),rr(ao(),(function(n){aI(n,r.get(),t,e),r.set(k.none())}))]},mI=g(eI,[yu("dragger",{handlers:uI(dI)})]),gI=g(eI,[yu("dragger",{handlers:uI((function(t,e,n){return g(sI(t,e,n),dI(t,e,n))}))})]),pI=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:lI,touch:mI,mouseOrTouch:gI}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=k.none(),e=k.none(),n=r({});return Si({readState:n,reset:function(){t=k.none(),e=k.none()},update:function(e,n){return e.getData(n).bind((function(n){return o=e,r=n,i=t.map((function(t){return o.getDelta(t,r)})),t=k.some(r),i;var o,r,i}))},getStartData:function(){return e},setStartData:function(t){e=k.some(t)}})}}),apis:$A}),hI=function(t,e,n,o,r,i){return t.fold((function(){return pI.snap({sensor:jA(n-20,o-20),range:Sa(r,i),output:jA(k.some(n),k.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,a=t.element.dom.getBoundingClientRect();return pI.snap({sensor:jA(r,i),range:Sa(40,40),output:jA(k.some(n-a.width/2),k.some(o-a.height/2)),extra:{td:e}})}))},vI=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r,i,a=o.td;r=e.get(),i=a,r.exists((function(t){return qn(t,i)}))||(e.set(k.some(a)),n(a))},mustSnap:!0}},bI=function(t){return pp(gp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ac([pI.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),aw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},yI=function(t,e){var n=mn([]),o=mn([]),r=mn(!1),i=mn(k.none()),a=mn(k.none()),u=function(t){var n=La(t);return hI(f.getOpt(e),t,n.x,n.y,n.width,n.height)},c=function(t){var n=La(t);return hI(d.getOpt(e),t,n.right,n.bottom,n.width,n.height)},s=vI((function(){return W(n.get(),u)}),i,(function(e){a.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),l=vI((function(){return W(o.get(),c)}),a,(function(e){i.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=bI(s),d=bI(l),m=pa(f.asSpec()),g=pa(d.asSpec()),p=function(e,n,o,r){var i=o(n);pI.snapTo(e,i),function(e,n,o,r){var i=n.dom.getBoundingClientRect();na(e.element,"display");var a=kr(pn.fromDom(t.getBody())).dom.innerHeight,u=o(i),c=r(i,a);(u||c)&&$i(e.element,"display","none")}(e,n,(function(t){return t[r]<0}),(function(t,e){return t[r]>e}))},h=function(t){return p(m,t,u,"top")},v=function(t){return p(g,t,c,"bottom")};Wn().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){r.get()||(al(e,m),al(e,g),r.set(!0)),i.set(k.some(t.start)),a.set(k.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),o.set(e.downOrRightCells),h(t.start),v(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(h),a.get().each(v)})),t.on("TableSelectionClear",(function(){r.get()&&(sl(m),sl(g),r.set(!1)),i.set(k.none()),a.set(k.none())})))};(UD=ND=ND||{})[UD.None=0]="None",UD[UD.Both=1]="Both",UD[UD.Vertical=2]="Vertical";var xI,wI,SI,CI=function(t,e,n){var o,r,i,a,u,c,s=pn.fromDom(t.getContainer()),l=(o=t,r=e,i=n,a=ya(s),u=Ta(s),(c={}).height=WB(a+r.top,xv(o),Sv(o)),i===ND.Both&&(c.width=WB(u+r.left,yv(o),wv(o))),c);Dt(l,(function(t,e){return $i(s,e,UB(t)),0})),t.fire("ResizeEditor")},kI=function(t,e,n){return e.delimiter||(e.delimiter="»"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ac([ug.config({mode:"flow",selector:"div[role=button]"}),pv.config({disabled:n.isDisabled}),Wv(),$y.config({}),dg.config({}),mg("elementPathEvents",[fr((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return ug.focusIn(o)})),t.on("NodeChange",(function(r){var i,a,u=function(e){for(var n=[],o=e.length;0<o--;){var r=e[o];if(1===r.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(r.parents);0<u.length?dg.set(o,(i=W(u||[],(function(e,o){return gp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:ac([Yv(n.isDisabled),Wv()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},$(i.slice(1),(function(t,e){var n=t;return n.push(a),n.push(e),n}),[i[0]]))):dg.set(o,[])}))}))])]),components:[]}},OI=function(t,e){var n,o,r,i,a,u;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(a=function(){var n,o,r,i,a,u=[];return t.getParam("elementpath",!0,"boolean")&&u.push(kI(t,{},e)),t.hasPlugin("wordcount")&&u.push((n=t,o=e,i=function(t,e,n){return dg.set(t,[da(o.translate(["{0} "+n,e[n]]))])},gp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ac([Yv(o.isDisabled),Wv(),$y.config({}),dg.config({}),Ul.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),mg("wordcount-events",[gr((function(t){var e=Ul.getValue(t),n="words"===e.mode?"characters":"words";Ul.setValue(t,{mode:n,count:e.count}),i(t,e.count,n)})),fr((function(t){n.on("wordCountUpdate",(function(e){var n=Ul.getValue(t).mode;Ul.setValue(t,{mode:n,count:e.wordCount}),i(t,e.wordCount,n)}))}))])]),eventOrder:((r={})[Do()]=["disabling","alloy.base.behaviour","wordcount-events"],r)}))),t.getParam("branding",!0,"boolean")&&u.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(a=ev.translate(["Powered by {0}","Tiny"]))+'">'+a+"</a>"}}),0<u.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:u}]:[]}(),o=!(n=t).hasPlugin("autoresize"),(u=!1===(r=n.getParam("resize",o))?ND.None:"both"===r?ND.Both:ND.Vertical)!==ND.None&&a.push((i=u,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize"),"aria-hidden":"true"},innerHtml:vp("resize-handle",e.icons)},behaviours:ac([pI.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,n,o){CI(t,o,i)},blockerClass:"tox-blocker"})])})),a)}},_I=function(t){var e,o,r,i,a=t.inline,u=a?$B:LB,c=zv(t)?nB:DE,s=k.none(),l=Wn(),f=l.browser.isIE()?["tox-platform-ie"]:[],m=l.deviceType.isTouch()?["tox-platform-touch"]:[],g=Fv(t),p=Vv(t),h=ev.isRtl()?{attributes:{dir:"rtl"}}:{},v={attributes:((e={})[Xc]=g?nu.BottomToTop:nu.TopToBottom,e)},b=function(){return s.bind(_B.getHeader)},y=function(){$i(dt.element,"width",document.body.clientWidth+"px")},x=pa((o=qn(Gi(),p)&&"grid"===Qi(p,"display"),r={dom:d({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(m)},h),behaviours:ac([el.config({useFixed:function(){return c.isDocked(b)}})])},i={dom:{styles:{width:document.body.clientWidth+"px"}},events:er([rr(Ho(),y)])},Lt(r,o?i:{}))),w=function(){return ft.value(x)},S=pp({dom:{tag:"div",classes:["tox-anchorbar"]}}),C=function(){return s.bind((function(t){return _B.getThrobber(t)})).getOrDie("Could not find throbber element")},O=K_(x,t,(function(){return s.bind((function(t){return S.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),_=_B.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:O,onEscape:function(){t.focus()}}),T=Ev(t),D=_B.parts.toolbar(d({dom:{tag:"div",classes:["tox-toolbar"]},getSink:w,providers:O.shared.providers,onEscape:function(){t.focus()},type:T,lazyToolbar:function(){return s.bind((function(t){return _B.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return b().getOrDie("Could not find header element")}},v)),E=_B.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:O.shared.providers,onEscape:function(){t.focus()},type:T}),B=_B.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),A=_B.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),I=_B.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:O}),M=t.getParam("statusbar",!0,"boolean")&&!a?k.some(OI(t,O.shared.providers)):k.none(),R={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[B,A]},P=_v(t),V=kv(t),H=Cv(t),z=_B.parts.header({dom:d({tag:"div",classes:["tox-editor-header"]},v),components:Q([H?[_]:[],P?[E]:V?[D]:[],Pv(t)?[]:[S.asSpec()]]),sticky:zv(t),editor:t,sharedBackstage:O.shared}),j=Q([g?[]:[z],a?[]:[R],g?[z]:[]]),L=Q([[{dom:{tag:"div",classes:["tox-editor-container"]},components:j}],a?[]:M.toArray(),[I]]),N=Hv(t),U=d(d({role:"application"},ev.isRtl()?{dir:"rtl"}:{}),N?{"aria-hidden":"true"}:{}),W=pa(_B.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(g?["tox-tinymce--toolbar-bottom"]:[]).concat(m).concat(f),styles:d({visibility:"hidden"},N?{opacity:"0",border:"0"}:{}),attributes:U},components:L,behaviours:ac([Wv(),pv.config({disableClass:"tox-tinymce--disabled"}),ug.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));s=k.some(W);t.shortcuts.add("alt+F9","focus menubar",(function(){_B.focusMenubar(W)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){_B.focusToolbar(W)})),t.addCommand("ToggleToolbarDrawer",(function(){_B.toggleToolbarDrawer(W)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return _B.isToolbarDrawerToggled(W)}));var Y,q,X,$,K,J,Z,tt,et,nt,ot,rt,it,at,ut,ct,st,lt=Uy(W),dt=Uy(x);Y=t,q=lt,X=dt,$=function(t,e){G([q,X],(function(n){n.broadcastEvent(t,e)}))},K=function(t,e){G([q,X],(function(n){n.broadcastOn([t],e)}))},J=function(t){return K(kl(),{target:t.target})},Z=ky(pn.fromDom(document),"touchstart",J),tt=ky(pn.fromDom(document),"touchmove",(function(t){return $(Ro(),t)})),et=ky(pn.fromDom(document),"touchend",(function(t){return $(Po(),t)})),nt=ky(pn.fromDom(document),"mousedown",J),ot=ky(pn.fromDom(document),"mouseup",(function(t){0===t.raw.button&&K(_l(),{target:t.target})})),rt=function(t){return K(kl(),{target:pn.fromDom(t.target)})},it=function(t){0===t.button&&K(_l(),{target:pn.fromDom(t.target)})},at=function(t){return $(Vo(),_y(t))},ut=function(t){K(Ol(),{}),$(Ho(),_y(t))},ct=function(){return K(Ol(),{})},st=function(t){t.state&&K(kl(),{target:pn.fromDom(Y.getContainer())})},Y.on("PostRender",(function(){Y.on("click",rt),Y.on("tap",rt),Y.on("mouseup",it),Y.on("ScrollWindow",at),Y.on("ResizeWindow",ut),Y.on("ResizeEditor",ct),Y.on("AfterProgressState",st)})),Y.on("remove",(function(){Y.off("click",rt),Y.off("tap",rt),Y.off("mouseup",it),Y.off("ScrollWindow",at),Y.off("ResizeWindow",ut),Y.off("ResizeEditor",ct),Y.off("AfterProgressState",st),nt.unbind(),Z.unbind(),tt.unbind(),et.unbind(),ot.unbind()})),Y.on("detach",(function(){ml(q),ml(X),q.destroy(),X.destroy()}));var mt=function(){var e,n=UB(GB(t)),o=UB(YB(e=t).getOr(bv(e)));return t.inline||(ea("div","width",o)&&$i(W.element,"width",o),ea("div","height",n)?$i(W.element,"height",n):$i(W.element,"height","200px")),n};return{mothership:lt,uiMothership:dt,backstage:O,renderUI:function(){var e,n,o,r,i,a,s,l;c.setup(t,O.shared,b),cA(t,O),EA(t,w,O),n=(e=t).ui.registry.getAll().sidebars,G(_t(n),(function(t){var o=n[t],r=function(){return k.from(e.queryCommandValue("ToggleSidebar")).is(t)};e.ui.registry.addToggleButton(t,{icon:o.icon,tooltip:o.tooltip,onAction:function(n){e.execCommand("ToggleSidebar",!1,t),n.setActive(r())},onSetup:function(t){var n=function(){return t.setActive(r())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})),o=t,r=C,i=O.shared,a=mn(!1),s=mn(k.none()),l=function(t){t!==a.get()&&(bB(r(),t,i.providers),a.set(t),o.fire("AfterProgressState",{state:t}))},o.on("ProgressState",(function(t){var e;s.get().each(mp.clearTimeout),F(t.time)?(e=mp.setEditorTimeout(o,(function(){return l(t.state)}),t.time),s.set(k.some(e))):(l(t.state),s.set(k.none()))})),Et(t.getParam("toolbar_groups",{},"object"),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var f,m=t.ui.registry.getAll(),g=m.buttons,p=m.menuItems,h=m.contextToolbars,v=m.sidebars,y=Ov(t),S={menuItems:p,menus:(f=t.getParam("menu"))?Et(f,(function(t){return d(d({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:y.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:T===ih.floating,buttons:g,sidebar:v};xE(t,h,x,{backstage:O}),yI(t,x);var _=t.getElement(),D=mt(),E={mothership:lt,uiMothership:dt,outerContainer:W},B={targetNode:_,height:D};return u.render(t,E,S,O,B)},getUi:function(){return{channels:{broadcastAll:dt.broadcast,broadcastOn:dt.broadcastOn,register:n}}}}},TI=r([Ne("lazySink"),Ke("dragBlockClass"),sn("getBounds",Na),nn("useTabstopAt",l),nn("eventOrder",{}),Wl("modalBehaviours",[ug]),hu("onExecute"),bu("onEscape")]),DI={sketch:i},EI=r([Sf({name:"draghandle",overrides:function(t,e){return{behaviours:ac([pI.config({mode:"mouse",getTarget:function(t){return $a(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),xf({schema:[Ne("dom")],name:"title"}),xf({factory:DI,schema:[Ne("dom")],name:"close"}),xf({factory:DI,schema:[Ne("dom")],name:"body"}),Sf({factory:DI,schema:[Ne("dom")],name:"footer"}),wf({factory:{sketch:function(t,e){return d(d({},t),{dom:e.dom,components:e.components})}},schema:[nn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),nn("components",[])],name:"blocker"})]),BI=Object.freeze({__proto__:null,block:function(t,e,n,o){$r(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=ac([ug.config({mode:"special",onTab:function(){return k.some(!0)},onShiftTab:function(){return k.some(!0)}}),bg.config({})]),a=o(r,i),u=r.getSystem().build(a);dg.append(r,ha(u)),u.hasConfigured(ug)&&ug.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return dg.remove(r,u)}))},unblock:function(t,e,n){Zr(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),AI=[sn("getRoot",k.none),pu("onBlock"),pu("onUnblock")],II=cc({fields:AI,name:"blocking",apis:BI,state:Object.freeze({__proto__:null,init:function(){var t=oE();return Si({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),MI=$f({name:"ModalDialog",configFields:TI(),partFields:EI(),factory:function(t,e,n,o){var r,a=mn(k.none()),u=ii("modal-events"),c=d(d({},t.eventOrder),((r={})[zo()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){a.set(k.some(e));var n=t.lazySink(e).getOrDie(),r=o.blocker(),i=n.getSystem().build(d(d({},r),{components:r.components.concat([ha(e)]),behaviours:ac([bg.config({}),mg("dialog-blocker-events",[lr(mo(),(function(){ug.focusIn(e)}))])])}));al(n,i),ug.focusIn(e)},hide:function(t){a.set(k.none()),Or(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){sl(t)}))}))},getBody:function(e){return Rf(e,t,"body")},getFooter:function(e){return Rf(e,t,"footer")},setIdle:function(t){II.unblock(t)},setBusy:function(t,e){II.block(t,e)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Yl(t.modalBehaviours,[dg.config({}),ug.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),II.config({getRoot:a.get}),mg(u,[fr((function(e){var n,o,r,a,u,c;n=e.element,o=Rf(e,t,"title").element,r=Jr(n,"id").fold((function(){var t=ii("dialog-label");return $r(o,"id",t),t}),i),$r(n,"aria-labelledby",r),a=e.element,u=Rf(e,t,"body").element,c=k.from(Kr(a,"id")).fold((function(){var t=ii("dialog-describe");return $r(u,"id",t),t}),i),$r(a,"aria-describedby",c)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),FI=de([We("type"),We("name")].concat(Ph)),RI=Ve,PI=[ye("name","name",Xt((function(){return ii("button-name")})),Pe),Ze("icon"),un("align","end",["start","end"]),cn("primary",!1),cn("disabled",!1)],VI=g(PI,[We("text")]),HI=g([Ge("type",["submit","cancel","custom"])],VI),zI=g([Ge("type",["menu"]),Ze("text"),Ze("tooltip"),Ze("icon"),$e("items",FI)],PI),jI=Ie("type",{submit:HI,cancel:HI,custom:HI,menu:zI}),LI=[We("type"),We("text"),Ge("level",["info","warn","error","success"]),We("icon"),nn("url","")],NI=de(LI),UI=[We("type"),We("text"),cn("disabled",!1),cn("primary",!1),ye("name","name",Xt((function(){return ii("button-name")})),Pe),Ze("icon"),cn("borderless",!1)],WI=de(UI),GI=[We("type"),We("name"),We("label"),cn("disabled",!1)],YI=de(GI),qI=Ve,XI=[We("type"),We("name")],$I=XI.concat([Ze("label")]),KI=$I.concat([nn("columns","auto")]),JI=de(KI),QI=Ce([We("value"),We("text"),We("icon")]),ZI=de($I),tM=Pe,eM=de($I),nM=Pe,oM=XI.concat([an("tag","textarea"),We("scriptId"),We("scriptUrl"),(xI=void 0,on("settings",xI,je))]),rM=XI.concat([an("tag","textarea"),Ye("init")]),iM=Oe((function(t){return Te("customeditor.old",fe(rM),t).orThunk((function(){return Te("customeditor.new",fe(oM),t)}))})),aM=Pe,uM=de($I),cM=me(Se),sM=function(t){return[We("type"),Ue("columns",Re),t]},lM=[We("type"),We("html"),un("presets","presentation",["presentation","document"])],fM=de(lM),dM=$I.concat([cn("sandboxed",!0)]),mM=de(dM),gM=Pe,pM=$I.concat([Ue("currentState",de([Ne("blob"),We("url")]))]),hM=de(pM),vM=$I.concat([Ze("inputMode"),Ze("placeholder"),cn("maximized",!1),cn("disabled",!1)]),bM=de(vM),yM=Pe,xM=[We("text"),We("value")],wM=[We("text"),$e("items",(wI=function(){return SM},SI=Ut((function(){return wI()})),{extract:function(t,e,n){return SI().extract(t,e,n)},toString:function(){return SI().toString()}}))],SM=ge([de(xM),de(wM)]),CM=$I.concat([$e("items",SM),cn("disabled",!1)]),kM=de(CM),OM=Pe,_M=$I.concat([Xe("items",[We("text"),We("value")]),rn("size",1),cn("disabled",!1)]),TM=de(_M),DM=Pe,EM=$I.concat([cn("constrain",!0),cn("disabled",!1)]),BM=de(EM),AM=de([We("width"),We("height")]),IM=[We("type"),$e("header",Pe),$e("cells",me(Pe))],MM=de(IM),FM=$I.concat([Ze("placeholder"),cn("maximized",!1),cn("disabled",!1)]),RM=de(FM),PM=Pe,VM=$I.concat([un("filetype","file",["image","media","file"]),nn("disabled",!1)]),HM=de(VM),zM=de([We("value"),nn("meta",{})]),jM=function(t){return ye("items","items",Yt(),me(Oe((function(e){return Te("Checking item of "+t,LM,e).fold((function(t){return ft.error(Be(t))}),(function(t){return ft.value(t)}))}))))},LM=ke((function(){return Ae("type",{alertbanner:NI,bar:de((e=jM("bar"),[We("type"),e])),button:WI,checkbox:YI,colorinput:ZI,colorpicker:eM,dropzone:uM,grid:de(sM(jM("grid"))),iframe:mM,input:bM,listbox:kM,selectbox:TM,sizeinput:BM,textarea:RM,urlinput:HM,customeditor:iM,htmlpanel:fM,imagetools:hM,collection:JI,label:de((t=jM("label"),[We("type"),We("label"),t])),table:MM,panel:UM});var t,e})),NM=[We("type"),nn("classes",[]),$e("items",LM)],UM=de(NM),WM=[ye("name","name",Xt((function(){return ii("tab-name")})),Pe),We("title"),$e("items",LM)],GM=[We("type"),Xe("tabs",WM)],YM=de(GM),qM=VI,XM=jI,$M=de([We("title"),Ue("body",Ae("type",{panel:UM,tabpanel:YM})),an("size","normal"),$e("buttons",XM),nn("initialData",{}),sn("onAction",n),sn("onChange",n),sn("onSubmit",n),sn("onClose",n),sn("onCancel",n),nn("onTabChange",n)]),KM=de(g([Ge("type",["cancel","custom"])],qM)),JM=de([We("title"),We("url"),Qe("height"),Qe("width"),Je("buttons",me(KM)),sn("onAction",n),sn("onCancel",n),sn("onClose",n),sn("onMessage",n)]),QM=function t(e){return D(e)?[e].concat(Z(Ft(e),t)):E(e)?Z(e,t):[]},ZM=function(t){return T(t.type)&&T(t.name)},tF={checkbox:qI,colorinput:tM,colorpicker:nM,dropzone:cM,input:yM,iframe:gM,sizeinput:AM,selectbox:DM,listbox:OM,size:AM,textarea:PM,urlinput:zM,customeditor:aM,collection:QI,togglemenuitem:RI},eF=function(t){var e=q(QM(t),ZM),n=Z(e,(function(t){return e=t,k.from(tF[e.type]).fold((function(){return[]}),(function(e){return[Ue(t.name,e)]}));var e}));return de(n)},nF=function(t){return{internalDialog:De(Te("dialog",$M,t)),dataValidator:eF(t),initialData:t.initialData}},oF={open:function(t,e){var n=nF(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(De(Te("dialog",JM,e)))},redial:nF},rF=function(t){var e=[],n={};return Dt(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),0<e.length?ft.error(e):ft.value(n)},iF=Xf({name:"TabButton",configFields:[nn("uid",void 0),Ne("value"),ye("dom","dom",$t((function(){return{attributes:{role:"tab",id:ii("aria"),"aria-selected":"false"}}})),Me()),Ke("action"),nn("domModification",{}),Wl("tabButtonBehaviours",[bg,ug,Ul]),Ne("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Ig(t.action),behaviours:Yl(t.tabButtonBehaviours,[bg.config({}),ug.config({mode:"execution",useSpace:!0,useEnter:!0}),Ul.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),aF=r([Ne("tabs"),Ne("dom"),nn("clickToDismiss",!1),Wl("tabbarBehaviours",[dd,ug]),mu(["tabClass","selectedClass"])]),uF=Cf({factory:iF,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){dd.dehighlight(t,e),Ko(t,Yo(),{tabbar:t,button:e})},o=function(t,e){dd.highlight(t,e),Ko(t,Go(),{tabbar:t,button:e})};return{action:function(r){var i=r.getSystem().getByUid(t.uid).getOrDie(),a=dd.isHighlighted(i,r);(a&&t.clickToDismiss?e:a?n:o)(i,r)},domModification:{classes:[t.markers.tabClass]}}}}),cF=r([uF]),sF=$f({name:"Tabbar",configFields:aF(),partFields:cF(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Yl(t.tabbarBehaviours,[dd.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){$r(e.element,"aria-selected","true")},onDehighlight:function(t,e){$r(e.element,"aria-selected","false")}}),ug.config({mode:"flow",getInitial:function(t){return dd.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),lF=Xf({name:"Tabview",configFields:[Wl("tabviewBehaviours",[dg])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Yl(t.tabviewBehaviours,[dg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),fF=r([nn("selectFirst",!0),pu("onChangeTab"),pu("onDismissTab"),nn("tabs",[]),Wl("tabSectionBehaviours",[])]),dF=xf({factory:sF,schema:[Ne("dom"),qe("markers",[Ne("tabClass"),Ne("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),mF=xf({factory:lF,name:"tabview"}),gF=r([dF,mF]),pF=$f({name:"TabSection",configFields:fF(),partFields:gF(),factory:function(t,e,n,o){var r=function(e,n){Ff(e,t,"tabbar").each((function(t){n(t).each(Jo)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:Gl(t.tabSectionBehaviours),events:er(Q([t.selectFirst?[fr((function(t,e){r(t,dd.getFirst)}))]:[],[rr(Go(),(function(e,n){var o,r,i=n.event.button;o=i,r=Ul.getValue(o),Ff(o,t,"tabview").each((function(e){K(t.tabs,(function(t){return t.value===r})).each((function(n){var r=n.view();Jr(o.element,"id").each((function(t){$r(e.element,"aria-labelledby",t)})),dg.set(e,r),t.onChangeTab(e,o,r)}))}))})),rr(Yo(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return Ff(e,t,"tabview").map((function(t){return dg.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){var n=dd.getCandidates(t);return K(n,(function(t){return Ul.getValue(t)===e})).filter((function(e){return!dd.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),hF=function(t,e){$i(t,"height",e+"px"),Wn().browser.isIE()?na(t,"flex-basis"):$i(t,"flex-basis",e+"px")},vF=function(t,e,n){$a(t,'[role="dialog"]').each((function(t){Ka(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return $i(e,"height","0"),$i(e,"flex-basis","0"),Math.min(n,(i=e,a=o,u=Cr(r=t).dom,c=$a(r,".tox-dialog-wrap").getOr(r),s="fixed"===Qi(c,"position")?Math.max(u.clientHeight,window.innerHeight):Math.max(u.offsetHeight,u.scrollHeight),l=ya(i),f=i.dom.offsetLeft>=a.dom.offsetLeft+Ta(a)?Math.max(ya(a),l):l,d=parseInt(Qi(r,"margin-top"),10)||0,m=parseInt(Qi(r,"margin-bottom"),10)||0,s-(ya(r)+d+m-f)));var r,i,a,u,c,s,l,f,d,m})).each((function(t){hF(e,t)}))}))}))},bF=function(t){return Ka(t,'[role="tabpanel"]')},yF=function(t){var e;return{smartTabHeight:(e=mn(k.none()),{extraEvents:[fr((function(n){var o=n.element;bF(o).each((function(r){var i;$i(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((function(n){var o,i,a,u=(i=r,a=n,W(o=t,(function(t,e){dg.set(a,o[e].view());var n=i.dom.getBoundingClientRect();return dg.set(a,[]),n.height}))),c=it(ot(u,(function(t,e){return e<t?-1:t<e?1:0})));e.set(c)})),vF(o,r,e),na(r,"visibility"),i=n,it(t).each((function(t){return pF.showTab(i,t.value)})),mp.requestAnimationFrame((function(){vF(o,r,e)}))}))})),rr(Ho(),(function(t){var n=t.element;bF(n).each((function(t){vF(n,t,e)}))})),rr(sx,(function(t,n){var o=t.element;bF(o).each((function(t){var n=pc(Mr(t));$i(t,"visibility","hidden");var r=ta(t,"height").map((function(t){return parseInt(t,10)}));na(t,"height"),na(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall((function(t){return t<i}))?(e.set(k.from(i)),vF(o,t,e)):r.each((function(e){hF(t,e)})),na(t,"visibility"),n.each(gc)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},xF="send-data-to-section",wF="send-data-to-view",SF=ii("update-dialog"),CF=ii("update-title"),kF=ii("update-body"),OF=ii("update-footer"),_F=ii("body-send-message"),TF=function(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:d(d({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:ac([sC(0),aD.config({channel:kF,updateState:function(t,e){return k.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(i=t.body,a=n,c=mn({}),s=function(t){var e=Ul.getValue(t),n=rF(e).getOr({}),o=c.get(),r=Lt(o,n);c.set(r)},l=function(t){var e=c.get();Ul.setValue(t,e)},f=mn(null),d=W(i.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:a.shared.providers.translate(t.title)},view:function(){return[ZS.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"]},components:W(t.items,(function(t){return l_(e,t,a)})),formBehaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)}),mg("TabView.form.events",[fr(l),dr(s)]),dc.config({channels:Zt([{key:xF,value:{onReceive:s}},{key:wF,value:{onReceive:l}}])})])}}))]}}})),m=yF(d).smartTabHeight,pF.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Ul.getValue(e);Ko(t,cx,{name:o,oldName:f.get()}),f.set(o)},tabs:d,components:[pF.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[sF.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ac([$y.config({})])}),pF.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:m.selectFirst,tabSectionBehaviours:ac([mg("tabpanel",m.extraEvents),ug.config({mode:"acyclic"}),ed.config({find:function(t){return it(pF.getViewItems(t))}}),Ul.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([xF],{}),c.get()},setValue:function(t,e){c.set(e),t.getSystem().broadcastOn([wF],{})}}})])}))];default:return[(e=t.body,o=n,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=pp(ZS.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:W(e.items,(function(e){return l_(t,e,o)}))}})))).asSpec()]}],behaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)}),cC(r),vC(r,{postprocess:function(t){return rF(t).fold((function(t){return console.error(t),{}}),(function(t){return t}))}})])})]}var e,o,r,i,a,c,s,l,f,d,m},initialData:t})])}},DF=nb.deviceType.isTouch(),EF=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},BF=function(t,e){return MI.parts.close(gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:ac([$y.config({})])}))},AF=function(){return MI.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},IF=function(t,e){return MI.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:vB("<p>"+e.translate(t)+"</p>")}]}]})},MF=function(t){return MI.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},FF=function(t,e){return[Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},RF=function(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return MI.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),k.some(!0)},useTabstopAt:function(t){return!DC(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:d({position:"relative"},t.extraStyles)},components:g([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:vB('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:DF?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:ac(g([bg.config({}),mg("dialog-events",t.dialogEvents.concat([lr(mo(),(function(t,e){ug.focusIn(t)}))])),mg("scroll-lock",[fr((function(){Vi(Gi(),i)})),dr((function(){zi(Gi(),i)}))])],t.extraBehaviours)),eventOrder:d(((e={})[Do()]=["dialog-events"],e[zo()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[jo()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},PF=function(t){return gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vp("close",t.icons)}}],action:function(t){$o(t,ox)}})},VF=function(t,e,n){var o=function(t){return[da(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:d({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:ac([aD.config({channel:CF,renderComponents:o})])}},HF=function(){return{dom:vB('<div class="tox-dialog__draghandle"></div>')}},zF=function(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=MI.parts.title(VF(n,k.none(),o)),i=MI.parts.draghandle(HF()),a=MI.parts.close(PF(o)),u=[r].concat(n.draggable?[i]:[]).concat([a]),Ny.sketch({dom:vB('<div class="tox-dialog__header"></div>'),components:u});var n,o,r,i,a,u},jF=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:vB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},LF=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){MI.setBusy(t(),(function(t,o){return jF(n.message,o,e)}))},onUnblock:function(){MI.setIdle(t())}}},NF=function(t,e,n,o){var r;return pa(RF(d(d({},t),{lazySink:o.shared.getSink,extraBehaviours:g([aD.config({channel:SF,updateState:function(t,e){return k.some(e)},initialData:e}),xC({})],t.extraBehaviours),onEscape:function(t){$o(t,ox)},dialogEvents:n,eventOrder:((r={})[To()]=[aD.name(),dc.name()],r[zo()]=["scroll-lock",aD.name(),"messages","dialog-events","alloy.base.behaviour"],r[jo()]=["alloy.base.behaviour","dialog-events","messages",aD.name(),"scroll-lock"],r)})))},UF=function(t){return W(t,(function(t){return"menu"===t.type?(n=W((e=t).items,(function(t){var e=mn(!1);return d(d({},t),{storage:e})})),d(d({},e),{items:n})):t;var e,n}))},WF=function(t){return $(t,(function(t,e){return"menu"!==e.type?t:$(e.items,(function(t,e){return t[e.name]=e.storage,t}),t)}),{})},GF=function(t,e){return[cr(mo(),TC),t(nx,(function(t,n){e.onClose(),n.onClose()})),t(ox,(function(t,e,n,o){e.onCancel(t),$o(o,nx)})),rr(ux,(function(t,n){return e.onUnblock()})),rr(ax,(function(t,n){return e.onBlock(n.event)}))]},YF=function(t,e){var n=function(e,n){return rr(e,(function(e,r){o(e,(function(o,i){n(t(),o,r.event,e)}))}))},o=function(t,e){aD.getState(t).get().each((function(n){e(n,t)}))};return g(GF(n,e),[n(rx,(function(t,e,n){e.onAction(t,{name:n.name})}))])},qF=function(t,e,n){var o=function(e,n){return rr(e,(function(e,o){r(e,(function(r,i){n(t(),r,o.event,e)}))}))},r=function(t,e){aD.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return g(GF(o,e),[o(ix,(function(t,e){return e.onSubmit(t)})),o(ex,(function(t,e,n){e.onChange(t,{name:n.name})})),o(rx,(function(t,e,o,r){var i=function(){return ug.focusIn(r)},a=function(t){return Qr(t,"disabled")||Jr(t,"aria-disabled").exists((function(t){return"true"===t}))},u=Mr(r.element),c=pc(u);e.onAction(t,{name:o.name,value:o.value}),pc(u).fold(i,(function(t){a(t)||c.exists((function(e){return $n(t,e)&&a(e)}))?i():n().toOptional().filter((function(e){return!$n(e.element,t)})).each(i)}))})),o(cx,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),dr((function(e){var n=t();Ul.setValue(e,n.getData())}))])},XF=function(t,e){var n=e.map((function(t){return t.footerButtons})).getOr([]),o=Y(n,(function(t){return"start"===t.align})),r=function(t,e){return Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:W(e,(function(t){return t.memento.asSpec()}))})};return[r("start",o.pass),r("end",o.fail)]},$F=function(t,e){return{dom:vB('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ac([aD.config({channel:OF,initialData:t,updateState:function(t,n){var o=W(n.buttons,(function(t){var n,o,r=pp((o=e,Qk(n=t,n.type,o)));return{name:t.name,align:t.align,memento:r}}));return k.some({lookupByName:function(t,e){return n=t,r=e,K(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(n)}));var n,r},footerButtons:o})},renderComponents:XF})])}},KF=$F,JF=function(t,e){return MI.parts.footer($F(t,e))},QF=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=ed.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return ZS.getField(n,e).fold((function(){var o=t.getFooter();return aD.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return k.some(t)}))}return k.none()},ZF=function(t,e,n){var o=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=Ul.getValue(o),i=Et(n,(function(t){return t.get()}));return d(d({},r),i)},setData:function(e){o((function(o){var i,a,u=r.getData(),c=d(d({},u),e),s=(i=c,a=t.getRoot(),aD.getState(a).get().map((function(t){return De(Te("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper();Ul.setValue(l,s),Dt(n,(function(t,e){Pt(c,e)&&t.set(c[e])}))}))},disable:function(e){QF(t,e).each(pv.disable)},enable:function(e){QF(t,e).each(pv.enable)},focus:function(e){QF(t,e).each(bg.focus)},block:function(t){if(!T(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){Ko(e,ax,{message:t})}))},unblock:function(){o((function(t){$o(t,ux)}))},showTab:function(e){o((function(n){var o=t.getBody();aD.getState(o).get().exists((function(t){return t.isTabPanel()}))&&ed.getCurrent(o).each((function(t){pF.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([SF],o),n.getSystem().broadcastOn([CF],o.internalDialog),n.getSystem().broadcastOn([kF],o.internalDialog),n.getSystem().broadcastOn([OF],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){$o(t,nx)}))}};return r},tR=function(t,e,n){var o,r,i,a=zF(t.internalDialog.title,n),u=(o={body:t.internalDialog.body},r=n,i=TF(o,k.none(),r,!1),MI.parts.body(i)),c=UF(t.internalDialog.buttons),s=WF(c),l=JF({buttons:c},n),f=qF((function(){return p}),LF((function(){return g}),n.shared.providers,e),n.shared.getSink),d=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),m={header:a,body:u,footer:k.some(l),extraClasses:d,extraBehaviours:[],extraStyles:{}},g=NF(m,t,f,n),p=ZF({getRoot:function(){return g},getBody:function(){return MI.getBody(g)},getFooter:function(){return MI.getFooter(g)},getFormWrapper:function(){var t=MI.getBody(g);return ed.getCurrent(t).getOr(t)}},e.redial,s);return{dialog:g,instanceApi:p}},eR=function(t,e,n,o){var r,i,a,u,c,s,l,f,d,m=ii("dialog-label"),g=ii("dialog-content"),p=pp((a={title:t.internalDialog.title,draggable:!0},u=m,c=n.shared.providers,Ny.sketch({dom:vB('<div class="tox-dialog__header"></div>'),components:[VF(a,k.some(u),c),HF(),PF(c)],containerBehaviours:ac([pI.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Ja(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=pp((s={body:t.internalDialog.body},l=g,f=n,d=o,TF(s,k.some(l),f,d))),v=UF(t.internalDialog.buttons),b=WF(v),y=pp(KF({buttons:v},n)),x=qF((function(){return S}),{onBlock:function(t){II.block(w,(function(e,o){return jF(t.message,o,n.shared.providers)}))},onUnblock:function(){II.unblock(w)},onClose:function(){return e.closeWindow()}},n.shared.getSink),w=pa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((r={role:"dialog"})["aria-labelledby"]=m,r["aria-describedby"]=""+g,r)},eventOrder:((i={})[To()]=[aD.name(),dc.name()],i[Do()]=["execute-on-form"],i[zo()]=["reflecting","execute-on-form"],i),behaviours:ac([ug.config({mode:"cyclic",onEscape:function(t){return $o(t,nx),k.some(!0)},useTabstopAt:function(t){return!DC(t)&&("button"!==pr(t)||"disabled"!==Kr(t,"disabled"))}}),aD.config({channel:SF,updateState:function(t,e){return k.some(e)},initialData:t}),bg.config({}),mg("execute-on-form",x.concat([lr(mo(),(function(t,e){ug.focusIn(t)}))])),II.config({getRoot:function(){return k.some(w)}}),dg.config({}),xC({})]),components:[p.asSpec(),h.asSpec(),y.asSpec()]}),S=ZF({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return ed.getCurrent(t).getOr(t)}},e.redial,b);return{dialog:w,instanceApi:S}},nR=tinymce.util.Tools.resolve("tinymce.util.URI"),oR=["insertContent","setContent","execCommand","close","block","unblock"],rR=function(t){return D(t)&&-1!==oR.indexOf(t.mceAction)},iR=function(t,e,n,o){var r,i,a,c,s=zF(t.title,o),l=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[OC({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ac([$y.config({}),bg.config({})])})]}],behaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)})])},MI.parts.body(i)),f=t.buttons.bind((function(t){return 0===t.length?k.none():k.some(JF({buttons:t},o))})),m=YF((function(){return w}),LF((function(){return x}),o.shared.providers,e)),g=d(d({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new nR(t.url,{base_uri:new nR(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=mn(k.none()),y=[mg("messages",[fr((function(){var e=ky(pn.fromDom(window),"message",(function(e){var o,r;h.isSameOrigin(new nR(e.raw.origin))&&(o=e.raw.data,rR(o)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!B(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!rR(r=o)&&D(r)&&Pt(r,"mceAction")&&t.onMessage(w,o))}));b.set(k.some(e))})),dr((function(){b.get().each((function(t){return t.unbind()}))}))]),dc.config({channels:((r={})[_F]={onReceive:function(t,e){Ka(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},r)})],x=NF({header:s,body:l,footer:f,extraClasses:p,extraBehaviours:y,extraStyles:g},t,m,o),w=(c=function(t){a.getSystem().isConnected()&&t(a)},{block:function(t){if(!T(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((function(e){Ko(e,ax,{message:t})}))},unblock:function(){c((function(t){$o(t,ux)}))},close:function(){c((function(t){$o(t,nx)}))},sendMessage:function(t){c((function(e){e.getSystem().broadcastOn([_F],t)}))}});return{dialog:a=x,instanceApi:w}},aR=function(t){var e,n,o,r,i=t.backstage,a=t.editor,u=zv(a),c=(n=(e=t).backstage.shared,{open:function(t,o){var r=function(){MI.hide(c),o()},i=pp(Qk({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:k.none()},"cancel",e.backstage)),a=AF(),u=BF(r,n.providers),c=pa(RF({lazySink:function(){return n.getSink()},header:EF(a,u),body:IF(t,n.providers),footer:k.some(MF(FF([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,r)],eventOrder:{}}));MI.show(c);var s=i.get(c);bg.focus(s)}}),s=(r=(o=t).backstage.shared,{open:function(t,e){var n=function(t){MI.hide(s),e(t)},i=pp(Qk({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:k.none()},"submit",o.backstage)),a=Qk({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:k.none()},"cancel",o.backstage),u=AF(),c=BF((function(){return n(!1)}),r.providers),s=pa(RF({lazySink:function(){return r.getSink()},header:EF(u,c),body:IF(t,r.providers),footer:k.some(MF(FF([],[a,i.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,(function(){return n(!1)})),rr(ix,(function(){return n(!0)}))],eventOrder:{}}));MI.show(s);var l=i.get(s);bg.focus(l)}}),l=function(t,e){return oF.openUrl((function(t){var n=iR(t,{closeWindow:function(){MI.hide(n.dialog),e(n.instanceApi)}},a,i);return MI.show(n.dialog),n.instanceApi}),t)},f=function(t,e){return oF.open((function(t,n,o){var r=n,a=tR({dataValidator:o,initialData:r,internalDialog:t},{redial:oF.redial,closeWindow:function(){MI.hide(a.dialog),e(a.instanceApi)}},i);return MI.show(a.dialog),a.instanceApi.setData(r),a.instanceApi}),t)},m=function(t,e,n,o){return oF.open((function(t,r,c){var s,l,f,m=De(Te("data",c,r)),p=(s=mn(k.none()),{clear:function(){return s.set(k.none())},set:function(t){return s.set(k.some(t))},isSet:function(){return s.get().isSome()},on:function(t){return s.get().each(t)}}),h=i.shared.header.isPositionedAtTop(),v=function(){return p.on((function(t){ep.reposition(t),XE.refresh(t)}))},b=eR({dataValidator:c,initialData:m,internalDialog:t},{redial:oF.redial,closeWindow:function(){p.on(ep.hide),a.off("ResizeEditor",v),p.clear(),n(b.instanceApi)}},i,o),y=pa(ep.sketch(d(d({lazySink:i.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},h?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:ac(g([mg("window-manager-inline-events",[rr(Lo(),(function(t,e){$o(b.dialog,ox)}))])],(l=a,f=h,u&&f?[]:[XE.config({contextual:{lazyContext:function(){return k.some(ja(pn.fromDom(l.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]))),isExtraPart:function(t,e){return Ty(n=e,".tox-alert-dialog")||Ty(n,".tox-confirm-dialog");var n}})));return p.set(y),ep.showWithin(y,e,ha(b.dialog),k.some(Gi())),u&&h||(XE.refresh(y),a.on("ResizeEditor",v)),b.instanceApi.setData(m),ug.focusIn(b.dialog),b.instanceApi}),t)};return{open:function(t,e,n){return void 0!==e&&"toolbar"===e.inline?m(t,i.shared.anchors.inlineDialog(),n,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?m(t,i.shared.anchors.cursor(),n,e.ariaAttrs):f(t,n)},openUrl:function(t,e){return l(t,e)},alert:function(t,e){c.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){s.open(t,(function(t){e(t)}))}}};f.add("silver",(function(t){var e=_I(t),n=e.uiMothership,o=e.backstage,i=e.renderUI,a=e.getUi;Sy(t,o.shared);var u=aR({editor:t,backstage:o});return{renderUI:i,getWindowManagerImpl:r(u),getNotificationManagerImpl:function(){return xp(0,{backstage:o},n)},ui:a()}}))}()}).call(this,n("c8ba"))},8144:function(t,e,n){"use strict";n("368b")},8528:function(t,e,n){},"8b58":function(t,e){tinymce.addI18n("zh_CN",{Redo:"重做",Undo:"撤销",Cut:"剪切",Copy:"复制",Paste:"粘贴","Select all":"全选","New document":"新文件",Ok:"确定",Cancel:"取消","Visual aids":"网格线",Bold:"粗体",Italic:"斜体",Underline:"下划线",Strikethrough:"删除线",Superscript:"上标",Subscript:"下标","Clear formatting":"清除格式","Align left":"左边对齐","Align center":"中间对齐","Align right":"右边对齐",Justify:"两端对齐","Bullet list":"项目符号","Numbered list":"编号列表","Decrease indent":"减少缩进","Increase indent":"增加缩进",Close:"关闭",Formats:"格式","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",Headers:"标题","Header 1":"标题1","Header 2":"标题2","Header 3":"标题3","Header 4":"标题4","Header 5":"标题5","Header 6":"标题6",Headings:"标题","Heading 1":"标题1","Heading 2":"标题2","Heading 3":"标题3","Heading 4":"标题4","Heading 5":"标题5","Heading 6":"标题6",Preformatted:"预先格式化的",Div:"Div",Pre:"Pre",Code:"代码",Paragraph:"段落",Blockquote:"引文区块",Inline:"文本",Blocks:"基块","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Fonts:"字体","Font Sizes":"字号",Class:"类型","Browse for an image":"浏览图像",OR:"或","Drop an image here":"拖放一张图像至此",Upload:"上传",Block:"块",Align:"对齐",Default:"默认",Circle:"空心圆",Disc:"实心圆",Square:"方块","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马字母","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Anchor...":"锚点...",Name:"名称",Id:"标识符","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character...":"特殊字符...","Source code":"源代码","Insert/Edit code sample":"插入/编辑代码示例",Language:"语言","Code sample...":"示例代码...","Color Picker":"选色器",R:"R",G:"G",B:"B","Left to right":"从左到右","Right to left":"从右到左","Emoticons...":"表情符号...","Metadata and Document Properties":"元数据和文档属性",Title:"标题",Keywords:"关键词",Description:"描述",Robots:"机器人",Author:"作者",Encoding:"编码",Fullscreen:"全屏",Action:"操作",Shortcut:"快捷键",Help:"帮助",Address:"地址","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏","Focus to element path":"移动焦点到元素路径","Focus to contextual toolbar":"移动焦点到上下文菜单","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Save (if save plugin activated)":"保存(如果保存插件已激活)","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Plugins installed ({0}):":"已安装插件 ({0}):","Premium plugins:":"优秀插件：","Learn more...":"了解更多...","You are using {0}":"你正在使用 {0}",Plugins:"插件","Handy Shortcuts":"快捷键","Horizontal line":"水平分割线","Insert/edit image":"插入/编辑图片","Image description":"图片描述",Source:"地址",Dimensions:"大小","Constrain proportions":"保持纵横比",General:"普通",Advanced:"高级",Style:"样式","Vertical space":"垂直边距","Horizontal space":"水平边距",Border:"边框","Insert image":"插入图片","Image...":"图片...","Image list":"图片列表","Rotate counterclockwise":"逆时针旋转","Rotate clockwise":"顺时针旋转","Flip vertically":"垂直翻转","Flip horizontally":"水平翻转","Edit image":"编辑图片","Image options":"图片选项","Zoom in":"放大","Zoom out":"缩小",Crop:"裁剪",Resize:"调整大小",Orientation:"方向",Brightness:"亮度",Sharpen:"锐化",Contrast:"对比度","Color levels":"颜色层次",Gamma:"伽马值",Invert:"反转",Apply:"应用",Back:"后退","Insert date/time":"插入日期/时间","Date/time":"日期/时间","Insert/Edit Link":"插入/编辑链接","Insert/edit link":"插入/编辑链接","Text to display":"显示文字",Url:"地址","Open link in...":"链接打开位置...","Current window":"当前窗口",None:"无","New window":"在新窗口打开","Remove link":"删除链接",Anchors:"锚点","Link...":"链接...","Paste or type a link":"粘贴或输入链接","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Link list":"链接列表","Insert video":"插入视频","Insert/edit video":"插入/编辑视频","Insert/edit media":"插入/编辑媒体","Alternative source":"镜像","Alternative source URL":"替代来源网址","Media poster (Image URL)":"封面(图片地址)","Paste your embed code below:":"将内嵌代码粘贴在下面:",Embed:"内嵌","Media...":"多媒体...","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览","Print...":"打印...",Save:"保存",Find:"查找","Replace with":"替换为",Replace:"替换","Replace all":"全部替换",Previous:"上一个",Next:"下一个","Find and replace...":"查找并替换...","Could not find the specified string.":"未找到搜索内容.","Match case":"区分大小写","Find whole words only":"全字匹配","Spell check":"拼写检查",Ignore:"忽略","Ignore all":"全部忽略",Finish:"完成","Add to Dictionary":"添加到字典","Insert table":"插入表格","Table properties":"表格属性","Delete table":"删除表格",Cell:"单元格",Row:"行",Column:"列","Cell properties":"单元格属性","Merge cells":"合并单元格","Split cell":"拆分单元格","Insert row before":"在上方插入","Insert row after":"在下方插入","Delete row":"删除行","Row properties":"行属性","Cut row":"剪切行","Copy row":"复制行","Paste row before":"粘贴到上方","Paste row after":"粘贴到下方","Insert column before":"在左侧插入","Insert column after":"在右侧插入","Delete column":"删除列",Cols:"列",Rows:"行",Width:"宽",Height:"高","Cell spacing":"单元格外间距","Cell padding":"单元格内边距","Show caption":"显示标题",Left:"左对齐",Center:"居中",Right:"右对齐","Cell type":"单元格类型",Scope:"范围",Alignment:"对齐方式","H Align":"水平对齐","V Align":"垂直对齐",Top:"顶部对齐",Middle:"垂直居中",Bottom:"底部对齐","Header cell":"表头单元格","Row group":"行组","Column group":"列组","Row type":"行类型",Header:"表头",Body:"表体",Footer:"表尾","Border color":"边框颜色","Insert template...":"插入模板...",Templates:"模板",Template:"模板","Text color":"文字颜色","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Remove color":"移除颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Word count":"字数",Count:"计数",Document:"文档",Selection:"选择",Words:"单词","Words: {0}":"字数：{0}","{0} words":"{0} 字",File:"文件",Edit:"编辑",Insert:"插入",View:"视图",Format:"格式",Table:"表格",Tools:"工具","Powered by {0}":"由{0}驱动","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助","Image title":"图片标题","Border width":"边框宽度","Border style":"边框样式",Error:"错误",Warn:"警告",Valid:"有效","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","System Font":"系统字体","Failed to upload image: {0}":"图片上传失败: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to initialize plugin: {0}":"插件初始化失败: {0}",example:"示例",Search:"搜索",All:"全部",Currency:"货币",Text:"文字",Quotations:"引用",Mathematical:"数学","Extended Latin":"拉丁语扩充",Symbols:"符号",Arrows:"箭头","User Defined":"自定义","dollar sign":"美元符号","currency sign":"货币符号","euro-currency sign":"欧元符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","french franc sign":"法郎符号","lira sign":"里拉符号","mill sign":"密尔符号","naira sign":"奈拉符号","peseta sign":"比塞塔符号","rupee sign":"卢比符号","won sign":"韩元符号","new sheqel sign":"新谢克尔符号","dong sign":"越南盾符号","kip sign":"老挝基普符号","tugrik sign":"图格里克符号","drachma sign":"德拉克马符号","german penny symbol":"德国便士符号","peso sign":"比索符号","guarani sign":"瓜拉尼符号","austral sign":"澳元符号","hryvnia sign":"格里夫尼亚符号","cedi sign":"塞地符号","livre tournois sign":"里弗弗尔符号","spesmilo sign":"spesmilo符号","tenge sign":"坚戈符号","indian rupee sign":"印度卢比","turkish lira sign":"土耳其里拉","nordic mark sign":"北欧马克","manat sign":"马纳特符号","ruble sign":"卢布符号","yen character":"日元字样","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","yen/yuan character variant one":"元字样（大写）","Loading emoticons...":"加载表情符号...","Could not load emoticons":"不能加载表情符号",People:"人类","Animals and Nature":"动物和自然","Food and Drink":"食物和饮品",Activity:"活动","Travel and Places":"旅游和地点",Objects:"物件",Flags:"旗帜",Characters:"字符","Characters (no spaces)":"字符(无空格)","{0} characters":"{0} 个字符","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。",Update:"更新","Color swatch":"颜色样本",Turquoise:"青绿色",Green:"绿色",Blue:"蓝色",Purple:"紫色","Navy Blue":"海军蓝","Dark Turquoise":"深蓝绿色","Dark Green":"深绿色","Medium Blue":"中蓝色","Medium Purple":"中紫色","Midnight Blue":"深蓝色",Yellow:"黄色",Orange:"橙色",Red:"红色","Light Gray":"浅灰色",Gray:"灰色","Dark Yellow":"暗黄色","Dark Orange":"深橙色","Dark Red":"深红色","Medium Gray":"中灰色","Dark Gray":"深灰色","Light Green":"浅绿色","Light Yellow":"浅黄色","Light Red":"浅红色","Light Purple":"浅紫色","Light Blue":"浅蓝色","Dark Purple":"深紫色","Dark Blue":"深蓝色",Black:"黑色",White:"白色","Switch to or from fullscreen mode":"切换全屏模式","Open help dialog":"打开帮助对话框",history:"历史",styles:"样式",formatting:"格式化",alignment:"对齐",indentation:"缩进","permanent pen":"记号笔",comments:"备注","Format Painter":"格式刷","Insert/edit iframe":"插入/编辑框架",Capitalization:"大写",lowercase:"小写",UPPERCASE:"大写","Title Case":"首字母大写","Permanent Pen Properties":"永久笔属性","Permanent pen properties...":"永久笔属性...",Font:"字体",Size:"字号","More...":"更多...","Spellcheck Language":"拼写检查语言","Select...":"选择...",Preferences:"首选项",Yes:"是",No:"否","Keyboard Navigation":"键盘指引",Version:"版本",Anchor:"锚点","Special character":"特殊符号","Code sample":"代码示例",Color:"颜色",Emoticons:"表情","Document properties":"文档属性",Image:"图片","Insert link":"插入链接",Target:"打开方式",Link:"链接",Poster:"封面",Media:"媒体",Print:"打印",Prev:"上一个","Find and replace":"查找和替换","Whole words":"全字匹配",Spellcheck:"拼写检查",Caption:"标题","Insert template":"插入模板"})},"8b79":function(t,e,n){},"8ca5":function(t,e,n){},"91f9":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",[n("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("申报表详情")])]),n("el-form",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"教学组织名称"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.organization))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属学院"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.college))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"负责人"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.principal))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"负责人工号"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.principalNumber))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"基层教学组织类型"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.type))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"基层教学组织级别"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.level))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"设立时间/年"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.createYear))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"面向校内专业（大类）个数"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.faceMultiple))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-table",{attrs:{data:this.form.info.faceSchoolMajors,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitles",label:"面向校内专业名称"}}),n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitlesCode",label:"代码"}}),n("el-table-column",{attrs:{prop:"schoolOrientedProfessionalTitlesProporation",label:"比例"}})],1)],1),"省级优秀"==t.form.info.awardLevel?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"获奖等级"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.organization))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"团队名称"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.teamName))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"类型"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.baseEducationType))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"类别"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.teamType))])])])],1)],1):t._e(),"省级优秀"==t.form.info.awardLevel?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"获得时间"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.getTime))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"等级"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.teamLevel))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"授予部门"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.info.awardDepartment))])])])],1)],1):t._e(),n("el-row",["省级优秀"==t.form.info.awardLevel?n("el-table",{attrs:{data:this.form.info.teacher,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"teacherName",label:"教师姓名"}}),n("el-table-column",{attrs:{prop:"teacherNumber",label:"教师工号"}})],1):t._e()],1)],1),n("principal",{attrs:{header:"负责人概况",principalID:this.form.principalID}}),n("member",{attrs:{header:"成员概况",membersID:this.form.membersID}}),n("rules",{attrs:{header:"规章制度",ruleAndRegulationID:this.form.ruleAndRegulationID}}),n("teambuilding",{attrs:{header:"队伍建设",teamBuildingID:this.form.teamBuildingID}}),n("organization",{attrs:{header:"教学组织",teachingOrganizationID:this.form.teachingOrganizationID}}),n("coursematerial",{attrs:{header:"课程教材概述",courseMaterialID:this.form.courseMaterialID}}),n("teachingresearch",{attrs:{header:"教学研究",teachingResearchID:this.form.teachingResearchID}}),n("specialtyconstruction",{attrs:{header:"专业建设",specialtyConstructionID:this.form.specialtyConstructionID}}),n("practicalteaching",{attrs:{header:"实践教学",practicalTeachingID:this.form.practicalTeachingID}}),n("conditionguarantee",{attrs:{header:"条件保障",conditionGuaranteeID:this.form.conditionGuaranteeID}}),n("talentcultivationability",{attrs:{header:"人才培养能力",talentCultivationAbilityID:this.form.talentCultivationAbilityID}}),n("futureconstructionplan",{attrs:{header:"今后计划建设",futureConstructionPlanID:this.form.futureConstructionPlanID}}),n("opinionfeedback",{attrs:{header:"教务处意见反馈",opinionFeedbackID:this.form.opinionFeedbackID},on:{getStatus:function(e){return t.getStatus(e)}}}),n("el-button",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],staticClass:"score",attrs:{type:"primary"},on:{click:function(e){return t.toEvaluate()}}},[t._v(" 评分 ")])],1),n("el-drawer",{attrs:{visible:t.drawer,direction:"btt",size:"90%",title:"点击上方详情页区域可隐藏此评分页(已选择的分数不会消失)"},on:{"update:visible":function(e){t.drawer=e}}},[n("el-row",{attrs:{type:"flex",gutter:20}},[n("el-col",{staticStyle:{height:"37.5rem","border-right":"1px solid black"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClass",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("专业类")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("每项1-10分")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("专业发展目标:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("专业发展定位:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("专业培养效果:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("专业办学参数:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("专业建设成果:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.developmentGoals,callback:function(e){t.$set(t.getScore,"developmentGoals",e)},expression:"getScore.developmentGoals"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.developmentOrientation,callback:function(e){t.$set(t.getScore,"developmentOrientation",e)},expression:"getScore.developmentOrientation"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.trainingEffect,callback:function(e){t.$set(t.getScore,"trainingEffect",e)},expression:"getScore.trainingEffect"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.runningParameters,callback:function(e){t.$set(t.getScore,"runningParameters",e)},expression:"getScore.runningParameters"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.constructionResults,callback:function(e){t.$set(t.getScore,"constructionResults",e)},expression:"getScore.constructionResults"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"37.5rem","border-right":"1px solid black"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClass",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("课程类")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("每项1-10分")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("课程建设规划:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("课程改革:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教材选用:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教材建设:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("课程建设成功:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.constructionPlanning,callback:function(e){t.$set(t.getScore,"constructionPlanning",e)},expression:"getScore.constructionPlanning"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.curriculumReform,callback:function(e){t.$set(t.getScore,"curriculumReform",e)},expression:"getScore.curriculumReform"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.textbookSelection,callback:function(e){t.$set(t.getScore,"textbookSelection",e)},expression:"getScore.textbookSelection"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.textbookConstruction,callback:function(e){t.$set(t.getScore,"textbookConstruction",e)},expression:"getScore.textbookConstruction"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.constructionAchievements,callback:function(e){t.$set(t.getScore,"constructionAchievements",e)},expression:"getScore.constructionAchievements"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"37.5rem","border-right":"1px solid black"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClass",attrs:{span:6}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("实践类")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("每项1-10分")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem","margin-left":"0"},attrs:{type:"info"}},[t._v("实习实训基地:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem","margin-left":"0"},attrs:{type:"info"}},[t._v("实验室建设:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem","margin-left":"0"},attrs:{type:"info"}},[t._v("学科竞赛活动:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem","margin-left":"0"},attrs:{type:"info"}},[t._v("创新创业指导活动:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem","margin-left":"0"},attrs:{type:"info"}},[t._v("实验室开出/覆盖率:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.trainingBase,callback:function(e){t.$set(t.getScore,"trainingBase",e)},expression:"getScore.trainingBase"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.laboratoryConstruction,callback:function(e){t.$set(t.getScore,"laboratoryConstruction",e)},expression:"getScore.laboratoryConstruction"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.competitionActivities,callback:function(e){t.$set(t.getScore,"competitionActivities",e)},expression:"getScore.competitionActivities"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.guidanceActivities,callback:function(e){t.$set(t.getScore,"guidanceActivities",e)},expression:"getScore.guidanceActivities"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.laboratoryCoverage,callback:function(e){t.$set(t.getScore,"laboratoryCoverage",e)},expression:"getScore.laboratoryCoverage"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"37.5rem","border-right":"1px solid black"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClass",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("制度建设")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("最高分依次为3/3/4")])],1)],1),n("el-col",{staticClass:"colClassTwo",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"2rem","margin-left":"0"},attrs:{type:"info"}},[t._v("制度建设:")]),n("el-tag",{staticStyle:{"margin-bottom":"2rem","margin-left":"0"},attrs:{type:"info"}},[t._v("师资培养计划:")]),n("el-tag",{staticStyle:{"margin-bottom":"2rem","margin-left":"0"},attrs:{type:"info"}},[t._v("岗位职责制度落实:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.rulesAndRegulations,callback:function(e){t.$set(t.getScore,"rulesAndRegulations",e)},expression:"getScore.rulesAndRegulations"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.trainingPlan,callback:function(e){t.$set(t.getScore,"trainingPlan",e)},expression:"getScore.trainingPlan"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.6rem"},model:{value:t.getScore.responsibilitiesAndSystems,callback:function(e){t.$set(t.getScore,"responsibilitiesAndSystems",e)},expression:"getScore.responsibilitiesAndSystems"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}})],1)],1)],1)],1),n("el-col",{attrs:{span:4}},[n("div",{staticStyle:{"margin-top":"0%","margin-left":"20%",width:"50%"}},[n("el-row",{staticStyle:{"margin-top":"0%",height:"15%"}},[n("el-tag",{attrs:{type:"info"}},[t._v("特色指标:特色创新类")])],1),n("el-row",{staticStyle:{height:"15%","margin-top":"15%"}},[n("el-tag",{attrs:{type:"danger"}},[t._v("1-10分")])],1),n("el-row",{staticStyle:{height:"15%","margin-top":"15%"}},[n("el-select",{staticStyle:{width:"6rem"},model:{value:t.getScore.characteristicIndex,callback:function(e){t.$set(t.getScore,"characteristicIndex",e)},expression:"getScore.characteristicIndex"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}}),n("el-option",{attrs:{value:"5",label:"5"}}),n("el-option",{attrs:{value:"6",label:"6"}}),n("el-option",{attrs:{value:"7",label:"7"}}),n("el-option",{attrs:{value:"8",label:"9"}}),n("el-option",{attrs:{value:"9",label:"9"}}),n("el-option",{attrs:{value:"10",label:"10"}})],1)],1)],1)])],1),n("el-row",{attrs:{type:"flex",gutter:20}},[n("el-col",{staticStyle:{height:"1rem"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClassSecondRow",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("师资队伍")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("最高分依次为3/3/4")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("师德师风:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("梯队结构:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教授上课:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.teachersMorality,callback:function(e){t.$set(t.getScore,"teachersMorality",e)},expression:"getScore.teachersMorality"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.echelonStructure,callback:function(e){t.$set(t.getScore,"echelonStructure",e)},expression:"getScore.echelonStructure"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.professorTeaching,callback:function(e){t.$set(t.getScore,"professorTeaching",e)},expression:"getScore.professorTeaching"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"1rem"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClassSecondRow",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("日常管理")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("最高分依次为4/3/3")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("听评课及教学观摩:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教研活动:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教学文档:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.teachingObservation,callback:function(e){t.$set(t.getScore,"teachingObservation",e)},expression:"getScore.teachingObservation"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.researchActivities,callback:function(e){t.$set(t.getScore,"researchActivities",e)},expression:"getScore.researchActivities"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.teachingDocuments,callback:function(e){t.$set(t.getScore,"teachingDocuments",e)},expression:"getScore.teachingDocuments"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"1rem"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClassSecondRow",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("教学管理")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("最高分依次为3/3/4")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教室及教学计划:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("考试管理:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("质量监控:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.teachingPlan,callback:function(e){t.$set(t.getScore,"teachingPlan",e)},expression:"getScore.teachingPlan"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.examinationManagement,callback:function(e){t.$set(t.getScore,"examinationManagement",e)},expression:"getScore.examinationManagement"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"1.5rem"},model:{value:t.getScore.qualityControl,callback:function(e){t.$set(t.getScore,"qualityControl",e)},expression:"getScore.qualityControl"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}})],1)],1)],1)],1),n("el-col",{staticStyle:{height:"1rem"},attrs:{span:5}},[n("el-row",[n("el-col",{staticClass:"colClassSecondRow",attrs:{span:5}},[n("el-row",[n("el-tag",{attrs:{type:"info"}},[t._v("教研教改")])],1),n("el-row",[n("el-tag",{attrs:{type:"danger"}},[t._v("最高分依次为3/3/4")])],1)],1),n("el-col",{staticClass:"colClassOne",attrs:{span:9}},[n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教改项目:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教改论文:")]),n("el-tag",{staticStyle:{"margin-bottom":"1.7rem"},attrs:{type:"info"}},[t._v("教改措施:")])],1),n("el-col",{attrs:{span:7}},[n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.reformProject,callback:function(e){t.$set(t.getScore,"reformProject",e)},expression:"getScore.reformProject"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.reformPaper,callback:function(e){t.$set(t.getScore,"reformPaper",e)},expression:"getScore.reformPaper"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}})],1),n("el-select",{staticStyle:{width:"6rem","margin-bottom":"1.2rem","margin-left":"0.3rem"},model:{value:t.getScore.reformMeasures,callback:function(e){t.$set(t.getScore,"reformMeasures",e)},expression:"getScore.reformMeasures"}},[n("el-option",{attrs:{value:"1",label:"1"}}),n("el-option",{attrs:{value:"2",label:"2"}}),n("el-option",{attrs:{value:"3",label:"3"}}),n("el-option",{attrs:{value:"4",label:"4"}})],1)],1)],1)],1),n("el-col",{attrs:{span:4}},[n("el-tag",{attrs:{type:"info"}},[t._v("总分:")]),n("el-input",{staticStyle:{"margin-left":"5%",width:"30%"},attrs:{disabled:""},model:{value:t.totalScore,callback:function(e){t.totalScore=e},expression:"totalScore"}}),t._v("分 "),n("el-button",{on:{click:t.handleAdd}},[t._v("提交")])],1)],1)],1)],1)},r=[],i=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("el-form",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"姓名"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.name))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"出生年月"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t._f("parseTime")(t.form.birthdate)))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"性别"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.gender))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"政治面貌"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.politicalAffiliation))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"基层教学组织"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.nameOfTeachingOrganization))])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"隶属单位"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.subordinateUnit))])])])],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"类别"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.classification))])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批等级"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.approvalLevel.provincialQualificationOfTime))])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批时间"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t._f("parseTime")(t.form.approvalLevel.provincialExcellenceOfTime)))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"最终学历（学位）"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.degree))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"授予单位"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.authorizationDepartment))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"授予时间"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t._f("parseTime")(t.form.dateOfGrant)))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"高校教龄"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.universityTeachingAge+"年"))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.professionalTitle))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"行政职务"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.administrativeDuties))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"任基层教学组织负责人时间"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t._f("parseTime")(t.form.dateOfHeadOfBasicTeachingOrganization)))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"岗位津贴"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.postAllowance+"元"))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"近2学年任教课程"}},[n("div",{staticClass:"cell-content"},t._l(t.form.teachingCoursesInRecentTwoAcademicYears,(function(e,o){return n("span",{key:o},[t._v(t._s(e.course+"，"+e.period+"课时"))])})),0)])],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"年均教学工作量及减免比例"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.averageAnnualTeachingWorkloadAndReductionRatio))])])])],1)],1),n("el-row",[n("el-form-item",{attrs:{label:"主要教学业绩"}}),n("div",{staticClass:"section-content"},[n("p",[t._v(t._s(t.form.mainTeachingAchievements))])])],1)],1)],1)}),a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-header"},[n("span",[t._v("负责人情况")])])}],u=n("1d7f"),c=n("ed08"),s={props:{header:{type:String,required:!0},principalID:{type:String,required:!0}},filters:{parseTime:function(t){if(!t)return"";var e=new Date(t);return Object(c["a"])(e,"{y}年{m}月")}},data:function(){return{form:{nameOfTeachingOrganization:"",subordinateUnit:"",classification:"",approvalLevel:{provincialQualificationOfTime:"",provincialExcellenceOfTime:""},name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",authorizationDepartment:"",dateOfGrant:"",universityTeachingAge:"",professionalTitle:"",administrativeDuties:"",dateOfHeadOfBasicTeachingOrganization:"",postAllowance:"",teachingCoursesInRecentTwoAcademicYears:[],averageAnnualTeachingWorkloadAndReductionRatio:"",mainTeachingAchievements:""}}},watch:{principalID:function(t,e){this.principalID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(u["a"])(this.principalID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o])})).catch((function(t){console.log(t)}))}}},l=s,f=(n("6cb0"),n("2877")),d=Object(f["a"])(l,i,a,!1,null,null,null),m=d.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("el-table",{attrs:{data:this.form,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"birthdate",label:"出生年月",formatter:t.dateFormat}}),n("el-table-column",{attrs:{prop:"gender",label:"性别"}}),n("el-table-column",{attrs:{prop:"politicalAffiliation",label:"政治面貌"}}),n("el-table-column",{attrs:{prop:"degree",label:"最终学位"}}),n("el-table-column",{attrs:{prop:"professionalTitle",label:"职称"}}),n("el-table-column",{attrs:{prop:"administrativeDuties",label:"行政职务"}}),n("el-table-column",{attrs:{prop:"universityTeachingAge",label:"高校教龄"}}),n("el-table-column",{attrs:{width:"200",prop:"teachingCoursesInRecentTwoAcademicYears",label:"近2学年任教课程及学时"}})],1)],1)},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-header"},[n("span",[t._v("成员概况")])])}],h=(n("fb6a"),n("58bd")),v=n("c1df"),b=n.n(v),y={props:{header:{type:String,required:!0},membersID:{type:String,required:!0}},data:function(){return{form:[]}},watch:{membersID:function(t,e){this.membersID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(h["a"])(this.membersID).then((function(e){t.form=e.data.data})).catch((function(t){console.log(t)}))},getFileName:function(t){return t.slice(0,10)},dateFormat:function(t,e){var n=t[e.property];return void 0==n?"":b()(n).format("YYYY-MM")}}},x=y,w=(n("8144"),Object(f["a"])(x,g,p,!1,null,"8b1e7618",null)),S=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("el-form",[n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-header"},[n("span",[t._v("规章制度建设 ")])])}],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{attrs:{id:t.tinymceId}})])},_=[],T=(n("b680"),n("ce31"),n("8b58"),{props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,required:!0}},data:function(){return{tinymceId:this.id,tinymceFlag:1,hasChange:!1,hasInit:!1}},mounted:function(){var t=this;tinymce.init({selector:"#".concat(this.tinymceId),language:"zh_CN",menubar:"bar1 bar2",menu:{bar1:{title:"菜单栏",items:"copy paste"}},toolbar:"undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright ",setup:function(e){e.on("init",(function(n){e.setContent(t.value),t.hasInit=!0}))},readonly:1,height:600})},created:function(){},watch:{value:function(t){var e=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t)}))}},methods:{setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)}}}),D=T,E=(n("3689"),Object(f["a"])(D,O,_,!1,null,null,null)),B=E.exports,A=n("e5ac"),I={components:{Tinymce:B},data:function(){return{form:{content:""}}},props:{header:{type:String,required:!0},ruleAndRegulationID:{type:String,required:!0}},watch:{ruleAndRegulationID:function(t,e){this.ruleAndRegulationID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(A["a"])(this.ruleAndRegulationID).then((function(e){t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},M=I,F=(n("a215"),Object(f["a"])(M,C,k,!1,null,"3862cfc1",null)),R=F.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("div",{staticClass:"form-header"},[n("span",[t._v("教学组织")])]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"教师总数（人）"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.totalNumberOfTeachers))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"承担课程（门）"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.coursesUndertaken))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"人均周学时"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.perCapitaWeeklySchoolHours))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"人均指导毕业论文/设计"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.perCapitaGuidingGraduationThesis))])])])],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"教学事故（次）"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.teachingAccident))])])])],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"综合评教优秀以上人数及比例"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.comprehensiveEvaluationOfExcellentTeaching))])])])],1)],1),n("Tinymce1",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-table",{attrs:{data:t.info,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"professorName",label:"教授姓名"}}),n("el-table-column",{attrs:{prop:"course",label:"讲授课程"}}),n("el-table-column",{attrs:{prop:"period",label:"学时"}}),n("el-table-column",{attrs:{prop:"studentNumbers",label:"学生人数"}}),n("el-table-column",{attrs:{prop:"semesterTime",label:"学期时间"}})],1)],1)],1)},V=[],H=n("9367"),z={components:{Tinymce1:B},props:{header:{type:String,required:!0},teachingOrganizationID:{type:String,required:!0}},data:function(){return{form:{totalNumberOfTeachers:"",coursesUndertaken:"",perCapitaWeeklySchoolHours:"",perCapitaGuidingGraduationThesis:"",teachingAccident:"",comprehensiveEvaluationOfExcellentTeaching:"",content:""},info:[],content:""}},watch:{teachingOrganizationID:function(t,e){this.teachingOrganizationID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(H["a"])(this.teachingOrganizationID).then((function(e){t.form=e.data,t.info=e.data.info,t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},j=z,L=(n("4248"),Object(f["a"])(j,P,V,!1,null,"1cc02824",null)),N=L.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("Tinymce",{attrs:{value:"form.content.html"},model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-form",[n("el-table",{attrs:{data:t.form.newTeachers,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{label:"新入职教师姓名",prop:"nameOfNewTeacher"}}),n("el-table-column",{attrs:{label:"培训时间（学时）",prop:"trainingTime"}}),n("el-table-column",{attrs:{label:"培训地点",prop:"trainingPlace"}}),n("el-table-column",{attrs:{label:"培训单位",prop:"trainingInstitution"}}),n("el-table-column",{attrs:{label:"指导教师",prop:"supervisor"}}),n("el-table-column",{attrs:{label:"职称",prop:"professionalTitle"}})],1)],1)],1)},W=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-header"},[n("span",[t._v("队伍建设 ")])])}],G=n("34e7"),Y={components:{Tinymce:B},data:function(){return{form:{newTeachers:[],content:{html:""}}}},props:{header:{type:String,required:!0},teamBuildingID:{type:String,required:!0}},watch:{teamBuildingID:function(t,e){this.teamBuildingID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(G["a"])(this.teamBuildingID).then((function(e){t.form=e.data})).catch((function(t){console.log(t)}))}}},q=Y,X=(n("1981"),Object(f["a"])(q,U,W,!1,null,"6690d6d8",null)),$=X.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("div",{staticClass:"form-header"},[n("span",[t._v("课程教材概述")])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-table",{attrs:{data:t.form.infoOnLine,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"onlineCourseName",label:"在线开放课程"}}),n("el-table-column",{attrs:{prop:"platformSite",label:"平台网址"}}),n("el-table-column",{attrs:{prop:"chosenNumbers",label:"选课人数"}}),n("el-table-column",{attrs:{prop:"period",label:"总课时"}}),n("el-table-column",{attrs:{prop:"completionTime",formatter:t.dateFormatFir,label:"建成时间"}}),n("el-table-column",{attrs:{prop:"level",label:"校级/省级"}})],1),n("el-table",{attrs:{data:t.form.infoText,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingMaterial",label:"规划教材名称"}}),n("el-table-column",{attrs:{prop:"participatingEditor",label:"主编/参编"}}),n("el-table-column",{attrs:{prop:"theNumberOfWordsInTheChapter",label:"章节字数"}}),n("el-table-column",{attrs:{prop:"yearOfPublication",formatter:t.dateFormatSec,label:"出版年"}}),n("el-table-column",{attrs:{prop:"press",label:"出版社"}}),n("el-table-column",{attrs:{prop:"level",label:"省级/国家级"}})],1)],1)],1)},J=[],Q=n("fe41"),Z={components:{Tinymce:B},props:{header:{type:String,required:!0},courseMaterialID:{type:String,required:!0}},data:function(){return{form:{infoOnLine:[],infoText:[],content:""}}},watch:{courseMaterialID:function(t,e){this.courseMaterialID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(Q["a"])(this.courseMaterialID).then((function(e){t.form.infoOnLine=e.data.onlineCourses,t.form.infoText=e.data.textbooks,t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))},dateFormatFir:function(t,e){var n=t[e.property];return void 0==n?"":b()(n).format("YYYY-MM-DD")},dateFormatSec:function(t,e){var n=t[e.property];return void 0==n?"":b()(n).format("YYYY")}}},tt=Z,et=(n("cfac"),Object(f["a"])(tt,K,J,!1,null,"6f7f4e85",null)),nt=et.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("教学研究")])])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-table",{attrs:{data:this.form.educationalReformProjects,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfEducationalReformProject",label:"教改项目名称"}}),n("el-table-column",{attrs:{prop:"timeOfProjectEstablishment",formatter:t.dateFormat,label:"立项时间"}}),n("el-table-column",{attrs:{prop:"projectSource",label:"项目来源"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"members",label:"成员"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}})],1),n("el-table",{attrs:{data:this.form.teachingResearchPapers,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingResearchPaper",label:"教研论文名称"}}),n("el-table-column",{attrs:{prop:"publishedTime",formatter:t.dateFormat,label:"发表时间"}}),n("el-table-column",{attrs:{prop:"journalName",label:"期刊名称"}}),n("el-table-column",{attrs:{prop:"authorInChef",label:"第一作者"}})],1),n("el-table",{attrs:{data:this.form.representativeTeachingAndResearchActivities,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"time",formatter:t.dateFormat,label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"hostPosition",label:"支持人职务"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}})],1),n("el-table",{attrs:{data:this.form.representativeOffCampusTeachingSeminars,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"time",label:"时间",formatter:t.dateFormat}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"organizer",label:"主办单位"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}})],1)],1)},rt=[],it=n("09bf"),at={components:{Tinymce:B},props:{header:{type:String,required:!0},teachingResearchID:{type:String,required:!0}},data:function(){return{info:[],form:{content:"",educationalReformProjects:[],teachingResearchPapers:[],representativeTeachingAndResearchActivities:[],representativeOffCampusTeachingSeminars:[]}}},watch:{teachingResearchID:function(t,e){this.teachingResearchID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(it["a"])(this.teachingResearchID).then((function(e){t.form.educationalReformProjects=e.data.educationalReformProjects,t.form.teachingResearchPapers=e.data.teachingResearchPapers,t.form.representativeTeachingAndResearchActivities=e.data.representativeTeachingAndResearchActivities,t.form.representativeOffCampusTeachingSeminars=e.data.representativeOffCampusTeachingSeminars,t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))},dateFormat:function(t,e){var n=t[e.property];return void 0==n?"":b()(n).format("YYYY-MM-DD")}}},ut=at,ct=(n("ad47"),Object(f["a"])(ut,ot,rt,!1,null,"ab6b7796",null)),st=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("专业建设")])])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业名称"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.info.nameOfSpecialty))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业认证"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.info.certificationOfSpecialty))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业评估"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.info.evaluationOfSpecialty))])])])],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"获得特色、综合改革试点专业等称号"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.info.features))])])])],1)],1)],1)},ft=[],dt=n("6b84"),mt={components:{Tinymce:B},props:{header:{type:String,required:!0},specialtyConstructionID:{type:String,required:!0}},filters:{parseTime:function(t){if(!t)return"";var e=new Date(t);return Object(c["a"])(e,"{y}年{m}月")}},data:function(){return{info:{},form:{content:""}}},watch:{specialtyConstructionID:function(t,e){this.specialtyConstructionID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(dt["a"])(this.specialtyConstructionID).then((function(e){t.info=e.data.info,t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},gt=mt,pt=(n("0762"),Object(f["a"])(gt,lt,ft,!1,null,"0b87d1e7",null)),ht=pt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("实践教学")])])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-table",{attrs:{data:t.info,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfSchoolPracticalUnit",label:"校内实践"}}),n("el-table-column",{attrs:{prop:"area",label:"使用面积/平方米"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeTeachingInSchool",label:"校内实践教学工位数/个"}}),n("el-table-column",{attrs:{prop:"experimentalCourses",label:"承接实践课程"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeStudents",label:"实践学生人数/学年"}})],1)],1)},bt=[],yt=n("2411"),xt={components:{Tinymce:B},props:{header:{type:String,required:!0},practicalTeachingID:{type:String,required:!0}},data:function(){return{form:{content:""},info:[]}},watch:{practicalTeachingID:function(t,e){this.practicalTeachingID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(yt["a"])(this.practicalTeachingID).then((function(e){t.info=e.data.info,t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},wt=xt,St=(n("2721"),Object(f["a"])(wt,vt,bt,!1,null,"6a59fe04",null)),Ct=St.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("div",{staticClass:"form-header"},[n("span",[t._v("条件保障")])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"教师人数"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.numberOfTeacher))])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"年度运行经费"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.annualOperatingExpenses)+"元")])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"行政办公面积"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.administrativeOfficeSpace)+"平方米")])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"教学资料档案室面积"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.areaOfTeachingMaterialsArchives)+"平方米")])])])],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{prop:"officeFacilities",label:"办公设施"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(t.form.officeFacilities))])])])],1)],1)],1)},Ot=[],_t=n("9944"),Tt={components:{Tinymce:B},props:{header:{type:String,required:!0},conditionGuaranteeID:{type:String,required:!0}},data:function(){return{form:{administrativeOfficeSpace:"",annualOperatingExpenses:"",areaOfTeachingMaterialsArchives:"",numberOfTeacher:"",officeFacilities:"",content:""}}},watch:{conditionGuaranteeID:function(t,e){this.conditionGuaranteeID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(_t["a"])(this.conditionGuaranteeID).then((function(e){console.log(e);var n=e.data.info;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},Dt=Tt,Et=(n("04eb"),Object(f["a"])(Dt,kt,Ot,!1,null,"949912f2",null)),Bt=Et.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("人才培养能力")])])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),n("el-table",{attrs:{data:t.form.info,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"教师姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeachingContest",label:"教学竞赛名称"}}),n("el-table-column",{attrs:{prop:"organizer",label:"组织单位"}}),n("el-table-column",{attrs:{prop:"time",formatter:t.dateFormat,label:"时间"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}})],1),n("div",{staticClass:"form-header"},[n("span",[t._v("每类5项代表性成果")])]),n("el-form-item",{attrs:{label:"学科竞赛"}},[n("div",{staticClass:"cell-content"},[n("el-table",{attrs:{data:this.form.outcome.subjectCompetition}},[n("el-table-column",{attrs:{prop:"year",label:"年度"}}),n("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),n("el-table-column",{attrs:{prop:"awardWinningWork",label:"获奖作品"}}),n("el-table-column",{attrs:{prop:"level",label:"获奖等级"}}),n("el-table-column",{attrs:{prop:"nameOfWinner",label:"获奖人姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"指导老师姓名"}})],1)],1)]),n("el-form-item",{attrs:{label:"职业技能大赛"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(this.form.outcome.professionalSkillsCompetition))])])]),n("el-form-item",{attrs:{label:"互联网+创业大赛"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(this.form.outcome.internetPlusEntrepreneurshipContest))])])]),n("el-form-item",{attrs:{label:"创新创业情况"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(this.form.outcome.innovationAndEntrepreneurship))])])]),n("el-form-item",{attrs:{label:"发表论文"}},[n("div",{staticClass:"cell-content"},[n("span",[t._v(t._s(this.form.outcome.publishTheses))])])])],1)},It=[],Mt=n("3ec1"),Ft={components:{Tinymce:B},props:{header:{type:String,required:!0},talentCultivationAbilityID:{type:String,required:!0}},filters:{},data:function(){return{form:{info:[],outcome:{subjectCompetition:[],professionalSkillsCompetition:"",internetPlusEntrepreneurshipContest:"",innovationAndEntrepreneurship:"",publishTheses:""},content:""}}},watch:{talentCultivationAbilityID:function(t,e){this.talentCultivationAbilityID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(Mt["a"])(this.talentCultivationAbilityID).then((function(e){console.log(e),t.form.info=e.data.info;var n=e.data.outcome;for(var o in n)"function"!==typeof n[o]&&(t.form.outcome[o]=n[o]);t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))},dateFormat:function(t,e){var n=t[e.property];return void 0==n?"":b()(n).format("YYYY-MM-DD")}}},Rt=Ft,Pt=(n("b161"),Object(f["a"])(Rt,At,It,!1,null,"1c9555cc",null)),Vt=Pt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("今后建设计划")])])]),n("Tinymce",{attrs:{value:"form.content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)},zt=[],jt=n("537c"),Lt={components:{Tinymce:B},props:{header:{type:String,required:!0},futureConstructionPlanID:{type:String,required:!0}},data:function(){return{form:{content:""}}},watch:{futureConstructionPlanID:function(t,e){this.futureConstructionPlanID=t,this.getInfo()}},created:function(){},methods:{getInfo:function(){var t=this;Object(jt["a"])(this.futureConstructionPlanID).then((function(e){console.log(e),t.form.content=e.data.content.html})).catch((function(t){console.log(t)}))}}},Nt=Lt,Ut=(n("65bb"),Object(f["a"])(Nt,Ht,zt,!1,null,"52f495ce",null)),Wt=Ut.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}]},[n("el-form",[n("el-row",[n("div",{staticClass:"form-header"},[n("span",[t._v("审核意见反馈")])])]),n("el-form-item",["院级管理员"==t.roles.role?n("el-radio",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],attrs:{label:"院级审核通过"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v("院级通过审核")]):t._e(),"校级管理员"==t.roles.role?n("el-radio",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],attrs:{label:"校级审核通过"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v("校级通过审核")]):t._e(),n("el-radio",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],attrs:{label:"返回修改"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v("返回修改")])],1),n("Tinymce",{model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],on:{click:function(e){return t.back()}}},[t._v("取消")]),n("el-button",{directives:[{name:"has",rawName:"v-has",value:t.roles,expression:"roles"}],attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)],1)],1)},Yt=[],qt=n("1da1"),Xt=(n("96cf"),n("d5a5")),$t=n("fdc2"),Kt=n("4360"),Jt={props:{header:{type:String,required:!0},opinionFeedbackID:{type:String,required:!0}},components:{Tinymce:Xt["a"]},data:function(){return{roles:{jurisdictionRole:[],role:""},form:{content:{html:""}},status:""}},watch:{opinionFeedbackID:function(t,e){this.opinionFeedbackID=t,this.getInfo()}},created:function(){this.getRole()},methods:{getRole:function(){this.roles.jurisdictionRole.push("院级管理员"),this.roles.jurisdictionRole.push("校级管理员"),this.roles.role=Kt["a"].getters.role},back:function(){this.$router.push({path:"/approval-page/approval-page"})},getInfo:function(){var t=this;Object($t["a"])(this.opinionFeedbackID).then((function(e){t.form.content.html=e.data.content.html})).catch((function(t){console.log(t)}))},submit:function(){var t=this;return Object(qt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.getHtml(),""!==t.form.content.html){e.next=3;break}return e.abrupt("return",t.$message.info("反馈意见不能为空"));case 3:return e.next=5,t.$parent.$parent.updateForm();case 5:t.updateTable(),t.back();case 7:case"end":return e.stop()}}),e)})))()},updateTable:function(){Object($t["b"])(this.opinionFeedbackID,this.form).then((function(t){})).catch((function(t){console.log(t)}))},getHtml:function(){this.form.content.html=tinymce.activeEditor.getContent(),this.$emit("getStatus",this.status)}}},Qt=Jt,Zt=(n("efcb"),Object(f["a"])(Qt,Gt,Yt,!1,null,"0cb14b86",null)),te=Zt.exports,ee=n("9695"),ne=n("b775");function oe(t,e){return Object(ne["a"])({url:"/evaluate/total-score/"+t+"/"+e,method:"post"})}var re=n("cba3"),ie={components:{principal:m,member:S,rules:R,organization:N,teambuilding:$,teachingresearch:st,practicalteaching:Ct,conditionguarantee:Bt,talentcultivationability:Vt,futureconstructionplan:Wt,opinionfeedback:te,coursematerial:nt,specialtyconstruction:ht},data:function(){return{getScore:{developmentGoals:"",developmentOrientation:"",trainingEffect:"",runningParameters:"",constructionResults:"",constructionPlanning:"",curriculumReform:"",textbookSelection:"",textbookConstruction:"",constructionAchievements:"",trainingBase:"",laboratoryConstruction:"",competitionActivities:"",guidanceActivities:"",laboratoryCoverage:"",rulesAndRegulations:"",trainingPlan:"",responsibilitiesAndSystems:"",teachersMorality:"",echelonStructure:"",professorTeaching:"",teachingObservation:"",researchActivities:"",teachingDocuments:"",teachingPlan:"",examinationManagement:"",qualityControl:"",reformProject:"",reformPaper:"",reformMeasures:"",characteristicIndex:""},drawer:!1,flag:!1,giveMarkFlage:!1,dialogVisible:!1,grade:{ruleAndRegulation:0,teamBuilding:0,teachingOrganization:0,courseMaterial:0,teachingResearch:0,specialtyConstruction:0,practicalTeaching:0,conditionGuarantee:0,talentCultivationAbility:0,futureConstructionPlan:0,opinionFeedback:0,totalGrade:0},roles:{jurisdictionRole:[],role:""},form:{info:{formID:this.$route.query.formID,organization:"",college:"",principal:"",professionalTitle:"",status:"",reviewer:"",totalScore:"",userNumberOfMarker:"",userNumberOfReviewer:"",type:"",level:"",createYear:"",principalNumber:"",faceMultiple:"",faceSchoolMajors:[],teacher:[],teamName:"",baseEducationType:"",teamType:"",getTime:"",teamLevel:"",awardDepartment:""},principalID:"",membersID:"",ruleAndRegulationID:"",teamBuildingID:"",teachingOrganizationID:"",courseMaterialID:"",teachingResearchID:"",specialtyConstructionID:"",practicalTeachingID:"",conditionGuaranteeID:"",talentCultivationAbilityID:"",futureConstructionPlanID:"",opinionFeedbackID:""},formID:"",item:{title:"",formID:"",createTime:""},userNumber:""}},created:function(){this.getRole(),this.getFormID(),this.getInfo()},computed:{totalScore:{get:function(){var t=0;for(var e in this.getScore)""===this.getScore[e]?t+=0:t+=parseFloat(this.getScore[e]);return t}}},methods:{toEvaluate:function(){"评定结束"!==this.form.info.status?!0===this.giveMarkFlage?this.$message.info("已评定"):this.drawer=!0:this.$message.info("已评定")},getRole:function(){this.roles.jurisdictionRole.push("评审专家"),this.roles.role=Kt["a"].getters.role},getFormID:function(){this.formID=this.$route.query.formID,this.item=this.$route.query.item,this.userNumber=this.$route.query.userNumber},getInfo:function(){var t=this;Object(ee["a"])(this.formID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o])})).catch((function(t){console.log(t)}))},updateForm:function(){var t=this;this.form.info.reviewer=Kt["a"].getters.name,this.form.info.userNumberOfReviewer=Kt["a"].getters.userNumber,Object(ee["b"])(this.formID,this.form).then((function(){null!=t.item&&void 0!=t.item&&null!=t.userNumber&&void 0!=t.userNumber&&Object(re["b"])(t.item,t.userNumber)})).catch((function(t){console.log(t)}))},getStatus:function(t){this.form.info.status=t},handleAdd:function(){var t=this;for(var e in this.getScore)if("0"===this.getScore[e]||""===this.getScore[e])return void this.$message.error("分数不能为0或空");parseFloat(this.totalGrade)>210?this.$message.info("总分大于210,输入有误"):this.$confirm("确认后评分将无法修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.giveMarkFlage=!0,t.giveMarks(),t.drawer=!1,t.$message.success("评分成功")})).catch((function(){t.$message({type:"info",message:"已取消提交"})}))},giveMarks:function(){var t=this;oe(this.formID,this.totalScore).then((function(e){console.log(t.totalScore)})).catch((function(t){console.log(t)}))},deleteToDoItem:function(t,e){Object(re["b"])(t,e).then((function(t){})).catch((function(t){console.log(t)}))}}},ae=ie,ue=(n("d43b"),Object(f["a"])(ae,o,r,!1,null,"ff513f92",null));e["default"]=ue.exports},9367:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-organization/"+t,method:"get"})}},9695:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/total/"+t,method:"get"})}function i(t,e){return Object(o["a"])({url:"declaration-form/status-reviewer/"+t,method:"post",data:e})}},9944:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/condition-guarantee/"+t,method:"get"})}},a215:function(t,e,n){"use strict";n("ff3d")},a7f8:function(t,e,n){"use strict";n("e6e5")},ad47:function(t,e,n){"use strict";n("0d78")},af38:function(t,e,n){},af38d:function(t,e,n){},b161:function(t,e,n){"use strict";n("6d79a")},cba3:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u}));var o=n("b775");function r(t){return Object(o["a"])({url:"/to-do/get-info/"+t,method:"get"})}function i(t,e){return Object(o["a"])({url:"/to-do/save-info/"+e,method:"post",data:t})}function a(t,e){return Object(o["a"])({url:"/to-do/delete-info/"+e,method:"delete",data:t})}function u(t){return Object(o["a"])({url:"/to-do/get-numbers-info/"+t,method:"get"})}},ce31:function(t,e,n){(function(t){var e=n("7037").default;n("99af"),n("a4d3"),n("b0c0"),n("fb6a"),n("a630"),n("3ca3"),n("b64b"),n("a15b"),n("d3b7"),n("ddb0"),n("d81d"),n("25f0"),n("a9e3"),n("5319"),n("ac1f"),n("841c"),n("dca8"),n("1276"),n("4de4"),n("466d"),n("c7cd"),n("498a"),n("7db0"),n("18a5"),n("4d63"),n("a434"),n("9911"),n("e01a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("b680"),n("4ec9"),function(){"use strict";var n=function(){},o=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},r=function(t){return function(){return t}},i=function(t){return t};function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var u=function(t){return function(e){return!t(e)}},c=function(t){return function(){throw new Error(t)}},s=r(!1),l=r(!0),f=tinymce.util.Tools.resolve("tinymce.ThemeManager"),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function m(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var p,h,v,b,y,x,w=function(){return S},S=(p=function(t){return t.isNone()},{fold:function(t,e){return t()},is:s,isSome:s,isNone:l,getOr:v=function(t){return t},getOrThunk:h=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:v,orThunk:h,map:w,each:n,bind:w,exists:s,forall:l,filter:w,equals:p,equals_:p,toArray:function(){return[]},toString:r("none()")}),C=function t(e){var n=r(e),o=function(){return a},i=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?a:S},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return a},k={some:C,none:w,from:function(t){return null===t||void 0===t?S:C(t)}},O=function(t){return function(n){return r=e(o=n),(null===o?"null":"object"==r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===t;var o,r}},_=function(t){return function(n){return e(n)===t}},T=O("string"),D=O("object"),E=O("array"),B=_("boolean"),A=(b=void 0,function(t){return b===t}),I=function(t){return!(null===(e=t)||void 0===e);var e},M=_("function"),F=_("number"),R=function(t,e){if(E(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},P=Array.prototype.slice,V=Array.prototype.indexOf,H=Array.prototype.push,z=function(t,e){return V.call(t,e)},j=function(t,e){return-1<z(t,e)},L=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},N=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},U=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=P.call(t,o,o+e);n.push(r)}return n},W=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},G=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},Y=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},q=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},X=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},$=function(t,e,n){return G(t,(function(t){n=e(n,t)})),n},K=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return k.some(i);if(n(i,o))break}return k.none()}(t,e,s)},J=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return k.some(n);return k.none()},Q=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!E(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);H.apply(e,t[n])}return e},Z=function(t,e){return Q(W(t,e))},tt=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},et=function(t){var e=P.call(t,0);return e.reverse(),e},nt=function(t,e){return q(t,(function(t){return!j(e,t)}))},ot=function(t,e){var n=P.call(t,0);return n.sort(e),n},rt=function(t,e){return 0<=e&&e<t.length?k.some(t[e]):k.none()},it=function(t){return rt(t,0)},at=function(t){return rt(t,t.length-1)},ut=M(Array.from)?Array.from:function(t){return P.call(t)},ct=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return k.none()},st=function t(e){return{is:function(t){return e===t},isValue:l,isError:s,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return k.some(e)}}},lt=function t(e){return{is:s,isValue:s,isError:l,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return c(String(e))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:n,bind:function(n){return t(e)},exists:s,forall:l,toOptional:k.none}},ft={value:st,error:lt,fromOption:function(t,e){return t.fold((function(){return lt(e)}),st)}};(x=y=y||{})[x.Error=0]="Error",x[x.Value=1]="Value";var dt,mt,gt=function(t,e,n){return t.stype===y.Error?e(t.serror):n(t.svalue)},pt=function(t){return{stype:y.Value,svalue:t}},ht=function(t){return{stype:y.Error,serror:t}},vt=function(t){return t.fold(ht,pt)},bt=function(t){return gt(t,ft.error,ft.value)},yt=pt,xt=function(t){var e=[],n=[];return G(t,(function(t){gt(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},wt=ht,St=function(t,e){return t.stype===y.Value?e(t.svalue):t},Ct=function(t,e){return t.stype===y.Error?e(t.serror):t},kt=function(t,e){return t.stype===y.Value?{stype:y.Value,svalue:e(t.svalue)}:t},Ot=function(t,e){return t.stype===y.Error?{stype:y.Error,serror:e(t.serror)}:t},_t=Object.keys,Tt=Object.hasOwnProperty,Dt=function(t,e){for(var n=_t(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},Et=function(t,e){return Bt(t,(function(t,n){return{k:n,v:e(t,n)}}))},Bt=function(t,e){var n={};return Dt(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},At=function(t,e){var o,r,i,a,u={};return o=e,a=u,r=function(t,e){a[e]=t},i=n,Dt(t,(function(t,e){(o(t,e)?r:i)(t,e)})),u},It=function(t,e){var n=[];return Dt(t,(function(t,o){n.push(e(t,o))})),n},Mt=function(t,e){for(var n=_t(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return k.some(a)}return k.none()},Ft=function(t){return It(t,(function(t){return t}))},Rt=function(t,e){return Pt(t,e)?k.from(t[e]):k.none()},Pt=function(t,e){return Tt.call(t,e)},Vt=function(t,e){return Pt(t,e)&&void 0!==t[e]&&null!==t[e]},Ht=function(t){if(!E(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return G(t,(function(o,r){var i=_t(o);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!E(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=_t(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!tt(e,(function(t){return j(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n},zt=Object.prototype.hasOwnProperty,jt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i=e[r];for(var a in i)zt.call(i,a)&&(o[a]=t(o[a],i[a]))}return o}},Lt=jt((function(t,e){return D(t)&&D(e)?Lt(t,e):e})),Nt=jt((function(t,e){return e})),Ut=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},Wt=Ht([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Gt=function(t){return Wt.defaultedThunk(r(t))},Yt=Wt.strict,qt=Wt.asOption,Xt=Wt.defaultedThunk,$t=(Wt.asDefaultedOptionThunk,Wt.mergeWithThunk),Kt=(Ht([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){var n={};return n[t]=e,n}),Jt=function(t,e){return n=e,o={},Dt(t,(function(t,e){j(n,e)||(o[e]=t)})),o;var n,o},Qt=Kt,Zt=function(t){return e={},G(t,(function(t){e[t.key]=t.value})),e;var e},te=function(t,e){var n,o,r,i,a,u=(n=[],o=[],G(t,(function(t){t.fold((function(t){n.push(t)}),(function(t){o.push(t)}))})),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,ft.error(Q(a))):(i=e,0===(r=u.values).length?ft.value(i):ft.value(Lt(i,Nt.apply(void 0,r))))},ee=function(t){return o(wt,Q)(t)},ne=function(t,e){var n,o,r=xt(t);return 0<r.errors.length?ee(r.errors):(n=r.values,o=e,0<n.length?yt(Lt(o,Nt.apply(void 0,n))):yt(o))},oe=function(t){var e=xt(t);return 0<e.errors.length?ee(e.errors):yt(e.values)},re=function(t){return D(t)&&100<_t(t).length?" removed due to size":JSON.stringify(t,null,2)},ie=function(t,e){return wt([{path:t,getErrorInfo:e}])},ae=Ht([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ue=function(t,e,n){return Rt(e,n).fold((function(){return o=n,r=e,ie(t,(function(){return'Could not find valid *strict* value for "'+o+'" in '+re(r)}));var o,r}),yt)},ce=function(t,e,n){var o=Rt(t,e).fold((function(){return n(t)}),i);return yt(o)},se=function(t,e,n,o){return n.fold((function(n,i,a,u){var c=function(e){var r=u.extract(t.concat([n]),o,e);return kt(r,(function(t){return Kt(i,o(t))}))},s=function(e){return e.fold((function(){var t=Kt(i,o(k.none()));return yt(t)}),(function(e){var r=u.extract(t.concat([n]),o,e);return kt(r,(function(t){return Kt(i,o(k.some(t)))}))}))};return a.fold((function(){return St(ue(t,e,n),c)}),(function(t){return St(ce(e,n,t),c)}),(function(){return St(yt(Rt(e,n)),s)}),(function(t){return St((r=t,i=Rt(o=e,n).map((function(t){return!0===t?r(o):t})),yt(i)),s);var o,r,i}),(function(t){var o=t(e),i=kt(ce(e,n,r({})),(function(t){return Lt(o,t)}));return St(i,c)}))}),(function(t,n){var r=n(e);return yt(Kt(t,o(r)))}))},le=function(t){return{extract:function(e,n,o){return Ct(t(o,n),(function(t){return n=t,ie(e,(function(){return n}));var n}))},toString:function(){return"val"}}},fe=function(t){var e=de(t),n=X(t,(function(t,e){return e.fold((function(e){return Lt(t,Qt(e,!0))}),r(t))}),{});return{extract:function(t,o,r){var i,a=B(r)?[]:_t(At(r,(function(t){return void 0!==t&&null!==t}))),u=q(a,(function(t){return!Vt(n,t)}));return 0===u.length?e.extract(t,o,r):(i=u,ie(t,(function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"})))},toString:e.toString}},de=function(t){return{extract:function(e,n,o){return r=e,i=o,a=n,u=W(t,(function(t){return se(r,i,t,a)})),ne(u,{});var r,i,a,u},toString:function(){return"obj{\n"+W(t,(function(t){return t.fold((function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},me=function(t){return{extract:function(e,n,o){var r=W(o,(function(o,r){return t.extract(e.concat(["["+r+"]"]),n,o)}));return oe(r)},toString:function(){return"array("+t.toString()+")"}}},ge=function(t){return{extract:function(e,n,o){for(var r=[],i=0,a=t;i<a.length;i++){var u=a[i].extract(e,n,o);if(u.stype===y.Value)return u;r.push(u)}return oe(r)},toString:function(){return"oneOf("+W(t,(function(t){return t.toString()})).join(", ")+")"}}},pe=function(t,e){return{extract:function(n,o,r){var a,u,c=_t(r),s=(a=n,u=c,me(le(t)).extract(a,i,u));return St(s,(function(t){var i=W(t,(function(t){return ae.field(t,t,Yt(),e)}));return de(i).extract(n,o,r)}))},toString:function(){return"setOf("+e.toString()+")"}}},he=r(le(yt)),ve=o(me,de),be=ae.state,ye=ae.field,xe=function(t,e,n,o,r){return Rt(o,r).fold((function(){return e=o,n=r,ie(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+re(e)}));var e,n}),(function(o){return o.extract(t.concat(["branch: "+r]),e,n)}))},we=function(t,e){return{extract:function(n,o,r){return Rt(r,t).fold((function(){return e=t,ie(n,(function(){return'Choice schema did not contain choice key: "'+e+'"'}));var e}),(function(t){return xe(n,o,r,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+_t(e)}}},Se=le(yt),Ce=function(t){return ve(t)},ke=function(t){return{extract:function(e,n,o){return t().extract(e,n,o)},toString:function(){return t().toString()}}},Oe=function(t){return le((function(e){return t(e).fold(wt,yt)}))},_e=function(t,e){return pe((function(e){return vt(t(e))}),e)},Te=function(t,e,n){return bt((o=t,r=i,a=n,u=e.extract([o],r,a),Ot(u,(function(t){return{input:a,errors:t}}))));var o,r,a,u},De=function(t){return t.fold((function(t){throw new Error(Be(t))}),i)},Ee=function(t,e,n){return De(Te(t,e,n))},Be=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,W(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: ")+re(t.input);var e,n},Ae=we,Ie=function(t,e){return we(t,Et(e,de))},Me=r(Se),Fe=function(t,n){return le((function(o){var r=e(o);return t(o)?yt(o):wt("Expected type: "+n+" but got: "+r)}))},Re=Fe(F,"number"),Pe=Fe(T,"string"),Ve=Fe(B,"boolean"),He=Fe(M,"function"),ze=function t(e){var n=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(n){return t(e[n])}));case"Map":return n(e.keys(),t)&&n(e.values(),t);case"Set":return n(e.keys(),t);default:return!1}},je=le((function(t){return ze(t)?yt(t):wt("Expected value to be acceptable for sending via postMessage")})),Le=function(t){return Oe((function(e){return j(t,e)?ft.value(e):ft.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},Ne=function(t){return ye(t,t,Yt(),he())},Ue=function(t,e){return ye(t,t,Yt(),e)},We=function(t){return Ue(t,Pe)},Ge=function(t,e){return ye(t,t,Yt(),Le(e))},Ye=function(t){return Ue(t,He)},qe=function(t,e){return ye(t,t,Yt(),de(e))},Xe=function(t,e){return ye(t,t,Yt(),ve(e))},$e=function(t,e){return ye(t,t,Yt(),me(e))},Ke=function(t){return ye(t,t,qt(),he())},Je=function(t,e){return ye(t,t,qt(),e)},Qe=function(t){return Je(t,Re)},Ze=function(t){return Je(t,Pe)},tn=function(t){return Je(t,He)},en=function(t,e){return Je(t,de(e))},nn=function(t,e){return ye(t,t,Gt(e),he())},on=function(t,e,n){return ye(t,t,Gt(e),n)},rn=function(t,e){return on(t,e,Re)},an=function(t,e){return on(t,e,Pe)},un=function(t,e,n){return on(t,e,Le(n))},cn=function(t,e){return on(t,e,Ve)},sn=function(t,e){return on(t,e,He)},ln=function(t,e,n){return on(t,e,me(n))},fn=function(t,e,n){return on(t,e,de(n))},dn=function(t,e){return be(t,e)},mn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},gn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},pn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return gn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return gn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return gn(n)},fromDom:gn,fromPoint:function(t,e,n){return k.from(t.dom.elementFromPoint(e,n)).map(gn)}},hn=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return bn(o(1),o(2))},vn=function(){return bn(0,0)},bn=function(t,e){return{major:t,minor:e}},yn={nu:bn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():hn(t,n)},unknown:vn},xn=function(t,e){var n=String(e).toLowerCase();return K(t,(function(t){return t.search(n)}))},wn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Sn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Cn=function(t,e){return-1!==t.indexOf(e)},kn=function(t,e){return o=e,r=(n=t).length-e.length,""===o||n.length>=o.length&&n.substr(r,r+o.length)===o;var n,o,r},On=(dt=/^\s+|\s+$/g,function(t){return t.replace(dt,"")}),_n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tn=function(t){return function(e){return Cn(e,t)}},Dn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Cn(t,"edge/")&&Cn(t,"chrome")&&Cn(t,"safari")&&Cn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_n],search:function(t){return Cn(t,"chrome")&&!Cn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Cn(t,"msie")||Cn(t,"trident")}},{name:"Opera",versionRegexes:[_n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Tn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Tn("firefox")},{name:"Safari",versionRegexes:[_n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Cn(t,"safari")||Cn(t,"mobile/"))&&Cn(t,"applewebkit")}}],En=[{name:"Windows",search:Tn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Cn(t,"iphone")||Cn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Tn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Tn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Tn("linux"),versionRegexes:[]},{name:"Solaris",search:Tn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Tn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Tn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Bn={browsers:r(Dn),oses:r(En)},An="Firefox",In=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(An),isSafari:o("Safari")}},Mn={unknown:function(){return In({current:void 0,version:yn.unknown()})},nu:In,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(An),safari:r("Safari")},Fn="Windows",Rn="Android",Pn="Solaris",Vn="FreeBSD",Hn="ChromeOS",zn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Fn),isiOS:o("iOS"),isAndroid:o(Rn),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(Pn),isFreeBSD:o(Vn),isChromeOS:o(Hn)}},jn={unknown:function(){return zn({current:void 0,version:yn.unknown()})},nu:zn,windows:r(Fn),ios:r("iOS"),android:r(Rn),linux:r("Linux"),osx:r("OSX"),solaris:r(Pn),freebsd:r(Vn),chromeos:r(Hn)},Ln=function(t,e){var n,o,i,a,u,c,s,l,f,d,m,g,p=Bn.browsers(),h=Bn.oses(),v=wn(p,t).fold(Mn.unknown,Mn.nu),b=Sn(h,t).fold(jn.unknown,jn.nu);return{browser:v,os:b,deviceType:(o=v,i=t,a=e,u=(n=b).isiOS()&&!0===/ipad/i.test(i),c=n.isiOS()&&!u,s=n.isiOS()||n.isAndroid(),l=s||a("(pointer:coarse)"),f=u||!c&&s&&a("(min-device-width:768px)"),d=c||s&&!f,m=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(i),g=!d&&!f&&!m,{isiPad:r(u),isiPhone:r(c),isTablet:r(f),isPhone:r(d),isTouch:r(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(m),isDesktop:r(g)})}},Nn=function(t){return window.matchMedia(t).matches},Un=Ut((function(){return Ln(navigator.userAgent,Nn)})),Wn=function(){return Un()},Gn=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Yn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},qn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return n=t.dom,o=e.dom,r=n,i=o,a=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(i)&a);var n,o,r,i,a},$n=function(t,e){return Wn().browser.isIE()?Xn(t,e):(n=e,o=t.dom,r=n.dom,o!==r&&o.contains(r));var n,o,r},Kn=function(t){return M(t)?t:s},Jn=function(t,e,n){for(var o=t.dom,r=Kn(n);o.parentNode;){o=o.parentNode;var i=pn.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return k.none()},Qn=function(t,e,n){var o=e(t),r=Kn(n);return o.orThunk((function(){return r(t)?k.none():Jn(t,e,r)}))},Zn=function(t,e){return qn(t.element,e.event.target)},to=function(t){if(!Vt(t,"can")&&!Vt(t,"abort")&&!Vt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Ee("Extracting event.handler",fe([nn("can",l),nn("abort",s),nn("run",n)]),t)},eo=function(t){var e,n,o,r,i=(n=function(t){return t.can},function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return $(e,(function(e,o){return e&&n(o).apply(void 0,t)}),!0)}),a=(o=e=t,r=function(t){return t.abort},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $(o,(function(e,n){return e||r(n).apply(void 0,t)}),!1)});return to({can:i,abort:a,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];G(t,(function(t){t.run.apply(void 0,e)}))}})},no=r,oo=no("touchstart"),ro=no("touchmove"),io=no("touchend"),ao=no("touchcancel"),uo=no("mousedown"),co=no("mousemove"),so=no("mouseout"),lo=no("mouseup"),fo=no("mouseover"),mo=no("focusin"),go=no("focusout"),po=no("keydown"),ho=no("keyup"),vo=no("input"),bo=no("change"),yo=no("click"),xo=no("transitionend"),wo=no("selectstart"),So=function(t){return r("alloy."+t)},Co={tap:So("tap")},ko=So("focus"),Oo=So("blur.post"),_o=So("paste.post"),To=So("receive"),Do=So("execute"),Eo=So("focus.item"),Bo=Co.tap,Ao=So("longpress"),Io=So("sandbox.close"),Mo=So("typeahead.cancel"),Fo=So("system.init"),Ro=So("system.touchmove"),Po=So("system.touchend"),Vo=So("system.scroll"),Ho=So("system.resize"),zo=So("system.attached"),jo=So("system.detached"),Lo=So("system.dismissRequested"),No=So("system.repositionRequested"),Uo=So("focusmanager.shifted"),Wo=So("slotcontainer.visibility"),Go=So("change.tab"),Yo=So("dismiss.tab"),qo=So("highlight"),Xo=So("dehighlight"),$o=function(t,e){Zo(t,t.element,e,{})},Ko=function(t,e,n){Zo(t,t.element,e,n)},Jo=function(t){$o(t,Do())},Qo=function(t,e,n){Zo(t,e,n,{})},Zo=function(t,e,n,o){var r=d({target:e},o);t.getSystem().triggerEvent(n,e,r)},tr=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},er=Zt,nr=function(t,e){return{key:t,value:to({abort:e})}},or=function(t){return{key:t,value:to({run:function(t,e){e.event.prevent()}})}},rr=function(t,e){return{key:t,value:to({run:e})}},ir=function(t,e,n){return{key:t,value:to({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}},ar=function(t){return function(e){return{key:t,value:to({run:function(t,n){Zn(t,n)&&e(t,n)}})}}},ur=function(t,e,n){var o,r,i=e.partUids[n];return r=i,rr(o=t,(function(t,e){t.getSystem().getByUid(r).each((function(t){tr(t,t.element,o,e)}))}))},cr=function(t,e){return rr(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).fold((function(){return Qn(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),s).getOr(t)}),(function(t){return t}));e(t,r,n)}))},sr=function(t){return rr(t,(function(t,e){e.cut()}))},lr=function(t,e){return ar(t)(e)},fr=ar(zo()),dr=ar(jo()),mr=ar(Fo()),gr=(mt=Do(),function(t){return rr(mt,t)}),pr=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),hr=function(t){return function(e){return e.dom.nodeType===t}},vr=hr(1),br=hr(3),yr=hr(9),xr=hr(11),wr=function(t){return pn.fromDom(t.dom.ownerDocument)},Sr=function(t){return yr(t)?t:wr(t)},Cr=function(t){return pn.fromDom(Sr(t).dom.documentElement)},kr=function(t){return pn.fromDom(Sr(t).dom.defaultView)},Or=function(t){return k.from(t.dom.parentNode).map(pn.fromDom)},_r=Or,Tr=function(t){return k.from(t.dom.offsetParent).map(pn.fromDom)},Dr=function(t){return W(t.dom.childNodes,pn.fromDom)},Er=function(t,e){var n=t.dom.childNodes;return k.from(n[e]).map(pn.fromDom)},Br=function(t){return xr(t)&&I(t.dom.host)},Ar=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode),Ir=r(Ar),Mr=Ar?function(t){return pn.fromDom(t.dom.getRootNode())}:Sr,Fr=function(t){return Br(t)?t:pn.fromDom(Sr(t).dom.body)},Rr=function(t){var e=Mr(t);return Br(e)?k.some(e):k.none()},Pr=function(t){return pn.fromDom(t.dom.host)},Vr=function(t){return I(t.dom.shadowRoot)},Hr=function(t,e){Or(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},zr=function(t,e){var n;(n=t,k.from(n.dom.nextSibling).map(pn.fromDom)).fold((function(){Or(t).each((function(t){Lr(t,e)}))}),(function(t){Hr(t,e)}))},jr=function(t,e){Er(t,0).fold((function(){Lr(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},Lr=function(t,e){t.dom.appendChild(e.dom)},Nr=function(t,e){G(e,(function(e){Lr(t,e)}))},Ur=function(t){t.dom.textContent="",G(Dr(t),(function(t){Wr(t)}))},Wr=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Gr=function(t){var e,n=Dr(t);0<n.length&&(e=t,G(n,(function(t){Hr(e,t)}))),Wr(t)},Yr=function(t){return t.dom.innerHTML},qr=function(t,e){var n,o,r=wr(t).dom,i=pn.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,Dr(pn.fromDom(o)));Nr(i,a),Ur(t),Lr(t,i)},Xr=function(t,e,n){if(!(T(n)||B(n)||F(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},$r=function(t,e,n){Xr(t.dom,e,n)},Kr=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Jr=function(t,e){return k.from(Kr(t,e))},Qr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Zr=function(t,e){t.dom.removeAttribute(e)},ti=function(t){return e=t,n=!1,pn.fromDom(e.dom.cloneNode(n));var e,n},ei=function(t){if(Br(t))return"#shadow-root";var e,n,o,r=ti(t);return e=r,n=pn.fromTag("div"),o=pn.fromDom(e.dom.cloneNode(!0)),Lr(n,o),Yr(n)},ni=er([{key:ko(),value:to({can:function(t,e){var n,o,r=e.event,i=r.originator,a=r.target;return o=a,!(qn(n=i,t.element)&&!qn(n,o))||(console.warn(ko()+" did not get interpreted by the desired target. \nOriginator: "+ei(i)+"\nTarget: "+ei(a)+"\nCheck the "+ko()+" event handlers"),!1)}})}]),oi=Object.freeze({__proto__:null,events:ni}),ri=0,ii=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ri+String(e)},ai=r("alloy-id-"),ui=r("data-alloy-id"),ci=ai(),si=ui(),li=function(t,e){Object.defineProperty(t.dom,si,{value:e,writable:!0})},fi=function(t){var e=vr(t)?t.dom[si]:null;return k.from(e)},di=ii,mi=i,gi=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+ei(t().element)+" is not in context.":""))}};return{debugInfo:r("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:s}},pi=gi(),hi=function(t){return W(t,(function(t){return kn(t,"/*")?t.substring(0,t.length-"/*".length):t}))},vi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:hi(i)}},t},bi=ii("alloy-premade"),yi=function(t){return Qt(bi,t)},xi=function(t){return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,g([e.getApis(),e],n))},n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:hi(i.slice(1))}},e;var e,n,o,r,i},wi={init:function(){return Si({readState:function(){return"No State required"}})}},Si=function(t){return t},Ci=function(t,e){var n={};return Dt(t,(function(t,o){Dt(t,(function(t,r){var i=Rt(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n},ki=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},Oi=function(t){return t.cHandler},_i=function(t,e){return{name:t,handler:e}},Ti=function(t,e,n){var o,r,i=d(d({},n),(o=t,r={},G(e,(function(t){r[t.name()]=t.handlers(o)})),r));return Ci(i,_i)},Di=function(t){var e,n=M(e=t)?{can:l,abort:s,run:e}:e;return function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=[t,e].concat(o);n.abort.apply(void 0,i)?e.stop():n.can.apply(void 0,i)&&n.run.apply(void 0,i)}},Ei=function(t,e,n){var o,r,i=e[n];return i?function(t,e,o,r){try{var i=ot(o,(function(n,o){var i=n[e],a=o[e],u=r.indexOf(i),c=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<c?-1:c<u?1:0}));return ft.value(i)}catch(n){return ft.error([n])}}("Event: "+n,"name",t,i).map((function(t){var e=W(t,(function(t){return t.handler}));return eo(e)})):(o=n,r=t,ft.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(W(r,(function(t){return t.name})),null,2)]))},Bi=function(t,e){var n=It(t,(function(t,n){return(1===t.length?ft.value(t[0].handler):Ei(t,e,n)).map((function(o){var r=Di(o),i=1<t.length?q(e[n],(function(e){return L(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return Qt(n,{handler:r,purpose:i})}))}));return te(n,{})},Ai="alloy.base.behaviour",Ii=function(t){var e,n;return Te("custom.definition",de([ye("dom","dom",Yt(),de([Ne("tag"),nn("styles",{}),nn("classes",[]),nn("attributes",{}),Ke("value"),Ke("innerHtml")])),Ne("components"),Ne("uid"),nn("events",{}),nn("apis",{}),ye("eventOrder","eventOrder",((e={})[Do()]=["disabling",Ai,"toggling","typeaheadevents"],e[ko()]=[Ai,"focusing","keying"],e[Fo()]=[Ai,"disabling","toggling","representing"],e[vo()]=[Ai,"representing","streaming","invalidating"],e[jo()]=[Ai,"representing","item-events","tooltipping"],e[uo()]=["focusing",Ai,"item-type-events"],e[oo()]=["focusing",Ai,"item-type-events"],e[fo()]=["item-type-events","tooltipping"],e[To()]=["receiving","reflecting","tooltipping"],n=e,Wt.mergeWithThunk(r(n))),Me()),Ke("domModification")]),t)},Mi=function(t,e){var n=Kr(t,e);return void 0===n||""===n?[]:n.split(" ")},Fi=function(t){return void 0!==t.dom.classList},Ri=function(t,e){return r=e,i=Mi(n=t,o="class").concat([r]),$r(n,o,i.join(" ")),!0;var n,o,r,i},Pi=function(t,e){return r=e,0<(i=q(Mi(n=t,o="class"),(function(t){return t!==r}))).length?$r(n,o,i.join(" ")):Zr(n,o),!1;var n,o,r,i},Vi=function(t,e){Fi(t)?t.dom.classList.add(e):Ri(t,e)},Hi=function(t){0===(Fi(t)?t.dom.classList:Mi(t,"class")).length&&Zr(t,"class")},zi=function(t,e){Fi(t)?t.dom.classList.remove(e):Pi(t,e),Hi(t)},ji=function(t,e){return Fi(t)&&t.dom.classList.contains(e)},Li=function(t,e){G(e,(function(e){Vi(t,e)}))},Ni=function(t,e){G(e,(function(e){zi(t,e)}))},Ui=function(t){return void 0!==t.style&&M(t.style.getPropertyValue)},Wi=function t(e){var n=br(e)?e.dom.parentNode:e.dom;if(void 0===n||null===n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return Rr(pn.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=Pr,function(t){return o(r(t))}))},Gi=function(){return Yi(pn.fromDom(document))},Yi=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return pn.fromDom(e)},qi=function(t,e,n){if(!T(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ui(t)&&t.style.setProperty(e,n)},Xi=function(t,e){Ui(t)&&t.style.removeProperty(e)},$i=function(t,e,n){var o=t.dom;qi(o,e,n)},Ki=function(t,e){var n=t.dom;Dt(e,(function(t,e){qi(n,e,t)}))},Ji=function(t,e){var n=t.dom;Dt(e,(function(t,e){t.fold((function(){Xi(n,e)}),(function(t){qi(n,e,t)}))}))},Qi=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Wi(t)?o:Zi(n,e)},Zi=function(t,e){return Ui(t)?t.style.getPropertyValue(e):""},ta=function(t,e){var n=t.dom,o=Zi(n,e);return k.from(o).filter((function(t){return 0<t.length}))},ea=function(t,e,n){var o=pn.fromTag(t);return $i(o,e,n),ta(o,e).isSome()},na=function(t,e){var n=t.dom;Xi(n,e),Jr(t,"style").map(On).is("")&&Zr(t,"style")},oa=function(t){return t.dom.offsetWidth},ra=function(t){return t.dom.value},ia=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},aa=function(t){var e,n,o,r=pn.fromTag(t.tag);e=r,n=t.attributes,o=e.dom,Dt(n,(function(t,e){Xr(o,e,t)})),Li(r,t.classes),Ki(r,t.styles),t.innerHtml.each((function(t){return qr(r,t)}));var i=t.domChildren;return Nr(r,i),t.value.each((function(t){ia(r,t)})),t.uid,li(r,t.uid),r},ua=function(t,e){return n=t,r=W(o=e,(function(t){return en(t.name(),[Ne("config"),nn("state",wi)])})),i=Te("component.behaviours",de(r),n.behaviours).fold((function(t){throw new Error(Be(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(t){return t})),{list:o,data:Et(i,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))};var n,o,r,i},ca=function(t){var e,n,o=(e=Rt(t,"behaviours").getOr({}),n=q(_t(e),(function(t){return void 0!==e[t]})),W(n,(function(t){return e[t].me})));return ua(t,o)},sa=function(t,e,n){var o,r,i,a=d(d({},(o=t).dom),{uid:o.uid,domChildren:W(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return ki({})}),ki),c={"alloy.base.modification":u},s=0<e.length?function(t,e,n,o){var r=d({},e);G(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var i=Ci(r,(function(t,e){return{name:t,modification:e}})),a=function(t){return X(t,(function(t,e){return d(d({},e.modification),t)}),{})},u=X(i.classes,(function(t,e){return e.modification.concat(t)}),[]),c=a(i.attributes),s=a(i.styles);return ki({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,d(d({},r=a),{attributes:d(d({},r.attributes),i.attributes),styles:d(d({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},la=function(t,e,n){var o,r,i,a={"alloy.base.behaviour":t.events};return o=n,r=t.eventOrder,i=Ti(o,e,a),Bi(i,r).getOrDie()},fa=function(t){var e,n,o,r,i,a,u,c,s,l,f,g,p,h=mi(t),v=h.events,b=m(h,["events"]),y=(e=Rt(b,"components").getOr([]),W(e,pa)),x=d(d({},b),{events:d(d({},oi),v),components:y});return ft.value((o=function(){return p},r=mn(pi),i=De(Ii(n=x)),a=ca(n),u=a.list,c=a.data,s=sa(i,u,c),l=aa(s),f=la(i,u,c),g=mn(i.components),p={getSystem:r.get,config:function(t){var e=c;return(M(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(t){return M(c[t.name()])},spec:n,readState:function(t){return c[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return i.apis},connect:function(t){r.set(t)},disconnect:function(){r.set(gi(o))},element:l,syncComponents:function(){var t=Dr(l),e=Z(t,(function(t){return r.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));g.set(e)},components:g.get,events:f}))},da=function(t){var e=pn.fromText(t);return ma({element:e})},ma=function(t){var e=Ee("external.component",fe([Ne("element"),Ke("uid")]),t),o=mn(gi());e.uid.each((function(t){li(e.element,t)}));var i={getSystem:o.get,config:k.none,hasConfigured:s,connect:function(t){o.set(t)},disconnect:function(){o.set(gi((function(){return i})))},getApis:function(){return{}},element:e.element,spec:t,readState:r("No state"),syncComponents:n,components:r([]),events:{}};return yi(i)},ga=di,pa=function(t){return Rt(t,bi).fold((function(){var e=t.hasOwnProperty("uid")?t:d({uid:ga("")},t);return fa(e).getOrDie()}),(function(t){return t}))},ha=yi,va=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=Qi(n,t);return parseFloat(r)||0}return o},o=function(t,e){return $(e,(function(e,n){var o=Qi(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!F(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;Ui(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}},ba=va("height",(function(t){var e=t.dom;return Wi(t)?e.getBoundingClientRect().height:e.offsetHeight})),ya=function(t){return ba.get(t)},xa=function(t){return ba.getOuter(t)},wa=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},Sa=wa,Ca=function(t,e){return void 0!==t?t:void 0!==e?e:0},ka=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return Sa(n.offsetLeft,n.offsetTop);var i=Ca(null==o?void 0:o.pageYOffset,r.scrollTop),a=Ca(null==o?void 0:o.pageXOffset,r.scrollLeft),u=Ca(r.clientTop,n.clientTop),c=Ca(r.clientLeft,n.clientLeft);return Oa(t).translate(a-c,i-u)},Oa=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?Sa(o.offsetLeft,o.offsetTop):Wi(t)?(e=n.getBoundingClientRect(),Sa(e.left,e.top)):Sa(0,0)},_a=va("width",(function(t){return t.dom.offsetWidth})),Ta=function(t){return _a.get(t)},Da=function(t){return _a.getOuter(t)},Ea=function(t){var e=pn.fromDom(function(t){if(Ir()&&I(t.target)){var e=pn.fromDom(t.target);if(vr(e)&&Vr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return it(n)}}return k.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},i=o(r,n);return{target:e,x:t.clientX,y:t.clientY,stop:n,prevent:r,kill:i,raw:t}},Ba=function(t,e,n,o,r){var i,u,c=(i=n,u=o,function(t){i(t)&&u(Ea(t))});return t.dom.addEventListener(e,c,r),{unbind:a(Aa,t,e,c,r)}},Aa=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Ia=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Sa(n,o)},Ma=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Fa=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Ra=function(t){var e,n,o=void 0===t?window:t,r=o.document,i=Ia(pn.fromDom(r));return n=void 0===(e=o)?window:e,k.from(n.visualViewport).fold((function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Fa(i.left,i.top,e,n)}),(function(t){return Fa(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)}))},Pa=function t(e,n){return e.view(n).fold(r([]),(function(n){var o=e.owner(n),r=t(e,o);return[n].concat(r)}))},Va=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(pn.fromDom)},owner:wr}),Ha=function(t){var e,n,o,r,i=pn.fromDom(document),u=Ia(i);return(e=t,o=(n=Va).owner(e),r=Pa(n,o),k.some(r)).fold(a(ka,t),(function(e){var n=Oa(t),o=X(e,(function(t,e){var n=Oa(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Sa(o.left+n.left+u.left,o.top+n.top+u.top)}))},za=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},ja=function(t){var e=ka(t),n=Da(t),o=xa(t);return za(e.left,e.top,n,o)},La=function(t){var e=Ha(t),n=Da(t),o=xa(t);return za(e.left,e.top,n,o)},Na=function(){return Ra(window)};function Ua(t,e,n,o,r){return t(n,o)?k.some(n):M(r)&&r(n)?k.none():e(n,o,r)}var Wa,Ga,Ya=function(t,e,n){for(var o=t.dom,r=M(n)?n:s;o.parentNode;){o=o.parentNode;var i=pn.fromDom(o);if(e(i))return k.some(i);if(r(i))break}return k.none()},qa=function(t,e,n){return Ua((function(t,e){return e(t)}),Ya,t,e,n)},Xa=function(t,e,n){return qa(t,e,n).isSome()},$a=function(t,e,n){return Ya(t,(function(t){return Gn(t,e)}),n)},Ka=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Yn(r)?k.none():k.from(r.querySelector(n)).map(pn.fromDom);var n,o,r},Ja=function(t,e,n){return Ua(Gn,$a,t,e,n)},Qa=function(){var t=ii("aria-owns");return{id:t,link:function(e){$r(e,"aria-owns",t)},unlink:function(t){Zr(t,"aria-owns")}}},Za=function(t,e){return qa(e,(function(t){if(!vr(t))return!1;var e=Kr(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")})).bind((function(t){var e=Kr(t,"id"),n=Mr(t);return Ka(n,'[aria-owns="'+e+'"]')})).exists((function(e){return tu(t,e)}))},tu=function(t,e){return Xa(e,(function(e){return qn(e,t.element)}),s)||Za(t,e)},eu="unknown";(Ga=Wa=Wa||{})[Ga.STOP=0]="STOP",Ga[Ga.NORMAL=1]="NORMAL",Ga[Ga.LOGGING=2]="LOGGING";var nu,ou,ru=mn({}),iu=["alloy/data/Fields","alloy/debugging/Debugging"],au=function(t,e,n){var o,r,i,a;switch(Rt(ru.get(),t).orThunk((function(){var e=_t(ru.get());return ct(e,(function(e){return-1<t.indexOf(e)?k.some(ru.get()[e]):k.none()}))})).getOr(Wa.NORMAL)){case Wa.NORMAL:return n(uu());case Wa.LOGGING:var u=(o=t,r=e,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();j(["mousemove","mouseover","mouseout",Fo()],o)||console.log(o,{event:o,time:t-a,target:r.dom,sequence:W(i,(function(t){return j(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+ei(t.target)+")":t.outcome}))})}}),c=n(u);return u.write(),c;case Wa.STOP:return!0}},uu=r({logEventCut:n,logEventStopped:n,logNoParent:n,logEventNoHandlers:n,logEventResponse:n,write:n}),cu=r([Ne("menu"),Ne("selectedMenu")]),su=r([Ne("item"),Ne("selectedItem")]),lu=(r(de(su().concat(cu()))),r(de(su()))),fu=qe("initSize",[Ne("numColumns"),Ne("numRows")]),du=function(){return qe("markers",[Ne("backgroundMenu")].concat(cu()).concat(su()))},mu=function(t){return qe("markers",W(t,Ne))},gu=function(t,e,n){return function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");K(e,(function(t){return 0<t.indexOf("alloy")&&!L(iu,(function(e){return-1<t.indexOf(e)}))})).getOr(eu)}}(),ye(e,e,n,Oe((function(t){return ft.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},pu=function(t){return gu(0,t,Gt(n))},hu=function(t){return gu(0,t,Gt(k.none))},vu=function(t){return gu(0,t,Yt())},bu=function(t){return gu(0,t,Yt())},yu=function(t,e){return dn(t,r(e))},xu=function(t){return dn(t,i)},wu=r(fu),Su=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},Cu=Ht([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ku=Cu.southeast,Ou=Cu.southwest,_u=Cu.northeast,Tu=Cu.northwest,Du=Cu.south,Eu=Cu.north,Bu=Cu.east,Au=Cu.west,Iu=function(t,e){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],(function(n){return Rt(e,n).map((function(e){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,e)}))}))},Mu=function(t){return t.x},Fu=function(t,e){return t.x+t.width/2-e.width/2},Ru=function(t,e){return t.x+t.width-e.width},Pu=function(t,e){return t.y-e.height},Vu=function(t){return t.y+t.height},Hu=function(t,e){return t.y+t.height/2-e.height/2},zu=function(t,e,n){return Su(Mu(t),Vu(t),n.southeast(),ku(),Iu(t,{left:1,top:3}),"layout-se")},ju=function(t,e,n){return Su(Ru(t,e),Vu(t),n.southwest(),Ou(),Iu(t,{right:0,top:3}),"layout-sw")},Lu=function(t,e,n){return Su(Mu(t),Pu(t,e),n.northeast(),_u(),Iu(t,{left:1,bottom:2}),"layout-ne")},Nu=function(t,e,n){return Su(Ru(t,e),Pu(t,e),n.northwest(),Tu(),Iu(t,{right:0,bottom:2}),"layout-nw")},Uu=function(t,e,n){return Su(Fu(t,e),Pu(t,e),n.north(),Eu(),Iu(t,{bottom:2}),"layout-n")},Wu=function(t,e,n){return Su(Fu(t,e),Vu(t),n.south(),Du(),Iu(t,{top:3}),"layout-s")},Gu=function(t,e,n){return Su((o=t).x+o.width,Hu(t,e),n.east(),Bu(),Iu(t,{left:0}),"layout-e");var o},Yu=function(t,e,n){return Su((o=e,t.x-o.width),Hu(t,e),n.west(),Au(),Iu(t,{right:1}),"layout-w");var o},qu=function(){return[zu,ju,Lu,Nu,Wu,Uu,Gu,Yu]},Xu=function(){return[ju,zu,Nu,Lu,Wu,Uu,Gu,Yu]},$u=function(){return[Lu,Nu,zu,ju,Uu,Wu]},Ku=function(){return[Nu,Lu,ju,zu,Uu,Wu]},Ju=function(){return[zu,ju,Lu,Nu,Wu,Uu]},Qu=function(){return[ju,zu,Nu,Lu,Wu,Uu]},Zu=Object.freeze({__proto__:null,events:function(t){return er([rr(To(),(function(e,n){var o,r,i=t.channels,a=_t(i),u=n,c=(o=a,(r=u).universal?o:q(o,(function(t){return j(r.channels,t)})));G(c,(function(t){var n=i[t],o=n.schema,r=Ee("channel["+t+"] data\nReceiver: "+ei(e.element),o,u.data);n.onReceive(e,r)}))}))])}}),tc=[Ue("channels",_e(ft.value,fe([vu("onReceive"),nn("schema",Me())])))],ec=function(t,e,n){return mr((function(o,r){n(o,t,e)}))},nc=function(t,e,n,o,r,i){var a=fe(t),u=en(e,[Je("config",fe(t))]);return ic(a,u,e,n,o,r,i)},oc=function(t,e,n){var o,i,a,u,c,s;return o=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var u=[o].concat(i);return o.config({name:r(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(u,1);return e.apply(void 0,[o,t.config,t.state].concat(n))}))},i=n,a=e.toString(),u=a.indexOf(")")+1,c=a.indexOf("("),s=a.substring(c+1,u-1).split(/,\s*/),o.toFunctionAnnotation=function(){return{name:i,parameters:hi(s.slice(0,1).concat(s.slice(3)))}},o},rc=function(t){return{key:t,value:void 0}},ic=function(t,e,n,o,i,u,c){var s=function(t){return Vt(t,n)?t[n]():k.none()},l=Et(i,(function(t,e){return oc(n,t,e)})),f=Et(u,vi),m=d(d(d({},f),l),{revoke:a(rc,n),config:function(e){var o=Ee(n+"-config",t,e);return{key:n,value:{config:o,me:m,configAsRaw:Ut((function(){return Ee(n+"-config",t,e)})),initialConfig:e,state:c}}},schema:r(e),exhibit:function(t,e){return s(t).bind((function(t){return Rt(o,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(ki({}))},name:r(n),handlers:function(t){return s(t).map((function(t){return Rt(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return m},ac=Zt,uc=fe([Ne("fields"),Ne("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),cc=function(t){var e=Ee("Creating behaviour: "+t.name,uc,t);return nc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},sc=fe([Ne("branchKey"),Ne("branches"),Ne("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),lc=function(t){var e,n,o,r,i,a,u,c,s=Ee("Creating behaviour: "+t.name,sc,t);return e=Ie(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=en(n,[Je("config",u=e)]),ic(u,c,n,o,r,i,a)},fc=r(void 0),dc=cc({fields:tc,name:"receiving",active:Zu}),mc=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),gc=function(t){return t.dom.focus()},pc=function(t){return void 0===t&&(t=pn.fromDom(document)),k.from(t.dom.activeElement).map(pn.fromDom)},hc=function(t){return pc(Mr(t)).filter((function(e){return t.dom.contains(e.dom)}))},vc=function(t,e){var o=Mr(e),r=pc(o).bind((function(t){var n,o,r=function(e){return qn(t,e)};return r(e)?k.some(e):(n=r,(o=function(t){for(var e=0;e<t.childNodes.length;e++){var r=pn.fromDom(t.childNodes[e]);if(n(r))return k.some(r);var i=o(t.childNodes[e]);if(i.isSome())return i}return k.none()})(e.dom))})),i=t(e);return r.each((function(t){pc(o).filter((function(e){return qn(e,t)})).fold((function(){gc(t)}),n)})),i},bc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},yc=function(t,e){var n=function(t){return t+"px"};Ji(t,{position:k.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},xc=Ht([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),wc=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=e.x-n,h=e.y-o,v=r-(p+e.width),b=i-(h+e.height),y=k.some(p),x=k.some(h),w=k.some(v),S=k.some(b),C=k.none();return a=e.direction,u=function(){return bc(t,y,x,C,C)},c=function(){return bc(t,C,x,w,C)},s=function(){return bc(t,y,C,C,S)},l=function(){return bc(t,C,C,w,S)},f=function(){return bc(t,y,x,C,C)},d=function(){return bc(t,y,C,C,S)},m=function(){return bc(t,y,x,C,C)},g=function(){return bc(t,C,x,w,C)},a.fold(u,c,s,l,f,d,m,g)},Sc=function(t,e){var n=a(Ha,e),o=t.fold(n,n,(function(){var t=Ia();return Ha(e).translate(-t.left,-t.top)})),r=Da(e),i=xa(e);return za(o.left,o.top,r,i)},Cc=function(t,e,n){var o=Sa(e,n);return t.fold(r(o),r(o),(function(){var t=Ia();return o.translate(-t.left,-t.top)}))},kc=(xc.none,xc.relative),Oc=xc.fixed,_c=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Tc=function(t,e,n){return Math.min(Math.max(t,e),n)},Dc=Ht([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Ec=function(t,e,n,o){var a,u,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,C,O,_,T,D,E,B,A,I,M,F,R,P,V,H,z,j=t.x,L=t.y,N=t.bubble.offset,U=N.left,W=N.top,G=(a=o,u=t.boundsRestriction,c=N,l=(s=function(t,e){var n="top"===t||"bottom"===t?c.top:c.left;return Rt(u,t).bind(i).bind((function(n){return"left"===t||"top"===t?e<=n?k.some(n):k.none():n<=e?k.some(n):k.none()})).map((function(t){return t+n})).getOr(e)})("left",a.x),f=s("top",a.y),d=s("right",a.right),m=s("bottom",a.bottom),za(l,f,d-l,m-f)),Y=G.y,q=G.bottom,X=G.x,$=G.right,K=L+W,J=(g=j+U,p=K,h=e,v=n,y=(b=G).x,x=b.y,w=b.width,S=b.height,O=x<=p,_=(C=y<=g)&&O,T=g+h<=y+w&&p+v<=x+S,D=Math.abs(Math.min(h,C?y+w-g:y-(g+h))),E=Math.abs(Math.min(v,O?x+S-p:x-(p+v))),B=Math.max(b.x,b.right-h),A=Math.max(b.y,b.bottom-v),{originInBounds:_,sizeInBounds:T,limitX:Tc(g,b.x,B),limitY:Tc(p,b.y,A),deltaW:D,deltaH:E}),Q=J.originInBounds,Z=J.sizeInBounds,tt=J.limitX,et=J.limitY,nt=J.deltaW,ot=J.deltaH,rt=r(et+ot-Y),it=r(q-et),at=(I=t.direction,F=M=it,R=rt,I.fold(M,M,R,R,M,R,F,F)),ut=r(tt+nt-X),ct=r($-tt),st={x:tt,y:et,width:nt,height:ot,maxHeight:at,maxWidth:(P=t.direction,H=V=ct,z=ut,P.fold(V,z,V,z,H,H,V,z)),direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:K};return Q&&Z?Dc.fit(st):Dc.nofit(st,nt,ot)},Bc=function(t,e,n,o){na(e,"max-height"),na(e,"max-width");var r,u,c,s,l,f,d,m,g,p={width:Da(r=e),height:xa(r)};return u=o.preference,c=t,s=p,l=n,f=o.bounds,d=s.width,m=s.height,g=function(t,e,n,o){var r=t(c,s,l);return Ec(r,d,m,f).fold(Dc.fit,(function(t,r,i){return o<i||n<r?Dc.nofit(t,r,i):Dc.nofit(e,n,o)}))},$(u,(function(t,e){var n=a(g,e);return t.fold(Dc.fit,n)}),Dc.nofit({x:c.x,y:c.y,width:s.width,height:s.height,maxHeight:s.height,maxWidth:s.width,direction:ku(),classes:{on:[],off:[]},label:"none",candidateYforTest:c.y},-1,-1)).fold(i,i)},Ac=function(t,e,n){var o,r;yc(t,(o=n.origin,r=e,o.fold((function(){return bc("absolute",k.some(r.x),k.some(r.y),k.none(),k.none())}),(function(t,e,n,o){return wc("absolute",r,t,e,n,o)}),(function(t,e,n,o){return wc("fixed",r,t,e,n,o)}))))},Ic=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ba.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),$i(n,"max-height",r+"px")},Mc=r((function(t,e){Ic(t,e),Ki(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Fc=r((function(t,e){Ic(t,e)})),Rc=function(t,e,n){return void 0===t[e]?n:t[e]},Pc=function(t,e,o,r,i,a){var u,c=Rc(a,"maxHeightFunction",Mc()),s=Rc(a,"maxWidthFunction",n),l=t.anchorBox,f=t.origin,d={bounds:(u=f,i.fold((function(){return u.fold(Na,Na,za)}),(function(t){return u.fold(t,t,(function(){var e=t(),n=Cc(u,e.x,e.y);return za(n.left,n.top,e.width,e.height)}))}))),origin:f,preference:r,maxHeightFunction:c,maxWidthFunction:s};Vc(l,e,o,d)},Vc=function(t,e,n,o){var r,i,a,u,c,s,l=Bc(t,e,n,o);Ac(e,l,o),r=e,i=l.classes,Ni(r,i.off),Li(r,i.on),a=e,u=l,(0,o.maxHeightFunction)(a,u.maxHeight),c=e,s=l,(0,o.maxWidthFunction)(c,s.maxWidth)},Hc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],zc=function(t,e,n){var o=function(t){return Rt(n,t).getOr([])},r=function(t,e,n){var r=nt(Hc,n);return{offset:Sa(t,e),classesOn:Z(n,o),classesOff:Z(r,o)}};return{southeast:function(){return r(-t,e,["top","alignLeft"])},southwest:function(){return r(t,e,["top","alignRight"])},south:function(){return r(-t/2,e,["top","alignCentre"])},northeast:function(){return r(-t,-e,["bottom","alignLeft"])},northwest:function(){return r(t,-e,["bottom","alignRight"])},north:function(){return r(-t/2,-e,["bottom","alignCentre"])},east:function(){return r(t,-e/2,["valignCentre","left"])},west:function(){return r(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,e,["top","alignRight"])},innerNortheast:function(){return r(t,e,["top","alignLeft"])},innerNorth:function(){return r(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-e,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return r(t,-e/2,["valignCentre","right"])},innerEast:function(){return r(-t,-e/2,["valignCentre","left"])}}},jc=function(){return zc(0,0,{})},Lc=function(t,e){return function(n){return"rtl"===Nc(n)?e:t}},Nc=function(t){return"rtl"===Qi(t,"direction")?"rtl":"ltr"};(ou=nu=nu||{}).TopToBottom="toptobottom",ou.BottomToTop="bottomtotop";var Uc,Wc,Gc,Yc,qc,Xc="data-alloy-vertical-dir",$c=function(t){return Xa(t,(function(t){return vr(t)&&Kr(t,"data-alloy-vertical-dir")===nu.BottomToTop}))},Kc=function(){return en("layouts",[Ne("onLtr"),Ne("onRtl"),Ke("onBottomLtr"),Ke("onBottomRtl")])},Jc=function(t,e,n,o,r,i,a){var u=a.map($c).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),s=e.layouts.map((function(e){return e.onRtl(t)})),l=u?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),f=u?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(s).getOr(i):s.getOr(o);return Lc(l,f)(t)},Qc=[Ne("hotspot"),Ke("bubble"),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=e.hotspot,r=Sc(n,o.element),i=Jc(t.element,e,Ju(),Qu(),$u(),Ku(),k.some(e.hotspot.element));return k.some({anchorBox:r,bubble:e.bubble.getOr(jc()),overrides:e.overrides,layouts:i,placer:k.none()})}))],Zc=[Ne("x"),Ne("y"),nn("height",0),nn("width",0),nn("bubble",jc()),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=Cc(n,e.x,e.y),r=za(o.left,o.top,e.width,e.height),i=Jc(t.element,e,qu(),Xu(),qu(),Xu(),k.none());return k.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:k.none()})}))],ts=Ht([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),es=function(t){return t.fold(i,(function(t,e,n){return t.translate(-e,-n)}))},ns=function(t){return t.fold(i,i)},os=function(t){return $(t,(function(t,e){return t.translate(e.left,e.top)}),Sa(0,0))},rs=function(t){var e=W(t,ns);return os(e)},is=ts.screen,as=ts.absolute,us=function(t,e,n){var o,r,i=wr(t.element),a=Ia(i),u=(o=t,r=kr(n.root).dom,k.from(r.frameElement).map(pn.fromDom).filter((function(t){var e=wr(t),n=wr(o.element);return qn(e,n)})).map(ka).getOr(a));return as(u,a.left,a.top)},cs=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=is(Sa(r,i));return k.some({point:c,width:a,height:u})},ss=function(t,e,n,o,r){return t.map((function(t){var i,a,u,c=[e,t.point],s=(i=function(){return rs(c)},a=function(){return rs(c)},u=function(){return t=W(c,es),os(t);var t},o.fold(i,a,u)),l={x:s.left,y:s.top,width:t.width,height:t.height},f=(n.showAbove?$u:Ju)(),d=(n.showAbove?Ku:Qu)(),m=Jc(r,n,f,d,f,d,k.none());return{anchorBox:l,bubble:n.bubble.getOr(jc()),overrides:n.overrides,layouts:m,placer:k.none()}}))},ls=[Ne("node"),Ne("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=us(t,0,e);return e.node.filter(Wi).bind((function(r){var i=r.dom.getBoundingClientRect(),a=cs(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ss(a,o,e,n,u)}))}))],fs=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ds=Ht([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ms=(ds.before,ds.on,ds.after,function(t){return t.fold(i,i,i)}),gs=Ht([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ps={domRange:gs.domRange,relative:gs.relative,exact:gs.exact,exactFromRange:function(t){return gs.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=t.match({domRange:function(t){return pn.fromDom(t.startContainer)},relative:function(t,e){return ms(t)},exact:function(t,e,n,o){return t}});return kr(e)},range:fs},hs=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),r=i,n.fold((function(t){r.setEndBefore(t.dom)}),(function(t,e){r.setEnd(t.dom,e)}),(function(t){r.setEndAfter(t.dom)})),i},vs=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},bs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},ys=Ht([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xs=function(t,e,n){return e(pn.fromDom(n.startContainer),n.startOffset,pn.fromDom(n.endContainer),n.endOffset)},ws=function(t,e){var n,o,i,a=(n=t,e.match({domRange:function(t){return{ltr:r(t),rtl:k.none}},relative:function(t,e){return{ltr:Ut((function(){return hs(n,t,e)})),rtl:Ut((function(){return k.some(hs(n,e,t))}))}},exact:function(t,e,o,r){return{ltr:Ut((function(){return vs(n,t,e,o,r)})),rtl:Ut((function(){return k.some(vs(n,o,r,t,e))}))}}}));return(i=(o=a).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return ys.rtl(pn.fromDom(t.endContainer),t.endOffset,pn.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return xs(0,ys.ltr,i)})):xs(0,ys.ltr,i)},Ss=(ys.ltr,ys.rtl,Uc=br,Wc="text",{get:function(t){if(!Uc(t))throw new Error("Can only get "+Wc+" value of a "+Wc+" node");return Gc(t).getOr("")},getOption:Gc=function(t){return Uc(t)?k.from(t.dom.nodeValue):k.none()},set:function(t,e){if(!Uc(t))throw new Error("Can only set raw "+Wc+" value of a "+Wc+" node");t.dom.nodeValue=e}}),Cs=function(t){return Ss.getOption(t)},ks=["img","br"],Os=function(t){return Cs(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf(" ")})).isSome()||j(ks,pr(t))},_s=function(t,e){var n=function t(n){for(var o=Dr(n),r=o.length-1;0<=r;r--){var i=o[r];if(e(i))return k.some(i);var a=t(i);if(a.isSome())return a}return k.none()};return n(t)},Ts=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Yn(r)?[]:W(r.querySelectorAll(n),pn.fromDom);var n,o,r},Ds=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=wr(r=t).dom.createRange()).setStart(r.dom,i),c.setEnd(a.dom,u),c),l=qn(t,n)&&e===o;return s.collapsed&&!l},Es=function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return k.some(fs(pn.fromDom(e.startContainer),e.startOffset,pn.fromDom(n.endContainer),n.endOffset))}return k.none()},Bs=function(t){if(null===t.anchorNode||null===t.focusNode)return Es(t);var e=pn.fromDom(t.anchorNode),n=pn.fromDom(t.focusNode);return Ds(e,t.anchorOffset,n,t.focusOffset)?k.some(fs(e,t.anchorOffset,n,t.focusOffset)):Es(t)},As=function(t){return e=t,k.from(e.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(Bs);var e},Is=function(t,e){var n,o,r,i,a=ws(n=t,e).match({ltr:function(t,e,o,r){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(o.dom,r),i},rtl:function(t,e,o,r){var i=n.document.createRange();return i.setStart(o.dom,r),i.setEnd(t.dom,e),i}});return r=(o=a).getClientRects(),0<(i=0<r.length?r[0]:o.getBoundingClientRect()).width||0<i.height?k.some(i).map(bs):k.none()},Ms=function(t,e){return{element:t,offset:e}},Fs=function(t,e){var n=Dr(t);if(0===n.length)return Ms(t,e);if(e<n.length)return Ms(n[e],0);var o,r=n[n.length-1],i=br(r)?(o=r,Ss.get(o).length):Dr(r).length;return Ms(r,i)},Rs=function(t,e){return(br(t)?Ms:Fs)(t,e)},Ps=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return As(t)}}))().map((function(t){var e=Rs(t.start,t.soffset),n=Rs(t.finish,t.foffset);return ps.range(e.element,e.offset,n.element,n.offset)}))},Vs=[Ke("getSelection"),Ne("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=kr(e.root).dom,r=us(t,0,e),i=Ps(o,e).bind((function(t){return Is(o,ps.exactFromRange(t)).orThunk((function(){var e=pn.fromText("\ufeff");return Hr(t.start,e),Is(o,ps.exact(e,0,e,1)).map((function(t){return Wr(e),t}))})).bind((function(t){return cs(t.left,t.top,t.width,t.height)}))})),a=Ps(o,e).bind((function(t){return vr(t.start)?k.some(t.start):_r(t.start)})).getOr(t.element);return ss(i,r,e,n,a)}))],Hs=function(t){return t.x+t.width},zs=function(t,e){return t.x-e.width},js=function(t,e){return t.y-e.height+t.height},Ls=function(t){return t.y},Ns=function(t,e,n){return Su(Hs(t),Ls(t),n.southeast(),ku(),Iu(t,{left:0,top:2}),"link-layout-se")},Us=function(t,e,n){return Su(zs(t,e),Ls(t),n.southwest(),Ou(),Iu(t,{right:1,top:2}),"link-layout-sw")},Ws=function(t,e,n){return Su(Hs(t),js(t,e),n.northeast(),_u(),Iu(t,{left:0,bottom:3}),"link-layout-ne")},Gs=function(t,e,n){return Su(zs(t,e),js(t,e),n.northwest(),Tu(),Iu(t,{right:1,bottom:3}),"link-layout-nw")},Ys=function(){return[Ns,Us,Ws,Gs]},qs=function(){return[Us,Ns,Gs,Ws]},Xs=[Ne("item"),Kc(),nn("overrides",{}),yu("placement",(function(t,e,n){var o=Sc(n,e.item.element),r=Jc(t.element,e,Ys(),qs(),Ys(),qs(),k.none());return k.some({anchorBox:o,bubble:jc(),overrides:e.overrides,layouts:r,placer:k.none()})}))],$s=Ie("anchor",{selection:Vs,node:ls,hotspot:Qc,submenu:Xs,makeshift:Zc}),Ks=function(t,e,n,o,r){var i={anchorBox:n.anchorBox,origin:e};Pc(i,r.element,n.bubble,n.layouts,o,n.overrides)},Js=function(t,e,n,o,r,i){var a=i.map(ja);return Qs(t,e,n,o,r,a)},Qs=function(t,e,n,o,i,a){var u=Ee("positioning anchor.info",$s,o);vc((function(){$i(i.element,"position","fixed");var n=ta(i.element,"visibility");$i(i.element,"visibility","hidden");var o,c,s,l,f=e.useFixed()?(l=document.documentElement,Oc(0,0,l.clientWidth,l.clientHeight)):(c=ka((o=t).element),s=o.element.dom.getBoundingClientRect(),kc(c.left,c.top,s.width,s.height)),d=u.placement,m=a.map(r).or(e.getBounds);d(t,u,f).each((function(e){e.placer.getOr(Ks)(t,f,e,m,i)})),n.fold((function(){na(i.element,"visibility")}),(function(t){$i(i.element,"visibility",t)})),ta(i.element,"left").isNone()&&ta(i.element,"top").isNone()&&ta(i.element,"right").isNone()&&ta(i.element,"bottom").isNone()&&ta(i.element,"position").is("fixed")&&na(i.element,"position")}),i.element)},Zs=Object.freeze({__proto__:null,position:function(t,e,n,o,r){Js(t,e,n,o,r,k.none())},positionWithin:Js,positionWithinBounds:Qs,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),tl=[nn("useFixed",s),Ke("getBounds")],el=cc({fields:tl,name:"positioning",active:mc,apis:Zs}),nl=function t(e){$o(e,jo());var n=e.components();G(n,t)},ol=function t(e){var n=e.components();G(n,t),$o(e,zo())},rl=function(t,e){Lr(t.element,e.element)},il=function(t,e){var n,o=t.components();G((n=t).components(),(function(t){return Wr(t.element)})),Ur(n.element),n.syncComponents();var r=nt(o,e);G(r,(function(e){nl(e),t.getSystem().removeFromWorld(e)})),G(e,(function(e){e.getSystem().isConnected()?rl(t,e):(t.getSystem().addToWorld(e),rl(t,e),Wi(t.element)&&ol(e)),t.syncComponents()}))},al=function(t,e){ul(t,e,Lr)},ul=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),Wi(t.element)&&ol(e),t.syncComponents()},cl=function(t){nl(t),Wr(t.element),t.getSystem().removeFromWorld(t)},sl=function(t){var e=Or(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));cl(t),e.each((function(t){t.syncComponents()}))},ll=function(t){var e=t.components();G(e,cl),Ur(t.element),t.syncComponents()},fl=function(t,e){dl(t,e,Lr)},dl=function(t,e,n){n(t,e.element);var o=Dr(e.element);G(o,(function(t){e.getByDom(t).each(ol)}))},ml=function(t){var e=Dr(t.element);G(e,(function(e){t.getByDom(e).each(nl)})),Wr(t.element)},gl=function(t,e,n,o){n.get().each((function(e){ll(t)}));var r=e.getAttachPoint(t);al(r,t);var i=t.getSystem().build(o);return al(t,i),n.set(i),i},pl=function(t,e,n,o){var r=gl(t,e,n,o);return e.onOpen(t,r),r},hl=function(t,e,n){n.get().each((function(o){ll(t),sl(t),e.onClose(t,o),n.clear()}))},vl=function(t,e,n){return n.isOpen()},bl=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);$i(t.element,"position",el.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",ta(o.element,r).fold((function(){Zr(o.element,i)}),(function(t){$r(o.element,i,t)})),$i(o.element,r,a)},yl=function(t,e,n){var o,r,i,a;o=t.element,L(["top","left","right","bottom"],(function(t){return ta(o,t).isSome()}))||na(t.element,"position"),r=t,i="visibility",a=e.cloakVisibilityAttr,Jr(r.element,a).fold((function(){return na(r.element,i)}),(function(t){return $i(r.element,i,t)}))},xl=Object.freeze({__proto__:null,cloak:bl,decloak:yl,open:pl,openWhileCloaked:function(t,e,n,o,r){bl(t,e),pl(t,e,n,o),r(),yl(t,e)},close:hl,isOpen:vl,isPartOf:function(t,e,n,o){return vl(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return gl(t,e,n,o)}))}}),wl=Object.freeze({__proto__:null,events:function(t,e){return er([rr(Io(),(function(n,o){hl(n,t,e)}))])}}),Sl=[pu("onOpen"),pu("onClose"),Ne("isPartOf"),Ne("getAttachPoint"),nn("cloakVisibilityAttr","data-precloak-visibility")],Cl=cc({fields:Sl,name:"sandboxing",active:wl,apis:xl,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none()),e=r("not-implemented");return Si({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(k.none())},set:function(e){t.set(k.some(e))},get:function(){return t.get()}})}})}),kl=r("dismiss.popups"),Ol=r("reposition.popups"),_l=r("mouse.released"),Tl=fe([nn("isExtraPart",s),en("fireEventInstead",[nn("event",Lo())])]),Dl=function(t){var e=Ee("Dismissal",Tl,t),n={};return n[kl()]={schema:fe([Ne("target")]),onReceive:function(t,n){Cl.isOpen(t)&&(Cl.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold((function(){return Cl.close(t)}),(function(e){return $o(t,e.event)})))}},n},El=fe([en("fireEventInstead",[nn("event",No())]),Ye("doReposition")]),Bl=function(t){var e=Ee("Reposition",El,t),n={};return n[Ol()]={onReceive:function(t){Cl.isOpen(t)&&e.fireEventInstead.fold((function(){return e.doReposition(t)}),(function(e){return $o(t,e.event)}))}},n},Al=function(t,e,n){e.store.manager.onLoad(t,e,n)},Il=function(t,e,n){e.store.manager.onUnload(t,e,n)},Ml=Object.freeze({__proto__:null,onLoad:Al,onUnload:Il,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Fl=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[fr((function(n,o){Al(n,t,e)})),dr((function(n,o){Il(n,t,e)}))]:[ec(t,e,Al)];return er(n)}}),Rl=function(){var t=mn(null);return Si({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Pl=function(){var t=mn({}),e=mn({});return Si({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Rt(t.get(),n).orThunk((function(){return Rt(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},a={};G(n,(function(t){i[t.value]=t,Rt(t,"meta").each((function(e){Rt(e,"text").each((function(e){a[e]=t}))}))})),t.set(d(d({},o),i)),e.set(d(d({},r),a))},clear:function(){t.set({}),e.set({})}})},Vl=Object.freeze({__proto__:null,memory:Rl,dataset:Pl,manual:function(){return Si({readState:n})},init:function(t){return t.store.manager.state(t)}}),Hl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},zl=[Ke("initialValue"),Ne("getFallbackEntry"),Ne("getDataKey"),Ne("setValue"),yu("manager",{setValue:Hl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold((function(){return o.getFallbackEntry(r)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){Hl(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:Pl})],jl=[Ne("getValue"),nn("setValue",n),Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:n,state:wi.init})],Ll=[Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Rl})],Nl=[on("store",{mode:"memory"},Ie("mode",{memory:Ll,manual:jl,dataset:zl})),pu("onSetValue"),nn("resetOnDom",!1)],Ul=cc({fields:Nl,name:"representing",active:Fl,apis:Ml,extra:{setValueFrom:function(t,e){var n=Ul.getValue(e);Ul.setValue(t,n)}},state:Vl}),Wl=function(t,e){return fn(t,{},W(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ye(n,n,qt(),le((function(t){return wt("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([dn("dump",i)]))},Gl=function(t){return t.dump},Yl=function(t,e){return d(d({},t.dump),ac(e))},ql=Wl,Xl=Yl,$l="placeholder",Kl=Ht([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Jl=function(t){return Pt(t,"uiType")},Ql=function(t,e,n,o){return Jl(n)&&n.uiType===$l?(a=n,u=o,(i=t).exists((function(t){return t!==a.owner}))?Kl.single(!0,r(a)):Rt(u,a.name).fold((function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+_t(u)+"]\nNamespace: "+i.getOr("none")+"\nSpec: "+JSON.stringify(a,null,2))}),(function(t){return t.replace()}))):Kl.single(!1,r(n));var i,a,u},Zl=function t(e,n,o,r){return Ql(e,0,o,r).fold((function(i,a){var u=Jl(o)?a(n,o.config,o.validated):a(n),c=Rt(u,"components").getOr([]),s=Z(c,(function(o){return t(e,n,o,r)}));return[d(d({},u),{components:s})]}),(function(t,e){if(Jl(o)){var r=e(n,o.config,o.validated);return o.validated.preprocess.getOr(i)(r)}return e(n)}))},tf=function(t,e,n,o){var i,a,u,c=Et(o,(function(t,e){return o=t,i=!1,{name:r(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return i},replace:function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,o}};var n,o,i})),s=(i=t,a=e,u=c,Z(n,(function(t){return Zl(i,a,t,u)})));return Dt(c,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),s},ef=Kl.single,nf=Kl.multiple,of=r($l),rf=Ht([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),af=nn("factory",{sketch:i}),uf=nn("schema",[]),cf=Ne("name"),sf=ye("pname","pname",Xt((function(t){return"<alloy."+ii(t.name)+">"})),Me()),lf=dn("schema",(function(){return[Ke("preprocess")]})),ff=nn("defaults",r({})),df=nn("overrides",r({})),mf=de([af,uf,cf,sf,ff,df]),gf=de([af,uf,cf,ff,df]),pf=de([af,uf,cf,sf,ff,df]),hf=de([af,lf,cf,Ne("unit"),sf,ff,df]),vf=function(t){return t.fold(k.some,k.none,k.some,k.some)},bf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},yf=function(t,e){return function(n){var o=Ee("Converting part type",e,n);return t(o)}},xf=yf(rf.required,mf),wf=yf(rf.external,gf),Sf=yf(rf.optional,pf),Cf=yf(rf.group,hf),kf=r("entirety"),Of=Object.freeze({__proto__:null,required:xf,external:wf,optional:Sf,group:Cf,asNamedPart:vf,name:bf,asCommon:function(t){return t.fold(i,i,i,i)},original:kf}),_f=function(t,e,n,o){return Lt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Tf=function(t,e){var n={};return G(e,(function(e){vf(e).each((function(e){var o=Df(t,e.pname);n[e.name]=function(n){var r=Ee("Part: "+e.name+" in "+t,de(e.schema),n);return d(d({},o),{config:n,validated:r})}}))})),n},Df=function(t,e){return{uiType:of(),owner:t,name:e}},Ef=function(t,e,n){return{uiType:of(),owner:t,name:e,config:n,validated:{}}},Bf=function(t){return Z(t,(function(t){return t.fold(k.none,k.some,k.none,k.none).map((function(t){return qe(t.name,t.schema.concat([xu(kf())]))})).toArray()}))},Af=function(t){return W(t,bf)},If=function(t,e,n){return o=e,i={},a={},G(n,(function(t){t.fold((function(t){i[t.pname]=ef(!0,(function(e,n,o){return t.factory.sketch(_f(e,t,n,o))}))}),(function(t){var e=o.parts[t.name];a[t.name]=r(t.factory.sketch(_f(o,t,e[kf()]),e))}),(function(t){i[t.pname]=ef(!1,(function(e,n,o){return t.factory.sketch(_f(e,t,n,o))}))}),(function(t){i[t.pname]=nf(!0,(function(e,n,o){var r=e[t.name];return W(r,(function(n){return t.factory.sketch(Lt(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:r(i),externals:r(a)};var o,i,a},Mf=function(t,e,n){return tf(k.some(t),e,e.components,n)},Ff=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Rf=function(t,e,n){return Ff(t,e,n).getOrDie("Could not find part: "+n)},Pf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return G(n,(function(t){o[t]=r(a.getByUid(i[t]))})),o},Vf=function(t,e){var n=t.getSystem();return Et(e.partUids,(function(t,e){return r(n.getByUid(t))}))},Hf=function(t){return _t(t.partUids)},zf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return G(n,(function(t){o[t]=r(a.getByUid(i[t]).getOrDie())})),o},jf=function(t,e){var n=Af(e);return Zt(W(n,(function(e){return{key:e,value:t+"-"+e}})))},Lf=function(t){return ye("partUids","partUids",$t((function(e){return jf(e.uid,t)})),Me())},Nf=Object.freeze({__proto__:null,generate:Tf,generateOne:Ef,schemas:Bf,names:Af,substitutes:If,components:Mf,defaultUids:jf,defaultUidsSchema:Lf,getAllParts:Vf,getAllPartNames:Hf,getPart:Ff,getPartOrDie:Rf,getParts:Pf,getPartsOrDie:zf}),Uf=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[qe("parts",i)]:[]).concat([Ne("uid"),nn("dom",{}),nn("components",[]),xu("originalSpec"),nn("debug.sketcher",{})]).concat(a));return Ee(t+" [SpecSchema]",fe(u.concat(e)),n)},Wf=function(t,e,n,o,r){var i=Gf(r),a=Bf(n),u=Lf(n),c=Uf(t,e,i,a,[u]),s=If(0,c,n);return o(c,Mf(t,c,s.internals()),i,s.externals())},Gf=function(t){return Pt(t,"uid")?t:d(d({},t),{uid:di("uid")})},Yf=fe([Ne("name"),Ne("factory"),Ne("configFields"),nn("apis",{}),nn("extraApis",{})]),qf=fe([Ne("name"),Ne("factory"),Ne("configFields"),Ne("partFields"),nn("apis",{}),nn("extraApis",{})]),Xf=function(t){var e=Ee("Sketcher for "+t.name,Yf,t),n=Et(e.apis,xi),o=Et(e.extraApis,vi);return d(d({name:e.name,configFields:e.configFields,sketch:function(t){return n=e.name,o=e.configFields,r=e.factory,i=Gf(t),r(Uf(n,o,i,[],[]),i);var n,o,r,i}},n),o)},$f=function(t){var e=Ee("Sketcher for "+t.name,qf,t),n=Tf(e.name,e.partFields),o=Et(e.apis,xi),r=Et(e.extraApis,vi);return d(d({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return Wf(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},Kf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Jf=function(t,e){return t?k.some(e):k.none()},Qf=function(t){return"input"===pr(t)&&"radio"!==Kr(t,"type")||"textarea"===pr(t)},Zf=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),td=[Ne("find")],ed=cc({fields:td,name:"composing",apis:Zf}),nd=function(t,e,n,o){var r=Ts(t.element,"."+e.highlightClass);G(r,(function(n){L(o,(function(t){return t.element===n}))||(zi(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),$o(n,Xo())})))}))},od=function(t,e,n,o){nd(t,e,0,[o]),rd(t,e,n,o)||(Vi(o.element,e.highlightClass),e.onHighlight(t,o),$o(o,qo()))},rd=function(t,e,n,o){return ji(o.element,e.highlightClass)},id=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return k.from(r[o]).fold((function(){return ft.error(new Error("No element found with index "+o))}),t.getSystem().getByDom)},ad=function(t,e,n){return Ka(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},ud=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return(0<o.length?k.some(o[o.length-1]):k.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},cd=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return J(r,(function(t){return ji(t,e.highlightClass)})).bind((function(e){var n=_c(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))},sd=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return Kf(W(o,(function(e){return t.getSystem().getByDom(e).toOptional()})))},ld=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return nd(t,e,0,[])},dehighlight:function(t,e,n,o){rd(t,e,n,o)&&(zi(o.element,e.highlightClass),e.onDehighlight(t,o),$o(o,Xo()))},highlight:od,highlightFirst:function(t,e,n){ad(t,e).each((function(o){od(t,e,n,o)}))},highlightLast:function(t,e,n){ud(t,e).each((function(o){od(t,e,n,o)}))},highlightAt:function(t,e,n,o){id(t,e,n,o).fold((function(t){throw t}),(function(o){od(t,e,n,o)}))},highlightBy:function(t,e,n,o){var r=sd(t,e);K(r,o).each((function(o){od(t,e,n,o)}))},isHighlighted:rd,getHighlighted:function(t,e,n){return Ka(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:ad,getLast:ud,getPrevious:function(t,e,n){return cd(t,e,0,-1)},getNext:function(t,e,n){return cd(t,e,0,1)},getCandidates:sd}),fd=[Ne("highlightClass"),Ne("itemClass"),pu("onHighlight"),pu("onDehighlight")],dd=cc({fields:fd,name:"highlighting",apis:ld}),md=[8],gd=[9],pd=[13],hd=[27],vd=[32],bd=[37],yd=[38],xd=[39],wd=[40],Sd=function(t,e,n){var o=et(t.slice(0,e)),r=et(t.slice(e+1));return K(o.concat(r),n)},Cd=function(t,e,n){var o=et(t.slice(0,e));return K(o,n)},kd=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return K(r.concat(o),n)},Od=function(t,e,n){var o=t.slice(e+1);return K(o,n)},_d=function(t){return function(e){var n=e.raw;return j(t,n.which)}},Td=function(t){return function(e){return tt(t,(function(t){return t(e)}))}},Dd=function(t){return!0===t.raw.shiftKey},Ed=function(t){return!0===t.raw.ctrlKey},Bd=u(Dd),Ad=function(t,e){return{matches:t,classification:e}},Id=function(t,e,n){e.exists((function(t){return n.exists((function(e){return qn(e,t)}))}))||Ko(t,Uo(),{prevFocus:e,newFocus:n})},Md=function(){var t=function(t){return hc(t.element)};return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element);var r=t(e);Id(e,o,r)}}},Fd=function(){var t=function(t){return dd.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:function(e,o){var r=t(e);e.getSystem().getByDom(o).fold(n,(function(t){dd.highlight(e,t)}));var i=t(e);Id(e,r,i)}}};(qc=Yc=Yc||{}).OnFocusMode="onFocus",qc.OnEnterOrSpaceMode="onEnterOrSpace",qc.OnApiMode="onApi";var Rd,Pd=function(t,e,n,o,r){var i=function(t,e,n,o,r){var i,a,u=n(t,e,o,r);return i=u,a=e.event,K(i,(function(t){return t.matches(a)})).map((function(t){return t.classification})).bind((function(n){return n(t,e,o,r)}))},a={schema:function(){return t.concat([nn("focusManager",Md()),on("focusInside","onFocus",Oe((function(t){return j(["onFocus","onEnterOrSpace","onApi"],t)?ft.value(t):ft.error("Invalid value for focusInside")}))),yu("handler",a),yu("state",e),yu("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var a=t.focusInside!==Yc.OnFocusMode?k.none():r(t).map((function(n){return rr(ko(),(function(o,r){n(o,t,e),r.stop()}))})),u=[rr(po(),(function(o,a){i(o,a,n,t,e).fold((function(){var n,i,u;n=o,i=a,u=_d(vd.concat(pd))(i.event),t.focusInside===Yc.OnEnterOrSpaceMode&&u&&Zn(n,i)&&r(t).each((function(o){o(n,t,e),i.stop()}))}),(function(t){a.stop()}))})),rr(ho(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return er(a.toArray().concat(u))}};return a},Vd=function(t){var e=[Ke("onEscape"),Ke("onEnter"),nn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),nn("firstTabstop",0),nn("useTabstopAt",l),Ke("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return Ja(e,t)})).getOr(e);return 0<ya(n)},o=function(t,e,o){var r,i,a;r=e,i=Ts(t.element,r.selector),a=q(i,(function(t){return n(r,t)})),k.from(a[r.firstTabstop]).each((function(n){e.focusManager.set(t,n)}))},i=function(t,e,o,r,i){return i(e,o,(function(t){return n(e=r,o=t)&&e.useTabstopAt(o);var e,o})).fold((function(){return r.cyclic?k.some(!0):k.none()}),(function(e){return r.focusManager.set(t,e),k.some(!0)}))},u=function(t,e,n,o){var r,u,c=Ts(t.element,n.selector);return r=t,(u=n).focusManager.get(r).bind((function(t){return Ja(t,u.selector)})).bind((function(e){return J(c,a(qn,e)).bind((function(e){return i(t,c,e,n,o)}))}))},c=r([Ad(Td([Dd,_d(gd)]),(function(t,e,n){var o=n.cyclic?Sd:Cd;return u(t,0,n,o)})),Ad(_d(gd),(function(t,e,n){var o=n.cyclic?kd:Od;return u(t,0,n,o)})),Ad(_d(hd),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Ad(Td([Bd,_d(pd)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),s=r([]);return Pd(e,wi.init,c,s,(function(){return k.some(o)}))},Hd=Vd(dn("cyclic",s)),zd=Vd(dn("cyclic",l)),jd=function(t,e,n){return Qf(n)&&_d(vd)(e.event)?k.none():(Qo(t,n,Do()),k.some(!0))},Ld=function(t,e){return k.some(!0)},Nd=[nn("execute",jd),nn("useSpace",!1),nn("useEnter",!0),nn("useControlEnter",!1),nn("useDown",!1)],Ud=function(t,e,n){return n.execute(t,e,t.element)},Wd=Pd(Nd,wi.init,(function(t,e,n,o){var r=n.useSpace&&!Qf(t.element)?vd:[],i=n.useEnter?pd:[],a=n.useDown?wd:[],u=r.concat(i).concat(a);return[Ad(_d(u),Ud)].concat(n.useControlEnter?[Ad(Td([Ed,_d(pd)]),Ud)]:[])}),(function(t,e,n,o){return n.useSpace&&!Qf(t.element)?[Ad(_d(vd),Ld)]:[]}),(function(){return k.none()})),Gd=function(){var t=mn(k.none());return Si({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(k.some({numRows:e,numColumns:n}))},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})},Yd=Object.freeze({__proto__:null,flatgrid:Gd,init:function(t){return t.state(t)}}),qd=function(t){return function(e,n,o,r){var i=t(e.element);return Jd(i,e,n,o,r)}},Xd=function(t,e){var n=Lc(t,e);return qd(n)},$d=function(t,e){var n=Lc(e,t);return qd(n)},Kd=function(t){return function(e,n,o,r){return Jd(t,e,n,o,r)}},Jd=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},Qd=Kd,Zd=Kd,tm=Kd,em=function(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e},nm=function(t,e,n){var o,r=Ts(t,n),i=q(r,em);return J(o=i,(function(t){return qn(t,e)})).map((function(t){return{index:t,candidates:o}}))},om=function(t,e){return J(t,(function(t){return qn(e,t)}))},rm=function(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?k.some(t[o]):k.none()}))},im=function(t,e,n,o,r){return rm(t,e,o,(function(e,i){var a=e===n-1?t.length-e*o:o,u=_c(i,r,0,a-1);return k.some({row:e,column:u})}))},am=function(t,e,n,o,r){return rm(t,e,o,(function(e,i){var a=_c(e,r,0,n-1),u=a===n-1?t.length-a*o:o,c=Tc(i,0,u-1);return k.some({row:a,column:c})}))},um=[Ne("selector"),nn("execute",jd),hu("onEscape"),nn("captureTab",!1),wu()],cm=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},sm=function(t){return function(e,n,o,r){return nm(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}},lm=function(t,e,n){return n.captureTab?k.some(!0):k.none()},fm=sm((function(t,e,n,o){return im(t,e,n,o,-1)})),dm=sm((function(t,e,n,o){return im(t,e,n,o,1)})),mm=sm((function(t,e,n,o){return am(t,e,n,o,-1)})),gm=sm((function(t,e,n,o){return am(t,e,n,o,1)})),pm=r([Ad(_d(bd),Xd(fm,dm)),Ad(_d(xd),$d(fm,dm)),Ad(_d(yd),Qd(mm)),Ad(_d(wd),Zd(gm)),Ad(Td([Dd,_d(gd)]),lm),Ad(Td([Bd,_d(gd)]),lm),Ad(_d(hd),(function(t,e,n){return n.onEscape(t,e)})),Ad(_d(vd.concat(pd)),(function(t,e,n,o){return r=t,(i=n).focusManager.get(r).bind((function(t){return Ja(t,i.selector)})).bind((function(o){return n.execute(t,e,o)}));var r,i}))]),hm=r([Ad(_d(vd),Ld)]),vm=Pd(um,Gd,pm,hm,(function(){return k.some(cm)})),bm=function(t,e,n,o){var r=function t(e,n,r){var i,a=_c(n,o,0,r.length-1);return a===e?k.none():(i=r[a],"button"===pr(i)&&"disabled"===Kr(i,"disabled")?t(e,a,r):k.from(r[a]))};return nm(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))},ym=[Ne("selector"),nn("getInitial",k.none),nn("execute",jd),hu("onEscape"),nn("executeOnMove",!1),nn("allowVertical",!0)],xm=function(t,e,n){return o=t,(r=n).focusManager.get(o).bind((function(t){return Ja(t,r.selector)})).bind((function(o){return n.execute(t,e,o)}));var o,r},wm=function(t,e,n){e.getInitial(t).orThunk((function(){return Ka(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},Sm=function(t,e,n){return bm(t,n.selector,e,-1)},Cm=function(t,e,n){return bm(t,n.selector,e,1)},km=function(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?xm(e,n,o):k.some(!0)}))}},Om=function(t,e,n){return n.onEscape(t,e)},_m=r([Ad(_d(vd),Ld)]),Tm=Pd(ym,wi.init,(function(t,e,n,o){var r=bd.concat(n.allowVertical?yd:[]),i=xd.concat(n.allowVertical?wd:[]);return[Ad(_d(r),km(Xd(Sm,Cm))),Ad(_d(i),km($d(Sm,Cm))),Ad(_d(pd),xm),Ad(_d(vd),xm),Ad(_d(hd),Om)]}),_m,(function(){return k.some(wm)})),Dm=function(t,e,n){return k.from(t[e]).bind((function(t){return k.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},Em=function(t,e,n,o){var r=t[e].length,i=_c(n,o,0,r-1);return Dm(t,e,i)},Bm=function(t,e,n,o){var r=_c(n,o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return Dm(t,r,a)},Am=function(t,e,n,o){var r=t[e].length,i=Tc(n+o,0,r-1);return Dm(t,e,i)},Im=function(t,e,n,o){var r=Tc(n+o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return Dm(t,r,a)},Mm=[qe("selectors",[Ne("row"),Ne("cell")]),nn("cycles",!0),nn("previousSelector",k.none),nn("execute",jd)],Fm=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Ka(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))},Rm=function(t,e){return function(n,o,r){var i=r.cycles?t:e;return Ja(o,r.selectors.row).bind((function(t){var e=Ts(t,r.selectors.cell);return om(e,o).bind((function(e){var o=Ts(n,r.selectors.row);return om(o,t).bind((function(t){var n,a=(n=r,W(o,(function(t){return Ts(t,n.selectors.cell)})));return i(a,t,e).map((function(t){return t.cell}))}))}))}))}},Pm=Rm((function(t,e,n){return Em(t,e,n,-1)}),(function(t,e,n){return Am(t,e,n,-1)})),Vm=Rm((function(t,e,n){return Em(t,e,n,1)}),(function(t,e,n){return Am(t,e,n,1)})),Hm=Rm((function(t,e,n){return Bm(t,n,e,-1)}),(function(t,e,n){return Im(t,n,e,-1)})),zm=Rm((function(t,e,n){return Bm(t,n,e,1)}),(function(t,e,n){return Im(t,n,e,1)})),jm=r([Ad(_d(bd),Xd(Pm,Vm)),Ad(_d(xd),$d(Pm,Vm)),Ad(_d(yd),Qd(Hm)),Ad(_d(wd),Zd(zm)),Ad(_d(vd.concat(pd)),(function(t,e,n){return hc(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),Lm=r([Ad(_d(vd),Ld)]),Nm=Pd(Mm,wi.init,jm,Lm,(function(){return k.some(Fm)})),Um=[Ne("selector"),nn("execute",jd),nn("moveOnTab",!1)],Wm=function(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))},Gm=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Ym=function(t,e,n){return bm(t,n.selector,e,-1)},qm=function(t,e,n){return bm(t,n.selector,e,1)},Xm=r([Ad(_d(yd),tm(Ym)),Ad(_d(wd),tm(qm)),Ad(Td([Dd,_d(gd)]),(function(t,e,n,o){return n.moveOnTab?tm(Ym)(t,e,n,o):k.none()})),Ad(Td([Bd,_d(gd)]),(function(t,e,n,o){return n.moveOnTab?tm(qm)(t,e,n,o):k.none()})),Ad(_d(pd),Wm),Ad(_d(vd),Wm)]),$m=r([Ad(_d(vd),Ld)]),Km=Pd(Um,wi.init,Xm,$m,(function(){return k.some(Gm)})),Jm=[hu("onSpace"),hu("onEnter"),hu("onShiftEnter"),hu("onLeft"),hu("onRight"),hu("onTab"),hu("onShiftTab"),hu("onUp"),hu("onDown"),hu("onEscape"),nn("stopSpaceKeyup",!1),Ke("focusIn")],Qm=Pd(Jm,wi.init,(function(t,e,n){return[Ad(_d(vd),n.onSpace),Ad(Td([Bd,_d(pd)]),n.onEnter),Ad(Td([Dd,_d(pd)]),n.onShiftEnter),Ad(Td([Dd,_d(gd)]),n.onShiftTab),Ad(Td([Bd,_d(gd)]),n.onTab),Ad(_d(yd),n.onUp),Ad(_d(wd),n.onDown),Ad(_d(bd),n.onLeft),Ad(_d(xd),n.onRight),Ad(_d(vd),n.onSpace),Ad(_d(hd),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Ad(_d(vd),Ld)]:[]}),(function(t){return t.focusIn})),Zm=Hd.schema(),tg=zd.schema(),eg=Tm.schema(),ng=vm.schema(),og=Nm.schema(),rg=Wd.schema(),ig=Km.schema(),ag=Qm.schema(),ug=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Zm,cyclic:tg,flow:eg,flatgrid:ng,matrix:og,execution:rg,menu:ig,special:ag}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){Vt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Yd}),cg=function(t,e,n,o){var r=t.getSystem().build(o);ul(t,r,n)},sg=function(t,e,n,o){var r=lg(t);K(r,(function(t){return qn(o.element,t.element)})).each(sl)},lg=function(t,e){return t.components()},fg=function(t,e,n,o,r){var i=lg(t);return k.from(i[o]).map((function(e){return sg(t,0,0,e),r.each((function(e){cg(t,0,(function(t,e){var n,r;r=e,Er(n=t,o).fold((function(){Lr(n,r)}),(function(t){Hr(t,r)}))}),e)})),e}))},dg=cc({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){cg(t,0,Lr,o)},prepend:function(t,e,n,o){cg(t,0,jr,o)},remove:sg,replaceAt:fg,replaceBy:function(t,e,n,o,r){var i=lg(t);return J(i,o).bind((function(e){return fg(t,0,0,e,r)}))},set:function(t,e,n,o){vc((function(){var e=W(o,t.getSystem().build);il(t,e)}),t.element)},contents:lg})}),mg=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=er(e),cc({fields:[Ne("enabled")],name:n,active:{events:r(o)}})),configAsRaw:r({}),initialConfig:{},state:wi}}},gg=function(t,e){e.ignore||(gc(t.element),e.onFocus(t))},pg=Object.freeze({__proto__:null,focus:gg,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return e=t.element,n=Mr(e).dom,e.dom===n.activeElement;var e,n}}),hg=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return ki(n)},events:function(t){return er([rr(ko(),(function(e,n){gg(e,t),n.stop()}))].concat(t.stopMousedown?[rr(uo(),(function(t,e){e.event.prevent()}))]:[]))}}),vg=[pu("onFocus"),nn("stopMousedown",!1),nn("ignore",!1)],bg=cc({fields:vg,name:"focusing",active:hg,apis:pg}),yg=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},xg=function(t,e,n){e.toggleClass.each((function(e){(n.get()?Vi:zi)(t.element,e)}))},wg=function(t,e,n){kg(t,e,n,!n.get())},Sg=function(t,e,n){n.set(!0),xg(t,e,n),yg(t,e,n)},Cg=function(t,e,n){n.set(!1),xg(t,e,n),yg(t,e,n)},kg=function(t,e,n,o){(o?Sg:Cg)(t,e,n)},Og=function(t,e,n){kg(t,e,n,e.selected)},_g=Object.freeze({__proto__:null,onLoad:Og,toggle:wg,isOn:function(t,e,n){return n.get()},on:Sg,off:Cg,set:kg}),Tg=Object.freeze({__proto__:null,exhibit:function(){return ki({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=wg,gr((function(t){r(t,n,o)}))),a=ec(t,e,Og);return er(Q([t.toggleOnExecute?[i]:[],[a]]))}}),Dg=function(t,e,n){$r(t.element,"aria-expanded",n)},Eg=[nn("selected",!1),Ke("toggleClass"),nn("toggleOnExecute",!0),on("aria",{mode:"none"},Ie("mode",{pressed:[nn("syncWithExpanded",!1),yu("update",(function(t,e,n){$r(t.element,"aria-pressed",n),e.syncWithExpanded&&Dg(t,e,n)}))],checked:[yu("update",(function(t,e,n){$r(t.element,"aria-checked",n)}))],expanded:[yu("update",Dg)],selected:[yu("update",(function(t,e,n){$r(t.element,"aria-selected",n)}))],none:[yu("update",n)]}))],Bg=cc({fields:Eg,name:"toggling",active:Tg,apis:_g,state:(Rd=!1,{init:function(){var t=mn(Rd);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Rd)},readState:function(){return t.get()}}}})}),Ag=function(){var t=function(t,e){e.stop(),Jo(t)};return[rr(yo(),t),rr(Bo(),t),sr(oo()),sr(uo())]},Ig=function(t){return er(Q([t.map((function(t){return gr((function(e,n){t(e),n.stop()}))})).toArray(),Ag()]))},Mg="alloy.item-hover",Fg="alloy.item-focus",Rg=function(t){(hc(t.element).isNone()||bg.isFocused(t))&&(bg.isFocused(t)||bg.focus(t),Ko(t,Mg,{item:t}))},Pg=function(t){Ko(t,Fg,{item:t})},Vg=r(Mg),Hg=r(Fg),zg=[Ne("data"),Ne("components"),Ne("dom"),nn("hasSubmenu",!1),Ke("toggling"),ql("itemBehaviours",[Bg,bg,ug,Ul]),nn("ignoreFocus",!1),nn("domModification",{}),yu("builder",(function(t){return{dom:t.dom,domModification:d(d({},t.domModification),{attributes:d(d(d({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Xl(t.itemBehaviours,[t.toggling.fold(Bg.revoke,(function(t){return Bg.config(d({aria:{mode:"checked"}},t))})),bg.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Pg(t)}}),ug.config({mode:"execution"}),Ul.config({store:{mode:"memory",initialValue:t.data}}),mg("item-type-events",g(Ag(),[rr(fo(),Rg),rr(Eo(),bg.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),nn("eventOrder",{})],jg=[Ne("dom"),Ne("components"),yu("builder",(function(t){return{dom:t.dom,components:t.components,events:er([(e=Eo(),rr(e,(function(t,e){e.stop()})))])};var e}))],Lg=r("item-widget"),Ng=r([xf({name:"widget",overrides:function(t){return{behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:n}})])}}})]),Ug=[Ne("uid"),Ne("data"),Ne("components"),Ne("dom"),nn("autofocus",!1),nn("ignoreFocus",!1),ql("widgetBehaviours",[Ul,bg,ug]),nn("domModification",{}),Lf(Ng()),yu("builder",(function(t){var e=If(Lg(),t,Ng()),n=Mf(Lg(),t,e.internals()),o=function(e){return Ff(e,t,"widget").map((function(t){return ug.focusIn(t),t}))},r=function(e,n){return Qf(n.event.target)||t.autofocus&&n.setSource(e.element),k.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:er([gr((function(t,e){o(t).each((function(t){e.stop()}))})),rr(fo(),Rg),rr(Eo(),(function(e,n){t.autofocus?o(e):bg.focus(e)}))]),behaviours:Xl(t.widgetBehaviours,[Ul.config({store:{mode:"memory",initialValue:t.data}}),bg.config({ignore:t.ignoreFocus,onFocus:function(t){Pg(t)}}),ug.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:fc(),onLeft:r,onRight:r,onEscape:function(e,n){return bg.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),k.none()):(bg.focus(e),k.some(!0))}})])}}))],Wg=Ie("type",{widget:Ug,item:zg,separator:jg}),Gg=r([Cf({factory:{sketch:function(t){var e=Ee("menu.spec item",Wg,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:d(d({},e),{uid:di("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Yg=r([Ne("value"),Ne("items"),Ne("dom"),Ne("components"),nn("eventOrder",{}),Wl("menuBehaviours",[dd,Ul,ed,ug]),on("movement",{mode:"menu",moveOnTab:!0},Ie("mode",{grid:[wu(),yu("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[yu("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),Ne("rowSelector")],menu:[nn("moveOnTab",!0),yu("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),Ue("markers",lu()),nn("fakeFocus",!1),nn("focusManager",Md()),pu("onHighlight")]),qg=r("alloy.menu-focus"),Xg=$f({name:"Menu",configFields:Yg(),partFields:Gg(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yl(t.menuBehaviours,[dd.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Ul.config({store:{mode:"memory",initialValue:t.value}}),ed.config({find:k.some}),ug.config(t.movement.config(t,t.movement))]),events:er([rr(Hg(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){dd.highlight(t,n),e.stop(),Ko(t,qg(),{menu:t,item:n})}))})),rr(Vg(),(function(t,e){var n=e.event.item;dd.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),$g=function t(e,n,o,r){return Rt(o,r).bind((function(r){return Rt(e,r).bind((function(r){var i=t(e,n,o,r);return k.some([r].concat(i))}))})).getOr([])},Kg=function(t,e){var n={};Dt(t,(function(t,e){G(t,(function(t){n[t]=e}))}));var o=e,r=Bt(e,(function(t,e){return{k:t,v:e}})),i=Et(r,(function(t,e){return[e].concat($g(n,o,r,e))}));return Et(n,(function(t){return Rt(i,t).getOr([t])}))},Jg=function(t){return"prepared"===t.type?k.some(t.menu):k.none()},Qg={init:function(){var t=mn({}),e=mn({}),n=mn({}),o=mn(k.none()),r=mn({}),i=function(e,n,o){return a(e).bind((function(r){return i=e,Mt(t.get(),(function(t,e){return t===i})).bind((function(t){return n(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:o}}))}));var i}))},a=function(t){return u(t).bind(Jg)},u=function(t){return Rt(e.get(),t)},c=function(e){return Rt(t.get(),e)};return{setMenuBuilt:function(t,n){var o;e.set(d(d({},e.get()),((o={})[t]={type:"prepared",menu:n},o)))},setContents:function(i,a,u,c){o.set(k.some(i)),t.set(u),e.set(a),r.set(c);var s=Kg(c,u);n.set(s)},expand:function(e){return Rt(t.get(),e).map((function(t){var o=Rt(n.get(),e).getOr([]);return[t].concat(o)}))},refresh:function(t){return Rt(n.get(),t)},collapse:function(t){return Rt(n.get(),t).bind((function(t){return 1<t.length?k.some(t.slice(1)):k.none()}))},lookupMenu:u,lookupItem:c,otherMenus:function(t){var e=r.get();return nt(_t(e),t)},getPrimary:function(){return o.get().bind(a)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),o.set(k.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var r=q(c(t).toArray(),(function(t){return a(t).isSome()}));return Rt(n.get(),t).bind((function(t){var n=et(r.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return k.none();e.push(o.getOrDie())}return k.some(e)}(Z(n,(function(t,r){return i(t,e,n.slice(0,r+1)).fold((function(){return o.get().is(t)?[]:[k.none()]}),(function(t){return[k.some(t)]}))})))}))}}},extractPreparedMenu:Jg},Zg=r("collapse-item"),tp=Xf({name:"TieredMenu",configFields:[bu("onExecute"),bu("onEscape"),vu("onOpenMenu"),vu("onOpenSubmenu"),pu("onRepositionMenu"),pu("onCollapseMenu"),nn("highlightImmediately",!0),qe("data",[Ne("primary"),Ne("menus"),Ne("expansions")]),nn("fakeFocus",!1),pu("onHighlight"),pu("onHover"),du(),Ne("dom"),nn("navigateOnHover",!0),nn("stayInDom",!1),Wl("tmenuBehaviours",[ug,dd,ed,dg]),nn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var o,r,i=mn(k.none()),a=Qg.init(),u=function(e){var n,o,r,i=(n=e,o=t.data.primary,r=t.data.menus,Et(r,(function(e,r){var i=function(){return Xg.sketch(d(d({},e),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Fd:Md)()}))};return r===o?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),u=s();return a.setContents(t.data.primary,i,t.data.expansions,u),a.getPrimary()},c=function(t){return Ul.getValue(t).value},s=function(e){return Et(t.data.menus,(function(t,e){return Z(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},f=function(t,e){dd.highlight(t,e),dd.getHighlighted(e).orThunk((function(){return dd.getFirst(e)})).each((function(e){Qo(t,e.element,Eo())}))},m=function(t,e){return Kf(W(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?k.some(t.menu):k.none()}))})))},g=function(e,n,o){var r=m(n,n.otherMenus(o));G(r,(function(n){Ni(n.element,[t.markers.backgroundMenu]),t.stayInDom||dg.remove(e,n)}))},p=function(e,n){var o,r=(o=e,i.get().getOrThunk((function(){var e={},n=Ts(o.element,"."+t.markers.item),r=q(n,(function(t){return"true"===Kr(t,"aria-haspopup")}));return G(r,(function(t){o.getSystem().getByDom(t).each((function(t){var n=c(t);e[n]=t}))})),i.set(k.some(e)),e})));Dt(r,(function(t,e){var o=j(n,e);$r(t.element,"aria-expanded",o)}))},h=function(e,n,o){return k.from(o[0]).bind((function(r){return n.lookupMenu(r).bind((function(r){if("notbuilt"===r.type)return k.none();var i=r.menu,a=m(n,o.slice(1));return G(a,(function(e){Vi(e.element,t.markers.backgroundMenu)})),Wi(i.element)||dg.append(e,ha(i)),Ni(i.element,[t.markers.backgroundMenu]),f(e,i),g(e,n,o),k.some(i)}))}))};(r=o=o||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=function(e,n,r){void 0===r&&(r=o.HighlightSubmenu);var i=c(n);return a.expand(i).bind((function(i){return p(e,i),k.from(i[0]).bind((function(u){return a.lookupMenu(u).bind((function(c){var s=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return a.setMenuBuilt(e,o),o}(e,u,c);return Wi(s.element)||dg.append(e,ha(s)),t.onOpenSubmenu(e,n,s,et(i)),r===o.HighlightSubmenu?(dd.highlightFirst(s),h(e,a,i)):(dd.dehighlightAll(s),k.some(n))}))}))}))},b=function(e,n){var o=c(n);return a.collapse(o).bind((function(o){return p(e,o),h(e,a,o).map((function(o){return t.onCollapseMenu(e,n,o),o}))}))},y=function(e){return function(n,o){return Ja(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(l)}))}))}},x=er([rr(qg(),(function(t,e){var n=e.event.item;a.lookupItem(c(n)).each((function(){var n=e.event.menu;dd.highlight(t,n);var o=c(e.event.item);a.refresh(o).each((function(e){return g(t,a,e)}))}))})),gr((function(e,r){var i=r.event.target;e.getSystem().getByDom(i).each((function(r){0===c(r).indexOf("collapse-item")&&b(e,r),v(e,r,o.HighlightSubmenu).fold((function(){t.onExecute(e,r)}),n)}))})),fr((function(e,n){u(e).each((function(n){dg.append(e,ha(n)),t.onOpenMenu(e,n),t.highlightImmediately&&f(e,n)}))}))].concat(t.navigateOnHover?[rr(Vg(),(function(e,n){var r,i,u=n.event.item;r=e,i=c(u),a.refresh(i).bind((function(t){return p(r,t),h(r,a,t)})),v(e,u,o.HighlightParent),t.onHover(e,u)}))]:[])),w=function(t){return dd.getHighlighted(t).bind(dd.getHighlighted)},S={collapseMenu:function(t){w(t).each((function(e){b(t,e)}))},highlightPrimary:function(t){a.getPrimary().each((function(e){f(t,e)}))},repositionMenus:function(e){a.getPrimary().bind((function(t){return w(e).bind((function(t){var e=c(t),n=Ft(a.getMenus()),o=Kf(W(n,Qg.extractPreparedMenu));return a.getTriggeringPath(e,(function(t){return e=t,ct(o,(function(t){if(!t.getSystem().isConnected())return k.none();var n=dd.getCandidates(t);return K(n,(function(t){return c(t)===e}))}));var e}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){var n;n=e,k.from(n.components()[0]).filter((function(t){return"menu"===Kr(t.element,"role")})).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Yl(t.tmenuBehaviours,[ug.config({mode:"special",onRight:y((function(t,e){return Qf(e.element)?k.none():v(t,e,o.HighlightSubmenu)})),onLeft:y((function(t,e){return Qf(e.element)?k.none():b(t,e)})),onEscape:y((function(e,n){return b(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){a.getPrimary().each((function(e){Qo(t,e.element,Eo())}))}}),dd.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ed.config({find:function(t){return dd.getHighlighted(t)}}),dg.config({})]),eventOrder:t.eventOrder,apis:S,events:x}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Qt(t,e),expansions:{}}},collapseItem:function(t){return{value:ii(Zg()),meta:{text:t}}}}}),ep=Xf({name:"InlineView",configFields:[Ne("lazySink"),pu("onShow"),pu("onHide"),tn("onEscape"),Wl("inlineBehaviours",[Cl,Ul,dc]),en("fireDismissalEventInstead",[nn("event",Lo())]),en("fireRepositionEventInstead",[nn("event",No())]),nn("getRelated",k.none),nn("isExtraPart",s),nn("eventOrder",k.none)],factory:function(t,e){var n=function(t,e,n,r){o(t,e,n,(function(){return r.map(ja)}))},o=function(e,n,o,r){var i=t.lazySink(e).getOrDie();Cl.openWhileCloaked(e,o,(function(){return el.positionWithinBounds(i,n,e,r())})),Ul.setValue(e,k.some({mode:"position",anchor:n,getBounds:r}))},r=function(e,n,o,r){var i,a,u,c,s,l,f,m,g=(i=t,a=e,u=n,s=r,l=function(){return i.lazySink(a)},f="horizontal"===(c=o).type?{layouts:{onLtr:Ju,onRtl:Qu}}:{},m=function(t){return 2===t.length?f:{}},tp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return Cl.close(a),i.onEscape.map((function(t){return t(a)})),k.some(!0)},onExecute:function(){return k.some(!0)},onOpenMenu:function(t,e){el.positionWithinBounds(l().getOrDie(),u,e,s())},onOpenSubmenu:function(t,e,n,o){var r=l().getOrDie();el.position(r,d({anchor:"submenu",item:e},m(o)),n)},onRepositionMenu:function(t,e,n){var o=l().getOrDie();el.positionWithinBounds(o,u,e,s()),G(n,(function(t){var e=m(t.triggeringPath);el.position(o,d({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}}));Cl.open(e,g),Ul.setValue(e,k.some({mode:"menu",menu:g}))},i=function(e){Cl.isOpen(e)&&Ul.getValue(e).each((function(n){switch(n.mode){case"menu":Cl.getState(e).each((function(t){tp.repositionMenus(t)}));break;case"position":var o=t.lazySink(e).getOrDie();el.positionWithinBounds(o,n.anchor,e,n.getBounds())}}))},a={setContent:function(t,e){Cl.setContent(t,e)},showAt:function(t,e,o){n(t,e,o,k.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(t,e,n){r(t,e,n,(function(){return k.none()}))},showMenuWithinBounds:r,hide:function(t){Cl.isOpen(t)&&(Ul.setValue(t,k.none()),Cl.close(t))},getContent:function(t){return Cl.getState(t)},reposition:i,isOpen:Cl.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Yl(t.inlineBehaviours,[Cl.config({isPartOf:function(e,n,o){return tu(n,o)||(r=e,i=o,t.getRelated(r).exists((function(t){return tu(t,i)})));var r,i},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Ul.config({store:{mode:"memory",initialValue:k.none()}}),dc.config({channels:d(d({},Dl(d({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Bl(d(d({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:a}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),np=function(t){return t.x},op=function(t,e){return t.x+t.width/2-e.width/2},rp=function(t,e){return t.x+t.width-e.width},ip=function(t){return t.y},ap=function(t,e){return t.y+t.height-e.height},up=function(t,e,n){return Su(rp(t,e),ap(t,e),n.innerSoutheast(),Tu(),Iu(t,{right:0,bottom:3}),"layout-inner-se")},cp=function(t,e,n){return Su(np(t),ap(t,e),n.innerSouthwest(),_u(),Iu(t,{left:1,bottom:3}),"layout-inner-sw")},sp=function(t,e,n){return Su(rp(t,e),ip(t),n.innerNortheast(),Ou(),Iu(t,{right:0,top:2}),"layout-inner-ne")},lp=function(t,e,n){return Su(np(t),ip(t),n.innerNorthwest(),ku(),Iu(t,{left:1,top:2}),"layout-inner-nw")},fp=function(t,e,n){return Su(op(t,e),ip(t),n.innerNorth(),Du(),Iu(t,{top:2}),"layout-inner-n")},dp=function(t,e,n){return Su(op(t,e),ap(t,e),n.innerSouth(),Eu(),Iu(t,{bottom:3}),"layout-inner-s")},mp=tinymce.util.Tools.resolve("tinymce.util.Delay"),gp=Xf({name:"Button",factory:function(t){var e=Ig(t.action),n=t.dom.tag,o=function(e){return Rt(t.dom,"attributes").bind((function(t){return Rt(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Xl(t.buttonBehaviours,[bg.config({}),ug.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map((function(t){return{role:t}})).getOr({});return d({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[nn("uid",void 0),Ne("dom"),nn("components",[]),ql("buttonBehaviours",[bg,ug]),Ke("action"),Ke("role"),nn("eventOrder",{})]}),pp=function(t){var e=void 0!==t.uid&&Vt(t,"uid")?t.uid:di("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return d(d({},t),{uid:e})}}},hp=function(t){return k.from(t()["temporary-placeholder"]).getOr("!not found!")},vp=function(t,e){return k.from(e()[t.toLowerCase()]).getOrThunk((function(){return hp(e)}))},bp={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},yp=Xf({name:"Notification",factory:function(t){var e,n,o=pp({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:ac([dg.config({})])}),r=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},i=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},a=pp({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},i(0)],behaviours:ac([dg.config({})])}),u={updateProgress:function(t,e){t.getSystem().isConnected()&&a.getOpt(t).each((function(t){dg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(e)]},i(e)])}))},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=o.get(t),dg.set(n,[da(e)]))}},c=Q([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return k.from(bp[t])})).toArray()]),s=pp(gp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vp("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=c,n=t.iconProvider,ct(e,(function(t){return k.from(n()[t.toLowerCase()])})).getOrThunk((function(){return hp(n)})))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:ac([dg.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ac([bg.config({}),mg("notification-events",[rr(mo(),(function(t){s.getOpt(t).each(bg.focus)}))])]),components:l.concat(t.progress?[a.asSpec()]:[]).concat(t.closeButton?[s.asSpec()]:[]),apis:u}},configFields:[Ke("level"),Ne("progress"),Ne("icon"),Ne("onAction"),Ne("text"),Ne("iconProvider"),Ne("translationProvider"),cn("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function xp(t,e,n){var o=e.backstage;return{open:function(t,r){var i=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=function(){r(),ep.hide(c)},u=pa(yp.sketch({text:t.text,level:j(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:k.from(t.icon),closeButton:!i,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),c=pa(ep.sketch(d({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},o.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),0<t.timeout&&mp.setTimeout((function(){a()}),t.timeout),{close:a,moveTo:function(t,e){ep.showAt(c,{anchor:"makeshift",x:t,y:e},ha(u))},moveRel:function(t,n){var o,r;"banner"!==n?(o=function(t){switch(t){case"bc-bc":return dp;case"tc-tc":return fp;case"tc-bc":return Uu;case"bc-tc":default:return Wu}}(n),r={anchor:"node",root:Gi(),node:k.some(pn.fromDom(t)),layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}},ep.showAt(c,r,ha(u))):ep.showAt(c,e.backstage.shared.anchors.banner(),ha(u))},text:function(t){yp.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){yp.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(t){var e;G(t,(function(t){return t.moveTo(0,0)})),0<(e=t).length&&(it(e).each((function(t){return t.moveRel(null,"banner")})),G(e,(function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")})))},getArgs:function(t){return t.settings}}}var wp,Sp,Cp=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},kp=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Op=function(t,e,n,o,r){var i=kp(t,(function(e){return o=e,(n=t).isBlock(o)||j(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===n.getContentEditable(o);var n,o}));return k.from(i.backwards(e,n,o,r))},_p=function(t,e){return Tp(pn.fromDom(t.selection.getNode())).getOrThunk((function(){var n=pn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Lr(n,pn.fromDom(e.extractContents())),e.insertNode(n.dom),Or(n).each((function(t){return t.dom.normalize()})),_s(n,Os).map((function(e){var n;t.selection.setCursorLocation(e.dom,"img"===pr(n=e)?1:Cs(n).fold((function(){return Dr(n).length}),(function(t){return t.length})))})),n}))},Tp=function(t){return Ja(t,"[data-mce-autocompleter]")},Dp=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Ep=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},Bp=function(t,e){return t.substring(e.length)},Ap=function(t,e,n,o){if(void 0===o&&(o=0),!(r=e).collapsed||3!==r.startContainer.nodeType)return k.none();var r,i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Op(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,e,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(Ep(r))return k.none();if(r===n)break}return k.some(o)}(o,e,n).getOr(e)}),i).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return k.none();var i=Dp(r);return 0!==i.lastIndexOf(n)||Bp(i,n).length<o?k.none():k.some({text:Bp(i,n),range:r,triggerChar:n})}))},Ip=function(t,e,n,o){return void 0===o&&(o=0),Tp(pn.fromDom(e.startContainer)).fold((function(){return Ap(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=Dp(o);return k.some({range:o,text:Bp(r,n),triggerChar:n})}))},Mp=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){Ko(t,po(),{raw:e})};e.on("keydown",(function(e){var o=function(){return t.getView().bind(dd.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(o().each(Jo),e.preventDefault()):40===e.which?(o().fold((function(){t.getView().each(dd.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||o().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&Tp(pn.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},Fp=tinymce.util.Tools.resolve("tinymce.util.Promise"),Rp=function(t,e){return{container:t,offset:e}},Pp=function t(e){if(3===e.nodeType)return Rp(e,e.data.length);var n=e.childNodes;return 0<n.length?t(n[n.length-1]):Rp(e,n.length)},Vp=function t(e,n){var o=e.childNodes;return 0<o.length&&n<o.length?t(o[n],0):0<o.length&&1===e.nodeType&&o.length===n?Pp(o[o.length-1]):Rp(e,n)},Hp=function(t){return function(e){var n,o,r=Vp(e.startContainer,e.startOffset);return!Op(n=t,(o=r).container,o.offset,(function(t,e){return 0===e?-1:e}),n.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!Ep(e)})).isSome()}},zp=function(t,e){var n,o,r=e(),i=t.selection.getRng();return n=t.dom,o=i,ct(r.triggerChars,(function(t){return Ip(n,o,t)})).bind((function(n){return jp(t,e,n)}))},jp=function(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,a=q(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return Hp(t.dom)}))(n.range,i,n.text)}));if(0===a.length)return k.none();var u=Fp.all(W(a,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return k.some({lookupData:u,context:n})},Lp=de([We("type"),Ze("text")]),Np=de([nn("type","autocompleteitem"),nn("active",!1),nn("disabled",!1),nn("meta",{}),We("value"),Ze("text"),Ze("icon")]),Up=de([We("type"),We("ch"),rn("minChars",1),nn("columns",1),rn("maxResults",10),tn("matches"),Ye("fetch"),Ye("onAction"),ln("highlightOn",[],Pe)]),Wp=[cn("disabled",!1),Ze("tooltip"),Ze("icon"),Ze("text"),sn("onSetup",(function(){return n}))],Gp=de([We("type"),Ye("onAction")].concat(Wp)),Yp=function(t){return Te("toolbarbutton",Gp,t)},qp=[cn("active",!1)].concat(Wp),Xp=de(qp.concat([We("type"),Ye("onAction")])),$p=function(t){return Te("ToggleButton",Xp,t)},Kp=[sn("predicate",s),un("scope","node",["node","editor"]),un("position","selection",["node","selection","line"])],Jp=Wp.concat([nn("type","contextformbutton"),nn("primary",!1),Ye("onAction"),dn("original",i)]),Qp=qp.concat([nn("type","contextformbutton"),nn("primary",!1),Ye("onAction"),dn("original",i)]),Zp=Wp.concat([nn("type","contextformbutton")]),th=qp.concat([nn("type","contextformtogglebutton")]),eh=Ie("type",{contextformbutton:Jp,contextformtogglebutton:Qp}),nh=de([nn("type","contextform"),sn("initValue",(function(){return""})),Ze("label"),$e("commands",eh),Je("launch",Ie("type",{contextformbutton:Zp,contextformtogglebutton:th}))].concat(Kp)),oh=de([nn("type","contexttoolbar"),We("items")].concat(Kp)),rh=function(t){var e,n,o=t.ui.registry.getAll().popups,r=Et(o,(function(t){return Te("Autocompleter",Up,t).fold((function(t){throw new Error(Be(t))}),(function(t){return t}))})),i=(e=It(r,(function(t){return t.ch})),n={},G(e,(function(t){n[t]={}})),_t(n)),a=Ft(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return q(a,(function(e){return e.ch===t}))}}};(Sp=wp=wp||{})[Sp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Sp[Sp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ih,ah,uh=wp,ch="tox-menu-nav__js",sh="tox-collection__item",lh="tox-swatch",fh={normal:ch,color:lh},dh="tox-collection__item--enabled",mh="tox-collection__item-label",gh="tox-collection__item-caret",ph="tox-collection__item--active",hh="tox-collection__item-container",vh="tox-collection__item-container--row",bh=function(t){return Rt(fh,t).getOr(ch)},yh=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},xh=function(t){var e=yh(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:bh(t)}},wh=[Xg.parts.items({})],Sh=function(t,e,n){var o=yh(n);return{dom:{tag:"div",classes:Q([[o.tieredMenu]])},markers:xh(n)}},Ch=function(t,e){return function(n){var o=U(n,e);return W(o,(function(e){return{dom:t,components:e}}))}},kh=function(t,e){var n=[],o=[];return G(t,(function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],Pt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&n.push(o),W(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},Oh=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Xg.parts.items({preprocess:function(n){return"auto"!==t&&1<t?Ch({tag:"div",classes:["tox-collection__group"]},t)(n):kh(n,(function(t,n){return"separator"===e[n].type}))}})]}},_h=function(t){return L(t,(function(t){return"icon"in t&&void 0!==t.icon}))},Th=function(t){return console.error(Be(t)),console.log(t),k.none()},Dh=function(t,e,n,o,r){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xg.parts.items({preprocess:function(t){return kh(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:a.dom,components:a.components,items:n}},Eh=function(t,e,n,o,r){var a,u,c,s,l,f;return"color"===r?{value:t,dom:(a=o,c={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xg.parts.items({preprocess:"auto"!==a?Ch({tag:"div",classes:["tox-swatches__row"]},a):i})]}]}).dom,components:c.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"normal"===r&&1===o?{value:t,dom:(c=Oh(1,n)).dom,components:c.components,items:n}:"normal"===r?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:(s=e,l=o,f=yh(r),{tag:"div",classes:Q([[f.menu,"tox-menu-"+l+"-column"],s?[f.hasIcons]:[]])}),components:wh,items:n}:{value:t,dom:(u=o,c={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xg.parts.items({preprocess:Ch({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:c.components,items:n}},Bh=[We("type"),We("src"),Ze("alt"),ln("classes",[],Pe)],Ah=de(Bh),Ih=[We("type"),We("text"),Ze("name"),ln("classes",["tox-collection__item-label"],Pe)],Mh=de(Ih),Fh=ke((function(){return Ae("type",{cardimage:Ah,cardtext:Mh,cardcontainer:Rh})})),Rh=de([We("type"),an("direction","horizontal"),an("align","left"),an("valign","middle"),$e("items",Fh)]),Ph=[cn("disabled",!1),Ze("text"),Ze("shortcut"),ye("value","value",Xt((function(){return ii("menuitem-value")})),Me()),nn("meta",{})],Vh=de([We("type"),Ze("label"),$e("items",Fh),sn("onSetup",(function(){return n})),sn("onAction",n)].concat(Ph)),Hh=de([We("type"),cn("active",!1),Ze("icon")].concat(Ph)),zh=de([We("type"),Ge("fancytype",["inserttable","colorswatch"]),sn("onAction",n)]),jh=de([We("type"),sn("onSetup",(function(){return n})),sn("onAction",n),Ze("icon")].concat(Ph)),Lh=de([We("type"),Ye("getSubmenuItems"),sn("onSetup",(function(){return n})),Ze("icon")].concat(Ph)),Nh=de([We("type"),Ze("icon"),cn("active",!1),sn("onSetup",(function(){return n})),Ye("onAction")].concat(Ph)),Uh=function(t,e,n){var o=Ts(t.element,"."+n);if(0<o.length){var r=J(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return k.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return k.none()},Wh=function(t,e){return ac([mg(t,e)])},Gh=function(t){return Wh(ii("unnamed-events"),t)},Yh=ii("tooltip.exclusive"),qh=ii("tooltip.show"),Xh=ii("tooltip.hide"),$h=function(t,e,n){t.getSystem().broadcastOn([Yh],{})},Kh=Object.freeze({__proto__:null,hideAllExclusive:$h,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&dg.set(t,o)}))}}),Jh=Object.freeze({__proto__:null,events:function(t,e){var n=function(n){e.getTooltip().each((function(o){sl(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()};return er(Q([[rr(qh,(function(n){e.resetTimer((function(){var o,r,i;o=n,e.isShowing()||($h(o),r=t.lazySink(o).getOrDie(),i=o.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:er("normal"===t.mode?[rr(fo(),(function(t){$o(o,qh)})),rr(so(),(function(t){$o(o,Xh)}))]:[]),behaviours:ac([dg.config({})])}),e.setTooltip(i),al(r,i),t.onShow(o,i),el.position(r,t.anchor(o),i))}),t.delay)})),rr(Xh,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),rr(To(),(function(t,e){e.universal||j(e.channels,Yh)&&n(t)})),dr((function(t){n(t)}))],"normal"===t.mode?[rr(mo(),(function(t){$o(t,qh)})),rr(Oo(),(function(t){$o(t,Xh)})),rr(fo(),(function(t){$o(t,qh)})),rr(so(),(function(t){$o(t,Xh)}))]:[rr(qo(),(function(t,e){$o(t,qh)})),rr(Xo(),(function(t){$o(t,Xh)}))]]))}}),Qh=[Ne("lazySink"),Ne("tooltipDom"),nn("exclusive",!0),nn("tooltipComponents",[]),nn("delay",300),un("mode","normal",["normal","follow-highlight"]),nn("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:r([Wu,Uu,zu,Lu,ju,Nu]),onRtl:r([Wu,Uu,zu,Lu,ju,Nu])}}})),pu("onHide"),pu("onShow")],Zh=cc({fields:Qh,name:"tooltipping",active:Jh,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none()),e=mn(k.none()),n=function(){t.get().each((function(t){clearTimeout(t)}))},o=r("not-implemented");return Si({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(k.some(t))},clearTooltip:function(){e.set(k.none())},clearTimer:n,resetTimer:function(e,o){n(),t.set(k.some(setTimeout((function(){e()}),o)))},readState:o})}}),apis:Kh}),tv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ev=tinymce.util.Tools.resolve("tinymce.util.I18n"),nv=["input","button","textarea","select"],ov=function(t,e,n){(e.disabled()?sv:lv)(t,e)},rv=function(t,e){return!0===e.useNative&&j(nv,pr(t.element))},iv=function(t){$r(t.element,"disabled","disabled")},av=function(t){Zr(t.element,"disabled")},uv=function(t){$r(t.element,"aria-disabled","true")},cv=function(t){$r(t.element,"aria-disabled","false")},sv=function(t,e,n){e.disableClass.each((function(e){Vi(t.element,e)})),(rv(t,e)?iv:uv)(t),e.onDisabled(t)},lv=function(t,e,n){e.disableClass.each((function(e){zi(t.element,e)})),(rv(t,e)?av:cv)(t),e.onEnabled(t)},fv=function(t,e){return rv(t,e)?Qr(t.element,"disabled"):"true"===Kr(t.element,"aria-disabled")},dv=Object.freeze({__proto__:null,enable:lv,disable:sv,isDisabled:fv,onLoad:ov,set:function(t,e,n,o){(o?sv:lv)(t,e)}}),mv=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return er([nr(Do(),(function(e,n){return fv(e,t)})),ec(t,e,ov)])}}),gv=[sn("disabled",s),nn("useNative",!0),Ke("disableClass"),pu("onDisabled"),pu("onEnabled")],pv=cc({fields:gv,name:"disabling",active:mv,apis:dv}),hv=tinymce.util.Tools.resolve("tinymce.EditorManager"),vv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},bv=function(t){return t.getParam("width",tv.DOM.getStyle(t.getElement(),"width"))},yv=function(t){return k.from(t.getParam("min_width")).filter(F)},xv=function(t){return k.from(t.getParam("min_height")).filter(F)},wv=function(t){return k.from(t.getParam("max_width")).filter(F)},Sv=function(t){return k.from(t.getParam("max_height")).filter(F)},Cv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},kv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=T(e),r=E(e)&&0<e.length;return!_v(t)&&(r||o||n)},Ov=function(t){var e=N(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=q(e,(function(t){return"string"==typeof t}));return 0<n.length?k.some(n):k.none()},_v=function(t){return Ov(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),l)};(ah=ih=ih||{})["default"]="wrap",ah.floating="floating",ah.sliding="sliding",ah.scrolling="scrolling";var Tv,Dv,Ev=function(t){return t.getParam("toolbar_mode","","string")};(Dv=Tv=Tv||{}).auto="auto",Dv.top="top",Dv.bottom="bottom";var Bv,Av,Iv,Mv=function(t){return t.getParam("toolbar_location",Tv.auto,"string")},Fv=function(t){return Mv(t)===Tv.bottom},Rv=function(t){var e=t.getParam("fixed_toolbar_container","","string");return 0<e.length&&t.inline?Ka(Gi(),e):k.none()},Pv=function(t){return t.inline&&Rv(t).isSome()},Vv=function(t){return Rv(t).getOrThunk((function(){return Fr(Mr(pn.fromDom(t.getElement())))}))},Hv=function(t){return t.inline&&!Cv(t)&&!kv(t)&&!_v(t)},zv=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Pv(t)&&!Hv(t)},jv="silver.readonly",Lv=de([Ue("readonly",Ve)]),Nv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([kl()],{target:n}),t.uiMothership.broadcastOn([kl()],{target:n})),t.mothership.broadcastOn([jv],{readonly:e}),t.uiMothership.broadcastOn([jv],{readonly:e})},Uv=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&Nv(e,!0)})),t.on("SwitchMode",(function(){return Nv(e,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")},Wv=function(){var t;return dc.config({channels:((t={})[jv]={schema:Lv,onReceive:function(t,e){pv.set(t,e.readonly)}},t)})},Gv=function(t){return pv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Yv=function(t){return pv.config({disabled:t})},qv=function(t){return pv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Xv=function(t){return pv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},$v=function(t,e){var n=t.getApi(e);return function(t){t(n)}},Kv=function(t,e){return fr((function(n){$v(t,n)((function(n){var o=t.onSetup(n);M(o)&&e.set(o)}))}))},Jv=function(t,e){return dr((function(n){return $v(t,n)(e.get())}))},Qv=((Bv={})[Do()]=["disabling","alloy.base.behaviour","toggling","item-events"],Bv),Zv=function(t){return Z(t,(function(t){return t.toArray()}))},tb=function(t,e,o,r){var i,a,u=mn(n);return{type:"item",dom:e.dom,components:Zv(e.optComponents),data:t.data,eventOrder:Qv,hasSubmenu:t.triggersSubmenu,itemBehaviours:ac([mg("item-events",[(i=t,a=o,gr((function(t,e){$v(i,t)(i.onAction),i.triggersSubmenu||a!==uh.CLOSE_ON_EXECUTE||(t.getSystem().isConnected()&&$o(t,Io()),e.stop())}))),Kv(t,u),Jv(t,u)]),Gv((function(){return t.disabled||r.isDisabled()})),Wv(),dg.config({})].concat(t.itemBehaviours))}},eb=function(t){return{value:t.value,meta:d({text:t.text.getOr("")},t.meta)}},nb=tinymce.util.Tools.resolve("tinymce.Env"),ob=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},rb=function(t){return{dom:{tag:"div",classes:[mh]},components:[da(ev.translate(t))]}},ib=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},ab=function(t,e){return{dom:{tag:"div",classes:[mh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[da(ev.translate(e))]}]}},ub=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=nb.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=W(o,(function(t){var e=t.toLowerCase().trim();return Pt(n,e)?n[e]:t})),nb.mac?r.join(""):r.join("+"))}};var e,n,o,r},cb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:vp("checkmark",t)}}},sb=function(t,e){var n=e.map((function(t){return{attributes:{title:ev.translate(t)}}})).getOr({});return d({tag:"div",classes:[ch,sh].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},lb=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],fb=["list-bull-circle","list-bull-default","list-bull-square"],db=function(t,e,n,o){void 0===o&&(o=k.none());var r,i,u,c,s,l,f,m,p,h,v,b,y=ev.isRtl()&&t.iconContent.exists((function(t){return j(fb,t)})),x=t.iconContent.map((function(t){return ev.isRtl()&&j(lb,t)?t+"-rtl":t})).map((function(t){return n=t,r=e.icons,i=o,k.from(r()[n.toLowerCase()]).or(i).getOrThunk((function(){return hp(r)}));var n,r,i})),w=k.from(t.meta).fold((function(){return rb}),(function(t){return Pt(t,"style")?a(ab,t.style):rb}));return"color"===t.presets?(m=t.ariaLabel,p=t.value,h=e,{dom:(v=x.getOr(""),b={tag:"div",attributes:m.map((function(t){return{title:h.translate(t)}})).getOr({}),classes:["tox-swatch"]},d(d({},b),"custom"===p?{tag:"button",classes:g(b.classes,["tox-swatches__picker-btn"]),innerHtml:v}:"remove"===p?{classes:g(b.classes,["tox-swatch--remove"]),innerHtml:v}:{attributes:d(d({},b.attributes),{"data-mce-color":p}),styles:{"background-color":p}})),optComponents:[]}):(r=t,i=x,u=w,c=y,s=n?i.or(k.some("")).map(ob):k.none(),l=r.checkMark,f=r.htmlContent.fold((function(){return r.textContent.map(u)}),(function(t){return k.some(ib(t,[mh]))})),{dom:sb(c,r.ariaLabel),optComponents:[s,f,r.shortcutContent.map(ub),l,r.caret]})},mb=function(t,e){return Rt(t,"tooltipWorker").map((function(t){return[Zh.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Fc}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Zh.setComponents(e,[ma({element:pn.fromDom(t)})])}))}})]})).getOr([])},gb=function(t,e){var n,o=ev.translate(t),r=(n=o,tv.DOM.encode(n));if(0<e.length){var i=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return r.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return r},pb=function t(e,n){return W(e,(function(e){switch(e.type){case"cardcontainer":return c=t((u=e).items,n),s="vertical"===u.direction?"tox-collection__item-container--column":vh,l="left"===u.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[hh,s,l,function(){switch(u.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:c};case"cardimage":return r=e.src,i=e.classes,a=e.alt,{dom:{tag:"img",classes:i,attributes:{src:r,alt:a.getOr("")}}};case"cardtext":var o=e.name.exists((function(t){return j(n.cardText.highlightOn,t)}))?k.from(n.cardText.matchText).getOr(""):"";return ib(gb(e.text,o),e.classes)}var r,i,a,u,c,s,l}))},hb=Tf(Lg(),Ng()),vb=function(t){return{value:t}},bb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xb=function(t){return bb.test(t)||yb.test(t)},wb=function(t){var e={value:t.value.replace(bb,(function(t,e,n,o){return e+e+n+n+o+o}))},n=yb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Sb=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},Cb=function(t){var e=Sb(t.red)+Sb(t.green)+Sb(t.blue);return vb(e)},kb=Math.min,Ob=Math.max,_b=Math.round,Tb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Db=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Eb=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},Bb=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},Ab=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;i=Ob(0,kb(i,1)),a=Ob(0,kb(a,1));if(0===i)return e=n=o=_b(255*a),Eb(e,n,o,1);var u=r/60,c=a*i,s=c*(1-Math.abs(u%2-1)),l=a-c;switch(Math.floor(u)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return e=_b(255*(e+l)),n=_b(255*(n+l)),o=_b(255*(o+l)),Eb(e,n,o,1)},Ib=function(t){var e=wb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Eb(n,o,r,1)},Mb=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return Eb(r,i,a,u)},Fb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Rb=Eb(255,0,0,1),Pb=function(t,e){return t.fire("ResizeContent",e)},Vb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Hb="tinymce-custom-colors",zb="choiceitem",jb=[{type:zb,text:"Light Green",value:"#BFEDD2"},{type:zb,text:"Light Yellow",value:"#FBEEB8"},{type:zb,text:"Light Red",value:"#F8CAC6"},{type:zb,text:"Light Purple",value:"#ECCAFA"},{type:zb,text:"Light Blue",value:"#C2E0F4"},{type:zb,text:"Green",value:"#2DC26B"},{type:zb,text:"Yellow",value:"#F1C40F"},{type:zb,text:"Red",value:"#E03E2D"},{type:zb,text:"Purple",value:"#B96AD9"},{type:zb,text:"Blue",value:"#3598DB"},{type:zb,text:"Dark Turquoise",value:"#169179"},{type:zb,text:"Orange",value:"#E67E23"},{type:zb,text:"Dark Red",value:"#BA372A"},{type:zb,text:"Dark Purple",value:"#843FA1"},{type:zb,text:"Dark Blue",value:"#236FA1"},{type:zb,text:"Light Gray",value:"#ECF0F1"},{type:zb,text:"Medium Gray",value:"#CED4D9"},{type:zb,text:"Gray",value:"#95A5A6"},{type:zb,text:"Dark Gray",value:"#7E8C8D"},{type:zb,text:"Navy Blue",value:"#34495E"},{type:zb,text:"Black",value:"#000000"},{type:zb,text:"White",value:"#ffffff"}],Lb=function(t){void 0===t&&(t=10);var e,n=Vb.getItem(Hb),o=T(n)?JSON.parse(n):[],r=t-(e=o).length<0?e.slice(0,t):e,i=function(t){r.splice(t,1)};return{add:function(e){var n;(-1===(n=z(r,e))?k.none():k.some(n)).each(i),r.unshift(e),r.length>t&&r.pop(),Vb.setItem(Hb,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),Nb=function(t){return!1!==t.getParam("custom_colors")},Ub=function(t){var e=t.getParam("color_map");return void 0!==e?function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var o=n.getContext("2d"),r=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=0;i<t.length;i+=2)e.push({text:t[i+1],value:function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();o.clearRect(0,0,n.width,n.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var e=o.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],c=e[3];return"#"+r(i,c)+r(a,c)+r(u,c)}(t[i]),type:"choiceitem"});return e}(e):jb},Wb=function(t){Lb.add(t)},Gb=function(t){t.addCommand("mceApplyTextcolor",(function(e,n){var o,r,i;r=e,i=n,(o=t).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),t.addCommand("mceRemoveTextcolor",(function(e){var n,o;o=e,(n=t).undoManager.transact((function(){n.focus(),n.formatter.remove(o,{value:null},null,!0),n.nodeChanged()}))}))},Yb=function(t){var e,n,o=Ub(t),r=(e=o.length,Math.max(5,Math.ceil(Math.sqrt(e))));return n=r,t.getParam("color_cols",n,"number")},qb=function(t,e,n,o){"custom"===n?Zb(t)((function(n){n.each((function(n){Wb(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),"#000000"):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))},Xb=function(t,e){return t.concat(W(Lb.state(),(function(t){return{type:zb,text:t,value:t}})).concat((o={type:n="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},e?[o,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var n,o},$b=function(t,e){return function(n){n(Xb(t,e))}},Kb=function(t,e,n){var o,r;o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=n,t.setIconFill(o,r),t.setIconStroke(o,r)},Jb=function(t,e,o,r,i){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var n,r,i;return k.from((r=o,(n=t).dom.getParents(n.selection.getStart(),(function(t){var e;(e=t.style["forecolor"===r?"color":"background-color"])&&(i=i||e)})),i)).bind((function(t){return function(t){if("transparent"===t)return k.some(Eb(0,0,0,0));var e=Tb.exec(t);if(null!==e)return k.some(Mb(e[1],e[2],e[3],"1"));var n=Db.exec(t);return null!==n?k.some(Mb(n[1],n[2],n[3],n[4])):k.none()}(t).map((function(t){var n=Cb(t).value;return Cn(e.toLowerCase(),n)}))})).getOr(!1)},columns:Yb(t),fetch:$b(Ub(t),Nb(t)),onAction:function(e){null!==i.get()&&qb(t,o,i.get(),n)},onItemAction:function(n,r){qb(t,o,r,(function(n){var o;i.set(n),o={name:e,color:n},t.fire("TextColorChange",o)}))},onSetup:function(n){null!==i.get()&&Kb(n,e,i.get());var o=function(t){t.name===e&&Kb(n,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},Qb=function(t,e,o,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){qb(t,o,e.value,n)}}]}})},Zb=function(t){return function(e,o){var r,i={colorpicker:o},a=(r=e,function(t){var e=t.getData();r(k.from(e.colorpicker)),t.close()});t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:a,onClose:n,onCancel:function(){e(k.none())}})}},ty=function(t,e,n,o,r,i,a,u){var c=_h(e),s=ey(e,n,o,"color"!==r?"normal":"color",i,a,u);return Eh(t,c,s,o,r)},ey=function(t,e,o,r,i,a,u){return Kf(W(t,(function(c){return"choiceitem"===c.type?Te("choicemenuitem",Hh,c).fold(Th,(function(s){return k.some(function(t,e,o,r,i,a,u,c){void 0===c&&(c=!0);var s=db({presets:o,textContent:e?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:k.none(),checkMark:e?k.some(cb(u.icons)):k.none(),caret:k.none(),value:t.value},u,c);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(i),n},triggersSubmenu:!1,itemBehaviours:[]},s,a,u),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})}(s,1===o,r,e,a(c.value),i,u,_h(t)))})):k.none()})))},ny=function(t,e){var n=xh(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},oy=ii("cell-over"),ry=ii("cell-execute"),iy=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(function(t,e,n){var o,r=function(n){return Ko(n,ry,{row:t,col:e})},i=function(t,e){e.stop(),r(t)};return pa({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=n,o)},behaviours:ac([mg("insert-table-picker-cell",[rr(fo(),bg.focus),rr(Do(),r),rr(yo(),i),rr(Bo(),i)]),Bg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bg.config({onFocus:function(n){return Ko(n,oy,{row:t,col:e})}})])})}(r,a,t));o.push(i)}return o},ay={inserttable:function(t){var e=ii("size-label"),n=iy(e,10,10),o=pp({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[da("0x0")],behaviours:ac([dg.config({})])});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Z(n,(function(t){return W(t,ha)})).concat(o.asSpec()),behaviours:ac([mg("insert-table-picker",[cr(oy,(function(t,e,r){var i=r.event.row,a=r.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Bg.set(t[i][a],i<=e&&a<=n)}(n,i,a,10,10),dg.set(o.get(t),[da(a+1+"x"+(i+1))])})),cr(ry,(function(e,n,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),$o(e,Io())}))]),ug.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n=Xb(e.colorinput.getColors(),e.colorinput.hasCustomColors()),o=e.colorinput.getColorCols(),r=ty(ii("menu-value"),n,(function(e){t.onAction({value:e})}),o,"color",uh.CLOSE_ON_EXECUTE,s,e.shared.providers),i=d(d({},r),{markers:xh("color"),movement:ny(o,"color")});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget(Xg.sketch(i))]}}},uy=function(t,e,o,i,a,u,c,s){void 0===s&&(s=!0);var l=db({presets:i,textContent:k.none(),htmlContent:o?t.text.map((function(t){return gb(t,e)})):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},c.providers,s,t.icon);return tb({data:eb(t),disabled:t.disabled,getApi:r({}),onAction:function(e){return a(t.value,t.meta)},onSetup:r(n),triggersSubmenu:!1,itemBehaviours:mb(t.meta,c)},l,u,c.providers)},cy=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:d({tag:"div",classes:[sh,"tox-collection__group-heading"]},e),components:[]}},sy=function(t,e,n,o){void 0===o&&(o=!0);var r=db({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},n,o);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},ly=function(t,e,o,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var a,u,c=i?(u=o.icons,{dom:{tag:"div",classes:[gh],innerHtml:vp("chevron-down",u)}}):(a=o.icons,{dom:{tag:"div",classes:[gh],innerHtml:vp("chevron-right",a)}}),s=db({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(c),checkMark:k.none(),shortcutContent:t.shortcut},o,r);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},disabled:t.disabled,onAction:n,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,e,o)},fy=function(t,e,n,o){void 0===o&&(o=!0);var r=db({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(cb(n.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Lt(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:dh,toggleOnExecute:!1,selected:t.active}})},dy=function(t,e){return n=ay,o=t.fancytype,(Object.prototype.hasOwnProperty.call(n,o)?k.some(n[o]):k.none()).map((function(n){return n(t,e)}));var n,o},my=function(t,e,n,o){var r={dom:sb(!1,t.label),optComponents:[k.some({dom:{tag:"div",classes:[hh,vh]},components:pb(t.items,o)})]};return tb({data:eb(d({text:k.none()},t)),disabled:t.disabled,getApi:function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){pv.set(t,e),G(Ts(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(pv)&&pv.set(t,e)}))}))}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(o.itemBehaviours).getOr([])},r,e,n.providers)};(Iv=Av=Av||{})[Iv.ContentFocus=0]="ContentFocus",Iv[Iv.UiFocus=1]="UiFocus";var gy,py,hy,vy,by=function(t,e,n,o,r){var i=n.shared.providers,a=function(t){return r?d(d({},t),{shortcut:k.none(),icon:t.text.isSome()?k.none():t.icon}):t};switch(t.type){case"menuitem":return Te("menuitem",jh,t).fold(Th,(function(t){return k.some(sy(a(t),e,i,o))}));case"nestedmenuitem":return Te("nestedmenuitem",Lh,t).fold(Th,(function(t){return k.some(ly(a(t),e,i,o,r))}));case"togglemenuitem":return Te("togglemenuitem",Nh,t).fold(Th,(function(t){return k.some(fy(a(t),e,i,o))}));case"separator":return Te("separatormenuitem",Lp,t).fold(Th,(function(t){return k.some(cy(t))}));case"fancymenuitem":return Te("fancymenuitem",zh,t).fold(Th,(function(t){return dy(a(t),n)}));default:return console.error("Unknown item in general menu",t),k.none()}},yy=function(t,e,n,o,r,i,a){var u=1===o,c=!u||_h(t);return Kf(W(t,(function(t){switch(t.type){case"separator":return Te("Autocompleter.Separator",Lp,t).fold(Th,(function(t){return k.some(cy(t))}));case"cardmenuitem":return Te("cardmenuitem",Vh,t).fold(Th,(function(t){return k.some(my(d(d({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),r,i,{itemBehaviours:mb(t.meta,i),cardText:{matchText:e,highlightOn:a}}))}));case"autocompleteitem":default:return Te("Autocompleter.Item",Np,t).fold(Th,(function(t){return k.some(uy(t,e,u,"normal",n,r,i,c))}))}})))},xy=function(t,e,n,o,r){var i=_h(e),a=Kf(W(e,(function(t){var e=function(t){return by(t,n,o,(e=t,r?!e.hasOwnProperty("text"):i),r);var e};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(d(d({},t),{disabled:!0})):e(t)})));return(r?Dh:Eh)(t,i,a,1,"normal")},wy=function(t){return tp.singleData(t.value,t)},Sy=function(t,e){var n=mn(k.none()),o=mn(!1),r=pa(ep.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ac([mg("dismissAutocompleter",[rr(Lo(),(function(){return u()}))])]),lazySink:e.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&ep.hide(r)},u=function(){var e;i()&&(e=n.get().map((function(t){return t.element})),Tp(e.getOr(pn.fromDom(t.selection.getNode()))).each(Gr),a(),n.set(k.none()),o.set(!1))},c=Ut((function(){return rh(t)})),s=function(e,n,o,i){e.matchLength=n.text.length;var a,u,c,s,l,f,d,m=ct(o,(function(t){return k.from(t.columns)})).getOr(1);ep.showAt(r,{anchor:"node",root:pn.fromDom(t.getBody()),node:k.from(e.element)},Xg.sketch((a=Eh("autocompleter-value",!0,i,m,"normal"),u=m,c=Av.ContentFocus,s="normal",l=(c===Av.ContentFocus?Fd:Md)(),f=ny(u,s),d=xh(s),{dom:a.dom,components:a.components,items:a.items,value:a.value,markers:{selectedItem:d.selectedItem,item:d.item},movement:f,fakeFocus:c===Av.ContentFocus,focusManager:l,menuBehaviours:Gh("auto"!==u?[]:[fr((function(t,e){Uh(t,4,d.item).each((function(e){var n=e.numColumns,o=e.numRows;ug.setGridSize(t,o,n)}))}))])}))),ep.getContent(r).each(dd.highlightFirst)},l=function r(l){var f;f=l,n.get().map((function(e){return Ip(t.dom,t.selection.getRng(),e.triggerChar).bind((function(e){return jp(t,c,e,f)}))})).getOrThunk((function(){return zp(t,c)})).fold(u,(function(c){var l,f;l=c.context,i()||(f=_p(t,l.range),n.set(k.some({triggerChar:l.triggerChar,element:f,matchLength:l.text.length})),o.set(!1)),c.lookupData.then((function(i){n.get().map((function(n){var l,f,d,m,g=c.context;n.triggerChar===g.triggerChar&&(f=g.triggerChar,m=ct(d=i,(function(t){return k.from(t.columns)})).getOr(1),0<(l=Z(d,(function(n){var i=n.items;return yy(i,n.matchText,(function(e,i){var c=t.selection.getRng();Ip(t.dom,c,f).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var c=t.range,s={hide:function(){u()},reload:function(t){a(),r(t)}};o.set(!0),n.onAction(s,c,e,i),o.set(!1)}))}),m,uh.BUBBLE_TO_SANDBOX,e,n.highlightOn)}))).length?s(n,g,i,l):(10<=g.text.length-n.matchLength?u:a)())}))}))}))},f={onKeypress:Cp((function(t){27!==t.which&&l()}),50),cancelIfNecessary:u,isMenuOpen:function(){return ep.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return ep.getContent(r)}};!1===t.hasPlugin("rtc")&&Mp(f,t)},Cy=l,ky=function(t,e,n){return Ba(t,e,Cy,n,!1)},Oy=function(t,e,n){return Ba(t,e,Cy,n,!0)},_y=Ea,Ty=function(t,e,n){return Ja(t,e,n).isSome()},Dy=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Ey=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?k.none():k.some(e.touches[0])},By=function(t){var e=mn(k.none()),n=mn(!1),o=Dy((function(e){t.triggerEvent(Ao(),e),n.set(!0)}),400),r=Zt([{key:oo(),value:function(t){return Ey(t).each((function(r){o.cancel();var i={x:r.clientX,y:r.clientY,target:t.target};o.schedule(t),n.set(!1),e.set(k.some(i))})),k.none()}},{key:ro(),value:function(t){return o.cancel(),Ey(t).each((function(t){e.get().each((function(n){var o,r,i,a;o=t,r=n,i=Math.abs(o.clientX-r.x),a=Math.abs(o.clientY-r.y),(5<i||5<a)&&e.set(k.none())}))})),k.none()}},{key:io(),value:function(r){return o.cancel(),e.get().filter((function(t){return qn(t.target,r.target)})).map((function(e){return n.get()?(r.prevent(),!1):t.triggerEvent(Bo(),r)}))}}]);return{fireIfReady:function(t,e){return Rt(r,e).bind((function(e){return e(t)}))}}},Ay=function(){return Wn().browser.isFirefox()},Iy=fe([Ye("triggerEvent"),nn("stopBackspace",!0)]),My=function(t,e){var n,o,r,i,a=Ee("Getting GUI events settings",Iy,e),u=By(a),c=W(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return ky(t,e,(function(t){u.fireIfReady(t,e).each((function(e){e&&t.kill()})),a.triggerEvent(e,t)&&t.kill()}))})),s=mn(k.none()),l=ky(t,"paste",(function(t){u.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),a.triggerEvent("paste",t)&&t.kill(),s.set(k.some(setTimeout((function(){a.triggerEvent(_o(),t)}),0)))})),f=ky(t,"keydown",(function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||(e=t).raw.which!==md[0]||j(["input","textarea"],pr(e.target))||Ty(e.target,'[contenteditable="true"]')||t.prevent()})),d=(n=t,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},Ay()?Oy(n,"focus",o):ky(n,"focusin",o)),m=mn(k.none()),g=(r=t,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),m.set(k.some(setTimeout((function(){a.triggerEvent(Oo(),t)}),0)))},Ay()?Oy(r,"blur",i):ky(r,"focusout",i));return{unbind:function(){G(c,(function(t){t.unbind()})),f.unbind(),d.unbind(),g.unbind(),l.unbind(),s.get().each(clearTimeout),m.get().each(clearTimeout)}}},Fy=function(t,e){var n=Rt(t,"target").getOr(e);return mn(n)},Ry=Ht([{stopped:[]},{resume:["element"]},{complete:[]}]),Py=function(t,e,n,o,r,i){var a,u,c,s,l=t(e,o),f=(a=n,u=r,c=mn(!1),s=mn(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:a,setSource:u.set,getSource:u.get});return l.fold((function(){return i.logEventNoHandlers(e,o),Ry.complete()}),(function(t){var n=t.descHandler;return Oi(n)(f),f.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Ry.stopped()):f.isCut()?(i.logEventCut(e,t.element,n.purpose),Ry.complete()):Or(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),Ry.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),Ry.resume(o)}))}))},Vy=function t(e,n,o,r,i,a){return Py(e,n,o,r,i,a).fold(l,(function(r){return t(e,n,o,r,i,a)}),s)},Hy=function(t,e,o){var r,i,a=(r=e,i=mn(!1),{stop:function(){i.set(!0)},cut:n,isStopped:i.get,isCut:s,event:r,setSource:c("Cannot set source of a broadcasted event"),getSource:c("Cannot get source of a broadcasted event")});return G(t,(function(t){var e=t.descHandler;Oi(e)(a)})),a.isStopped()},zy=function(t,e,n,o,r){var i=Fy(n,o);return Vy(t,e,n,o,i,r)},jy=function(){var t={};return{registerId:function(e,n,o){Dt(o,(function(o,r){var i,u,c=void 0!==t[r]?t[r]:{};c[n]=(i=o,u=e,{cHandler:a.apply(void 0,[i.handler].concat(u)),purpose:i.purpose}),t[r]=c}))},unregisterId:function(e){Dt(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return Rt(t,e).map((function(t){return It(t,(function(t,e){return{id:e,descHandler:t}}))})).getOr([])},find:function(e,n,o){var r=Rt(t,n);return Qn(o,(function(t){return e=r,fi(n=t).fold((function(){return k.none()}),(function(t){return e.bind((function(e){return Rt(e,t)})).map((function(t){return{element:n,descHandler:t}}))}));var e,n}),e)}}},Ly=function(){var t=jy(),e={},n=function(t){var e=t.element;return fi(e).fold((function(){return e="uid-",n=t.element,o=ii(ci+e),li(n,o),o;var e,n,o}),(function(t){return t}))},o=function(n){fi(n.element).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,o){return t.find(e,n,o)},filter:function(e){return t.filterByType(e)},register:function(r){var i=n(r);Vt(e,i)&&function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+ei(r.element)+"\nCannot use it for: "+ei(t.element)+"\nThe conflicting element is"+(Wi(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var a=[r];t.registerId(a,i,r.events),e[i]=r},unregister:o,getById:function(t){return Rt(e,t)}}},Ny=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=m(e,["attributes"]);return{uid:t.uid,dom:d({tag:"div",attributes:d({role:"presentation"},n)},o),components:t.components,behaviours:Gl(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[nn("components",[]),Wl("containerBehaviours",[]),nn("events",{}),nn("domModification",{}),nn("eventOrder",{})]}),Uy=function(t){var e=function(e){return Or(t.element).fold(l,(function(t){return qn(e,t)}))},o=Ly(),i=function(t,n){return o.find(e,t,n)},a=My(t.element,{triggerEvent:function(t,e){return au(t,e.target,(function(n){return r=n,zy(i,t,o=e,o.target,r);var o,r}))}}),u={debugInfo:r("real"),triggerEvent:function(t,e,n){au(t,e,(function(o){return zy(i,t,n,e,o)}))},triggerFocus:function(t,e){fi(t).fold((function(){gc(t)}),(function(o){au(ko(),t,(function(o){var r,a,u,c,s,l;return r=i,a=ko(),s=o,l=Fy(u={originator:e,kill:n,prevent:n,target:t},c=t),Py(r,a,u,c,l,s),!1}))}))},triggerEscape:function(t,e){u.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return v(t)},getByDom:function(t){return b(t)},build:pa,addToGui:function(t){f(t)},removeFromGui:function(t){d(t)},addToWorld:function(t){c(t)},removeFromWorld:function(t){s(t)},broadcast:function(t){g(t)},broadcastOn:function(t,e){p(t,e)},broadcastEvent:function(t,e){h(t,e)},isConnected:l},c=function t(e){e.connect(u),br(e.element)||(o.register(e),G(e.components(),t),u.triggerEvent(Fo(),e.element,{target:e.element}))},s=function t(e){br(e.element)||(G(e.components(),t),o.unregister(e)),e.disconnect()},f=function(e){al(t,e)},d=function(t){sl(t)},m=function(t){var e=o.filter(To());G(e,(function(e){var n=e.descHandler;Oi(n)(t)}))},g=function(t){m({universal:!0,data:t})},p=function(t,e){m({universal:!1,channels:t,data:e})},h=function(t,e){var n=o.filter(t);return Hy(n,e)},v=function(t){return o.getById(t).fold((function(){return ft.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),ft.value)},b=function(t){var e=fi(t).getOr("not found");return v(e)};return c(t),{root:t,element:t.element,destroy:function(){a.unbind(),Wr(t.element)},add:f,remove:d,getByUid:v,getByDom:b,addToWorld:c,removeFromWorld:s,broadcast:g,broadcastOn:p,broadcastEvent:h}},Wy=r([nn("prefix","form-field"),Wl("fieldBehaviours",[ed,Ul])]),Gy=r([Sf({schema:[Ne("dom")],name:"label"}),Sf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),xf({factory:{sketch:function(t){var e=Jt(t,["factory"]);return t.factory.sketch(e)}},schema:[Ne("factory")],name:"field"})]),Yy=$f({name:"FormField",configFields:Wy(),partFields:Gy(),factory:function(t,e,n,o){var r=Yl(t.fieldBehaviours,[ed.config({find:function(e){return Ff(e,t,"field")}}),Ul.config({store:{mode:"manual",getValue:function(t){return ed.getCurrent(t).bind(Ul.getValue)},setValue:function(t,e){ed.getCurrent(t).each((function(t){Ul.setValue(t,e)}))}}})]),i=er([fr((function(e,n){var o=Pf(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=ii(t.prefix);o.label().each((function(t){$r(t.element,"for",n),$r(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=ii(t.prefix);$r(n.element,"id",o),$r(e.element,"aria-describedby",o)}))}))}))]),a={getField:function(e){return Ff(e,t,"field")},getLabel:function(e){return Ff(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),qy=Object.freeze({__proto__:null,exhibit:function(t,e){return ki({attributes:Zt([{key:e.tabAttr,value:"true"}])})}}),Xy=[nn("tabAttr","data-alloy-tabstop")],$y=cc({fields:Xy,name:"tabstopping",active:qy}),Ky=tinymce.util.Tools.resolve("tinymce.html.Entities"),Jy=function(t,e,n,o){var r=Qy(t,e,n,o);return Yy.sketch(r)},Qy=function(t,e,n,o){return{dom:Zy(n),components:t.toArray().concat([e]),fieldBehaviours:ac(o)}},Zy=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},tx=function(t,e){return Yy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},ex=ii("form-component-change"),nx=ii("form-close"),ox=ii("form-cancel"),rx=ii("form-action"),ix=ii("form-submit"),ax=ii("form-block"),ux=ii("form-unblock"),cx=ii("form-tabchange"),sx=ii("form-resize"),lx=function(t,e){var n,o,r,a=t.label.map((function(t){return tx(t,e)})),u=function(t){return function(e,n){Ja(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,Kr(o,"data-collection-item-value"))}))}},c=u((function(n,o,r,i){o.stop(),e.isDisabled()||Ko(n,rx,{name:t.name,value:i})})),s=[rr(fo(),u((function(t,e,n){gc(n)}))),rr(yo(),c),rr(Bo(),c),rr(mo(),u((function(t,e,n){Ka(t.element,"."+ph).each((function(t){zi(t,ph)})),Vi(n,ph)}))),rr(go(),u((function(t){Ka(t.element,"."+ph).each((function(t){zi(t,ph)}))}))),gr(u((function(e,n,o,r){Ko(e,rx,{name:t.name,value:r})})))],l=function(t,e){return W(Ts(t.element,".tox-collection__item"),e)},f=Yy.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:i},behaviours:ac([pv.config({disabled:e.isDisabled,onDisabled:function(t){l(t,(function(t){Vi(t,"tox-collection__item--state-disabled"),$r(t,"aria-disabled",!0)}))},onEnabled:function(t){l(t,(function(t){zi(t,"tox-collection__item--state-disabled"),Zr(t,"aria-disabled")}))}}),Wv(),dg.config({}),Ul.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,o){var r,i,a,u;r=n,i=W(o,(function(n){var o=ev.translate(n.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=o.replace(/\_| \- |\-/g,(function(t){return a[t]}));return'<div class="tox-collection__item'+(e.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Ky.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+r+"</div>"})),a="auto"!==t.columns&&1<t.columns?U(i,t.columns):[i],u=W(a,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"})),qr(r.element,u.join("")),"auto"===t.columns&&Uh(n,5,"tox-collection__item").each((function(t){var e=t.numRows,o=t.numColumns;ug.setGridSize(n,e,o)})),$o(n,sx)}}),$y.config({}),ug.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?"."+lh:"."+sh}})),mg("collection-events",s)]),eventOrder:((n={})[Do()]=["disabling","alloy.base.behaviour","collection-events"],n)});return Jy(a,f,["tox-form__group--collection"],[])},fx=r([Ke("data"),nn("inputAttributes",{}),nn("inputStyles",{}),nn("tag","input"),nn("inputClasses",[]),pu("onSetValue"),nn("styles",{}),nn("eventOrder",{}),Wl("inputBehaviours",[Ul,bg]),nn("selectOnFocus",!0)]),dx=function(t){return ac([bg.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=ra(e);e.dom.setSelectionRange(0,n.length)}:n})])},mx=function(t){return{tag:t.tag,attributes:d({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},gx=Xf({name:"Input",configFields:fx(),factory:function(t,e){return{uid:t.uid,dom:mx(t),components:[],behaviours:d(d({},dx(n=t)),Yl(n.inputBehaviours,[Ul.config({store:d(d({mode:"manual"},n.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return ra(t.element)},setValue:function(t,e){ra(t.element)!==e&&ia(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),px={},hx={exports:px};gy=void 0,py=px,hy=hx,vy=void 0,function(n){"object"==e(py)&&void 0!==hy?hy.exports=n():"function"==typeof gy&&gy.amd?gy([],n):("undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}((function(){return function t(e,n,o){function r(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof vy&&vy;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof vy&&vy,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){var o,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,l=[],f=!1,d=-1;function m(){f&&s&&(f=!1,s.length?l=s.concat(l):d=-1,l.length&&g())}function g(){if(!f){var t=c(m);f=!0;for(var e=l.length;e;){for(s=l,l=[];++d<e;)s&&s[d].run();d=-1,e=l.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||f||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,o){(function(t){function o(){}function r(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(d){return void u(e.promise,d)}a(e.promise,n)}else(1===t._state?a:u)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==e(n)||"function"==typeof n)){var o=n.then;if(n instanceof r)return t._state=3,t._value=n,void c(t);if("function"==typeof o)return void l((i=o,s=n,function(){i.apply(s,arguments)}),t)}t._state=1,t._value=n,c(t)}catch(a){u(t,a)}var i,s}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn((function(){t._handled||r._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,u(e,t))}))}catch(o){if(n)return;n=!0,u(e,o)}}var f,d;f=this,d=setTimeout,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return i(this,new s(t,e,n)),n},r.all=function(t){var n=Array.prototype.slice.call(t);return new r((function(t,r){if(0===n.length)return t([]);for(var i=n.length,a=0;a<n.length;a++)!function a(u,c){try{if(c&&("object"==e(c)||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,(function(t){a(u,t)}),r)}n[u]=c,0==--i&&t(n)}catch(o){r(o)}}(a,n[a])}))},r.resolve=function(t){return t&&"object"==e(t)&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},r._immediateFn="function"==typeof t?function(e){t(e)}:function(t){d(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=r:f.Promise||(f.Promise=r)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var r=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function s(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new s(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new s(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,o=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,r((function(){u[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof o?o:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)}));var vx,bx,yx=hx.exports.boltExport,xx=function t(e){var n=k.none(),o=[],r=function(t){i()?u(t):o.push(t)},i=function(){return n.isSome()},a=function(t){G(t,u)},u=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return e((function(t){i()||(n=k.some(t),a(o),o=[])})),{get:r,map:function(e){return t((function(t){r((function(n){t(e(n))}))}))},isReady:i}},wx={nu:xx,pure:function(t){return xx((function(e){e(t)}))}},Sx=function(t){setTimeout((function(){throw t}),0)},Cx=function t(e){var n=function(t){e().then(t,Sx)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return wx.nu(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},kx=function(t){return Cx((function(){return new yx(t)}))},Ox=function(t){return Cx((function(){return yx.resolve(t)}))},_x=["input","textarea"],Tx=function(t){var e=pr(t);return j(_x,e)},Dx=function(t,e){var n=e.getRoot(t).getOr(t.element);zi(n,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&$r(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){qr(t,e.validHtml)})),e.onValid(t)}))},Ex=function(t,e,n,o){var r=e.getRoot(t).getOr(t.element);Vi(r,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&$r(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){qr(t,o)})),e.onInvalid(t,o)}))},Bx=function(t,e,n){return e.validator.fold((function(){return Ox(ft.value(!0))}),(function(e){return e.validate(t)}))},Ax=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Bx(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return Ex(t,e,0,n),ft.error(n)}),(function(n){return Dx(t,e),ft.value(n)})):ft.error("No longer in system")}))},Ix=Object.freeze({__proto__:null,markValid:Dx,markInvalid:Ex,query:Bx,run:Ax,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return ji(n,e.invalidClass)}}),Mx=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return er([rr(e.onEvent,(function(e){Ax(e,t).get(i)}))].concat(e.validateOnLoad?[fr((function(e){Ax(e,t).get(n)}))]:[]))})).getOr({})}}),Fx=[Ne("invalidClass"),nn("getRoot",k.none),en("notify",[nn("aria","alert"),nn("getContainer",k.none),nn("validHtml",""),pu("onValid"),pu("onInvalid"),pu("onValidate")]),en("validator",[Ne("validate"),nn("onEvent","input"),nn("validateOnLoad",!0)])],Rx=cc({fields:Fx,name:"invalidating",active:Mx,apis:Ix,extra:{validation:function(t){return function(e){var n=Ul.getValue(e);return Ox(t(n))}}}}),Px=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Vx=[Ue("others",_e(ft.value,Me()))],Hx=cc({fields:Vx,name:"coupling",apis:Px,state:Object.freeze({__proto__:null,init:function(){var t={},e=r({});return Si({readState:e,getOrCreate:function(e,n,o){var r=_t(n.others);if(r)return Rt(t,o).getOrThunk((function(){var r=Rt(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),zx=r("sink"),jx=r(Sf({name:zx(),overrides:r({dom:{tag:"div"},behaviours:ac([el.config({useFixed:l})]),events:er([sr(po()),sr(uo()),sr(yo())])})}));(bx=vx=vx||{})[bx.HighlightFirst=0]="HighlightFirst",bx[bx.HighlightNone=1]="HighlightNone";var Lx,Nx,Ux,Wx,Gx,Yx,qx=function(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:"hotspot",hotspot:n,overrides:o}}),(function(t){return{anchor:"hotspot",hotspot:n,overrides:o,layouts:t}}))},Xx=function(t,e,n,o,r,i,a){var u,c,s,l,f,m,g,p,h,v,b=qx(t,n);return(c=b,l=o,f=r,m=a,g=e,p=s=n,h=(0,(u=t).fetch)(p).map(g),v=Qx(s,u),h.map((function(t){return t.bind((function(t){return k.from(tp.sketch(d(d({},f.menu()),{uid:di(""),data:t,highlightImmediately:m===vx.HighlightFirst,onOpenMenu:function(t,e){var n=v().getOrDie();el.position(n,c,e),Cl.decloak(l)},onOpenSubmenu:function(t,e,n){var o=v().getOrDie();el.position(o,{anchor:"submenu",item:e},n),Cl.decloak(l)},onRepositionMenu:function(t,e,n){var o=v().getOrDie();el.position(o,c,e),G(n,(function(t){el.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return bg.focus(s),Cl.close(l),k.some(!0)}})))}))}))).map((function(t){return t.fold((function(){Cl.isOpen(o)&&Cl.close(o)}),(function(t){Cl.cloak(o),Cl.open(o,t),i(o)})),o}))},$x=function(t,e,n,o,r,i,a){return Cl.close(o),Ox(o)},Kx=function(t,e,n,o,r,i){var a=Hx.getCoupled(n,"sandbox");return(Cl.isOpen(a)?$x:Xx)(t,e,n,a,o,r,i)},Jx=function(t,e,n){var o,r,i=ed.getCurrent(e).getOr(e),a=Ta(t.element);n?$i(i.element,"min-width",a+"px"):(o=i.element,r=a,_a.set(o,r))},Qx=function(t,e){return t.getSystem().getByUid(e.uid+"-"+zx()).map((function(t){return function(){return ft.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return ft.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},Zx=function(t){Cl.getState(t).each((function(t){tp.repositionMenus(t)}))},tw=function(t,e,n){var o=Qa(),r=Qx(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Xl(t.sandboxBehaviours,[Ul.config({store:{mode:"memory",initialValue:e}}),Cl.config({onOpen:function(r,i){var a=qx(t,e);o.link(e.element),t.matchWidth&&Jx(a.hotspot,i,t.useMinWidth),t.onOpen(a,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return tu(n,o)||tu(e,o)},getAttachPoint:function(){return r().getOrDie()}}),ed.config({find:function(t){return Cl.getState(t).bind((function(t){return ed.getCurrent(t)}))}}),dc.config({channels:d(d({},Dl({isExtraPart:s})),Bl({doReposition:Zx}))})])}},ew=function(t){var e=Hx.getCoupled(t,"sandbox");Zx(e)},nw=function(){return[nn("sandboxClasses",[]),ql("sandboxBehaviours",[ed,dc,Cl,Ul])]},ow=r([Ne("dom"),Ne("fetch"),pu("onOpen"),hu("onExecute"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),Kc(),Wl("dropdownBehaviours",[Bg,Hx,ug,bg]),Ne("toggleClass"),nn("eventOrder",{}),Ke("lazySink"),nn("matchWidth",!1),nn("useMinWidth",!1),Ke("role")].concat(nw())),rw=r([wf({schema:[du()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),jx()]),iw=$f({name:"Dropdown",configFields:ow(),partFields:rw(),factory:function(t,e,o,r){var i,a,u=function(t){Cl.getState(t).each((function(t){tp.highlightPrimary(t)}))},c={expand:function(e){Bg.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightNone).get(n)},open:function(e){Bg.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},isOpen:Bg.isOn,close:function(e){Bg.isOn(e)&&Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},repositionMenus:function(t){Bg.isOn(t)&&ew(t)}},s=function(t,e){return Jo(t),k.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.dropdownBehaviours,[Bg.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Hx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Bg.on(e)},onClose:function(){return Bg.off(e)}})}}}),ug.config({mode:"special",onSpace:s,onEnter:s,onDown:function(t,e){var n;return iw.isOpen(t)?(n=Hx.getCoupled(t,"sandbox"),u(n)):iw.open(t),k.some(!0)},onEscape:function(t,e){return iw.isOpen(t)?(iw.close(t),k.some(!0)):k.none()}}),bg.config({})]),events:Ig(k.some((function(e){Kx(t,(function(t){return t}),e,r,u,vx.HighlightFirst).get(n)}))),eventOrder:d(d({},t.eventOrder),((i={})[Do()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:c,domModification:{attributes:d(d({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(a="type",Rt(t.dom,"attributes").bind((function(t){return Rt(t,a)})).getOr("button"))}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),aw=cc({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return er([nr(wo(),l)])},exhibit:function(){return ki({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),uw=ii("color-input-change"),cw=ii("color-swatch-change"),sw=ii("color-picker-cancel"),lw=function(t,e,o){var r,i,a=Yy.parts.field({factory:gx,inputClasses:["tox-textfield"],onSetValue:function(t){return Rx.run(t).get(n)},inputBehaviours:ac([pv.config({disabled:e.providers.isDisabled}),Wv(),$y.config({}),Rx.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return Or(t.element)},notify:{onValid:function(t){var e=Ul.getValue(t);Ko(t,uw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Ul.getValue(t);if(0===e.length)return Ox(ft.value(!0));var n=pn.fromTag("span");$i(n,"background-color",e);var o=ta(n,"background-color").fold((function(){return ft.error("blah")}),(function(t){return ft.value(e)}));return Ox(o)}}})]),selectOnFocus:!1}),u=t.label.map((function(t){return tx(t,e.providers)})),c=function(t,e){Ko(t,cw,{value:e})},l=pp((r={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ju,zu,Wu]},onLtr:function(){return[zu,ju,Wu]}},components:[],fetch:$b(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){l.getOpt(t).each((function(t){"custom"===e?o.colorPicker((function(e){e.fold((function(){return $o(t,sw)}),(function(e){c(t,e),Wb(e)}))}),"#ffffff"):c(t,"remove"===e?"":e)}))}},i=e,iw.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:ac([Yv(i.providers.isDisabled),Wv(),aw.config({}),$y.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:i.getSink,fetch:function(t){return kx((function(t){return r.fetch(t)})).map((function(e){return k.from(wy(Lt(ty(ii("menu-value"),e,(function(e){r.onItemAction(t,e)}),r.columns,r.presets,uh.CLOSE_ON_EXECUTE,s,i.providers),{movement:ny(r.columns,r.presets)})))}))},parts:{menu:Sh(0,0,r.presets)}})));return Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:u.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[a,l.asSpec()]}]),fieldBehaviours:ac([mg("form-field-events",[rr(uw,(function(e,n){l.getOpt(e).each((function(t){$i(t.element,"background-color",n.event.color)})),Ko(e,ex,{name:t.name})})),rr(cw,(function(t,e){Yy.getField(t).each((function(n){Ul.setValue(n,e.event.value),ed.getCurrent(t).each(bg.focus)}))})),rr(sw,(function(t,e){Yy.getField(t).each((function(e){ed.getCurrent(t).each(bg.focus)}))}))])])})},fw=function(t,e,n){return{hue:t,saturation:e,value:n}},dw=ii("rgb-hex-update"),mw=ii("slider-update"),gw=ii("palette-update"),pw=Sf({schema:[Ne("dom")],name:"label"}),hw=function(t){return Sf({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:er([ir(oo(),(function(e,n,o){return t(e,o)}),[e]),ir(uo(),(function(e,n,o){return t(e,o)}),[e]),ir(co(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})},vw=hw("top-left"),bw=hw("top"),yw=hw("top-right"),xw=hw("right"),ww=hw("bottom-right"),Sw=hw("bottom"),Cw=hw("bottom-left"),kw=[pw,hw("left"),xw,bw,Sw,vw,yw,Cw,ww,xf({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:er([ur(oo(),t,"spectrum"),ur(ro(),t,"spectrum"),ur(io(),t,"spectrum"),ur(uo(),t,"spectrum"),ur(co(),t,"spectrum"),ur(lo(),t,"spectrum")])}}}),xf({schema:[dn("mouseIsDown",(function(){return mn(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,n=function(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))};return{behaviours:ac([ug.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),bg.config({})]),events:er([rr(oo(),n),rr(ro(),n),rr(uo(),n),rr(co(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}})],Ow=r("slider.change.value"),_w=function(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?k.some(e).map((function(t){return Sa(t.clientX,t.clientY)})):k.none():void 0!==e.touches&&1===e.touches.length?k.some(e.touches[0]).map((function(t){return Sa(t.clientX,t.clientY)})):k.none()},Tw=function(t){return t.model.minX},Dw=function(t){return t.model.minY},Ew=function(t){return t.model.minX-1},Bw=function(t){return t.model.minY-1},Aw=function(t){return t.model.maxX},Iw=function(t){return t.model.maxY},Mw=function(t){return t.model.maxX+1},Fw=function(t){return t.model.maxY+1},Rw=function(t,e,n){return e(t)-n(t)},Pw=function(t){return Rw(t,Aw,Tw)},Vw=function(t){return Rw(t,Iw,Dw)},Hw=function(t){return Pw(t)/2},zw=function(t){return Vw(t)/2},jw=function(t){return t.stepSize},Lw=function(t){return t.snapToGrid},Nw=function(t){return t.snapStart},Uw=function(t){return t.rounded},Ww=function(t,e){return void 0!==t[e+"-edge"]},Gw=function(t){return Ww(t,"left")},Yw=function(t){return Ww(t,"right")},qw=function(t){return Ww(t,"top")},Xw=function(t){return Ww(t,"bottom")},$w=function(t){return t.model.value.get()},Kw=function(t){return{x:t}},Jw=function(t){return{y:t}},Qw=function(t,e){return{x:t,y:e}},Zw=function(t,e){Ko(t,Ow(),{value:e})},tS=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},eS=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},nS=function(t,e,n){return Math.max(e,Math.min(n,t))},oS=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?e-1:e,p=l?n+1:n;if(r<f)return g;if(d<r)return p;var h,v,b,y,x,w,S,C=(x=r,w=f,S=d,Math.min(S,Math.max(x,w))-w),k=nS(C/m*o+e,g,p);return a&&e<=k&&k<=n?(h=k,v=e,b=n,y=i,u.fold((function(){var t=h-v,e=Math.round(t/y)*y;return nS(v+e,v-1,b+1)}),(function(t){var e=(h-t)%y,n=Math.round(e/y),o=Math.floor((h-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)}))):c?Math.round(k):k},rS=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},iS="left",aS=function(t){return t.element.dom.getBoundingClientRect()},uS=function(t,e){return t[e]},cS=function(t){var e=aS(t);return uS(e,iS)},sS=function(t){var e=aS(t);return uS(e,"right")},lS=function(t){var e=aS(t);return uS(e,"top")},fS=function(t){var e=aS(t);return uS(e,"bottom")},dS=function(t){var e=aS(t);return uS(e,"width")},mS=function(t){var e=aS(t);return uS(e,"height")},gS=function(t,e,n){return(t+e)/2-n},pS=function(t,e){var n=aS(t),o=aS(e),r=uS(n,iS),i=uS(n,"right"),a=uS(o,iS);return gS(r,i,a)},hS=function(t,e){var n=aS(t),o=aS(e),r=uS(n,"top"),i=uS(n,"bottom"),a=uS(o,"top");return gS(r,i,a)},vS=function(t,e){Ko(t,Ow(),{value:e})},bS=function(t){return{x:t}},yS=function(t,e,n){var o={min:Tw(e),max:Aw(e),range:Pw(e),value:n,step:jw(e),snap:Lw(e),snapStart:Nw(e),rounded:Uw(e),hasMinEdge:Gw(e),hasMaxEdge:Yw(e),minBound:cS(t),maxBound:sS(t),screenRange:dS(t)};return oS(o)},xS=function(t){return function(e,n){return o=e,i=(0<t?eS:tS)($w(r=n).x,Tw(r),Aw(r),jw(r)),vS(o,bS(i)),k.some(i).map(l);var o,r,i}},wS=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=(u=i,c=n,s=o,l=r,f=dS(a=e),d=s.bind((function(t){return k.some(pS(t,a))})).getOr(0),m=l.bind((function(t){return k.some(pS(t,a))})).getOr(f),g={min:Tw(u),max:Aw(u),range:Pw(u),value:c,hasMinEdge:Gw(u),hasMaxEdge:Yw(u),minBound:cS(a),minOffset:0,maxBound:sS(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},rS(g));return cS(e)-cS(t)+p},SS=xS(-1),CS=xS(1),kS=k.none,OS=k.none,_S={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some((function(t,e){Zw(t,Kw(Mw(e)))})),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some((function(t,e){Zw(t,Kw(Ew(e)))}))},TS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yS(t,e,n),r=bS(o);return vS(t,r),o},setToMin:function(t,e){var n=Tw(e);vS(t,bS(n))},setToMax:function(t,e){var n=Aw(e);vS(t,bS(n))},findValueOfOffset:yS,getValueFromEvent:function(t){return _w(t).map((function(t){return t.left}))},findPositionOfValue:wS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=wS(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Ta(e.element)/2;$i(e.element,"left",i-a+"px")},onLeft:SS,onRight:CS,onUp:kS,onDown:OS,edgeActions:_S}),DS=function(t,e){Ko(t,Ow(),{value:e})},ES=function(t){return{y:t}},BS=function(t,e,n){var o={min:Dw(e),max:Iw(e),range:Vw(e),value:n,step:jw(e),snap:Lw(e),snapStart:Nw(e),rounded:Uw(e),hasMinEdge:qw(e),hasMaxEdge:Xw(e),minBound:lS(t),maxBound:fS(t),screenRange:mS(t)};return oS(o)},AS=function(t){return function(e,n){return o=e,i=(0<t?eS:tS)($w(r=n).y,Dw(r),Iw(r),jw(r)),DS(o,ES(i)),k.some(i).map(l);var o,r,i}},IS=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,g,p=(u=i,c=n,s=o,l=r,f=mS(a=e),d=s.bind((function(t){return k.some(hS(t,a))})).getOr(0),m=l.bind((function(t){return k.some(hS(t,a))})).getOr(f),g={min:Dw(u),max:Iw(u),range:Vw(u),value:c,hasMinEdge:qw(u),hasMaxEdge:Xw(u),minBound:lS(a),minOffset:0,maxBound:fS(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},rS(g));return lS(e)-lS(t)+p},MS=k.none,FS=k.none,RS=AS(-1),PS=AS(1),VS={"top-left":k.none(),top:k.some((function(t,e){Zw(t,Jw(Bw(e)))})),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some((function(t,e){Zw(t,Jw(Fw(e)))})),"bottom-left":k.none(),left:k.none()},HS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=BS(t,e,n),r=ES(o);return DS(t,r),o},setToMin:function(t,e){var n=Dw(e);DS(t,ES(n))},setToMax:function(t,e){var n=Iw(e);DS(t,ES(n))},findValueOfOffset:BS,getValueFromEvent:function(t){return _w(t).map((function(t){return t.top}))},findPositionOfValue:IS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=IS(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=ya(e.element)/2;$i(e.element,"top",i-a+"px")},onLeft:MS,onRight:FS,onUp:RS,onDown:PS,edgeActions:VS}),zS=function(t,e){Ko(t,Ow(),{value:e})},jS=function(t,e){return{x:t,y:e}},LS=function(t,e){return function(n,o){return i=n,a=o,u=0<t?eS:tS,c=(r=e)?$w(a).x:u($w(a).x,Tw(a),Aw(a),jw(a)),s=r?u($w(a).y,Dw(a),Iw(a),jw(a)):$w(a).y,zS(i,jS(c,s)),k.some(c).map(l);var r,i,a,u,c,s}},NS=_w,US=LS(-1,!1),WS=LS(1,!1),GS=LS(-1,!0),YS=LS(1,!0),qS={"top-left":k.some((function(t,e){Zw(t,Qw(Ew(e),Bw(e)))})),top:k.some((function(t,e){Zw(t,Qw(Hw(e),Bw(e)))})),"top-right":k.some((function(t,e){Zw(t,Qw(Mw(e),Bw(e)))})),right:k.some((function(t,e){Zw(t,Qw(Mw(e),zw(e)))})),"bottom-right":k.some((function(t,e){Zw(t,Qw(Mw(e),Fw(e)))})),bottom:k.some((function(t,e){Zw(t,Qw(Hw(e),Fw(e)))})),"bottom-left":k.some((function(t,e){Zw(t,Qw(Ew(e),Fw(e)))})),left:k.some((function(t,e){Zw(t,Qw(Ew(e),zw(e)))}))},XS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yS(t,e,n.left),r=BS(t,e,n.top),i=jS(o,r);return zS(t,i),i},setToMin:function(t,e){var n=Tw(e),o=Dw(e);zS(t,jS(n,o))},setToMax:function(t,e){var n=Aw(e),o=Iw(e);zS(t,jS(n,o))},getValueFromEvent:NS,setPositionFromValue:function(t,e,n,o){var r=$w(n),i=wS(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=IS(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=Ta(e.element)/2,c=ya(e.element)/2;$i(e.element,"left",i-u+"px"),$i(e.element,"top",a-c+"px")},onLeft:US,onRight:WS,onUp:GS,onDown:YS,edgeActions:qS}),$S=$f({name:"Slider",configFields:[nn("stepSize",1),nn("onChange",n),nn("onChoose",n),nn("onInit",n),nn("onDragStart",n),nn("onDragEnd",n),nn("snapToGrid",!1),nn("rounded",!0),Ke("snapStart"),Ue("model",Ie("mode",{x:[nn("minX",0),nn("maxX",100),dn("value",(function(t){return mn(t.mode.minX)})),Ne("getInitialValue"),yu("manager",TS)],y:[nn("minY",0),nn("maxY",100),dn("value",(function(t){return mn(t.mode.minY)})),Ne("getInitialValue"),yu("manager",HS)],xy:[nn("minX",0),nn("maxX",100),nn("minY",0),nn("maxY",100),dn("value",(function(t){return mn({x:t.mode.minX,y:t.mode.minY})})),Ne("getInitialValue"),yu("manager",XS)]})),Wl("sliderBehaviours",[ug,Ul]),dn("mouseIsDown",(function(){return mn(!1)}))],partFields:kw,factory:function(t,e,n,o){var r,i=function(e){return Rf(e,t,"thumb")},a=function(e){return Rf(e,t,"spectrum")},u=function(e){return Ff(e,t,"left-edge")},c=function(e){return Ff(e,t,"right-edge")},s=function(e){return Ff(e,t,"top-edge")},f=function(e){return Ff(e,t,"bottom-edge")},d=t.model,m=d.manager,g=function(e,n){m.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:c,getTopEdge:s,getBottomEdge:f,getSpectrum:a})},p=function(e,n){d.value.set(n);var o=i(e);return g(e,o),t.onChange(e,o,n),k.some(!0)},h=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&Ff(e,t,"thumb").each((function(n){var o=d.value.get();t.onChoose(e,n,o)}))},v=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},b=function(e,n){n.stop(),t.onDragEnd(e,i(e)),h(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.sliderBehaviours,[ug.config({mode:"special",focusIn:function(e){return Ff(e,t,"spectrum").map(ug.focusIn).map(l)}}),Ul.config({store:{mode:"manual",getValue:function(t){return d.value.get()}}}),dc.config({channels:((r={})[_l()]={onReceive:h},r)})]),events:er([rr(Ow(),(function(t,e){p(t,e.event.value)})),fr((function(e,n){var o=d.getInitialValue();d.value.set(o);var r=i(e);g(e,r);var u=a(e);t.onInit(e,r,u,d.value.get())})),rr(oo(),v),rr(io(),b),rr(uo(),v),rr(lo(),b)]),apis:{resetToMin:function(e){m.setToMin(e,t)},resetToMax:function(e){m.setToMax(e,t)},changeValue:p,refresh:g},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),KS=[Wl("formBehaviours",[Ul])],JS=function(t){return"<alloy.field."+t+">"},QS=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.formBehaviours,[Ul.config({store:{mode:"manual",getValue:function(e){var n=Vf(e,t);return Et(n,(function(t,e){return t().bind((function(t){var n,o,r=ed.getCurrent(t);return n=r,o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+ei(t.element)),n.fold((function(){return ft.error(o)}),ft.value)})).map(Ul.getValue)}))},setValue:function(e,n){Dt(n,(function(n,o){Ff(e,t,o).each((function(t){ed.getCurrent(t).each((function(t){Ul.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return Ff(e,t,n).bind(ed.getCurrent)}}}},ZS={getField:xi((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),Ef("form",JS(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=W(r,(function(t){return xf({name:t,pname:JS(t)})}));return Wf("form",KS,i,QS,o)}},tC=ii("valid-input"),eC=ii("invalid-input"),nC=ii("validating-input"),oC="colorcustom.rgb.",rC=function(t,e,o,r){var i=function(o,r,i,a,u){var c,s,l=t(oC+"range"),f=[Yy.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),Yy.parts.field({data:u,factory:gx,inputAttributes:d({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:ac([(c=r,s=o,Rx.config({invalidClass:e("invalid"),notify:{onValidate:function(t){Ko(t,nC,{type:c})},onValid:function(t){Ko(t,tC,{type:c,value:Ul.getValue(t)})},onInvalid:function(t){Ko(t,eC,{type:c,value:Ul.getValue(t)})}},validator:{validate:function(e){var n=Ul.getValue(e),o=s(n)?ft.value(!0):ft.error(t("aria.input.invalid"));return Ox(o)},validateOnLoad:!1}})),$y.config({})]),onSetValue:function(t){Rx.isInvalid(t)&&Rx.run(t).get(n)}})],m="hex"!==r?[Yy.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(m)}},a=function(t,e){var n=e.red,o=e.green,r=e.blue;Ul.setValue(t,{red:n,green:o,blue:r})},u=pp({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,e){u.getOpt(t).each((function(t){$i(t.element,"background-color","#"+e.value)}))};return Xf({factory:function(){var n={red:mn(k.some(255)),green:mn(k.some(255)),blue:mn(k.some(255)),hex:mn(k.some("ffffff"))},s=function(t){return n[t].get()},l=function(t,e){n[t].set(e)},f=function(t){var e=t.red,n=t.green,o=t.blue;l("red",k.some(e)),l("green",k.some(n)),l("blue",k.some(o))},d=function(t,e){var n=e.event;"hex"!==n.type?l(n.type,k.none()):r(t)},m=function(t,e,n){var o=parseInt(n,10);l(e,k.some(o)),s("red").bind((function(t){return s("green").bind((function(e){return s("blue").map((function(n){return Eb(t,e,n,1)}))}))})).each((function(e){var n,o,r=(n=t,o=Cb(e),ZS.getField(n,"hex").each((function(t){bg.isFocused(t)||Ul.setValue(n,{hex:o.value})})),o);c(t,r)}))},g=function(t,e){var n=e.event;"hex"===n.type?function(t,e){o(t);var n=vb(e);l("hex",k.some(e));var r=Ib(n);a(t,r),f(r),Ko(t,dw,{hex:n}),c(t,n)}(t,n.value):m(t,n.type,n.value)},p=function(e){return{label:t(oC+e+".label"),description:t(oC+e+".description")}},h=p("red"),v=p("green"),b=p("blue"),y=p("hex");return Lt(ZS.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Yy.sketch(i(Bb,"red",h.label,h.description,255))),n.field("green",Yy.sketch(i(Bb,"green",v.label,v.description,255))),n.field("blue",Yy.sketch(i(Bb,"blue",b.label,b.description,255))),n.field("hex",Yy.sketch(i(xb,"hex",y.label,y.description,"ffffff"))),u.asSpec()],formBehaviours:ac([Rx.config({invalidClass:e("form-invalid")}),mg("rgb-form-events",[rr(tC,g),rr(eC,d),rr(nC,d)])])}})),{apis:{updateHex:function(t,e){var n,o;Ul.setValue(t,{hex:e.value}),n=t,o=Ib(e),a(n,o),f(o),c(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},iC=function(t,e){var n=$S.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),o=$S.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),i=function(t,e){var n,o,r=t.width,i=t.height,a=t.getContext("2d");null!==a&&(a.fillStyle=e,a.fillRect(0,0,r,i),(n=a.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=n,a.fillRect(0,0,r,i),(o=a.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=o,a.fillRect(0,0,r,i))};return Xf({factory:function(t){var a=r({x:0,y:0}),u=ac([ed.config({find:k.some}),bg.config({})]);return $S.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[n,o],onChange:function(t,e,n){Ko(t,gw,{value:n})},onInit:function(t,e,n,o){i(n.element.dom,Fb(Rb))},sliderBehaviours:u})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element.dom,i(r,Fb(o))}},extraApis:{}})},aC=function(t,e){return Xf({name:"ColourPicker",configFields:[Ne("dom"),nn("onValidHex",n),nn("onInvalidHex",n)],factory:function(n){var o,i,a,u,c,s=rC(t,e,n.onValidHex,n.onInvalidHex),l=iC(0,e),f={paletteRgba:mn(Rb)},d=pp(l.sketch({})),m=pp(s.sketch({})),g=function(t,e){d.getOpt(t).each((function(t){var n=Ib(e);f.paletteRgba.set(n),l.setRgba(t,n)}))},p=function(t,e){m.getOpt(t).each((function(t){s.updateHex(t,e)}))},h=function(t,e,n){G(n,(function(n){n(t,e)}))};return{uid:n.uid,dom:n.dom,components:[d.asSpec(),(a=e,u=$S.parts.spectrum({dom:{tag:"div",classes:[a("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=$S.parts.thumb({dom:{tag:"div",classes:[a("hue-slider-thumb")],attributes:{role:"presentation"}}}),$S.sketch({dom:{tag:"div",classes:[a("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[u,c],sliderBehaviours:ac([bg.config({})]),onChange:function(t,e,n){Ko(t,mw,{value:n})}})),m.asSpec()],behaviours:ac([mg("colour-picker-events",[rr(gw,(i=[p],function(t,e){var n,o,r,a,u,c,s,l,d,m=e.event.value,g=f.paletteRgba.get(),p=(a=r=0,u=(n=g).red/255,c=n.green/255,s=n.blue/255,l=Math.min(u,Math.min(c,s)),d=Math.max(u,Math.max(c,s)),l===d?fw(0,0,100*(a=l)):(r=60*((r=u===l?3:s===l?1:5)-(u===l?c-s:s===l?u-c:s-u)/(d-l)),o=(d-l)/d,a=d,fw(Math.round(r),Math.round(100*o),Math.round(100*a)))),v=fw(p.hue,m.x,100-m.y),b=Ab(v),y=Cb(b);h(t,y,i)})),rr(mw,(o=[g,p],function(t,e){var n,r,i,a=e.event.value,u=(n=a.y,r=fw((100-n)/100*360,100,100),i=Ab(r),Cb(i));h(t,u,o)}))]),ed.config({find:function(t){return m.getOpt(t)}}),ug.config({mode:"acyclic"})])}}})},uC=function(){return ed.config({find:k.some})},cC=function(t){return ed.config({find:t.getOpt})},sC=function(t){return ed.config({find:function(e){return Er(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},lC={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},fC=function(t){return lC[t]},dC=tinymce.util.Tools.resolve("tinymce.Resource"),mC=tinymce.util.Tools.resolve("tinymce.util.Tools"),gC=de([nn("preprocess",i),nn("postprocess",i)]),pC=function(t,e,n){return Ul.config(Lt({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},hC=function(t,e,n){return pC(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}))},vC=function(t,e){var n=Ee("RepresentingConfigs.memento processors",gC,e);return Ul.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=Ul.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);Ul.setValue(i,r)}}})},bC=pC,yC=function(t){return hC(t,Yr,qr)},xC=function(t){return Ul.config({store:{mode:"memory",initialValue:t}})},wC=function(t,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){G(t,(function(t){t(e,n)}))}},r=function(t,e){var n;pv.isDisabled(t)||(n=e.event.raw,a(t,n.dataTransfer.files))},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,o){var r,i,a;Ul.setValue(n,(r=o,i=e,a=mC.explode(i.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),q(ut(r),(function(t){return L(a,(function(e){return kn(t.name.toLowerCase(),"."+e.toLowerCase())}))})))),Ko(n,ex,{name:t.name})},u=pp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ac([mg("input-file-events",[sr(yo()),sr(Bo())])])}),c=t.label.map((function(t){return tx(t,e)})),s=Yy.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ac([xC([]),uC(),pv.config({}),Bg.config({toggleClass:"dragenter",toggleOnExecute:!1}),mg("dropzone-events",[rr("dragenter",o([n,Bg.toggle])),rr("dragleave",o([n,Bg.toggle])),rr("dragover",n),rr("drop",o([n,r])),rr(bo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},gp.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){u.get(t).element.dom.click()},buttonBehaviours:ac([$y.config({}),Yv(e.isDisabled),Wv()])})]}]}}}});return Jy(c,s,["tox-form__group--stretched"],[])},SC=ii("alloy-fake-before-tabstop"),CC=ii("alloy-fake-after-tabstop"),kC=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ac([bg.config({ignore:!0}),$y.config({})])}},OC=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[kC([SC]),t,kC([CC])],behaviours:ac([sC(1)])}},_C=function(t,e){Ko(t,po(),{raw:{which:9,shiftKey:e}})},TC=function(t,e){var n=e.element;ji(n,SC)?_C(t,!0):ji(n,CC)&&_C(t,!1)},DC=function(t){return Ty(t,["."+SC,"."+CC].join(","),s)},EC=!(Wn().browser.isIE()||Wn().browser.isEdge()),BC=function(t,e){var n,o,r=EC&&t.sandboxed,i=d(d({},t.label.map((function(t){return{title:t}})).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),a=(n=r,o=mn(""),{getValue:function(t){return o.get()},setValue:function(t,e){var r;n?$r(t.element,"srcdoc",e):($r(t.element,"src","javascript:''"),(r=t.element.dom.contentWindow.document).open(),r.write(e),r.close()),o.set(e)}}),u=t.label.map((function(t){return tx(t,e)})),c=Yy.parts.field({factory:{sketch:function(t){return OC({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:ac([$y.config({}),bg.config({}),bC(k.none(),a.getValue,a.setValue)])})}}});return Jy(u,c,["tox-form__group--stretched"],[])},AC=function(t,e){return FC(document.createElement("canvas"),t,e)},IC=function(t){var e=AC(t.width,t.height);return MC(e).drawImage(t,0,0),e},MC=function(t){return t.getContext("2d")},FC=function(t,e,n){return t.width=e,t.height=n,t},RC=function(t){return t.naturalWidth||t.width},PC=function(t){return t.naturalHeight||t.height},VC=window.Promise?window.Promise:(Lx=function(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Yx(t,Wx(zC,this),Wx(jC,this))},Nx=window,Ux=Lx.immediateFn||"function"==typeof Nx.setImmediate&&Nx.setImmediate||function(t){return setTimeout(t,1)},Wx=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.apply(e,n)}},Gx=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Yx=function(t,e,n){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,n(t))}))}catch(b){if(o)return;o=!0,n(b)}},Lx.prototype["catch"]=function(t){return this.then(null,t)},Lx.prototype.then=function(t,e){var n=this;return new Lx((function(o,r){HC.call(n,new NC(t,e,o,r))}))},Lx.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.prototype.slice.call(1===t.length&&Gx(t[0])?t[0]:t);return new Lx((function(t,n){if(0===o.length)return t([]);for(var r=o.length,i=function i(a,u){try{if(u&&("object"==e(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),n)}o[a]=u,0==--r&&t(o)}catch(v){n(v)}},a=0;a<o.length;a++)i(a,o[a])}))},Lx.resolve=function(t){return t&&"object"==e(t)&&t.constructor===Lx?t:new Lx((function(e){e(t)}))},Lx.reject=function(t){return new Lx((function(e,n){n(t)}))},Lx.race=function(t){return new Lx((function(e,n){for(var o=0,r=t;o<r.length;o++)r[o].then(e,n)}))},Lx);function HC(t){var e=this;null!==this._state?Ux((function(){var n,o=e._state?t.onFulfilled:t.onRejected;if(null!==o){try{n=o(e._value)}catch(h){return void t.reject(h)}t.resolve(n)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function zC(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==e(t)||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void Yx(Wx(n,t),Wx(zC,this),Wx(jC,this))}this._state=!0,this._value=t,LC.call(this)}catch(h){jC.call(this,h)}}function jC(t){this._state=!1,this._value=t,LC.call(this)}function LC(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];HC.call(this,n)}this._deferreds=[]}function NC(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var UC,WC,GC,YC,qC=function(t){return new VC((function(e,n){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return k.none();for(var o=n[1],r=e[1],i=atob(r),a=i.length,u=Math.ceil(a/1024),c=new Array(u),s=0;s<u;++s){for(var l=1024*s,f=Math.min(1024+l,a),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return k.some(new Blob(c,{type:o}))})(t).fold((function(){n("uri is not base64: "+t)}),e)}))},XC=function(t,e,n){return e=e||"image/png",M(HTMLCanvasElement.prototype.toBlob)?new VC((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):qC(t.toDataURL(e,n))},$C=function(t){return e=t,new VC((function(t,n){var o=URL.createObjectURL(e),r=new Image,i=function(){r.removeEventListener("load",a),r.removeEventListener("error",u)},a=function(){i(),t(r)},u=function(){i(),n("Unable to load data of type "+e.type+": "+o)};r.addEventListener("load",a),r.addEventListener("error",u),r.src=o,r.complete&&setTimeout(a,0)})).then((function(t){KC(t);var e=AC(RC(t),PC(t));return MC(e).drawImage(t,0,0),e}));var e},KC=function(t){URL.revokeObjectURL(t.src)},JC=function(t,e,n){var o=e.type,i=r(o),a=r(n),u=function(e,n){return t.then((function(t){return r=n,o=(o=e)||"image/png",t.toDataURL(o,r);var o,r}))};return{getType:i,toBlob:function(){return VC.resolve(e)},toDataURL:a,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return XC(t,e,n)}))},toAdjustedDataURL:u,toAdjustedBase64:function(t,e){return u(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(IC)}}},QC=function(t,e){return XC(t,e).then((function(e){return JC(VC.resolve(t),e,t.toDataURL())}))},ZC=function(t){return e=t,new VC((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})).then((function(e){return JC($C(t),t,e)}));var e},tk=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o},ek=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},nk=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ok=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)o[a]=e[a+5*i];for(a=0;a<5;a++){for(var u=n=0;u<5;u++)n+=t[a+5*u]*o[u];r[a+5*i]=n}}return r},rk=function(t,e){return t.toCanvas().then((function(n){return ik(n,t.getType(),e)}))},ik=function(t,e,n){var o=MC(t),r=function(t,e){for(var n,o,r,i,a=t.data,u=e[0],c=e[1],s=e[2],l=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],h=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],S=e[15],C=e[16],k=e[17],O=e[18],_=e[19],T=0;T<a.length;T+=4)n=a[T],o=a[T+1],r=a[T+2],i=a[T+3],a[T]=n*u+o*c+r*s+i*l+f,a[T+1]=n*d+o*m+r*g+i*p+h,a[T+2]=n*v+o*b+r*y+i*x+w,a[T+3]=n*S+o*C+r*k+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),QC(t,e)},ak=function(t,e,n){var o=MC(t),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),a=t.data,u=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=n[p*r+h];d+=a[b]*y,m+=a[1+b]*y,g+=a[2+b]*y}var x=4*(l*c+f);u[x]=o(d,0,255),u[1+x]=o(m,0,255),u[2+x]=o(g,0,255)}return e}(o.getImageData(0,0,t.width,t.height),r=o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),QC(t,e)},uk=function(t){return function(e,n){return rk(e,t(ek(),n))}},ck=(UC=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return rk(t,UC)}),sk=uk((function(t,e){return e=tk(255*e,-255,255),ok(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),lk=uk((function(t,e){var n;return e=tk(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?nk[e]:nk[Math.floor(e)]*(1-n)+nk[Math.floor(e)+1]*n)+127,ok(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),fk=(WC=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=WC,(e=t).toCanvas().then((function(t){return ak(t,e.getType(),n)}));var e,n}),dk=(GC=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=MC(t),r=new Array(256),i=0;i<r.length;i++)r[i]=GC(i,n);var a=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(a,0,0),QC(t,e)}(n,t.getType(),e)}))}),mk=function t(e,n,o){var r=RC(e),i=PC(e),a=n/r,u=o/i,c=!1;(a<.5||2<a)&&(a=a<.5?.5:2,c=!0),(u<.5||2<u)&&(u=u<.5?.5:2,c=!0);var s=gk(e,a,u);return c?s.then((function(e){return t(e,n,o)})):s},gk=function(t,e,n){return new VC((function(o){var r=RC(t),i=PC(t),a=Math.floor(r*e),u=Math.floor(i*n),c=AC(a,u);MC(c).drawImage(t,0,0,r,i,0,0,a,u),o(c)}))},pk=function(t,e,n){var o=AC(t.width,t.height),r=MC(o),i=0,a=0;return 90!==(n=n<0?360+n:n)&&270!==n||FC(o,o.height,o.width),90!==n&&180!==n||(i=o.width),270!==n&&180!==n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),QC(o,e)},hk=function(t,e,n){var o=AC(t.width,t.height),r=MC(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),QC(o,e)},vk=function(t,e,n,o,r,i){var a=AC(r,i);return MC(a).drawImage(t,-n,-o),QC(a,e)},bk=function(t){return ck(t)},yk=function(t){return fk(t)},xk=function(t,e){return dk(t,e)},wk=function(t,e,n,o){return rk(t,(r=ek(),a=n,u=o,i=tk(i=e,0,2),a=tk(a,0,2),u=tk(u,0,2),ok(r,[i,0,0,0,0,0,a,0,0,0,0,0,u,0,0,0,0,0,1,0,0,0,0,0,1])));var r,i,a,u},Sk=function(t,e){return sk(t,e)},Ck=function(t,e){return lk(t,e)},kk=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return hk(t,n.getType(),o)}));var n,o},Ok=function(t,e,n,o,r){return a=e,u=n,c=o,s=r,(i=t).toCanvas().then((function(t){return vk(t,i.getType(),a,u,c,s)}));var i,a,u,c,s},_k=function(t,e,n){return r=e,i=n,(o=t).toCanvas().then((function(t){return mk(t,r,i).then((function(t){return QC(t,o.getType())}))}));var o,r,i},Tk=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return pk(t,n.getType(),o)}));var n,o},Dk=function(t,e){return d({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},Ek=function(t,e){return Dk(vp(t,e),{})},Bk=function(t,e){return Dk(vp(t,e),{behaviours:ac([dg.config({})])})},Ak=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:ac([dg.config({})])}},Ik=ii("toolbar.button.execute"),Mk=((YC={})[Do()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],YC),Fk=ii("update-menu-text"),Rk=ii("update-menu-icon"),Pk=function(t,e,o){var r=mn(n),i=t.text.map((function(t){return pp(Ak(t,e,o.providers))})),u=t.icon.map((function(t){return pp(Bk(t,o.providers.icons))})),c=function(t,e){var n=Ul.getValue(t);return bg.focus(n),Ko(n,"keydown",{raw:e.event.raw}),iw.close(n),k.some(!0)},s=t.role.fold((function(){return{}}),(function(t){return{role:t}})),l=t.tooltip.fold((function(){return{}}),(function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}}));return pp(iw.sketch(d(d(d({},t.uid?{uid:t.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat(W(t.classes,(function(t){return e+"--"+t}))),attributes:d({},l)},components:Zv([u.map((function(t){return t.asSpec()})),i.map((function(t){return t.asSpec()})),k.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:vp("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:ac(g(t.dropdownBehaviours,[Yv((function(){return t.disabled||o.providers.isDisabled()})),Wv(),aw.config({}),dg.config({}),mg("dropdown-events",[Kv(t,r),Jv(t,r)]),mg("menubutton-update-display-text",[rr(Fk,(function(t,e){i.bind((function(e){return e.getOpt(t)})).each((function(t){dg.set(t,[da(o.providers.translate(e.event.text))])}))})),rr(Rk,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){dg.set(t,[Bk(e.event.icon,o.providers.icons)])}))}))])])),eventOrder:Lt(Mk,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ac([ug.config({mode:"special",onLeft:c,onRight:c})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:Sh(0,t.columns,t.presets)},fetch:function(e){return kx(a(t.fetch,e))}}))).asSpec()},Vk=function(t){return"separator"===t.type},Hk={type:"separator"},zk=function(t,e){var n=$(t,(function(t,n){return T(n)?""===n?t:"|"===n?0<t.length&&!Vk(t[t.length-1])?t.concat([Hk]):t:Pt(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return 0<n.length&&Vk(n[n.length-1])&&n.pop(),n},jk=function(t,e){return Pt(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=Lk(r,o),{item:n,menus:Lt(i.menus,Qt(n.value,i.items)),expansions:Lt(i.expansions,Qt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},Lk=function(t,e){var n=zk(T(t)?t.split(" "):t,e);return X(n,(function(t,n){var o=function(t){if(Vk(t))return t;var e=Rt(t,"value").getOrThunk((function(){return ii("generated-menu-item")}));return Lt({value:e},t)}(n),r=jk(o,e);return{menus:Lt(t.menus,r.menus),items:[r.item].concat(t.items),expansions:Lt(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},Nk=function(t,e,n,o){var r=ii("primary-menu"),i=Lk(t,n.shared.providers.menuItems());if(0===i.items.length)return k.none();var a=xy(r,i.items,e,n,o),u=Et(i.menus,(function(t,o){return xy(o,t,e,n,!1)})),c=Lt(u,Qt(r,a));return k.from(tp.tieredData(r,c,i.expansions))},Uk=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)},setActive:function(e){var n=t.element;e?(Vi(n,"tox-tbtn--enabled"),$r(n,"aria-pressed",!0)):(zi(n,"tox-tbtn--enabled"),Zr(n,"aria-pressed"))},isActive:function(){return ji(t.element,"tox-tbtn--enabled")}}},Wk=function(t,e,n,o){return Pk({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o(Nk(t,uh.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:Uk,columns:1,presets:"normal",classes:[],dropdownBehaviours:[$y.config({})]},e,n.shared)},Gk=function(t,e,n){return function(o){o(W(t,(function(t){var o,r,i=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return d(d({type:t.type,active:!1},i),{onAction:function(t){var o=!t.isActive();t.setActive(o),r.storage.set(o),n.shared.getSink().each((function(t){e().getOpt(t).each((function(t){gc(t.element),Ko(t,rx,{name:r.name,value:r.storage.get()})}))}))},onSetup:(o=r=t,function(t){t.setActive(o.storage.get())})})})))}},Yk=function(t,e,n,o,r,i){void 0===n&&(n=[]);var a=e.fold((function(){return{}}),(function(t){return{action:t}})),u=d({buttonBehaviours:ac([Yv((function(){return t.disabled||i.isDisabled()})),Wv(),$y.config({}),mg("button press",[or("click"),or("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=Lt(u,{dom:o});return Lt(c,{components:r})},qk=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return Ek(t,n.icons)})),a=Zv([i]);return Yk(t,e,o,r,a,n)},Xk=function(t,e,n,o){void 0===o&&(o=[]);var r=qk(t,k.some(e),n,o);return gp.sketch(r)},$k=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),a=t.icon?t.icon.map((function(t){return Ek(t,n.icons)})):k.none(),u=a.isSome()?Zv([a]):[],c=a.isSome()?{}:{innerHtml:i},s=g(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),l=d(d({tag:"button",classes:s},c),{attributes:{title:i}});return Yk(t,e,o,l,u,n)},Kk=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=$k(t,k.some(e),n,o,r);return gp.sketch(i)},Jk=function(t,e){return function(n){"custom"===e?Ko(n,rx,{name:t,value:{}}):"submit"===e?$o(n,ix):"cancel"===e?$o(n,ox):console.error("Unknown button type: ",e)}},Qk=function(t,e,o){if("menu"===e){var r=t,i=d(d({},t),{onSetup:function(e){return e.setDisabled(t.disabled),n},fetch:Gk(r.items,(function(){return a}),o)}),a=pp(Wk(i,"tox-tbtn",o,k.none()));return a.asSpec()}if("custom"===(s=e)||"cancel"===s||"submit"===s){var u=Jk(t.name,e),c=d(d({},t),{borderless:!1});return Kk(c,u,o.shared.providers,[])}var s;console.error("Unknown footer button type: ",e)},Zk=function(t,e){var n,o,r=Jk(t.name,"custom");return n=k.none(),o=Yy.parts.field(d({factory:gp},$k(t,k.some(r),e,[xC(""),uC()]))),Jy(n,o,[],[])},tO=r([nn("field1Name","field1"),nn("field2Name","field2"),vu("onLockedChange"),mu(["lockClass"]),nn("locked",!1),ql("coupledFieldBehaviours",[ed,Ul])]),eO=function(t,e){return xf({factory:Yy,name:t,overrides:function(t){return{fieldBehaviours:ac([mg("coupled-input-behaviour",[rr(vo(),(function(n){Ff(n,t,e).bind(ed.getCurrent).each((function(e){Ff(n,t,"lock").each((function(o){Bg.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})},nO=r([eO("field1","field2"),eO("field2","field1"),xf({factory:gp,schema:[Ne("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:ac([Bg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),oO=$f({name:"FormCoupledInputs",configFields:tO(),partFields:nO(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Xl(t.coupledFieldBehaviours,[ed.config({find:k.some}),Ul.config({store:{mode:"manual",getValue:function(e){var n=zf(e,t,["field1","field2"]),o={};return o[t.field1Name]=Ul.getValue(n.field1()),o[t.field2Name]=Ul.getValue(n.field2()),o},setValue:function(e,n){var o=zf(e,t,["field1","field2"]);Vt(n,t.field1Name)&&Ul.setValue(o.field1(),n[t.field1Name]),Vt(n,t.field2Name)&&Ul.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Ff(e,t,"field1")},getField2:function(e){return Ff(e,t,"field2")},getLock:function(e){return Ff(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),rO=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return ft.error(t);var n=parseFloat(e[1]),o=e[2];return ft.value({value:n,unit:o})},iO=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?k.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?k.some(t.value):k.some(t.value/n[t.unit]*n[e]):k.none()},aO=function(t){return k.none()},uO=function(t,e){var n,o,r,i=rO(t).toOptional(),a=rO(e).toOptional();return o=a,r=function(t,e){return iO(t,e.unit).map((function(t){return e.value/t})).map((function(t){return n=t,o=e.unit,function(t){return iO(t,o).map((function(t){return{value:t*n,unit:o}}))};var n,o})).getOr(aO)},((n=i).isSome()&&o.isSome()?k.some(r(n.getOrDie(),o.getOrDie())):k.none()).getOr(aO)},cO=function(t,e){var n=aO,o=ii("ratio-event"),r=oO.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:vp("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:vp("unlock",e.icons)}}],buttonBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),$y.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return Yy.parts.field({factory:gx,inputClasses:["tox-textfield"],inputBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),$y.config({}),mg("size-input-events",[rr(mo(),(function(t,e){Ko(t,o,{isField1:n})})),rr(bo(),(function(e,n){Ko(e,ex,{name:t.name})}))])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=oO.parts.field1(i([Yy.parts.label(u("Width")),a(!0)])),s=oO.parts.field2(i([Yy.parts.label(u("Height")),a(!1)]));return oO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,i([u("&nbsp;"),r])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,o){rO(Ul.getValue(t)).each((function(t){n(t).each((function(t){var n,o,r,i;Ul.setValue(e,(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(i=(n=t).value.toFixed((o=n.unit)in r?r[o]:1)).indexOf(".")&&(i=i.replace(/\.?0*$/,"")),i+n.unit))}))}))},coupledFieldBehaviours:ac([pv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){oO.getField1(t).bind(Yy.getField).each(pv.disable),oO.getField2(t).bind(Yy.getField).each(pv.disable),oO.getLock(t).each(pv.disable)},onEnabled:function(t){oO.getField1(t).bind(Yy.getField).each(pv.enable),oO.getField2(t).bind(Yy.getField).each(pv.enable),oO.getLock(t).each(pv.enable)}}),Wv(),mg("size-input-events2",[rr(o,(function(t,e){var o=e.event.isField1,r=o?oO.getField1(t):oO.getField2(t),i=o?oO.getField2(t):oO.getField1(t),a=r.map(Ul.getValue).getOr(""),u=i.map(Ul.getValue).getOr("");n=uO(a,u)}))])])})},sO={undo:r(ii("undo")),redo:r(ii("redo")),zoom:r(ii("zoom")),back:r(ii("back")),apply:r(ii("apply")),swap:r(ii("swap")),transform:r(ii("transform")),tempTransform:r(ii("temp-transform")),transformApply:r(ii("transform-apply"))},lO=r("save-state"),fO=r("disable"),dO=r("enable"),mO={formActionEvent:rx,saveState:lO,disable:fO,enable:dO},gO=function(t,e){var o=function(t,n,o,r){return pp(Kk({name:t,text:t,disabled:o,primary:r,icon:k.none(),borderless:!1},n,e))},i=function(t,n,o,r){return pp(Xk({name:t,icon:k.some(t),tooltip:k.some(n),disabled:r,primary:!1,borderless:!1},o,e))},a=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(pv)&&pv.disable(n)}))},u=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(pv)&&pv.enable(n)}))},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},s=n,l=function(t,e,n){Ko(t,e,n)},f=function(t){return $o(t,mO.disable())},d=function(t){return $o(t,mO.enable())},m=function(t,e){f(t),l(t,sO.transform(),{transform:e}),d(t)},g=function(t){return function(){Z.getOpt(t).each((function(t){dg.set(t,[J])}))}},p=function(t,e){f(t),l(t,sO.transformApply(),{transform:e,swap:g(t)}),d(t)},h=function(){return o("Back",(function(t){return l(t,sO.back(),{swap:g(t)})}),!1,!1)},v=function(){return pp({dom:{tag:"div",classes:["tox-spacer"]},behaviours:ac([pv.config({})])})},b=function(){return o("Apply",(function(t){return l(t,sO.apply(),{swap:g(t)})}),!0,!0)},y=[h(),v(),o("Apply",(function(e){p(e,(function(e){var n=t.getRect();return Ok(e,n.x,n.y,n.w,n.h)})),t.hideCrop()}),!1,!0)],x=Ny.sketch({dom:c,components:y.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-crop-buttons-events",[rr(mO.disable(),(function(t,e){a(y,t)})),rr(mO.enable(),(function(t,e){u(y,t)}))])])}),w=pp(cO({name:"size",label:k.none(),constrain:!0,disabled:!1},e)),S=[h(),v(),w,v(),o("Apply",(function(t){w.getOpt(t).each((function(e){var n,o,r=Ul.getValue(e),i=parseInt(r.width,10),a=parseInt(r.height,10),u=(n=i,o=a,function(t){return _k(t,n,o)});p(t,u)}))}),!1,!0)],C=Ny.sketch({dom:c,components:S.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-resize-buttons-events",[rr(mO.disable(),(function(t,e){a(S,t)})),rr(mO.enable(),(function(t,e){u(S,t)}))])])}),O=function(t,e){return function(n){return t(n,e)}},_=O(kk,"h"),T=O(kk,"v"),D=O(Tk,-90),E=O(Tk,90),B=function(t,e){var n,o;o=e,f(n=t),l(n,sO.tempTransform(),{transform:o}),d(n)},A=[h(),v(),i("flip-horizontally","Flip horizontally",(function(t){B(t,_)}),!1),i("flip-vertically","Flip vertically",(function(t){B(t,T)}),!1),i("rotate-left","Rotate counterclockwise",(function(t){B(t,D)}),!1),i("rotate-right","Rotate clockwise",(function(t){B(t,E)}),!1),v(),b()],I=Ny.sketch({dom:c,components:A.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-fliprotate-buttons-events",[rr(mO.disable(),(function(t,e){a(A,t)})),rr(mO.enable(),(function(t,e){u(A,t)}))])])}),M=function(t,n,o,i,a){var u=$S.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=$S.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=$S.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pp($S.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:a,getInitialValue:r({x:i})},components:[u,c,s],sliderBehaviours:ac([bg.config({})]),onChoose:n}))},F=function(t,e,n,o,r){return[h(),(i=e,M(t,(function(t,e,n){var o=O(i,n.x/100);m(t,o)}),n,o,r)),b()];var i},R=function(t,e,n,o,r){var i=F(t,e,n,o,r);return Ny.sketch({dom:c,components:i.map((function(t){return t.asSpec()})),containerBehaviours:ac([mg("image-tools-filter-panel-buttons-events",[rr(mO.disable(),(function(t,e){a(i,t)})),rr(mO.enable(),(function(t,e){u(i,t)}))])])})},P=[h(),v(),b()],V=Ny.sketch({dom:c,components:P.map((function(t){return t.asSpec()}))}),H=R("Brightness",Sk,-100,0,100),z=R("Contrast",Ck,-100,0,100),j=R("Gamma",xk,-100,0,100),L=function(t){return M(t,(function(t,e,n){var o=N.getOpt(t),r=W.getOpt(t),i=U.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r,i,a,u=Ul.getValue(e).x/100,c=Ul.getValue(o).x/100,s=Ul.getValue(n).x/100,l=(r=u,i=c,a=s,function(t){return wk(t,r,i,a)});m(t,l)}))}))}))}),0,100,200)},N=L("R"),U=L("G"),W=L("B"),G=[h(),N,U,W,b()],Y=Ny.sketch({dom:c,components:G.map((function(t){return t.asSpec()}))}),q=function(t,e,n){return function(o){l(o,sO.swap(),{transform:e,swap:function(){Z.getOpt(o).each((function(e){dg.set(e,[t]),n(e)}))}})}},X=k.some(yk),$=k.some(bk),K=[i("crop","Crop",q(x,k.none(),(function(e){t.showCrop()})),!1),i("resize","Resize",q(C,k.none(),(function(e){w.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;Ul.setValue(e,{width:o,height:r})}))})),!1),i("orientation","Orientation",q(I,k.none(),s),!1),i("brightness","Brightness",q(H,k.none(),s),!1),i("sharpen","Sharpen",q(V,X,s),!1),i("contrast","Contrast",q(z,k.none(),s),!1),i("color-levels","Color levels",q(Y,k.none(),s),!1),i("gamma","Gamma",q(j,k.none(),s),!1),i("invert","Invert",q(V,$,s),!1)],J=Ny.sketch({dom:c,components:K.map((function(t){return t.asSpec()}))}),Q=Ny.sketch({dom:{tag:"div"},components:[J],containerBehaviours:ac([dg.config({})])}),Z=pp(Q);return{memContainer:Z,getApplyButton:function(t){return Z.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},pO=tinymce.util.Tools.resolve("tinymce.geom.Rect"),hO=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),vO=tinymce.util.Tools.resolve("tinymce.util.Observable"),bO=tinymce.util.Tools.resolve("tinymce.util.VK"),yO=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function xO(t,e){var n,o,r,i,a=e.document||document,u=a.getElementById(e.handle||t),c=function(t){if(yO(t),t.button!==o)return s(t);t.deltaX=t.screenX-r,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},s=function t(o){yO(o),hO(a).off("mousemove touchmove",c).off("mouseup touchend",t),n.remove(),e.stop&&e.stop(o)};return hO(u).on("mousedown touchstart",(function(t){var l,f,d,m,g,p,h,v,b,y,x=(l=a,f=Math.max,d=l.documentElement,m=l.body,g=f(d.scrollWidth,m.scrollWidth),p=f(d.clientWidth,m.clientWidth),h=f(d.offsetWidth,m.offsetWidth),v=f(d.scrollHeight,m.scrollHeight),b=f(d.clientHeight,m.clientHeight),{width:g<h?p:g,height:v<f(d.offsetHeight,m.offsetHeight)?b:v});yO(t),t.preventDefault(),o=t.button;var w=u;r=t.screenX,i=t.screenY,y=window.getComputedStyle?window.getComputedStyle(w,null).getPropertyValue("cursor"):w.runtimeStyle.cursor,n=hO("<div></div>").css({position:"absolute",top:0,left:0,width:x.width,height:x.height,zIndex:2147483647,opacity:1e-4,cursor:y}).appendTo(a.body),hO(a).on("mousemove touchmove",c).on("mouseup touchend",s),e.start(t)})),{destroy:function(){hO(u).off()}}}var wO,SO,CO,kO=0,OO=function(t,e,n,o,r){var i,a="tox-",u="tox-crid-"+kO++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],l=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},f=function(e,o,r,i){var a,u=o.x,c=o.y,s=o.w,f=o.h;u+=r*e.deltaX,c+=i*e.deltaY,(s+=r*e.deltaW)<20&&(s=20),(f+=i*e.deltaH)<20&&(f=20),a=t=pO.clamp({x:u,y:c,w:s,h:f},n,"move"===e.name),a=l(n,a),p.fire("updateRect",{rect:a}),g(a)},d=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),hO("#"+u+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};mC.each(c,(function(e){hO("#"+u+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},m=function(e){d(t=e)},g=function(t){var e,o;m((e=n,{x:(o=t).x+e.x,y:o.y+e.y,w:o.w,h:o.h}))};hO('<div id="'+u+'" class="'+a+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),mC.each(s,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t+'"class="'+a+'croprect-block" style="display: none" data-mce-bogus="all">')})),mC.each(c,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t.name+'" class="'+a+"croprect-handle "+a+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),i=mC.map(c,(function(e){var n;return xO(u,{document:o.ownerDocument,handle:u+"-"+e.name,start:function(){n=t},drag:function(t){f(e,n,t.deltaX,t.deltaY)}})})),d(t),hO(o).on("focusin focusout",(function(t){hO(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),hO(o).on("keydown",(function(e){var n;mC.each(c,(function(t){if(e.target.id===u+"-"+t.name)return n=t,!1}));var o=function(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),f(n,o,r,i)};switch(e.keyCode){case bO.LEFT:o(e,0,t,-10,0);break;case bO.RIGHT:o(e,0,t,10,0);break;case bO.UP:o(e,0,t,0,-10);break;case bO.DOWN:o(e,0,t,0,10);break;case bO.ENTER:case bO.SPACEBAR:e.preventDefault(),r()}}));var p=mC.extend({toggleVisibility:function(t){var e=mC.map(c,(function(t){return"#"+u+"-"+t.name})).concat(mC.map(s,(function(t){return"#"+u+"-"+t}))).join(",");t?hO(e,o).show():hO(e,o).hide()},setClampRect:function(e){n=e,d(t)},setRect:m,getInnerRect:function(){return l(n,t)},setInnerRect:g,setViewPortRect:function(n){e=n,d(t)},destroy:function(){mC.each(i,(function(t){t.destroy()})),i=[]}},vO);return p},_O=function(t){var e=pp({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=mn(1),r=mn(k.none()),i=mn({x:0,y:0,w:1,h:1}),a=mn({x:0,y:0,w:1,h:1}),u=function(t,n){l.getOpt(t).each((function(t){var a=o.get(),u=Ta(t.element),c=ya(t.element),s=n.dom.naturalWidth*a,l=n.dom.naturalHeight*a,f=Math.max(0,u/2-s/2),d=Math.max(0,c/2-l/2),m={left:f.toString()+"px",top:d.toString()+"px",width:s.toString()+"px",height:l.toString()+"px",position:"absolute"};Ki(n,m),e.getOpt(t).each((function(t){Ki(t.element,m)})),r.get().each((function(t){var e=i.get();t.setRect({x:e.x*a+f,y:e.y*a+d,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:d,w:s,h:l}),t.setViewPortRect({x:0,y:0,w:u,h:c})}))}))},c=function(t,e){var n,r=pn.fromTag("img");return $r(r,"src",e),n=r.dom,new Fp((function(t){var e=function e(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then((function(){return l.getOpt(t).map((function(t){var e=ma({element:r});dg.replaceAt(t,1,k.some(e));var n=a.get(),c={x:0,y:0,w:r.dom.naturalWidth,h:r.dom.naturalHeight};a.set(c);var s,f,d=pO.inflate(c,-20,-20);return i.set(d),n.w===c.w&&n.h===c.h||(s=t,f=r,l.getOpt(s).each((function(t){var e=Ta(t.element),n=ya(t.element),r=f.dom.naturalWidth,i=f.dom.naturalHeight,a=Math.min(e/r,n/i);1<=a?o.set(1):o.set(a)}))),u(t,r),r}))}))},s=Ny.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:ac([mg("image-panel-crop-events",[fr((function(t){l.getOpt(t).each((function(t){var e=t.element.dom,a=OO({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,n);a.toggleVisibility(!1),a.on("updateRect",(function(t){var e=t.rect,n=o.get(),r={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};i.set(r)})),r.set(k.some(a))}))}))])])}],containerBehaviours:ac([dg.config({}),mg("image-panel-events",[fr((function(e){c(e,t)}))])])}),l=pp(s);return{memContainer:l,updateSrc:c,zoom:function(t,e){var n=o.get(),r=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);o.set(r),l.getOpt(t).each((function(t){var e=t.components()[1].element;u(t,e)}))},showCrop:function(){r.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){r.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return i.get()},getMeasurements:function(){var t=a.get();return{width:t.w,height:t.h}}}},TO=function(t,e,n,o,r){return Xk({name:t,icon:k.some(e),disabled:n,tooltip:k.some(t),primary:!1,borderless:!1},o,r)},DO=function(t,e){e?pv.enable(t):pv.disable(t)},EO=function(t){var e,o,r,i,a=mn(t),u=mn(k.none()),c=(o=-1,{data:e=[],add:function(t){var n=e.splice(++o);return e.push(t),{state:t,removed:n}},undo:function(){if(r())return e[--o]},redo:function(){if(i())return e[++o]},canUndo:r=function(){return 0<o},canRedo:i=function(){return-1!==o&&o<e.length-1}});c.add(t);var s=function(t){a.set(t)},l=function(t){return{blob:t,url:URL.createObjectURL(t)}},f=function(t){URL.revokeObjectURL(t.url)},d=function(){u.get().each(f),u.set(k.none())},m=function(t){var e=l(t);s(e);var n,o=c.add(e).removed;return n=o,mC.each(n,f),e.url};return{getBlobState:function(){return a.get()},setBlobState:s,addBlobState:m,getTempState:function(){return u.get().fold((function(){return a.get()}),(function(t){return t}))},updateTempState:function(t){var e=l(t);return d(),u.set(k.some(e)),e.url},addTempState:function(t){var e=l(t);return u.set(k.some(e)),e.url},applyTempState:function(t){return u.get().fold(n,(function(e){m(e.blob),t()}))},destroyTempState:d,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}},BO=function(t,e){var o,r,i,a=EO(t.currentState),u=function(t){var e=a.getHistoryStates();h.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Ko(t,mO.formActionEvent,{name:mO.saveState(),value:e.undoEnabled})},c=function(t){return t.toBlob()},s=function(t){Ko(t,mO.formActionEvent,{name:mO.disable(),value:{}})},l=function(t){v.getApplyButton(t).each((function(t){pv.enable(t)})),Ko(t,mO.formActionEvent,{name:mO.enable(),value:{}})},f=function(t,e){return s(t),p.updateSrc(t,e)},d=function(t,e,n,o,r){return s(t),ZC(e).then(n).then(c).then(o).then((function(e){return f(t,e).then((function(e){return u(t),r(),l(t),e}))}))["catch"]((function(e){return console.log(e),l(t),e}))},m=function(t,e,n){var o=a.getBlobState().blob;d(t,o,e,(function(t){return a.updateTempState(t)}),n)},g=function(t){var e=a.getBlobState().url;return a.destroyTempState(),u(t),e},p=_O(t.currentState.url),h=(r=pp(TO("Undo","undo",!0,(function(t){Ko(t,sO.undo(),{direction:1})}),o=e)),i=pp(TO("Redo","redo",!0,(function(t){Ko(t,sO.redo(),{direction:1})}),o)),{container:Ny.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[r.asSpec(),i.asSpec(),TO("Zoom in","zoom-in",!1,(function(t){Ko(t,sO.zoom(),{direction:1})}),o),TO("Zoom out","zoom-out",!1,(function(t){Ko(t,sO.zoom(),{direction:-1})}),o)]}),updateButtonUndoStates:function(t,e,n){r.getOpt(t).each((function(t){DO(t,e)})),i.getOpt(t).each((function(t){DO(t,n)}))}}),v=gO(p,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),p.memContainer.asSpec(),h.container],behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),mg("image-tools-events",[rr(sO.undo(),(function(t,e){var n=a.undo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.redo(),(function(t,e){var n=a.redo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.zoom(),(function(t,e){var n=e.event.direction;p.zoom(t,n)})),rr(sO.back(),(function(t,e){var n,o;o=g(n=t),f(n,o).then((function(t){l(n)})),(0,e.event.swap)(),p.hideCrop()})),rr(sO.apply(),(function(t,e){a.applyTempState((function(){g(t),(0,e.event.swap)()}))})),rr(sO.transform(),(function(t,e){return m(t,e.event.transform,n)})),rr(sO.tempTransform(),(function(t,e){return o=t,r=e.event.transform,i=a.getTempState().blob,void d(o,i,r,(function(t){return a.addTempState(t)}),n);var o,r,i})),rr(sO.transformApply(),(function(t,e){return n=t,o=e.event.transform,r=e.event.swap,i=a.getBlobState().blob,void d(n,i,o,(function(t){var e=a.addBlobState(t);return g(n),e}),r);var n,o,r,i})),rr(sO.swap(),(function(t,e){var n;n=t,h.updateButtonUndoStates(n,!1,!1);var o=e.event.transform,r=e.event.swap;o.fold((function(){r()}),(function(e){m(t,e,r)}))}))]),uC()])}},AO=function(t){return!Pt(t,"items")},IO="data-value",MO=function t(e,n,o,r){return W(o,(function(o){return AO(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===r,onAction:function(){Ul.setValue(e,o.value),Ko(e,ex,{name:n}),bg.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:function(){return t(e,n,o.items,r)}}}))},FO=function t(e,n){return ct(e,(function(e){return AO(e)?Jf(e.value===n,e):t(e.items,n)}))},RO=Xf({name:"HtmlSelect",configFields:[Ne("options"),Wl("selectBehaviours",[bg,Ul]),nn("selectClasses",[]),nn("selectAttributes",{}),Ke("data")],factory:function(t,e){var n=W(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return Qt("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:Yl(t.selectBehaviours,[bg.config({}),Ul.config({store:d({mode:"manual",getValue:function(t){return ra(t.element)},setValue:function(e,n){K(t.options,(function(t){return t.value===n})).isSome()&&ia(e.element,n)}},o)})])}}}),PO=function(t,e){var n=t.label.map((function(t){return tx(t,e)})),o=[pv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Wv(),ug.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return $o(t,ix),k.some(!0)}}),mg("textfield-change",[rr(vo(),(function(e,n){Ko(e,ex,{name:t.name})})),rr(_o(),(function(e,n){Ko(e,ex,{name:t.name})}))]),$y.config({})],i=t.validation.map((function(t){return Rx.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Ul.getValue(e),o=t.validator(n);return Ox(!0===o?ft.value(n):ft.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),a=t.placeholder.fold(r({}),(function(t){return{placeholder:e.translate(t)}})),u=t.inputMode.fold(r({}),(function(t){return{inputmode:t}})),c=d(d({},a),u),s=Yy.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:ac(Q([o,i])),selectOnFocus:!1,factory:gx}),l=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[pv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()];return Jy(n,s,l,f)},VO=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return er([rr(t.event,n),dr((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[rr(t,(function(){return e.cancel()}))]})).getOr([])))}}),HO=function(t){var e=mn(null);return Si({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},zO=Object.freeze({__proto__:null,throttle:HO,init:function(t){return t.stream.streams.state(t)}}),jO=[Ue("stream",Ie("mode",{throttle:[Ne("delay"),nn("stopEvent",!0),yu("streams",{setup:function(t,e){var n=t.stream,o=Cp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:HO})]})),nn("event","input"),Ke("cancelEvent"),vu("onStream")],LO=cc({fields:jO,name:"streaming",active:VO,state:zO}),NO=function(t,e,n){var o=Ul.getValue(n);Ul.setValue(e,o),WO(e)},UO=function(t,e){var n=t.element,o=ra(n),r=n.dom;"number"!==Kr(n,"type")&&e(r,o)},WO=function(t){UO(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},GO=function(t,e,n){if(t.selectsOver){var o=Ul.getValue(e),r=t.getDisplayText(o),i=Ul.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?k.some((function(){var t,o;NO(0,e,n),t=e,o=r.length,UO(t,(function(t,e){return t.setSelectionRange(o,e.length)}))})):k.none()}return k.none()},YO=r("alloy.typeahead.itemexecute"),qO=r([Ke("lazySink"),Ne("fetch"),nn("minChars",5),nn("responseTime",1e3),pu("onOpen"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),nn("layouts",k.none()),nn("eventOrder",{}),fn("model",{},[nn("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),nn("selectsOver",!0),nn("populateFromBrowse",!0)]),pu("onSetValue"),hu("onExecute"),pu("onItemExecute"),nn("inputClasses",[]),nn("inputAttributes",{}),nn("inputStyles",{}),nn("matchWidth",!0),nn("useMinWidth",!1),nn("dismissOnBlur",!0),mu(["openClass"]),Ke("initialData"),Wl("typeaheadBehaviours",[bg,Ul,LO,ug,Bg,Hx]),dn("previewing",(function(){return mn(!0)}))].concat(fx()).concat(nw())),XO=r([wf({schema:[du()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){GO(t.model,o,n).fold((function(){return dd.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&NO(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return Ko(t,YO(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&NO(t.model,e,n)}))}}}})]),$O=$f({name:"Typeahead",configFields:qO(),partFields:XO(),factory:function(t,e,o,r){var i=function(e,o,i){t.previewing.set(!1);var a=Hx.getCoupled(e,"sandbox");Cl.isOpen(a)?ed.getCurrent(a).each((function(t){dd.getHighlighted(t).fold((function(){i(t)}),(function(){tr(a,t.element,"keydown",o)}))})):Xx(t,u(e),e,a,r,(function(t){ed.getCurrent(t).each(i)}),vx.HighlightFirst).get(n)},a=dx(t),u=function(t){return function(e){return e.map((function(e){var n=Ft(e.menus),o=Z(n,(function(t){return q(t.items,(function(t){return"item"===t.type}))}));return Ul.getState(t).update(W(o,(function(t){return t.data}))),e}))}},c=[bg.config({}),Ul.config({onSetValue:t.onSetValue,store:d({mode:"dataset",getDataKey:function(t){return ra(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){ia(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return Qt("initialValue",t)})).getOr({}))}),LO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,o){var i,a=Hx.getCoupled(e,"sandbox");bg.isFocused(e)&&ra(e.element).length>=t.minChars&&(i=ed.getCurrent(a).bind((function(t){return dd.getHighlighted(t).map(Ul.getValue)})),t.previewing.set(!0),Xx(t,u(e),e,a,r,(function(e){ed.getCurrent(a).each((function(e){i.fold((function(){t.model.selectsOver&&dd.highlightFirst(e)}),(function(t){dd.highlightBy(e,(function(e){return Ul.getValue(e).value===t.value})),dd.getHighlighted(e).orThunk((function(){return dd.highlightFirst(e),k.none()}))}))}))}),vx.HighlightFirst).get(n))},cancelEvent:Mo()}),ug.config({mode:"special",onDown:function(t,e){return i(t,e,dd.highlightFirst),k.some(!0)},onEscape:function(t){var e=Hx.getCoupled(t,"sandbox");return Cl.isOpen(e)?(Cl.close(e),k.some(!0)):k.none()},onUp:function(t,e){return i(t,e,dd.highlightLast),k.some(!0)},onEnter:function(e){var n=Hx.getCoupled(e,"sandbox"),o=Cl.isOpen(n);if(o&&!t.previewing.get())return ed.getCurrent(n).bind((function(t){return dd.getHighlighted(t)})).map((function(t){return Ko(e,YO(),{item:t}),!0}));var r=Ul.getValue(e);return $o(e,Mo()),t.onExecute(n,e,r),o&&Cl.close(n),k.some(!0)}}),Bg.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Hx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Bg.on(e)},onClose:function(){return Bg.off(e)}})}}}),mg("typeaheadevents",[gr((function(e){var o=n;Kx(t,u(e),e,r,o,vx.HighlightFirst).get(n)})),rr(YO(),(function(e,n){var o=Hx.getCoupled(e,"sandbox");NO(t.model,e,n.event.item),$o(e,Mo()),t.onItemExecute(e,o,n.event.item,Ul.getValue(e)),Cl.close(o),WO(e)}))].concat(t.dismissOnBlur?[rr(Oo(),(function(t){var e=Hx.getCoupled(t,"sandbox");hc(e.element).isNone()&&Cl.close(e)}))]:[]))];return{uid:t.uid,dom:mx(Lt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:d(d({},a),Yl(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),KO=function t(e){return d(d({},e),{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return Ox(ft.error(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(n,o){return t(kx((function(t){var r=!1,i=setTimeout((function(){r=!0,t(ft.error(o()))}),n);e.get((function(e){r||(clearTimeout(i),t(e))}))})))}})},JO=function(t){return KO(kx(t))},QO=JO,ZO={type:"separator"},t_=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:n}},e_=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:n}},n_=function(t,e){return o=t,n=q(e,(function(t){return t.type===o})),W(n,t_);var n,o},o_=function(t,e){var n=t.toLowerCase();return q(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return Cn(e.toLowerCase(),n)||Cn(t.value.toLowerCase(),n)}))},r_=function(t,e,n){var o=Ul.getValue(e),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var o,i,a,u,c=o_(r,(o=n.getHistory(t),W(o,(function(t){return e_(t,t)}))));return"file"===t?(i=[c,o_(r,n_("header",e.targets)),o_(r,Q([(u=e,k.from(u.anchorTop).map((function(t){return e_("<top>",t)})).toArray()),n_("anchor",e.targets),(a=e,k.from(a.anchorBottom).map((function(t){return e_("<bottom>",t)})).toArray())]))],$(i,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(ZO,e)}),[])):c}))},i_=ii("aria-invalid"),a_=function(t,e,o){var r,i,a,u,c,s=e.shared.providers,l=function(e){var n=Ul.getValue(e);o.addToHistory(n.value,t.filetype)},f=Yy.parts.field({factory:$O,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":i_,type:"url"},minChars:0,responseTime:0,fetch:function(n){var r=r_(t.filetype,n,o),i=Nk(r,uh.BUBBLE_TO_SANDBOX,e,!1);return Ox(i)},getHotspot:function(t){return b.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Rx)&&Rx.run(t).get(n)},typeaheadBehaviours:ac(Q([o.getValidationHandler().map((function(e){return Rx.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){g.getOpt(t).each((function(t){$r(t.element,"title",s.translate(e))}))}},validator:{validate:function(n){var o=Ul.getValue(n);return QO((function(n){e({type:t.filetype,url:o.value},(function(t){var e,o;"invalid"===t.status?(e=ft.error(t.message),n(e)):(o=ft.value(t.message),n(o))}))}))},validateOnLoad:!1}})})).toArray(),[pv.config({disabled:function(){return t.disabled||s.isDisabled()}}),$y.config({}),mg("urlinput-events",Q(["file"===t.filetype?[rr(vo(),(function(e){Ko(e,ex,{name:t.name})}))]:[],[rr(bo(),(function(e){Ko(e,ex,{name:t.name}),l(e)})),rr(_o(),(function(e){Ko(e,ex,{name:t.name}),l(e)}))]]))]])),eventOrder:((r={})[vo()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:Sh(0,0,"normal")},onExecute:function(t,e,n){Ko(e,ix,{})},onItemExecute:function(e,n,o,r){l(e),Ko(e,ex,{name:t.name})}}),m=t.label.map((function(t){return tx(t,s)})),g=pp((i="invalid",a=k.some(i_),void 0===(u="warning")&&(u=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:vp(u,s.icons),attributes:d({title:s.translate(c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))}})),p=pp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[g.asSpec()]}),h=o.getUrlPicker(t.filetype),v=ii("browser.url.event"),b=pp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,p.asSpec()],behaviours:ac([pv.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),y=pp(Kk({name:t.name,icon:k.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return $o(t,v)}),s,[],["tox-browse-url"]));return Yy.sketch({dom:Zy([]),components:m.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Q([[b.asSpec()],h.map((function(){return y.asSpec()})).toArray()])}]),fieldBehaviours:ac([pv.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable),y.getOpt(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable),y.getOpt(t).each(pv.enable)}}),Wv(),mg("url-input-events",[rr(v,(function(e){ed.getCurrent(e).each((function(n){var o=Ul.getValue(n),r=d({fieldname:t.name},o);h.each((function(o){o(r).get((function(o){Ul.setValue(n,o),Ko(e,ex,{name:t.name})}))}))}))}))])])})},u_=function(t){return function(e,n,o){return Rt(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}},c_={bar:u_((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:W(n.items,o.interpreter)};var n,o})),collection:u_((function(t,e){return lx(t,e.shared.providers)})),alertbanner:u_((function(t,e){return n=t,o=e.shared.providers,Ny.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:vp(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){Ko(t,rx,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o})),input:u_((function(t,e){return n=t,o=e.shared.providers,PO({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:k.none(),maximized:n.maximized},o);var n,o})),textarea:u_((function(t,e){return n=t,o=e.shared.providers,PO({name:n.name,multiline:!0,label:n.label,inputMode:k.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:k.none(),maximized:n.maximized},o);var n,o})),label:u_((function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=W(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:ac([uC(),dg.config({}),yC(k.none()),ug.config({mode:"acyclic"})])};var n,o,r,i})),iframe:(wO=function(t,e){return BC(t,e.shared.providers)},function(t,e,n){var o=Lt(e,{source:"dynamic"});return u_(wO)(t,o,n)}),button:u_((function(t,e){return Zk(t,e.shared.providers)})),checkbox:u_((function(t,e){return n=t,o=e.shared.providers,r=Ul.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),a=function(t){return t.element.dom.click(),k.some(!0)},u=Yy.parts.field({factory:{sketch:i},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ac([uC(),pv.config({disabled:function(){return n.disabled||o.isDisabled()}}),$y.config({}),bg.config({}),r,ug.config({mode:"special",onEnter:a,onSpace:a,stopSpaceKeyup:!0}),mg("checkbox-events",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),c=Yy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:ac([aw.config({})])}),l=pp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(s=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:vp("checked"===t?"selected":"unselected",o.icons)}}})("checked"),s("unchecked")]}),Yy.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,l.asSpec(),c],fieldBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()])});var n,o,r,a,u,c,s,l})),colorinput:u_((function(t,e){return lw(t,e.shared,e.colorinput)})),colorpicker:u_((function(t){var e=function(t){return"tox-"+t},n=aC(fC,e),o=pp(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:ac([Ul.config({store:{mode:"manual",getValue:function(t){var e=o.get(t);return ed.getCurrent(e).bind((function(t){return Ul.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=o.get(t);ed.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){Ul.setValue(t,{hex:k.from(n[1]).getOr("")}),ZS.getField(t,"hex").each((function(t){$o(t,vo())}))}))}}}),uC()])}})),dropzone:u_((function(t,e){return wC(t,e.shared.providers)})),grid:u_((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:W(n.items,o.interpreter)};var n,o})),listbox:u_((function(t,e){return o=t,a=(i=e).shared.providers,u=it(o.items).filter(AO),c=o.label.map((function(t){return tx(t,a)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Yy.parts.field({dom:{},factory:{sketch:function(t){return Pk({uid:t.uid,text:u.map((function(t){return t.text})),icon:k.none(),tooltip:o.label,role:k.none(),fetch:function(t,e){var n=MO(t,o.name,o.items,Ul.getValue(t));e(Nk(n,uh.CLOSE_ON_EXECUTE,i,!1))},onSetup:r(n),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[$y.config({}),Ul.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return Kr(t.element,IO)},setValue:function(t,e){FO(o.items,e).each((function(e){$r(t.element,IO,e.value),Ko(t,Fk,{text:e.text})}))}}})]},"tox-listbox",i.shared)}}})]},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Q([c.toArray(),[s]]),fieldBehaviours:ac([pv.config({disabled:r(o.disabled),onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}})])});var o,i,a,u,c,s})),selectbox:u_((function(t,e){return n=t,o=e.shared.providers,r=W(n.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=n.label.map((function(t){return tx(t,o)})),a=Yy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:RO,selectBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()}}),$y.config({}),mg("selectbox-change",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),u=1<n.size?k.none():k.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:vp("chevron-down",o.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:Q([[a],u.toArray()])},Yy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Q([i.toArray(),[c]]),fieldBehaviours:ac([pv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Yy.getField(t).each(pv.disable)},onEnabled:function(t){Yy.getField(t).each(pv.enable)}}),Wv()])});var n,o,r,i,a,u,c})),sizeinput:u_((function(t,e){return cO(t,e.shared.providers)})),urlinput:u_((function(t,e){return a_(t,e,e.urlinput)})),customeditor:u_((function(t){var e=mn(k.none()),n=pp({dom:{tag:t.tag}}),o=mn(k.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ac([mg("custom-editor-events",[fr((function(r){n.getOpt(r).each((function(n){var r;r=t,(Object.prototype.hasOwnProperty.call(r,"init")?t.init(n.element.dom):dC.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)}))).then((function(t){o.get().each((function(e){t.setValue(e)})),o.set(k.none()),e.set(k.some(t))}))}))}))]),Ul.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(k.some(n))}),(function(t){return t.setValue(n)}))}}}),uC()]),components:[n.asSpec()]}})),htmlpanel:u_((function(t){return"presentation"===t.presets?Ny.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ny.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ac([$y.config({}),bg.config({})])})})),imagetools:u_((function(t,e){return BO(t,e.shared.providers)})),table:u_((function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:W(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:W(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:W(r,c)})],behaviours:ac([$y.config({}),bg.config({})])};var n,o,r,i,a,u,c})),panel:u_((function(t,e){return o=e,{dom:{tag:"div",classes:(n=t).classes},components:W(n.items,o.shared.interpreter)};var n,o}))},s_={field:function(t,e){return e}},l_=function(t,e,n){var o=Lt(n,{shared:{interpreter:function(e){return f_(t,e,o)}}});return f_(t,e,o)},f_=function(t,e,n){return Rt(c_,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},d_={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},m_=function(t,e,n){var o=zc(-12,12,d_),r={maxHeightFunction:Fc()};return function(){return n()?{anchor:"node",root:Fr(t()),node:k.from(t()),bubble:o,layouts:{onRtl:function(){return[lp]},onLtr:function(){return[sp]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[zu]},onLtr:function(){return[ju]}},overrides:r}}},g_=function(t,e,n){return function(){return n()?{anchor:"node",root:Fr(t()),node:k.from(t()),layouts:{onRtl:function(){return[fp]},onLtr:function(){return[fp]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[Wu]},onLtr:function(){return[Wu]}}}}},p_=function(t,e,n){var o,r,i,a=Pv(t),u=function(){return pn.fromDom(t.getBody())},c=function(){return pn.fromDom(t.getContentAreaContainer())},s=function(){return a||!n()};return{inlineDialog:m_(c,e,s),banner:g_(c,e,s),cursor:(r=t,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return k.some(ps.range(pn.fromDom(t.startContainer),t.startOffset,pn.fromDom(t.endContainer),t.endOffset))}}}),node:(o=i=u,function(t){return{anchor:"node",root:o(),node:t}})}},h_=function(t){return{colorPicker:function(t,e){Zb(r)(t,e)},hasCustomColors:function(){return Nb(o)},getColors:function(){return Ub(n)},getColorCols:(e=n=o=r=t,function(){return Yb(e)})};var e,n,o,r},v_=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],b_=function t(e){return $(e,(function(e,n){if(Pt(n,"items")){var o=t(n.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:n.title,items:o.formats}])}}if(Pt(n,"inline")||Pt(n,"block")||Pt(n,"selector")){var r="custom-"+(T(n.name)?n.name:n.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:n}]),formats:e.formats.concat([{title:n.title,format:r,icon:n.icon}])}}return d(d({},e),{formats:e.formats.concat(n)})}),{customFormats:[],formats:[]})},y_=function(t){return e=t,k.from(e.getParam("style_formats")).filter(E).map((function(e){var n,o,r,i=(n=t,o=b_(e),r=function(t){G(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))},n.formatter?r(o.customFormats):n.on("init",(function(){r(o.customFormats)})),o.formats);return t.getParam("style_formats_merge",!1,"boolean")?v_.concat(i):i})).getOr(v_);var e},x_=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Lt(t,o)},w_=function(t,e,n,o){var r=function e(r){return W(r,(function(r){var i,a,u,c,s,l=_t(r);if(Vt(r,"items")){var f=e(r.items);return Lt(Lt(r,{type:"submenu"}),{getStyleItems:function(){return f}})}return Vt(r,"format")?x_(r,n,o):1===l.length&&j(l,"title")?Lt(r,{type:"separator"}):(a=T((i=r).name)?i.name:ii(i.title),c={type:"formatter",format:u="custom-"+a,isSelected:n(u),getStylePreview:o(u)},s=Lt(i,c),t.formatter.register(a,s),s)}))};return r(e)},S_=mC.trim,C_=function(t){return function(e){if(I(n=e)&&1===n.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}var n;return!1}},k_=C_("true"),O_=C_("false"),__=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},T_=function(t){return t.innerText||t.textContent},D_=function(t){return(e=t)&&"A"===e.nodeName&&void 0!==(e.id||e.name)&&B_(t);var e},E_=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},B_=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return k_(t)}return!1}(t)&&!O_(t)},A_=function(t){return E_(t)&&B_(t)},I_=function(t){var e,n,o=(e=t).id?e.id:ii("h");return __("header",T_(t),"#"+o,E_(n=t)?parseInt(n.nodeName.substr(1),10):0,(function(){t.id=o}))},M_=function(t){var e=t.id||t.name,o=T_(t);return __("anchor",o||"#"+e,"#"+e,0,n)},F_=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,W(Ts(pn.fromDom(n),e),(function(t){return t.dom}))},R_=function(t){return 0<S_(t.title).length},P_=function(t){var e=F_(t);return q(W(q(e,A_),I_).concat(W(q(e,D_),M_)),R_)},V_="tinymce-url-history",H_=function(t){return T(t)&&/^https?/.test(t)},z_=function(t){return D(t)&&Mt(t,(function(t){return!(E(e=t)&&e.length<=5&&tt(e,H_));var e})).isNone()},j_=function(){var t,e=Vb.getItem(V_);if(null===e)return{};try{t=JSON.parse(e)}catch(h){if(h instanceof SyntaxError)return console.log("Local storage "+V_+" was not valid JSON",h),{};throw h}return z_(t)?t:(console.log("Local storage "+V_+" was not valid format",t),{})},L_=function(t){var e=j_();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},N_=function(t,e){var n,o,r;H_(t)&&(n=j_(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=q(o,(function(e){return e!==t})),n[e]=[t].concat(r).slice(0,5),function(t){if(!z_(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));Vb.setItem(V_,JSON.stringify(t))}(n))},U_=function(t){return!!t},W_=function(t){return Et(mC.makeMap(t,/[, ]/),U_)},G_=function(t){return k.from(t.getParam("file_picker_callback")).filter(M)},Y_=function(t,e){var n,o,r,i,a=(n=t,o=k.some(n.getParam("file_picker_types")).filter(U_),r=k.some(n.getParam("file_browser_callback_types")).filter(U_),i=o.or(r).map(W_),G_(n).fold(s,(function(t){return i.fold(l,(function(t){return 0<_t(t).length&&t}))})));return B(a)?a?G_(t):k.none():a[e]?G_(t):k.none()},q_=function(t){return k.from(t).filter(T).getOrUndefined()},X_=function(t){return k.from(void 0===(n=(e=t).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):n);var e,n},$_=function(t){return{getHistory:L_,addToHistory:N_,getLinkInformation:function(){return!1===(e=t).getParam("typeahead_urls")?k.none():k.some({targets:P_(e.getBody()),anchorTop:q_(e.getParam("anchor_top","#top")),anchorBottom:q_(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return X_(t)},getUrlPicker:function(e){return Y_(n=t,o=e).map((function(t){return function(e){return kx((function(r){var i=d({filetype:o,fieldname:e.fieldname},k.from(e.meta).getOr({}));t.call(n,(function(t,e){if(!T(t))throw new Error("Expected value to be string");if(void 0!==e&&!D(e))throw new Error("Expected meta to be a object");r({value:t,meta:e})}),e.value,i)}))}}));var n,o}}},K_=function(t,e,n){var o,r,i=mn(!1),a={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=mn(Fv(e)?"bottom":"top")).get,setDockingMode:o.set},u={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:ev.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return f_(s_,t,u)},anchors:p_(e,n,a.isPositionedAtTop),header:a,getSink:function(){return ft.value(t)}},urlinput:$_(e),styleselect:function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):k.none()}},o=function t(e){var n=e.items;return void 0!==n&&0<n.length?Z(n,t):[e.format]},r=mn([]),i=mn([]),a=mn([]),u=mn([]),c=mn(!1);return t.on("PreInit",(function(a){var u=y_(t),c=w_(t,u,e,n);r.set(c),i.set(Z(c,o))})),t.on("addStyleModifications",(function(r){var i=w_(t,r.items,e,n);a.set(i),c.set(r.replace),u.set(Z(i,o))})),{getData:function(){var t=c.get()?[]:r.get(),e=a.get();return t.concat(e)},getFlattenedKeys:function(){var t=c.get()?[]:i.get(),e=u.get();return t.concat(e)}}}(e),colorinput:h_(e),dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return u},J_=r((function(t,e){var n,o,r;n=t,o=Math.floor(e),r=_a.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),$i(n,"max-width",r+"px")})),Q_="contexttoolbar-hide",Z_=r([Ne("dom"),nn("shell",!0),Wl("toolbarBehaviours",[dg])]),tT=r([Sf({name:"groups",overrides:function(){return{behaviours:ac([dg.config({})])}}})]),eT=$f({name:"Toolbar",configFields:Z_(),partFields:tT(),factory:function(t,e,n,o){var r=function(e){return t.shell?k.some(e):Ff(e,t,"groups")},i=t.shell?{behaviours:[dg.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Yl(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){dg.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),nT=function(t,e,n){return{within:t,extra:e,withinWidth:n}},oT=function(t,e,n){var o,i=(o=function(t,e){var o=n(t);return k.some({element:t,start:e,finish:e+o,width:o})},$(t,(function(t,e){return o(e,t.len).fold(r(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]}).list),a=q(i,(function(t){return t.finish<=e})),u=X(a,(function(t,e){return t+e.width}),0);return{within:a,extra:i.slice(a.length),withinWidth:u}},rT=function(t){return W(t,(function(t){return t.element}))},iT=function(t,e,n,o){var r,i,a,u,c,s,l,f,d,m=(0===(r=oT(e,t,n)).extra.length?k.some(r):k.none()).getOrThunk((function(){return oT(e,t-n(o),n)})),g=m.within,p=m.extra,h=m.withinWidth;return 1===p.length&&p[0].width<=n(o)?(l=p,f=h,d=rT(g.concat(l)),nT(d,[],f)):1<=p.length?(a=p,u=o,c=h,s=rT(g).concat([u]),nT(s,rT(a),c)):(i=h,nT(rT(g),[],i))},aT=function(t,e){var n=W(e,(function(t){return ha(t)}));eT.setGroups(t,n)},uT=function(t,e,n){var o=Rf(t,e,"primary"),r=Hx.getCoupled(t,"overflowGroup");$i(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),a=ct(i,(function(t){return hc(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}));n([]),aT(o,i);var u=Ta(o.element),c=iT(u,e.builtGroups.get(),(function(t){return Ta(t.element)}),r);0===c.extra.length?(dg.remove(o,r),n([])):(aT(o,c.within),n(c.extra)),na(o.element,"visibility"),oa(o.element),a.each(bg.focus)},cT=r([Wl("splitToolbarBehaviours",[Hx]),dn("builtGroups",(function(){return mn([])}))]),sT=r([mu(["overflowToggledClass"]),tn("getOverflowBounds"),Ne("lazySink"),dn("overflowGroups",(function(){return mn([])}))].concat(cT())),lT=r([xf({factory:eT,schema:Z_(),name:"primary"}),wf({schema:Z_(),name:"overflow"}),wf({name:"overflow-button"}),wf({name:"overflow-group"})]),fT=r([mu(["toggledClass"]),Ne("lazySink"),Ye("fetch"),tn("getBounds"),en("fireDismissalEventInstead",[nn("event",Lo())]),Kc()]),dT=r([wf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ac([Bg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),wf({factory:eT,schema:Z_(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:ac([ug.config({mode:"cyclic",onEscape:function(e){return Ff(e,t,"button").each(bg.focus),k.none()}})])}}})]),mT=function(t,e){var n=Hx.getCoupled(t,"toolbarSandbox");Cl.isOpen(n)?Cl.close(n):Cl.open(n,e.toolbar())},gT=function(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();el.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:J_()}},e,r)},pT=function(t,e,n,o,r){eT.setGroups(e,r),gT(t,e,n,o),Bg.on(t)},hT=$f({name:"FloatingToolbarButton",factory:function(t,e,n,o){return d(d({},gp.sketch(d(d({},o.button()),{action:function(t){mT(t,o)},buttonBehaviours:Xl({dump:o.button().buttonBehaviours},[Hx.config({others:{toolbarSandbox:function(e){return o=e,r=n,i=t,{dom:{tag:"div",attributes:{id:(a=Qa()).id}},behaviours:ac([ug.config({mode:"special",onEscape:function(t){return Cl.close(t),k.some(!0)}}),Cl.config({onOpen:function(t,e){i.fetch().get((function(t){pT(o,e,i,r.layouts,t),a.link(o.element),ug.focusIn(e)}))},onClose:function(){Bg.off(o),bg.focus(o),a.unlink(o.element)},isPartOf:function(t,e,n){return tu(e,n)||tu(o,n)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),dc.config({channels:d(d({},Dl(d({isExtraPart:s},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Bl({doReposition:function(){Cl.getState(Hx.getCoupled(o,"toolbarSandbox")).each((function(t){gT(o,t,i,r.layouts)}))}}))})])};var o,r,i,a}}})])}))),{apis:{setGroups:function(e,o){Cl.getState(Hx.getCoupled(e,"toolbarSandbox")).each((function(r){pT(e,r,t,n.layouts,o)}))},reposition:function(e){Cl.getState(Hx.getCoupled(e,"toolbarSandbox")).each((function(o){gT(e,o,t,n.layouts)}))},toggle:function(t){mT(t,o)},getToolbar:function(t){return Cl.getState(Hx.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return Cl.isOpen(Hx.getCoupled(t,"toolbarSandbox"))}}})},configFields:fT(),partFields:dT(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),vT=r([Ne("items"),mu(["itemSelector"]),Wl("tgroupBehaviours",[ug])]),bT=r([Cf({name:"items",unit:"item"})]),yT=$f({name:"ToolbarGroup",configFields:vT(),partFields:bT(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.tgroupBehaviours,[ug.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),xT=function(t){return W(t,(function(t){return ha(t)}))},wT=function(t,e,n){uT(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){hT.setGroups(t,xT(o))}))}))},ST=$f({name:"SplitFloatingToolbar",configFields:sT(),partFields:lT(),factory:function(t,e,n,o){var r=pp(hT.sketch({fetch:function(){return kx((function(e){e(xT(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[ju,zu]},onRtl:function(){return[zu,ju]},onBottomLtr:function(){return[Nu,Lu]},onBottomRtl:function(){return[Lu,Nu]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.splitToolbarBehaviours,[Hx.config({others:{overflowGroup:function(){return yT.sketch(d(d({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(W(n,e.getSystem().build)),wT(e,r,t)},refresh:function(e){return wT(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){hT.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(hT.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){hT.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(hT.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),CT=function(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))},kT=function(t){return t.dimension.property},OT=function(t,e){return t.dimension.getDimension(e)},_T=function(t,e){var n=CT(t,e);Ni(n,[e.shrinkingClass,e.growingClass])},TT=function(t,e){zi(t.element,e.openClass),Vi(t.element,e.closedClass),$i(t.element,kT(e),"0px"),oa(t.element)},DT=function(t,e){zi(t.element,e.closedClass),Vi(t.element,e.openClass),na(t.element,kT(e))},ET=function(t,e,n,o){n.setCollapsed(),$i(t.element,kT(e),OT(e,t.element)),oa(t.element),_T(t,e),TT(t,e),e.onStartShrink(t),e.onShrunk(t)},BT=function(t,e,n,o){var r=o.getOrThunk((function(){return OT(e,t.element)}));n.setCollapsed(),$i(t.element,kT(e),r),oa(t.element);var i=CT(t,e);zi(i,e.growingClass),Vi(i,e.shrinkingClass),TT(t,e),e.onStartShrink(t)},AT=function(t,e,n){var o=OT(e,t.element);("0px"===o?ET:BT)(t,e,n,k.some(o))},IT=function(t,e,n){var o=CT(t,e),r=ji(o,e.shrinkingClass),i=OT(e,t.element);DT(t,e);var a=OT(e,t.element);(r?function(){$i(t.element,kT(e),i),oa(t.element)}:function(){TT(t,e)})(),zi(o,e.shrinkingClass),Vi(o,e.growingClass),DT(t,e),$i(t.element,kT(e),a),n.setExpanded(),e.onStartGrow(t)},MT=function(t,e,n){var o=CT(t,e);return!0===ji(o,e.growingClass)},FT=function(t,e,n){var o=CT(t,e);return!0===ji(o,e.shrinkingClass)},RT=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(na(t.element,kT(e)),o=OT(e,t.element),$i(t.element,kT(e),o))},grow:function(t,e,n){n.isExpanded()||IT(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&AT(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&ET(t,e,n,k.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:MT,isShrinking:FT,isTransitioning:function(t,e,n){return MT(t,e)||FT(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?AT:IT)(t,e,n)},disableTransitions:_T}),PT=Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return ki(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Qt(e.dimension.property,"0px")})},events:function(t,e){return er([lr(xo(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(_T(n,t),e.isExpanded()&&na(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),VT=[Ne("closedClass"),Ne("openClass"),Ne("shrinkingClass"),Ne("growingClass"),Ke("getAnimationRoot"),pu("onShrunk"),pu("onStartShrink"),pu("onGrown"),pu("onStartGrow"),nn("expanded",!1),Ue("dimension",Ie("property",{width:[yu("property","width"),yu("getDimension",(function(t){return Ta(t)+"px"}))],height:[yu("property","height"),yu("getDimension",(function(t){return ya(t)+"px"}))]}))],HT=cc({fields:VT,name:"sliding",active:PT,apis:RT,state:Object.freeze({__proto__:null,init:function(t){var e=mn(t.expanded);return Si({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:a(e.set,!1),setExpanded:a(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),zT=r([mu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),pu("onOpened"),pu("onClosed")].concat(cT())),jT=r([xf({factory:eT,schema:Z_(),name:"primary"}),xf({factory:eT,schema:Z_(),name:"overflow",overrides:function(t){return{toolbarBehaviours:ac([HT.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Ff(e,t,"overflow-button").each((function(t){Bg.off(t),bg.focus(t)})),t.onClosed(e)},onGrown:function(e){ug.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Ff(e,t,"overflow-button").each(Bg.on)}}),ug.config({mode:"acyclic",onEscape:function(e){return Ff(e,t,"overflow-button").each(bg.focus),k.some(!0)}})])}}}),wf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:ac([Bg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),wf({name:"overflow-group"})]),LT=function(t,e){Ff(t,e,"overflow-button").bind((function(){return Ff(t,e,"overflow")})).each((function(n){NT(t,e),HT.toggleGrow(n)}))},NT=function(t,e){Ff(t,e,"overflow").each((function(n){uT(t,e,(function(t){var e=W(t,(function(t){return ha(t)}));eT.setGroups(n,e)})),Ff(t,e,"overflow-button").each((function(t){HT.hasGrown(n)&&Bg.on(t)})),HT.refresh(n)}))},UT=$f({name:"SplitSlidingToolbar",configFields:zT(),partFields:jT(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:Yl(t.splitToolbarBehaviours,[Hx.config({others:{overflowGroup:function(t){return yT.sketch(d(d({},o["overflow-group"]()),{items:[gp.sketch(d(d({},o["overflow-button"]()),{action:function(e){$o(t,r)}}))]}))}}}),mg("toolbar-toggle-events",[rr(r,(function(e){LT(e,t)}))])]),apis:{setGroups:function(e,n){var o;o=W(n,e.getSystem().build),t.builtGroups.set(o),NT(e,t)},refresh:function(e){return NT(e,t)},toggle:function(e){return LT(e,t)},isOpen:function(e){return Ff(e,t,"overflow").map(HT.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),WT=r(ii("toolbar-height-change")),GT=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:d({tag:"div",classes:["tox-toolbar__group"]},e),components:[yT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ac([$y.config({}),bg.config({})])}},YT=function(t){return yT.sketch(GT(t))},qT=function(t,e){var n=fr((function(e){var n=W(t.initGroups,YT);eT.setGroups(e,n)}));return ac([Xv(t.providers.isDisabled),Wv(),ug.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),mg("toolbar-events",[n])])},XT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":GT({title:k.none(),items:[]}),"overflow-button":qk({name:"more",icon:k.some("more-drawer"),disabled:!1,tooltip:k.some("More..."),primary:!1,borderless:!1},k.none(),t.providers)},splitToolbarBehaviours:qT(t,e)}},$T=function(t){var e=XT(t),n=ST.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return ST.sketch(d(d({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=La(e),o=Cr(e),r=La(o),i=Math.max(o.dom.scrollHeight,r.height);return za(n.x+4,r.y,n.width-8,i)},parts:d(d({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},KT=function(t){var e=UT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=UT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=XT(t);return UT.sketch(d(d({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([WT()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([WT()],{type:"closed"})}}))},JT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return eT.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ih.scrolling?["tox-toolbar--scrolling"]:[])},components:[eT.parts.groups({})],toolbarBehaviours:qT(t,e)})},QT=de([We("type"),Ue("items",ge([Ce([We("name"),$e("items",Pe)]),Pe]))].concat(Wp)),ZT=[Ze("text"),Ze("tooltip"),Ze("icon"),Ye("fetch"),sn("onSetup",(function(){return n}))],tD=de(g([We("type")],ZT)),eD=function(t){return Te("menubutton",tD,t)},nD=de([We("type"),Ze("tooltip"),Ze("icon"),Ze("text"),tn("select"),Ye("fetch"),sn("onSetup",(function(){return n})),un("presets","normal",["normal","color","listpreview"]),nn("columns",1),Ye("onAction"),Ye("onItemAction")]),oD=Object.freeze({__proto__:null,events:function(t,e){var n=function(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=t(o,e.get()),i=W(r,n.getSystem().build);il(n,i)}))};return er([rr(To(),(function(e,o){var r,i=o;i.universal||(r=t.channel,j(i.channels,r)&&n(e,i.data))})),fr((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),rD=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),iD=[Ne("channel"),Ke("renderComponents"),Ke("updateState"),Ke("initialData")],aD=cc({fields:iD,name:"reflecting",active:oD,apis:rD,state:Object.freeze({__proto__:null,init:function(){var t=mn(k.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(k.none())}}}})}),uD=r([Ne("toggleClass"),Ne("fetch"),vu("onExecute"),nn("getHotspot",k.some),nn("getAnchorOverrides",r({})),Kc(),vu("onItemExecute"),Ke("lazySink"),Ne("dom"),pu("onOpen"),Wl("splitDropdownBehaviours",[Hx,ug,bg]),nn("matchWidth",!1),nn("useMinWidth",!1),nn("eventOrder",{}),Ke("role")].concat(nw())),cD=xf({factory:gp,schema:[Ne("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:ac([bg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(Jo)},buttonBehaviours:ac([Bg.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),sD=xf({factory:gp,schema:[Ne("dom")],name:"button",defaults:function(){return{buttonBehaviours:ac([bg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),lD=r([cD,sD,Sf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),wf({schema:[du()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),jx()]),fD=$f({name:"SplitDropdown",configFields:uD(),partFields:lD(),factory:function(t,e,o,r){var i,a=function(t){ed.getCurrent(t).each((function(t){dd.highlightFirst(t),ug.focusIn(t)}))},u=function(e){Kx(t,(function(t){return t}),e,r,a,vx.HighlightFirst).get(n)},c=function(e){var n=Rf(e,t,"button");return Jo(n),k.some(!0)},s=d(d({},er([fr((function(e,n){Ff(e,t,"aria-descriptor").each((function(t){var n=ii("aria");$r(t.element,"id",n),$r(e.element,"aria-describedby",n)}))}))])),Ig(k.some(u))),l={repositionMenus:function(t){Bg.isOn(t)&&ew(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:l,eventOrder:d(d({},t.eventOrder),((i={})[Do()]=["disabling","toggling","alloy.base.behaviour"],i)),events:s,behaviours:Yl(t.splitDropdownBehaviours,[Hx.config({others:{sandbox:function(e){var n=Rf(e,t,"arrow");return tw(t,e,{onOpen:function(){Bg.on(n),Bg.on(e)},onClose:function(){Bg.off(n),Bg.off(e)}})}}}),ug.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t){return u(t),k.some(!0)}}),bg.config({}),Bg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),dD=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},mD=function(t){return{setActive:function(e){Bg.set(t,e)},isActive:function(){return Bg.isOn(t)},isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)}}},gD=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},pD=ii("focus-button"),hD=["checklist","ordered-list"],vD=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],bD=function(t,e,n,o,r,i){var a,u=function(t){return ev.isRtl()&&j(hD,t)?t+"-rtl":t},c=ev.isRtl()&&t.exists((function(t){return j(vD,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:gD(n,i)},components:Zv([t.map((function(t){return Ek(u(t),i.icons)})),e.map((function(t){return Ak(t,"tox-tbtn",i)}))]),eventOrder:((a={})[uo()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:ac([Xv(i.isDisabled),Wv(),mg("common-button-display-events",[rr(uo(),(function(t,e){e.event.prevent(),$o(t,pD)}))])].concat(o.map((function(n){return aD.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return Zv([t.icon.map((function(t){return Ek(u(t),i.icons)})),t.text.map((function(t){return Ak(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}},yD=function(t,e,o){var r,i=mn(n),a=bD(t.icon,t.text,t.tooltip,k.none(),k.none(),o);return gp.sketch({dom:a.dom,components:a.components,eventOrder:Mk,buttonBehaviours:ac([mg("toolbar-button-events",[(r={onAction:t.onAction,getApi:e.getApi},gr((function(t,e){$v(r,t)((function(e){Ko(t,Ik,{buttonApi:e}),r.onAction(e)}))}))),Kv(e,i),Jv(e,i)]),Xv((function(){return t.disabled||o.isDisabled()})),Wv()].concat(e.toolbarButtonBehaviours))})},xD=function(t,e,n){return yD(t,{toolbarButtonBehaviours:[].concat(0<n.length?[mg("toolbarButtonWith",n)]:[]),getApi:dD,onSetup:t.onSetup},e)},wD=function(t,e,n){return Lt(yD(t,{toolbarButtonBehaviours:[dg.config({}),Bg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[mg("toolbarToggleButtonWith",n)]:[]),getApi:mD,onSetup:t.onSetup},e))},SD=function(t,e){var o,r,i,a,u=ii("channel-update-split-dropdown-display"),c=function(t){return{isDisabled:function(){return pv.isDisabled(t)},setDisabled:function(e){return pv.set(t,e)},setIconFill:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){$r(t,"fill",n)}))},setIconStroke:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){$r(t,"stroke",n)}))},setActive:function(e){$r(t.element,"aria-pressed",e),Ka(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Bg.set(t,e)}))}))},isActive:function(){return Ka(t.element,"span").exists((function(e){return t.getSystem().getByDom(e).exists(Bg.isOn)}))}}},l=mn(n),f={getApi:c,onSetup:t.onSetup};return fD.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:d({"aria-pressed":!1},gD(t.tooltip,e.providers))},onExecute:function(e){t.onAction(c(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:ac([qv(e.providers.isDisabled),Wv(),mg("split-dropdown-events",[rr(pD,bg.focus),Kv(f,l),Jv(f,l)]),aw.config({})]),eventOrder:((o={})[zo()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:(r=c,i=t,a=e.providers,function(t){return kx((function(t){return i.fetch(t)})).map((function(e){return k.from(wy(Lt(ty(ii("menu-value"),e,(function(e){i.onItemAction(r(t),e)}),i.columns,i.presets,uh.CLOSE_ON_EXECUTE,i.select.getOr(s),a),{movement:ny(i.columns,i.presets),menuBehaviours:Gh("auto"!==i.columns?[]:[fr((function(t,e){Uh(t,4,bh(i.presets)).each((function(e){var n=e.numRows,o=e.numColumns;ug.setGridSize(t,n,o)}))}))])})))}))}),parts:{menu:Sh(0,t.columns,t.presets)},components:[fD.parts.button(bD(t.icon,t.text,k.none(),k.some(u),k.some([Bg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),fD.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:vp("chevron-down",e.providers.icons)},buttonBehaviours:ac([qv(e.providers.isDisabled),Wv()])}),fD.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},CD=function(t,e){return rr(Ik,(function(n,o){var r,i=t.get(n),a=(r=i,{hide:function(){return $o(r,Io())},getValue:function(){return Ul.getValue(r)}});e.onAction(a,o.event.buttonApi)}))},kD=function(t,e,o){var r,i,a,u,c,s,l,f,g,p,h,v,b={backstage:{shared:{providers:o}}};return"contextformtogglebutton"===e.type?(l=t,g=b,(p=(f=e).original).primary,h=m(p,["primary"]),v=De($p(d(d({},h),{type:"togglebutton",onAction:n}))),wD(v,g.backstage.shared.providers,[CD(l,f)])):(r=t,a=b,(u=(i=e).original).primary,c=m(u,["primary"]),s=De(Yp(d(d({},c),{type:"button",onAction:n}))),xD(s,a.backstage.shared.providers,[CD(r,i)]))},OD=function(t,e){var n,o,r,i,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=pp(gx.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ac([ug.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return Jo(t),!0}))},onLeft:function(t,e){return e.cut(),k.none()},onRight:function(t,e){return e.cut(),k.none()}})])})),s=(n=c,o=t.commands,r=e,i=W(o,(function(t){return pp(kD(n,t,r))})),{asSpecs:function(){return W(i,(function(t){return t.asSpec()}))},findPrimary:function(t){return ct(o,(function(e,n){return e.primary?k.from(i[n]).bind((function(e){return e.getOpt(t)})).filter(u(pv.isDisabled)):k.none()}))}});return[{title:k.none(),items:[c.asSpec()]},{title:k.none(),items:s.asSpecs()}]},_D=OD,TD=function(t,e){var n,o,r,i,a,u=Ra(window),c=ja(pn.fromDom(t.getContentAreaContainer())),s=Cv(t)||kv(t)||_v(t),l=(n=c,o=u,r=Math.max(o.x,n.x),i=n.right-r,a=o.width-(r-o.x),{x:r,width:Math.min(i,a)}),f=l.x,d=l.width;if(t.inline&&!s)return za(f,u.y,d,u.height);var m=function(t,e,n,o){var r=pn.fromDom(t.getContainer()),i=Ka(r,".tox-editor-header").getOr(r),a=ja(i),u=a.y>=e.bottom,c=o&&!u;if(t.inline&&c)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var s=ja(r);return c?{y:Math.max(a.bottom,n.y),bottom:Math.min(s.bottom,n.bottom)}:{y:Math.max(s.y,n.y),bottom:Math.min(a.y,n.bottom)}}(t,c,u,e.header.isPositionedAtTop()),g=m.y,p=m.bottom;return za(f,g,d,p-g)},DD=function(t,e){var n=q(e,(function(e){return e.predicate(t.dom)})),o=Y(n,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},ED=function(t,e,n){var o=DD(t,e);if(0<o.contextForms.length)return k.some({elem:t,toolbars:[o.contextForms[0]]});var r=DD(t,n);if(0<r.contextForms.length)return k.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;var e=function(e){return L(t,(function(t){return t.position===e}))},n=function(e){return q(t,(function(t){return t.position===e}))},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),a=W(n("selection"),(function(t){return d(d({},t),{position:"node"})}));return i.concat(a)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return k.some({elem:t,toolbars:i})}return k.none()},BD=function(t,e,n){return t(e)?k.none():Jn(e,(function(t){var e=DD(t,n.inNodeScope),o=e.contextToolbars,r=e.contextForms,i=0<r.length?r:function(t){if(t.length<=1)return t;var e=function(e){return K(t,(function(t){return t.position===e}))};return e("selection").orThunk((function(){return e("node")})).orThunk((function(){return e("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(e){return q(t,(function(t){return t.position===e}))}))}(o);return 0<i.length?k.some({elem:t,toolbars:i}):k.none()}),t)},AD=function(t,e){var n={},o=[],r=[],i={},a={},u=function(t,u){var c=De(Te("ContextForm",nh,u));(n[t]=c).launch.map((function(n){i["form:"+t]=d(d({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(c)}})})),"editor"===c.scope?r.push(c):o.push(c),a[t]=c},c=function(t,e){Te("ContextToolbar",oh,e).each((function(n){"editor"===e.scope?r.push(n):o.push(n),a[t]=n}))},s=_t(t);return G(s,(function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&c(e,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:a,formNavigators:i}},ID=ii("forward-slide"),MD=ii("backward-slide"),FD=ii("change-slide-event"),RD="tox-pop--resizing",PD=function(t,e,n){var o,r,i,a,u,c=n.dataset,s="basic"===c.type?function(){return W(c.data,(function(t){return x_(t,n.isSelectedFor,n.getPreviewFor)}))}:c.getData;return{items:(o=e,r=n,i=function(t,e,n,i){var u=o.shared.providers.translate(t.title);if("separator"===t.type)return k.some({type:"separator",text:u});if("submenu"!==t.type)return k.some(d({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(i),disabled:n,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))));var c=Z(t.getStyleItems(),(function(t){return a(t,e,i)}));return 0===e&&c.length<=0?k.none():k.some({type:"nestedmenuitem",text:u,disabled:c.length<=0,getSubmenuItems:function(){return Z(t.getStyleItems(),(function(t){return a(t,e,i)}))}})},a=function(t,e,n){var o="formatter"===t.type&&r.isInvalid(t);return 0===e?o?[]:i(t,e,!1,n).toArray():i(t,e,o,n).toArray()},{validateItems:u=function(t){var e=r.getCurrentValue(),n=r.shouldHide?0:1;return Z(t,(function(t){return a(t,n,e)}))},getFetch:function(t,e){return function(n,o){var r=e(),i=u(r);o(Nk(i,uh.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:s}},VD=function(t,e,o){var r=PD(0,e,o),i=r.items,a=r.getStyleItems;return Pk({text:o.icon.isSome()?k.none():k.some(""),icon:o.icon,tooltip:k.from(o.tooltip),role:k.none(),fetch:i.getFetch(e,a),onSetup:function(e){return o.setInitialValue.each((function(t){return t(e.getComponent())})),o.nodeChangeHandler.map((function(n){var o=n(e.getComponent());return t.on("NodeChange",o),function(){t.off("NodeChange",o)}})).getOr(n)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};(CO=SO=SO||{})[CO.SemiColon=0]="SemiColon",CO[CO.Space=1]="Space";var HD,zD,jD,LD,ND,UD,WD=function(t,e,n,o){var r,i,a=t.getParam(e,n,"string");return{type:"basic",data:(i=a,r=o===SO.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),W(r,(function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}})))}},GD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],YD=function(t){var e=function(e){var n=K(GD,(function(e){return t.formatter.match(e.format)})).fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));Ko(e,Rk,{icon:"align-"+n})},n=k.some((function(t){return function(){return e(t)}})),o=k.some(e),r={type:"basic",data:GD};return{tooltip:"Align",icon:k.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(t){return function(){return k.none()}},onAction:function(e){return function(){return K(GD,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},qD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],XD=function(t){var e=t.split(/\s*,\s*/);return W(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},$D=function(t){var e;return 0===t.indexOf("-apple-system")&&(e=XD(t.toLowerCase()),tt(qD,(function(t){return-1<e.indexOf(t.toLowerCase())})))},KD=function(t){var e=function(){var e=function(t){return t?XD(t)[0]:""},n=t.queryCommandValue("FontName"),o=i.data,r=n?n.toLowerCase():"";return{matchOpt:K(o,(function(t){var n=t.format;return n.toLowerCase()===r||e(n).toLowerCase()===e(r).toLowerCase()})).orThunk((function(){return $D(r)?k.from({title:"System Font",format:r}):k.none()})),font:n}},n=function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,Fk,{text:i})},o=k.some((function(t){return function(){return n(t)}})),r=k.some(n),i=WD(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",SO.SemiColon);return{tooltip:"Fonts",icon:k.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return k.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},setInitialValue:r,nodeChangeHandler:o,dataset:i,shouldHide:!1,isInvalid:s}},JD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},QD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZD=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):Rt(QD,t).getOr(t);var n,o,r},tE=function(t){var e=function(){var e=k.none(),n=u.data,o=t.queryCommandValue("FontSize");if(o)for(var r=function(t){var r=ZD(o,t),i=Rt(JD,r).getOr("");e=K(n,(function(t){return t.format===o||t.format===r||t.format===i}))},i=3;e.isNone()&&0<=i;i--)r(i);return{matchOpt:e,size:o}},n=r(k.none),o=function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,Fk,{text:i})},i=k.some((function(t){return function(){return o(t)}})),a=k.some(o),u=WD(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",SO.Space);return{tooltip:"Font sizes",icon:k.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},setInitialValue:a,nodeChangeHandler:i,dataset:u,shouldHide:!1,isInvalid:s}},eE=function(t,e){var n=e(),o=W(n,(function(t){return t.format}));return k.from(t.formatter.closest(o)).bind((function(t){return K(n,(function(e){return e.format===t}))})).orThunk((function(){return Jf(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))},nE=function(t){var e=mn(k.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(k.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(k.some(t))}}},oE=function(){return nE((function(t){return t.destroy()}))},rE=function(){return nE((function(t){return t.unbind()}))},iE=function(t,e){return function(n){var o=rE(),r=function(){n.setActive(t.formatter.match(e));var r=t.formatter.formatChanged(e,n.setActive);o.set(r)};return t.initialized?r():t.on("init",r),o.clear}},aE=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},uE=function(t){var e=function(e){var n=eE(t,(function(){return r.data})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,Fk,{text:n})},n=k.some((function(t){return function(){return e(t)}})),o=k.some(e),r=WD(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",SO.SemiColon);return{tooltip:"Blocks",icon:k.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:aE(t),setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},cE=function(t,e){var n=function(e){var n=function t(e){var n=e.items;return void 0!==n&&0<n.length?Z(n,t):[{title:e.title,format:e.format}]},o=Z(y_(t),n),r=eE(t,(function(){return o})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,Fk,{text:r})},o=k.some((function(t){return function(){return n(t)}})),r=k.some(n);return{tooltip:"Formats",icon:k.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:k.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?k.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):k.none()}},onAction:aE(t),setInitialValue:r,nodeChangeHandler:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},sE=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],lE=function(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return Be(t)})).getOrDie();return e(i,o,r)}},fE={button:lE(Yp,(function(t,e){return n=t,o=e.backstage.shared.providers,xD(n,o,[]);var n,o})),togglebutton:lE($p,(function(t,e){return n=t,o=e.backstage.shared.providers,wD(n,o,[]);var n,o})),menubutton:lE(eD,(function(t,e){return Wk(t,"tox-tbtn",e.backstage,k.none())})),splitbutton:lE((function(t){return Te("SplitButton",nD,t)}),(function(t,e){return SD(t,e.backstage.shared)})),grouptoolbarbutton:lE((function(t){return Te("GroupToolbarButton",QT,t)}),(function(t,e,n){var o,r,i,a,u,c,s=n.ui.registry.getAll().buttons,l=((o={})[Xc]=e.backstage.shared.header.isPositionedAtTop()?nu.TopToBottom:nu.BottomToTop,o);switch(Ev(n)){case ih.floating:return r=t,i=e.backstage,a=function(t){return pE(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,k.none())},u=l,c=i.shared,hT.sketch({lazySink:c.getSink,fetch:function(){return kx((function(t){t(W(a(r.items),YT))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:bD(r.icon,r.text,r.tooltip,k.none(),k.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:u}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=d({type:"advanced"},o.styleselect),VD(n,o,cE(n,r));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,VD(n,o,tE(n));var n,o},fontSelectButton:function(t,e){return n=t,o=e.backstage,VD(n,o,KD(n));var n,o},formatButton:function(t,e){return n=t,o=e.backstage,VD(n,o,uE(n));var n,o},alignMenuButton:function(t,e){return n=t,o=e.backstage,VD(n,o,YD(n));var n,o}},dE={styleselect:fE.styleSelectButton,fontsizeselect:fE.fontsizeSelectButton,fontselect:fE.fontSelectButton,formatselect:fE.formatButton,align:fE.alignMenuButton},mE=function(t){var e,n,o,r=t.toolbar,i=t.buttons;return!1===r?[]:void 0===r||!0===r?(n=i,o=W(sE,(function(t){var e=q(t.items,(function(t){return Pt(n,t)||Pt(dE,t)}));return{name:t.name,items:e}})),q(o,(function(t){return 0<t.items.length}))):T(r)?(e=r.split("|"),W(e,(function(t){return{items:t.trim().split(" ")}}))):R(r,(function(t){return Pt(t,"name")&&Pt(t,"items")}))?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},gE=function(t,e,n,o,r,i){return Rt(e,n.toLowerCase()).orThunk((function(){return i.bind((function(t){return ct(t,(function(t){return Rt(e,t+n.toLowerCase())}))}))})).fold((function(){return Rt(dE,n.toLowerCase()).map((function(e){return e(t,r)})).orThunk((function(){return k.none()}))}),(function(e){return"grouptoolbarbutton"!==e.type||o?(a=r,u=t,Rt(fE,(i=e).type).fold((function(){return console.error("skipping button defined by",i),k.none()}),(function(t){return k.some(t(i,a,u))}))):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),k.none());var i,a,u}))},pE=function(t,e,n,o){var r=mE(e),i=W(r,(function(r){var i=Z(r.items,(function(r){return 0===r.trim().length?[]:gE(t,e.buttons,r,e.allowToolbarGroups,n,o).toArray()}));return{title:k.from(t.translate(r.name)),items:i}}));return q(i,(function(t){return 0<t.items.length}))},hE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},vE={maxHeightFunction:Fc(),maxWidthFunction:J_()},bE={onLtr:function(){return[Uu,Wu,Lu,zu,Nu,ju,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Uu,Wu,Nu,ju,Lu,zu,fp,dp,lp,cp,sp,up]}},yE={onLtr:function(){return[Wu,zu,ju,Lu,Nu,Uu,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Wu,ju,zu,Nu,Lu,Uu,fp,dp,lp,cp,sp,up]}},xE=function(t,e,o,r){var i,a,u=Wn().deviceType.isTouch,c=pa((i={sink:o,onEscape:function(){return t.focus(),k.some(!0)}},a=mn([]),ep.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){a.set([]),ep.getContent(t).each((function(t){na(t.element,"visibility")})),zi(t.element,RD),na(t.element,"width")},inlineBehaviours:ac([mg("context-toolbar-events",[lr(xo(),(function(t,e){zi(t.element,RD),na(t.element,"width")})),rr(FD,(function(t,e){var n=t.element;na(n,"width");var o=Ta(n);ep.setContent(t,e.event.contents),Vi(n,RD);var r=Ta(n);$i(n,"width",o+"px"),ep.getContent(t).each((function(t){e.event.focus.bind((function(t){return gc(t),hc(n)})).orThunk((function(){return ug.focusIn(t),pc(Mr(n))}))})),mp.setTimeout((function(){$i(t.element,"width",r+"px")}),0)})),rr(ID,(function(t,e){ep.getContent(t).each((function(e){a.set(a.get().concat([{bar:e,focus:pc(Mr(t.element))}]))})),Ko(t,FD,{contents:e.event.forwardContents,focus:k.none()})})),rr(MD,(function(t,e){at(a.get()).each((function(e){a.set(a.get().slice(0,a.get().length-1)),Ko(t,FD,{contents:ha(e.bar),focus:e.focus})}))}))]),ug.config({mode:"special",onEscape:function(t){return at(a.get()).fold((function(){return i.onEscape()}),(function(e){return $o(t,MD),k.some(!0)}))}})]),lazySink:function(){return ft.value(i.sink)}}))),s=function(){return TD(t,r.backstage.shared)},l=function(){if(u()&&r.backstage.isContextMenuOpen())return!0;var e,n,o,i,a,c,l=(e=h.get().filter((function(t){return Wi(pn.fromDom(t))})).map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Ia().top:La(pn.fromDom(t.getBody())).y,{y:e.top+n,bottom:e.bottom+n}),f=s();return o=l.y,i=l.bottom,a=f.y,c=f.bottom,!(Math.max(o,a)<=Math.min(i,c))},f=function(){p.set(k.none()),ep.hide(c)},m=function(){ep.hide(c)},g=function(){p.get().each((function(t){var e=c.element;na(e,"display"),l()?$i(e,"display","none"):el.positionWithinBounds(o,t,c,k.some(s()))}))},p=mn(k.none()),h=mn(k.none()),v=mn(null),b=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:ac([ug.config({mode:"acyclic"}),mg("pop-dialog-wrap-events",[fr((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return ug.focusIn(e)}))})),dr((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},y=Ut((function(){return AD(e,(function(t){var e=x([t]);Ko(c,ID,{forwardContents:b(e)})}))})),x=function(e){var n=t.ui.registry.getAll().buttons,o=y(),i=d(d({},n),o.formNavigators),a=Ev(t)===ih.scrolling?ih.scrolling:ih["default"],u=Q(W(e,(function(e){return"contexttoolbar"===e.type?pE(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},r,k.some(["form:"])):(n=e,o=r.backstage.shared.providers,_D(n,o));var n,o})));return JT({type:a,uid:ii("context-toolbar"),initGroups:u,onEscape:k.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};t.on("contexttoolbar-show",(function(e){var n=y();Rt(n.lookupTable,e.toolbarKey).each((function(n){S([n],e.target===t?k.none():k.some(e)),ep.getContent(c).each(ug.focusIn)}))}));var w=function(t,e){var n,o,i="node"===t?r.backstage.shared.anchors.node(e):r.backstage.shared.anchors.cursor();return Lt(i,(n=t,o=u(),"line"===n?{bubble:zc(12,0,hE),layouts:{onLtr:function(){return[Gu]},onRtl:function(){return[Yu]}},overrides:vE}:{bubble:zc(0,12,hE),layouts:o?yE:bE,overrides:vE}))},S=function(t,e){var n,o,i,a;O(),u()&&r.backstage.isContextMenuOpen()||(n=x(t),o=e.map(pn.fromDom),i=w(t[0].position,o),p.set(k.some(i)),h.set(e),a=c.element,na(a,"display"),ep.showWithinBounds(c,i,b(n),(function(){return k.some(s())})),l()&&$i(a,"display","none"))},C=function(){var e,n,o,r,i,a,u;t.hasFocus()&&(e=y(),n=e,o=t,i=pn.fromDom(o.getBody()),a=function(t){return qn(t,i)},u=pn.fromDom(o.selection.getNode()),(a(r=u)||$n(i,r)?ED(u,n.inNodeScope,n.inEditorScope).orThunk((function(){return BD(a,u,n)})):k.none()).fold(f,(function(t){S(t.toolbars,k.some(t.elem.dom))})))},O=function(){var t=v.get();null!==t&&(mp.clearTimeout(t),v.set(null))},_=function(){O(),v.set(mp.setEditorTimeout(t,C,0))};t.on("init",(function(){t.on(Q_,m),t.on("ScrollContent ScrollWindow longpress",g),t.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){_()})),t.on("focusout",(function(e){mp.setEditorTimeout(t,(function(){hc(o.element).isNone()&&hc(c.element).isNone()&&f()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&f()})),t.on("AfterProgressState",(function(e){e.state?f():t.hasFocus()&&_()})),t.on("NodeChange",(function(t){hc(c.element).fold(_,n)}))}))},wE=Nf,SE=Of,CE=r([nn("shell",!1),Ne("makeItem"),nn("setupItem",n),ql("listBehaviours",[dg])]),kE=Sf({name:"items",overrides:function(){return{behaviours:ac([dg.config({})])}}}),OE=r([kE]),_E=$f({name:r("CustomList")(),configFields:CE(),partFields:OE(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[dg.config({})],components:[]}:{behaviours:[],components:e},i=function(e){return t.shell?k.some(e):Ff(e,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Yl(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){i(e).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=dg.contents(o),i=n.length,a=i-r.length,u=0<a?N(a,(function(){return t.makeItem()})):[],c=r.slice(i);G(c,(function(t){return dg.remove(o,t)})),G(u,(function(t){return dg.append(o,t)}));var s=dg.contents(o);G(s,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),TE=r([]),DE=Object.freeze({__proto__:null,setup:n,isDocked:s,getBehaviours:TE}),EE=function(t){return(ta(t,"position").is("fixed")?k.none():Tr(t)).orThunk((function(){var e=pn.fromTag("span");return Or(t).bind((function(t){Lr(t,e);var n=Tr(e);return Wr(e),n}))}))},BE=function(t){return EE(t).map(ka).getOrThunk((function(){return Sa(0,0)}))},AE=Ht([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),IE=function(t,e){var n=t.element;Vi(n,e.transitionClass),zi(n,e.fadeOutClass),Vi(n,e.fadeInClass),e.onShow(t)},ME=function(t,e){var n=t.element;Vi(n,e.transitionClass),zi(n,e.fadeInClass),Vi(n,e.fadeOutClass),e.onHide(t)},FE=function(t,e,n){return tt(t,(function(t){switch(t){case"bottom":return r=n,e.bottom<=r.bottom;case"top":return o=n,e.y>=o.y}var o,r}))},RE=function(t,e){return e.getInitialPosition().map((function(e){return za(e.bounds.x,e.bounds.y,Ta(t),ya(t))}))},PE=function(t,e,n){n.setInitialPosition(k.some({style:function(t){var e={},n=t.dom;if(Ui(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(t),position:Qi(t,"position")||"static",bounds:e}))},VE=function(t,e,n){return n.getInitialPosition().bind((function(o){switch(n.setInitialPosition(k.none()),o.position){case"static":return k.some(AE["static"]());case"absolute":var r=EE(t).map(ja).getOrThunk((function(){return ja(Gi())}));return k.some(AE.absolute(bc("absolute",Rt(o.style,"left").map((function(t){return e.x-r.x})),Rt(o.style,"top").map((function(t){return e.y-r.y})),Rt(o.style,"right").map((function(t){return r.right-e.right})),Rt(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return k.none()}}))},HE=function(t,e,n){var o,r,i,a=t.element;return ta(a,"position").is("fixed")?(r=e,RE(o=a,i=n).filter((function(t){return FE(i.getModes(),t,r)})).bind((function(t){return VE(o,t,i)}))):function(t,e,n){var o=ja(t);if(FE(n.getModes(),o,e))return k.none();PE(t,o,n);var r=Na(),i=o.x-r.x,a=e.y-r.y,u=r.bottom-e.bottom,c=o.y<=e.y;return k.some(AE.fixed(bc("fixed",k.some(i),c?k.some(a):k.none(),k.none(),c?k.none():k.some(u))))}(a,e,n)},zE=function(t,e){G(["left","right","top","bottom","position"],(function(e){return na(t.element,e)})),e.onUndocked(t)},jE=function(t,e,n){yc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},LE=function(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var a,u,c=(u=o,(a=i).y<u.bottom&&a.bottom>u.y);c!==n.isVisible()&&(n.setVisible(c),r&&!c?(Li(t.element,[e.fadeOutClass]),e.onHide(t)):(c?IE:ME)(t,e))}))}))},NE=function(t,e,o){var r,i,a=t.element;o.setDocked(!1),r=o,i=t.element,RE(i,r).bind((function(t){return VE(i,t,r)})).each((function(o){o.fold((function(){return zE(t,e)}),(function(n){return jE(t,e,n)}),n)})),o.setVisible(!0),e.contextual.each((function(e){Ni(a,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),UE(t,e,o)},UE=function(t,e,n){var o,r,i,a,u;t.getSystem().isConnected()&&(o=t,i=n,a=(r=e).lazyViewport(o),(u=i.isDocked())&&LE(o,r,i,a),HE(o,a,i).each((function(t){i.setDocked(!u),t.fold((function(){return zE(o,r)}),(function(t){return jE(o,r,t)}),(function(t){LE(o,r,i,a,!0),jE(o,r,t)}))})))},WE=function(t,e,n){n.isDocked()&&NE(t,e,n)},GE=Object.freeze({__proto__:null,refresh:UE,reset:WE,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),YE=Object.freeze({__proto__:null,events:function(t,e){return er([lr(xo(),(function(n,o){t.contextual.each((function(t){ji(n.element,t.transitionClass)&&(Ni(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()}))})),rr(Vo(),(function(n,o){UE(n,t,e)})),rr(Ho(),(function(n,o){WE(n,t,e)}))])}}),qE=[en("contextual",[We("fadeInClass"),We("fadeOutClass"),We("transitionClass"),Ye("lazyContext"),pu("onShow"),pu("onShown"),pu("onHide"),pu("onHidden")]),sn("lazyViewport",Na),ln("modes",["top","bottom"],Pe),pu("onDocked"),pu("onUndocked")],XE=cc({fields:qE,name:"docking",active:YE,apis:GE,state:Object.freeze({__proto__:null,init:function(t){var e=mn(!1),n=mn(!0),o=mn(k.none()),r=mn(t.modes);return Si({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),$E={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},KE="tox-tinymce--toolbar-sticky-on",JE="tox-tinymce--toolbar-sticky-off",QE=function(t){var e=t.element;Or(e).each((function(n){var o,r,i="padding-"+XE.getModes(t)[0];XE.isDocked(t)?(o=Ta(n),$i(e,"width",o+"px"),$i(n,i,xa(r=e)+(parseInt(Qi(r,"margin-top"),10)||0)+(parseInt(Qi(r,"margin-bottom"),10)||0)+"px")):(na(e,"width"),na(n,i))}))},ZE=function(t,e){e?(zi(t,$E.fadeOutClass),Li(t,[$E.transitionClass,$E.fadeInClass])):(zi(t,$E.fadeInClass),Li(t,[$E.fadeOutClass,$E.transitionClass]))},tB=function(t,e){var n=pn.fromDom(t.getContainer());e?(Vi(n,KE),zi(n,JE)):(Vi(n,JE),zi(n,KE))},eB=function(t,e){var n,o=mn(k.none()),r=e.getSink,i=function(t){r().each((function(e){return t(e.element)}))},a=function(e){t.inline||QE(e),tB(t,XE.isDocked(e)),e.getSystem().broadcastOn([Ol()],{}),r().each((function(t){return t.getSystem().broadcastOn([Ol()],{})}))},u=t.inline?[]:[dc.config({channels:((n={})[WT()]={onReceive:QE},n)})];return g([bg.config({}),XE.config({contextual:d({lazyContext:function(e){var n,o,r=xa(e.element),i=t.inline?t.getContentAreaContainer():t.getContainer(),a=ja(pn.fromDom(i)),u=a.height-r,c=a.y+(n=e,o="top",j(XE.getModes(n),o)?0:r);return k.some(za(a.x,c,a.width,u))},onShow:function(){i((function(t){return ZE(t,!0)}))},onShown:function(t){i((function(t){return Ni(t,[$E.transitionClass,$E.fadeInClass])})),o.get().each((function(e){var n,r,i;n=t.element,i=wr(r=e),pc(i).filter((function(t){return!qn(r,t)})).filter((function(t){return qn(t,pn.fromDom(i.dom.body))||$n(n,t)})).each((function(){return gc(r)})),o.set(k.none())}))},onHide:function(t){var e,n;o.set((e=t.element,n=r,hc(e).orThunk((function(){return n().toOptional().bind((function(t){return hc(t.element)}))})))),i((function(t){return ZE(t,!1)}))},onHidden:function(){i((function(t){return Ni(t,[$E.transitionClass])}))}},$E),modes:[e.header.getDockingMode()],onDocked:a,onUndocked:a})],u)},nB=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(XE.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(QE)})),t.on("SkinLoaded",(function(){n().each((function(t){XE.isDocked(t)?XE.reset(t):XE.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(XE.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){XE.refresh(e);var n,o,r,i,a,u,c,s,l,f,d,m,g,p,h,v,b,y=e.element;em(y)&&(n=t,i=wr(o=y),a=i.dom.defaultView.innerHeight,u=Ia(i),c=pn.fromDom(n.elm),s=La(c),l=ya(c),f=s.y,d=f+l,m=ka(o),g=ya(o),p=m.top,h=p+g,v=Math.abs(p-u.top)<2,b=Math.abs(h-(u.top+a))<2,v&&f<h?Ma(u.left,f-g,i):b&&p<d&&(r=f-a+l+g,Ma(u.left,r,i)))}))})),t.on("PostRender",(function(){tB(t,!1)}))},isDocked:function(t){return t().map(XE.isDocked).getOr(!1)},getBehaviours:eB}),oB=Xf({factory:function(t,e){var n={focus:ug.focusIn,setMenus:function(t,n){var o=W(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},o=eD(n).mapError((function(t){return Be(t)})).getOrDie();return Wk(o,"tox-mbtn",e.backstage,k.some("menuitem"))}));dg.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:ac([dg.config({}),mg("menubar-events",[fr((function(e){t.onSetup(e)})),rr(fo(),(function(t,e){Ka(t.element,".tox-mbtn--active").each((function(n){Ja(e.event.target,".tox-mbtn").each((function(e){qn(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){iw.expand(t),iw.close(n),bg.focus(t)}))}))}))}))})),rr(Uo(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){iw.isOpen(n)&&(iw.expand(t),iw.close(n))}))}))}))]),ug.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),k.some(!0)}}),$y.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ne("dom"),Ne("uid"),Ne("onEscape"),Ne("backstage"),nn("onSetup",n)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),rB="container",iB=[Wl("slotBehaviours",[])],aB=function(t){return"<alloy.field."+t+">"},uB=function(t,e){var n,o=function(e){return Hf(t)},r=function(e,n){return function(o,r){return Ff(o,t,r).map((function(t){return e(t,r)})).getOr(n)}},i=function(t,e){return"true"!==Kr(t.element,"aria-hidden")},a=r(i,!1),u=r((function(t,e){var n;i(t)&&(n=t.element,$i(n,"display","none"),$r(n,"aria-hidden","true"),Ko(t,Wo(),{name:e,visible:!1}))})),c=function(t,e){G(e,(function(e){return n(t,e)}))},s=r((function(t,e){var n;i(t)||(n=t.element,na(n,"display"),Zr(n,"aria-hidden"),Ko(t,Wo(),{name:e,visible:!0}))})),l={getSlotNames:o,getSlot:function(e,n){return Ff(e,t,n)},isShowing:a,hideSlot:n=u,hideAllSlots:function(t){return c(t,o())},showSlot:s};return{uid:t.uid,dom:t.dom,components:e,behaviours:Gl(t.slotBehaviours),apis:l}},cB=Et({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},xi),sB=d(d({},cB),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),Ef(rB,aB(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=W(r,(function(t){return xf({name:t,pname:aB(t)})}));return Wf(rB,iB,i,uB,o)}}),lB=de([Ze("icon"),Ze("tooltip"),sn("onShow",n),sn("onHide",n),sn("onSetup",(function(){return n}))]),fB=function(t){return{element:function(){return t.element.dom}}},dB=function(t,e){var o=W(_t(e),(function(t){var n=e[t],o=De(Te("sidebar",lB,n));return{name:t,getApi:fB,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return W(o,(function(e){var r=mn(n);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Gh([Kv(e,r),Jv(e,r),rr(Wo(),(function(t,e){var n=e.event;K(o,(function(t){return t.name===n.name})).each((function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},mB=function(t,e){ed.getCurrent(t).each((function(t){return dg.set(t,[(n=e,sB.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:dB(t,n),slotBehaviours:Gh([fr((function(t){return sB.hideAllSlots(t)}))])}})))]);var n}))},gB=function(t){return ed.getCurrent(t).bind((function(t){return HT.isGrowing(t)||HT.hasGrown(t)?ed.getCurrent(t).bind((function(t){return K(sB.getSlotNames(t),(function(e){return sB.isShowing(t,e)}))})):k.none()}))},pB=ii("FixSizeEvent"),hB=ii("AutoSizeEvent"),vB=function(t){var e,n,o,r=pn.fromHtml(t),i=Dr(r),a=(n=void 0!==(e=r).dom.attributes?e.dom.attributes:[],$(n,(function(t,e){var n;return"class"===e.name?t:d(d({},t),((n={})[e.name]=e.value,n))}),{})),u=(o=r,Array.prototype.slice.call(o.dom.classList,0)),c=0===i.length?{}:{innerHtml:Yr(r)};return d({tag:pr(r),classes:u,attributes:a},c)},bB=function(t,e,n){var o=t.element;!0===e?(dg.set(t,[{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:vB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:ac([ug.config({mode:"special",onTab:function(){return k.some(!0)},onShiftTab:function(){return k.some(!0)}}),bg.config({})])}]),na(o,"display"),Zr(o,"aria-hidden")):(dg.set(t,[]),$i(o,"display","none"),$r(o,"aria-hidden","true"))},yB=SE.optional({factory:oB,name:"menubar",schema:[Ne("backstage")]}),xB=SE.optional({factory:{sketch:function(t){return _E.sketch({uid:t.uid,dom:t.dom,listBehaviours:ac([ug.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return JT({type:t.type,uid:ii("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),k.some(!0)}})},setupItem:function(t,e,n,o){eT.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[Ne("dom"),Ne("onEscape")]}),wB=SE.optional({factory:{sketch:function(t){var e;return((e=t).type===ih.sliding?KT:e.type===ih.floating?$T:JT)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),k.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[Ne("dom"),Ne("onEscape"),Ne("getSink")]}),SB=SE.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?eB:TE;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ac(n(e,t.sharedBackstage))}}},name:"header",schema:[Ne("dom")]}),CB=SE.optional({name:"socket",schema:[Ne("dom")]}),kB=SE.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ac([$y.config({}),bg.config({}),HT.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){ed.getCurrent(t).each(sB.hideAllSlots),$o(t,hB)},onGrown:function(t){$o(t,hB)},onStartGrow:function(t){Ko(t,pB,{width:ta(t.element,"width").getOr("")})},onStartShrink:function(t){Ko(t,pB,{width:Ta(t.element)+"px"})}}),dg.config({}),ed.config({find:function(t){var e=dg.contents(t);return it(e)}})])}],behaviours:ac([sC(0),mg("sidebar-sliding-events",[rr(pB,(function(t,e){$i(t.element,"width",e.event.width)})),rr(hB,(function(t,e){na(t.element,"width")}))])])}}},name:"sidebar",schema:[Ne("dom")]}),OB=SE.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ac([dg.config({})]),components:[]}}},name:"throbber",schema:[Ne("dom")]}),_B=$f({name:"OuterContainer",factory:function(t,e,n){var o={getSocket:function(e){return wE.getPart(e,t,"socket")},setSidebar:function(e,n){wE.getPart(e,t,"sidebar").each((function(t){return mB(t,n)}))},toggleSidebar:function(e,n){wE.getPart(e,t,"sidebar").each((function(t){return e=t,o=n,void ed.getCurrent(e).each((function(t){ed.getCurrent(t).each((function(e){HT.hasGrown(t)?sB.isShowing(e,o)?HT.shrink(t):(sB.hideAllSlots(e),sB.showSlot(e,o)):(sB.hideAllSlots(e),sB.showSlot(e,o),HT.grow(t))}))}));var e,o}))},whichSidebar:function(e){return wE.getPart(e,t,"sidebar").bind(gB).getOrNull()},getHeader:function(e){return wE.getPart(e,t,"header")},getToolbar:function(e){return wE.getPart(e,t,"toolbar")},setToolbar:function(e,n){wE.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){wE.getPart(e,t,"multiple-toolbar").each((function(t){_E.setItems(t,n)}))},refreshToolbar:function(e){wE.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){wE.getPart(e,t,"toolbar").each((function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},void 0!==e&&null!==e?k.some(n(e)):k.none()}))},isToolbarDrawerToggled:function(e){return wE.getPart(e,t,"toolbar").bind((function(t){return k.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return wE.getPart(e,t,"throbber")},focusToolbar:function(e){wE.getPart(e,t,"toolbar").orThunk((function(){return wE.getPart(e,t,"multiple-toolbar")})).each((function(t){ug.focusIn(t)}))},setMenubar:function(e,n){wE.getPart(e,t,"menubar").each((function(t){oB.setMenus(t,n)}))},focusMenubar:function(e){wE.getPart(e,t,"menubar").each((function(t){oB.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:o,behaviours:t.behaviours}},configFields:[Ne("dom"),Ne("behaviours")],partFields:[SB,yB,wB,xB,CB,kB,OB],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=W(n,YT);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=W(n,(function(t){return W(t,YT)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),TB={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},DB=function(t){return"string"==typeof t?t.split(" "):t},EB=function(t,e){var n=d(d({},TB),e.menus),o=0<_t(e.menus).length,r=void 0===e.menubar||!0===e.menubar?DB("file edit view insert format tools table help"):DB(!1===e.menubar?"":e.menubar),i=q(r,(function(t){return o&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||TB.hasOwnProperty(t)})),a=W(i,(function(o){var r,i,a,u=n[o];return r={title:u.title,items:DB(u.items)},i=e,a=t.getParam("removed_menuitems","").split(/[ ,]/),{text:r.title,getItems:function(){return Z(r.items,(function(t){var e=t.toLowerCase();return 0===e.trim().length||L(a,(function(t){return t===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:i.menuItems[e]?[i.menuItems[e]]:[]}))}}}));return q(a,(function(t){return 0<t.getItems().length&&L(t.getItems(),(function(t){return"separator"!==t.type}))}))},BB=function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}},AB=function(t,e){return function(){return n={message:e},t.fire("SkinLoadError",n);var n}},IB=function(t,e,n){return new Fp((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))},MB=function(t,e){var n;return n=pn.fromDom(t.getElement()),Rr(n).isSome()?IB(t,e+"/skin.shadowdom.min.css",tv.DOM.styleSheetLoader):Fp.resolve()},FB=function(t,e){var n,o,r,i,a,u=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):hv.baseURL+"/skins/ui/"+o),i);u&&e.contentCSS.push(u+(t?"/content.inline":"/content")+".min.css"),0==(!1===e.getParam("skin"))&&T(u)?Fp.all([IB(a=e,u+"/skin.min.css",a.ui.styleSheetLoader),MB(e,u)]).then(BB(e),AB(e,"Skin could not be loaded")):BB(e)()},RB=a(FB,!1),PB=a(FB,!0),VB=function(t,e,n,o){var r,i=e.outerContainer,a=n.toolbar,u=n.buttons;R(a,T)?(r=a.map((function(e){var r={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return pE(t,r,{backstage:o},k.none())})),_B.setToolbars(i,r)):_B.setToolbar(i,pE(t,n,{backstage:o},k.none()))},HB=Wn(),zB=HB.os.isiOS()&&HB.os.version.major<=12,jB=function(t,e){var n=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=mn(Sa(o.innerWidth,o.innerHeight)),a=mn(Sa(r.offsetWidth,r.offsetHeight)),u=function(){var e=i.get();e.left===o.innerWidth&&e.top===o.innerHeight||(i.set(Sa(o.innerWidth,o.innerHeight)),Pb(t))},c=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(Sa(e.offsetWidth,e.offsetHeight)),Pb(t))},s=function(e){return n=e,t.fire("ScrollContent",n);var n};n.bind(o,"resize",u),n.bind(o,"scroll",s);var l=Oy(pn.fromDom(t.getBody()),"load",c),f=e.uiMothership.element;t.on("hide",(function(){$i(f,"display","none")})),t.on("show",(function(){na(f,"display")})),t.on("NodeChange",c),t.on("remove",(function(){l.unbind(),n.unbind(o,"resize",u),n.unbind(o,"scroll",s),o=null}))},LB=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=mn(0),a=e.outerContainer;RB(t);var u,c,s=pn.fromDom(r.targetNode),l=Fr(Mr(s));u=s,c=e.mothership,dl(u,c,zr),fl(l,e.uiMothership),t.on("PostRender",(function(){VB(t,e,n,o),i.set(t.getWin().innerWidth),_B.setMenubar(a,EB(t,n)),_B.setSidebar(a,n.sidebar),jB(t,e)}));var f,d,m,g,p,h=_B.getSocket(a).getOrDie("Could not find expected socket element");zB&&(Ki(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),m=function(){t.fire("ScrollContent")},g=20,p=null,f={cancel:function(){null!==p&&(clearTimeout(p),p=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===p&&(p=setTimeout((function(){m.apply(null,t),p=null}),g))}},d=ky(h.element,"scroll",f.throttle),t.on("remove",d.unbind)),Uv(t,e),t.addCommand("ToggleSidebar",(function(e,n){_B.toggleSidebar(a,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return _B.whichSidebar(a)}));var v=Ev(t);v!==ih.sliding&&v!==ih.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(_B.refreshToolbar(e.outerContainer),i.set(n))}));var b={enable:function(){Nv(e,!1)},disable:function(){Nv(e,!0)},isDisabled:function(){return pv.isDisabled(a)}};return{iframeContainer:h.element.dom,editorContainer:a.element.dom,api:b}}}),NB=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none()},UB=function(t){return F(t)?t+"px":t},WB=function(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return e<t}));return o.or(r).getOr(t)},GB=function(t){var e,n,o,r;return(n=vv(e=t),o=xv(e),r=Sv(e),NB(n).map((function(t){return WB(t,o,r)}))).getOr(vv(t))},YB=function(t){var e=bv(t),n=yv(t),o=wv(t);return NB(e).map((function(t){return WB(t,n,o)}))},qB=function(t,e,n,o,r){var i=n.uiMothership,a=n.outerContainer,u=tv.DOM,c=Pv(t),s=zv(t),l=wv(t).or(YB(t)),f=o.shared.header,d=f.isPositionedAtTop,m=Ev(t),g=m===ih.sliding||m===ih.floating,p=mn(!1),h=function(){return p.get()&&!t.removed},v=function(t){return g?t.fold((function(){return 0}),(function(t){return 1<t.components().length?ya(t.components()[1].element):0})):0},b=function(){i.broadcastOn([Ol()],{})},y=function(t){var n,o,i,u,f,m;void 0===t&&(t=!1),h()&&(c||(n=l.getOrThunk((function(){var t=NB(Qi(Gi(),"margin-left")).getOr(0);return Ta(Gi())-ka(e).left+t})),$i(r.get().element,"max-width",n+"px")),g&&_B.refreshToolbar(a),c||(o=_B.getToolbar(a),i=v(o),u=ja(e),f=d()?Math.max(u.y-ya(r.get().element)+i,0):u.bottom,Ki(a.element,{position:"absolute",top:Math.round(f)+"px",left:Math.round(u.x)+"px"})),s&&(m=r.get(),t?XE.reset(m):XE.refresh(m)),b())},x=function(n){var o,i;void 0===n&&(n=!0),!c&&s&&h()&&(o=f.getDockingMode(),(i=function(n){switch(Mv(t)){case Tv.auto:var o=_B.getToolbar(a),r=v(o),i=ya(n.element)-r,u=ja(e);if(u.y>i)return"top";var c=Cr(e),s=Math.max(c.dom.scrollHeight,ya(c));return u.bottom<s-i||Na().bottom<u.bottom-i?"bottom":"top";case Tv.bottom:return"bottom";case Tv.top:default:return"top"}}(r.get()))!==o&&(function(t){var e=r.get();XE.setModes(e,[t]),f.setDockingMode(t);var n=d()?nu.TopToBottom:nu.BottomToTop;$r(e.element,Xc,n)}(i),n&&y(!0)))};return{isVisible:h,isPositionedAtTop:d,show:function(){p.set(!0),$i(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),na(i.element,"display"),x(!1),y()},hide:function(){p.set(!1),n.outerContainer&&($i(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),$i(i.element,"display","none")},update:y,updateMode:x,repositionPopups:b}},XB=function(t,e){var n=ja(t);return{pos:e?n.y:n.bottom,bounds:n}},$B=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,c=mn(null),s=pn.fromDom(r.targetNode),l=qB(t,s,e,o,c),f=t.getParam("toolbar_persist",!1,"boolean");PB(t);var d=function(){var r;c.get()?l.show():(c.set(_B.getHeader(u).getOrDie()),r=Vv(t),fl(r,i),fl(r,a),VB(t,e,n,o),_B.setMenubar(u,EB(t,n)),l.show(),function(t,e,n,o){var r=mn(XB(e,n.isPositionedAtTop())),i=function(o){var i=XB(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,c=r.get(),s=c.pos,l=c.bounds,f=u.height!==l.height||u.width!==l.width;r.set({pos:a,bounds:u}),f&&Pb(t,o),n.isVisible()&&(s!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){mp.requestAnimationFrame((function(){return i(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var a=rE();a.set(Oy(pn.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){a.clear()}))}(t,s,l,f),t.nodeChanged())};t.on("show",d),t.on("hide",l.hide),f||(t.on("focus",d),t.on("blur",l.hide)),t.on("init",(function(){(t.hasFocus()||f)&&d()})),Uv(t,e);var m={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Nv(e,!1)},disable:function(){Nv(e,!0)},isDisabled:function(){return pv.isDisabled(u)}};return{editorContainer:u.element.dom,api:m}}}),KB=function(t,e){var n,o,r,i,a,u,c,s,l,f,m,g,p,h;r=PD(0,o=e,YD(n=t)),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}}),u=PD(0,a=e,KD(i=t)),i.ui.registry.addNestedMenuItem("fontformats",{text:a.shared.providers.translate("Fonts"),getSubmenuItems:function(){return u.items.validateItems(u.getStyleItems())}}),c=t,l=d({type:"advanced"},(s=e).styleselect),f=PD(0,s,cE(c,l)),c.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),g=PD(0,e,uE(m=t)),m.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return g.items.validateItems(g.getStyleItems())}}),h=PD(0,e,tE(p=t)),p.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return h.items.validateItems(h.getStyleItems())}})},JB={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},QB=(zD="[eE][+-]?[0-9]+",LD=["Infinity",(HD="[0-9]+")+"\\."+(jD=function(t){return"(?:"+t+")?"})(HD)+jD(zD),"\\."+HD+jD(zD),HD+jD(zD)].join("|"),new RegExp("^([+-]?(?:"+LD+"))(.*)$")),ZB=function(t,e){return k.from(QB.exec(t)).bind((function(t){var n,o=Number(t[1]),r=t[2];return n=r,L(e,(function(t){return L(JB[t],(function(t){return n===t}))}))?k.some({value:o,unit:r}):k.none()}))},tA=function(t){return ZB(t,["fixed","relative","empty"]).map((function(t){return t.value+t.unit})).getOr(t)},eA=function(t){var e=t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" "),n=new Map,o=oE(),r=function(){var e=tA(t.queryCommandValue("LineHeight"));k.from(n.get(e)).fold((function(){return o.clear()}),(function(t){o.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)}))};return t.on("nodeChange",r),W(e,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(tA(i),u),a+1===e.length&&r(),function(){0===a&&(t.off("nodeChange",r),o.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}}))},nA=function(t){var e,n;(e=t).ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return eA(e)}}),(n=t).ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(eA(n))}})},oA=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},rA=function(t){var e,n;!function(t){mC.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:iE(t,e.name),onAction:oA(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:iE(t,n),onAction:oA(t,n)})}}(t),e=t,mC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})),n=t,mC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:iE(n,t.name)})}))},iA=function(t){var e;rA(t),e=t,mC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:oA(e,"code")})},aA=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},uA=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return aA(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return aA(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return aA(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return aA(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},cA=function(t,e){var n,o,r,i;!function(t){mC.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:iE(t,e.name)})}));var e="alignnone",n="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(o)},icon:r})}(t),iA(t),KB(t,e),uA(t),function(t){Gb(t);var e=mn(null),n=mn(null);Jb(t,"forecolor","forecolor","Text color",e),Jb(t,"backcolor","hilitecolor","Background color",n),Qb(t,"forecolor","forecolor","Text color"),Qb(t,"backcolor","hilitecolor","Background color")}(t),(o=n=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return o.execCommand("mceToggleVisualAid")}}),(r=n).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(t,r)},onAction:function(){r.execCommand("mceToggleVisualAid")}}),(i=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(t,i)},onAction:function(){return i.execCommand("outdent")}}),i.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return i.execCommand("indent")}}),nA(t)},sA=function(t,e){return{anchor:"makeshift",x:t,y:e}},lA=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},fA=function(t,e){var n,o,r,i=tv.DOM.getPos(t);return n=e,o=i.x,r=i.y,sA(n.x+o,n.y+r)},dA=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(lA(t)){var e=t.touches[0];return sA(e.pageX,e.pageY)}return sA(t.pageX,t.pageY)}(e):fA(t.getContentAreaContainer(),function(t){if(lA(t)){var e=t.touches[0];return sA(e.clientX,e.clientY)}return sA(t.clientX,t.clientY)}(e)):mA(t)},mA=function(t){return{anchor:"selection",root:pn.fromDom(t.selection.getNode())}},gA=function(t){return{anchor:"node",node:k.some(pn.fromDom(t.selection.getNode())),root:pn.fromDom(t.getBody())}},pA=function(t,e,n,o,r,i){var a=n(),u=i?gA(t):dA(t,e);Nk(a,uh.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),ep.showMenuAt(r,u,{menu:{markers:xh("normal")},data:t})}))},hA={onLtr:function(){return[Wu,zu,ju,Lu,Nu,Uu,fp,dp,sp,up,lp,cp]},onRtl:function(){return[Wu,ju,zu,Nu,Lu,Uu,fp,dp,lp,cp,sp,up]}},vA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bA=function(t,e,n,o,r,i,a){var u,c,s=i?gA(t):(u=t,c=e,d({bubble:zc(0,12,vA),layouts:hA,overrides:{maxWidthFunction:J_(),maxHeightFunction:Fc()}},dA(u,c)));Nk(n,uh.CLOSE_ON_EXECUTE,o,!0).map((function(n){e.preventDefault(),ep.showMenuWithinBounds(r,s,{menu:{markers:xh("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return k.some(TD(t,o.shared))})),t.fire(Q_)}))},yA=function(t,e,n,o,r,i){var a,u=Wn(),c=u.os.isiOS(),s=u.os.isOSX(),l=u.os.isAndroid(),f=u.deviceType.isTouch(),d=function(){var a=n();bA(t,e,a,o,r,i,!(l||c||s&&f))};!s&&!c||i?(l&&!i&&t.selection.setCursorLocation(e.target,0),d()):(a=function(){!function(t){var e=t.selection.getRng(),n=function(){mp.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(t),d()},function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Is(t.getWin(),ps.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)}))))},xA=function(t){return"string"==typeof t?t.split(/[ ,]/):t},wA=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},SA=function(t){return n="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(e=t).ui.registry.getAll().contextMenus,k.from(e.getParam(n)).map(xA).getOrThunk((function(){return q(xA(o),(function(t){return Pt(r,t)}))}));var e,n,o,r},CA=function(t){return T(t)?"|"===t:"separator"===t.type},kA={type:"separator"},OA=function t(e){if(T(e))return e;switch(e.type){case"separator":return kA;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var n=e.getSubmenuItems();return T(n)?n:W(n,t)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){return n()})}}var n},_A=function(t,e){if(0===e.length)return t;var n=at(t).filter((function(t){return!CA(t)})).fold((function(){return[]}),(function(t){return[kA]}));return t.concat(n).concat(e).concat([kA])},TA=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},DA=function(t,e){return TA(t,e)?t.selection.getStart(!0):e.target},EA=function(t,e,n){var o=Wn().deviceType.isTouch,r=pa(ep.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ac([mg("dismissContextMenu",[rr(Lo(),(function(e,n){Cl.close(e),t.focus()}))])])})),i=function(t){return ep.hide(r)},a=function(e){var i,a;wA(t)&&e.preventDefault(),i=t,e.ctrlKey&&!wA(i)||!1===t.getParam("contextmenu")||(a=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string");if(TA(t,e))return!0;if(n){var o=DA(t,e);return Ty(pn.fromDom(o),n)}return!1}(t,e),(o()?yA:pA)(t,e,(function(){var n,o,r,i=DA(t,e),a=t.ui.registry.getAll(),u=SA(t);return n=a.contextMenus,o=i,0<(r=$(u,(function(t,e){if(Pt(n,e)){var r=n[e].update(o);if(T(r))return _A(t,r.split(" "));if(0<r.length){var i=W(r,OA);return _A(t,i)}return t}return t.concat([e])}),[])).length&&CA(r[r.length-1])&&r.pop(),r}),n,r,a))};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,i),t.on("longpress contextmenu",a)}))},BA=Ht([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AA=function(t){return function(e){return e.translate(-t.left,-t.top)}},IA=function(t){return function(e){return e.translate(t.left,t.top)}},MA=function(t){return function(e,n){return $(t,(function(t,e){return e(t)}),Sa(e,n))}},FA=function(t,e,n){return t.fold(MA([IA(n),AA(e)]),MA([AA(e)]),MA([]))},RA=function(t,e,n){return t.fold(MA([IA(n)]),MA([]),MA([IA(e)]))},PA=function(t,e,n){return t.fold(MA([]),MA([AA(n)]),MA([IA(e),AA(n)]))},VA=function(t,e,n){var o=t.fold((function(t,e){return{position:k.some("absolute"),left:k.some(t+"px"),top:k.some(e+"px")}}),(function(t,e){return{position:k.some("absolute"),left:k.some(t-n.left+"px"),top:k.some(e-n.top+"px")}}),(function(t,e){return{position:k.some("fixed"),left:k.some(t+"px"),top:k.some(e+"px")}}));return d({right:k.none(),bottom:k.none()},o)},HA=function(t,e,n,o){var r=function(t,r){return function(i,a){var u=t(e,n,o);return r(i.getOr(u.left),a.getOr(u.top))}};return t.fold(r(PA,zA),r(RA,jA),r(FA,LA))},zA=BA.offset,jA=BA.absolute,LA=BA.fixed,NA=function(t,e){var n=Kr(t,e);return A(n)?NaN:parseInt(n,10)},UA=function(t,e,n,o){return r=e,i=t.element,a=NA(i,r.leftAttr),u=NA(i,r.topAttr),(isNaN(a)||isNaN(u)?k.none():k.some(Sa(a,u))).fold((function(){return n}),(function(t){return LA(t.left+o.left,t.top+o.top)}));var r,i,a,u},WA=function(t,e,n,o,r,i){var a,u,c,s=UA(t,e,n,o),l=(e.mustSnap?qA:XA)(t,e,s,r,i),f=FA(s,r,i);return a=e,u=f,c=t.element,$r(c,a.leftAttr,u.left+"px"),$r(c,a.topAttr,u.top+"px"),l.fold((function(){return{coord:LA(f.left,f.top),extra:k.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))},GA=function(t,e){var n,o;n=e,o=t.element,Zr(o,n.leftAttr),Zr(o,n.topAttr)},YA=function(t,e,n,o){return ct(t,(function(t){var r,i,a,u,c,s,l,f,d=t.sensor;return r=e,i=d,a=t.range.left,u=t.range.top,l=RA(r,c=n,s=o),f=RA(i,c,s),Math.abs(l.left-f.left)<=a&&Math.abs(l.top-f.top)<=u?k.some({output:HA(t.output,e,n,o),extra:t.extra}):k.none()}))},qA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return YA(i,n,o,r).orThunk((function(){return $(i,(function(t,e){var i,a,u,c,s,l,f,d,m=e.sensor,g=(i=n,a=m,e.range.left,e.range.top,s=RA(i,u=o,c=r),l=RA(a,u,c),f=Math.abs(s.left-l.left),d=Math.abs(s.top-l.top),Sa(f,d));return t.deltas.fold((function(){return{deltas:k.some(g),snap:k.some(e)}}),(function(n){return(g.left+g.top)/2<=(n.left+n.top)/2?{deltas:k.some(g),snap:k.some(e)}:t}))}),{deltas:k.none(),snap:k.none()}).snap.map((function(t){return{output:HA(t.output,n,o,r),extra:t.extra}}))}))},XA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return YA(i,n,o,r)},$A=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,a,u,c,s,l,f,d=e.getTarget(t.element);e.repositionTarget&&(r=wr(t.element),i=Ia(r),a=BE(d),l=i,f=a,u={coord:HA((s=o).output,s.output,l,f),extra:s.extra},c=VA(u.coord,0,a),Ji(d,c))}}),KA="data-initial-z-index",JA=function(t,e){var n;t.getSystem().addToGui(e),Or((n=e).element).filter(vr).each((function(t){ta(t,"z-index").each((function(e){$r(t,KA,e)})),$i(t,"z-index",Qi(n.element,"z-index"))}))},QA=function(t){Or(t.element).filter(vr).each((function(t){Jr(t,KA).fold((function(){return na(t,"z-index")}),(function(e){return $i(t,"z-index",e)})),Zr(t,KA)})),t.getSystem().removeFromGui(t)},ZA=function(t,e,n){return t.getSystem().build(Ny.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},tI=en("snaps",[Ne("getSnapPoints"),pu("onSensor"),Ne("leftAttr"),Ne("topAttr"),nn("lazyViewport",Na),nn("mustSnap",!1)]),eI=[nn("useFixed",s),Ne("blockerClass"),nn("getTarget",i),nn("onDrag",n),nn("repositionTarget",!0),nn("onDrop",n),sn("getBounds",Na),tI],nI=function(t){return e=ta(t,"left"),n=ta(t,"top"),o=ta(t,"position"),r=function(t,e,n){return("fixed"===n?LA:zA)(parseInt(t,10),parseInt(e,10))},(e.isSome()&&n.isSome()&&o.isSome()?k.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):k.none()).getOrThunk((function(){var e=ka(t);return jA(e.left,e.top)}));var e,n,o,r},oI=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,m,g,p,h=e.fold((function(){var t,e,a,u=(t=n,e=i.left,a=i.top,t.fold((function(t,n){return zA(t+e,n+a)}),(function(t,n){return jA(t+e,n+a)}),(function(t,n){return LA(t+e,n+a)}))),c=FA(u,o,r);return LA(c.left,c.top)}),(function(e){var a=WA(t,e,n,i,o,r);return a.extra.each((function(n){e.onSensor(t,n)})),a.coord}));return u=h,c=o,s=r,f=(l=a).bounds,d=RA(u,c,s),m=Tc(d.left,f.x,f.x+f.width-l.width),g=Tc(d.top,f.y,f.y+f.height-l.height),p=jA(m,g),u.fold((function(){var t=PA(p,c,s);return zA(t.left,t.top)}),(function(){return p}),(function(){var t=FA(p,c,s);return LA(t.left,t.top)}))},rI=function(t,e){return{bounds:t.getBounds(),height:xa(e.element),width:Da(e.element)}},iI=function(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk((function(){return rI(e,t)}));i.each((function(n){var o,r,i,u,c,s,l,f,d,m,g;o=t,i=a,u=n,g=(r=e).getTarget(o.element),r.repositionTarget&&(c=wr(o.element),s=Ia(c),l=BE(g),f=nI(g),d=oI(o,r.snaps,f,s,l,u,i),m=VA(d,0,l),Ji(g,m)),r.onDrag(o,g,u)}))},aI=function(t,e,n,o){e.each(QA),n.snaps.each((function(e){GA(t,e)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)},uI=function(t){return function(e,n){var o=function(t){n.setStartData(rI(e,t))};return er(g([rr(Vo(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o)))}},cI=Object.freeze({__proto__:null,getData:function(t){return k.from(Sa(t.x,t.y))},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),sI=function(t,e,n){return[rr(uo(),(function(o,r){var i,a,u,c,s;0===r.event.raw.button&&(r.stop(),u={drop:i=function(){return aI(o,k.some(c),t,e)},delayDrop:(a=Dy(i,200)).schedule,forceDrop:i,move:function(n){a.cancel(),iI(o,t,e,cI,n)}},c=ZA(o,t.blockerClass,(s=u,er([rr(uo(),s.forceDrop),rr(lo(),s.drop),rr(co(),(function(t,e){s.move(e.event)})),rr(so(),s.delayDrop)]))),n(o),JA(o,c))}))]},lI=g(eI,[yu("dragger",{handlers:uI(sI)})]),fI=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],k.some(Sa(e.clientX,e.clientY))):k.none()},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),dI=function(t,e,o){var r=mn(k.none());return[rr(oo(),(function(i,a){a.stop();var u,c=function(){aI(i,r.get(),t,e),r.set(k.none())},s={drop:c,delayDrop:n,forceDrop:c,move:function(n){iI(i,t,e,fI,n)}},l=ZA(i,t.blockerClass,(u=s,er([rr(oo(),u.forceDrop),rr(io(),u.drop),rr(ao(),u.drop),rr(ro(),(function(t,e){u.move(e.event)}))])));r.set(k.some(l)),o(i),JA(i,l)})),rr(ro(),(function(n,o){o.stop(),iI(n,t,e,fI,o.event)})),rr(io(),(function(n,o){o.stop(),aI(n,r.get(),t,e),r.set(k.none())})),rr(ao(),(function(n){aI(n,r.get(),t,e),r.set(k.none())}))]},mI=g(eI,[yu("dragger",{handlers:uI(dI)})]),gI=g(eI,[yu("dragger",{handlers:uI((function(t,e,n){return g(sI(t,e,n),dI(t,e,n))}))})]),pI=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:lI,touch:mI,mouseOrTouch:gI}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=k.none(),e=k.none(),n=r({});return Si({readState:n,reset:function(){t=k.none(),e=k.none()},update:function(e,n){return e.getData(n).bind((function(n){return o=e,r=n,i=t.map((function(t){return o.getDelta(t,r)})),t=k.some(r),i;var o,r,i}))},getStartData:function(){return e},setStartData:function(t){e=k.some(t)}})}}),apis:$A}),hI=function(t,e,n,o,r,i){return t.fold((function(){return pI.snap({sensor:jA(n-20,o-20),range:Sa(r,i),output:jA(k.some(n),k.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,a=t.element.dom.getBoundingClientRect();return pI.snap({sensor:jA(r,i),range:Sa(40,40),output:jA(k.some(n-a.width/2),k.some(o-a.height/2)),extra:{td:e}})}))},vI=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r,i,a=o.td;r=e.get(),i=a,r.exists((function(t){return qn(t,i)}))||(e.set(k.some(a)),n(a))},mustSnap:!0}},bI=function(t){return pp(gp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ac([pI.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),aw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},yI=function(t,e){var n=mn([]),o=mn([]),r=mn(!1),i=mn(k.none()),a=mn(k.none()),u=function(t){var n=La(t);return hI(f.getOpt(e),t,n.x,n.y,n.width,n.height)},c=function(t){var n=La(t);return hI(d.getOpt(e),t,n.right,n.bottom,n.width,n.height)},s=vI((function(){return W(n.get(),u)}),i,(function(e){a.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),l=vI((function(){return W(o.get(),c)}),a,(function(e){i.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=bI(s),d=bI(l),m=pa(f.asSpec()),g=pa(d.asSpec()),p=function(e,n,o,r){var i=o(n);pI.snapTo(e,i),function(e,n,o,r){var i=n.dom.getBoundingClientRect();na(e.element,"display");var a=kr(pn.fromDom(t.getBody())).dom.innerHeight,u=o(i),c=r(i,a);(u||c)&&$i(e.element,"display","none")}(e,n,(function(t){return t[r]<0}),(function(t,e){return t[r]>e}))},h=function(t){return p(m,t,u,"top")},v=function(t){return p(g,t,c,"bottom")};Wn().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){r.get()||(al(e,m),al(e,g),r.set(!0)),i.set(k.some(t.start)),a.set(k.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),o.set(e.downOrRightCells),h(t.start),v(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(h),a.get().each(v)})),t.on("TableSelectionClear",(function(){r.get()&&(sl(m),sl(g),r.set(!1)),i.set(k.none()),a.set(k.none())})))};(UD=ND=ND||{})[UD.None=0]="None",UD[UD.Both=1]="Both",UD[UD.Vertical=2]="Vertical";var xI,wI,SI,CI=function(t,e,n){var o,r,i,a,u,c,s=pn.fromDom(t.getContainer()),l=(o=t,r=e,i=n,a=ya(s),u=Ta(s),(c={}).height=WB(a+r.top,xv(o),Sv(o)),i===ND.Both&&(c.width=WB(u+r.left,yv(o),wv(o))),c);Dt(l,(function(t,e){return $i(s,e,UB(t)),0})),t.fire("ResizeEditor")},kI=function(t,e,n){return e.delimiter||(e.delimiter="»"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ac([ug.config({mode:"flow",selector:"div[role=button]"}),pv.config({disabled:n.isDisabled}),Wv(),$y.config({}),dg.config({}),mg("elementPathEvents",[fr((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return ug.focusIn(o)})),t.on("NodeChange",(function(r){var i,a,u=function(e){for(var n=[],o=e.length;0<o--;){var r=e[o];if(1===r.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(r.parents);0<u.length?dg.set(o,(i=W(u||[],(function(e,o){return gp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:ac([Yv(n.isDisabled),Wv()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},$(i.slice(1),(function(t,e){var n=t;return n.push(a),n.push(e),n}),[i[0]]))):dg.set(o,[])}))}))])]),components:[]}},OI=function(t,e){var n,o,r,i,a,u;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(a=function(){var n,o,r,i,a,u=[];return t.getParam("elementpath",!0,"boolean")&&u.push(kI(t,{},e)),t.hasPlugin("wordcount")&&u.push((n=t,o=e,i=function(t,e,n){return dg.set(t,[da(o.translate(["{0} "+n,e[n]]))])},gp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ac([Yv(o.isDisabled),Wv(),$y.config({}),dg.config({}),Ul.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),mg("wordcount-events",[gr((function(t){var e=Ul.getValue(t),n="words"===e.mode?"characters":"words";Ul.setValue(t,{mode:n,count:e.count}),i(t,e.count,n)})),fr((function(t){n.on("wordCountUpdate",(function(e){var n=Ul.getValue(t).mode;Ul.setValue(t,{mode:n,count:e.wordCount}),i(t,e.wordCount,n)}))}))])]),eventOrder:((r={})[Do()]=["disabling","alloy.base.behaviour","wordcount-events"],r)}))),t.getParam("branding",!0,"boolean")&&u.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(a=ev.translate(["Powered by {0}","Tiny"]))+'">'+a+"</a>"}}),0<u.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:u}]:[]}(),o=!(n=t).hasPlugin("autoresize"),(u=!1===(r=n.getParam("resize",o))?ND.None:"both"===r?ND.Both:ND.Vertical)!==ND.None&&a.push((i=u,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize"),"aria-hidden":"true"},innerHtml:vp("resize-handle",e.icons)},behaviours:ac([pI.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,n,o){CI(t,o,i)},blockerClass:"tox-blocker"})])})),a)}},_I=function(t){var e,o,r,i,a=t.inline,u=a?$B:LB,c=zv(t)?nB:DE,s=k.none(),l=Wn(),f=l.browser.isIE()?["tox-platform-ie"]:[],m=l.deviceType.isTouch()?["tox-platform-touch"]:[],g=Fv(t),p=Vv(t),h=ev.isRtl()?{attributes:{dir:"rtl"}}:{},v={attributes:((e={})[Xc]=g?nu.BottomToTop:nu.TopToBottom,e)},b=function(){return s.bind(_B.getHeader)},y=function(){$i(dt.element,"width",document.body.clientWidth+"px")},x=pa((o=qn(Gi(),p)&&"grid"===Qi(p,"display"),r={dom:d({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(m)},h),behaviours:ac([el.config({useFixed:function(){return c.isDocked(b)}})])},i={dom:{styles:{width:document.body.clientWidth+"px"}},events:er([rr(Ho(),y)])},Lt(r,o?i:{}))),w=function(){return ft.value(x)},S=pp({dom:{tag:"div",classes:["tox-anchorbar"]}}),C=function(){return s.bind((function(t){return _B.getThrobber(t)})).getOrDie("Could not find throbber element")},O=K_(x,t,(function(){return s.bind((function(t){return S.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),_=_B.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:O,onEscape:function(){t.focus()}}),T=Ev(t),D=_B.parts.toolbar(d({dom:{tag:"div",classes:["tox-toolbar"]},getSink:w,providers:O.shared.providers,onEscape:function(){t.focus()},type:T,lazyToolbar:function(){return s.bind((function(t){return _B.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return b().getOrDie("Could not find header element")}},v)),E=_B.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:O.shared.providers,onEscape:function(){t.focus()},type:T}),B=_B.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),A=_B.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),I=_B.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:O}),M=t.getParam("statusbar",!0,"boolean")&&!a?k.some(OI(t,O.shared.providers)):k.none(),R={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[B,A]},P=_v(t),V=kv(t),H=Cv(t),z=_B.parts.header({dom:d({tag:"div",classes:["tox-editor-header"]},v),components:Q([H?[_]:[],P?[E]:V?[D]:[],Pv(t)?[]:[S.asSpec()]]),sticky:zv(t),editor:t,sharedBackstage:O.shared}),j=Q([g?[]:[z],a?[]:[R],g?[z]:[]]),L=Q([[{dom:{tag:"div",classes:["tox-editor-container"]},components:j}],a?[]:M.toArray(),[I]]),N=Hv(t),U=d(d({role:"application"},ev.isRtl()?{dir:"rtl"}:{}),N?{"aria-hidden":"true"}:{}),W=pa(_B.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(g?["tox-tinymce--toolbar-bottom"]:[]).concat(m).concat(f),styles:d({visibility:"hidden"},N?{opacity:"0",border:"0"}:{}),attributes:U},components:L,behaviours:ac([Wv(),pv.config({disableClass:"tox-tinymce--disabled"}),ug.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));s=k.some(W);t.shortcuts.add("alt+F9","focus menubar",(function(){_B.focusMenubar(W)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){_B.focusToolbar(W)})),t.addCommand("ToggleToolbarDrawer",(function(){_B.toggleToolbarDrawer(W)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return _B.isToolbarDrawerToggled(W)}));var Y,q,X,$,K,J,Z,tt,et,nt,ot,rt,it,at,ut,ct,st,lt=Uy(W),dt=Uy(x);Y=t,q=lt,X=dt,$=function(t,e){G([q,X],(function(n){n.broadcastEvent(t,e)}))},K=function(t,e){G([q,X],(function(n){n.broadcastOn([t],e)}))},J=function(t){return K(kl(),{target:t.target})},Z=ky(pn.fromDom(document),"touchstart",J),tt=ky(pn.fromDom(document),"touchmove",(function(t){return $(Ro(),t)})),et=ky(pn.fromDom(document),"touchend",(function(t){return $(Po(),t)})),nt=ky(pn.fromDom(document),"mousedown",J),ot=ky(pn.fromDom(document),"mouseup",(function(t){0===t.raw.button&&K(_l(),{target:t.target})})),rt=function(t){return K(kl(),{target:pn.fromDom(t.target)})},it=function(t){0===t.button&&K(_l(),{target:pn.fromDom(t.target)})},at=function(t){return $(Vo(),_y(t))},ut=function(t){K(Ol(),{}),$(Ho(),_y(t))},ct=function(){return K(Ol(),{})},st=function(t){t.state&&K(kl(),{target:pn.fromDom(Y.getContainer())})},Y.on("PostRender",(function(){Y.on("click",rt),Y.on("tap",rt),Y.on("mouseup",it),Y.on("ScrollWindow",at),Y.on("ResizeWindow",ut),Y.on("ResizeEditor",ct),Y.on("AfterProgressState",st)})),Y.on("remove",(function(){Y.off("click",rt),Y.off("tap",rt),Y.off("mouseup",it),Y.off("ScrollWindow",at),Y.off("ResizeWindow",ut),Y.off("ResizeEditor",ct),Y.off("AfterProgressState",st),nt.unbind(),Z.unbind(),tt.unbind(),et.unbind(),ot.unbind()})),Y.on("detach",(function(){ml(q),ml(X),q.destroy(),X.destroy()}));var mt=function(){var e,n=UB(GB(t)),o=UB(YB(e=t).getOr(bv(e)));return t.inline||(ea("div","width",o)&&$i(W.element,"width",o),ea("div","height",n)?$i(W.element,"height",n):$i(W.element,"height","200px")),n};return{mothership:lt,uiMothership:dt,backstage:O,renderUI:function(){var e,n,o,r,i,a,s,l;c.setup(t,O.shared,b),cA(t,O),EA(t,w,O),n=(e=t).ui.registry.getAll().sidebars,G(_t(n),(function(t){var o=n[t],r=function(){return k.from(e.queryCommandValue("ToggleSidebar")).is(t)};e.ui.registry.addToggleButton(t,{icon:o.icon,tooltip:o.tooltip,onAction:function(n){e.execCommand("ToggleSidebar",!1,t),n.setActive(r())},onSetup:function(t){var n=function(){return t.setActive(r())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})),o=t,r=C,i=O.shared,a=mn(!1),s=mn(k.none()),l=function(t){t!==a.get()&&(bB(r(),t,i.providers),a.set(t),o.fire("AfterProgressState",{state:t}))},o.on("ProgressState",(function(t){var e;s.get().each(mp.clearTimeout),F(t.time)?(e=mp.setEditorTimeout(o,(function(){return l(t.state)}),t.time),s.set(k.some(e))):(l(t.state),s.set(k.none()))})),Et(t.getParam("toolbar_groups",{},"object"),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var f,m=t.ui.registry.getAll(),g=m.buttons,p=m.menuItems,h=m.contextToolbars,v=m.sidebars,y=Ov(t),S={menuItems:p,menus:(f=t.getParam("menu"))?Et(f,(function(t){return d(d({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:y.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:T===ih.floating,buttons:g,sidebar:v};xE(t,h,x,{backstage:O}),yI(t,x);var _=t.getElement(),D=mt(),E={mothership:lt,uiMothership:dt,outerContainer:W},B={targetNode:_,height:D};return u.render(t,E,S,O,B)},getUi:function(){return{channels:{broadcastAll:dt.broadcast,broadcastOn:dt.broadcastOn,register:n}}}}},TI=r([Ne("lazySink"),Ke("dragBlockClass"),sn("getBounds",Na),nn("useTabstopAt",l),nn("eventOrder",{}),Wl("modalBehaviours",[ug]),hu("onExecute"),bu("onEscape")]),DI={sketch:i},EI=r([Sf({name:"draghandle",overrides:function(t,e){return{behaviours:ac([pI.config({mode:"mouse",getTarget:function(t){return $a(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),xf({schema:[Ne("dom")],name:"title"}),xf({factory:DI,schema:[Ne("dom")],name:"close"}),xf({factory:DI,schema:[Ne("dom")],name:"body"}),Sf({factory:DI,schema:[Ne("dom")],name:"footer"}),wf({factory:{sketch:function(t,e){return d(d({},t),{dom:e.dom,components:e.components})}},schema:[nn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),nn("components",[])],name:"blocker"})]),BI=Object.freeze({__proto__:null,block:function(t,e,n,o){$r(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=ac([ug.config({mode:"special",onTab:function(){return k.some(!0)},onShiftTab:function(){return k.some(!0)}}),bg.config({})]),a=o(r,i),u=r.getSystem().build(a);dg.append(r,ha(u)),u.hasConfigured(ug)&&ug.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return dg.remove(r,u)}))},unblock:function(t,e,n){Zr(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),AI=[sn("getRoot",k.none),pu("onBlock"),pu("onUnblock")],II=cc({fields:AI,name:"blocking",apis:BI,state:Object.freeze({__proto__:null,init:function(){var t=oE();return Si({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),MI=$f({name:"ModalDialog",configFields:TI(),partFields:EI(),factory:function(t,e,n,o){var r,a=mn(k.none()),u=ii("modal-events"),c=d(d({},t.eventOrder),((r={})[zo()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){a.set(k.some(e));var n=t.lazySink(e).getOrDie(),r=o.blocker(),i=n.getSystem().build(d(d({},r),{components:r.components.concat([ha(e)]),behaviours:ac([bg.config({}),mg("dialog-blocker-events",[lr(mo(),(function(){ug.focusIn(e)}))])])}));al(n,i),ug.focusIn(e)},hide:function(t){a.set(k.none()),Or(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){sl(t)}))}))},getBody:function(e){return Rf(e,t,"body")},getFooter:function(e){return Rf(e,t,"footer")},setIdle:function(t){II.unblock(t)},setBusy:function(t,e){II.block(t,e)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Yl(t.modalBehaviours,[dg.config({}),ug.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),II.config({getRoot:a.get}),mg(u,[fr((function(e){var n,o,r,a,u,c;n=e.element,o=Rf(e,t,"title").element,r=Jr(n,"id").fold((function(){var t=ii("dialog-label");return $r(o,"id",t),t}),i),$r(n,"aria-labelledby",r),a=e.element,u=Rf(e,t,"body").element,c=k.from(Kr(a,"id")).fold((function(){var t=ii("dialog-describe");return $r(u,"id",t),t}),i),$r(a,"aria-describedby",c)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),FI=de([We("type"),We("name")].concat(Ph)),RI=Ve,PI=[ye("name","name",Xt((function(){return ii("button-name")})),Pe),Ze("icon"),un("align","end",["start","end"]),cn("primary",!1),cn("disabled",!1)],VI=g(PI,[We("text")]),HI=g([Ge("type",["submit","cancel","custom"])],VI),zI=g([Ge("type",["menu"]),Ze("text"),Ze("tooltip"),Ze("icon"),$e("items",FI)],PI),jI=Ie("type",{submit:HI,cancel:HI,custom:HI,menu:zI}),LI=[We("type"),We("text"),Ge("level",["info","warn","error","success"]),We("icon"),nn("url","")],NI=de(LI),UI=[We("type"),We("text"),cn("disabled",!1),cn("primary",!1),ye("name","name",Xt((function(){return ii("button-name")})),Pe),Ze("icon"),cn("borderless",!1)],WI=de(UI),GI=[We("type"),We("name"),We("label"),cn("disabled",!1)],YI=de(GI),qI=Ve,XI=[We("type"),We("name")],$I=XI.concat([Ze("label")]),KI=$I.concat([nn("columns","auto")]),JI=de(KI),QI=Ce([We("value"),We("text"),We("icon")]),ZI=de($I),tM=Pe,eM=de($I),nM=Pe,oM=XI.concat([an("tag","textarea"),We("scriptId"),We("scriptUrl"),(xI=void 0,on("settings",xI,je))]),rM=XI.concat([an("tag","textarea"),Ye("init")]),iM=Oe((function(t){return Te("customeditor.old",fe(rM),t).orThunk((function(){return Te("customeditor.new",fe(oM),t)}))})),aM=Pe,uM=de($I),cM=me(Se),sM=function(t){return[We("type"),Ue("columns",Re),t]},lM=[We("type"),We("html"),un("presets","presentation",["presentation","document"])],fM=de(lM),dM=$I.concat([cn("sandboxed",!0)]),mM=de(dM),gM=Pe,pM=$I.concat([Ue("currentState",de([Ne("blob"),We("url")]))]),hM=de(pM),vM=$I.concat([Ze("inputMode"),Ze("placeholder"),cn("maximized",!1),cn("disabled",!1)]),bM=de(vM),yM=Pe,xM=[We("text"),We("value")],wM=[We("text"),$e("items",(wI=function(){return SM},SI=Ut((function(){return wI()})),{extract:function(t,e,n){return SI().extract(t,e,n)},toString:function(){return SI().toString()}}))],SM=ge([de(xM),de(wM)]),CM=$I.concat([$e("items",SM),cn("disabled",!1)]),kM=de(CM),OM=Pe,_M=$I.concat([Xe("items",[We("text"),We("value")]),rn("size",1),cn("disabled",!1)]),TM=de(_M),DM=Pe,EM=$I.concat([cn("constrain",!0),cn("disabled",!1)]),BM=de(EM),AM=de([We("width"),We("height")]),IM=[We("type"),$e("header",Pe),$e("cells",me(Pe))],MM=de(IM),FM=$I.concat([Ze("placeholder"),cn("maximized",!1),cn("disabled",!1)]),RM=de(FM),PM=Pe,VM=$I.concat([un("filetype","file",["image","media","file"]),nn("disabled",!1)]),HM=de(VM),zM=de([We("value"),nn("meta",{})]),jM=function(t){return ye("items","items",Yt(),me(Oe((function(e){return Te("Checking item of "+t,LM,e).fold((function(t){return ft.error(Be(t))}),(function(t){return ft.value(t)}))}))))},LM=ke((function(){return Ae("type",{alertbanner:NI,bar:de((e=jM("bar"),[We("type"),e])),button:WI,checkbox:YI,colorinput:ZI,colorpicker:eM,dropzone:uM,grid:de(sM(jM("grid"))),iframe:mM,input:bM,listbox:kM,selectbox:TM,sizeinput:BM,textarea:RM,urlinput:HM,customeditor:iM,htmlpanel:fM,imagetools:hM,collection:JI,label:de((t=jM("label"),[We("type"),We("label"),t])),table:MM,panel:UM});var t,e})),NM=[We("type"),nn("classes",[]),$e("items",LM)],UM=de(NM),WM=[ye("name","name",Xt((function(){return ii("tab-name")})),Pe),We("title"),$e("items",LM)],GM=[We("type"),Xe("tabs",WM)],YM=de(GM),qM=VI,XM=jI,$M=de([We("title"),Ue("body",Ae("type",{panel:UM,tabpanel:YM})),an("size","normal"),$e("buttons",XM),nn("initialData",{}),sn("onAction",n),sn("onChange",n),sn("onSubmit",n),sn("onClose",n),sn("onCancel",n),nn("onTabChange",n)]),KM=de(g([Ge("type",["cancel","custom"])],qM)),JM=de([We("title"),We("url"),Qe("height"),Qe("width"),Je("buttons",me(KM)),sn("onAction",n),sn("onCancel",n),sn("onClose",n),sn("onMessage",n)]),QM=function t(e){return D(e)?[e].concat(Z(Ft(e),t)):E(e)?Z(e,t):[]},ZM=function(t){return T(t.type)&&T(t.name)},tF={checkbox:qI,colorinput:tM,colorpicker:nM,dropzone:cM,input:yM,iframe:gM,sizeinput:AM,selectbox:DM,listbox:OM,size:AM,textarea:PM,urlinput:zM,customeditor:aM,collection:QI,togglemenuitem:RI},eF=function(t){var e=q(QM(t),ZM),n=Z(e,(function(t){return e=t,k.from(tF[e.type]).fold((function(){return[]}),(function(e){return[Ue(t.name,e)]}));var e}));return de(n)},nF=function(t){return{internalDialog:De(Te("dialog",$M,t)),dataValidator:eF(t),initialData:t.initialData}},oF={open:function(t,e){var n=nF(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(De(Te("dialog",JM,e)))},redial:nF},rF=function(t){var e=[],n={};return Dt(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),0<e.length?ft.error(e):ft.value(n)},iF=Xf({name:"TabButton",configFields:[nn("uid",void 0),Ne("value"),ye("dom","dom",$t((function(){return{attributes:{role:"tab",id:ii("aria"),"aria-selected":"false"}}})),Me()),Ke("action"),nn("domModification",{}),Wl("tabButtonBehaviours",[bg,ug,Ul]),Ne("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Ig(t.action),behaviours:Yl(t.tabButtonBehaviours,[bg.config({}),ug.config({mode:"execution",useSpace:!0,useEnter:!0}),Ul.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),aF=r([Ne("tabs"),Ne("dom"),nn("clickToDismiss",!1),Wl("tabbarBehaviours",[dd,ug]),mu(["tabClass","selectedClass"])]),uF=Cf({factory:iF,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){dd.dehighlight(t,e),Ko(t,Yo(),{tabbar:t,button:e})},o=function(t,e){dd.highlight(t,e),Ko(t,Go(),{tabbar:t,button:e})};return{action:function(r){var i=r.getSystem().getByUid(t.uid).getOrDie(),a=dd.isHighlighted(i,r);(a&&t.clickToDismiss?e:a?n:o)(i,r)},domModification:{classes:[t.markers.tabClass]}}}}),cF=r([uF]),sF=$f({name:"Tabbar",configFields:aF(),partFields:cF(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Yl(t.tabbarBehaviours,[dd.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){$r(e.element,"aria-selected","true")},onDehighlight:function(t,e){$r(e.element,"aria-selected","false")}}),ug.config({mode:"flow",getInitial:function(t){return dd.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),lF=Xf({name:"Tabview",configFields:[Wl("tabviewBehaviours",[dg])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Yl(t.tabviewBehaviours,[dg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),fF=r([nn("selectFirst",!0),pu("onChangeTab"),pu("onDismissTab"),nn("tabs",[]),Wl("tabSectionBehaviours",[])]),dF=xf({factory:sF,schema:[Ne("dom"),qe("markers",[Ne("tabClass"),Ne("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),mF=xf({factory:lF,name:"tabview"}),gF=r([dF,mF]),pF=$f({name:"TabSection",configFields:fF(),partFields:gF(),factory:function(t,e,n,o){var r=function(e,n){Ff(e,t,"tabbar").each((function(t){n(t).each(Jo)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:Gl(t.tabSectionBehaviours),events:er(Q([t.selectFirst?[fr((function(t,e){r(t,dd.getFirst)}))]:[],[rr(Go(),(function(e,n){var o,r,i=n.event.button;o=i,r=Ul.getValue(o),Ff(o,t,"tabview").each((function(e){K(t.tabs,(function(t){return t.value===r})).each((function(n){var r=n.view();Jr(o.element,"id").each((function(t){$r(e.element,"aria-labelledby",t)})),dg.set(e,r),t.onChangeTab(e,o,r)}))}))})),rr(Yo(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return Ff(e,t,"tabview").map((function(t){return dg.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){var n=dd.getCandidates(t);return K(n,(function(t){return Ul.getValue(t)===e})).filter((function(e){return!dd.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),hF=function(t,e){$i(t,"height",e+"px"),Wn().browser.isIE()?na(t,"flex-basis"):$i(t,"flex-basis",e+"px")},vF=function(t,e,n){$a(t,'[role="dialog"]').each((function(t){Ka(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return $i(e,"height","0"),$i(e,"flex-basis","0"),Math.min(n,(i=e,a=o,u=Cr(r=t).dom,c=$a(r,".tox-dialog-wrap").getOr(r),s="fixed"===Qi(c,"position")?Math.max(u.clientHeight,window.innerHeight):Math.max(u.offsetHeight,u.scrollHeight),l=ya(i),f=i.dom.offsetLeft>=a.dom.offsetLeft+Ta(a)?Math.max(ya(a),l):l,d=parseInt(Qi(r,"margin-top"),10)||0,m=parseInt(Qi(r,"margin-bottom"),10)||0,s-(ya(r)+d+m-f)));var r,i,a,u,c,s,l,f,d,m})).each((function(t){hF(e,t)}))}))}))},bF=function(t){return Ka(t,'[role="tabpanel"]')},yF=function(t){var e;return{smartTabHeight:(e=mn(k.none()),{extraEvents:[fr((function(n){var o=n.element;bF(o).each((function(r){var i;$i(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((function(n){var o,i,a,u=(i=r,a=n,W(o=t,(function(t,e){dg.set(a,o[e].view());var n=i.dom.getBoundingClientRect();return dg.set(a,[]),n.height}))),c=it(ot(u,(function(t,e){return e<t?-1:t<e?1:0})));e.set(c)})),vF(o,r,e),na(r,"visibility"),i=n,it(t).each((function(t){return pF.showTab(i,t.value)})),mp.requestAnimationFrame((function(){vF(o,r,e)}))}))})),rr(Ho(),(function(t){var n=t.element;bF(n).each((function(t){vF(n,t,e)}))})),rr(sx,(function(t,n){var o=t.element;bF(o).each((function(t){var n=pc(Mr(t));$i(t,"visibility","hidden");var r=ta(t,"height").map((function(t){return parseInt(t,10)}));na(t,"height"),na(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall((function(t){return t<i}))?(e.set(k.from(i)),vF(o,t,e)):r.each((function(e){hF(t,e)})),na(t,"visibility"),n.each(gc)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},xF="send-data-to-section",wF="send-data-to-view",SF=ii("update-dialog"),CF=ii("update-title"),kF=ii("update-body"),OF=ii("update-footer"),_F=ii("body-send-message"),TF=function(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:d(d({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:ac([sC(0),aD.config({channel:kF,updateState:function(t,e){return k.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(i=t.body,a=n,c=mn({}),s=function(t){var e=Ul.getValue(t),n=rF(e).getOr({}),o=c.get(),r=Lt(o,n);c.set(r)},l=function(t){var e=c.get();Ul.setValue(t,e)},f=mn(null),d=W(i.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:a.shared.providers.translate(t.title)},view:function(){return[ZS.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"]},components:W(t.items,(function(t){return l_(e,t,a)})),formBehaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)}),mg("TabView.form.events",[fr(l),dr(s)]),dc.config({channels:Zt([{key:xF,value:{onReceive:s}},{key:wF,value:{onReceive:l}}])})])}}))]}}})),m=yF(d).smartTabHeight,pF.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Ul.getValue(e);Ko(t,cx,{name:o,oldName:f.get()}),f.set(o)},tabs:d,components:[pF.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[sF.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ac([$y.config({})])}),pF.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:m.selectFirst,tabSectionBehaviours:ac([mg("tabpanel",m.extraEvents),ug.config({mode:"acyclic"}),ed.config({find:function(t){return it(pF.getViewItems(t))}}),Ul.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([xF],{}),c.get()},setValue:function(t,e){c.set(e),t.getSystem().broadcastOn([wF],{})}}})])}))];default:return[(e=t.body,o=n,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=pp(ZS.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:W(e.items,(function(e){return l_(t,e,o)}))}})))).asSpec()]}],behaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)}),cC(r),vC(r,{postprocess:function(t){return rF(t).fold((function(t){return console.error(t),{}}),(function(t){return t}))}})])})]}var e,o,r,i,a,c,s,l,f,d,m},initialData:t})])}},DF=nb.deviceType.isTouch(),EF=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},BF=function(t,e){return MI.parts.close(gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:ac([$y.config({})])}))},AF=function(){return MI.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},IF=function(t,e){return MI.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:vB("<p>"+e.translate(t)+"</p>")}]}]})},MF=function(t){return MI.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},FF=function(t,e){return[Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},RF=function(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return MI.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),k.some(!0)},useTabstopAt:function(t){return!DC(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:d({position:"relative"},t.extraStyles)},components:g([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:vB('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:DF?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:ac(g([bg.config({}),mg("dialog-events",t.dialogEvents.concat([lr(mo(),(function(t,e){ug.focusIn(t)}))])),mg("scroll-lock",[fr((function(){Vi(Gi(),i)})),dr((function(){zi(Gi(),i)}))])],t.extraBehaviours)),eventOrder:d(((e={})[Do()]=["dialog-events"],e[zo()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[jo()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},PF=function(t){return gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vp("close",t.icons)}}],action:function(t){$o(t,ox)}})},VF=function(t,e,n){var o=function(t){return[da(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:d({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:ac([aD.config({channel:CF,renderComponents:o})])}},HF=function(){return{dom:vB('<div class="tox-dialog__draghandle"></div>')}},zF=function(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=MI.parts.title(VF(n,k.none(),o)),i=MI.parts.draghandle(HF()),a=MI.parts.close(PF(o)),u=[r].concat(n.draggable?[i]:[]).concat([a]),Ny.sketch({dom:vB('<div class="tox-dialog__header"></div>'),components:u});var n,o,r,i,a,u},jF=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:vB('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},LF=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){MI.setBusy(t(),(function(t,o){return jF(n.message,o,e)}))},onUnblock:function(){MI.setIdle(t())}}},NF=function(t,e,n,o){var r;return pa(RF(d(d({},t),{lazySink:o.shared.getSink,extraBehaviours:g([aD.config({channel:SF,updateState:function(t,e){return k.some(e)},initialData:e}),xC({})],t.extraBehaviours),onEscape:function(t){$o(t,ox)},dialogEvents:n,eventOrder:((r={})[To()]=[aD.name(),dc.name()],r[zo()]=["scroll-lock",aD.name(),"messages","dialog-events","alloy.base.behaviour"],r[jo()]=["alloy.base.behaviour","dialog-events","messages",aD.name(),"scroll-lock"],r)})))},UF=function(t){return W(t,(function(t){return"menu"===t.type?(n=W((e=t).items,(function(t){var e=mn(!1);return d(d({},t),{storage:e})})),d(d({},e),{items:n})):t;var e,n}))},WF=function(t){return $(t,(function(t,e){return"menu"!==e.type?t:$(e.items,(function(t,e){return t[e.name]=e.storage,t}),t)}),{})},GF=function(t,e){return[cr(mo(),TC),t(nx,(function(t,n){e.onClose(),n.onClose()})),t(ox,(function(t,e,n,o){e.onCancel(t),$o(o,nx)})),rr(ux,(function(t,n){return e.onUnblock()})),rr(ax,(function(t,n){return e.onBlock(n.event)}))]},YF=function(t,e){var n=function(e,n){return rr(e,(function(e,r){o(e,(function(o,i){n(t(),o,r.event,e)}))}))},o=function(t,e){aD.getState(t).get().each((function(n){e(n,t)}))};return g(GF(n,e),[n(rx,(function(t,e,n){e.onAction(t,{name:n.name})}))])},qF=function(t,e,n){var o=function(e,n){return rr(e,(function(e,o){r(e,(function(r,i){n(t(),r,o.event,e)}))}))},r=function(t,e){aD.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return g(GF(o,e),[o(ix,(function(t,e){return e.onSubmit(t)})),o(ex,(function(t,e,n){e.onChange(t,{name:n.name})})),o(rx,(function(t,e,o,r){var i=function(){return ug.focusIn(r)},a=function(t){return Qr(t,"disabled")||Jr(t,"aria-disabled").exists((function(t){return"true"===t}))},u=Mr(r.element),c=pc(u);e.onAction(t,{name:o.name,value:o.value}),pc(u).fold(i,(function(t){a(t)||c.exists((function(e){return $n(t,e)&&a(e)}))?i():n().toOptional().filter((function(e){return!$n(e.element,t)})).each(i)}))})),o(cx,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),dr((function(e){var n=t();Ul.setValue(e,n.getData())}))])},XF=function(t,e){var n=e.map((function(t){return t.footerButtons})).getOr([]),o=Y(n,(function(t){return"start"===t.align})),r=function(t,e){return Ny.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:W(e,(function(t){return t.memento.asSpec()}))})};return[r("start",o.pass),r("end",o.fail)]},$F=function(t,e){return{dom:vB('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ac([aD.config({channel:OF,initialData:t,updateState:function(t,n){var o=W(n.buttons,(function(t){var n,o,r=pp((o=e,Qk(n=t,n.type,o)));return{name:t.name,align:t.align,memento:r}}));return k.some({lookupByName:function(t,e){return n=t,r=e,K(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(n)}));var n,r},footerButtons:o})},renderComponents:XF})])}},KF=$F,JF=function(t,e){return MI.parts.footer($F(t,e))},QF=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=ed.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return ZS.getField(n,e).fold((function(){var o=t.getFooter();return aD.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return k.some(t)}))}return k.none()},ZF=function(t,e,n){var o=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=Ul.getValue(o),i=Et(n,(function(t){return t.get()}));return d(d({},r),i)},setData:function(e){o((function(o){var i,a,u=r.getData(),c=d(d({},u),e),s=(i=c,a=t.getRoot(),aD.getState(a).get().map((function(t){return De(Te("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper();Ul.setValue(l,s),Dt(n,(function(t,e){Pt(c,e)&&t.set(c[e])}))}))},disable:function(e){QF(t,e).each(pv.disable)},enable:function(e){QF(t,e).each(pv.enable)},focus:function(e){QF(t,e).each(bg.focus)},block:function(t){if(!T(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){Ko(e,ax,{message:t})}))},unblock:function(){o((function(t){$o(t,ux)}))},showTab:function(e){o((function(n){var o=t.getBody();aD.getState(o).get().exists((function(t){return t.isTabPanel()}))&&ed.getCurrent(o).each((function(t){pF.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([SF],o),n.getSystem().broadcastOn([CF],o.internalDialog),n.getSystem().broadcastOn([kF],o.internalDialog),n.getSystem().broadcastOn([OF],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){$o(t,nx)}))}};return r},tR=function(t,e,n){var o,r,i,a=zF(t.internalDialog.title,n),u=(o={body:t.internalDialog.body},r=n,i=TF(o,k.none(),r,!1),MI.parts.body(i)),c=UF(t.internalDialog.buttons),s=WF(c),l=JF({buttons:c},n),f=qF((function(){return p}),LF((function(){return g}),n.shared.providers,e),n.shared.getSink),d=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),m={header:a,body:u,footer:k.some(l),extraClasses:d,extraBehaviours:[],extraStyles:{}},g=NF(m,t,f,n),p=ZF({getRoot:function(){return g},getBody:function(){return MI.getBody(g)},getFooter:function(){return MI.getFooter(g)},getFormWrapper:function(){var t=MI.getBody(g);return ed.getCurrent(t).getOr(t)}},e.redial,s);return{dialog:g,instanceApi:p}},eR=function(t,e,n,o){var r,i,a,u,c,s,l,f,d,m=ii("dialog-label"),g=ii("dialog-content"),p=pp((a={title:t.internalDialog.title,draggable:!0},u=m,c=n.shared.providers,Ny.sketch({dom:vB('<div class="tox-dialog__header"></div>'),components:[VF(a,k.some(u),c),HF(),PF(c)],containerBehaviours:ac([pI.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Ja(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=pp((s={body:t.internalDialog.body},l=g,f=n,d=o,TF(s,k.some(l),f,d))),v=UF(t.internalDialog.buttons),b=WF(v),y=pp(KF({buttons:v},n)),x=qF((function(){return S}),{onBlock:function(t){II.block(w,(function(e,o){return jF(t.message,o,n.shared.providers)}))},onUnblock:function(){II.unblock(w)},onClose:function(){return e.closeWindow()}},n.shared.getSink),w=pa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((r={role:"dialog"})["aria-labelledby"]=m,r["aria-describedby"]=""+g,r)},eventOrder:((i={})[To()]=[aD.name(),dc.name()],i[Do()]=["execute-on-form"],i[zo()]=["reflecting","execute-on-form"],i),behaviours:ac([ug.config({mode:"cyclic",onEscape:function(t){return $o(t,nx),k.some(!0)},useTabstopAt:function(t){return!DC(t)&&("button"!==pr(t)||"disabled"!==Kr(t,"disabled"))}}),aD.config({channel:SF,updateState:function(t,e){return k.some(e)},initialData:t}),bg.config({}),mg("execute-on-form",x.concat([lr(mo(),(function(t,e){ug.focusIn(t)}))])),II.config({getRoot:function(){return k.some(w)}}),dg.config({}),xC({})]),components:[p.asSpec(),h.asSpec(),y.asSpec()]}),S=ZF({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return ed.getCurrent(t).getOr(t)}},e.redial,b);return{dialog:w,instanceApi:S}},nR=tinymce.util.Tools.resolve("tinymce.util.URI"),oR=["insertContent","setContent","execCommand","close","block","unblock"],rR=function(t){return D(t)&&-1!==oR.indexOf(t.mceAction)},iR=function(t,e,n,o){var r,i,a,c,s=zF(t.title,o),l=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[OC({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ac([$y.config({}),bg.config({})])})]}],behaviours:ac([ug.config({mode:"acyclic",useTabstopAt:u(DC)})])},MI.parts.body(i)),f=t.buttons.bind((function(t){return 0===t.length?k.none():k.some(JF({buttons:t},o))})),m=YF((function(){return w}),LF((function(){return x}),o.shared.providers,e)),g=d(d({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new nR(t.url,{base_uri:new nR(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=mn(k.none()),y=[mg("messages",[fr((function(){var e=ky(pn.fromDom(window),"message",(function(e){var o,r;h.isSameOrigin(new nR(e.raw.origin))&&(o=e.raw.data,rR(o)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!B(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!rR(r=o)&&D(r)&&Pt(r,"mceAction")&&t.onMessage(w,o))}));b.set(k.some(e))})),dr((function(){b.get().each((function(t){return t.unbind()}))}))]),dc.config({channels:((r={})[_F]={onReceive:function(t,e){Ka(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},r)})],x=NF({header:s,body:l,footer:f,extraClasses:p,extraBehaviours:y,extraStyles:g},t,m,o),w=(c=function(t){a.getSystem().isConnected()&&t(a)},{block:function(t){if(!T(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((function(e){Ko(e,ax,{message:t})}))},unblock:function(){c((function(t){$o(t,ux)}))},close:function(){c((function(t){$o(t,nx)}))},sendMessage:function(t){c((function(e){e.getSystem().broadcastOn([_F],t)}))}});return{dialog:a=x,instanceApi:w}},aR=function(t){var e,n,o,r,i=t.backstage,a=t.editor,u=zv(a),c=(n=(e=t).backstage.shared,{open:function(t,o){var r=function(){MI.hide(c),o()},i=pp(Qk({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:k.none()},"cancel",e.backstage)),a=AF(),u=BF(r,n.providers),c=pa(RF({lazySink:function(){return n.getSink()},header:EF(a,u),body:IF(t,n.providers),footer:k.some(MF(FF([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,r)],eventOrder:{}}));MI.show(c);var s=i.get(c);bg.focus(s)}}),s=(r=(o=t).backstage.shared,{open:function(t,e){var n=function(t){MI.hide(s),e(t)},i=pp(Qk({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:k.none()},"submit",o.backstage)),a=Qk({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:k.none()},"cancel",o.backstage),u=AF(),c=BF((function(){return n(!1)}),r.providers),s=pa(RF({lazySink:function(){return r.getSink()},header:EF(u,c),body:IF(t,r.providers),footer:k.some(MF(FF([],[a,i.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,(function(){return n(!1)})),rr(ix,(function(){return n(!0)}))],eventOrder:{}}));MI.show(s);var l=i.get(s);bg.focus(l)}}),l=function(t,e){return oF.openUrl((function(t){var n=iR(t,{closeWindow:function(){MI.hide(n.dialog),e(n.instanceApi)}},a,i);return MI.show(n.dialog),n.instanceApi}),t)},f=function(t,e){return oF.open((function(t,n,o){var r=n,a=tR({dataValidator:o,initialData:r,internalDialog:t},{redial:oF.redial,closeWindow:function(){MI.hide(a.dialog),e(a.instanceApi)}},i);return MI.show(a.dialog),a.instanceApi.setData(r),a.instanceApi}),t)},m=function(t,e,n,o){return oF.open((function(t,r,c){var s,l,f,m=De(Te("data",c,r)),p=(s=mn(k.none()),{clear:function(){return s.set(k.none())},set:function(t){return s.set(k.some(t))},isSet:function(){return s.get().isSome()},on:function(t){return s.get().each(t)}}),h=i.shared.header.isPositionedAtTop(),v=function(){return p.on((function(t){ep.reposition(t),XE.refresh(t)}))},b=eR({dataValidator:c,initialData:m,internalDialog:t},{redial:oF.redial,closeWindow:function(){p.on(ep.hide),a.off("ResizeEditor",v),p.clear(),n(b.instanceApi)}},i,o),y=pa(ep.sketch(d(d({lazySink:i.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},h?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:ac(g([mg("window-manager-inline-events",[rr(Lo(),(function(t,e){$o(b.dialog,ox)}))])],(l=a,f=h,u&&f?[]:[XE.config({contextual:{lazyContext:function(){return k.some(ja(pn.fromDom(l.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]))),isExtraPart:function(t,e){return Ty(n=e,".tox-alert-dialog")||Ty(n,".tox-confirm-dialog");var n}})));return p.set(y),ep.showWithin(y,e,ha(b.dialog),k.some(Gi())),u&&h||(XE.refresh(y),a.on("ResizeEditor",v)),b.instanceApi.setData(m),ug.focusIn(b.dialog),b.instanceApi}),t)};return{open:function(t,e,n){return void 0!==e&&"toolbar"===e.inline?m(t,i.shared.anchors.inlineDialog(),n,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?m(t,i.shared.anchors.cursor(),n,e.ariaAttrs):f(t,n)},openUrl:function(t,e){return l(t,e)},alert:function(t,e){c.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){s.open(t,(function(t){e(t)}))}}};f.add("silver",(function(t){var e=_I(t),n=e.uiMothership,o=e.backstage,i=e.renderUI,a=e.getUi;Sy(t,o.shared);var u=aR({editor:t,backstage:o});return{renderUI:i,getWindowManagerImpl:r(u),getNotificationManagerImpl:function(){return xp(0,{backstage:o},n)},ui:a()}}))}()}).call(this,n("c8ba"))},cfac:function(t,e,n){"use strict";n("8b79")},cfee:function(t,e,n){},d43b:function(t,e,n){"use strict";n("8ca5")},d5a5:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{attrs:{id:t.tinymceId}})])},r=[],i=(n("b680"),n("7c27"),n("22da"),{props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,required:!0}},data:function(){return{tinymceId:this.id,tinymceFlag:1,hasChange:!1,hasInit:!1}},mounted:function(){var t=this;tinymce.init({selector:"#".concat(this.tinymceId),language:"zh_CN",menubar:"bar1 bar2",menu:{bar1:{title:"菜单栏",items:"copy paste"}},toolbar:"undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright | fontsizeselect | fontselect ",font_formats:"宋体=宋体;仿宋=仿宋;黑体=黑体'",init_instance_callback:function(e){e.on("input",(function(e){t.$emit("input",e.target.innerHTML)})),e.on("change",(function(e){t.$emit("input",e.level.content)}))},setup:function(e){e.on("init",(function(n){e.setContent(t.value)}))},height:600})},created:function(){},watch:{value:function(t,e){var n=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(n.tinymceId).setContent(t)}))}},methods:{setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.status&&t.destroy(),t&&t.destroy(),console.log("aa")}}}),a=i,u=(n("a7f8"),n("2877")),c=Object(u["a"])(a,o,r,!1,null,null,null);e["a"]=c.exports},e5ac:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/rules-and-regulations/"+t,method:"get"})}},e6e5:function(t,e,n){},ed08:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("53ca");n("5319"),n("ac1f"),n("4d63"),n("25f0"),n("d3b7"),n("4d90"),n("1276"),n("159b");function r(t,e){if(0===arguments.length||!t)return null;var n,r=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(o["a"])(t)?n=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},a=r.replace(/{([ymdhisa])+}/g,(function(t,e){var n=i[e];return"a"===e?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return a}},efcb:function(t,e,n){"use strict";n("2673")},fb80:function(t,e,n){},fdc2:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var o=n("b775");function r(t,e){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"post",data:e})}function i(t){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"get"})}},fe41:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/course-material/"+t,method:"get"})}},ff3d:function(t,e,n){}}]);