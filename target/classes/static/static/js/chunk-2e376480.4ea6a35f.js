(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e376480"],{"09bf":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-research/"+t,method:"get"})}},"0e8d":function(t,e,n){},1:function(t,e){},1488:function(t,e,n){},"1d7f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/principal/"+t,method:"get"})}},2:function(t,e){},"22da":function(t,e){tinymce.addI18n("zh_CN",{Redo:"重做",Undo:"撤销",Cut:"剪切",Copy:"复制",Paste:"粘贴","Select all":"全选","New document":"新文件",Ok:"确定",Cancel:"取消","Visual aids":"网格线",Bold:"粗体",Italic:"斜体",Underline:"下划线",Strikethrough:"删除线",Superscript:"上标",Subscript:"下标","Clear formatting":"清除格式","Align left":"左边对齐","Align center":"中间对齐","Align right":"右边对齐",Justify:"两端对齐","Bullet list":"项目符号","Numbered list":"编号列表","Decrease indent":"减少缩进","Increase indent":"增加缩进",Close:"关闭",Formats:"格式","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",Headers:"标题","Header 1":"标题1","Header 2":"标题2","Header 3":"标题3","Header 4":"标题4","Header 5":"标题5","Header 6":"标题6",Headings:"标题","Heading 1":"标题1","Heading 2":"标题2","Heading 3":"标题3","Heading 4":"标题4","Heading 5":"标题5","Heading 6":"标题6",Preformatted:"预先格式化的",Div:"Div",Pre:"Pre",Code:"代码",Paragraph:"段落",Blockquote:"引文区块",Inline:"文本",Blocks:"基块","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Fonts:"字体","Font Sizes":"字号",Class:"类型","Browse for an image":"浏览图像",OR:"或","Drop an image here":"拖放一张图像至此",Upload:"上传",Block:"块",Align:"对齐",Default:"默认",Circle:"空心圆",Disc:"实心圆",Square:"方块","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马字母","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Anchor...":"锚点...",Name:"名称",Id:"标识符","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character...":"特殊字符...","Source code":"源代码","Insert/Edit code sample":"插入/编辑代码示例",Language:"语言","Code sample...":"示例代码...","Color Picker":"选色器",R:"R",G:"G",B:"B","Left to right":"从左到右","Right to left":"从右到左","Emoticons...":"表情符号...","Metadata and Document Properties":"元数据和文档属性",Title:"标题",Keywords:"关键词",Description:"描述",Robots:"机器人",Author:"作者",Encoding:"编码",Fullscreen:"全屏",Action:"操作",Shortcut:"快捷键",Help:"帮助",Address:"地址","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏","Focus to element path":"移动焦点到元素路径","Focus to contextual toolbar":"移动焦点到上下文菜单","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Save (if save plugin activated)":"保存(如果保存插件已激活)","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Plugins installed ({0}):":"已安装插件 ({0}):","Premium plugins:":"优秀插件：","Learn more...":"了解更多...","You are using {0}":"你正在使用 {0}",Plugins:"插件","Handy Shortcuts":"快捷键","Horizontal line":"水平分割线","Insert/edit image":"插入/编辑图片","Image description":"图片描述",Source:"地址",Dimensions:"大小","Constrain proportions":"保持纵横比",General:"普通",Advanced:"高级",Style:"样式","Vertical space":"垂直边距","Horizontal space":"水平边距",Border:"边框","Insert image":"插入图片","Image...":"图片...","Image list":"图片列表","Rotate counterclockwise":"逆时针旋转","Rotate clockwise":"顺时针旋转","Flip vertically":"垂直翻转","Flip horizontally":"水平翻转","Edit image":"编辑图片","Image options":"图片选项","Zoom in":"放大","Zoom out":"缩小",Crop:"裁剪",Resize:"调整大小",Orientation:"方向",Brightness:"亮度",Sharpen:"锐化",Contrast:"对比度","Color levels":"颜色层次",Gamma:"伽马值",Invert:"反转",Apply:"应用",Back:"后退","Insert date/time":"插入日期/时间","Date/time":"日期/时间","Insert/Edit Link":"插入/编辑链接","Insert/edit link":"插入/编辑链接","Text to display":"显示文字",Url:"地址","Open link in...":"链接打开位置...","Current window":"当前窗口",None:"无","New window":"在新窗口打开","Remove link":"删除链接",Anchors:"锚点","Link...":"链接...","Paste or type a link":"粘贴或输入链接","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Link list":"链接列表","Insert video":"插入视频","Insert/edit video":"插入/编辑视频","Insert/edit media":"插入/编辑媒体","Alternative source":"镜像","Alternative source URL":"替代来源网址","Media poster (Image URL)":"封面(图片地址)","Paste your embed code below:":"将内嵌代码粘贴在下面:",Embed:"内嵌","Media...":"多媒体...","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览","Print...":"打印...",Save:"保存",Find:"查找","Replace with":"替换为",Replace:"替换","Replace all":"全部替换",Previous:"上一个",Next:"下一个","Find and replace...":"查找并替换...","Could not find the specified string.":"未找到搜索内容.","Match case":"区分大小写","Find whole words only":"全字匹配","Spell check":"拼写检查",Ignore:"忽略","Ignore all":"全部忽略",Finish:"完成","Add to Dictionary":"添加到字典","Insert table":"插入表格","Table properties":"表格属性","Delete table":"删除表格",Cell:"单元格",Row:"行",Column:"列","Cell properties":"单元格属性","Merge cells":"合并单元格","Split cell":"拆分单元格","Insert row before":"在上方插入","Insert row after":"在下方插入","Delete row":"删除行","Row properties":"行属性","Cut row":"剪切行","Copy row":"复制行","Paste row before":"粘贴到上方","Paste row after":"粘贴到下方","Insert column before":"在左侧插入","Insert column after":"在右侧插入","Delete column":"删除列",Cols:"列",Rows:"行",Width:"宽",Height:"高","Cell spacing":"单元格外间距","Cell padding":"单元格内边距","Show caption":"显示标题",Left:"左对齐",Center:"居中",Right:"右对齐","Cell type":"单元格类型",Scope:"范围",Alignment:"对齐方式","H Align":"水平对齐","V Align":"垂直对齐",Top:"顶部对齐",Middle:"垂直居中",Bottom:"底部对齐","Header cell":"表头单元格","Row group":"行组","Column group":"列组","Row type":"行类型",Header:"表头",Body:"表体",Footer:"表尾","Border color":"边框颜色","Insert template...":"插入模板...",Templates:"模板",Template:"模板","Text color":"文字颜色","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Remove color":"移除颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Word count":"字数",Count:"计数",Document:"文档",Selection:"选择",Words:"单词","Words: {0}":"字数：{0}","{0} words":"{0} 字",File:"文件",Edit:"编辑",Insert:"插入",View:"视图",Format:"格式",Table:"表格",Tools:"工具","Powered by {0}":"由{0}驱动","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助","Image title":"图片标题","Border width":"边框宽度","Border style":"边框样式",Error:"错误",Warn:"警告",Valid:"有效","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","System Font":"系统字体","Failed to upload image: {0}":"图片上传失败: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to initialize plugin: {0}":"插件初始化失败: {0}",example:"示例",Search:"搜索",All:"全部",Currency:"货币",Text:"文字",Quotations:"引用",Mathematical:"数学","Extended Latin":"拉丁语扩充",Symbols:"符号",Arrows:"箭头","User Defined":"自定义","dollar sign":"美元符号","currency sign":"货币符号","euro-currency sign":"欧元符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","french franc sign":"法郎符号","lira sign":"里拉符号","mill sign":"密尔符号","naira sign":"奈拉符号","peseta sign":"比塞塔符号","rupee sign":"卢比符号","won sign":"韩元符号","new sheqel sign":"新谢克尔符号","dong sign":"越南盾符号","kip sign":"老挝基普符号","tugrik sign":"图格里克符号","drachma sign":"德拉克马符号","german penny symbol":"德国便士符号","peso sign":"比索符号","guarani sign":"瓜拉尼符号","austral sign":"澳元符号","hryvnia sign":"格里夫尼亚符号","cedi sign":"塞地符号","livre tournois sign":"里弗弗尔符号","spesmilo sign":"spesmilo符号","tenge sign":"坚戈符号","indian rupee sign":"印度卢比","turkish lira sign":"土耳其里拉","nordic mark sign":"北欧马克","manat sign":"马纳特符号","ruble sign":"卢布符号","yen character":"日元字样","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","yen/yuan character variant one":"元字样（大写）","Loading emoticons...":"加载表情符号...","Could not load emoticons":"不能加载表情符号",People:"人类","Animals and Nature":"动物和自然","Food and Drink":"食物和饮品",Activity:"活动","Travel and Places":"旅游和地点",Objects:"物件",Flags:"旗帜",Characters:"字符","Characters (no spaces)":"字符(无空格)","{0} characters":"{0} 个字符","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。",Update:"更新","Color swatch":"颜色样本",Turquoise:"青绿色",Green:"绿色",Blue:"蓝色",Purple:"紫色","Navy Blue":"海军蓝","Dark Turquoise":"深蓝绿色","Dark Green":"深绿色","Medium Blue":"中蓝色","Medium Purple":"中紫色","Midnight Blue":"深蓝色",Yellow:"黄色",Orange:"橙色",Red:"红色","Light Gray":"浅灰色",Gray:"灰色","Dark Yellow":"暗黄色","Dark Orange":"深橙色","Dark Red":"深红色","Medium Gray":"中灰色","Dark Gray":"深灰色","Light Green":"浅绿色","Light Yellow":"浅黄色","Light Red":"浅红色","Light Purple":"浅紫色","Light Blue":"浅蓝色","Dark Purple":"深紫色","Dark Blue":"深蓝色",Black:"黑色",White:"白色","Switch to or from fullscreen mode":"切换全屏模式","Open help dialog":"打开帮助对话框",history:"历史",styles:"样式",formatting:"格式化",alignment:"对齐",indentation:"缩进","permanent pen":"记号笔",comments:"备注","Format Painter":"格式刷","Insert/edit iframe":"插入/编辑框架",Capitalization:"大写",lowercase:"小写",UPPERCASE:"大写","Title Case":"首字母大写","Permanent Pen Properties":"永久笔属性","Permanent pen properties...":"永久笔属性...",Font:"字体",Size:"字号","More...":"更多...","Spellcheck Language":"拼写检查语言","Select...":"选择...",Preferences:"首选项",Yes:"是",No:"否","Keyboard Navigation":"键盘指引",Version:"版本",Anchor:"锚点","Special character":"特殊符号","Code sample":"代码示例",Color:"颜色",Emoticons:"表情","Document properties":"文档属性",Image:"图片","Insert link":"插入链接",Target:"打开方式",Link:"链接",Poster:"封面",Media:"媒体",Print:"打印",Prev:"上一个","Find and replace":"查找和替换","Whole words":"全字匹配",Spellcheck:"拼写检查",Caption:"标题","Insert template":"插入模板"})},2411:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/practical-teaching/"+t,method:"get"})}},"254d":function(t,e,n){},"2a3c":function(t,e,n){"use strict";n("254d")},"2caa":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",[n("el-steps",{attrs:{active:t.active,"align-center":""}},[n("el-step",{attrs:{description:"备案表基本信息"},nativeOn:{click:function(e){return t.handleStep(0)}}}),n("el-step",{attrs:{description:"负责人情况"},nativeOn:{click:function(e){return t.handleStep(1)}}}),n("el-step",{attrs:{description:"成员概况"},nativeOn:{click:function(e){return t.handleStep(2)}}}),n("el-step",{attrs:{description:"规章制度建设和队伍建设"},nativeOn:{click:function(e){return t.handleStep(3)}}}),n("el-step",{attrs:{description:"教学组织和课程教材概述"},nativeOn:{click:function(e){return t.handleStep(4)}}}),n("el-step",{attrs:{description:"教学研究和专业建设"},nativeOn:{click:function(e){return t.handleStep(5)}}}),n("el-step",{attrs:{description:"实践教学和条件保障"},nativeOn:{click:function(e){return t.handleStep(6)}}}),n("el-step",{attrs:{description:"人才培养能力"},nativeOn:{click:function(e){return t.handleStep(7)}}}),n("el-step",{attrs:{description:"今后建设计划"},nativeOn:{click:function(e){return t.handleStep(8)}}})],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active == 0"}]},[n("el-form",{attrs:{model:t.form.info}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("备案表基本信息")])])]),n("div",{staticClass:"div-style"},[n("el-row",{staticClass:"row-style",attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"教学组织名称"}},[n("el-autocomplete",{staticStyle:{width:"250px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.form.info.organization,callback:function(e){t.$set(t.form.info,"organization",e)},expression:"form.info.organization"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"基层教学组织类型"},model:{value:t.form.info.type,callback:function(e){t.$set(t.form.info,"type",e)},expression:"form.info.type"}},[n("el-input",{staticStyle:{width:"250px"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属学院"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.info.college,callback:function(e){t.$set(t.form.info,"college",e)},expression:"form.info.college"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"负责人"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.principal,callback:function(e){t.$set(t.form.info,"principal",e)},expression:"form.info.principal"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"基层教学组织级别"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.level,callback:function(e){t.$set(t.form.info,"level",e)},expression:"form.info.level"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},model:{value:t.form.info.professionalTitle,callback:function(e){t.$set(t.form.info,"professionalTitle",e)},expression:"form.info.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"设立时间/年"},model:{value:t.form.info.createYear,callback:function(e){t.$set(t.form.info,"createYear",e)},expression:"form.info.createYear"}},[n("el-input",{staticStyle:{width:"250px"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"负责人工号"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.info.principalNumber,callback:function(e){t.$set(t.form.info,"principalNumber",e)},expression:"form.info.principalNumber"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"是否面向多个专业"}},[n("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},model:{value:t.form.info.faceMultiple,callback:function(e){t.$set(t.form.info,"faceMultiple",e)},expression:"form.info.faceMultiple"}},[n("el-option",{attrs:{label:"是",value:"是"}}),n("el-option",{attrs:{label:"否",value:"否"}})],1)],1)],1)],1),n("el-row",{staticClass:"row-style",attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"面向校内专业(大类)名称"}},[n("el-autocomplete",{staticStyle:{width:"250px"},attrs:{"fetch-suggestions":t.querySearchInfo,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.handleSelectInfo},model:{value:t.form.info.schoolOrientedProfessionalTitles,callback:function(e){t.$set(t.form.info,"schoolOrientedProfessionalTitles",e)},expression:"form.info.schoolOrientedProfessionalTitles"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-item_label",attrs:{label:"面向校内专业代码(大类)"}},[n("el-input",{attrs:{disabled:""},model:{value:t.form.info.schoolOrientedProfessionalTitlesCode,callback:function(e){t.$set(t.form.info,"schoolOrientedProfessionalTitlesCode",e)},expression:"form.info.schoolOrientedProfessionalTitlesCode"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"面向校内专业比例"}},[n("el-input",{model:{value:t.form.info.schoolOrientedProfessionalTitlesProporation,callback:function(e){t.$set(t.form.info,"schoolOrientedProfessionalTitlesProporation",e)},expression:"\n                  form.info.schoolOrientedProfessionalTitlesProporation\n                "}})],1)],1)],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}]},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-form",[n("Principal",{ref:"principal",attrs:{principalID:this.form.principalID},on:{getPrincipalID:function(e){return t.getPrincipalID(e)}},model:{value:this.form.principalID,callback:function(e){t.$set(this.form,"principalID",e)},expression:"this.form.principalID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1)],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:2==t.active,expression:"active == 2"}]},[n("Members",{ref:"members",attrs:{membersID:this.form.membersID},on:{getMembersID:function(e){return t.getMembersID(e)}},model:{value:this.form.membersID,callback:function(e){t.$set(this.form,"membersID",e)},expression:"this.form.membersID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:3==t.active,expression:"active == 3"}]},[n("Rules",{ref:"rules",attrs:{ruleAndRegulationID:this.form.ruleAndRegulationID},on:{getRulesID:function(e){return t.getRulesID(e)}},model:{value:this.form.ruleAndRegulationID,callback:function(e){t.$set(this.form,"ruleAndRegulationID",e)},expression:"this.form.ruleAndRegulationID"}}),n("Team",{ref:"teambuilding",attrs:{teamBuildingID:this.form.teamBuildingID},on:{getTeamBuildingID:function(e){return t.getTeamBuildingID(e)}},model:{value:this.form.teamBuildingID,callback:function(e){t.$set(this.form,"teamBuildingID",e)},expression:"this.form.teamBuildingID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:4==t.active,expression:"active == 4"}]},[n("Organization",{ref:"organization",attrs:{teachingOrganizationID:this.form.teachingOrganizationID},on:{getOrganizationID:function(e){return t.getOrganizationID(e)}},model:{value:this.form.teachingOrganizationID,callback:function(e){t.$set(this.form,"teachingOrganizationID",e)},expression:"this.form.teachingOrganizationID"}}),n("CourseMaterial",{ref:"coursematerial",attrs:{courseMaterialID:this.form.courseMaterialID},on:{getCourseMaterialID:function(e){return t.getCourseMaterialID(e)}},model:{value:this.form.courseMaterialID,callback:function(e){t.$set(this.form,"courseMaterialID",e)},expression:"this.form.courseMaterialID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:5==t.active,expression:"active == 5"}]},[n("TeachingResearch",{ref:"teachingresearch",attrs:{teachingResearchID:this.form.teachingResearchID},on:{getTeachingResearchID:function(e){return t.getTeachingResearchID(e)}},model:{value:this.form.teachingResearchID,callback:function(e){t.$set(this.form,"teachingResearchID",e)},expression:"this.form.teachingResearchID"}}),n("SpecialtyConstruction",{ref:"specialtyconstruction",attrs:{specialtyConstructionID:this.form.specialtyConstructionID},on:{getSpecialtyConstructionID:function(e){return t.getSpecialtyConstructionID(e)}},model:{value:this.form.specialtyConstructionID,callback:function(e){t.$set(this.form,"specialtyConstructionID",e)},expression:"this.form.specialtyConstructionID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:6==t.active,expression:"active == 6"}]},[n("PracticalTeaching",{ref:"practicalteaching",attrs:{practicalTeachingID:this.form.practicalTeachingID},on:{getPracticalTeachingID:function(e){return t.getPracticalTeachingID(e)}},model:{value:this.form.practicalTeachingID,callback:function(e){t.$set(this.form,"practicalTeachingID",e)},expression:"this.form.practicalTeachingID"}}),n("ConditionGuarantee",{ref:"conditionguarantee",attrs:{conditionGuaranteeID:this.form.conditionGuaranteeID},on:{getConditionGuaranteeID:function(e){return t.getConditionGuaranteeID(e)}},model:{value:this.form.conditionGuaranteeID,callback:function(e){t.$set(this.form,"conditionGuaranteeID",e)},expression:"this.form.conditionGuaranteeID"}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:7==t.active,expression:"active == 7"}]},[n("TalentCultivationAbility",{ref:"talentcultivationability",attrs:{talentCultivationAbilityID:this.form.talentCultivationAbilityID},on:{getTalentCultivationAbilityID:function(e){return t.getTalentCultivationAbilityID(e)}},model:{value:this.form.talentCultivationAbilityID,callback:function(e){t.$set(this.form,"talentCultivationAbilityID",e)},expression:"\n        this.form.talentCultivationAbilityID\n      "}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:8==t.active,expression:"active == 8"}]},[n("FutureConstructionPlan",{ref:"futureconstructionplan",attrs:{futureConstructionPlanID:this.form.futureConstructionPlanID},on:{getFutureConstructionPlanID:function(e){return t.getFutureConstructionPlanID(e)}},model:{value:this.form.futureConstructionPlanID,callback:function(e){t.$set(this.form,"futureConstructionPlanID",e)},expression:"this.form.futureConstructionPlanID"}}),n("opinionFeedBack",{style:{display:t.updateHidden},attrs:{opinionFeedbackID:this.form.opinionFeedbackID}}),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:t.prePage}},[t._v("上一页")]),n("el-button",{style:{display:t.buttenHidden},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")]),n("el-button",{style:{display:t.updateHidden},attrs:{type:"primary"},on:{click:t.handleUpdate}},[t._v("确认修改")])],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:9==t.active,expression:"active == 9"}]},[n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("svg-icon",{staticStyle:{width:"7rem",height:"7rem"},attrs:{iconClass:"success"}})],1),n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"action-text"},[t._v("提交成功")])]),n("el-row",{staticClass:"action-content",attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"action-subtext"},[t._v("请等待管理员进行审核")])])],1)],1)},r=[],i=n("1da1"),a=(n("96cf"),n("4de4"),n("b64b"),n("3796")),u=n("c00a"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("负责人情况")])])]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"出生年月"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.birthdate,callback:function(e){t.$set(t.form,"birthdate",e)},expression:"form.birthdate"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[n("el-option",{attrs:{label:"男",value:"男"}}),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"政治面貌"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.politicalAffiliation,callback:function(e){t.$set(t.form,"politicalAffiliation",e)},expression:"form.politicalAffiliation"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"教学组织名称"}},[n("el-input",{model:{value:t.form.nameOfTeachingOrganization,callback:function(e){t.$set(t.form,"nameOfTeachingOrganization",e)},expression:"form.nameOfTeachingOrganization"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"隶属单位"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.subordinateUnit,callback:function(e){t.$set(t.form,"subordinateUnit",e)},expression:"form.subordinateUnit"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"类别"}},[n("el-select",{attrs:{placeholder:"类别"},model:{value:t.form.classification,callback:function(e){t.$set(t.form,"classification",e)},expression:"form.classification"}},[n("el-option",{attrs:{label:"国家级",value:"国家级"}}),n("el-option",{attrs:{label:"省级",value:"省级"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批等级"}},[n("el-select",{attrs:{placeholder:"获批等级"},model:{value:t.form.approvalLevel.provincialQualificationOfTime,callback:function(e){t.$set(t.form.approvalLevel,"provincialQualificationOfTime",e)},expression:"form.approvalLevel.provincialQualificationOfTime"}},[n("el-option",{attrs:{label:"省级优秀",value:"省级优秀"}}),n("el-option",{attrs:{label:"省级合格",value:"省级合格"}}),n("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"获批时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.approvalLevel.provincialExcellenceOfTime,callback:function(e){t.$set(t.form.approvalLevel,"provincialExcellenceOfTime",e)},expression:"form.approvalLevel.provincialExcellenceOfTime"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"最终学历（学位）"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.degree,callback:function(e){t.$set(t.form,"degree",e)},expression:"form.degree"}},t._l(t.optionsOfDegree,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"授予单位"}},[n("el-input",{model:{value:t.form.authorizationDepartment,callback:function(e){t.$set(t.form,"authorizationDepartment",e)},expression:"form.authorizationDepartment"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"授予时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.dateOfGrant,callback:function(e){t.$set(t.form,"dateOfGrant",e)},expression:"form.dateOfGrant"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"高校教龄"}},[n("el-input",{model:{value:t.form.universityTeachingAge,callback:function(e){t.$set(t.form,"universityTeachingAge",e)},expression:"form.universityTeachingAge"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择"},model:{value:t.form.professionalTitle,callback:function(e){t.$set(t.form,"professionalTitle",e)},expression:"form.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"行政职务"}},[n("el-input",{model:{value:t.form.administrativeDuties,callback:function(e){t.$set(t.form,"administrativeDuties",e)},expression:"form.administrativeDuties"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"任基层教学组织负责人时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.dateOfHeadOfBasicTeachingOrganization,callback:function(e){t.$set(t.form,"dateOfHeadOfBasicTeachingOrganization",e)},expression:"form.dateOfHeadOfBasicTeachingOrganization"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"岗位津贴"}},[n("el-input",{model:{value:t.form.postAllowance,callback:function(e){t.$set(t.form,"postAllowance",e)},expression:"form.postAllowance"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"近2学年教授课程及学时"}},[n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.PrincipalInfo.dialogVisible)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.PrincipalInfo.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"course",label:"教授课程"}}),n("el-table-column",{attrs:{prop:"period",label:"学时"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{float:"left"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return t.handleClickEdit(t.PrincipalInfo,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{float:"right"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(n){return t.handleClickDelete(t.PrincipalInfo,e.$index)}}})],1)]}}])})],1),n("el-dialog",{attrs:{title:"近两年教授课程及学时",visible:t.PrincipalInfo.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.PrincipalInfo.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教授课程"}},[n("el-input",{model:{value:t.tempData.course,callback:function(e){t.$set(t.tempData,"course",e)},expression:"tempData.course"}})],1),n("el-form-item",{attrs:{label:"学时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.PrincipalInfo.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.PrincipalInfo)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.PrincipalInfo)}}},[t._v("添加")])],1)],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"bottomClass",attrs:{label:"年均教学工作量及减免比例"}},[n("el-input",{model:{value:t.form.averageAnnualTeachingWorkloadAndReductionRatio,callback:function(e){t.$set(t.form,"averageAnnualTeachingWorkloadAndReductionRatio",e)},expression:"form.averageAnnualTeachingWorkloadAndReductionRatio"}})],1),n("el-form-item",{attrs:{label:"主要教学业绩"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.form.mainTeachingAchievements,callback:function(e){t.$set(t.form,"mainTeachingAchievements",e)},expression:"form.mainTeachingAchievements"}})],1)],1)],1),n("el-row")],1)},s=[],l=(n("a434"),n("2b0e")),f=n("b775");function m(t){return Object(f["a"])({url:"/declaration-form/principal",method:"post",data:t})}function d(t,e){return Object(f["a"])({url:"declaration-form/principal/"+t,method:"post",data:e})}var p=n("1d7f"),g={props:{principalID:{type:String}},data:function(){return{editStatus:!1,tempData:{},form:{nameOfTeachingOrganization:"",subordinateUnit:"",classification:"",approvalLevel:{provincialQualificationOfTime:"",provincialExcellenceOfTime:""},name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",authorizationDepartment:"",dateOfGrant:"",universityTeachingAge:"",professionalTitle:"",administrativeDuties:"",dateOfHeadOfBasicTeachingOrganization:"",postAllowance:"",teachingCoursesInRecentTwoAcademicYears:[{course:"",period:""}],averageAnnualTeachingWorkloadAndReductionRatio:"",mainTeachingAchievements:""},PrincipalInfo:{tables:[[]],dialogVisible:[!1]},options:["中共党员","中共预备党员","共青团员","民革党员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派人士","群众"],optionsOfDegree:["小学","初中","高中","大专","本科","硕士研究生","博士研究生"]}},watch:{principalID:function(t,e){this.getFormInfo()}},methods:{createPrincipalInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getInfo();case 2:return e.next=4,m(t.form).then((function(e){t.$emit("getPrincipalID",e.data.principalID)})).catch((function(t){console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},getInfo:function(){this.form.teachingCoursesInRecentTwoAcademicYears=void 0,this.form.teachingCoursesInRecentTwoAcademicYears=new Array;for(var t=0;t<this.PrincipalInfo.tables[0].length;t++){var e={};e["course"]=this.PrincipalInfo.tables[0][t].course,e["period"]=this.PrincipalInfo.tables[0][t].period,this.form.teachingCoursesInRecentTwoAcademicYears[t]=e}},getFormInfo:function(){var t=this;Object(p["a"])(this.principalID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);for(var r=0;r<t.form.teachingCoursesInRecentTwoAcademicYears.length;r++){var i={};i["course"]=t.form.teachingCoursesInRecentTwoAcademicYears[r].course,i["period"]=t.form.teachingCoursesInRecentTwoAcademicYears[r].period,l["default"].set(t.PrincipalInfo.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getInfo();case 2:return e.next=4,d(t.principalID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()}}},h=g,v=(n("84bb"),n("2877")),b=Object(v["a"])(h,c,s,!1,null,"3d80f507",null),y=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"成员信息",visible:t.memberDialogFormVisible},on:{"update:visible":function(e){t.memberDialogFormVisible=e}}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-form",{attrs:{model:t.tempMember}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.tempMember.name,callback:function(e){t.$set(t.tempMember,"name",e)},expression:"tempMember.name"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"出生年月"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempMember.birthdate,callback:function(e){t.$set(t.tempMember,"birthdate",e)},expression:"tempMember.birthdate"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.gender,callback:function(e){t.$set(t.tempMember,"gender",e)},expression:"tempMember.gender"}},[n("el-option",{attrs:{label:"男",value:"男"}}),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"政治面貌"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.politicalAffiliation,callback:function(e){t.$set(t.tempMember,"politicalAffiliation",e)},expression:"tempMember.politicalAffiliation"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"最终学位"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempMember.degree,callback:function(e){t.$set(t.tempMember,"degree",e)},expression:"tempMember.degree"}},t._l(t.optionsOfDegree,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"职称"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.tempMember.professionalTitle,callback:function(e){t.$set(t.tempMember,"professionalTitle",e)},expression:"tempMember.professionalTitle"}},[n("el-option",{attrs:{label:"助教",value:"助教"}}),n("el-option",{attrs:{label:"讲师",value:"讲师"}}),n("el-option",{attrs:{label:"副教授",value:"副教授"}}),n("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"行政职务"}},[n("el-input",{model:{value:t.tempMember.administrativeDuties,callback:function(e){t.$set(t.tempMember,"administrativeDuties",e)},expression:"tempMember.administrativeDuties"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"高校教龄"}},[n("el-input",{model:{value:t.tempMember.universityTeachingAge,callback:function(e){t.$set(t.tempMember,"universityTeachingAge",e)},expression:"tempMember.universityTeachingAge"}})],1)],1)],1),n("el-row",[n("el-form-item",{attrs:{label:"近2学年任教课程及学时"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.tempMember.teachingCoursesInRecentTwoAcademicYears,callback:function(e){t.$set(t.tempMember,"teachingCoursesInRecentTwoAcademicYears",e)},expression:"tempMember.teachingCoursesInRecentTwoAcademicYears"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.editMember(!1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.saveToMembers}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:t.addToMembers}},[t._v("添加")])],1)],1)],1)],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["name","birthdate","gender","politicalAffiliation","degree","professionalTitle","administrativeDuties","universityTeachingAge","JinLiangNianJiaoShouKeChengJiXueShi"]}})],1),n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("成员概况")])])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.editMember(!0)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:this.form.data,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"birthdate",label:"出生年月"}}),n("el-table-column",{attrs:{prop:"gender",label:"性别"}}),n("el-table-column",{attrs:{prop:"politicalAffiliation",label:"政治面貌"}}),n("el-table-column",{attrs:{prop:"degree",label:"最终学位"}}),n("el-table-column",{attrs:{prop:"professionalTitle",label:"职称"}}),n("el-table-column",{attrs:{prop:"administrativeDuties",label:"行政职务"}}),n("el-table-column",{attrs:{prop:"universityTeachingAge",label:"高校教龄"}}),n("el-table-column",{attrs:{width:"200",prop:"teachingCoursesInRecentTwoAcademicYears",label:"近2学年任教课程及学时"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleEdit(e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleDelete(e.$index)}}})],1)]}}])})],1)],1)},w=[];n("b0c0"),n("d3b7"),n("25f0"),n("5319"),n("ac1f"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("3ca3"),n("ddb0");function C(t){return Object(f["a"])({url:"/declaration-form/teachers",method:"post",data:t})}function k(t,e){return Object(f["a"])({url:"/declaration-form/teachers/"+t,method:"post",data:e})}var S=n("58bd"),O={props:{membersID:{type:String}},components:{UploadExcel:a["a"]},data:function(){return{form:{data:[],queryInfo:{},count:""},memberDialogFormVisible:!1,uploadExcelDialogFormVisible:!1,editStatus:!1,editIndex:-1,tempMember:{name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",professionalTitle:"",administrativeDuties:"",universityTeachingAge:"",teachingCoursesInRecentTwoAcademicYears:""},options:["中共党员","中共预备党员","共青团员","民革党员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派人士","群众"],optionsOfDegree:["小学","初中","高中","大专","本科","硕士研究生","博士研究生"]}},watch:{membersID:function(t,e){this.getFormInfo()}},methods:{createMembersInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C(t.form).then((function(e){console.log(e.data.membersID),t.$emit("getMembersID",e.data.membersID)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},editMember:function(t){this.tempMember={name:"",birthdate:"",gender:"",politicalAffiliation:"",degree:"",professionalTitle:"",administrativeDuties:"",universityTeachingAge:"",teachingCoursesInRecentTwoAcademicYears:""},this.memberDialogFormVisible=t,this.editStatus=!1},addToMembers:function(){this.form.data.push(this.tempMember),this.editMember(!1)},saveToMembers:function(){l["default"].set(this.form.data,this.editIndex,this.tempMember),this.editMember(!1)},importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.name=e[n].name,o.birthdate=e[n].birthdate,o.gender=e[n].gender,o.politicalAffiliation=e[n].politicalAffiliation,o.degree=e[n].degree,o.professionalTitle=e[n].professionalTitle,o.administrativeDuties=e[n].administrativeDuties,o.universityTeachingAge=e[n].universityTeachingAge,o.teachingCoursesInRecentTwoAcademicYears=e[n].teachingCoursesInRecentTwoAcademicYears,this.form.data.push(o)}this.uploadExcelDialogFormVisible=!1},handleEdit:function(t,e){var n=_.cloneDeep(t);this.tempMember=n,this.editIndex=e,this.editStatus=!0,this.memberDialogFormVisible=!0},handleDelete:function(t){this.form.data.splice(t,1)},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["姓名","出生年月","性别","政治面貌","最终学位","职称","行政职务","高校教龄","近2学年任教课程及学时"],["无名氏","1999年5月12","男","中共党员","博士","教授","院长","10","C#程序设计，35学时"]])},getFormInfo:function(){var t=this;Object(S["a"])(this.membersID).then((function(e){console.log(e);var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o])}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k(t.membersID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},D=O,T=(n("31f1"),Object(v["a"])(D,x,w,!1,null,"dfd3c71e",null)),I=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("规章制度建设")])])]),n("Tinymce",{ref:"rules",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},A=[],F=n("d5a5");function R(t){return Object(f["a"])({url:"/declaration-form/rules-and-regulations",method:"post",data:t})}function M(t,e){return Object(f["a"])({url:"/declaration-form/rules-and-regulations/"+t,method:"post",data:e})}var P=n("e5ac"),B={props:{ruleAndRegulationID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）基本管理制度&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）发展目标&nbsp;&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）本学年年度计划</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{ruleAndRegulationID:function(t,e){this.getFormInfo()}},methods:{createRulesInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,R(t.form).then((function(e){t.$emit("getRulesID",e.data.ruleAndRegulationID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},getFormInfo:function(){var t=this;Object(P["a"])(this.ruleAndRegulationID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.rules.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,M(t.ruleAndRegulationID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},V=B,z=(n("fc60"),Object(v["a"])(V,E,A,!1,null,"06408fa0",null)),j=z.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("队伍建设")])])]),n("Tinymce",{ref:"team",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.DuiWuJianShe.dialogVisible)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.DuiWuJianShe.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfNewTeacher",label:"新入职教师姓名"}}),n("el-table-column",{attrs:{prop:"trainingTime",label:"培训时间（学时）"}}),n("el-table-column",{attrs:{prop:"trainingPlace",label:"培训地点"}}),n("el-table-column",{attrs:{prop:"trainingInstitution",label:"培训单位"}}),n("el-table-column",{attrs:{prop:"supervisor",label:"指导教师"}}),n("el-table-column",{attrs:{prop:"professionalTitle",label:"职称"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.DuiWuJianShe,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.DuiWuJianShe,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"新入职教师信息",visible:t.DuiWuJianShe.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.DuiWuJianShe.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"新入职教师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfNewTeacher,callback:function(e){t.$set(t.tempData,"nameOfNewTeacher",e)},expression:"tempData.nameOfNewTeacher"}})],1),n("el-form-item",{attrs:{label:"培训时间（学时）"}},[n("el-input",{model:{value:t.tempData.trainingTime,callback:function(e){t.$set(t.tempData,"trainingTime",e)},expression:"tempData.trainingTime"}})],1),n("el-form-item",{attrs:{label:"培训地点"}},[n("el-input",{model:{value:t.tempData.trainingPlace,callback:function(e){t.$set(t.tempData,"trainingPlace",e)},expression:"tempData.trainingPlace"}})],1),n("el-form-item",{attrs:{label:"培训单位"}},[n("el-input",{model:{value:t.tempData.trainingInstitution,callback:function(e){t.$set(t.tempData,"trainingInstitution",e)},expression:"tempData.trainingInstitution"}})],1),n("el-form-item",{attrs:{label:"指导教师"}},[n("el-input",{model:{value:t.tempData.supervisor,callback:function(e){t.$set(t.tempData,"supervisor",e)},expression:"tempData.supervisor"}})],1),n("el-form-item",{attrs:{label:"职称"}},[n("el-input",{model:{value:t.tempData.professionalTitle,callback:function(e){t.$set(t.tempData,"professionalTitle",e)},expression:"tempData.professionalTitle"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.DuiWuJianShe.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.DuiWuJianShe)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.DuiWuJianShe)}}},[t._v("添加")])],1)],1)],1)],1)},H=[];function L(t){return Object(f["a"])({url:"/declaration-form/team-building",method:"post",data:t})}function J(t,e){return Object(f["a"])({url:"/declaration-form/team-building/"+t,method:"post",data:e})}var $=n("34e7"),U={props:{teamBuildingID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{editStatus:!1,tempData:{},form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）师德建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）团队结构&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教师传帮带机制&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）双师型教师建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},newTeachers:[{nameOfNewTeacher:"",trainingTime:"",trainingPlace:"",trainingInstitution:"",supervisor:"",professionalTitle:""}]},DuiWuJianShe:{tables:[[]],dialogVisible:[!1]}}},watch:{teamBuildingID:function(t,e){this.getFormInfo()}},methods:{handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createTeamInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,L(t.form).then((function(e){console.log(t.form),t.$emit("getTeamBuildingID",e.data.teamBuildingID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.newTeachers=void 0,this.form.newTeachers=new Array;for(var t=0;t<this.DuiWuJianShe.tables[0].length;t++){var e={};e["nameOfNewTeacher"]=this.DuiWuJianShe.tables[0][t].nameOfNewTeacher,e["trainingTime"]=this.DuiWuJianShe.tables[0][t].trainingTime,e["trainingPlace"]=this.DuiWuJianShe.tables[0][t].trainingPlace,e["trainingInstitution"]=this.DuiWuJianShe.tables[0][t].trainingInstitution,e["supervisor"]=this.DuiWuJianShe.tables[0][t].supervisor,e["professionalTitle"]=this.DuiWuJianShe.tables[0][t].professionalTitle,this.form.newTeachers[t]=e}},getFormInfo:function(){var t=this;Object($["a"])(this.teamBuildingID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.team.setContent(t.form.content.html);for(var r=0;r<t.form.newTeachers.length;r++){var i={};i["nameOfNewTeacher"]=t.form.newTeachers[r].nameOfNewTeacher,i["trainingTime"]=t.form.newTeachers[r].trainingTime,i["trainingPlace"]=t.form.newTeachers[r].trainingPlace,i["trainingInstitution"]=t.form.newTeachers[r].trainingInstitution,i["supervisor"]=t.form.newTeachers[r].supervisor,i["professionalTitle"]=t.form.newTeachers[r].professionalTitle,l["default"].set(t.DuiWuJianShe.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,J(t.teamBuildingID,t.form).then((function(e){console.log(t.form)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},W=U,G=(n("c710"),Object(v["a"])(W,N,H,!1,null,"d656b32c",null)),X=G.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("教学组织")])])]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"教师总数（人）"}},[n("el-input",{model:{value:t.form.totalNumberOfTeachers,callback:function(e){t.$set(t.form,"totalNumberOfTeachers",e)},expression:"form.totalNumberOfTeachers"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"承担课程（门）"}},[n("el-input",{model:{value:t.form.coursesUndertaken,callback:function(e){t.$set(t.form,"coursesUndertaken",e)},expression:"form.coursesUndertaken"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"人均周学时"}},[n("el-input",{model:{value:t.form.perCapitaWeeklySchoolHours,callback:function(e){t.$set(t.form,"perCapitaWeeklySchoolHours",e)},expression:"form.perCapitaWeeklySchoolHours"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"人均指导毕业论文/设计"}},[n("el-input",{model:{value:t.form.perCapitaGuidingGraduationThesis,callback:function(e){t.$set(t.form,"perCapitaGuidingGraduationThesis",e)},expression:"form.perCapitaGuidingGraduationThesis"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{label:"教学事故（次）"}},[n("el-input",{model:{value:t.form.teachingAccident,callback:function(e){t.$set(t.form,"teachingAccident",e)},expression:"form.teachingAccident"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"综合评教优秀以上人数及比例"}},[n("el-input",{model:{value:t.form.comprehensiveEvaluationOfExcellentTeaching,callback:function(e){t.$set(t.form,"comprehensiveEvaluationOfExcellentTeaching",e)},expression:"form.comprehensiveEvaluationOfExcellentTeaching"}})],1)],1)],1),n("Tinymce",{ref:"organ",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["professorName","course","period","studentNumbers","semesterTime"],attr:["教授姓名","讲授课程","学时","学生人数","学期时间"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueZuZhi.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueZuZhi.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"professorName",label:"教授姓名"}}),n("el-table-column",{attrs:{prop:"course",label:"讲授课程"}}),n("el-table-column",{attrs:{prop:"period",label:"学时"}}),n("el-table-column",{attrs:{prop:"studentNumbers",label:"学生人数"}}),n("el-table-column",{attrs:{prop:"semesterTime",label:"学期时间"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueZuZhi,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueZuZhi,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"教学组织信息",visible:t.part3.JiaoXueZuZhi.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueZuZhi.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教授姓名"}},[n("el-input",{model:{value:t.tempData.professorName,callback:function(e){t.$set(t.tempData,"professorName",e)},expression:"tempData.professorName"}})],1),n("el-form-item",{attrs:{label:"讲授课程"}},[n("el-input",{model:{value:t.tempData.course,callback:function(e){t.$set(t.tempData,"course",e)},expression:"tempData.course"}})],1),n("el-form-item",{attrs:{label:"学时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-form-item",{attrs:{label:"学生人数"}},[n("el-input",{model:{value:t.tempData.studentNumbers,callback:function(e){t.$set(t.tempData,"studentNumbers",e)},expression:"tempData.studentNumbers"}})],1),n("el-form-item",{attrs:{label:"学期时间"}},[n("el-input",{model:{value:t.tempData.semesterTime,callback:function(e){t.$set(t.tempData,"semesterTime",e)},expression:"tempData.semesterTime"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueZuZhi.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueZuZhi)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueZuZhi)}}},[t._v("添加")])],1)],1)],1)],1)},K=[];function q(t){return Object(f["a"])({url:"/declaration-form/teaching-organization",method:"post",data:t})}function Z(t,e){return Object(f["a"])({url:"/declaration-form/teaching-organization/"+t,method:"post",data:e})}var Q=n("9367"),tt={props:{teachingOrganizationID:{type:String}},components:{Tinymce:F["a"],UploadExcel:a["a"]},data:function(){return{uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{totalNumberOfTeachers:"",coursesUndertaken:"",perCapitaWeeklySchoolHours:"",perCapitaGuidingGraduationThesis:"",teachingAccident:"",comprehensiveEvaluationOfExcellentTeaching:"",content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教学计划&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）课堂教学&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教学运行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）教学评价情况</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{professorName:"",course:"",period:"",studentNumbers:"",semesterTime:""}]},part3:{JiaoXueZuZhi:{tables:[[]],dialogVisible:[!1]}}}},watch:{teachingOrganizationID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教授姓名","讲授课程","学时","学生人数","学期时间"],["无名氏","高数","32","156","2020-2021学年第一学期"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.professorName=e[n].professorName,o.course=e[n].course,o.period=e[n].period,o.studentNumbers=e[n].studentNumbers,o.semesterTime=e[n].semesterTime,this.form.info.push(o),this.part3.JiaoXueZuZhi.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createOrganizationInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,q(t.form).then((function(e){t.$emit("getOrganizationID",e.data.teachingOrganizationID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.JiaoXueZuZhi.tables[0].length;t++){var e={};e["professorName"]=this.part3.JiaoXueZuZhi.tables[0][t].professorName,e["course"]=this.part3.JiaoXueZuZhi.tables[0][t].course,e["period"]=this.part3.JiaoXueZuZhi.tables[0][t].period,e["studentNumbers"]=this.part3.JiaoXueZuZhi.tables[0][t].studentNumbers,e["semesterTime"]=this.part3.JiaoXueZuZhi.tables[0][t].semesterTime,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Q["a"])(this.teachingOrganizationID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.organ.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["professorName"]=t.form.info[r].professorName,i["course"]=t.form.info[r].course,i["period"]=t.form.info[r].period,i["studentNumbers"]=t.form.info[r].studentNumbers,i["semesterTime"]=t.form.info[r].semesterTime,l["default"].set(t.part3.JiaoXueZuZhi.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Z(t.teachingOrganizationID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},et=tt,nt=(n("d4b4"),Object(v["a"])(et,Y,K,!1,null,"691a785d",null)),ot=nt.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("课程教材概述")])])]),n("Tinymce",{ref:"course",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleFirst},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleFirst=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessFirst,header:["onlineCourseName","platformSite","chosenNumbers","period","completionTime","level","professionalTitle"],attr:["在线开放课程","平台网址","选课人数","总课时","建成时间","校级/省级"]}})],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleSecond},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleSecond=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessSecond,header:["nameOfTeachingMaterial","editorInChief","participatingEditor","theNumberOfWordsInTheChapter","yearOfPublication","press","level"],attr:["规划教材名称","主编","参编","章节字数","出版年","出版社","省级/国家级"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.KeChengJiaoCaiGaiShu.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelFirst}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelFirst}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.KeChengJiaoCaiGaiShu.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"onlineCourseName",label:"在线开放课程"}}),n("el-table-column",{attrs:{prop:"platformSite",label:"平台网址"}}),n("el-table-column",{attrs:{prop:"chosenNumbers",label:"选课人数"}}),n("el-table-column",{attrs:{prop:"period",label:"总课时"}}),n("el-table-column",{attrs:{prop:"completionTime",label:"建成时间"}}),n("el-table-column",{attrs:{prop:"level",label:"校级/省级"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.KeChengJiaoCaiGaiShu,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.KeChengJiaoCaiGaiShu,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelSecond}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelSecond}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.KeChengJiaoCaiGaiShu.tables[1],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingMaterial",label:"规划教材名称"}}),n("el-table-column",{attrs:{prop:"editorInChief",label:"主编"}}),n("el-table-column",{attrs:{prop:"participatingEditor",label:"参编"}}),n("el-table-column",{attrs:{prop:"theNumberOfWordsInTheChapter",label:"章节字数"}}),n("el-table-column",{attrs:{prop:"yearOfPublication",label:"出版年"}}),n("el-table-column",{attrs:{prop:"press",label:"出版社"}}),n("el-table-column",{attrs:{prop:"level",label:"省级/国家级"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.KeChengJiaoCaiGaiShu,e.row,e.$index,1)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.KeChengJiaoCaiGaiShu,e.$index,1)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"在线课程信息",visible:t.part3.KeChengJiaoCaiGaiShu.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"在线开放课程"}},[n("el-input",{model:{value:t.tempData.onlineCourseName,callback:function(e){t.$set(t.tempData,"onlineCourseName",e)},expression:"tempData.onlineCourseName"}})],1),n("el-form-item",{attrs:{label:"平台网址"}},[n("el-input",{model:{value:t.tempData.platformSite,callback:function(e){t.$set(t.tempData,"platformSite",e)},expression:"tempData.platformSite"}})],1),n("el-form-item",{attrs:{label:"选课人数"}},[n("el-input",{model:{value:t.tempData.chosenNumbers,callback:function(e){t.$set(t.tempData,"chosenNumbers",e)},expression:"tempData.chosenNumbers"}})],1),n("el-form-item",{attrs:{label:"总课时"}},[n("el-input",{model:{value:t.tempData.period,callback:function(e){t.$set(t.tempData,"period",e)},expression:"tempData.period"}})],1),n("el-form-item",{attrs:{label:"建成时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.completionTime,callback:function(e){t.$set(t.tempData,"completionTime",e)},expression:"tempData.completionTime"}})],1),n("el-form-item",{attrs:{label:"校级/省级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.KeChengJiaoCaiGaiShu.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.KeChengJiaoCaiGaiShu)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.KeChengJiaoCaiGaiShu)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"规划教材信息",visible:t.part3.KeChengJiaoCaiGaiShu.dialogVisible[1]},on:{"update:visible":function(e){return t.$set(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"规划教材名称"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingMaterial,callback:function(e){t.$set(t.tempData,"nameOfTeachingMaterial",e)},expression:"tempData.nameOfTeachingMaterial"}})],1),n("el-form-item",{attrs:{label:"主编"}},[n("el-input",{model:{value:t.tempData.editorInChief,callback:function(e){t.$set(t.tempData,"editorInChief",e)},expression:"tempData.editorInChief"}})],1),n("el-form-item",{attrs:{label:"参编"}},[n("el-input",{model:{value:t.tempData.participatingEditor,callback:function(e){t.$set(t.tempData,"participatingEditor",e)},expression:"tempData.participatingEditor"}})],1),n("el-form-item",{attrs:{label:"章节字数"}},[n("el-input",{model:{value:t.tempData.theNumberOfWordsInTheChapter,callback:function(e){t.$set(t.tempData,"theNumberOfWordsInTheChapter",e)},expression:"tempData.theNumberOfWordsInTheChapter"}})],1),n("el-form-item",{attrs:{label:"出版年"}},[n("el-input",{model:{value:t.tempData.yearOfPublication,callback:function(e){t.$set(t.tempData,"yearOfPublication",e)},expression:"tempData.yearOfPublication"}})],1),n("el-form-item",{attrs:{label:"出版社"}},[n("el-input",{model:{value:t.tempData.press,callback:function(e){t.$set(t.tempData,"press",e)},expression:"tempData.press"}})],1),n("el-form-item",{attrs:{label:"省级/国家级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.KeChengJiaoCaiGaiShu.dialogVisible,1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.KeChengJiaoCaiGaiShu,1)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.KeChengJiaoCaiGaiShu,1)}}},[t._v("添加")])],1)],1)],1)],1)},it=[];function at(t){return Object(f["a"])({url:"/declaration-form/course-material",method:"post",data:t})}function ut(t,e){return Object(f["a"])({url:"/declaration-form/course-material/"+t,method:"post",data:e})}var ct=n("fe41"),st={props:{courseMaterialID:{type:String}},components:{Tinymce:F["a"],UploadExcel:a["a"]},data:function(){return{uploadExcelDialogFormVisibleFirst:!1,uploadExcelDialogFormVisibleSecond:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{onlineCourses:[{onlineCourseName:"",platformSite:"",chosenNumbers:"",period:"",completionTime:"",level:""}],textbooks:[{nameOfTeachingMaterial:"",editorInChief:"",participatingEditor:"",theNumberOfWordsInTheChapter:"",yearOfPublication:"",press:"",level:""}],content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）课程体系建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）课程标准执行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）教材建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）在线开放课程建设</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}},part3:{KeChengJiaoCaiGaiShu:{tables:[[],[]],dialogVisible:[!1,!1]}}}},watch:{courseMaterialID:function(t,e){this.getFormInfo()}},methods:{importFromExcelFirst:function(){this.uploadExcelDialogFormVisibleFirst=!0},importFromExcelSecond:function(){this.uploadExcelDialogFormVisibleSecond=!0},exportExcelFirst:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["在线开放课程","平台网址","选课人数","总课时","建成时间","校级/省级"],["数学","www.aaa.com","32","32","2000年1月12","校级"]])},exportExcelSecond:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["规划教材名称","主编","参编","章节字数","出版年","出版社","省级/国家级"],["数学","小红","小明","10000","2012","河南大学出版社","国家级"]])},handleSuccessFirst:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.onlineCourseName=e[n].onlineCourseName,o.platformSite=e[n].platformSite,o.chosenNumbers=e[n].chosenNumbers,o.period=e[n].period,o.completionTime=e[n].completionTime,o.level=e[n].level,this.form.onlineCourses.push(o),this.part3.KeChengJiaoCaiGaiShu.tables[0].push(o)}this.uploadExcelDialogFormVisibleFirst=!1},handleSuccessSecond:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeachingMaterial=e[n].nameOfTeachingMaterial,o.editorInChief=e[n].editorInChief,o.participatingEditor=e[n].participatingEditor,o.theNumberOfWordsInTheChapter=e[n].theNumberOfWordsInTheChapter,o.yearOfPublication=e[n].yearOfPublication,o.press=e[n].press,o.level=e[n].level,this.form.textbooks.push(o),this.part3.KeChengJiaoCaiGaiShu.tables[1].push(o)}this.uploadExcelDialogFormVisibleSecond=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createCourseMaterialInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,at(t.form).then((function(e){console.log(t.form),t.$emit("getCourseMaterialID",e.data.courseMaterialID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.onlineCourses=void 0,this.form.onlineCourses=new Array;for(var t=0;t<this.part3.KeChengJiaoCaiGaiShu.tables[0].length;t++){var e={};e["onlineCourseName"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].onlineCourseName,e["platformSite"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].platformSite,e["chosenNumbers"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].chosenNumbers,e["period"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].period,e["completionTime"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].completionTime,e["level"]=this.part3.KeChengJiaoCaiGaiShu.tables[0][t].level,this.form.onlineCourses[t]=e}this.form.textbooks=void 0,this.form.textbooks=new Array;for(var n=0;n<this.part3.KeChengJiaoCaiGaiShu.tables[1].length;n++){var o={};o["nameOfTeachingMaterial"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].nameOfTeachingMaterial,o["editorInChief"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].editorInChief,o["participatingEditor"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].participatingEditor,o["theNumberOfWordsInTheChapter"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].theNumberOfWordsInTheChapter,o["yearOfPublication"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].yearOfPublication,o["press"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].press,o["level"]=this.part3.KeChengJiaoCaiGaiShu.tables[1][n].level,this.form.textbooks[n]=o}},getFormInfo:function(){var t=this;Object(ct["a"])(this.courseMaterialID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.course.setContent(t.form.content.html);for(var r=0;r<t.form.onlineCourses.length;r++){var i={};i["onlineCourseName"]=t.form.onlineCourses[r].onlineCourseName,i["platformSite"]=t.form.onlineCourses[r].platformSite,i["chosenNumbers"]=t.form.onlineCourses[r].chosenNumbers,i["period"]=t.form.onlineCourses[r].period,i["completionTime"]=t.form.onlineCourses[r].completionTime,i["level"]=t.form.onlineCourses[r].level,l["default"].set(t.part3.KeChengJiaoCaiGaiShu.tables[0],r,i)}for(var a=0;a<t.form.textbooks.length;a++){var u={};u["nameOfTeachingMaterial"]=t.form.textbooks[a].nameOfTeachingMaterial,u["editorInChief"]=t.form.textbooks[a].editorInChief,u["participatingEditor"]=t.form.textbooks[a].participatingEditor,u["theNumberOfWordsInTheChapter"]=t.form.textbooks[a].theNumberOfWordsInTheChapter,u["yearOfPublication"]=t.form.textbooks[a].yearOfPublication,u["press"]=t.form.textbooks[a].press,u["level"]=t.form.textbooks[a].level,l["default"].set(t.part3.KeChengJiaoCaiGaiShu.tables[1],a,u)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ut(t.courseMaterialID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},lt=st,ft=(n("dc08"),Object(v["a"])(lt,rt,it,!1,null,"29e52e60",null)),mt=ft.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("教学研究")])])]),n("Tinymce",{ref:"teaching",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleFirst},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleFirst=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessFirst,header:["nameOfEducationalReformProject","timeOfProjectEstablishment","projectSource","host","members","awards"],attr:["教改项目名称","立项时间","项目来源","主持人","成员","获奖等次(特等奖,一等奖,二等奖,三等奖,优秀奖)"]}})],1),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisibleSecond},on:{"update:visible":function(e){t.uploadExcelDialogFormVisibleSecond=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccessSecond,header:["nameOfTeachingResearchPaper","publishedTime","journalName","authorInChef"],attr:["教研论文名称","发表时间","期刊名称","第一作者"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelFirst}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelFirst}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfEducationalReformProject",label:"教改项目名称"}}),n("el-table-column",{attrs:{prop:"timeOfProjectEstablishment",label:"立项时间"}}),n("el-table-column",{attrs:{prop:"projectSource",label:"项目来源"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"members",label:"成员"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,1)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcelSecond}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcelSecond}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[1],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeachingResearchPaper",label:"教改论文题目"}}),n("el-table-column",{attrs:{prop:"publishedTime",label:"发表时间"}}),n("el-table-column",{attrs:{prop:"journalName",label:"期刊名称"}}),n("el-table-column",{attrs:{prop:"authorInChef",label:"第一作者"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,1)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,1)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[n("span",[t._v("5次代表性教研活动")])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,2)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[2],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"time",label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"host",label:"主持人"}}),n("el-table-column",{attrs:{prop:"hostPosition",label:"主持人职务"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,2)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,2)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[n("span",[t._v("5次代表性校外教学研讨会")])]),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.JiaoXueYanJiu.dialogVisible,3)}}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.part3.JiaoXueYanJiu.tables[3],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"timeYear",label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"地点"}}),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),n("el-table-column",{attrs:{prop:"organizer",label:"主办单位"}}),n("el-table-column",{attrs:{prop:"participants",label:"参加人员"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.JiaoXueYanJiu,e.row,e.$index,3)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.JiaoXueYanJiu,e.$index,3)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"教改项目信息",visible:t.part3.JiaoXueYanJiu.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教改项目名称"}},[n("el-input",{model:{value:t.tempData.nameOfEducationalReformProject,callback:function(e){t.$set(t.tempData,"nameOfEducationalReformProject",e)},expression:"tempData.nameOfEducationalReformProject"}})],1),n("el-form-item",{attrs:{label:"立项时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.timeOfProjectEstablishment,callback:function(e){t.$set(t.tempData,"timeOfProjectEstablishment",e)},expression:"tempData.timeOfProjectEstablishment"}})],1),n("el-form-item",{attrs:{label:"项目来源"}},[n("el-input",{model:{value:t.tempData.projectSource,callback:function(e){t.$set(t.tempData,"projectSource",e)},expression:"tempData.projectSource"}})],1),n("el-form-item",{attrs:{label:"主持人"}},[n("el-input",{model:{value:t.tempData.host,callback:function(e){t.$set(t.tempData,"host",e)},expression:"tempData.host"}})],1),n("el-form-item",{attrs:{label:"成员"}},[n("el-input",{model:{value:t.tempData.members,callback:function(e){t.$set(t.tempData,"members",e)},expression:"tempData.members"}})],1),n("el-form-item",{attrs:{label:"获奖等次"}},[n("el-input",{model:{value:t.tempData.awards,callback:function(e){t.$set(t.tempData,"awards",e)},expression:"tempData.awards"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"教改论文信息",visible:t.part3.JiaoXueYanJiu.dialogVisible[1]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,1,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教改论文题目"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingResearchPaper,callback:function(e){t.$set(t.tempData,"nameOfTeachingResearchPaper",e)},expression:"tempData.nameOfTeachingResearchPaper"}})],1),n("el-form-item",{attrs:{label:"发表时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.publishedTime,callback:function(e){t.$set(t.tempData,"publishedTime",e)},expression:"tempData.publishedTime"}})],1),n("el-form-item",{attrs:{label:"期刊名称"}},[n("el-input",{model:{value:t.tempData.journalName,callback:function(e){t.$set(t.tempData,"journalName",e)},expression:"tempData.journalName"}})],1),n("el-form-item",{attrs:{label:"第一作者"}},[n("el-input",{model:{value:t.tempData.authorInChef,callback:function(e){t.$set(t.tempData,"authorInChef",e)},expression:"tempData.authorInChef"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,1)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,1)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,1)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"代表性教研活动",visible:t.part3.JiaoXueYanJiu.dialogVisible[2]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,2,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.time,callback:function(e){t.$set(t.tempData,"time",e)},expression:"tempData.time"}})],1),n("el-form-item",{attrs:{label:"地点"}},[n("el-input",{model:{value:t.tempData.place,callback:function(e){t.$set(t.tempData,"place",e)},expression:"tempData.place"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.tempData.content,callback:function(e){t.$set(t.tempData,"content",e)},expression:"tempData.content"}})],1),n("el-form-item",{attrs:{label:"主持人"}},[n("el-input",{model:{value:t.tempData.host,callback:function(e){t.$set(t.tempData,"host",e)},expression:"tempData.host"}})],1),n("el-form-item",{attrs:{label:"主持人职务"}},[n("el-input",{model:{value:t.tempData.hostPosition,callback:function(e){t.$set(t.tempData,"hostPosition",e)},expression:"tempData.hostPosition"}})],1),n("el-form-item",{attrs:{label:"参加人员"}},[n("el-input",{model:{value:t.tempData.participants,callback:function(e){t.$set(t.tempData,"participants",e)},expression:"tempData.participants"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,2)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,2)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,2)}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"代表性校外教学研讨会",visible:t.part3.JiaoXueYanJiu.dialogVisible[3]},on:{"update:visible":function(e){return t.$set(t.part3.JiaoXueYanJiu.dialogVisible,3,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"时间/年份"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempData.timeYear,callback:function(e){t.$set(t.tempData,"timeYear",e)},expression:"tempData.timeYear"}})],1),n("el-form-item",{attrs:{label:"地点"}},[n("el-input",{model:{value:t.tempData.place,callback:function(e){t.$set(t.tempData,"place",e)},expression:"tempData.place"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.tempData.content,callback:function(e){t.$set(t.tempData,"content",e)},expression:"tempData.content"}})],1),n("el-form-item",{attrs:{label:"主办单位"}},[n("el-input",{model:{value:t.tempData.organizer,callback:function(e){t.$set(t.tempData,"organizer",e)},expression:"tempData.organizer"}})],1),n("el-form-item",{attrs:{label:"参加人员"}},[n("el-input",{model:{value:t.tempData.participants,callback:function(e){t.$set(t.tempData,"participants",e)},expression:"tempData.participants"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.JiaoXueYanJiu.dialogVisible,3)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.JiaoXueYanJiu,3)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.JiaoXueYanJiu,3)}}},[t._v("添加")])],1)],1)],1)],1)},pt=[];function gt(t){return Object(f["a"])({url:"/declaration-form/teaching-research",method:"post",data:t})}function ht(t,e){return Object(f["a"])({url:"/declaration-form/teaching-research/"+t,method:"post",data:e})}var vt=n("09bf"),bt={props:{teachingResearchID:{type:String}},components:{Tinymce:F["a"],UploadExcel:a["a"]},data:function(){return{uploadExcelDialogFormVisibleFirst:!1,uploadExcelDialogFormVisibleSecond:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教改项目和教研论文&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）教研活动和听评课&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},educationalReformProjects:[{nameOfEducationalReformProject:"",timeOfProjectEstablishment:"",projectSource:"",host:"",members:"",awards:""}],teachingResearchPapers:[{nameOfTeachingResearchPaper:"",publishedTime:"",journalName:"",authorInChef:""}],representativeTeachingAndResearchActivities:[{time:"",place:"",content:"",host:"",hostPosition:"",participants:""}],representativeOffCampusTeachingSeminars:[{time:"",place:"",content:"",organizer:"",participants:""}]},part3:{JiaoXueYanJiu:{JiaoGaiXiangMuHeJiaoYanLunWen:"",JiaoYanHuoDongHeTingPingKe:"",tables:[[],[],[],[]],dialogVisible:[!1,!1,!1,!1]}}}},watch:{teachingResearchID:function(t,e){this.teachingResearchID=t,this.getFormInfo()},value:function(t,e){var n=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(n.tinymceId).setContent(t)}))}},methods:{importFromExcelFirst:function(){this.uploadExcelDialogFormVisibleFirst=!0},importFromExcelSecond:function(){this.uploadExcelDialogFormVisibleSecond=!0},exportExcelFirst:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教改项目名称","立项时间","项目来源","主持人","成员","获奖等次(特等奖,一等奖,二等奖,三等奖,优秀奖)"],["数学","2012年12月12","项目来源","倪大红","倪大红,倪大黑","特等奖"]])},exportExcelSecond:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教研论文名称","发表时间","期刊名称","第一作者"],["数学","2012年12月12","小明","小黑"]])},handleSuccessFirst:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfEducationalReformProject=e[n].nameOfEducationalReformProject,o.timeOfProjectEstablishment=e[n].timeOfProjectEstablishment,o.projectSource=e[n].projectSource,o.host=e[n].host,o.members=e[n].members,o.awards=e[n].awards,this.form.educationalReformProjects.push(o),this.part3.JiaoXueYanJiu.tables[0].push(o)}this.uploadExcelDialogFormVisibleFirst=!1},handleSuccessSecond:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeachingResearchPaper=e[n].nameOfTeachingResearchPaper,o.publishedTime=e[n].publishedTime,o.journalName=e[n].journalName,o.authorInChef=e[n].authorInChef,this.form.teachingResearchPapers.push(o),this.part3.JiaoXueYanJiu.tables[1].push(o)}this.uploadExcelDialogFormVisibleSecond=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createTeachingReseacherInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,gt(t.form).then((function(e){t.$emit("getTeachingResearchID",e.data.teachingResearchID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,o,r,i,a,u,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.form.educationalReformProjects=void 0,t.form.educationalReformProjects=new Array,n=0;n<t.part3.JiaoXueYanJiu.tables[0].length;n++)o={},o["nameOfEducationalReformProject"]=t.part3.JiaoXueYanJiu.tables[0][n].nameOfEducationalReformProject,o["timeOfProjectEstablishment"]=t.part3.JiaoXueYanJiu.tables[0][n].timeOfProjectEstablishment,o["projectSource"]=t.part3.JiaoXueYanJiu.tables[0][n].projectSource,o["host"]=t.part3.JiaoXueYanJiu.tables[0][n].host,o["members"]=t.part3.JiaoXueYanJiu.tables[0][n].members,o["awards"]=t.part3.JiaoXueYanJiu.tables[0][n].awards,t.form.educationalReformProjects[n]=o;for(t.form.teachingResearchPapers=void 0,t.form.teachingResearchPapers=new Array,r=0;r<t.part3.JiaoXueYanJiu.tables[1].length;r++)i={},i["nameOfTeachingResearchPaper"]=t.part3.JiaoXueYanJiu.tables[1][r].nameOfTeachingResearchPaper,i["publishedTime"]=t.part3.JiaoXueYanJiu.tables[1][r].publishedTime,i["journalName"]=t.part3.JiaoXueYanJiu.tables[1][r].journalName,i["authorInChef"]=t.part3.JiaoXueYanJiu.tables[1][r].authorInChef,t.form.teachingResearchPapers[r]=i;for(t.form.representativeTeachingAndResearchActivities=void 0,t.form.representativeTeachingAndResearchActivities=new Array,a=0;a<t.part3.JiaoXueYanJiu.tables[2].length;a++)u={},u["time"]=t.part3.JiaoXueYanJiu.tables[2][a].time,u["place"]=t.part3.JiaoXueYanJiu.tables[2][a].place,u["content"]=t.part3.JiaoXueYanJiu.tables[2][a].content,u["host"]=t.part3.JiaoXueYanJiu.tables[2][a].host,u["hostPosition"]=t.part3.JiaoXueYanJiu.tables[2][a].hostPosition,u["participants"]=t.part3.JiaoXueYanJiu.tables[2][a].participants,t.form.representativeTeachingAndResearchActivities[a]=u;for(t.form.representativeOffCampusTeachingSeminars=void 0,t.form.representativeOffCampusTeachingSeminars=new Array,c=0;c<t.part3.JiaoXueYanJiu.tables[3].length;c++)s={},s["time"]=t.part3.JiaoXueYanJiu.tables[3][c].timeYear,s["place"]=t.part3.JiaoXueYanJiu.tables[3][c].place,s["content"]=t.part3.JiaoXueYanJiu.tables[3][c].content,s["organizer"]=t.part3.JiaoXueYanJiu.tables[3][c].organizer,s["participants"]=t.part3.JiaoXueYanJiu.tables[3][c].participants,t.form.representativeOffCampusTeachingSeminars[c]=s;case 12:case"end":return e.stop()}}),e)})))()},getFormInfo:function(){var t=this;Object(vt["a"])(this.teachingResearchID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.teaching.setContent(t.form.content.html);for(var r=0;r<t.form.educationalReformProjects.length;r++){var i={};i["nameOfEducationalReformProject"]=t.form.educationalReformProjects[r].nameOfEducationalReformProject,i["timeOfProjectEstablishment"]=t.form.educationalReformProjects[r].timeOfProjectEstablishment,i["projectSource"]=t.form.educationalReformProjects[r].projectSource,i["host"]=t.form.educationalReformProjects[r].host,i["members"]=t.form.educationalReformProjects[r].members,i["awards"]=t.form.educationalReformProjects[r].awards,l["default"].set(t.part3.JiaoXueYanJiu.tables[0],r,i)}for(var a=0;a<t.form.teachingResearchPapers.length;a++){var u={};u["nameOfTeachingResearchPaper"]=t.form.teachingResearchPapers[a].nameOfTeachingResearchPaper,u["publishedTime"]=t.form.teachingResearchPapers[a].publishedTime,u["journalName"]=t.form.teachingResearchPapers[a].journalName,u["authorInChef"]=t.form.teachingResearchPapers[a].authorInChef,l["default"].set(t.part3.JiaoXueYanJiu.tables[1],a,u)}for(var c=0;c<t.form.representativeTeachingAndResearchActivities.length;c++){var s={};s["time"]=t.form.representativeTeachingAndResearchActivities[c].time,s["place"]=t.form.representativeTeachingAndResearchActivities[c].place,s["content"]=t.form.representativeTeachingAndResearchActivities[c].content,s["host"]=t.form.representativeTeachingAndResearchActivities[c].host,s["hostPosition"]=t.form.representativeTeachingAndResearchActivities[c].hostPosition,s["participants"]=t.form.representativeTeachingAndResearchActivities[c].participants,l["default"].set(t.part3.JiaoXueYanJiu.tables[2],c,s)}for(var f=0;f<t.form.representativeOffCampusTeachingSeminars.length;f++){var m={};m["timeYear"]=t.form.representativeOffCampusTeachingSeminars[f].time,m["place"]=t.form.representativeOffCampusTeachingSeminars[f].place,m["content"]=t.form.representativeOffCampusTeachingSeminars[f].content,m["organizer"]=t.form.representativeOffCampusTeachingSeminars[f].organizer,m["participants"]=t.form.representativeOffCampusTeachingSeminars[f].participants,l["default"].set(t.part3.JiaoXueYanJiu.tables[3],f,m)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ht(t.teachingResearchID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},yt=bt,xt=(n("4c42"),Object(v["a"])(yt,dt,pt,!1,null,"12bcc720",null)),wt=xt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("专业建设")])])]),n("Tinymce",{ref:"specialty",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业名称"}},[n("el-input",{model:{value:t.form.info.nameOfSpecialty,callback:function(e){t.$set(t.form.info,"nameOfSpecialty",e)},expression:"form.info.nameOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"专业认证"}},[n("el-input",{model:{value:t.form.info.certificationOfSpecialty,callback:function(e){t.$set(t.form.info,"certificationOfSpecialty",e)},expression:"form.info.certificationOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"专业评估"}},[n("el-input",{model:{value:t.form.info.evaluationOfSpecialty,callback:function(e){t.$set(t.form.info,"evaluationOfSpecialty",e)},expression:"form.info.evaluationOfSpecialty"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"获得特色、综合改革试点专业等称号"}},[n("el-input",{model:{value:t.form.info.features,callback:function(e){t.$set(t.form.info,"features",e)},expression:"form.info.features"}})],1)],1)],1)],1)},kt=[];function St(t){return Object(f["a"])({url:"/declaration-form/specialty-construction",method:"post",data:t})}function Ot(t,e){return Object(f["a"])({url:"/declaration-form/specialty-construction/"+t,method:"post",data:e})}var Dt=n("6b84"),Tt={props:{specialtyConstructionID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{info:{nameOfSpecialty:"",certificationOfSpecialty:"",evaluationOfSpecialty:"",features:""},content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）专业建设规划&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）人才培养方案修订落实&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）专业教学质量波准执行&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）专业认证和专业评估&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{specialtyConstructionID:function(t,e){this.getFormInfo()}},methods:{createSpecialtyConstructionInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,St(t.form).then((function(e){t.$emit("getSpecialtyConstructionID",e.data.specialtyConstructionID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object(Dt["a"])(this.specialtyConstructionID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.specialty.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Ot(t.specialtyConstructionID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},_t=Tt,It=(n("fc0e"),Object(v["a"])(_t,Ct,kt,!1,null,"5498aee9",null)),Et=It.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("实践教学")])])]),n("Tinymce",{ref:"practical",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["nameOfSchoolPracticalUnit","area","numberOfPracticeTeachingInSchool","experimentalCourses","numberOfPracticeStudents"],attr:["校内实践(实验,实训)单位名称","使用面积","校内实践教学工位数","承接实践课程数","实践学生人数/学年"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.ShiJianJiaoXue.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.ShiJianJiaoXue.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfSchoolPracticalUnit",label:"校内实践(实验,实训)单位名称"}}),n("el-table-column",{attrs:{prop:"area",label:"使用面积"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeTeachingInSchool",label:"校内实践教学工位数"}}),n("el-table-column",{attrs:{prop:"experimentalCourses",label:"承接实践课程"}}),n("el-table-column",{attrs:{prop:"numberOfPracticeStudents",label:"实践学生人数/学年"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.ShiJianJiaoXue,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.ShiJianJiaoXue,e.$index)}}})],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"校内实践信息",visible:t.part3.ShiJianJiaoXue.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.ShiJianJiaoXue.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"校内实践(实验,实训)单位名称"}},[n("el-input",{model:{value:t.tempData.nameOfSchoolPracticalUnit,callback:function(e){t.$set(t.tempData,"nameOfSchoolPracticalUnit",e)},expression:"tempData.nameOfSchoolPracticalUnit"}})],1),n("el-form-item",{attrs:{label:"使用面积"}},[n("el-input",{model:{value:t.tempData.area,callback:function(e){t.$set(t.tempData,"area",e)},expression:"tempData.area"}})],1),n("el-form-item",{attrs:{label:"校内实践教学工位数"}},[n("el-input",{model:{value:t.tempData.numberOfPracticeTeachingInSchool,callback:function(e){t.$set(t.tempData,"numberOfPracticeTeachingInSchool",e)},expression:"tempData.numberOfPracticeTeachingInSchool"}})],1),n("el-form-item",{attrs:{label:"承接实践课程"}},[n("el-input",{model:{value:t.tempData.experimentalCourses,callback:function(e){t.$set(t.tempData,"experimentalCourses",e)},expression:"tempData.experimentalCourses"}})],1),n("el-form-item",{attrs:{label:"实践学生人数/学年"}},[n("el-input",{model:{value:t.tempData.numberOfPracticeStudents,callback:function(e){t.$set(t.tempData,"numberOfPracticeStudents",e)},expression:"tempData.numberOfPracticeStudents"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.ShiJianJiaoXue.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.ShiJianJiaoXue)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.ShiJianJiaoXue)}}},[t._v("添加")])],1)],1)],1)],1)},Ft=[];function Rt(t){return Object(f["a"])({url:"/declaration-form/practical-teaching",method:"post",data:t})}function Mt(t,e){return Object(f["a"])({url:"/declaration-form/practical-teaching/"+t,method:"post",data:e})}var Pt=n("2411"),Bt={props:{practicalTeachingID:{type:String}},components:{Tinymce:F["a"],UploadExcel:a["a"]},data:function(){return{uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）实践教学&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）实验实训&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）基地建设&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）创新创业教育&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{nameOfSchoolPracticalUnit:"",area:"",numberOfPracticeTeachingInSchool:"",experimentalCourses:"",numberOfPracticeStudents:""}]},part3:{ShiJianJiaoXue:{nameOfSchoolPracticalUnit:"",area:"",numberOfPracticeTeachingInSchool:"",experimentalCourses:"",numberOfPracticeStudents:"",tables:[[]],dialogVisible:[!1]}}}},watch:{practicalTeachingID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["校内实践(实验,实训)单位名称","使用面积","校内实践教学工位数","承接实践课程数","实践学生人数/学年"],["四创实验室","200平方米","32","156","32"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfSchoolPracticalUnit=e[n].nameOfSchoolPracticalUnit,o.area=e[n].area,o.numberOfPracticeTeachingInSchool=e[n].numberOfPracticeTeachingInSchool,o.experimentalCourses=e[n].experimentalCourses,o.numberOfPracticeStudents=e[n].numberOfPracticeStudents,this.form.info.push(o),this.part3.ShiJianJiaoXue.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=_.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},createPracticalTeachingInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Rt(t.form).then((function(e){t.$emit("getPracticalTeachingID",e.data.practicalTeachingID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.ShiJianJiaoXue.tables[0].length;t++){var e={};e["nameOfSchoolPracticalUnit"]=this.part3.ShiJianJiaoXue.tables[0][t].nameOfSchoolPracticalUnit,e["area"]=this.part3.ShiJianJiaoXue.tables[0][t].area,e["numberOfPracticeTeachingInSchool"]=this.part3.ShiJianJiaoXue.tables[0][t].numberOfPracticeTeachingInSchool,e["experimentalCourses"]=this.part3.ShiJianJiaoXue.tables[0][t].experimentalCourses,e["numberOfPracticeStudents"]=this.part3.ShiJianJiaoXue.tables[0][t].numberOfPracticeStudents,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Pt["a"])(this.practicalTeachingID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.practical.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["nameOfSchoolPracticalUnit"]=t.form.info[r].nameOfSchoolPracticalUnit,i["area"]=t.form.info[r].area,i["numberOfPracticeTeachingInSchool"]=t.form.info[r].numberOfPracticeTeachingInSchool,i["experimentalCourses"]=t.form.info[r].experimentalCourses,i["numberOfPracticeStudents"]=t.form.info[r].numberOfPracticeStudents,l["default"].set(t.part3.ShiJianJiaoXue.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Mt(t.practicalTeachingID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},Vt=Bt,zt=(n("ff84"),Object(v["a"])(Vt,At,Ft,!1,null,"9462aa24",null)),jt=zt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("条件保障")])])]),n("Tinymce",{ref:"condition",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"教师人数"}},[n("el-input",{model:{value:t.form.info.numberOfTeacher,callback:function(e){t.$set(t.form.info,"numberOfTeacher",e)},expression:"form.info.numberOfTeacher"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"年度运行经费"}},[n("el-input",{model:{value:t.form.info.annualOperatingExpenses,callback:function(e){t.$set(t.form.info,"annualOperatingExpenses",e)},expression:"form.info.annualOperatingExpenses"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"行政办公面积"}},[n("el-input",{model:{value:t.form.info.administrativeOfficeSpace,callback:function(e){t.$set(t.form.info,"administrativeOfficeSpace",e)},expression:"form.info.administrativeOfficeSpace"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"教学资料档案室面积"}},[n("el-input",{model:{value:t.form.info.areaOfTeachingMaterialsArchives,callback:function(e){t.$set(t.form.info,"areaOfTeachingMaterialsArchives",e)},expression:"form.info.areaOfTeachingMaterialsArchives"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"办公设施"}},[n("el-input",{model:{value:t.form.info.officeFacilities,callback:function(e){t.$set(t.form.info,"officeFacilities",e)},expression:"form.info.officeFacilities"}})],1)],1)],1)],1)},Ht=[];function Lt(t){return Object(f["a"])({url:"/declaration-form/condition-guarantee",method:"post",data:t})}function Jt(t,e){return Object(f["a"])({url:"/declaration-form/condition-guarantee/"+t,method:"post",data:e})}var $t=n("9944"),Ut={props:{conditionGuaranteeID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）专项经费&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）办公设施保障&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）办公面积&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）教学资料档案&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:{numberOfTeacher:"",annualOperatingExpenses:"",administrativeOfficeSpace:"",areaOfTeachingMaterialsArchives:"",officeFacilities:""}}}},watch:{conditionGuaranteeID:function(t,e){this.getFormInfo()}},methods:{createConditionGuaranteeInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Lt(t.form).then((function(e){t.$emit("getConditionGuaranteeID",e.data.conditionGuaranteeID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object($t["a"])(this.conditionGuaranteeID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.condition.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Jt(t.conditionGuaranteeID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},Wt=Ut,Gt=(n("4d47"),Object(v["a"])(Wt,Nt,Ht,!1,null,"61ec43d8",null)),Xt=Gt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("人才培养能力")])])]),n("Tinymce",{ref:"talent",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}}),n("el-dialog",{attrs:{title:"从Excel中导入",visible:t.uploadExcelDialogFormVisible},on:{"update:visible":function(e){t.uploadExcelDialogFormVisible=e}}},[n("upload-excel",{attrs:{"on-success":t.handleSuccess,header:["nameOfTeacher","nameOfTeachingContest","organizer","time","awards"],attr:["教师姓名","教学竞赛名称","组织单位","时间（年份）","获奖等次(一等奖,二等奖,三等奖,优秀奖)"]}})],1),n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleClickAdd(t.part3.RenCaiPeiYangNengLi.dialogVisible)}}},[t._v("添加")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-add"},on:{click:t.importFromExcel}},[t._v("从Excel导入")]),n("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出excel模板")])],1),n("el-table",{attrs:{data:t.part3.RenCaiPeiYangNengLi.tables[0],"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"教师姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeachingContest",label:"教学竞赛名称"}}),n("el-table-column",{attrs:{prop:"organizer",label:"组织单位"}}),n("el-table-column",{attrs:{prop:"time",label:"时间/年月"}}),n("el-table-column",{attrs:{prop:"awards",label:"获奖等次"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.handleClickEdit(t.part3.RenCaiPeiYangNengLi,e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.handleClickDelete(t.part3.RenCaiPeiYangNengLi,e.$index)}}})],1)]}}])})],1),n("div",{staticClass:"form-subtitle"},[t._v("每类5项代表性成果")]),n("el-form-item",{staticClass:"label-style",attrs:{label:"学科竞赛"}},[n("div",{staticClass:"table-action-bar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.subjectCompetitionClickAdd}},[t._v("添加")])],1),n("el-table",{attrs:{data:t.form.outcome.subjectCompetition,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"year",label:"年度"}}),n("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),n("el-table-column",{attrs:{prop:"awardWinningWork",label:"获奖作品"}}),n("el-table-column",{attrs:{prop:"level",label:"获奖等级"}}),n("el-table-column",{attrs:{prop:"nameOfWinner",label:"获奖人姓名"}}),n("el-table-column",{attrs:{prop:"nameOfTeacher",label:"指导老师姓名"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",{staticStyle:{"margin-bottom":"1px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(n){return t.subjectCompetitionEdit(e.row,e.$index)}}})],1),n("el-row",{staticStyle:{"margin-top":"1px"}},[n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.subjectCompetitionDelete(e.$index)}}})],1)]}}])})],1)],1),n("el-form-item",{attrs:{label:"职业技能大赛"}},[n("el-input",{model:{value:t.form.outcome.professionalSkillsCompetition,callback:function(e){t.$set(t.form.outcome,"professionalSkillsCompetition",e)},expression:"form.outcome.professionalSkillsCompetition"}})],1),n("el-form-item",{attrs:{label:"互联网+创业大赛"}},[n("el-input",{model:{value:t.form.outcome.internetPlusEntrepreneurshipContest,callback:function(e){t.$set(t.form.outcome,"internetPlusEntrepreneurshipContest",e)},expression:"form.outcome.internetPlusEntrepreneurshipContest"}})],1),n("el-form-item",{attrs:{label:"创新创业情况"}},[n("el-input",{model:{value:t.form.outcome.innovationAndEntrepreneurship,callback:function(e){t.$set(t.form.outcome,"innovationAndEntrepreneurship",e)},expression:"form.outcome.innovationAndEntrepreneurship"}})],1),n("el-form-item",{attrs:{label:"发表论文"}},[n("el-input",{model:{value:t.form.outcome.publishTheses,callback:function(e){t.$set(t.form.outcome,"publishTheses",e)},expression:"form.outcome.publishTheses"}})],1)],1),n("el-dialog",{attrs:{title:"学科竞赛信息",visible:t.subjectCompetition.dialogVisible},on:{"update:visible":function(e){return t.$set(t.subjectCompetition,"dialogVisible",e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"年度"}},[n("el-input",{model:{value:t.tempData.year,callback:function(e){t.$set(t.tempData,"year",e)},expression:"tempData.year"}})],1),n("el-form-item",{attrs:{label:"奖项名称"}},[n("el-input",{model:{value:t.tempData.awardName,callback:function(e){t.$set(t.tempData,"awardName",e)},expression:"tempData.awardName"}})],1),n("el-form-item",{attrs:{label:"获奖作品"}},[n("el-input",{model:{value:t.tempData.awardWinningWork,callback:function(e){t.$set(t.tempData,"awardWinningWork",e)},expression:"tempData.awardWinningWork"}})],1),n("el-form-item",{attrs:{label:"获奖等级"}},[n("el-input",{model:{value:t.tempData.level,callback:function(e){t.$set(t.tempData,"level",e)},expression:"tempData.level"}})],1),n("el-form-item",{attrs:{label:"获奖人姓名"}},[n("el-input",{model:{value:t.tempData.nameOfWinner,callback:function(e){t.$set(t.tempData,"nameOfWinner",e)},expression:"tempData.nameOfWinner"}})],1),n("el-form-item",{attrs:{label:"指导老师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfTeacher,callback:function(e){t.$set(t.tempData,"nameOfTeacher",e)},expression:"tempData.nameOfTeacher"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.subjectCompetitionCancel()}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subjectCompetitionSave()}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subjectCompetitionAdd()}}},[t._v("添加")])],1)],1)],1),n("el-dialog",{attrs:{title:"教学竞赛信息",visible:t.part3.RenCaiPeiYangNengLi.dialogVisible[0]},on:{"update:visible":function(e){return t.$set(t.part3.RenCaiPeiYangNengLi.dialogVisible,0,e)}}},[n("el-form",{attrs:{model:t.tempData}},[n("el-form-item",{attrs:{label:"教师姓名"}},[n("el-input",{model:{value:t.tempData.nameOfTeacher,callback:function(e){t.$set(t.tempData,"nameOfTeacher",e)},expression:"tempData.nameOfTeacher"}})],1),n("el-form-item",{attrs:{label:"教学竞赛名称"}},[n("el-input",{model:{value:t.tempData.nameOfTeachingContest,callback:function(e){t.$set(t.tempData,"nameOfTeachingContest",e)},expression:"tempData.nameOfTeachingContest"}})],1),n("el-form-item",{attrs:{label:"组织单位"}},[n("el-input",{model:{value:t.tempData.organizer,callback:function(e){t.$set(t.tempData,"organizer",e)},expression:"tempData.organizer"}})],1),n("el-form-item",{attrs:{label:"时间"}},[n("el-input",{model:{value:t.tempData.time,callback:function(e){t.$set(t.tempData,"time",e)},expression:"tempData.time"}})],1),n("el-form-item",{attrs:{label:"获奖等次(一等奖,二等奖,三等奖,优秀奖)"}},[n("el-input",{model:{value:t.tempData.awards,callback:function(e){t.$set(t.tempData,"awards",e)},expression:"tempData.awards"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(e){return t.handleCancel(t.part3.RenCaiPeiYangNengLi.dialogVisible)}}},[t._v("取消")]),t.editStatus?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSave(t.part3.RenCaiPeiYangNengLi)}}},[t._v("保存")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(t.part3.RenCaiPeiYangNengLi)}}},[t._v("添加")])],1)],1)],1)],1)},Kt=[];function qt(t){return Object(f["a"])({url:"/declaration-form/talent-cultivation-ability",method:"post",data:t})}function Zt(t,e){return Object(f["a"])({url:"/declaration-form/talent-cultivation-ability/"+t,method:"post",data:e})}var Qt=n("3ec1"),te=n("2ef0"),ee=n.n(te),ne={props:{talentCultivationAbilityID:{type:String}},components:{Tinymce:F["a"],UploadExcel:a["a"]},data:function(){return{subjectCompetition:{dialogVisible:!1},uploadExcelDialogFormVisible:!1,tempData:{},memberDialogFormVisible:!1,editStatus:!1,editIndex:-1,form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）教师教学比赛和教师评教&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）学生创新创业&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）毕业生就业率和就业质量&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"},info:[{nameOfTeacher:"",nameOfTeachingContest:"",organizer:"",time:"",awards:""}],outcome:{subjectCompetition:[],professionalSkillsCompetition:"",internetPlusEntrepreneurshipContest:"",innovationAndEntrepreneurship:"",publishTheses:""}},part3:{RenCaiPeiYangNengLi:{tables:[[]],dialogVisible:[!1]}}}},watch:{talentCultivationAbilityID:function(t,e){this.getFormInfo()}},methods:{importFromExcel:function(){this.uploadExcelDialogFormVisible=!0},exportExcel:function(){function t(t,e){for(var n="",o=0;o<e.length;o++){for(var r=e[o],i=0;i<r.length;i++){var a=null===r[i]?"":r[i].toString();a=a.replace(/\t/gi," "),i>0&&(n+="\t"),n+=a}n+="\n"}var u,c=[];c.push(255,254);for(o=0;o<n.length;++o)u=n.charCodeAt(o),c.push(255&u),c.push(u/256>>>0);var s=new Blob([new Uint8Array(c)],{type:"text/csv;charset=UTF-16LE;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,t);else{var l=document.createElement("a");if(void 0!==l.download){var f=window.URL.createObjectURL(s);l.setAttribute("href",f),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(f)}}}t("download.csv",[["教师姓名","教学竞赛名称","组织单位","时间（年份）","获奖等次(一等奖,二等奖,三等奖,优秀奖)"],["无名氏","蓝桥杯","河南大学软件学院","2012","一等奖"]])},handleSuccess:function(t){var e=t.results;t.header;this.$message({message:"导入成功！",type:"success"});for(var n=0;n<e.length;n++){var o={};o.nameOfTeacher=e[n].nameOfTeacher,o.nameOfTeachingContest=e[n].nameOfTeachingContest,o.organizer=e[n].organizer,o.time=e[n].time,o.awards=e[n].awards,this.form.info.push(o),this.part3.RenCaiPeiYangNengLi.tables[0].push(o)}this.uploadExcelDialogFormVisible=!1},handleClickAdd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},this.editStatus=!1,l["default"].set(t,e,!0)},handleAdd:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[o].push(this.tempData),n[o]=!1},handleSave:function(t){var e=t.tables,n=t.dialogVisible,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l["default"].set(e[o],this.editIndex,this.tempData),n[o]=!1},handleCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.tempData={},t[e]=!1},handleClickEdit:function(t,e,n){var o=t.dialogVisible,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=ee.a.cloneDeep(e);this.tempData=i,this.editIndex=n,this.editStatus=!0,o[r]=!0},handleClickDelete:function(t,e){var n=t.tables,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n[o].splice(e,1)},subjectCompetitionClickAdd:function(){this.subjectCompetition.dialogVisible=!0},subjectCompetitionCancel:function(){this.tempData={},this.editStatus=!1,this.subjectCompetition.dialogVisible=!1},subjectCompetitionAdd:function(){this.form.outcome.subjectCompetition.push(this.tempData),this.tempData={},this.subjectCompetition.dialogVisible=!1},subjectCompetitionSave:function(){l["default"].set(this.form.outcome.subjectCompetition,this.editIndex,this.tempData),this.subjectCompetition.dialogVisible=!1,this.editStatus=!1},subjectCompetitionEdit:function(t,e){var n=ee.a.cloneDeep(t);this.tempData=n,this.editIndex=e,this.editStatus=!0,this.subjectCompetition.dialogVisible=!0},subjectCompetitionDelete:function(t){this.form.outcome.subjectCompetition.splice(t,1)},createTalentInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,qt(t.form).then((function(e){console.log(t.form),t.$emit("getTalentCultivationAbilityID",e.data.talentCultivationAbilityID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){this.form.info=void 0,this.form.info=new Array;for(var t=0;t<this.part3.RenCaiPeiYangNengLi.tables[0].length;t++){var e={};e["nameOfTeacher"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].nameOfTeacher,e["nameOfTeachingContest"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].nameOfTeachingContest,e["organizer"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].organizer,e["time"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].time,e["awards"]=this.part3.RenCaiPeiYangNengLi.tables[0][t].awards,this.form.info[t]=e}},getFormInfo:function(){var t=this;Object(Qt["a"])(this.talentCultivationAbilityID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.talent.setContent(t.form.content.html);for(var r=0;r<t.form.info.length;r++){var i={};i["nameOfTeacher"]=t.form.info[r].nameOfTeacher,i["nameOfTeachingContest"]=t.form.info[r].nameOfTeachingContest,i["organizer"]=t.form.info[r].organizer,i["time"]=t.form.info[r].time,i["awards"]=t.form.info[r].awards,l["default"].set(t.part3.RenCaiPeiYangNengLi.tables[0],r,i)}}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,Zt(t.talentCultivationAbilityID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},oe=ne,re=(n("9eb4"),Object(v["a"])(oe,Yt,Kt,!1,null,"6f04e1dc",null)),ie=re.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",[n("el-row",[n("div",{staticClass:"form-subtitle"},[n("span",[t._v("今后建设计划")])])]),n("Tinymce",{ref:"future",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},ue=[];function ce(t){return Object(f["a"])({url:"/declaration-form/future-construction-plan",method:"post",data:t})}function se(t,e){return Object(f["a"])({url:"/declaration-form/future-construction-plan/"+t,method:"post",data:e})}var le=n("537c"),fe={props:{futureConstructionPlanID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{form:{content:{html:"<div style='font-family: 仿宋; font-size: 18pt''><b>（一）指导思路&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（二）基本思路&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（三）建设目标&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div><div style='font-family: 仿宋; font-size: 18pt''><b>（四）专业建设内容&nbsp;</b></div><div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},watch:{futureConstructionPlanID:function(t,e){this.getFormInfo()}},methods:{createFutureInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,ce(t.form).then((function(e){t.$emit("getFutureConstructionPlanID",e.data.futureConstructionPlanID)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},getHtml:function(){},getFormInfo:function(){var t=this;Object(le["a"])(this.futureConstructionPlanID).then((function(e){var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);t.$refs.future.setContent(t.form.content.html)}))},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getHtml(),e.next=3,se(t.futureConstructionPlanID,t.form).then((function(t){})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}}},me=fe,de=(n("86ec"),Object(v["a"])(me,ae,ue,!1,null,"ed8e4840",null)),pe=de.exports,ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("Tinymce",{ref:"opinion",model:{value:t.form.content.html,callback:function(e){t.$set(t.form.content,"html",e)},expression:"form.content.html"}})],1)},he=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-subtitle"},[n("span",[t._v("审核意见反馈")])])}],ve=n("fdc2"),be={props:{opinionFeedbackID:{type:String}},components:{Tinymce:F["a"]},data:function(){return{form:{content:{html:""}}}},watch:{opinionFeedbackID:function(t,e){this.getInfo()}},methods:{getInfo:function(){Object(ve["a"])(this.opinionFeedbackID).then((function(t){}))}}},ye=be,xe=(n("e8c0"),Object(v["a"])(ye,ge,he,!1,null,null,null)),we=xe.exports;function Ce(t){return Object(f["a"])({url:"/declaration-form/total",method:"post",data:t})}function ke(t,e){return Object(f["a"])({url:"/declaration-form/total/"+e,method:"post",data:t})}var Se=n("c551");function Oe(t){return Object(f["a"])({url:"/declaration-form/opinion-feedback",method:"post",data:t})}var De=n("831c"),Te=n("9695"),_e=n("4360"),Ie={components:{UploadExcel:a["a"],SvgIcon:u["a"],Principal:y,Members:I,Rules:j,Team:X,Organization:ot,CourseMaterial:mt,TeachingResearch:wt,SpecialtyConstruction:Et,PracticalTeaching:jt,ConditionGuarantee:Xt,TalentCultivationAbility:ie,FutureConstructionPlan:pe,opinionFeedBack:we},data:function(){return{arrayOfGrassRootsTeachingSystemName:[],majors:[],updateHidden:"none",buttenHidden:"",active:0,form:{info:{formID:"",userNumber:"",organization:"",college:"",principal:"",professionalTitle:"",status:"等待审核",reviewer:"",totalScore:"",userNumberOfMarker:"",userNumberOfReviewer:"",type:"",level:"",createYear:"",principalNumber:"",faceMultiple:"",schoolOrientedProfessionalTitles:"",schoolOrientedProfessionalTitlesCode:"",schoolOrientedProfessionalTitlesProportion:""},principalID:"",membersID:"",ruleAndRegulationID:"",teamBuildingID:"",teachingOrganizationID:"",courseMaterialID:"",teachingResearchID:"",specialtyConstructionID:"",practicalTeachingID:"",conditionGuaranteeID:"",talentCultivationAbilityID:"",futureConstructionPlanID:"",opinionFeedbackID:""},formID:"",opinionFeedback:{content:{html:"<div style='font-family: 仿宋; font-size: 12pt''></div>"}}}},created:function(){this.$route.query.formID&&(this.updateHidden="",this.buttenHidden="none",this.getFormInfo()),this.form.info.userNumber=_e["a"].getters.userNumber,this.form.info.college=_e["a"].getters.college,this.getOrganizations(),this.getMajors()},methods:{getOrganizations:function(){var t=this;Object(Se["f"])().then((function(e){for(var n=0;n<e.data.length;n++){var o={};o.value=e.data[n],t.arrayOfGrassRootsTeachingSystemName.push(o)}console.log(t.arrayOfGrassRootsTeachingSystemName)})).catch((function(t){console.log(t)}))},handleSelect:function(t){console.log(t)},querySearch:function(t,e){var n=this.arrayOfGrassRootsTeachingSystemName,o=t?n.filter(this.createFilter(t)):n;e(o)},createFilter:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}},getMajors:function(){var t=this;Object(Se["e"])().then((function(e){console.log(e);for(var n=0;n<e.data.length;n++){var o={};o.schoolOrientedProfessionalTitlesCode=e.data[n].schoolMajorCode,o.value=e.data[n].nameOfTheMajorInTheSchool,console.log(e.data[n]),t.majors.push(o)}})).catch((function(t){console.log(t)}))},handleSelectInfo:function(t){this.form.info.schoolOrientedProfessionalTitlesCode=t.schoolOrientedProfessionalTitlesCode},querySearchInfo:function(t,e){var n=this.majors,o=t?n.filter(this.createFilterInfo(t)):n;e(o)},createFilterInfo:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}},backToTop:function(){var t=setInterval((function(){var e=document.documentElement.scrollTop||document.body.scrollTop,n=Math.floor(-e/2);document.documentElement.scrollTop=document.body.scrollTop=e+n,this.isTop=!0,0===e&&clearInterval(t)}),30)},handleStep:function(t){this.active=t},nextPage:function(){this.backToTop(),this.active++},prePage:function(){this.backToTop(),this.active--,this.active<=0&&(this.active=0)},handleSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.principal.createPrincipalInfo();case 2:return e.next=4,t.$refs.members.createMembersInfo();case 4:return e.next=6,t.$refs.rules.createRulesInfo();case 6:return e.next=8,t.$refs.teambuilding.createTeamInfo();case 8:return e.next=10,t.$refs.organization.createOrganizationInfo();case 10:return e.next=12,t.$refs.coursematerial.createCourseMaterialInfo();case 12:return e.next=14,t.$refs.teachingresearch.createTeachingReseacherInfo();case 14:return e.next=16,t.$refs.specialtyconstruction.createSpecialtyConstructionInfo();case 16:return e.next=18,t.$refs.practicalteaching.createPracticalTeachingInfo();case 18:return e.next=20,t.$refs.conditionguarantee.createConditionGuaranteeInfo();case 20:return e.next=22,t.$refs.talentcultivationability.createTalentInfo();case 22:return e.next=24,t.$refs.futureconstructionplan.createFutureInfo();case 24:return e.next=26,t.createOpinionFeedbackInfo();case 26:return e.next=28,t.createFormInfo();case 28:t.nextPage();case 29:case"end":return e.stop()}}),e)})))()},getPrincipalID:function(t){this.form.principalID=t},getMembersID:function(t){this.form.membersID=t},getRulesID:function(t){this.form.ruleAndRegulationID=t},getTeamBuildingID:function(t){this.form.teamBuildingID=t},getOrganizationID:function(t){this.form.teachingOrganizationID=t},getCourseMaterialID:function(t){this.form.courseMaterialID=t},getTeachingResearchID:function(t){this.form.teachingResearchID=t},getSpecialtyConstructionID:function(t){this.form.specialtyConstructionID=t},getPracticalTeachingID:function(t){this.form.practicalTeachingID=t},getConditionGuaranteeID:function(t){this.form.conditionGuaranteeID=t},getTalentCultivationAbilityID:function(t){this.form.talentCultivationAbilityID=t},getFutureConstructionPlanID:function(t){this.form.futureConstructionPlanID=t},createOpinionFeedbackInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oe(t.opinionFeedback).then((function(e){t.form.opinionFeedbackID=e.data.opinionFeedbackID})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},createFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ce(t.form).then((function(e){console.log(e.data.formID),t.form.info.formID=e.data.formID,t.updateApprovalPageInfo()})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},updateApprovalPageInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(De["c"])(t.form.info).then((function(e){console.log(t.form.info)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getFormInfo:function(){var t=this;Object(Te["a"])(this.$route.query.formID).then((function(e){console.log(e.data);var n=e.data;for(var o in n)"function"!==typeof n[o]&&(t.form[o]=n[o]);0!==Object.keys(t.form.info.userNumberOfMarker).length?(console.log(t.form.userNumberOfMarker),t.form.info.status="评定结束"):t.form.info.status="等待审核"})).catch((function(t){console.log(t)}))},handleUpdate:function(){this.$refs.principal.updateFormInfo(),this.$refs.members.updateFormInfo(),this.$refs.rules.updateFormInfo(),this.$refs.teambuilding.updateFormInfo(),this.$refs.organization.updateFormInfo(),this.$refs.coursematerial.updateFormInfo(),this.$refs.teachingresearch.updateFormInfo(),this.$refs.specialtyconstruction.updateFormInfo(),this.$refs.practicalteaching.updateFormInfo(),this.$refs.conditionguarantee.updateFormInfo(),this.$refs.talentcultivationability.updateFormInfo(),this.$refs.futureconstructionplan.updateFormInfo(),this.updateFormInfo(),this.nextPage()},updateFormInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke(t.form,t.$route.query.formID).then((function(t){})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},Ee=Ie,Ae=(n("3a0a"),Object(v["a"])(Ee,o,r,!1,null,null,null));e["default"]=Ae.exports},3:function(t,e){},"31f1":function(t,e,n){"use strict";n("a8a8")},"32af":function(t,e,n){},"34e7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/team-building/"+t,method:"get"})}},3796:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.handleClick}}),n("div",{staticClass:"drop",on:{drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[t._v(" 将文件拖拽至此或 "),n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:t.loading,size:"mini",type:"primary"},on:{click:t.handleUpload}},[t._v(" 浏览文件 ")])],1)])},r=[],i=(n("d3b7"),n("b0c0"),n("1146")),a=n.n(i),u={props:{beforeUpload:Function,onSuccess:Function,header:Array,attr:Array},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(t){var e=t.header,n=t.res;this.excelData.header=e,this.excelData.results=n,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(t){if(t.stopPropagation(),t.preventDefault(),!this.loading){var e=t.dataTransfer.files;if(1===e.length){var n=e[0];if(!this.isExcel(n))return this.$message.error("只支持导入 .xlsx, .xls, .csv 为后缀的文件！"),!1;this.upload(n),t.stopPropagation(),t.preventDefault()}else this.$message.error("一次仅支持上传一个文件！")}},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(t){var e=t.target.files,n=e[0];n&&this.upload(n)},upload:function(t){if(this.$refs["excel-upload-input"].value=null,this.beforeUpload){var e=this.beforeUpload(t);e&&this.readerData(t)}else this.readerData(t)},readerData:function(t){var e=this;return this.loading=!0,new Promise((function(n,o){var r=new FileReader;r.onload=function(t){for(var o=t.target.result,r=a.a.read(o,{type:"array"}),i=r.SheetNames[0],u=r.Sheets[i],c=e.getHeaderRow(u),s=a.a.utils.sheet_to_json(u),l=[],f=0;f<s.length;f++){for(var m={},d=0;d<c.length;d++){var p=e.header[d],g=e.attr[d],h=s[f][g]+"";if(-1!==h.indexOf("年")&&-1!==h.indexOf("月")){var v=h.indexOf("年"),b=h.substring(0,4),y=h.indexOf("月"),x=h.substring(v+1,y),w=h.substring(y+1),C=b+"-"+x+"-"+w;m[p]=C}else m[p]=s[f][g]}l.push(m)}e.generateData({header:c,res:l}),e.loading=!1,n()},r.readAsArrayBuffer(t)}))},getHeaderRow:function(t){var e=this.header;return e},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)}}},c=u,s=(n("2a3c"),n("2877")),l=Object(s["a"])(c,o,r,!1,null,"fa563972",null);e["a"]=l.exports},"3a0a":function(t,e,n){"use strict";n("52c2")},"3ec1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/talent-cultivation-ability/"+t,method:"get"})}},4738:function(t,e,n){},"4c42":function(t,e,n){"use strict";n("4738")},"4ce3":function(t,e,n){},"4d47":function(t,e,n){"use strict";n("96d7")},"52c2":function(t,e,n){},"537c":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/future-construction-plan/"+t,method:"get"})}},5793:function(t,e,n){},"58bd":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teachers/"+t,method:"get"})}},6160:function(t,e,n){},"6b84":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/specialty-construction/"+t,method:"get"})}},"7c27":function(t,e,n){(function(t){var e=n("7037").default;n("99af"),n("a4d3"),n("b0c0"),n("fb6a"),n("a630"),n("3ca3"),n("b64b"),n("a15b"),n("d3b7"),n("ddb0"),n("d81d"),n("25f0"),n("a9e3"),n("5319"),n("ac1f"),n("841c"),n("dca8"),n("1276"),n("4de4"),n("466d"),n("c7cd"),n("498a"),n("7db0"),n("18a5"),n("4d63"),n("a434"),n("9911"),n("e01a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("2b3d"),n("b680"),n("4ec9"),function(){"use strict";var n=function(){},o=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},r=function(t){return function(){return t}},i=function(t){return t};function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var u=function(t){return function(e){return!t(e)}},c=function(t){return function(){throw new Error(t)}},s=r(!1),l=r(!0),f=tinymce.util.Tools.resolve("tinymce.ThemeManager"),m=function(){return(m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function d(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function p(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var g,h,v,b,y,x,w=function(){return C},C=(g=function(t){return t.isNone()},{fold:function(t,e){return t()},is:s,isSome:s,isNone:l,getOr:v=function(t){return t},getOrThunk:h=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:v,orThunk:h,map:w,each:n,bind:w,exists:s,forall:l,filter:w,equals:g,equals_:g,toArray:function(){return[]},toString:r("none()")}),k=function t(e){var n=r(e),o=function(){return a},i=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?a:C},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return a},S={some:k,none:w,from:function(t){return null===t||void 0===t?C:k(t)}},O=function(t){return function(n){return r=e(o=n),(null===o?"null":"object"==r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===t;var o,r}},D=function(t){return function(n){return e(n)===t}},T=O("string"),_=O("object"),I=O("array"),E=D("boolean"),A=(b=void 0,function(t){return b===t}),F=function(t){return!(null===(e=t)||void 0===e);var e},R=D("function"),M=D("number"),P=function(t,e){if(I(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},B=Array.prototype.slice,V=Array.prototype.indexOf,z=Array.prototype.push,j=function(t,e){return V.call(t,e)},N=function(t,e){return-1<j(t,e)},H=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},L=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},J=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=B.call(t,o,o+e);n.push(r)}return n},$=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},U=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},W=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},G=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},X=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},Y=function(t,e,n){return U(t,(function(t){n=e(n,t)})),n},K=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return S.some(i);if(n(i,o))break}return S.none()}(t,e,s)},q=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return S.some(n);return S.none()},Z=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!I(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);z.apply(e,t[n])}return e},Q=function(t,e){return Z($(t,e))},tt=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},et=function(t){var e=B.call(t,0);return e.reverse(),e},nt=function(t,e){return G(t,(function(t){return!N(e,t)}))},ot=function(t,e){var n=B.call(t,0);return n.sort(e),n},rt=function(t,e){return 0<=e&&e<t.length?S.some(t[e]):S.none()},it=function(t){return rt(t,0)},at=function(t){return rt(t,t.length-1)},ut=R(Array.from)?Array.from:function(t){return B.call(t)},ct=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return S.none()},st=function t(e){return{is:function(t){return e===t},isValue:l,isError:s,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return S.some(e)}}},lt=function t(e){return{is:s,isValue:s,isError:l,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return c(String(e))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:n,bind:function(n){return t(e)},exists:s,forall:l,toOptional:S.none}},ft={value:st,error:lt,fromOption:function(t,e){return t.fold((function(){return lt(e)}),st)}};(x=y=y||{})[x.Error=0]="Error",x[x.Value=1]="Value";var mt,dt,pt=function(t,e,n){return t.stype===y.Error?e(t.serror):n(t.svalue)},gt=function(t){return{stype:y.Value,svalue:t}},ht=function(t){return{stype:y.Error,serror:t}},vt=function(t){return t.fold(ht,gt)},bt=function(t){return pt(t,ft.error,ft.value)},yt=gt,xt=function(t){var e=[],n=[];return U(t,(function(t){pt(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},wt=ht,Ct=function(t,e){return t.stype===y.Value?e(t.svalue):t},kt=function(t,e){return t.stype===y.Error?e(t.serror):t},St=function(t,e){return t.stype===y.Value?{stype:y.Value,svalue:e(t.svalue)}:t},Ot=function(t,e){return t.stype===y.Error?{stype:y.Error,serror:e(t.serror)}:t},Dt=Object.keys,Tt=Object.hasOwnProperty,_t=function(t,e){for(var n=Dt(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},It=function(t,e){return Et(t,(function(t,n){return{k:n,v:e(t,n)}}))},Et=function(t,e){var n={};return _t(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},At=function(t,e){var o,r,i,a,u={};return o=e,a=u,r=function(t,e){a[e]=t},i=n,_t(t,(function(t,e){(o(t,e)?r:i)(t,e)})),u},Ft=function(t,e){var n=[];return _t(t,(function(t,o){n.push(e(t,o))})),n},Rt=function(t,e){for(var n=Dt(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return S.some(a)}return S.none()},Mt=function(t){return Ft(t,(function(t){return t}))},Pt=function(t,e){return Bt(t,e)?S.from(t[e]):S.none()},Bt=function(t,e){return Tt.call(t,e)},Vt=function(t,e){return Bt(t,e)&&void 0!==t[e]&&null!==t[e]},zt=function(t){if(!I(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return U(t,(function(o,r){var i=Dt(o);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!I(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=Dt(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!tt(e,(function(t){return N(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n},jt=Object.prototype.hasOwnProperty,Nt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i=e[r];for(var a in i)jt.call(i,a)&&(o[a]=t(o[a],i[a]))}return o}},Ht=Nt((function(t,e){return _(t)&&_(e)?Ht(t,e):e})),Lt=Nt((function(t,e){return e})),Jt=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},$t=zt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Ut=function(t){return $t.defaultedThunk(r(t))},Wt=$t.strict,Gt=$t.asOption,Xt=$t.defaultedThunk,Yt=($t.asDefaultedOptionThunk,$t.mergeWithThunk),Kt=(zt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,e){var n={};return n[t]=e,n}),qt=function(t,e){return n=e,o={},_t(t,(function(t,e){N(n,e)||(o[e]=t)})),o;var n,o},Zt=Kt,Qt=function(t){return e={},U(t,(function(t){e[t.key]=t.value})),e;var e},te=function(t,e){var n,o,r,i,a,u=(n=[],o=[],U(t,(function(t){t.fold((function(t){n.push(t)}),(function(t){o.push(t)}))})),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,ft.error(Z(a))):(i=e,0===(r=u.values).length?ft.value(i):ft.value(Ht(i,Lt.apply(void 0,r))))},ee=function(t){return o(wt,Z)(t)},ne=function(t,e){var n,o,r=xt(t);return 0<r.errors.length?ee(r.errors):(n=r.values,o=e,0<n.length?yt(Ht(o,Lt.apply(void 0,n))):yt(o))},oe=function(t){var e=xt(t);return 0<e.errors.length?ee(e.errors):yt(e.values)},re=function(t){return _(t)&&100<Dt(t).length?" removed due to size":JSON.stringify(t,null,2)},ie=function(t,e){return wt([{path:t,getErrorInfo:e}])},ae=zt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ue=function(t,e,n){return Pt(e,n).fold((function(){return o=n,r=e,ie(t,(function(){return'Could not find valid *strict* value for "'+o+'" in '+re(r)}));var o,r}),yt)},ce=function(t,e,n){var o=Pt(t,e).fold((function(){return n(t)}),i);return yt(o)},se=function(t,e,n,o){return n.fold((function(n,i,a,u){var c=function(e){var r=u.extract(t.concat([n]),o,e);return St(r,(function(t){return Kt(i,o(t))}))},s=function(e){return e.fold((function(){var t=Kt(i,o(S.none()));return yt(t)}),(function(e){var r=u.extract(t.concat([n]),o,e);return St(r,(function(t){return Kt(i,o(S.some(t)))}))}))};return a.fold((function(){return Ct(ue(t,e,n),c)}),(function(t){return Ct(ce(e,n,t),c)}),(function(){return Ct(yt(Pt(e,n)),s)}),(function(t){return Ct((r=t,i=Pt(o=e,n).map((function(t){return!0===t?r(o):t})),yt(i)),s);var o,r,i}),(function(t){var o=t(e),i=St(ce(e,n,r({})),(function(t){return Ht(o,t)}));return Ct(i,c)}))}),(function(t,n){var r=n(e);return yt(Kt(t,o(r)))}))},le=function(t){return{extract:function(e,n,o){return kt(t(o,n),(function(t){return n=t,ie(e,(function(){return n}));var n}))},toString:function(){return"val"}}},fe=function(t){var e=me(t),n=X(t,(function(t,e){return e.fold((function(e){return Ht(t,Zt(e,!0))}),r(t))}),{});return{extract:function(t,o,r){var i,a=E(r)?[]:Dt(At(r,(function(t){return void 0!==t&&null!==t}))),u=G(a,(function(t){return!Vt(n,t)}));return 0===u.length?e.extract(t,o,r):(i=u,ie(t,(function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"})))},toString:e.toString}},me=function(t){return{extract:function(e,n,o){return r=e,i=o,a=n,u=$(t,(function(t){return se(r,i,t,a)})),ne(u,{});var r,i,a,u},toString:function(){return"obj{\n"+$(t,(function(t){return t.fold((function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},de=function(t){return{extract:function(e,n,o){var r=$(o,(function(o,r){return t.extract(e.concat(["["+r+"]"]),n,o)}));return oe(r)},toString:function(){return"array("+t.toString()+")"}}},pe=function(t){return{extract:function(e,n,o){for(var r=[],i=0,a=t;i<a.length;i++){var u=a[i].extract(e,n,o);if(u.stype===y.Value)return u;r.push(u)}return oe(r)},toString:function(){return"oneOf("+$(t,(function(t){return t.toString()})).join(", ")+")"}}},ge=function(t,e){return{extract:function(n,o,r){var a,u,c=Dt(r),s=(a=n,u=c,de(le(t)).extract(a,i,u));return Ct(s,(function(t){var i=$(t,(function(t){return ae.field(t,t,Wt(),e)}));return me(i).extract(n,o,r)}))},toString:function(){return"setOf("+e.toString()+")"}}},he=r(le(yt)),ve=o(de,me),be=ae.state,ye=ae.field,xe=function(t,e,n,o,r){return Pt(o,r).fold((function(){return e=o,n=r,ie(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+re(e)}));var e,n}),(function(o){return o.extract(t.concat(["branch: "+r]),e,n)}))},we=function(t,e){return{extract:function(n,o,r){return Pt(r,t).fold((function(){return e=t,ie(n,(function(){return'Choice schema did not contain choice key: "'+e+'"'}));var e}),(function(t){return xe(n,o,r,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+Dt(e)}}},Ce=le(yt),ke=function(t){return ve(t)},Se=function(t){return{extract:function(e,n,o){return t().extract(e,n,o)},toString:function(){return t().toString()}}},Oe=function(t){return le((function(e){return t(e).fold(wt,yt)}))},De=function(t,e){return ge((function(e){return vt(t(e))}),e)},Te=function(t,e,n){return bt((o=t,r=i,a=n,u=e.extract([o],r,a),Ot(u,(function(t){return{input:a,errors:t}}))));var o,r,a,u},_e=function(t){return t.fold((function(t){throw new Error(Ee(t))}),i)},Ie=function(t,e,n){return _e(Te(t,e,n))},Ee=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,$(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: ")+re(t.input);var e,n},Ae=we,Fe=function(t,e){return we(t,It(e,me))},Re=r(Ce),Me=function(t,n){return le((function(o){var r=e(o);return t(o)?yt(o):wt("Expected type: "+n+" but got: "+r)}))},Pe=Me(M,"number"),Be=Me(T,"string"),Ve=Me(E,"boolean"),ze=Me(R,"function"),je=function t(e){var n=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(n){return t(e[n])}));case"Map":return n(e.keys(),t)&&n(e.values(),t);case"Set":return n(e.keys(),t);default:return!1}},Ne=le((function(t){return je(t)?yt(t):wt("Expected value to be acceptable for sending via postMessage")})),He=function(t){return Oe((function(e){return N(t,e)?ft.value(e):ft.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},Le=function(t){return ye(t,t,Wt(),he())},Je=function(t,e){return ye(t,t,Wt(),e)},$e=function(t){return Je(t,Be)},Ue=function(t,e){return ye(t,t,Wt(),He(e))},We=function(t){return Je(t,ze)},Ge=function(t,e){return ye(t,t,Wt(),me(e))},Xe=function(t,e){return ye(t,t,Wt(),ve(e))},Ye=function(t,e){return ye(t,t,Wt(),de(e))},Ke=function(t){return ye(t,t,Gt(),he())},qe=function(t,e){return ye(t,t,Gt(),e)},Ze=function(t){return qe(t,Pe)},Qe=function(t){return qe(t,Be)},tn=function(t){return qe(t,ze)},en=function(t,e){return qe(t,me(e))},nn=function(t,e){return ye(t,t,Ut(e),he())},on=function(t,e,n){return ye(t,t,Ut(e),n)},rn=function(t,e){return on(t,e,Pe)},an=function(t,e){return on(t,e,Be)},un=function(t,e,n){return on(t,e,He(n))},cn=function(t,e){return on(t,e,Ve)},sn=function(t,e){return on(t,e,ze)},ln=function(t,e,n){return on(t,e,de(n))},fn=function(t,e,n){return on(t,e,me(n))},mn=function(t,e){return be(t,e)},dn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},pn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},gn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return pn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return pn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return pn(n)},fromDom:pn,fromPoint:function(t,e,n){return S.from(t.dom.elementFromPoint(e,n)).map(pn)}},hn=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return bn(o(1),o(2))},vn=function(){return bn(0,0)},bn=function(t,e){return{major:t,minor:e}},yn={nu:bn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():hn(t,n)},unknown:vn},xn=function(t,e){var n=String(e).toLowerCase();return K(t,(function(t){return t.search(n)}))},wn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Cn=function(t,e){return xn(t,e).map((function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},kn=function(t,e){return-1!==t.indexOf(e)},Sn=function(t,e){return o=e,r=(n=t).length-e.length,""===o||n.length>=o.length&&n.substr(r,r+o.length)===o;var n,o,r},On=(mt=/^\s+|\s+$/g,function(t){return t.replace(mt,"")}),Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tn=function(t){return function(e){return kn(e,t)}},_n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return kn(t,"edge/")&&kn(t,"chrome")&&kn(t,"safari")&&kn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:function(t){return kn(t,"chrome")&&!kn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return kn(t,"msie")||kn(t,"trident")}},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Tn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Tn("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(kn(t,"safari")||kn(t,"mobile/"))&&kn(t,"applewebkit")}}],In=[{name:"Windows",search:Tn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return kn(t,"iphone")||kn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Tn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Tn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Tn("linux"),versionRegexes:[]},{name:"Solaris",search:Tn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Tn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Tn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],En={browsers:r(_n),oses:r(In)},An="Firefox",Fn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(An),isSafari:o("Safari")}},Rn={unknown:function(){return Fn({current:void 0,version:yn.unknown()})},nu:Fn,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(An),safari:r("Safari")},Mn="Windows",Pn="Android",Bn="Solaris",Vn="FreeBSD",zn="ChromeOS",jn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Mn),isiOS:o("iOS"),isAndroid:o(Pn),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(Bn),isFreeBSD:o(Vn),isChromeOS:o(zn)}},Nn={unknown:function(){return jn({current:void 0,version:yn.unknown()})},nu:jn,windows:r(Mn),ios:r("iOS"),android:r(Pn),linux:r("Linux"),osx:r("OSX"),solaris:r(Bn),freebsd:r(Vn),chromeos:r(zn)},Hn=function(t,e){var n,o,i,a,u,c,s,l,f,m,d,p,g=En.browsers(),h=En.oses(),v=wn(g,t).fold(Rn.unknown,Rn.nu),b=Cn(h,t).fold(Nn.unknown,Nn.nu);return{browser:v,os:b,deviceType:(o=v,i=t,a=e,u=(n=b).isiOS()&&!0===/ipad/i.test(i),c=n.isiOS()&&!u,s=n.isiOS()||n.isAndroid(),l=s||a("(pointer:coarse)"),f=u||!c&&s&&a("(min-device-width:768px)"),m=c||s&&!f,d=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(i),p=!m&&!f&&!d,{isiPad:r(u),isiPhone:r(c),isTablet:r(f),isPhone:r(m),isTouch:r(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(d),isDesktop:r(p)})}},Ln=function(t){return window.matchMedia(t).matches},Jn=Jt((function(){return Hn(navigator.userAgent,Ln)})),$n=function(){return Jn()},Un=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Wn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Gn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return n=t.dom,o=e.dom,r=n,i=o,a=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(i)&a);var n,o,r,i,a},Yn=function(t,e){return $n().browser.isIE()?Xn(t,e):(n=e,o=t.dom,r=n.dom,o!==r&&o.contains(r));var n,o,r},Kn=function(t){return R(t)?t:s},qn=function(t,e,n){for(var o=t.dom,r=Kn(n);o.parentNode;){o=o.parentNode;var i=gn.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return S.none()},Zn=function(t,e,n){var o=e(t),r=Kn(n);return o.orThunk((function(){return r(t)?S.none():qn(t,e,r)}))},Qn=function(t,e){return Gn(t.element,e.event.target)},to=function(t){if(!Vt(t,"can")&&!Vt(t,"abort")&&!Vt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Ie("Extracting event.handler",fe([nn("can",l),nn("abort",s),nn("run",n)]),t)},eo=function(t){var e,n,o,r,i=(n=function(t){return t.can},function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return Y(e,(function(e,o){return e&&n(o).apply(void 0,t)}),!0)}),a=(o=e=t,r=function(t){return t.abort},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y(o,(function(e,n){return e||r(n).apply(void 0,t)}),!1)});return to({can:i,abort:a,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];U(t,(function(t){t.run.apply(void 0,e)}))}})},no=r,oo=no("touchstart"),ro=no("touchmove"),io=no("touchend"),ao=no("touchcancel"),uo=no("mousedown"),co=no("mousemove"),so=no("mouseout"),lo=no("mouseup"),fo=no("mouseover"),mo=no("focusin"),po=no("focusout"),go=no("keydown"),ho=no("keyup"),vo=no("input"),bo=no("change"),yo=no("click"),xo=no("transitionend"),wo=no("selectstart"),Co=function(t){return r("alloy."+t)},ko={tap:Co("tap")},So=Co("focus"),Oo=Co("blur.post"),Do=Co("paste.post"),To=Co("receive"),_o=Co("execute"),Io=Co("focus.item"),Eo=ko.tap,Ao=Co("longpress"),Fo=Co("sandbox.close"),Ro=Co("typeahead.cancel"),Mo=Co("system.init"),Po=Co("system.touchmove"),Bo=Co("system.touchend"),Vo=Co("system.scroll"),zo=Co("system.resize"),jo=Co("system.attached"),No=Co("system.detached"),Ho=Co("system.dismissRequested"),Lo=Co("system.repositionRequested"),Jo=Co("focusmanager.shifted"),$o=Co("slotcontainer.visibility"),Uo=Co("change.tab"),Wo=Co("dismiss.tab"),Go=Co("highlight"),Xo=Co("dehighlight"),Yo=function(t,e){Qo(t,t.element,e,{})},Ko=function(t,e,n){Qo(t,t.element,e,n)},qo=function(t){Yo(t,_o())},Zo=function(t,e,n){Qo(t,e,n,{})},Qo=function(t,e,n,o){var r=m({target:e},o);t.getSystem().triggerEvent(n,e,r)},tr=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},er=Qt,nr=function(t,e){return{key:t,value:to({abort:e})}},or=function(t){return{key:t,value:to({run:function(t,e){e.event.prevent()}})}},rr=function(t,e){return{key:t,value:to({run:e})}},ir=function(t,e,n){return{key:t,value:to({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}},ar=function(t){return function(e){return{key:t,value:to({run:function(t,n){Qn(t,n)&&e(t,n)}})}}},ur=function(t,e,n){var o,r,i=e.partUids[n];return r=i,rr(o=t,(function(t,e){t.getSystem().getByUid(r).each((function(t){tr(t,t.element,o,e)}))}))},cr=function(t,e){return rr(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).fold((function(){return Zn(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),s).getOr(t)}),(function(t){return t}));e(t,r,n)}))},sr=function(t){return rr(t,(function(t,e){e.cut()}))},lr=function(t,e){return ar(t)(e)},fr=ar(jo()),mr=ar(No()),dr=ar(Mo()),pr=(dt=_o(),function(t){return rr(dt,t)}),gr=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),hr=function(t){return function(e){return e.dom.nodeType===t}},vr=hr(1),br=hr(3),yr=hr(9),xr=hr(11),wr=function(t){return gn.fromDom(t.dom.ownerDocument)},Cr=function(t){return yr(t)?t:wr(t)},kr=function(t){return gn.fromDom(Cr(t).dom.documentElement)},Sr=function(t){return gn.fromDom(Cr(t).dom.defaultView)},Or=function(t){return S.from(t.dom.parentNode).map(gn.fromDom)},Dr=Or,Tr=function(t){return S.from(t.dom.offsetParent).map(gn.fromDom)},_r=function(t){return $(t.dom.childNodes,gn.fromDom)},Ir=function(t,e){var n=t.dom.childNodes;return S.from(n[e]).map(gn.fromDom)},Er=function(t){return xr(t)&&F(t.dom.host)},Ar=R(Element.prototype.attachShadow)&&R(Node.prototype.getRootNode),Fr=r(Ar),Rr=Ar?function(t){return gn.fromDom(t.dom.getRootNode())}:Cr,Mr=function(t){return Er(t)?t:gn.fromDom(Cr(t).dom.body)},Pr=function(t){var e=Rr(t);return Er(e)?S.some(e):S.none()},Br=function(t){return gn.fromDom(t.dom.host)},Vr=function(t){return F(t.dom.shadowRoot)},zr=function(t,e){Or(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},jr=function(t,e){var n;(n=t,S.from(n.dom.nextSibling).map(gn.fromDom)).fold((function(){Or(t).each((function(t){Hr(t,e)}))}),(function(t){zr(t,e)}))},Nr=function(t,e){Ir(t,0).fold((function(){Hr(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},Hr=function(t,e){t.dom.appendChild(e.dom)},Lr=function(t,e){U(e,(function(e){Hr(t,e)}))},Jr=function(t){t.dom.textContent="",U(_r(t),(function(t){$r(t)}))},$r=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ur=function(t){var e,n=_r(t);0<n.length&&(e=t,U(n,(function(t){zr(e,t)}))),$r(t)},Wr=function(t){return t.dom.innerHTML},Gr=function(t,e){var n,o,r=wr(t).dom,i=gn.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,_r(gn.fromDom(o)));Lr(i,a),Jr(t),Hr(t,i)},Xr=function(t,e,n){if(!(T(n)||E(n)||M(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Yr=function(t,e,n){Xr(t.dom,e,n)},Kr=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},qr=function(t,e){return S.from(Kr(t,e))},Zr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Qr=function(t,e){t.dom.removeAttribute(e)},ti=function(t){return e=t,n=!1,gn.fromDom(e.dom.cloneNode(n));var e,n},ei=function(t){if(Er(t))return"#shadow-root";var e,n,o,r=ti(t);return e=r,n=gn.fromTag("div"),o=gn.fromDom(e.dom.cloneNode(!0)),Hr(n,o),Wr(n)},ni=er([{key:So(),value:to({can:function(t,e){var n,o,r=e.event,i=r.originator,a=r.target;return o=a,!(Gn(n=i,t.element)&&!Gn(n,o))||(console.warn(So()+" did not get interpreted by the desired target. \nOriginator: "+ei(i)+"\nTarget: "+ei(a)+"\nCheck the "+So()+" event handlers"),!1)}})}]),oi=Object.freeze({__proto__:null,events:ni}),ri=0,ii=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ri+String(e)},ai=r("alloy-id-"),ui=r("data-alloy-id"),ci=ai(),si=ui(),li=function(t,e){Object.defineProperty(t.dom,si,{value:e,writable:!0})},fi=function(t){var e=vr(t)?t.dom[si]:null;return S.from(e)},mi=ii,di=i,pi=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+ei(t().element)+" is not in context.":""))}};return{debugInfo:r("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:s}},gi=pi(),hi=function(t){return $(t,(function(t){return Sn(t,"/*")?t.substring(0,t.length-"/*".length):t}))},vi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:hi(i)}},t},bi=ii("alloy-premade"),yi=function(t){return Zt(bi,t)},xi=function(t){return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,p([e.getApis(),e],n))},n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:hi(i.slice(1))}},e;var e,n,o,r,i},wi={init:function(){return Ci({readState:function(){return"No State required"}})}},Ci=function(t){return t},ki=function(t,e){var n={};return _t(t,(function(t,o){_t(t,(function(t,r){var i=Pt(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n},Si=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},Oi=function(t){return t.cHandler},Di=function(t,e){return{name:t,handler:e}},Ti=function(t,e,n){var o,r,i=m(m({},n),(o=t,r={},U(e,(function(t){r[t.name()]=t.handlers(o)})),r));return ki(i,Di)},_i=function(t){var e,n=R(e=t)?{can:l,abort:s,run:e}:e;return function(t,e){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=[t,e].concat(o);n.abort.apply(void 0,i)?e.stop():n.can.apply(void 0,i)&&n.run.apply(void 0,i)}},Ii=function(t,e,n){var o,r,i=e[n];return i?function(t,e,o,r){try{var i=ot(o,(function(n,o){var i=n[e],a=o[e],u=r.indexOf(i),c=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<c?-1:c<u?1:0}));return ft.value(i)}catch(n){return ft.error([n])}}("Event: "+n,"name",t,i).map((function(t){var e=$(t,(function(t){return t.handler}));return eo(e)})):(o=n,r=t,ft.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify($(r,(function(t){return t.name})),null,2)]))},Ei=function(t,e){var n=Ft(t,(function(t,n){return(1===t.length?ft.value(t[0].handler):Ii(t,e,n)).map((function(o){var r=_i(o),i=1<t.length?G(e[n],(function(e){return H(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return Zt(n,{handler:r,purpose:i})}))}));return te(n,{})},Ai="alloy.base.behaviour",Fi=function(t){var e,n;return Te("custom.definition",me([ye("dom","dom",Wt(),me([Le("tag"),nn("styles",{}),nn("classes",[]),nn("attributes",{}),Ke("value"),Ke("innerHtml")])),Le("components"),Le("uid"),nn("events",{}),nn("apis",{}),ye("eventOrder","eventOrder",((e={})[_o()]=["disabling",Ai,"toggling","typeaheadevents"],e[So()]=[Ai,"focusing","keying"],e[Mo()]=[Ai,"disabling","toggling","representing"],e[vo()]=[Ai,"representing","streaming","invalidating"],e[No()]=[Ai,"representing","item-events","tooltipping"],e[uo()]=["focusing",Ai,"item-type-events"],e[oo()]=["focusing",Ai,"item-type-events"],e[fo()]=["item-type-events","tooltipping"],e[To()]=["receiving","reflecting","tooltipping"],n=e,$t.mergeWithThunk(r(n))),Re()),Ke("domModification")]),t)},Ri=function(t,e){var n=Kr(t,e);return void 0===n||""===n?[]:n.split(" ")},Mi=function(t){return void 0!==t.dom.classList},Pi=function(t,e){return r=e,i=Ri(n=t,o="class").concat([r]),Yr(n,o,i.join(" ")),!0;var n,o,r,i},Bi=function(t,e){return r=e,0<(i=G(Ri(n=t,o="class"),(function(t){return t!==r}))).length?Yr(n,o,i.join(" ")):Qr(n,o),!1;var n,o,r,i},Vi=function(t,e){Mi(t)?t.dom.classList.add(e):Pi(t,e)},zi=function(t){0===(Mi(t)?t.dom.classList:Ri(t,"class")).length&&Qr(t,"class")},ji=function(t,e){Mi(t)?t.dom.classList.remove(e):Bi(t,e),zi(t)},Ni=function(t,e){return Mi(t)&&t.dom.classList.contains(e)},Hi=function(t,e){U(e,(function(e){Vi(t,e)}))},Li=function(t,e){U(e,(function(e){ji(t,e)}))},Ji=function(t){return void 0!==t.style&&R(t.style.getPropertyValue)},$i=function t(e){var n=br(e)?e.dom.parentNode:e.dom;if(void 0===n||null===n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return Pr(gn.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=Br,function(t){return o(r(t))}))},Ui=function(){return Wi(gn.fromDom(document))},Wi=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return gn.fromDom(e)},Gi=function(t,e,n){if(!T(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ji(t)&&t.style.setProperty(e,n)},Xi=function(t,e){Ji(t)&&t.style.removeProperty(e)},Yi=function(t,e,n){var o=t.dom;Gi(o,e,n)},Ki=function(t,e){var n=t.dom;_t(e,(function(t,e){Gi(n,e,t)}))},qi=function(t,e){var n=t.dom;_t(e,(function(t,e){t.fold((function(){Xi(n,e)}),(function(t){Gi(n,e,t)}))}))},Zi=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||$i(t)?o:Qi(n,e)},Qi=function(t,e){return Ji(t)?t.style.getPropertyValue(e):""},ta=function(t,e){var n=t.dom,o=Qi(n,e);return S.from(o).filter((function(t){return 0<t.length}))},ea=function(t,e,n){var o=gn.fromTag(t);return Yi(o,e,n),ta(o,e).isSome()},na=function(t,e){var n=t.dom;Xi(n,e),qr(t,"style").map(On).is("")&&Qr(t,"style")},oa=function(t){return t.dom.offsetWidth},ra=function(t){return t.dom.value},ia=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},aa=function(t){var e,n,o,r=gn.fromTag(t.tag);e=r,n=t.attributes,o=e.dom,_t(n,(function(t,e){Xr(o,e,t)})),Hi(r,t.classes),Ki(r,t.styles),t.innerHtml.each((function(t){return Gr(r,t)}));var i=t.domChildren;return Lr(r,i),t.value.each((function(t){ia(r,t)})),t.uid,li(r,t.uid),r},ua=function(t,e){return n=t,r=$(o=e,(function(t){return en(t.name(),[Le("config"),nn("state",wi)])})),i=Te("component.behaviours",me(r),n.behaviours).fold((function(t){throw new Error(Ee(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(t){return t})),{list:o,data:It(i,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))};var n,o,r,i},ca=function(t){var e,n,o=(e=Pt(t,"behaviours").getOr({}),n=G(Dt(e),(function(t){return void 0!==e[t]})),$(n,(function(t){return e[t].me})));return ua(t,o)},sa=function(t,e,n){var o,r,i,a=m(m({},(o=t).dom),{uid:o.uid,domChildren:$(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return Si({})}),Si),c={"alloy.base.modification":u},s=0<e.length?function(t,e,n,o){var r=m({},e);U(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var i=ki(r,(function(t,e){return{name:t,modification:e}})),a=function(t){return X(t,(function(t,e){return m(m({},e.modification),t)}),{})},u=X(i.classes,(function(t,e){return e.modification.concat(t)}),[]),c=a(i.attributes),s=a(i.styles);return Si({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,m(m({},r=a),{attributes:m(m({},r.attributes),i.attributes),styles:m(m({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},la=function(t,e,n){var o,r,i,a={"alloy.base.behaviour":t.events};return o=n,r=t.eventOrder,i=Ti(o,e,a),Ei(i,r).getOrDie()},fa=function(t){var e,n,o,r,i,a,u,c,s,l,f,p,g,h=di(t),v=h.events,b=d(h,["events"]),y=(e=Pt(b,"components").getOr([]),$(e,ga)),x=m(m({},b),{events:m(m({},oi),v),components:y});return ft.value((o=function(){return g},r=dn(gi),i=_e(Fi(n=x)),a=ca(n),u=a.list,c=a.data,s=sa(i,u,c),l=aa(s),f=la(i,u,c),p=dn(i.components),g={getSystem:r.get,config:function(t){var e=c;return(R(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(t){return R(c[t.name()])},spec:n,readState:function(t){return c[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return i.apis},connect:function(t){r.set(t)},disconnect:function(){r.set(pi(o))},element:l,syncComponents:function(){var t=_r(l),e=Q(t,(function(t){return r.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));p.set(e)},components:p.get,events:f}))},ma=function(t){var e=gn.fromText(t);return da({element:e})},da=function(t){var e=Ie("external.component",fe([Le("element"),Ke("uid")]),t),o=dn(pi());e.uid.each((function(t){li(e.element,t)}));var i={getSystem:o.get,config:S.none,hasConfigured:s,connect:function(t){o.set(t)},disconnect:function(){o.set(pi((function(){return i})))},getApis:function(){return{}},element:e.element,spec:t,readState:r("No state"),syncComponents:n,components:r([]),events:{}};return yi(i)},pa=mi,ga=function(t){return Pt(t,bi).fold((function(){var e=t.hasOwnProperty("uid")?t:m({uid:pa("")},t);return fa(e).getOrDie()}),(function(t){return t}))},ha=yi,va=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=Zi(n,t);return parseFloat(r)||0}return o},o=function(t,e){return Y(e,(function(e,n){var o=Zi(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!M(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;Ji(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}},ba=va("height",(function(t){var e=t.dom;return $i(t)?e.getBoundingClientRect().height:e.offsetHeight})),ya=function(t){return ba.get(t)},xa=function(t){return ba.getOuter(t)},wa=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},Ca=wa,ka=function(t,e){return void 0!==t?t:void 0!==e?e:0},Sa=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return Ca(n.offsetLeft,n.offsetTop);var i=ka(null==o?void 0:o.pageYOffset,r.scrollTop),a=ka(null==o?void 0:o.pageXOffset,r.scrollLeft),u=ka(r.clientTop,n.clientTop),c=ka(r.clientLeft,n.clientLeft);return Oa(t).translate(a-c,i-u)},Oa=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?Ca(o.offsetLeft,o.offsetTop):$i(t)?(e=n.getBoundingClientRect(),Ca(e.left,e.top)):Ca(0,0)},Da=va("width",(function(t){return t.dom.offsetWidth})),Ta=function(t){return Da.get(t)},_a=function(t){return Da.getOuter(t)},Ia=function(t){var e=gn.fromDom(function(t){if(Fr()&&F(t.target)){var e=gn.fromDom(t.target);if(vr(e)&&Vr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return it(n)}}return S.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},i=o(r,n);return{target:e,x:t.clientX,y:t.clientY,stop:n,prevent:r,kill:i,raw:t}},Ea=function(t,e,n,o,r){var i,u,c=(i=n,u=o,function(t){i(t)&&u(Ia(t))});return t.dom.addEventListener(e,c,r),{unbind:a(Aa,t,e,c,r)}},Aa=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Fa=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Ca(n,o)},Ra=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Ma=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Pa=function(t){var e,n,o=void 0===t?window:t,r=o.document,i=Fa(gn.fromDom(r));return n=void 0===(e=o)?window:e,S.from(n.visualViewport).fold((function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Ma(i.left,i.top,e,n)}),(function(t){return Ma(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)}))},Ba=function t(e,n){return e.view(n).fold(r([]),(function(n){var o=e.owner(n),r=t(e,o);return[n].concat(r)}))},Va=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?S.none():S.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(gn.fromDom)},owner:wr}),za=function(t){var e,n,o,r,i=gn.fromDom(document),u=Fa(i);return(e=t,o=(n=Va).owner(e),r=Ba(n,o),S.some(r)).fold(a(Sa,t),(function(e){var n=Oa(t),o=X(e,(function(t,e){var n=Oa(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Ca(o.left+n.left+u.left,o.top+n.top+u.top)}))},ja=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Na=function(t){var e=Sa(t),n=_a(t),o=xa(t);return ja(e.left,e.top,n,o)},Ha=function(t){var e=za(t),n=_a(t),o=xa(t);return ja(e.left,e.top,n,o)},La=function(){return Pa(window)};function Ja(t,e,n,o,r){return t(n,o)?S.some(n):R(r)&&r(n)?S.none():e(n,o,r)}var $a,Ua,Wa=function(t,e,n){for(var o=t.dom,r=R(n)?n:s;o.parentNode;){o=o.parentNode;var i=gn.fromDom(o);if(e(i))return S.some(i);if(r(i))break}return S.none()},Ga=function(t,e,n){return Ja((function(t,e){return e(t)}),Wa,t,e,n)},Xa=function(t,e,n){return Ga(t,e,n).isSome()},Ya=function(t,e,n){return Wa(t,(function(t){return Un(t,e)}),n)},Ka=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Wn(r)?S.none():S.from(r.querySelector(n)).map(gn.fromDom);var n,o,r},qa=function(t,e,n){return Ja(Un,Ya,t,e,n)},Za=function(){var t=ii("aria-owns");return{id:t,link:function(e){Yr(e,"aria-owns",t)},unlink:function(t){Qr(t,"aria-owns")}}},Qa=function(t,e){return Ga(e,(function(t){if(!vr(t))return!1;var e=Kr(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")})).bind((function(t){var e=Kr(t,"id"),n=Rr(t);return Ka(n,'[aria-owns="'+e+'"]')})).exists((function(e){return tu(t,e)}))},tu=function(t,e){return Xa(e,(function(e){return Gn(e,t.element)}),s)||Qa(t,e)},eu="unknown";(Ua=$a=$a||{})[Ua.STOP=0]="STOP",Ua[Ua.NORMAL=1]="NORMAL",Ua[Ua.LOGGING=2]="LOGGING";var nu,ou,ru=dn({}),iu=["alloy/data/Fields","alloy/debugging/Debugging"],au=function(t,e,n){var o,r,i,a;switch(Pt(ru.get(),t).orThunk((function(){var e=Dt(ru.get());return ct(e,(function(e){return-1<t.indexOf(e)?S.some(ru.get()[e]):S.none()}))})).getOr($a.NORMAL)){case $a.NORMAL:return n(uu());case $a.LOGGING:var u=(o=t,r=e,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();N(["mousemove","mouseover","mouseout",Mo()],o)||console.log(o,{event:o,time:t-a,target:r.dom,sequence:$(i,(function(t){return N(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+ei(t.target)+")":t.outcome}))})}}),c=n(u);return u.write(),c;case $a.STOP:return!0}},uu=r({logEventCut:n,logEventStopped:n,logNoParent:n,logEventNoHandlers:n,logEventResponse:n,write:n}),cu=r([Le("menu"),Le("selectedMenu")]),su=r([Le("item"),Le("selectedItem")]),lu=(r(me(su().concat(cu()))),r(me(su()))),fu=Ge("initSize",[Le("numColumns"),Le("numRows")]),mu=function(){return Ge("markers",[Le("backgroundMenu")].concat(cu()).concat(su()))},du=function(t){return Ge("markers",$(t,Le))},pu=function(t,e,n){return function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");K(e,(function(t){return 0<t.indexOf("alloy")&&!H(iu,(function(e){return-1<t.indexOf(e)}))})).getOr(eu)}}(),ye(e,e,n,Oe((function(t){return ft.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},gu=function(t){return pu(0,t,Ut(n))},hu=function(t){return pu(0,t,Ut(S.none))},vu=function(t){return pu(0,t,Wt())},bu=function(t){return pu(0,t,Wt())},yu=function(t,e){return mn(t,r(e))},xu=function(t){return mn(t,i)},wu=r(fu),Cu=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},ku=zt([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Su=ku.southeast,Ou=ku.southwest,Du=ku.northeast,Tu=ku.northwest,_u=ku.south,Iu=ku.north,Eu=ku.east,Au=ku.west,Fu=function(t,e){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],(function(n){return Pt(e,n).map((function(e){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,e)}))}))},Ru=function(t){return t.x},Mu=function(t,e){return t.x+t.width/2-e.width/2},Pu=function(t,e){return t.x+t.width-e.width},Bu=function(t,e){return t.y-e.height},Vu=function(t){return t.y+t.height},zu=function(t,e){return t.y+t.height/2-e.height/2},ju=function(t,e,n){return Cu(Ru(t),Vu(t),n.southeast(),Su(),Fu(t,{left:1,top:3}),"layout-se")},Nu=function(t,e,n){return Cu(Pu(t,e),Vu(t),n.southwest(),Ou(),Fu(t,{right:0,top:3}),"layout-sw")},Hu=function(t,e,n){return Cu(Ru(t),Bu(t,e),n.northeast(),Du(),Fu(t,{left:1,bottom:2}),"layout-ne")},Lu=function(t,e,n){return Cu(Pu(t,e),Bu(t,e),n.northwest(),Tu(),Fu(t,{right:0,bottom:2}),"layout-nw")},Ju=function(t,e,n){return Cu(Mu(t,e),Bu(t,e),n.north(),Iu(),Fu(t,{bottom:2}),"layout-n")},$u=function(t,e,n){return Cu(Mu(t,e),Vu(t),n.south(),_u(),Fu(t,{top:3}),"layout-s")},Uu=function(t,e,n){return Cu((o=t).x+o.width,zu(t,e),n.east(),Eu(),Fu(t,{left:0}),"layout-e");var o},Wu=function(t,e,n){return Cu((o=e,t.x-o.width),zu(t,e),n.west(),Au(),Fu(t,{right:1}),"layout-w");var o},Gu=function(){return[ju,Nu,Hu,Lu,$u,Ju,Uu,Wu]},Xu=function(){return[Nu,ju,Lu,Hu,$u,Ju,Uu,Wu]},Yu=function(){return[Hu,Lu,ju,Nu,Ju,$u]},Ku=function(){return[Lu,Hu,Nu,ju,Ju,$u]},qu=function(){return[ju,Nu,Hu,Lu,$u,Ju]},Zu=function(){return[Nu,ju,Lu,Hu,$u,Ju]},Qu=Object.freeze({__proto__:null,events:function(t){return er([rr(To(),(function(e,n){var o,r,i=t.channels,a=Dt(i),u=n,c=(o=a,(r=u).universal?o:G(o,(function(t){return N(r.channels,t)})));U(c,(function(t){var n=i[t],o=n.schema,r=Ie("channel["+t+"] data\nReceiver: "+ei(e.element),o,u.data);n.onReceive(e,r)}))}))])}}),tc=[Je("channels",De(ft.value,fe([vu("onReceive"),nn("schema",Re())])))],ec=function(t,e,n){return dr((function(o,r){n(o,t,e)}))},nc=function(t,e,n,o,r,i){var a=fe(t),u=en(e,[qe("config",fe(t))]);return ic(a,u,e,n,o,r,i)},oc=function(t,e,n){var o,i,a,u,c,s;return o=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var u=[o].concat(i);return o.config({name:r(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(u,1);return e.apply(void 0,[o,t.config,t.state].concat(n))}))},i=n,a=e.toString(),u=a.indexOf(")")+1,c=a.indexOf("("),s=a.substring(c+1,u-1).split(/,\s*/),o.toFunctionAnnotation=function(){return{name:i,parameters:hi(s.slice(0,1).concat(s.slice(3)))}},o},rc=function(t){return{key:t,value:void 0}},ic=function(t,e,n,o,i,u,c){var s=function(t){return Vt(t,n)?t[n]():S.none()},l=It(i,(function(t,e){return oc(n,t,e)})),f=It(u,vi),d=m(m(m({},f),l),{revoke:a(rc,n),config:function(e){var o=Ie(n+"-config",t,e);return{key:n,value:{config:o,me:d,configAsRaw:Jt((function(){return Ie(n+"-config",t,e)})),initialConfig:e,state:c}}},schema:r(e),exhibit:function(t,e){return s(t).bind((function(t){return Pt(o,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(Si({}))},name:r(n),handlers:function(t){return s(t).map((function(t){return Pt(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return d},ac=Qt,uc=fe([Le("fields"),Le("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),cc=function(t){var e=Ie("Creating behaviour: "+t.name,uc,t);return nc(e.fields,e.name,e.active,e.apis,e.extra,e.state)},sc=fe([Le("branchKey"),Le("branches"),Le("name"),nn("active",{}),nn("apis",{}),nn("state",wi),nn("extra",{})]),lc=function(t){var e,n,o,r,i,a,u,c,s=Ie("Creating behaviour: "+t.name,sc,t);return e=Fe(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=en(n,[qe("config",u=e)]),ic(u,c,n,o,r,i,a)},fc=r(void 0),mc=cc({fields:tc,name:"receiving",active:Qu}),dc=Object.freeze({__proto__:null,exhibit:function(t,e){return Si({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),pc=function(t){return t.dom.focus()},gc=function(t){return void 0===t&&(t=gn.fromDom(document)),S.from(t.dom.activeElement).map(gn.fromDom)},hc=function(t){return gc(Rr(t)).filter((function(e){return t.dom.contains(e.dom)}))},vc=function(t,e){var o=Rr(e),r=gc(o).bind((function(t){var n,o,r=function(e){return Gn(t,e)};return r(e)?S.some(e):(n=r,(o=function(t){for(var e=0;e<t.childNodes.length;e++){var r=gn.fromDom(t.childNodes[e]);if(n(r))return S.some(r);var i=o(t.childNodes[e]);if(i.isSome())return i}return S.none()})(e.dom))})),i=t(e);return r.each((function(t){gc(o).filter((function(e){return Gn(e,t)})).fold((function(){pc(t)}),n)})),i},bc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},yc=function(t,e){var n=function(t){return t+"px"};qi(t,{position:S.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},xc=zt([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),wc=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,g=e.x-n,h=e.y-o,v=r-(g+e.width),b=i-(h+e.height),y=S.some(g),x=S.some(h),w=S.some(v),C=S.some(b),k=S.none();return a=e.direction,u=function(){return bc(t,y,x,k,k)},c=function(){return bc(t,k,x,w,k)},s=function(){return bc(t,y,k,k,C)},l=function(){return bc(t,k,k,w,C)},f=function(){return bc(t,y,x,k,k)},m=function(){return bc(t,y,k,k,C)},d=function(){return bc(t,y,x,k,k)},p=function(){return bc(t,k,x,w,k)},a.fold(u,c,s,l,f,m,d,p)},Cc=function(t,e){var n=a(za,e),o=t.fold(n,n,(function(){var t=Fa();return za(e).translate(-t.left,-t.top)})),r=_a(e),i=xa(e);return ja(o.left,o.top,r,i)},kc=function(t,e,n){var o=Ca(e,n);return t.fold(r(o),r(o),(function(){var t=Fa();return o.translate(-t.left,-t.top)}))},Sc=(xc.none,xc.relative),Oc=xc.fixed,Dc=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Tc=function(t,e,n){return Math.min(Math.max(t,e),n)},_c=zt([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Ic=function(t,e,n,o){var a,u,c,s,l,f,m,d,p,g,h,v,b,y,x,w,C,k,O,D,T,_,I,E,A,F,R,M,P,B,V,z,j,N=t.x,H=t.y,L=t.bubble.offset,J=L.left,$=L.top,U=(a=o,u=t.boundsRestriction,c=L,l=(s=function(t,e){var n="top"===t||"bottom"===t?c.top:c.left;return Pt(u,t).bind(i).bind((function(n){return"left"===t||"top"===t?e<=n?S.some(n):S.none():n<=e?S.some(n):S.none()})).map((function(t){return t+n})).getOr(e)})("left",a.x),f=s("top",a.y),m=s("right",a.right),d=s("bottom",a.bottom),ja(l,f,m-l,d-f)),W=U.y,G=U.bottom,X=U.x,Y=U.right,K=H+$,q=(p=N+J,g=K,h=e,v=n,y=(b=U).x,x=b.y,w=b.width,C=b.height,O=x<=g,D=(k=y<=p)&&O,T=p+h<=y+w&&g+v<=x+C,_=Math.abs(Math.min(h,k?y+w-p:y-(p+h))),I=Math.abs(Math.min(v,O?x+C-g:x-(g+v))),E=Math.max(b.x,b.right-h),A=Math.max(b.y,b.bottom-v),{originInBounds:D,sizeInBounds:T,limitX:Tc(p,b.x,E),limitY:Tc(g,b.y,A),deltaW:_,deltaH:I}),Z=q.originInBounds,Q=q.sizeInBounds,tt=q.limitX,et=q.limitY,nt=q.deltaW,ot=q.deltaH,rt=r(et+ot-W),it=r(G-et),at=(F=t.direction,M=R=it,P=rt,F.fold(R,R,P,P,R,P,M,M)),ut=r(tt+nt-X),ct=r(Y-tt),st={x:tt,y:et,width:nt,height:ot,maxHeight:at,maxWidth:(B=t.direction,z=V=ct,j=ut,B.fold(V,j,V,j,z,z,V,j)),direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:K};return Z&&Q?_c.fit(st):_c.nofit(st,nt,ot)},Ec=function(t,e,n,o){na(e,"max-height"),na(e,"max-width");var r,u,c,s,l,f,m,d,p,g={width:_a(r=e),height:xa(r)};return u=o.preference,c=t,s=g,l=n,f=o.bounds,m=s.width,d=s.height,p=function(t,e,n,o){var r=t(c,s,l);return Ic(r,m,d,f).fold(_c.fit,(function(t,r,i){return o<i||n<r?_c.nofit(t,r,i):_c.nofit(e,n,o)}))},Y(u,(function(t,e){var n=a(p,e);return t.fold(_c.fit,n)}),_c.nofit({x:c.x,y:c.y,width:s.width,height:s.height,maxHeight:s.height,maxWidth:s.width,direction:Su(),classes:{on:[],off:[]},label:"none",candidateYforTest:c.y},-1,-1)).fold(i,i)},Ac=function(t,e,n){var o,r;yc(t,(o=n.origin,r=e,o.fold((function(){return bc("absolute",S.some(r.x),S.some(r.y),S.none(),S.none())}),(function(t,e,n,o){return wc("absolute",r,t,e,n,o)}),(function(t,e,n,o){return wc("fixed",r,t,e,n,o)}))))},Fc=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ba.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),Yi(n,"max-height",r+"px")},Rc=r((function(t,e){Fc(t,e),Ki(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Mc=r((function(t,e){Fc(t,e)})),Pc=function(t,e,n){return void 0===t[e]?n:t[e]},Bc=function(t,e,o,r,i,a){var u,c=Pc(a,"maxHeightFunction",Rc()),s=Pc(a,"maxWidthFunction",n),l=t.anchorBox,f=t.origin,m={bounds:(u=f,i.fold((function(){return u.fold(La,La,ja)}),(function(t){return u.fold(t,t,(function(){var e=t(),n=kc(u,e.x,e.y);return ja(n.left,n.top,e.width,e.height)}))}))),origin:f,preference:r,maxHeightFunction:c,maxWidthFunction:s};Vc(l,e,o,m)},Vc=function(t,e,n,o){var r,i,a,u,c,s,l=Ec(t,e,n,o);Ac(e,l,o),r=e,i=l.classes,Li(r,i.off),Hi(r,i.on),a=e,u=l,(0,o.maxHeightFunction)(a,u.maxHeight),c=e,s=l,(0,o.maxWidthFunction)(c,s.maxWidth)},zc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],jc=function(t,e,n){var o=function(t){return Pt(n,t).getOr([])},r=function(t,e,n){var r=nt(zc,n);return{offset:Ca(t,e),classesOn:Q(n,o),classesOff:Q(r,o)}};return{southeast:function(){return r(-t,e,["top","alignLeft"])},southwest:function(){return r(t,e,["top","alignRight"])},south:function(){return r(-t/2,e,["top","alignCentre"])},northeast:function(){return r(-t,-e,["bottom","alignLeft"])},northwest:function(){return r(t,-e,["bottom","alignRight"])},north:function(){return r(-t/2,-e,["bottom","alignCentre"])},east:function(){return r(t,-e/2,["valignCentre","left"])},west:function(){return r(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,e,["top","alignRight"])},innerNortheast:function(){return r(t,e,["top","alignLeft"])},innerNorth:function(){return r(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-e,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return r(t,-e/2,["valignCentre","right"])},innerEast:function(){return r(-t,-e/2,["valignCentre","left"])}}},Nc=function(){return jc(0,0,{})},Hc=function(t,e){return function(n){return"rtl"===Lc(n)?e:t}},Lc=function(t){return"rtl"===Zi(t,"direction")?"rtl":"ltr"};(ou=nu=nu||{}).TopToBottom="toptobottom",ou.BottomToTop="bottomtotop";var Jc,$c,Uc,Wc,Gc,Xc="data-alloy-vertical-dir",Yc=function(t){return Xa(t,(function(t){return vr(t)&&Kr(t,"data-alloy-vertical-dir")===nu.BottomToTop}))},Kc=function(){return en("layouts",[Le("onLtr"),Le("onRtl"),Ke("onBottomLtr"),Ke("onBottomRtl")])},qc=function(t,e,n,o,r,i,a){var u=a.map(Yc).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),s=e.layouts.map((function(e){return e.onRtl(t)})),l=u?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),f=u?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(s).getOr(i):s.getOr(o);return Hc(l,f)(t)},Zc=[Le("hotspot"),Ke("bubble"),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=e.hotspot,r=Cc(n,o.element),i=qc(t.element,e,qu(),Zu(),Yu(),Ku(),S.some(e.hotspot.element));return S.some({anchorBox:r,bubble:e.bubble.getOr(Nc()),overrides:e.overrides,layouts:i,placer:S.none()})}))],Qc=[Le("x"),Le("y"),nn("height",0),nn("width",0),nn("bubble",Nc()),nn("overrides",{}),Kc(),yu("placement",(function(t,e,n){var o=kc(n,e.x,e.y),r=ja(o.left,o.top,e.width,e.height),i=qc(t.element,e,Gu(),Xu(),Gu(),Xu(),S.none());return S.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:S.none()})}))],ts=zt([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),es=function(t){return t.fold(i,(function(t,e,n){return t.translate(-e,-n)}))},ns=function(t){return t.fold(i,i)},os=function(t){return Y(t,(function(t,e){return t.translate(e.left,e.top)}),Ca(0,0))},rs=function(t){var e=$(t,ns);return os(e)},is=ts.screen,as=ts.absolute,us=function(t,e,n){var o,r,i=wr(t.element),a=Fa(i),u=(o=t,r=Sr(n.root).dom,S.from(r.frameElement).map(gn.fromDom).filter((function(t){var e=wr(t),n=wr(o.element);return Gn(e,n)})).map(Sa).getOr(a));return as(u,a.left,a.top)},cs=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=is(Ca(r,i));return S.some({point:c,width:a,height:u})},ss=function(t,e,n,o,r){return t.map((function(t){var i,a,u,c=[e,t.point],s=(i=function(){return rs(c)},a=function(){return rs(c)},u=function(){return t=$(c,es),os(t);var t},o.fold(i,a,u)),l={x:s.left,y:s.top,width:t.width,height:t.height},f=(n.showAbove?Yu:qu)(),m=(n.showAbove?Ku:Zu)(),d=qc(r,n,f,m,f,m,S.none());return{anchorBox:l,bubble:n.bubble.getOr(Nc()),overrides:n.overrides,layouts:d,placer:S.none()}}))},ls=[Le("node"),Le("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=us(t,0,e);return e.node.filter($i).bind((function(r){var i=r.dom.getBoundingClientRect(),a=cs(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ss(a,o,e,n,u)}))}))],fs=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ms=zt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ds=(ms.before,ms.on,ms.after,function(t){return t.fold(i,i,i)}),ps=zt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gs={domRange:ps.domRange,relative:ps.relative,exact:ps.exact,exactFromRange:function(t){return ps.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=t.match({domRange:function(t){return gn.fromDom(t.startContainer)},relative:function(t,e){return ds(t)},exact:function(t,e,n,o){return t}});return Sr(e)},range:fs},hs=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),r=i,n.fold((function(t){r.setEndBefore(t.dom)}),(function(t,e){r.setEnd(t.dom,e)}),(function(t){r.setEndAfter(t.dom)})),i},vs=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},bs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},ys=zt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xs=function(t,e,n){return e(gn.fromDom(n.startContainer),n.startOffset,gn.fromDom(n.endContainer),n.endOffset)},ws=function(t,e){var n,o,i,a=(n=t,e.match({domRange:function(t){return{ltr:r(t),rtl:S.none}},relative:function(t,e){return{ltr:Jt((function(){return hs(n,t,e)})),rtl:Jt((function(){return S.some(hs(n,e,t))}))}},exact:function(t,e,o,r){return{ltr:Jt((function(){return vs(n,t,e,o,r)})),rtl:Jt((function(){return S.some(vs(n,o,r,t,e))}))}}}));return(i=(o=a).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return ys.rtl(gn.fromDom(t.endContainer),t.endOffset,gn.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return xs(0,ys.ltr,i)})):xs(0,ys.ltr,i)},Cs=(ys.ltr,ys.rtl,Jc=br,$c="text",{get:function(t){if(!Jc(t))throw new Error("Can only get "+$c+" value of a "+$c+" node");return Uc(t).getOr("")},getOption:Uc=function(t){return Jc(t)?S.from(t.dom.nodeValue):S.none()},set:function(t,e){if(!Jc(t))throw new Error("Can only set raw "+$c+" value of a "+$c+" node");t.dom.nodeValue=e}}),ks=function(t){return Cs.getOption(t)},Ss=["img","br"],Os=function(t){return ks(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf(" ")})).isSome()||N(Ss,gr(t))},Ds=function(t,e){var n=function t(n){for(var o=_r(n),r=o.length-1;0<=r;r--){var i=o[r];if(e(i))return S.some(i);var a=t(i);if(a.isSome())return a}return S.none()};return n(t)},Ts=function(t,e){return n=e,r=void 0===(o=t)?document:o.dom,Wn(r)?[]:$(r.querySelectorAll(n),gn.fromDom);var n,o,r},_s=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=wr(r=t).dom.createRange()).setStart(r.dom,i),c.setEnd(a.dom,u),c),l=Gn(t,n)&&e===o;return s.collapsed&&!l},Is=function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return S.some(fs(gn.fromDom(e.startContainer),e.startOffset,gn.fromDom(n.endContainer),n.endOffset))}return S.none()},Es=function(t){if(null===t.anchorNode||null===t.focusNode)return Is(t);var e=gn.fromDom(t.anchorNode),n=gn.fromDom(t.focusNode);return _s(e,t.anchorOffset,n,t.focusOffset)?S.some(fs(e,t.anchorOffset,n,t.focusOffset)):Is(t)},As=function(t){return e=t,S.from(e.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(Es);var e},Fs=function(t,e){var n,o,r,i,a=ws(n=t,e).match({ltr:function(t,e,o,r){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(o.dom,r),i},rtl:function(t,e,o,r){var i=n.document.createRange();return i.setStart(o.dom,r),i.setEnd(t.dom,e),i}});return r=(o=a).getClientRects(),0<(i=0<r.length?r[0]:o.getBoundingClientRect()).width||0<i.height?S.some(i).map(bs):S.none()},Rs=function(t,e){return{element:t,offset:e}},Ms=function(t,e){var n=_r(t);if(0===n.length)return Rs(t,e);if(e<n.length)return Rs(n[e],0);var o,r=n[n.length-1],i=br(r)?(o=r,Cs.get(o).length):_r(r).length;return Rs(r,i)},Ps=function(t,e){return(br(t)?Rs:Ms)(t,e)},Bs=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return As(t)}}))().map((function(t){var e=Ps(t.start,t.soffset),n=Ps(t.finish,t.foffset);return gs.range(e.element,e.offset,n.element,n.offset)}))},Vs=[Ke("getSelection"),Le("root"),Ke("bubble"),Kc(),nn("overrides",{}),nn("showAbove",!1),yu("placement",(function(t,e,n){var o=Sr(e.root).dom,r=us(t,0,e),i=Bs(o,e).bind((function(t){return Fs(o,gs.exactFromRange(t)).orThunk((function(){var e=gn.fromText("\ufeff");return zr(t.start,e),Fs(o,gs.exact(e,0,e,1)).map((function(t){return $r(e),t}))})).bind((function(t){return cs(t.left,t.top,t.width,t.height)}))})),a=Bs(o,e).bind((function(t){return vr(t.start)?S.some(t.start):Dr(t.start)})).getOr(t.element);return ss(i,r,e,n,a)}))],zs=function(t){return t.x+t.width},js=function(t,e){return t.x-e.width},Ns=function(t,e){return t.y-e.height+t.height},Hs=function(t){return t.y},Ls=function(t,e,n){return Cu(zs(t),Hs(t),n.southeast(),Su(),Fu(t,{left:0,top:2}),"link-layout-se")},Js=function(t,e,n){return Cu(js(t,e),Hs(t),n.southwest(),Ou(),Fu(t,{right:1,top:2}),"link-layout-sw")},$s=function(t,e,n){return Cu(zs(t),Ns(t,e),n.northeast(),Du(),Fu(t,{left:0,bottom:3}),"link-layout-ne")},Us=function(t,e,n){return Cu(js(t,e),Ns(t,e),n.northwest(),Tu(),Fu(t,{right:1,bottom:3}),"link-layout-nw")},Ws=function(){return[Ls,Js,$s,Us]},Gs=function(){return[Js,Ls,Us,$s]},Xs=[Le("item"),Kc(),nn("overrides",{}),yu("placement",(function(t,e,n){var o=Cc(n,e.item.element),r=qc(t.element,e,Ws(),Gs(),Ws(),Gs(),S.none());return S.some({anchorBox:o,bubble:Nc(),overrides:e.overrides,layouts:r,placer:S.none()})}))],Ys=Fe("anchor",{selection:Vs,node:ls,hotspot:Zc,submenu:Xs,makeshift:Qc}),Ks=function(t,e,n,o,r){var i={anchorBox:n.anchorBox,origin:e};Bc(i,r.element,n.bubble,n.layouts,o,n.overrides)},qs=function(t,e,n,o,r,i){var a=i.map(Na);return Zs(t,e,n,o,r,a)},Zs=function(t,e,n,o,i,a){var u=Ie("positioning anchor.info",Ys,o);vc((function(){Yi(i.element,"position","fixed");var n=ta(i.element,"visibility");Yi(i.element,"visibility","hidden");var o,c,s,l,f=e.useFixed()?(l=document.documentElement,Oc(0,0,l.clientWidth,l.clientHeight)):(c=Sa((o=t).element),s=o.element.dom.getBoundingClientRect(),Sc(c.left,c.top,s.width,s.height)),m=u.placement,d=a.map(r).or(e.getBounds);m(t,u,f).each((function(e){e.placer.getOr(Ks)(t,f,e,d,i)})),n.fold((function(){na(i.element,"visibility")}),(function(t){Yi(i.element,"visibility",t)})),ta(i.element,"left").isNone()&&ta(i.element,"top").isNone()&&ta(i.element,"right").isNone()&&ta(i.element,"bottom").isNone()&&ta(i.element,"position").is("fixed")&&na(i.element,"position")}),i.element)},Qs=Object.freeze({__proto__:null,position:function(t,e,n,o,r){qs(t,e,n,o,r,S.none())},positionWithin:qs,positionWithinBounds:Zs,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),tl=[nn("useFixed",s),Ke("getBounds")],el=cc({fields:tl,name:"positioning",active:dc,apis:Qs}),nl=function t(e){Yo(e,No());var n=e.components();U(n,t)},ol=function t(e){var n=e.components();U(n,t),Yo(e,jo())},rl=function(t,e){Hr(t.element,e.element)},il=function(t,e){var n,o=t.components();U((n=t).components(),(function(t){return $r(t.element)})),Jr(n.element),n.syncComponents();var r=nt(o,e);U(r,(function(e){nl(e),t.getSystem().removeFromWorld(e)})),U(e,(function(e){e.getSystem().isConnected()?rl(t,e):(t.getSystem().addToWorld(e),rl(t,e),$i(t.element)&&ol(e)),t.syncComponents()}))},al=function(t,e){ul(t,e,Hr)},ul=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),$i(t.element)&&ol(e),t.syncComponents()},cl=function(t){nl(t),$r(t.element),t.getSystem().removeFromWorld(t)},sl=function(t){var e=Or(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));cl(t),e.each((function(t){t.syncComponents()}))},ll=function(t){var e=t.components();U(e,cl),Jr(t.element),t.syncComponents()},fl=function(t,e){ml(t,e,Hr)},ml=function(t,e,n){n(t,e.element);var o=_r(e.element);U(o,(function(t){e.getByDom(t).each(ol)}))},dl=function(t){var e=_r(t.element);U(e,(function(e){t.getByDom(e).each(nl)})),$r(t.element)},pl=function(t,e,n,o){n.get().each((function(e){ll(t)}));var r=e.getAttachPoint(t);al(r,t);var i=t.getSystem().build(o);return al(t,i),n.set(i),i},gl=function(t,e,n,o){var r=pl(t,e,n,o);return e.onOpen(t,r),r},hl=function(t,e,n){n.get().each((function(o){ll(t),sl(t),e.onClose(t,o),n.clear()}))},vl=function(t,e,n){return n.isOpen()},bl=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);Yi(t.element,"position",el.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",ta(o.element,r).fold((function(){Qr(o.element,i)}),(function(t){Yr(o.element,i,t)})),Yi(o.element,r,a)},yl=function(t,e,n){var o,r,i,a;o=t.element,H(["top","left","right","bottom"],(function(t){return ta(o,t).isSome()}))||na(t.element,"position"),r=t,i="visibility",a=e.cloakVisibilityAttr,qr(r.element,a).fold((function(){return na(r.element,i)}),(function(t){return Yi(r.element,i,t)}))},xl=Object.freeze({__proto__:null,cloak:bl,decloak:yl,open:gl,openWhileCloaked:function(t,e,n,o,r){bl(t,e),gl(t,e,n,o),r(),yl(t,e)},close:hl,isOpen:vl,isPartOf:function(t,e,n,o){return vl(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return pl(t,e,n,o)}))}}),wl=Object.freeze({__proto__:null,events:function(t,e){return er([rr(Fo(),(function(n,o){hl(n,t,e)}))])}}),Cl=[gu("onOpen"),gu("onClose"),Le("isPartOf"),Le("getAttachPoint"),nn("cloakVisibilityAttr","data-precloak-visibility")],kl=cc({fields:Cl,name:"sandboxing",active:wl,apis:xl,state:Object.freeze({__proto__:null,init:function(){var t=dn(S.none()),e=r("not-implemented");return Ci({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(S.none())},set:function(e){t.set(S.some(e))},get:function(){return t.get()}})}})}),Sl=r("dismiss.popups"),Ol=r("reposition.popups"),Dl=r("mouse.released"),Tl=fe([nn("isExtraPart",s),en("fireEventInstead",[nn("event",Ho())])]),_l=function(t){var e=Ie("Dismissal",Tl,t),n={};return n[Sl()]={schema:fe([Le("target")]),onReceive:function(t,n){kl.isOpen(t)&&(kl.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold((function(){return kl.close(t)}),(function(e){return Yo(t,e.event)})))}},n},Il=fe([en("fireEventInstead",[nn("event",Lo())]),We("doReposition")]),El=function(t){var e=Ie("Reposition",Il,t),n={};return n[Ol()]={onReceive:function(t){kl.isOpen(t)&&e.fireEventInstead.fold((function(){return e.doReposition(t)}),(function(e){return Yo(t,e.event)}))}},n},Al=function(t,e,n){e.store.manager.onLoad(t,e,n)},Fl=function(t,e,n){e.store.manager.onUnload(t,e,n)},Rl=Object.freeze({__proto__:null,onLoad:Al,onUnload:Fl,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Ml=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[fr((function(n,o){Al(n,t,e)})),mr((function(n,o){Fl(n,t,e)}))]:[ec(t,e,Al)];return er(n)}}),Pl=function(){var t=dn(null);return Ci({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Bl=function(){var t=dn({}),e=dn({});return Ci({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Pt(t.get(),n).orThunk((function(){return Pt(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},a={};U(n,(function(t){i[t.value]=t,Pt(t,"meta").each((function(e){Pt(e,"text").each((function(e){a[e]=t}))}))})),t.set(m(m({},o),i)),e.set(m(m({},r),a))},clear:function(){t.set({}),e.set({})}})},Vl=Object.freeze({__proto__:null,memory:Pl,dataset:Bl,manual:function(){return Ci({readState:n})},init:function(t){return t.store.manager.state(t)}}),zl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},jl=[Ke("initialValue"),Le("getFallbackEntry"),Le("getDataKey"),Le("setValue"),yu("manager",{setValue:zl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold((function(){return o.getFallbackEntry(r)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){zl(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:Bl})],Nl=[Le("getValue"),nn("setValue",n),Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:n,state:wi.init})],Hl=[Ke("initialValue"),yu("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Pl})],Ll=[on("store",{mode:"memory"},Fe("mode",{memory:Hl,manual:Nl,dataset:jl})),gu("onSetValue"),nn("resetOnDom",!1)],Jl=cc({fields:Ll,name:"representing",active:Ml,apis:Rl,extra:{setValueFrom:function(t,e){var n=Jl.getValue(e);Jl.setValue(t,n)}},state:Vl}),$l=function(t,e){return fn(t,{},$(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ye(n,n,Gt(),le((function(t){return wt("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([mn("dump",i)]))},Ul=function(t){return t.dump},Wl=function(t,e){return m(m({},t.dump),ac(e))},Gl=$l,Xl=Wl,Yl="placeholder",Kl=zt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ql=function(t){return Bt(t,"uiType")},Zl=function(t,e,n,o){return ql(n)&&n.uiType===Yl?(a=n,u=o,(i=t).exists((function(t){return t!==a.owner}))?Kl.single(!0,r(a)):Pt(u,a.name).fold((function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+Dt(u)+"]\nNamespace: "+i.getOr("none")+"\nSpec: "+JSON.stringify(a,null,2))}),(function(t){return t.replace()}))):Kl.single(!1,r(n));var i,a,u},Ql=function t(e,n,o,r){return Zl(e,0,o,r).fold((function(i,a){var u=ql(o)?a(n,o.config,o.validated):a(n),c=Pt(u,"components").getOr([]),s=Q(c,(function(o){return t(e,n,o,r)}));return[m(m({},u),{components:s})]}),(function(t,e){if(ql(o)){var r=e(n,o.config,o.validated);return o.validated.preprocess.getOr(i)(r)}return e(n)}))},tf=function(t,e,n,o){var i,a,u,c=It(o,(function(t,e){return o=t,i=!1,{name:r(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return i},replace:function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,o}};var n,o,i})),s=(i=t,a=e,u=c,Q(n,(function(t){return Ql(i,a,t,u)})));return _t(c,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),s},ef=Kl.single,nf=Kl.multiple,of=r(Yl),rf=zt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),af=nn("factory",{sketch:i}),uf=nn("schema",[]),cf=Le("name"),sf=ye("pname","pname",Xt((function(t){return"<alloy."+ii(t.name)+">"})),Re()),lf=mn("schema",(function(){return[Ke("preprocess")]})),ff=nn("defaults",r({})),mf=nn("overrides",r({})),df=me([af,uf,cf,sf,ff,mf]),pf=me([af,uf,cf,ff,mf]),gf=me([af,uf,cf,sf,ff,mf]),hf=me([af,lf,cf,Le("unit"),sf,ff,mf]),vf=function(t){return t.fold(S.some,S.none,S.some,S.some)},bf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},yf=function(t,e){return function(n){var o=Ie("Converting part type",e,n);return t(o)}},xf=yf(rf.required,df),wf=yf(rf.external,pf),Cf=yf(rf.optional,gf),kf=yf(rf.group,hf),Sf=r("entirety"),Of=Object.freeze({__proto__:null,required:xf,external:wf,optional:Cf,group:kf,asNamedPart:vf,name:bf,asCommon:function(t){return t.fold(i,i,i,i)},original:Sf}),Df=function(t,e,n,o){return Ht(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Tf=function(t,e){var n={};return U(e,(function(e){vf(e).each((function(e){var o=_f(t,e.pname);n[e.name]=function(n){var r=Ie("Part: "+e.name+" in "+t,me(e.schema),n);return m(m({},o),{config:n,validated:r})}}))})),n},_f=function(t,e){return{uiType:of(),owner:t,name:e}},If=function(t,e,n){return{uiType:of(),owner:t,name:e,config:n,validated:{}}},Ef=function(t){return Q(t,(function(t){return t.fold(S.none,S.some,S.none,S.none).map((function(t){return Ge(t.name,t.schema.concat([xu(Sf())]))})).toArray()}))},Af=function(t){return $(t,bf)},Ff=function(t,e,n){return o=e,i={},a={},U(n,(function(t){t.fold((function(t){i[t.pname]=ef(!0,(function(e,n,o){return t.factory.sketch(Df(e,t,n,o))}))}),(function(t){var e=o.parts[t.name];a[t.name]=r(t.factory.sketch(Df(o,t,e[Sf()]),e))}),(function(t){i[t.pname]=ef(!1,(function(e,n,o){return t.factory.sketch(Df(e,t,n,o))}))}),(function(t){i[t.pname]=nf(!0,(function(e,n,o){var r=e[t.name];return $(r,(function(n){return t.factory.sketch(Ht(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:r(i),externals:r(a)};var o,i,a},Rf=function(t,e,n){return tf(S.some(t),e,e.components,n)},Mf=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Pf=function(t,e,n){return Mf(t,e,n).getOrDie("Could not find part: "+n)},Bf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return U(n,(function(t){o[t]=r(a.getByUid(i[t]))})),o},Vf=function(t,e){var n=t.getSystem();return It(e.partUids,(function(t,e){return r(n.getByUid(t))}))},zf=function(t){return Dt(t.partUids)},jf=function(t,e,n){var o={},i=e.partUids,a=t.getSystem();return U(n,(function(t){o[t]=r(a.getByUid(i[t]).getOrDie())})),o},Nf=function(t,e){var n=Af(e);return Qt($(n,(function(e){return{key:e,value:t+"-"+e}})))},Hf=function(t){return ye("partUids","partUids",Yt((function(e){return Nf(e.uid,t)})),Re())},Lf=Object.freeze({__proto__:null,generate:Tf,generateOne:If,schemas:Ef,names:Af,substitutes:Ff,components:Rf,defaultUids:Nf,defaultUidsSchema:Hf,getAllParts:Vf,getAllPartNames:zf,getPart:Mf,getPartOrDie:Pf,getParts:Bf,getPartsOrDie:jf}),Jf=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[Ge("parts",i)]:[]).concat([Le("uid"),nn("dom",{}),nn("components",[]),xu("originalSpec"),nn("debug.sketcher",{})]).concat(a));return Ie(t+" [SpecSchema]",fe(u.concat(e)),n)},$f=function(t,e,n,o,r){var i=Uf(r),a=Ef(n),u=Hf(n),c=Jf(t,e,i,a,[u]),s=Ff(0,c,n);return o(c,Rf(t,c,s.internals()),i,s.externals())},Uf=function(t){return Bt(t,"uid")?t:m(m({},t),{uid:mi("uid")})},Wf=fe([Le("name"),Le("factory"),Le("configFields"),nn("apis",{}),nn("extraApis",{})]),Gf=fe([Le("name"),Le("factory"),Le("configFields"),Le("partFields"),nn("apis",{}),nn("extraApis",{})]),Xf=function(t){var e=Ie("Sketcher for "+t.name,Wf,t),n=It(e.apis,xi),o=It(e.extraApis,vi);return m(m({name:e.name,configFields:e.configFields,sketch:function(t){return n=e.name,o=e.configFields,r=e.factory,i=Uf(t),r(Jf(n,o,i,[],[]),i);var n,o,r,i}},n),o)},Yf=function(t){var e=Ie("Sketcher for "+t.name,Gf,t),n=Tf(e.name,e.partFields),o=It(e.apis,xi),r=It(e.extraApis,vi);return m(m({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return $f(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},Kf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},qf=function(t,e){return t?S.some(e):S.none()},Zf=function(t){return"input"===gr(t)&&"radio"!==Kr(t,"type")||"textarea"===gr(t)},Qf=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),tm=[Le("find")],em=cc({fields:tm,name:"composing",apis:Qf}),nm=function(t,e,n,o){var r=Ts(t.element,"."+e.highlightClass);U(r,(function(n){H(o,(function(t){return t.element===n}))||(ji(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),Yo(n,Xo())})))}))},om=function(t,e,n,o){nm(t,e,0,[o]),rm(t,e,n,o)||(Vi(o.element,e.highlightClass),e.onHighlight(t,o),Yo(o,Go()))},rm=function(t,e,n,o){return Ni(o.element,e.highlightClass)},im=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return S.from(r[o]).fold((function(){return ft.error(new Error("No element found with index "+o))}),t.getSystem().getByDom)},am=function(t,e,n){return Ka(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},um=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return(0<o.length?S.some(o[o.length-1]):S.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},cm=function(t,e,n,o){var r=Ts(t.element,"."+e.itemClass);return q(r,(function(t){return Ni(t,e.highlightClass)})).bind((function(e){var n=Dc(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))},sm=function(t,e,n){var o=Ts(t.element,"."+e.itemClass);return Kf($(o,(function(e){return t.getSystem().getByDom(e).toOptional()})))},lm=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return nm(t,e,0,[])},dehighlight:function(t,e,n,o){rm(t,e,n,o)&&(ji(o.element,e.highlightClass),e.onDehighlight(t,o),Yo(o,Xo()))},highlight:om,highlightFirst:function(t,e,n){am(t,e).each((function(o){om(t,e,n,o)}))},highlightLast:function(t,e,n){um(t,e).each((function(o){om(t,e,n,o)}))},highlightAt:function(t,e,n,o){im(t,e,n,o).fold((function(t){throw t}),(function(o){om(t,e,n,o)}))},highlightBy:function(t,e,n,o){var r=sm(t,e);K(r,o).each((function(o){om(t,e,n,o)}))},isHighlighted:rm,getHighlighted:function(t,e,n){return Ka(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:am,getLast:um,getPrevious:function(t,e,n){return cm(t,e,0,-1)},getNext:function(t,e,n){return cm(t,e,0,1)},getCandidates:sm}),fm=[Le("highlightClass"),Le("itemClass"),gu("onHighlight"),gu("onDehighlight")],mm=cc({fields:fm,name:"highlighting",apis:lm}),dm=[8],pm=[9],gm=[13],hm=[27],vm=[32],bm=[37],ym=[38],xm=[39],wm=[40],Cm=function(t,e,n){var o=et(t.slice(0,e)),r=et(t.slice(e+1));return K(o.concat(r),n)},km=function(t,e,n){var o=et(t.slice(0,e));return K(o,n)},Sm=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return K(r.concat(o),n)},Om=function(t,e,n){var o=t.slice(e+1);return K(o,n)},Dm=function(t){return function(e){var n=e.raw;return N(t,n.which)}},Tm=function(t){return function(e){return tt(t,(function(t){return t(e)}))}},_m=function(t){return!0===t.raw.shiftKey},Im=function(t){return!0===t.raw.ctrlKey},Em=u(_m),Am=function(t,e){return{matches:t,classification:e}},Fm=function(t,e,n){e.exists((function(t){return n.exists((function(e){return Gn(e,t)}))}))||Ko(t,Jo(),{prevFocus:e,newFocus:n})},Rm=function(){var t=function(t){return hc(t.element)};return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element);var r=t(e);Fm(e,o,r)}}},Mm=function(){var t=function(t){return mm.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:function(e,o){var r=t(e);e.getSystem().getByDom(o).fold(n,(function(t){mm.highlight(e,t)}));var i=t(e);Fm(e,r,i)}}};(Gc=Wc=Wc||{}).OnFocusMode="onFocus",Gc.OnEnterOrSpaceMode="onEnterOrSpace",Gc.OnApiMode="onApi";var Pm,Bm=function(t,e,n,o,r){var i=function(t,e,n,o,r){var i,a,u=n(t,e,o,r);return i=u,a=e.event,K(i,(function(t){return t.matches(a)})).map((function(t){return t.classification})).bind((function(n){return n(t,e,o,r)}))},a={schema:function(){return t.concat([nn("focusManager",Rm()),on("focusInside","onFocus",Oe((function(t){return N(["onFocus","onEnterOrSpace","onApi"],t)?ft.value(t):ft.error("Invalid value for focusInside")}))),yu("handler",a),yu("state",e),yu("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var a=t.focusInside!==Wc.OnFocusMode?S.none():r(t).map((function(n){return rr(So(),(function(o,r){n(o,t,e),r.stop()}))})),u=[rr(go(),(function(o,a){i(o,a,n,t,e).fold((function(){var n,i,u;n=o,i=a,u=Dm(vm.concat(gm))(i.event),t.focusInside===Wc.OnEnterOrSpaceMode&&u&&Qn(n,i)&&r(t).each((function(o){o(n,t,e),i.stop()}))}),(function(t){a.stop()}))})),rr(ho(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return er(a.toArray().concat(u))}};return a},Vm=function(t){var e=[Ke("onEscape"),Ke("onEnter"),nn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),nn("firstTabstop",0),nn("useTabstopAt",l),Ke("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return qa(e,t)})).getOr(e);return 0<ya(n)},o=function(t,e,o){var r,i,a;r=e,i=Ts(t.element,r.selector),a=G(i,(function(t){return n(r,t)})),S.from(a[r.firstTabstop]).each((function(n){e.focusManager.set(t,n)}))},i=function(t,e,o,r,i){return i(e,o,(function(t){return n(e=r,o=t)&&e.useTabstopAt(o);var e,o})).fold((function(){return r.cyclic?S.some(!0):S.none()}),(function(e){return r.focusManager.set(t,e),S.some(!0)}))},u=function(t,e,n,o){var r,u,c=Ts(t.element,n.selector);return r=t,(u=n).focusManager.get(r).bind((function(t){return qa(t,u.selector)})).bind((function(e){return q(c,a(Gn,e)).bind((function(e){return i(t,c,e,n,o)}))}))},c=r([Am(Tm([_m,Dm(pm)]),(function(t,e,n){var o=n.cyclic?Cm:km;return u(t,0,n,o)})),Am(Dm(pm),(function(t,e,n){var o=n.cyclic?Sm:Om;return u(t,0,n,o)})),Am(Dm(hm),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Am(Tm([Em,Dm(gm)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),s=r([]);return Bm(e,wi.init,c,s,(function(){return S.some(o)}))},zm=Vm(mn("cyclic",s)),jm=Vm(mn("cyclic",l)),Nm=function(t,e,n){return Zf(n)&&Dm(vm)(e.event)?S.none():(Zo(t,n,_o()),S.some(!0))},Hm=function(t,e){return S.some(!0)},Lm=[nn("execute",Nm),nn("useSpace",!1),nn("useEnter",!0),nn("useControlEnter",!1),nn("useDown",!1)],Jm=function(t,e,n){return n.execute(t,e,t.element)},$m=Bm(Lm,wi.init,(function(t,e,n,o){var r=n.useSpace&&!Zf(t.element)?vm:[],i=n.useEnter?gm:[],a=n.useDown?wm:[],u=r.concat(i).concat(a);return[Am(Dm(u),Jm)].concat(n.useControlEnter?[Am(Tm([Im,Dm(gm)]),Jm)]:[])}),(function(t,e,n,o){return n.useSpace&&!Zf(t.element)?[Am(Dm(vm),Hm)]:[]}),(function(){return S.none()})),Um=function(){var t=dn(S.none());return Ci({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(S.some({numRows:e,numColumns:n}))},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})},Wm=Object.freeze({__proto__:null,flatgrid:Um,init:function(t){return t.state(t)}}),Gm=function(t){return function(e,n,o,r){var i=t(e.element);return qm(i,e,n,o,r)}},Xm=function(t,e){var n=Hc(t,e);return Gm(n)},Ym=function(t,e){var n=Hc(e,t);return Gm(n)},Km=function(t){return function(e,n,o,r){return qm(t,e,n,o,r)}},qm=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},Zm=Km,Qm=Km,td=Km,ed=function(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e},nd=function(t,e,n){var o,r=Ts(t,n),i=G(r,ed);return q(o=i,(function(t){return Gn(t,e)})).map((function(t){return{index:t,candidates:o}}))},od=function(t,e){return q(t,(function(t){return Gn(e,t)}))},rd=function(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?S.some(t[o]):S.none()}))},id=function(t,e,n,o,r){return rd(t,e,o,(function(e,i){var a=e===n-1?t.length-e*o:o,u=Dc(i,r,0,a-1);return S.some({row:e,column:u})}))},ad=function(t,e,n,o,r){return rd(t,e,o,(function(e,i){var a=Dc(e,r,0,n-1),u=a===n-1?t.length-a*o:o,c=Tc(i,0,u-1);return S.some({row:a,column:c})}))},ud=[Le("selector"),nn("execute",Nm),hu("onEscape"),nn("captureTab",!1),wu()],cd=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},sd=function(t){return function(e,n,o,r){return nd(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}},ld=function(t,e,n){return n.captureTab?S.some(!0):S.none()},fd=sd((function(t,e,n,o){return id(t,e,n,o,-1)})),md=sd((function(t,e,n,o){return id(t,e,n,o,1)})),dd=sd((function(t,e,n,o){return ad(t,e,n,o,-1)})),pd=sd((function(t,e,n,o){return ad(t,e,n,o,1)})),gd=r([Am(Dm(bm),Xm(fd,md)),Am(Dm(xm),Ym(fd,md)),Am(Dm(ym),Zm(dd)),Am(Dm(wm),Qm(pd)),Am(Tm([_m,Dm(pm)]),ld),Am(Tm([Em,Dm(pm)]),ld),Am(Dm(hm),(function(t,e,n){return n.onEscape(t,e)})),Am(Dm(vm.concat(gm)),(function(t,e,n,o){return r=t,(i=n).focusManager.get(r).bind((function(t){return qa(t,i.selector)})).bind((function(o){return n.execute(t,e,o)}));var r,i}))]),hd=r([Am(Dm(vm),Hm)]),vd=Bm(ud,Um,gd,hd,(function(){return S.some(cd)})),bd=function(t,e,n,o){var r=function t(e,n,r){var i,a=Dc(n,o,0,r.length-1);return a===e?S.none():(i=r[a],"button"===gr(i)&&"disabled"===Kr(i,"disabled")?t(e,a,r):S.from(r[a]))};return nd(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))},yd=[Le("selector"),nn("getInitial",S.none),nn("execute",Nm),hu("onEscape"),nn("executeOnMove",!1),nn("allowVertical",!0)],xd=function(t,e,n){return o=t,(r=n).focusManager.get(o).bind((function(t){return qa(t,r.selector)})).bind((function(o){return n.execute(t,e,o)}));var o,r},wd=function(t,e,n){e.getInitial(t).orThunk((function(){return Ka(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},Cd=function(t,e,n){return bd(t,n.selector,e,-1)},kd=function(t,e,n){return bd(t,n.selector,e,1)},Sd=function(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?xd(e,n,o):S.some(!0)}))}},Od=function(t,e,n){return n.onEscape(t,e)},Dd=r([Am(Dm(vm),Hm)]),Td=Bm(yd,wi.init,(function(t,e,n,o){var r=bm.concat(n.allowVertical?ym:[]),i=xm.concat(n.allowVertical?wm:[]);return[Am(Dm(r),Sd(Xm(Cd,kd))),Am(Dm(i),Sd(Ym(Cd,kd))),Am(Dm(gm),xd),Am(Dm(vm),xd),Am(Dm(hm),Od)]}),Dd,(function(){return S.some(wd)})),_d=function(t,e,n){return S.from(t[e]).bind((function(t){return S.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},Id=function(t,e,n,o){var r=t[e].length,i=Dc(n,o,0,r-1);return _d(t,e,i)},Ed=function(t,e,n,o){var r=Dc(n,o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return _d(t,r,a)},Ad=function(t,e,n,o){var r=t[e].length,i=Tc(n+o,0,r-1);return _d(t,e,i)},Fd=function(t,e,n,o){var r=Tc(n+o,0,t.length-1),i=t[r].length,a=Tc(e,0,i-1);return _d(t,r,a)},Rd=[Ge("selectors",[Le("row"),Le("cell")]),nn("cycles",!0),nn("previousSelector",S.none),nn("execute",Nm)],Md=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Ka(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))},Pd=function(t,e){return function(n,o,r){var i=r.cycles?t:e;return qa(o,r.selectors.row).bind((function(t){var e=Ts(t,r.selectors.cell);return od(e,o).bind((function(e){var o=Ts(n,r.selectors.row);return od(o,t).bind((function(t){var n,a=(n=r,$(o,(function(t){return Ts(t,n.selectors.cell)})));return i(a,t,e).map((function(t){return t.cell}))}))}))}))}},Bd=Pd((function(t,e,n){return Id(t,e,n,-1)}),(function(t,e,n){return Ad(t,e,n,-1)})),Vd=Pd((function(t,e,n){return Id(t,e,n,1)}),(function(t,e,n){return Ad(t,e,n,1)})),zd=Pd((function(t,e,n){return Ed(t,n,e,-1)}),(function(t,e,n){return Fd(t,n,e,-1)})),jd=Pd((function(t,e,n){return Ed(t,n,e,1)}),(function(t,e,n){return Fd(t,n,e,1)})),Nd=r([Am(Dm(bm),Xm(Bd,Vd)),Am(Dm(xm),Ym(Bd,Vd)),Am(Dm(ym),Zm(zd)),Am(Dm(wm),Qm(jd)),Am(Dm(vm.concat(gm)),(function(t,e,n){return hc(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),Hd=r([Am(Dm(vm),Hm)]),Ld=Bm(Rd,wi.init,Nd,Hd,(function(){return S.some(Md)})),Jd=[Le("selector"),nn("execute",Nm),nn("moveOnTab",!1)],$d=function(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))},Ud=function(t,e,n){Ka(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Wd=function(t,e,n){return bd(t,n.selector,e,-1)},Gd=function(t,e,n){return bd(t,n.selector,e,1)},Xd=r([Am(Dm(ym),td(Wd)),Am(Dm(wm),td(Gd)),Am(Tm([_m,Dm(pm)]),(function(t,e,n,o){return n.moveOnTab?td(Wd)(t,e,n,o):S.none()})),Am(Tm([Em,Dm(pm)]),(function(t,e,n,o){return n.moveOnTab?td(Gd)(t,e,n,o):S.none()})),Am(Dm(gm),$d),Am(Dm(vm),$d)]),Yd=r([Am(Dm(vm),Hm)]),Kd=Bm(Jd,wi.init,Xd,Yd,(function(){return S.some(Ud)})),qd=[hu("onSpace"),hu("onEnter"),hu("onShiftEnter"),hu("onLeft"),hu("onRight"),hu("onTab"),hu("onShiftTab"),hu("onUp"),hu("onDown"),hu("onEscape"),nn("stopSpaceKeyup",!1),Ke("focusIn")],Zd=Bm(qd,wi.init,(function(t,e,n){return[Am(Dm(vm),n.onSpace),Am(Tm([Em,Dm(gm)]),n.onEnter),Am(Tm([_m,Dm(gm)]),n.onShiftEnter),Am(Tm([_m,Dm(pm)]),n.onShiftTab),Am(Tm([Em,Dm(pm)]),n.onTab),Am(Dm(ym),n.onUp),Am(Dm(wm),n.onDown),Am(Dm(bm),n.onLeft),Am(Dm(xm),n.onRight),Am(Dm(vm),n.onSpace),Am(Dm(hm),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Am(Dm(vm),Hm)]:[]}),(function(t){return t.focusIn})),Qd=zm.schema(),tp=jm.schema(),ep=Td.schema(),np=vd.schema(),op=Ld.schema(),rp=$m.schema(),ip=Kd.schema(),ap=Zd.schema(),up=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Qd,cyclic:tp,flow:ep,flatgrid:np,matrix:op,execution:rp,menu:ip,special:ap}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){Vt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Wm}),cp=function(t,e,n,o){var r=t.getSystem().build(o);ul(t,r,n)},sp=function(t,e,n,o){var r=lp(t);K(r,(function(t){return Gn(o.element,t.element)})).each(sl)},lp=function(t,e){return t.components()},fp=function(t,e,n,o,r){var i=lp(t);return S.from(i[o]).map((function(e){return sp(t,0,0,e),r.each((function(e){cp(t,0,(function(t,e){var n,r;r=e,Ir(n=t,o).fold((function(){Hr(n,r)}),(function(t){zr(t,r)}))}),e)})),e}))},mp=cc({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){cp(t,0,Hr,o)},prepend:function(t,e,n,o){cp(t,0,Nr,o)},remove:sp,replaceAt:fp,replaceBy:function(t,e,n,o,r){var i=lp(t);return q(i,o).bind((function(e){return fp(t,0,0,e,r)}))},set:function(t,e,n,o){vc((function(){var e=$(o,t.getSystem().build);il(t,e)}),t.element)},contents:lp})}),dp=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=er(e),cc({fields:[Le("enabled")],name:n,active:{events:r(o)}})),configAsRaw:r({}),initialConfig:{},state:wi}}},pp=function(t,e){e.ignore||(pc(t.element),e.onFocus(t))},gp=Object.freeze({__proto__:null,focus:pp,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return e=t.element,n=Rr(e).dom,e.dom===n.activeElement;var e,n}}),hp=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return Si(n)},events:function(t){return er([rr(So(),(function(e,n){pp(e,t),n.stop()}))].concat(t.stopMousedown?[rr(uo(),(function(t,e){e.event.prevent()}))]:[]))}}),vp=[gu("onFocus"),nn("stopMousedown",!1),nn("ignore",!1)],bp=cc({fields:vp,name:"focusing",active:hp,apis:gp}),yp=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},xp=function(t,e,n){e.toggleClass.each((function(e){(n.get()?Vi:ji)(t.element,e)}))},wp=function(t,e,n){Sp(t,e,n,!n.get())},Cp=function(t,e,n){n.set(!0),xp(t,e,n),yp(t,e,n)},kp=function(t,e,n){n.set(!1),xp(t,e,n),yp(t,e,n)},Sp=function(t,e,n,o){(o?Cp:kp)(t,e,n)},Op=function(t,e,n){Sp(t,e,n,e.selected)},Dp=Object.freeze({__proto__:null,onLoad:Op,toggle:wp,isOn:function(t,e,n){return n.get()},on:Cp,off:kp,set:Sp}),Tp=Object.freeze({__proto__:null,exhibit:function(){return Si({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=wp,pr((function(t){r(t,n,o)}))),a=ec(t,e,Op);return er(Z([t.toggleOnExecute?[i]:[],[a]]))}}),_p=function(t,e,n){Yr(t.element,"aria-expanded",n)},Ip=[nn("selected",!1),Ke("toggleClass"),nn("toggleOnExecute",!0),on("aria",{mode:"none"},Fe("mode",{pressed:[nn("syncWithExpanded",!1),yu("update",(function(t,e,n){Yr(t.element,"aria-pressed",n),e.syncWithExpanded&&_p(t,e,n)}))],checked:[yu("update",(function(t,e,n){Yr(t.element,"aria-checked",n)}))],expanded:[yu("update",_p)],selected:[yu("update",(function(t,e,n){Yr(t.element,"aria-selected",n)}))],none:[yu("update",n)]}))],Ep=cc({fields:Ip,name:"toggling",active:Tp,apis:Dp,state:(Pm=!1,{init:function(){var t=dn(Pm);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Pm)},readState:function(){return t.get()}}}})}),Ap=function(){var t=function(t,e){e.stop(),qo(t)};return[rr(yo(),t),rr(Eo(),t),sr(oo()),sr(uo())]},Fp=function(t){return er(Z([t.map((function(t){return pr((function(e,n){t(e),n.stop()}))})).toArray(),Ap()]))},Rp="alloy.item-hover",Mp="alloy.item-focus",Pp=function(t){(hc(t.element).isNone()||bp.isFocused(t))&&(bp.isFocused(t)||bp.focus(t),Ko(t,Rp,{item:t}))},Bp=function(t){Ko(t,Mp,{item:t})},Vp=r(Rp),zp=r(Mp),jp=[Le("data"),Le("components"),Le("dom"),nn("hasSubmenu",!1),Ke("toggling"),Gl("itemBehaviours",[Ep,bp,up,Jl]),nn("ignoreFocus",!1),nn("domModification",{}),yu("builder",(function(t){return{dom:t.dom,domModification:m(m({},t.domModification),{attributes:m(m(m({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Xl(t.itemBehaviours,[t.toggling.fold(Ep.revoke,(function(t){return Ep.config(m({aria:{mode:"checked"}},t))})),bp.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Bp(t)}}),up.config({mode:"execution"}),Jl.config({store:{mode:"memory",initialValue:t.data}}),dp("item-type-events",p(Ap(),[rr(fo(),Pp),rr(Io(),bp.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),nn("eventOrder",{})],Np=[Le("dom"),Le("components"),yu("builder",(function(t){return{dom:t.dom,components:t.components,events:er([(e=Io(),rr(e,(function(t,e){e.stop()})))])};var e}))],Hp=r("item-widget"),Lp=r([xf({name:"widget",overrides:function(t){return{behaviours:ac([Jl.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:n}})])}}})]),Jp=[Le("uid"),Le("data"),Le("components"),Le("dom"),nn("autofocus",!1),nn("ignoreFocus",!1),Gl("widgetBehaviours",[Jl,bp,up]),nn("domModification",{}),Hf(Lp()),yu("builder",(function(t){var e=Ff(Hp(),t,Lp()),n=Rf(Hp(),t,e.internals()),o=function(e){return Mf(e,t,"widget").map((function(t){return up.focusIn(t),t}))},r=function(e,n){return Zf(n.event.target)||t.autofocus&&n.setSource(e.element),S.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:er([pr((function(t,e){o(t).each((function(t){e.stop()}))})),rr(fo(),Pp),rr(Io(),(function(e,n){t.autofocus?o(e):bp.focus(e)}))]),behaviours:Xl(t.widgetBehaviours,[Jl.config({store:{mode:"memory",initialValue:t.data}}),bp.config({ignore:t.ignoreFocus,onFocus:function(t){Bp(t)}}),up.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:fc(),onLeft:r,onRight:r,onEscape:function(e,n){return bp.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),S.none()):(bp.focus(e),S.some(!0))}})])}}))],$p=Fe("type",{widget:Jp,item:jp,separator:Np}),Up=r([kf({factory:{sketch:function(t){var e=Ie("menu.spec item",$p,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:m(m({},e),{uid:mi("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Wp=r([Le("value"),Le("items"),Le("dom"),Le("components"),nn("eventOrder",{}),$l("menuBehaviours",[mm,Jl,em,up]),on("movement",{mode:"menu",moveOnTab:!0},Fe("mode",{grid:[wu(),yu("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[yu("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),Le("rowSelector")],menu:[nn("moveOnTab",!0),yu("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),Je("markers",lu()),nn("fakeFocus",!1),nn("focusManager",Rm()),gu("onHighlight")]),Gp=r("alloy.menu-focus"),Xp=Yf({name:"Menu",configFields:Wp(),partFields:Up(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Wl(t.menuBehaviours,[mm.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Jl.config({store:{mode:"memory",initialValue:t.value}}),em.config({find:S.some}),up.config(t.movement.config(t,t.movement))]),events:er([rr(zp(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){mm.highlight(t,n),e.stop(),Ko(t,Gp(),{menu:t,item:n})}))})),rr(Vp(),(function(t,e){var n=e.event.item;mm.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Yp=function t(e,n,o,r){return Pt(o,r).bind((function(r){return Pt(e,r).bind((function(r){var i=t(e,n,o,r);return S.some([r].concat(i))}))})).getOr([])},Kp=function(t,e){var n={};_t(t,(function(t,e){U(t,(function(t){n[t]=e}))}));var o=e,r=Et(e,(function(t,e){return{k:t,v:e}})),i=It(r,(function(t,e){return[e].concat(Yp(n,o,r,e))}));return It(n,(function(t){return Pt(i,t).getOr([t])}))},qp=function(t){return"prepared"===t.type?S.some(t.menu):S.none()},Zp={init:function(){var t=dn({}),e=dn({}),n=dn({}),o=dn(S.none()),r=dn({}),i=function(e,n,o){return a(e).bind((function(r){return i=e,Rt(t.get(),(function(t,e){return t===i})).bind((function(t){return n(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:o}}))}));var i}))},a=function(t){return u(t).bind(qp)},u=function(t){return Pt(e.get(),t)},c=function(e){return Pt(t.get(),e)};return{setMenuBuilt:function(t,n){var o;e.set(m(m({},e.get()),((o={})[t]={type:"prepared",menu:n},o)))},setContents:function(i,a,u,c){o.set(S.some(i)),t.set(u),e.set(a),r.set(c);var s=Kp(c,u);n.set(s)},expand:function(e){return Pt(t.get(),e).map((function(t){var o=Pt(n.get(),e).getOr([]);return[t].concat(o)}))},refresh:function(t){return Pt(n.get(),t)},collapse:function(t){return Pt(n.get(),t).bind((function(t){return 1<t.length?S.some(t.slice(1)):S.none()}))},lookupMenu:u,lookupItem:c,otherMenus:function(t){var e=r.get();return nt(Dt(e),t)},getPrimary:function(){return o.get().bind(a)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),o.set(S.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var r=G(c(t).toArray(),(function(t){return a(t).isSome()}));return Pt(n.get(),t).bind((function(t){var n=et(r.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return S.none();e.push(o.getOrDie())}return S.some(e)}(Q(n,(function(t,r){return i(t,e,n.slice(0,r+1)).fold((function(){return o.get().is(t)?[]:[S.none()]}),(function(t){return[S.some(t)]}))})))}))}}},extractPreparedMenu:qp},Qp=r("collapse-item"),tg=Xf({name:"TieredMenu",configFields:[bu("onExecute"),bu("onEscape"),vu("onOpenMenu"),vu("onOpenSubmenu"),gu("onRepositionMenu"),gu("onCollapseMenu"),nn("highlightImmediately",!0),Ge("data",[Le("primary"),Le("menus"),Le("expansions")]),nn("fakeFocus",!1),gu("onHighlight"),gu("onHover"),mu(),Le("dom"),nn("navigateOnHover",!0),nn("stayInDom",!1),$l("tmenuBehaviours",[up,mm,em,mp]),nn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var o,r,i=dn(S.none()),a=Zp.init(),u=function(e){var n,o,r,i=(n=e,o=t.data.primary,r=t.data.menus,It(r,(function(e,r){var i=function(){return Xp.sketch(m(m({},e),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Mm:Rm)()}))};return r===o?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),u=s();return a.setContents(t.data.primary,i,t.data.expansions,u),a.getPrimary()},c=function(t){return Jl.getValue(t).value},s=function(e){return It(t.data.menus,(function(t,e){return Q(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},f=function(t,e){mm.highlight(t,e),mm.getHighlighted(e).orThunk((function(){return mm.getFirst(e)})).each((function(e){Zo(t,e.element,Io())}))},d=function(t,e){return Kf($(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?S.some(t.menu):S.none()}))})))},p=function(e,n,o){var r=d(n,n.otherMenus(o));U(r,(function(n){Li(n.element,[t.markers.backgroundMenu]),t.stayInDom||mp.remove(e,n)}))},g=function(e,n){var o,r=(o=e,i.get().getOrThunk((function(){var e={},n=Ts(o.element,"."+t.markers.item),r=G(n,(function(t){return"true"===Kr(t,"aria-haspopup")}));return U(r,(function(t){o.getSystem().getByDom(t).each((function(t){var n=c(t);e[n]=t}))})),i.set(S.some(e)),e})));_t(r,(function(t,e){var o=N(n,e);Yr(t.element,"aria-expanded",o)}))},h=function(e,n,o){return S.from(o[0]).bind((function(r){return n.lookupMenu(r).bind((function(r){if("notbuilt"===r.type)return S.none();var i=r.menu,a=d(n,o.slice(1));return U(a,(function(e){Vi(e.element,t.markers.backgroundMenu)})),$i(i.element)||mp.append(e,ha(i)),Li(i.element,[t.markers.backgroundMenu]),f(e,i),p(e,n,o),S.some(i)}))}))};(r=o=o||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=function(e,n,r){void 0===r&&(r=o.HighlightSubmenu);var i=c(n);return a.expand(i).bind((function(i){return g(e,i),S.from(i[0]).bind((function(u){return a.lookupMenu(u).bind((function(c){var s=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return a.setMenuBuilt(e,o),o}(e,u,c);return $i(s.element)||mp.append(e,ha(s)),t.onOpenSubmenu(e,n,s,et(i)),r===o.HighlightSubmenu?(mm.highlightFirst(s),h(e,a,i)):(mm.dehighlightAll(s),S.some(n))}))}))}))},b=function(e,n){var o=c(n);return a.collapse(o).bind((function(o){return g(e,o),h(e,a,o).map((function(o){return t.onCollapseMenu(e,n,o),o}))}))},y=function(e){return function(n,o){return qa(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(l)}))}))}},x=er([rr(Gp(),(function(t,e){var n=e.event.item;a.lookupItem(c(n)).each((function(){var n=e.event.menu;mm.highlight(t,n);var o=c(e.event.item);a.refresh(o).each((function(e){return p(t,a,e)}))}))})),pr((function(e,r){var i=r.event.target;e.getSystem().getByDom(i).each((function(r){0===c(r).indexOf("collapse-item")&&b(e,r),v(e,r,o.HighlightSubmenu).fold((function(){t.onExecute(e,r)}),n)}))})),fr((function(e,n){u(e).each((function(n){mp.append(e,ha(n)),t.onOpenMenu(e,n),t.highlightImmediately&&f(e,n)}))}))].concat(t.navigateOnHover?[rr(Vp(),(function(e,n){var r,i,u=n.event.item;r=e,i=c(u),a.refresh(i).bind((function(t){return g(r,t),h(r,a,t)})),v(e,u,o.HighlightParent),t.onHover(e,u)}))]:[])),w=function(t){return mm.getHighlighted(t).bind(mm.getHighlighted)},C={collapseMenu:function(t){w(t).each((function(e){b(t,e)}))},highlightPrimary:function(t){a.getPrimary().each((function(e){f(t,e)}))},repositionMenus:function(e){a.getPrimary().bind((function(t){return w(e).bind((function(t){var e=c(t),n=Mt(a.getMenus()),o=Kf($(n,Zp.extractPreparedMenu));return a.getTriggeringPath(e,(function(t){return e=t,ct(o,(function(t){if(!t.getSystem().isConnected())return S.none();var n=mm.getCandidates(t);return K(n,(function(t){return c(t)===e}))}));var e}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){var n;n=e,S.from(n.components()[0]).filter((function(t){return"menu"===Kr(t.element,"role")})).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Wl(t.tmenuBehaviours,[up.config({mode:"special",onRight:y((function(t,e){return Zf(e.element)?S.none():v(t,e,o.HighlightSubmenu)})),onLeft:y((function(t,e){return Zf(e.element)?S.none():b(t,e)})),onEscape:y((function(e,n){return b(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){a.getPrimary().each((function(e){Zo(t,e.element,Io())}))}}),mm.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),em.config({find:function(t){return mm.getHighlighted(t)}}),mp.config({})]),eventOrder:t.eventOrder,apis:C,events:x}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Zt(t,e),expansions:{}}},collapseItem:function(t){return{value:ii(Qp()),meta:{text:t}}}}}),eg=Xf({name:"InlineView",configFields:[Le("lazySink"),gu("onShow"),gu("onHide"),tn("onEscape"),$l("inlineBehaviours",[kl,Jl,mc]),en("fireDismissalEventInstead",[nn("event",Ho())]),en("fireRepositionEventInstead",[nn("event",Lo())]),nn("getRelated",S.none),nn("isExtraPart",s),nn("eventOrder",S.none)],factory:function(t,e){var n=function(t,e,n,r){o(t,e,n,(function(){return r.map(Na)}))},o=function(e,n,o,r){var i=t.lazySink(e).getOrDie();kl.openWhileCloaked(e,o,(function(){return el.positionWithinBounds(i,n,e,r())})),Jl.setValue(e,S.some({mode:"position",anchor:n,getBounds:r}))},r=function(e,n,o,r){var i,a,u,c,s,l,f,d,p=(i=t,a=e,u=n,s=r,l=function(){return i.lazySink(a)},f="horizontal"===(c=o).type?{layouts:{onLtr:qu,onRtl:Zu}}:{},d=function(t){return 2===t.length?f:{}},tg.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return kl.close(a),i.onEscape.map((function(t){return t(a)})),S.some(!0)},onExecute:function(){return S.some(!0)},onOpenMenu:function(t,e){el.positionWithinBounds(l().getOrDie(),u,e,s())},onOpenSubmenu:function(t,e,n,o){var r=l().getOrDie();el.position(r,m({anchor:"submenu",item:e},d(o)),n)},onRepositionMenu:function(t,e,n){var o=l().getOrDie();el.positionWithinBounds(o,u,e,s()),U(n,(function(t){var e=d(t.triggeringPath);el.position(o,m({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}}));kl.open(e,p),Jl.setValue(e,S.some({mode:"menu",menu:p}))},i=function(e){kl.isOpen(e)&&Jl.getValue(e).each((function(n){switch(n.mode){case"menu":kl.getState(e).each((function(t){tg.repositionMenus(t)}));break;case"position":var o=t.lazySink(e).getOrDie();el.positionWithinBounds(o,n.anchor,e,n.getBounds())}}))},a={setContent:function(t,e){kl.setContent(t,e)},showAt:function(t,e,o){n(t,e,o,S.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(t,e,n){r(t,e,n,(function(){return S.none()}))},showMenuWithinBounds:r,hide:function(t){kl.isOpen(t)&&(Jl.setValue(t,S.none()),kl.close(t))},getContent:function(t){return kl.getState(t)},reposition:i,isOpen:kl.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Wl(t.inlineBehaviours,[kl.config({isPartOf:function(e,n,o){return tu(n,o)||(r=e,i=o,t.getRelated(r).exists((function(t){return tu(t,i)})));var r,i},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Jl.config({store:{mode:"memory",initialValue:S.none()}}),mc.config({channels:m(m({},_l(m({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),El(m(m({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:a}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),ng=function(t){return t.x},og=function(t,e){return t.x+t.width/2-e.width/2},rg=function(t,e){return t.x+t.width-e.width},ig=function(t){return t.y},ag=function(t,e){return t.y+t.height-e.height},ug=function(t,e,n){return Cu(rg(t,e),ag(t,e),n.innerSoutheast(),Tu(),Fu(t,{right:0,bottom:3}),"layout-inner-se")},cg=function(t,e,n){return Cu(ng(t),ag(t,e),n.innerSouthwest(),Du(),Fu(t,{left:1,bottom:3}),"layout-inner-sw")},sg=function(t,e,n){return Cu(rg(t,e),ig(t),n.innerNortheast(),Ou(),Fu(t,{right:0,top:2}),"layout-inner-ne")},lg=function(t,e,n){return Cu(ng(t),ig(t),n.innerNorthwest(),Su(),Fu(t,{left:1,top:2}),"layout-inner-nw")},fg=function(t,e,n){return Cu(og(t,e),ig(t),n.innerNorth(),_u(),Fu(t,{top:2}),"layout-inner-n")},mg=function(t,e,n){return Cu(og(t,e),ag(t,e),n.innerSouth(),Iu(),Fu(t,{bottom:3}),"layout-inner-s")},dg=tinymce.util.Tools.resolve("tinymce.util.Delay"),pg=Xf({name:"Button",factory:function(t){var e=Fp(t.action),n=t.dom.tag,o=function(e){return Pt(t.dom,"attributes").bind((function(t){return Pt(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Xl(t.buttonBehaviours,[bp.config({}),up.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map((function(t){return{role:t}})).getOr({});return m({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[nn("uid",void 0),Le("dom"),nn("components",[]),Gl("buttonBehaviours",[bp,up]),Ke("action"),Ke("role"),nn("eventOrder",{})]}),gg=function(t){var e=void 0!==t.uid&&Vt(t,"uid")?t.uid:mi("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return m(m({},t),{uid:e})}}},hg=function(t){return S.from(t()["temporary-placeholder"]).getOr("!not found!")},vg=function(t,e){return S.from(e()[t.toLowerCase()]).getOrThunk((function(){return hg(e)}))},bg={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},yg=Xf({name:"Notification",factory:function(t){var e,n,o=gg({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:ac([mp.config({})])}),r=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},i=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},a=gg({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},i(0)],behaviours:ac([mp.config({})])}),u={updateProgress:function(t,e){t.getSystem().isConnected()&&a.getOpt(t).each((function(t){mp.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(e)]},i(e)])}))},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=o.get(t),mp.set(n,[ma(e)]))}},c=Z([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return S.from(bg[t])})).toArray()]),s=gg(pg.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vg("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=c,n=t.iconProvider,ct(e,(function(t){return S.from(n()[t.toLowerCase()])})).getOrThunk((function(){return hg(n)})))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:ac([mp.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ac([bp.config({}),dp("notification-events",[rr(mo(),(function(t){s.getOpt(t).each(bp.focus)}))])]),components:l.concat(t.progress?[a.asSpec()]:[]).concat(t.closeButton?[s.asSpec()]:[]),apis:u}},configFields:[Ke("level"),Le("progress"),Le("icon"),Le("onAction"),Le("text"),Le("iconProvider"),Le("translationProvider"),cn("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function xg(t,e,n){var o=e.backstage;return{open:function(t,r){var i=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=function(){r(),eg.hide(c)},u=ga(yg.sketch({text:t.text,level:N(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:S.from(t.icon),closeButton:!i,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),c=ga(eg.sketch(m({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},o.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),0<t.timeout&&dg.setTimeout((function(){a()}),t.timeout),{close:a,moveTo:function(t,e){eg.showAt(c,{anchor:"makeshift",x:t,y:e},ha(u))},moveRel:function(t,n){var o,r;"banner"!==n?(o=function(t){switch(t){case"bc-bc":return mg;case"tc-tc":return fg;case"tc-bc":return Ju;case"bc-tc":default:return $u}}(n),r={anchor:"node",root:Ui(),node:S.some(gn.fromDom(t)),layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}},eg.showAt(c,r,ha(u))):eg.showAt(c,e.backstage.shared.anchors.banner(),ha(u))},text:function(t){yg.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){yg.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(t){var e;U(t,(function(t){return t.moveTo(0,0)})),0<(e=t).length&&(it(e).each((function(t){return t.moveRel(null,"banner")})),U(e,(function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")})))},getArgs:function(t){return t.settings}}}var wg,Cg,kg=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Sg=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Og=function(t,e,n,o,r){var i=Sg(t,(function(e){return o=e,(n=t).isBlock(o)||N(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===n.getContentEditable(o);var n,o}));return S.from(i.backwards(e,n,o,r))},Dg=function(t,e){return Tg(gn.fromDom(t.selection.getNode())).getOrThunk((function(){var n=gn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Hr(n,gn.fromDom(e.extractContents())),e.insertNode(n.dom),Or(n).each((function(t){return t.dom.normalize()})),Ds(n,Os).map((function(e){var n;t.selection.setCursorLocation(e.dom,"img"===gr(n=e)?1:ks(n).fold((function(){return _r(n).length}),(function(t){return t.length})))})),n}))},Tg=function(t){return qa(t,"[data-mce-autocompleter]")},_g=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Ig=function(t){return""!==t&&-1!=="  \f\n\r\t\v".indexOf(t)},Eg=function(t,e){return t.substring(e.length)},Ag=function(t,e,n,o){if(void 0===o&&(o=0),!(r=e).collapsed||3!==r.startContainer.nodeType)return S.none();var r,i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Og(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,e,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(Ig(r))return S.none();if(r===n)break}return S.some(o)}(o,e,n).getOr(e)}),i).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return S.none();var i=_g(r);return 0!==i.lastIndexOf(n)||Eg(i,n).length<o?S.none():S.some({text:Eg(i,n),range:r,triggerChar:n})}))},Fg=function(t,e,n,o){return void 0===o&&(o=0),Tg(gn.fromDom(e.startContainer)).fold((function(){return Ag(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=_g(o);return S.some({range:o,text:Eg(r,n),triggerChar:n})}))},Rg=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){Ko(t,go(),{raw:e})};e.on("keydown",(function(e){var o=function(){return t.getView().bind(mm.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(o().each(qo),e.preventDefault()):40===e.which?(o().fold((function(){t.getView().each(mm.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||o().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&Tg(gn.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},Mg=tinymce.util.Tools.resolve("tinymce.util.Promise"),Pg=function(t,e){return{container:t,offset:e}},Bg=function t(e){if(3===e.nodeType)return Pg(e,e.data.length);var n=e.childNodes;return 0<n.length?t(n[n.length-1]):Pg(e,n.length)},Vg=function t(e,n){var o=e.childNodes;return 0<o.length&&n<o.length?t(o[n],0):0<o.length&&1===e.nodeType&&o.length===n?Bg(o[o.length-1]):Pg(e,n)},zg=function(t){return function(e){var n,o,r=Vg(e.startContainer,e.startOffset);return!Og(n=t,(o=r).container,o.offset,(function(t,e){return 0===e?-1:e}),n.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!Ig(e)})).isSome()}},jg=function(t,e){var n,o,r=e(),i=t.selection.getRng();return n=t.dom,o=i,ct(r.triggerChars,(function(t){return Fg(n,o,t)})).bind((function(n){return Ng(t,e,n)}))},Ng=function(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,a=G(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return zg(t.dom)}))(n.range,i,n.text)}));if(0===a.length)return S.none();var u=Mg.all($(a,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return S.some({lookupData:u,context:n})},Hg=me([$e("type"),Qe("text")]),Lg=me([nn("type","autocompleteitem"),nn("active",!1),nn("disabled",!1),nn("meta",{}),$e("value"),Qe("text"),Qe("icon")]),Jg=me([$e("type"),$e("ch"),rn("minChars",1),nn("columns",1),rn("maxResults",10),tn("matches"),We("fetch"),We("onAction"),ln("highlightOn",[],Be)]),$g=[cn("disabled",!1),Qe("tooltip"),Qe("icon"),Qe("text"),sn("onSetup",(function(){return n}))],Ug=me([$e("type"),We("onAction")].concat($g)),Wg=function(t){return Te("toolbarbutton",Ug,t)},Gg=[cn("active",!1)].concat($g),Xg=me(Gg.concat([$e("type"),We("onAction")])),Yg=function(t){return Te("ToggleButton",Xg,t)},Kg=[sn("predicate",s),un("scope","node",["node","editor"]),un("position","selection",["node","selection","line"])],qg=$g.concat([nn("type","contextformbutton"),nn("primary",!1),We("onAction"),mn("original",i)]),Zg=Gg.concat([nn("type","contextformbutton"),nn("primary",!1),We("onAction"),mn("original",i)]),Qg=$g.concat([nn("type","contextformbutton")]),th=Gg.concat([nn("type","contextformtogglebutton")]),eh=Fe("type",{contextformbutton:qg,contextformtogglebutton:Zg}),nh=me([nn("type","contextform"),sn("initValue",(function(){return""})),Qe("label"),Ye("commands",eh),qe("launch",Fe("type",{contextformbutton:Qg,contextformtogglebutton:th}))].concat(Kg)),oh=me([nn("type","contexttoolbar"),$e("items")].concat(Kg)),rh=function(t){var e,n,o=t.ui.registry.getAll().popups,r=It(o,(function(t){return Te("Autocompleter",Jg,t).fold((function(t){throw new Error(Ee(t))}),(function(t){return t}))})),i=(e=Ft(r,(function(t){return t.ch})),n={},U(e,(function(t){n[t]={}})),Dt(n)),a=Mt(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return G(a,(function(e){return e.ch===t}))}}};(Cg=wg=wg||{})[Cg.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Cg[Cg.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ih,ah,uh=wg,ch="tox-menu-nav__js",sh="tox-collection__item",lh="tox-swatch",fh={normal:ch,color:lh},mh="tox-collection__item--enabled",dh="tox-collection__item-label",ph="tox-collection__item-caret",gh="tox-collection__item--active",hh="tox-collection__item-container",vh="tox-collection__item-container--row",bh=function(t){return Pt(fh,t).getOr(ch)},yh=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},xh=function(t){var e=yh(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:bh(t)}},wh=[Xp.parts.items({})],Ch=function(t,e,n){var o=yh(n);return{dom:{tag:"div",classes:Z([[o.tieredMenu]])},markers:xh(n)}},kh=function(t,e){return function(n){var o=J(n,e);return $(o,(function(e){return{dom:t,components:e}}))}},Sh=function(t,e){var n=[],o=[];return U(t,(function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],Bt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&n.push(o),$(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},Oh=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Xp.parts.items({preprocess:function(n){return"auto"!==t&&1<t?kh({tag:"div",classes:["tox-collection__group"]},t)(n):Sh(n,(function(t,n){return"separator"===e[n].type}))}})]}},Dh=function(t){return H(t,(function(t){return"icon"in t&&void 0!==t.icon}))},Th=function(t){return console.error(Ee(t)),console.log(t),S.none()},_h=function(t,e,n,o,r){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xp.parts.items({preprocess:function(t){return Sh(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:a.dom,components:a.components,items:n}},Ih=function(t,e,n,o,r){var a,u,c,s,l,f;return"color"===r?{value:t,dom:(a=o,c={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xp.parts.items({preprocess:"auto"!==a?kh({tag:"div",classes:["tox-swatches__row"]},a):i})]}]}).dom,components:c.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"normal"===r&&1===o?{value:t,dom:(c=Oh(1,n)).dom,components:c.components,items:n}:"normal"===r?{value:t,dom:(c=Oh(o,n)).dom,components:c.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:(s=e,l=o,f=yh(r),{tag:"div",classes:Z([[f.menu,"tox-menu-"+l+"-column"],s?[f.hasIcons]:[]])}),components:wh,items:n}:{value:t,dom:(u=o,c={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xp.parts.items({preprocess:kh({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:c.components,items:n}},Eh=[$e("type"),$e("src"),Qe("alt"),ln("classes",[],Be)],Ah=me(Eh),Fh=[$e("type"),$e("text"),Qe("name"),ln("classes",["tox-collection__item-label"],Be)],Rh=me(Fh),Mh=Se((function(){return Ae("type",{cardimage:Ah,cardtext:Rh,cardcontainer:Ph})})),Ph=me([$e("type"),an("direction","horizontal"),an("align","left"),an("valign","middle"),Ye("items",Mh)]),Bh=[cn("disabled",!1),Qe("text"),Qe("shortcut"),ye("value","value",Xt((function(){return ii("menuitem-value")})),Re()),nn("meta",{})],Vh=me([$e("type"),Qe("label"),Ye("items",Mh),sn("onSetup",(function(){return n})),sn("onAction",n)].concat(Bh)),zh=me([$e("type"),cn("active",!1),Qe("icon")].concat(Bh)),jh=me([$e("type"),Ue("fancytype",["inserttable","colorswatch"]),sn("onAction",n)]),Nh=me([$e("type"),sn("onSetup",(function(){return n})),sn("onAction",n),Qe("icon")].concat(Bh)),Hh=me([$e("type"),We("getSubmenuItems"),sn("onSetup",(function(){return n})),Qe("icon")].concat(Bh)),Lh=me([$e("type"),Qe("icon"),cn("active",!1),sn("onSetup",(function(){return n})),We("onAction")].concat(Bh)),Jh=function(t,e,n){var o=Ts(t.element,"."+n);if(0<o.length){var r=q(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return S.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return S.none()},$h=function(t,e){return ac([dp(t,e)])},Uh=function(t){return $h(ii("unnamed-events"),t)},Wh=ii("tooltip.exclusive"),Gh=ii("tooltip.show"),Xh=ii("tooltip.hide"),Yh=function(t,e,n){t.getSystem().broadcastOn([Wh],{})},Kh=Object.freeze({__proto__:null,hideAllExclusive:Yh,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&mp.set(t,o)}))}}),qh=Object.freeze({__proto__:null,events:function(t,e){var n=function(n){e.getTooltip().each((function(o){sl(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()};return er(Z([[rr(Gh,(function(n){e.resetTimer((function(){var o,r,i;o=n,e.isShowing()||(Yh(o),r=t.lazySink(o).getOrDie(),i=o.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:er("normal"===t.mode?[rr(fo(),(function(t){Yo(o,Gh)})),rr(so(),(function(t){Yo(o,Xh)}))]:[]),behaviours:ac([mp.config({})])}),e.setTooltip(i),al(r,i),t.onShow(o,i),el.position(r,t.anchor(o),i))}),t.delay)})),rr(Xh,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),rr(To(),(function(t,e){e.universal||N(e.channels,Wh)&&n(t)})),mr((function(t){n(t)}))],"normal"===t.mode?[rr(mo(),(function(t){Yo(t,Gh)})),rr(Oo(),(function(t){Yo(t,Xh)})),rr(fo(),(function(t){Yo(t,Gh)})),rr(so(),(function(t){Yo(t,Xh)}))]:[rr(Go(),(function(t,e){Yo(t,Gh)})),rr(Xo(),(function(t){Yo(t,Xh)}))]]))}}),Zh=[Le("lazySink"),Le("tooltipDom"),nn("exclusive",!0),nn("tooltipComponents",[]),nn("delay",300),un("mode","normal",["normal","follow-highlight"]),nn("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:r([$u,Ju,ju,Hu,Nu,Lu]),onRtl:r([$u,Ju,ju,Hu,Nu,Lu])}}})),gu("onHide"),gu("onShow")],Qh=cc({fields:Zh,name:"tooltipping",active:qh,state:Object.freeze({__proto__:null,init:function(){var t=dn(S.none()),e=dn(S.none()),n=function(){t.get().each((function(t){clearTimeout(t)}))},o=r("not-implemented");return Ci({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(S.some(t))},clearTooltip:function(){e.set(S.none())},clearTimer:n,resetTimer:function(e,o){n(),t.set(S.some(setTimeout((function(){e()}),o)))},readState:o})}}),apis:Kh}),tv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ev=tinymce.util.Tools.resolve("tinymce.util.I18n"),nv=["input","button","textarea","select"],ov=function(t,e,n){(e.disabled()?sv:lv)(t,e)},rv=function(t,e){return!0===e.useNative&&N(nv,gr(t.element))},iv=function(t){Yr(t.element,"disabled","disabled")},av=function(t){Qr(t.element,"disabled")},uv=function(t){Yr(t.element,"aria-disabled","true")},cv=function(t){Yr(t.element,"aria-disabled","false")},sv=function(t,e,n){e.disableClass.each((function(e){Vi(t.element,e)})),(rv(t,e)?iv:uv)(t),e.onDisabled(t)},lv=function(t,e,n){e.disableClass.each((function(e){ji(t.element,e)})),(rv(t,e)?av:cv)(t),e.onEnabled(t)},fv=function(t,e){return rv(t,e)?Zr(t.element,"disabled"):"true"===Kr(t.element,"aria-disabled")},mv=Object.freeze({__proto__:null,enable:lv,disable:sv,isDisabled:fv,onLoad:ov,set:function(t,e,n,o){(o?sv:lv)(t,e)}}),dv=Object.freeze({__proto__:null,exhibit:function(t,e){return Si({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return er([nr(_o(),(function(e,n){return fv(e,t)})),ec(t,e,ov)])}}),pv=[sn("disabled",s),nn("useNative",!0),Ke("disableClass"),gu("onDisabled"),gu("onEnabled")],gv=cc({fields:pv,name:"disabling",active:dv,apis:mv}),hv=tinymce.util.Tools.resolve("tinymce.EditorManager"),vv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},bv=function(t){return t.getParam("width",tv.DOM.getStyle(t.getElement(),"width"))},yv=function(t){return S.from(t.getParam("min_width")).filter(M)},xv=function(t){return S.from(t.getParam("min_height")).filter(M)},wv=function(t){return S.from(t.getParam("max_width")).filter(M)},Cv=function(t){return S.from(t.getParam("max_height")).filter(M)},kv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},Sv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=T(e),r=I(e)&&0<e.length;return!Dv(t)&&(r||o||n)},Ov=function(t){var e=L(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=G(e,(function(t){return"string"==typeof t}));return 0<n.length?S.some(n):S.none()},Dv=function(t){return Ov(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),l)};(ah=ih=ih||{})["default"]="wrap",ah.floating="floating",ah.sliding="sliding",ah.scrolling="scrolling";var Tv,_v,Iv=function(t){return t.getParam("toolbar_mode","","string")};(_v=Tv=Tv||{}).auto="auto",_v.top="top",_v.bottom="bottom";var Ev,Av,Fv,Rv=function(t){return t.getParam("toolbar_location",Tv.auto,"string")},Mv=function(t){return Rv(t)===Tv.bottom},Pv=function(t){var e=t.getParam("fixed_toolbar_container","","string");return 0<e.length&&t.inline?Ka(Ui(),e):S.none()},Bv=function(t){return t.inline&&Pv(t).isSome()},Vv=function(t){return Pv(t).getOrThunk((function(){return Mr(Rr(gn.fromDom(t.getElement())))}))},zv=function(t){return t.inline&&!kv(t)&&!Sv(t)&&!Dv(t)},jv=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Bv(t)&&!zv(t)},Nv="silver.readonly",Hv=me([Je("readonly",Ve)]),Lv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([Sl()],{target:n}),t.uiMothership.broadcastOn([Sl()],{target:n})),t.mothership.broadcastOn([Nv],{readonly:e}),t.uiMothership.broadcastOn([Nv],{readonly:e})},Jv=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&Lv(e,!0)})),t.on("SwitchMode",(function(){return Lv(e,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")},$v=function(){var t;return mc.config({channels:((t={})[Nv]={schema:Hv,onReceive:function(t,e){gv.set(t,e.readonly)}},t)})},Uv=function(t){return gv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Wv=function(t){return gv.config({disabled:t})},Gv=function(t){return gv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Xv=function(t){return gv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Yv=function(t,e){var n=t.getApi(e);return function(t){t(n)}},Kv=function(t,e){return fr((function(n){Yv(t,n)((function(n){var o=t.onSetup(n);R(o)&&e.set(o)}))}))},qv=function(t,e){return mr((function(n){return Yv(t,n)(e.get())}))},Zv=((Ev={})[_o()]=["disabling","alloy.base.behaviour","toggling","item-events"],Ev),Qv=function(t){return Q(t,(function(t){return t.toArray()}))},tb=function(t,e,o,r){var i,a,u=dn(n);return{type:"item",dom:e.dom,components:Qv(e.optComponents),data:t.data,eventOrder:Zv,hasSubmenu:t.triggersSubmenu,itemBehaviours:ac([dp("item-events",[(i=t,a=o,pr((function(t,e){Yv(i,t)(i.onAction),i.triggersSubmenu||a!==uh.CLOSE_ON_EXECUTE||(t.getSystem().isConnected()&&Yo(t,Fo()),e.stop())}))),Kv(t,u),qv(t,u)]),Uv((function(){return t.disabled||r.isDisabled()})),$v(),mp.config({})].concat(t.itemBehaviours))}},eb=function(t){return{value:t.value,meta:m({text:t.text.getOr("")},t.meta)}},nb=tinymce.util.Tools.resolve("tinymce.Env"),ob=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},rb=function(t){return{dom:{tag:"div",classes:[dh]},components:[ma(ev.translate(t))]}},ib=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},ab=function(t,e){return{dom:{tag:"div",classes:[dh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ma(ev.translate(e))]}]}},ub=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=nb.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),r=$(o,(function(t){var e=t.toLowerCase().trim();return Bt(n,e)?n[e]:t})),nb.mac?r.join(""):r.join("+"))}};var e,n,o,r},cb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:vg("checkmark",t)}}},sb=function(t,e){var n=e.map((function(t){return{attributes:{title:ev.translate(t)}}})).getOr({});return m({tag:"div",classes:[ch,sh].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},lb=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],fb=["list-bull-circle","list-bull-default","list-bull-square"],mb=function(t,e,n,o){void 0===o&&(o=S.none());var r,i,u,c,s,l,f,d,g,h,v,b,y=ev.isRtl()&&t.iconContent.exists((function(t){return N(fb,t)})),x=t.iconContent.map((function(t){return ev.isRtl()&&N(lb,t)?t+"-rtl":t})).map((function(t){return n=t,r=e.icons,i=o,S.from(r()[n.toLowerCase()]).or(i).getOrThunk((function(){return hg(r)}));var n,r,i})),w=S.from(t.meta).fold((function(){return rb}),(function(t){return Bt(t,"style")?a(ab,t.style):rb}));return"color"===t.presets?(d=t.ariaLabel,g=t.value,h=e,{dom:(v=x.getOr(""),b={tag:"div",attributes:d.map((function(t){return{title:h.translate(t)}})).getOr({}),classes:["tox-swatch"]},m(m({},b),"custom"===g?{tag:"button",classes:p(b.classes,["tox-swatches__picker-btn"]),innerHtml:v}:"remove"===g?{classes:p(b.classes,["tox-swatch--remove"]),innerHtml:v}:{attributes:m(m({},b.attributes),{"data-mce-color":g}),styles:{"background-color":g}})),optComponents:[]}):(r=t,i=x,u=w,c=y,s=n?i.or(S.some("")).map(ob):S.none(),l=r.checkMark,f=r.htmlContent.fold((function(){return r.textContent.map(u)}),(function(t){return S.some(ib(t,[dh]))})),{dom:sb(c,r.ariaLabel),optComponents:[s,f,r.shortcutContent.map(ub),l,r.caret]})},db=function(t,e){return Pt(t,"tooltipWorker").map((function(t){return[Qh.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Mc}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Qh.setComponents(e,[da({element:gn.fromDom(t)})])}))}})]})).getOr([])},pb=function(t,e){var n,o=ev.translate(t),r=(n=o,tv.DOM.encode(n));if(0<e.length){var i=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return r.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return r},gb=function t(e,n){return $(e,(function(e){switch(e.type){case"cardcontainer":return c=t((u=e).items,n),s="vertical"===u.direction?"tox-collection__item-container--column":vh,l="left"===u.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[hh,s,l,function(){switch(u.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:c};case"cardimage":return r=e.src,i=e.classes,a=e.alt,{dom:{tag:"img",classes:i,attributes:{src:r,alt:a.getOr("")}}};case"cardtext":var o=e.name.exists((function(t){return N(n.cardText.highlightOn,t)}))?S.from(n.cardText.matchText).getOr(""):"";return ib(pb(e.text,o),e.classes)}var r,i,a,u,c,s,l}))},hb=Tf(Hp(),Lp()),vb=function(t){return{value:t}},bb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xb=function(t){return bb.test(t)||yb.test(t)},wb=function(t){var e={value:t.value.replace(bb,(function(t,e,n,o){return e+e+n+n+o+o}))},n=yb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Cb=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},kb=function(t){var e=Cb(t.red)+Cb(t.green)+Cb(t.blue);return vb(e)},Sb=Math.min,Ob=Math.max,Db=Math.round,Tb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,_b=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Ib=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},Eb=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},Ab=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;i=Ob(0,Sb(i,1)),a=Ob(0,Sb(a,1));if(0===i)return e=n=o=Db(255*a),Ib(e,n,o,1);var u=r/60,c=a*i,s=c*(1-Math.abs(u%2-1)),l=a-c;switch(Math.floor(u)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return e=Db(255*(e+l)),n=Db(255*(n+l)),o=Db(255*(o+l)),Ib(e,n,o,1)},Fb=function(t){var e=wb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Ib(n,o,r,1)},Rb=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return Ib(r,i,a,u)},Mb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Pb=Ib(255,0,0,1),Bb=function(t,e){return t.fire("ResizeContent",e)},Vb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),zb="tinymce-custom-colors",jb="choiceitem",Nb=[{type:jb,text:"Light Green",value:"#BFEDD2"},{type:jb,text:"Light Yellow",value:"#FBEEB8"},{type:jb,text:"Light Red",value:"#F8CAC6"},{type:jb,text:"Light Purple",value:"#ECCAFA"},{type:jb,text:"Light Blue",value:"#C2E0F4"},{type:jb,text:"Green",value:"#2DC26B"},{type:jb,text:"Yellow",value:"#F1C40F"},{type:jb,text:"Red",value:"#E03E2D"},{type:jb,text:"Purple",value:"#B96AD9"},{type:jb,text:"Blue",value:"#3598DB"},{type:jb,text:"Dark Turquoise",value:"#169179"},{type:jb,text:"Orange",value:"#E67E23"},{type:jb,text:"Dark Red",value:"#BA372A"},{type:jb,text:"Dark Purple",value:"#843FA1"},{type:jb,text:"Dark Blue",value:"#236FA1"},{type:jb,text:"Light Gray",value:"#ECF0F1"},{type:jb,text:"Medium Gray",value:"#CED4D9"},{type:jb,text:"Gray",value:"#95A5A6"},{type:jb,text:"Dark Gray",value:"#7E8C8D"},{type:jb,text:"Navy Blue",value:"#34495E"},{type:jb,text:"Black",value:"#000000"},{type:jb,text:"White",value:"#ffffff"}],Hb=function(t){void 0===t&&(t=10);var e,n=Vb.getItem(zb),o=T(n)?JSON.parse(n):[],r=t-(e=o).length<0?e.slice(0,t):e,i=function(t){r.splice(t,1)};return{add:function(e){var n;(-1===(n=j(r,e))?S.none():S.some(n)).each(i),r.unshift(e),r.length>t&&r.pop(),Vb.setItem(zb,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),Lb=function(t){return!1!==t.getParam("custom_colors")},Jb=function(t){var e=t.getParam("color_map");return void 0!==e?function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var o=n.getContext("2d"),r=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=0;i<t.length;i+=2)e.push({text:t[i+1],value:function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();o.clearRect(0,0,n.width,n.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var e=o.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],c=e[3];return"#"+r(i,c)+r(a,c)+r(u,c)}(t[i]),type:"choiceitem"});return e}(e):Nb},$b=function(t){Hb.add(t)},Ub=function(t){t.addCommand("mceApplyTextcolor",(function(e,n){var o,r,i;r=e,i=n,(o=t).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),t.addCommand("mceRemoveTextcolor",(function(e){var n,o;o=e,(n=t).undoManager.transact((function(){n.focus(),n.formatter.remove(o,{value:null},null,!0),n.nodeChanged()}))}))},Wb=function(t){var e,n,o=Jb(t),r=(e=o.length,Math.max(5,Math.ceil(Math.sqrt(e))));return n=r,t.getParam("color_cols",n,"number")},Gb=function(t,e,n,o){"custom"===n?Qb(t)((function(n){n.each((function(n){$b(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),"#000000"):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))},Xb=function(t,e){return t.concat($(Hb.state(),(function(t){return{type:jb,text:t,value:t}})).concat((o={type:n="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},e?[o,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var n,o},Yb=function(t,e){return function(n){n(Xb(t,e))}},Kb=function(t,e,n){var o,r;o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=n,t.setIconFill(o,r),t.setIconStroke(o,r)},qb=function(t,e,o,r,i){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var n,r,i;return S.from((r=o,(n=t).dom.getParents(n.selection.getStart(),(function(t){var e;(e=t.style["forecolor"===r?"color":"background-color"])&&(i=i||e)})),i)).bind((function(t){return function(t){if("transparent"===t)return S.some(Ib(0,0,0,0));var e=Tb.exec(t);if(null!==e)return S.some(Rb(e[1],e[2],e[3],"1"));var n=_b.exec(t);return null!==n?S.some(Rb(n[1],n[2],n[3],n[4])):S.none()}(t).map((function(t){var n=kb(t).value;return kn(e.toLowerCase(),n)}))})).getOr(!1)},columns:Wb(t),fetch:Yb(Jb(t),Lb(t)),onAction:function(e){null!==i.get()&&Gb(t,o,i.get(),n)},onItemAction:function(n,r){Gb(t,o,r,(function(n){var o;i.set(n),o={name:e,color:n},t.fire("TextColorChange",o)}))},onSetup:function(n){null!==i.get()&&Kb(n,e,i.get());var o=function(t){t.name===e&&Kb(n,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},Zb=function(t,e,o,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){Gb(t,o,e.value,n)}}]}})},Qb=function(t){return function(e,o){var r,i={colorpicker:o},a=(r=e,function(t){var e=t.getData();r(S.from(e.colorpicker)),t.close()});t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:a,onClose:n,onCancel:function(){e(S.none())}})}},ty=function(t,e,n,o,r,i,a,u){var c=Dh(e),s=ey(e,n,o,"color"!==r?"normal":"color",i,a,u);return Ih(t,c,s,o,r)},ey=function(t,e,o,r,i,a,u){return Kf($(t,(function(c){return"choiceitem"===c.type?Te("choicemenuitem",zh,c).fold(Th,(function(s){return S.some(function(t,e,o,r,i,a,u,c){void 0===c&&(c=!0);var s=mb({presets:o,textContent:e?t.text:S.none(),htmlContent:S.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:S.none(),checkMark:e?S.some(cb(u.icons)):S.none(),caret:S.none(),value:t.value},u,c);return Ht(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(i),n},triggersSubmenu:!1,itemBehaviours:[]},s,a,u),{toggling:{toggleClass:mh,toggleOnExecute:!1,selected:t.active}})}(s,1===o,r,e,a(c.value),i,u,Dh(t)))})):S.none()})))},ny=function(t,e){var n=xh(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},oy=ii("cell-over"),ry=ii("cell-execute"),iy=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(function(t,e,n){var o,r=function(n){return Ko(n,ry,{row:t,col:e})},i=function(t,e){e.stop(),r(t)};return ga({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=n,o)},behaviours:ac([dp("insert-table-picker-cell",[rr(fo(),bp.focus),rr(_o(),r),rr(yo(),i),rr(Eo(),i)]),Ep.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bp.config({onFocus:function(n){return Ko(n,oy,{row:t,col:e})}})])})}(r,a,t));o.push(i)}return o},ay={inserttable:function(t){var e=ii("size-label"),n=iy(e,10,10),o=gg({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[ma("0x0")],behaviours:ac([mp.config({})])});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Q(n,(function(t){return $(t,ha)})).concat(o.asSpec()),behaviours:ac([dp("insert-table-picker",[cr(oy,(function(t,e,r){var i=r.event.row,a=r.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Ep.set(t[i][a],i<=e&&a<=n)}(n,i,a,10,10),mp.set(o.get(t),[ma(a+1+"x"+(i+1))])})),cr(ry,(function(e,n,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),Yo(e,Fo())}))]),up.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n=Xb(e.colorinput.getColors(),e.colorinput.hasCustomColors()),o=e.colorinput.getColorCols(),r=ty(ii("menu-value"),n,(function(e){t.onAction({value:e})}),o,"color",uh.CLOSE_ON_EXECUTE,s,e.shared.providers),i=m(m({},r),{markers:xh("color"),movement:ny(o,"color")});return{type:"widget",data:{value:ii("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hb.widget(Xp.sketch(i))]}}},uy=function(t,e,o,i,a,u,c,s){void 0===s&&(s=!0);var l=mb({presets:i,textContent:S.none(),htmlContent:o?t.text.map((function(t){return pb(t,e)})):S.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:S.none(),checkMark:S.none(),caret:S.none(),value:t.value},c.providers,s,t.icon);return tb({data:eb(t),disabled:t.disabled,getApi:r({}),onAction:function(e){return a(t.value,t.meta)},onSetup:r(n),triggersSubmenu:!1,itemBehaviours:db(t.meta,c)},l,u,c.providers)},cy=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:m({tag:"div",classes:[sh,"tox-collection__group-heading"]},e),components:[]}},sy=function(t,e,n,o){void 0===o&&(o=!0);var r=mb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,caret:S.none(),checkMark:S.none(),shortcutContent:t.shortcut},n,o);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},ly=function(t,e,o,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var a,u,c=i?(u=o.icons,{dom:{tag:"div",classes:[ph],innerHtml:vg("chevron-down",u)}}):(a=o.icons,{dom:{tag:"div",classes:[ph],innerHtml:vg("chevron-right",a)}}),s=mb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,caret:S.some(c),checkMark:S.none(),shortcutContent:t.shortcut},o,r);return tb({data:eb(t),getApi:function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},disabled:t.disabled,onAction:n,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,e,o)},fy=function(t,e,n,o){void 0===o&&(o=!0);var r=mb({iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,checkMark:S.some(cb(n.icons)),caret:S.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Ht(tb({data:eb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:mh,toggleOnExecute:!1,selected:t.active}})},my=function(t,e){return n=ay,o=t.fancytype,(Object.prototype.hasOwnProperty.call(n,o)?S.some(n[o]):S.none()).map((function(n){return n(t,e)}));var n,o},dy=function(t,e,n,o){var r={dom:sb(!1,t.label),optComponents:[S.some({dom:{tag:"div",classes:[hh,vh]},components:gb(t.items,o)})]};return tb({data:eb(m({text:S.none()},t)),disabled:t.disabled,getApi:function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){gv.set(t,e),U(Ts(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(gv)&&gv.set(t,e)}))}))}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:S.from(o.itemBehaviours).getOr([])},r,e,n.providers)};(Fv=Av=Av||{})[Fv.ContentFocus=0]="ContentFocus",Fv[Fv.UiFocus=1]="UiFocus";var py,gy,hy,vy,by=function(t,e,n,o,r){var i=n.shared.providers,a=function(t){return r?m(m({},t),{shortcut:S.none(),icon:t.text.isSome()?S.none():t.icon}):t};switch(t.type){case"menuitem":return Te("menuitem",Nh,t).fold(Th,(function(t){return S.some(sy(a(t),e,i,o))}));case"nestedmenuitem":return Te("nestedmenuitem",Hh,t).fold(Th,(function(t){return S.some(ly(a(t),e,i,o,r))}));case"togglemenuitem":return Te("togglemenuitem",Lh,t).fold(Th,(function(t){return S.some(fy(a(t),e,i,o))}));case"separator":return Te("separatormenuitem",Hg,t).fold(Th,(function(t){return S.some(cy(t))}));case"fancymenuitem":return Te("fancymenuitem",jh,t).fold(Th,(function(t){return my(a(t),n)}));default:return console.error("Unknown item in general menu",t),S.none()}},yy=function(t,e,n,o,r,i,a){var u=1===o,c=!u||Dh(t);return Kf($(t,(function(t){switch(t.type){case"separator":return Te("Autocompleter.Separator",Hg,t).fold(Th,(function(t){return S.some(cy(t))}));case"cardmenuitem":return Te("cardmenuitem",Vh,t).fold(Th,(function(t){return S.some(dy(m(m({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),r,i,{itemBehaviours:db(t.meta,i),cardText:{matchText:e,highlightOn:a}}))}));case"autocompleteitem":default:return Te("Autocompleter.Item",Lg,t).fold(Th,(function(t){return S.some(uy(t,e,u,"normal",n,r,i,c))}))}})))},xy=function(t,e,n,o,r){var i=Dh(e),a=Kf($(e,(function(t){var e=function(t){return by(t,n,o,(e=t,r?!e.hasOwnProperty("text"):i),r);var e};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(m(m({},t),{disabled:!0})):e(t)})));return(r?_h:Ih)(t,i,a,1,"normal")},wy=function(t){return tg.singleData(t.value,t)},Cy=function(t,e){var n=dn(S.none()),o=dn(!1),r=ga(eg.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ac([dp("dismissAutocompleter",[rr(Ho(),(function(){return u()}))])]),lazySink:e.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&eg.hide(r)},u=function(){var e;i()&&(e=n.get().map((function(t){return t.element})),Tg(e.getOr(gn.fromDom(t.selection.getNode()))).each(Ur),a(),n.set(S.none()),o.set(!1))},c=Jt((function(){return rh(t)})),s=function(e,n,o,i){e.matchLength=n.text.length;var a,u,c,s,l,f,m,d=ct(o,(function(t){return S.from(t.columns)})).getOr(1);eg.showAt(r,{anchor:"node",root:gn.fromDom(t.getBody()),node:S.from(e.element)},Xp.sketch((a=Ih("autocompleter-value",!0,i,d,"normal"),u=d,c=Av.ContentFocus,s="normal",l=(c===Av.ContentFocus?Mm:Rm)(),f=ny(u,s),m=xh(s),{dom:a.dom,components:a.components,items:a.items,value:a.value,markers:{selectedItem:m.selectedItem,item:m.item},movement:f,fakeFocus:c===Av.ContentFocus,focusManager:l,menuBehaviours:Uh("auto"!==u?[]:[fr((function(t,e){Jh(t,4,m.item).each((function(e){var n=e.numColumns,o=e.numRows;up.setGridSize(t,o,n)}))}))])}))),eg.getContent(r).each(mm.highlightFirst)},l=function r(l){var f;f=l,n.get().map((function(e){return Fg(t.dom,t.selection.getRng(),e.triggerChar).bind((function(e){return Ng(t,c,e,f)}))})).getOrThunk((function(){return jg(t,c)})).fold(u,(function(c){var l,f;l=c.context,i()||(f=Dg(t,l.range),n.set(S.some({triggerChar:l.triggerChar,element:f,matchLength:l.text.length})),o.set(!1)),c.lookupData.then((function(i){n.get().map((function(n){var l,f,m,d,p=c.context;n.triggerChar===p.triggerChar&&(f=p.triggerChar,d=ct(m=i,(function(t){return S.from(t.columns)})).getOr(1),0<(l=Q(m,(function(n){var i=n.items;return yy(i,n.matchText,(function(e,i){var c=t.selection.getRng();Fg(t.dom,c,f).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var c=t.range,s={hide:function(){u()},reload:function(t){a(),r(t)}};o.set(!0),n.onAction(s,c,e,i),o.set(!1)}))}),d,uh.BUBBLE_TO_SANDBOX,e,n.highlightOn)}))).length?s(n,p,i,l):(10<=p.text.length-n.matchLength?u:a)())}))}))}))},f={onKeypress:kg((function(t){27!==t.which&&l()}),50),cancelIfNecessary:u,isMenuOpen:function(){return eg.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return eg.getContent(r)}};!1===t.hasPlugin("rtc")&&Rg(f,t)},ky=l,Sy=function(t,e,n){return Ea(t,e,ky,n,!1)},Oy=function(t,e,n){return Ea(t,e,ky,n,!0)},Dy=Ia,Ty=function(t,e,n){return qa(t,e,n).isSome()},_y=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Iy=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?S.none():S.some(e.touches[0])},Ey=function(t){var e=dn(S.none()),n=dn(!1),o=_y((function(e){t.triggerEvent(Ao(),e),n.set(!0)}),400),r=Qt([{key:oo(),value:function(t){return Iy(t).each((function(r){o.cancel();var i={x:r.clientX,y:r.clientY,target:t.target};o.schedule(t),n.set(!1),e.set(S.some(i))})),S.none()}},{key:ro(),value:function(t){return o.cancel(),Iy(t).each((function(t){e.get().each((function(n){var o,r,i,a;o=t,r=n,i=Math.abs(o.clientX-r.x),a=Math.abs(o.clientY-r.y),(5<i||5<a)&&e.set(S.none())}))})),S.none()}},{key:io(),value:function(r){return o.cancel(),e.get().filter((function(t){return Gn(t.target,r.target)})).map((function(e){return n.get()?(r.prevent(),!1):t.triggerEvent(Eo(),r)}))}}]);return{fireIfReady:function(t,e){return Pt(r,e).bind((function(e){return e(t)}))}}},Ay=function(){return $n().browser.isFirefox()},Fy=fe([We("triggerEvent"),nn("stopBackspace",!0)]),Ry=function(t,e){var n,o,r,i,a=Ie("Getting GUI events settings",Fy,e),u=Ey(a),c=$(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return Sy(t,e,(function(t){u.fireIfReady(t,e).each((function(e){e&&t.kill()})),a.triggerEvent(e,t)&&t.kill()}))})),s=dn(S.none()),l=Sy(t,"paste",(function(t){u.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),a.triggerEvent("paste",t)&&t.kill(),s.set(S.some(setTimeout((function(){a.triggerEvent(Do(),t)}),0)))})),f=Sy(t,"keydown",(function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||(e=t).raw.which!==dm[0]||N(["input","textarea"],gr(e.target))||Ty(e.target,'[contenteditable="true"]')||t.prevent()})),m=(n=t,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},Ay()?Oy(n,"focus",o):Sy(n,"focusin",o)),d=dn(S.none()),p=(r=t,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),d.set(S.some(setTimeout((function(){a.triggerEvent(Oo(),t)}),0)))},Ay()?Oy(r,"blur",i):Sy(r,"focusout",i));return{unbind:function(){U(c,(function(t){t.unbind()})),f.unbind(),m.unbind(),p.unbind(),l.unbind(),s.get().each(clearTimeout),d.get().each(clearTimeout)}}},My=function(t,e){var n=Pt(t,"target").getOr(e);return dn(n)},Py=zt([{stopped:[]},{resume:["element"]},{complete:[]}]),By=function(t,e,n,o,r,i){var a,u,c,s,l=t(e,o),f=(a=n,u=r,c=dn(!1),s=dn(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:a,setSource:u.set,getSource:u.get});return l.fold((function(){return i.logEventNoHandlers(e,o),Py.complete()}),(function(t){var n=t.descHandler;return Oi(n)(f),f.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Py.stopped()):f.isCut()?(i.logEventCut(e,t.element,n.purpose),Py.complete()):Or(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),Py.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),Py.resume(o)}))}))},Vy=function t(e,n,o,r,i,a){return By(e,n,o,r,i,a).fold(l,(function(r){return t(e,n,o,r,i,a)}),s)},zy=function(t,e,o){var r,i,a=(r=e,i=dn(!1),{stop:function(){i.set(!0)},cut:n,isStopped:i.get,isCut:s,event:r,setSource:c("Cannot set source of a broadcasted event"),getSource:c("Cannot get source of a broadcasted event")});return U(t,(function(t){var e=t.descHandler;Oi(e)(a)})),a.isStopped()},jy=function(t,e,n,o,r){var i=My(n,o);return Vy(t,e,n,o,i,r)},Ny=function(){var t={};return{registerId:function(e,n,o){_t(o,(function(o,r){var i,u,c=void 0!==t[r]?t[r]:{};c[n]=(i=o,u=e,{cHandler:a.apply(void 0,[i.handler].concat(u)),purpose:i.purpose}),t[r]=c}))},unregisterId:function(e){_t(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return Pt(t,e).map((function(t){return Ft(t,(function(t,e){return{id:e,descHandler:t}}))})).getOr([])},find:function(e,n,o){var r=Pt(t,n);return Zn(o,(function(t){return e=r,fi(n=t).fold((function(){return S.none()}),(function(t){return e.bind((function(e){return Pt(e,t)})).map((function(t){return{element:n,descHandler:t}}))}));var e,n}),e)}}},Hy=function(){var t=Ny(),e={},n=function(t){var e=t.element;return fi(e).fold((function(){return e="uid-",n=t.element,o=ii(ci+e),li(n,o),o;var e,n,o}),(function(t){return t}))},o=function(n){fi(n.element).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,o){return t.find(e,n,o)},filter:function(e){return t.filterByType(e)},register:function(r){var i=n(r);Vt(e,i)&&function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+ei(r.element)+"\nCannot use it for: "+ei(t.element)+"\nThe conflicting element is"+($i(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var a=[r];t.registerId(a,i,r.events),e[i]=r},unregister:o,getById:function(t){return Pt(e,t)}}},Ly=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=d(e,["attributes"]);return{uid:t.uid,dom:m({tag:"div",attributes:m({role:"presentation"},n)},o),components:t.components,behaviours:Ul(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[nn("components",[]),$l("containerBehaviours",[]),nn("events",{}),nn("domModification",{}),nn("eventOrder",{})]}),Jy=function(t){var e=function(e){return Or(t.element).fold(l,(function(t){return Gn(e,t)}))},o=Hy(),i=function(t,n){return o.find(e,t,n)},a=Ry(t.element,{triggerEvent:function(t,e){return au(t,e.target,(function(n){return r=n,jy(i,t,o=e,o.target,r);var o,r}))}}),u={debugInfo:r("real"),triggerEvent:function(t,e,n){au(t,e,(function(o){return jy(i,t,n,e,o)}))},triggerFocus:function(t,e){fi(t).fold((function(){pc(t)}),(function(o){au(So(),t,(function(o){var r,a,u,c,s,l;return r=i,a=So(),s=o,l=My(u={originator:e,kill:n,prevent:n,target:t},c=t),By(r,a,u,c,l,s),!1}))}))},triggerEscape:function(t,e){u.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return v(t)},getByDom:function(t){return b(t)},build:ga,addToGui:function(t){f(t)},removeFromGui:function(t){m(t)},addToWorld:function(t){c(t)},removeFromWorld:function(t){s(t)},broadcast:function(t){p(t)},broadcastOn:function(t,e){g(t,e)},broadcastEvent:function(t,e){h(t,e)},isConnected:l},c=function t(e){e.connect(u),br(e.element)||(o.register(e),U(e.components(),t),u.triggerEvent(Mo(),e.element,{target:e.element}))},s=function t(e){br(e.element)||(U(e.components(),t),o.unregister(e)),e.disconnect()},f=function(e){al(t,e)},m=function(t){sl(t)},d=function(t){var e=o.filter(To());U(e,(function(e){var n=e.descHandler;Oi(n)(t)}))},p=function(t){d({universal:!0,data:t})},g=function(t,e){d({universal:!1,channels:t,data:e})},h=function(t,e){var n=o.filter(t);return zy(n,e)},v=function(t){return o.getById(t).fold((function(){return ft.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),ft.value)},b=function(t){var e=fi(t).getOr("not found");return v(e)};return c(t),{root:t,element:t.element,destroy:function(){a.unbind(),$r(t.element)},add:f,remove:m,getByUid:v,getByDom:b,addToWorld:c,removeFromWorld:s,broadcast:p,broadcastOn:g,broadcastEvent:h}},$y=r([nn("prefix","form-field"),$l("fieldBehaviours",[em,Jl])]),Uy=r([Cf({schema:[Le("dom")],name:"label"}),Cf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Le("text")],name:"aria-descriptor"}),xf({factory:{sketch:function(t){var e=qt(t,["factory"]);return t.factory.sketch(e)}},schema:[Le("factory")],name:"field"})]),Wy=Yf({name:"FormField",configFields:$y(),partFields:Uy(),factory:function(t,e,n,o){var r=Wl(t.fieldBehaviours,[em.config({find:function(e){return Mf(e,t,"field")}}),Jl.config({store:{mode:"manual",getValue:function(t){return em.getCurrent(t).bind(Jl.getValue)},setValue:function(t,e){em.getCurrent(t).each((function(t){Jl.setValue(t,e)}))}}})]),i=er([fr((function(e,n){var o=Bf(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=ii(t.prefix);o.label().each((function(t){Yr(t.element,"for",n),Yr(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=ii(t.prefix);Yr(n.element,"id",o),Yr(e.element,"aria-describedby",o)}))}))}))]),a={getField:function(e){return Mf(e,t,"field")},getLabel:function(e){return Mf(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Gy=Object.freeze({__proto__:null,exhibit:function(t,e){return Si({attributes:Qt([{key:e.tabAttr,value:"true"}])})}}),Xy=[nn("tabAttr","data-alloy-tabstop")],Yy=cc({fields:Xy,name:"tabstopping",active:Gy}),Ky=tinymce.util.Tools.resolve("tinymce.html.Entities"),qy=function(t,e,n,o){var r=Zy(t,e,n,o);return Wy.sketch(r)},Zy=function(t,e,n,o){return{dom:Qy(n),components:t.toArray().concat([e]),fieldBehaviours:ac(o)}},Qy=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},tx=function(t,e){return Wy.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},ex=ii("form-component-change"),nx=ii("form-close"),ox=ii("form-cancel"),rx=ii("form-action"),ix=ii("form-submit"),ax=ii("form-block"),ux=ii("form-unblock"),cx=ii("form-tabchange"),sx=ii("form-resize"),lx=function(t,e){var n,o,r,a=t.label.map((function(t){return tx(t,e)})),u=function(t){return function(e,n){qa(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,Kr(o,"data-collection-item-value"))}))}},c=u((function(n,o,r,i){o.stop(),e.isDisabled()||Ko(n,rx,{name:t.name,value:i})})),s=[rr(fo(),u((function(t,e,n){pc(n)}))),rr(yo(),c),rr(Eo(),c),rr(mo(),u((function(t,e,n){Ka(t.element,"."+gh).each((function(t){ji(t,gh)})),Vi(n,gh)}))),rr(po(),u((function(t){Ka(t.element,"."+gh).each((function(t){ji(t,gh)}))}))),pr(u((function(e,n,o,r){Ko(e,rx,{name:t.name,value:r})})))],l=function(t,e){return $(Ts(t.element,".tox-collection__item"),e)},f=Wy.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:i},behaviours:ac([gv.config({disabled:e.isDisabled,onDisabled:function(t){l(t,(function(t){Vi(t,"tox-collection__item--state-disabled"),Yr(t,"aria-disabled",!0)}))},onEnabled:function(t){l(t,(function(t){ji(t,"tox-collection__item--state-disabled"),Qr(t,"aria-disabled")}))}}),$v(),mp.config({}),Jl.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,o){var r,i,a,u;r=n,i=$(o,(function(n){var o=ev.translate(n.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=o.replace(/\_| \- |\-/g,(function(t){return a[t]}));return'<div class="tox-collection__item'+(e.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Ky.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+r+"</div>"})),a="auto"!==t.columns&&1<t.columns?J(i,t.columns):[i],u=$(a,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"})),Gr(r.element,u.join("")),"auto"===t.columns&&Jh(n,5,"tox-collection__item").each((function(t){var e=t.numRows,o=t.numColumns;up.setGridSize(n,e,o)})),Yo(n,sx)}}),Yy.config({}),up.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?"."+lh:"."+sh}})),dp("collection-events",s)]),eventOrder:((n={})[_o()]=["disabling","alloy.base.behaviour","collection-events"],n)});return qy(a,f,["tox-form__group--collection"],[])},fx=r([Ke("data"),nn("inputAttributes",{}),nn("inputStyles",{}),nn("tag","input"),nn("inputClasses",[]),gu("onSetValue"),nn("styles",{}),nn("eventOrder",{}),$l("inputBehaviours",[Jl,bp]),nn("selectOnFocus",!0)]),mx=function(t){return ac([bp.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=ra(e);e.dom.setSelectionRange(0,n.length)}:n})])},dx=function(t){return{tag:t.tag,attributes:m({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},px=Xf({name:"Input",configFields:fx(),factory:function(t,e){return{uid:t.uid,dom:dx(t),components:[],behaviours:m(m({},mx(n=t)),Wl(n.inputBehaviours,[Jl.config({store:m(m({mode:"manual"},n.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return ra(t.element)},setValue:function(t,e){ra(t.element)!==e&&ia(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),gx={},hx={exports:gx};py=void 0,gy=gx,hy=hx,vy=void 0,function(n){"object"==e(gy)&&void 0!==hy?hy.exports=n():"function"==typeof py&&py.amd?py([],n):("undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}((function(){return function t(e,n,o){function r(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof vy&&vy;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return r(e[a][1][t]||t)}),l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof vy&&vy,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){var o,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,l=[],f=!1,m=-1;function d(){f&&s&&(f=!1,s.length?l=s.concat(l):m=-1,l.length&&p())}function p(){if(!f){var t=c(d);f=!0;for(var e=l.length;e;){for(s=l,l=[];++m<e;)s&&s[m].run();m=-1,e=l.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new g(t,e)),1!==l.length||f||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,o){(function(t){function o(){}function r(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(m){return void u(e.promise,m)}a(e.promise,n)}else(1===t._state?a:u)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==e(n)||"function"==typeof n)){var o=n.then;if(n instanceof r)return t._state=3,t._value=n,void c(t);if("function"==typeof o)return void l((i=o,s=n,function(){i.apply(s,arguments)}),t)}t._state=1,t._value=n,c(t)}catch(a){u(t,a)}var i,s}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn((function(){t._handled||r._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function s(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,u(e,t))}))}catch(o){if(n)return;n=!0,u(e,o)}}var f,m;f=this,m=setTimeout,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return i(this,new s(t,e,n)),n},r.all=function(t){var n=Array.prototype.slice.call(t);return new r((function(t,r){if(0===n.length)return t([]);for(var i=n.length,a=0;a<n.length;a++)!function a(u,c){try{if(c&&("object"==e(c)||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,(function(t){a(u,t)}),r)}n[u]=c,0==--i&&t(n)}catch(o){r(o)}}(a,n[a])}))},r.resolve=function(t){return t&&"object"==e(t)&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},r._immediateFn="function"==typeof t?function(e){t(e)}:function(t){m(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=r:f.Promise||(f.Promise=r)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var r=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function s(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new s(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new s(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,o=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,r((function(){u[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof o?o:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)}));var vx,bx,yx=hx.exports.boltExport,xx=function t(e){var n=S.none(),o=[],r=function(t){i()?u(t):o.push(t)},i=function(){return n.isSome()},a=function(t){U(t,u)},u=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return e((function(t){i()||(n=S.some(t),a(o),o=[])})),{get:r,map:function(e){return t((function(t){r((function(n){t(e(n))}))}))},isReady:i}},wx={nu:xx,pure:function(t){return xx((function(e){e(t)}))}},Cx=function(t){setTimeout((function(){throw t}),0)},kx=function t(e){var n=function(t){e().then(t,Cx)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return wx.nu(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},Sx=function(t){return kx((function(){return new yx(t)}))},Ox=function(t){return kx((function(){return yx.resolve(t)}))},Dx=["input","textarea"],Tx=function(t){var e=gr(t);return N(Dx,e)},_x=function(t,e){var n=e.getRoot(t).getOr(t.element);ji(n,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&Yr(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){Gr(t,e.validHtml)})),e.onValid(t)}))},Ix=function(t,e,n,o){var r=e.getRoot(t).getOr(t.element);Vi(r,e.invalidClass),e.notify.each((function(e){Tx(t.element)&&Yr(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){Gr(t,o)})),e.onInvalid(t,o)}))},Ex=function(t,e,n){return e.validator.fold((function(){return Ox(ft.value(!0))}),(function(e){return e.validate(t)}))},Ax=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Ex(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return Ix(t,e,0,n),ft.error(n)}),(function(n){return _x(t,e),ft.value(n)})):ft.error("No longer in system")}))},Fx=Object.freeze({__proto__:null,markValid:_x,markInvalid:Ix,query:Ex,run:Ax,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return Ni(n,e.invalidClass)}}),Rx=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return er([rr(e.onEvent,(function(e){Ax(e,t).get(i)}))].concat(e.validateOnLoad?[fr((function(e){Ax(e,t).get(n)}))]:[]))})).getOr({})}}),Mx=[Le("invalidClass"),nn("getRoot",S.none),en("notify",[nn("aria","alert"),nn("getContainer",S.none),nn("validHtml",""),gu("onValid"),gu("onInvalid"),gu("onValidate")]),en("validator",[Le("validate"),nn("onEvent","input"),nn("validateOnLoad",!0)])],Px=cc({fields:Mx,name:"invalidating",active:Rx,apis:Fx,extra:{validation:function(t){return function(e){var n=Jl.getValue(e);return Ox(t(n))}}}}),Bx=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Vx=[Je("others",De(ft.value,Re()))],zx=cc({fields:Vx,name:"coupling",apis:Bx,state:Object.freeze({__proto__:null,init:function(){var t={},e=r({});return Ci({readState:e,getOrCreate:function(e,n,o){var r=Dt(n.others);if(r)return Pt(t,o).getOrThunk((function(){var r=Pt(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),jx=r("sink"),Nx=r(Cf({name:jx(),overrides:r({dom:{tag:"div"},behaviours:ac([el.config({useFixed:l})]),events:er([sr(go()),sr(uo()),sr(yo())])})}));(bx=vx=vx||{})[bx.HighlightFirst=0]="HighlightFirst",bx[bx.HighlightNone=1]="HighlightNone";var Hx,Lx,Jx,$x,Ux,Wx,Gx=function(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:"hotspot",hotspot:n,overrides:o}}),(function(t){return{anchor:"hotspot",hotspot:n,overrides:o,layouts:t}}))},Xx=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,p,g,h,v,b=Gx(t,n);return(c=b,l=o,f=r,d=a,p=e,g=s=n,h=(0,(u=t).fetch)(g).map(p),v=Zx(s,u),h.map((function(t){return t.bind((function(t){return S.from(tg.sketch(m(m({},f.menu()),{uid:mi(""),data:t,highlightImmediately:d===vx.HighlightFirst,onOpenMenu:function(t,e){var n=v().getOrDie();el.position(n,c,e),kl.decloak(l)},onOpenSubmenu:function(t,e,n){var o=v().getOrDie();el.position(o,{anchor:"submenu",item:e},n),kl.decloak(l)},onRepositionMenu:function(t,e,n){var o=v().getOrDie();el.position(o,c,e),U(n,(function(t){el.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return bp.focus(s),kl.close(l),S.some(!0)}})))}))}))).map((function(t){return t.fold((function(){kl.isOpen(o)&&kl.close(o)}),(function(t){kl.cloak(o),kl.open(o,t),i(o)})),o}))},Yx=function(t,e,n,o,r,i,a){return kl.close(o),Ox(o)},Kx=function(t,e,n,o,r,i){var a=zx.getCoupled(n,"sandbox");return(kl.isOpen(a)?Yx:Xx)(t,e,n,a,o,r,i)},qx=function(t,e,n){var o,r,i=em.getCurrent(e).getOr(e),a=Ta(t.element);n?Yi(i.element,"min-width",a+"px"):(o=i.element,r=a,Da.set(o,r))},Zx=function(t,e){return t.getSystem().getByUid(e.uid+"-"+jx()).map((function(t){return function(){return ft.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return ft.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},Qx=function(t){kl.getState(t).each((function(t){tg.repositionMenus(t)}))},tw=function(t,e,n){var o=Za(),r=Zx(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Xl(t.sandboxBehaviours,[Jl.config({store:{mode:"memory",initialValue:e}}),kl.config({onOpen:function(r,i){var a=Gx(t,e);o.link(e.element),t.matchWidth&&qx(a.hotspot,i,t.useMinWidth),t.onOpen(a,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return tu(n,o)||tu(e,o)},getAttachPoint:function(){return r().getOrDie()}}),em.config({find:function(t){return kl.getState(t).bind((function(t){return em.getCurrent(t)}))}}),mc.config({channels:m(m({},_l({isExtraPart:s})),El({doReposition:Qx}))})])}},ew=function(t){var e=zx.getCoupled(t,"sandbox");Qx(e)},nw=function(){return[nn("sandboxClasses",[]),Gl("sandboxBehaviours",[em,mc,kl,Jl])]},ow=r([Le("dom"),Le("fetch"),gu("onOpen"),hu("onExecute"),nn("getHotspot",S.some),nn("getAnchorOverrides",r({})),Kc(),$l("dropdownBehaviours",[Ep,zx,up,bp]),Le("toggleClass"),nn("eventOrder",{}),Ke("lazySink"),nn("matchWidth",!1),nn("useMinWidth",!1),Ke("role")].concat(nw())),rw=r([wf({schema:[mu()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Nx()]),iw=Yf({name:"Dropdown",configFields:ow(),partFields:rw(),factory:function(t,e,o,r){var i,a,u=function(t){kl.getState(t).each((function(t){tg.highlightPrimary(t)}))},c={expand:function(e){Ep.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightNone).get(n)},open:function(e){Ep.isOn(e)||Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},isOpen:Ep.isOn,close:function(e){Ep.isOn(e)&&Kx(t,(function(t){return t}),e,r,n,vx.HighlightFirst).get(n)},repositionMenus:function(t){Ep.isOn(t)&&ew(t)}},s=function(t,e){return qo(t),S.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.dropdownBehaviours,[Ep.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),zx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Ep.on(e)},onClose:function(){return Ep.off(e)}})}}}),up.config({mode:"special",onSpace:s,onEnter:s,onDown:function(t,e){var n;return iw.isOpen(t)?(n=zx.getCoupled(t,"sandbox"),u(n)):iw.open(t),S.some(!0)},onEscape:function(t,e){return iw.isOpen(t)?(iw.close(t),S.some(!0)):S.none()}}),bp.config({})]),events:Fp(S.some((function(e){Kx(t,(function(t){return t}),e,r,u,vx.HighlightFirst).get(n)}))),eventOrder:m(m({},t.eventOrder),((i={})[_o()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:c,domModification:{attributes:m(m({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(a="type",Pt(t.dom,"attributes").bind((function(t){return Pt(t,a)})).getOr("button"))}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),aw=cc({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return er([nr(wo(),l)])},exhibit:function(){return Si({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),uw=ii("color-input-change"),cw=ii("color-swatch-change"),sw=ii("color-picker-cancel"),lw=function(t,e,o){var r,i,a=Wy.parts.field({factory:px,inputClasses:["tox-textfield"],onSetValue:function(t){return Px.run(t).get(n)},inputBehaviours:ac([gv.config({disabled:e.providers.isDisabled}),$v(),Yy.config({}),Px.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return Or(t.element)},notify:{onValid:function(t){var e=Jl.getValue(t);Ko(t,uw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Jl.getValue(t);if(0===e.length)return Ox(ft.value(!0));var n=gn.fromTag("span");Yi(n,"background-color",e);var o=ta(n,"background-color").fold((function(){return ft.error("blah")}),(function(t){return ft.value(e)}));return Ox(o)}}})]),selectOnFocus:!1}),u=t.label.map((function(t){return tx(t,e.providers)})),c=function(t,e){Ko(t,cw,{value:e})},l=gg((r={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Nu,ju,$u]},onLtr:function(){return[ju,Nu,$u]}},components:[],fetch:Yb(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){l.getOpt(t).each((function(t){"custom"===e?o.colorPicker((function(e){e.fold((function(){return Yo(t,sw)}),(function(e){c(t,e),$b(e)}))}),"#ffffff"):c(t,"remove"===e?"":e)}))}},i=e,iw.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:ac([Wv(i.providers.isDisabled),$v(),aw.config({}),Yy.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:i.getSink,fetch:function(t){return Sx((function(t){return r.fetch(t)})).map((function(e){return S.from(wy(Ht(ty(ii("menu-value"),e,(function(e){r.onItemAction(t,e)}),r.columns,r.presets,uh.CLOSE_ON_EXECUTE,s,i.providers),{movement:ny(r.columns,r.presets)})))}))},parts:{menu:Ch(0,0,r.presets)}})));return Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:u.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[a,l.asSpec()]}]),fieldBehaviours:ac([dp("form-field-events",[rr(uw,(function(e,n){l.getOpt(e).each((function(t){Yi(t.element,"background-color",n.event.color)})),Ko(e,ex,{name:t.name})})),rr(cw,(function(t,e){Wy.getField(t).each((function(n){Jl.setValue(n,e.event.value),em.getCurrent(t).each(bp.focus)}))})),rr(sw,(function(t,e){Wy.getField(t).each((function(e){em.getCurrent(t).each(bp.focus)}))}))])])})},fw=function(t,e,n){return{hue:t,saturation:e,value:n}},mw=ii("rgb-hex-update"),dw=ii("slider-update"),pw=ii("palette-update"),gw=Cf({schema:[Le("dom")],name:"label"}),hw=function(t){return Cf({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:er([ir(oo(),(function(e,n,o){return t(e,o)}),[e]),ir(uo(),(function(e,n,o){return t(e,o)}),[e]),ir(co(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})},vw=hw("top-left"),bw=hw("top"),yw=hw("top-right"),xw=hw("right"),ww=hw("bottom-right"),Cw=hw("bottom"),kw=hw("bottom-left"),Sw=[gw,hw("left"),xw,bw,Cw,vw,yw,kw,ww,xf({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:er([ur(oo(),t,"spectrum"),ur(ro(),t,"spectrum"),ur(io(),t,"spectrum"),ur(uo(),t,"spectrum"),ur(co(),t,"spectrum"),ur(lo(),t,"spectrum")])}}}),xf({schema:[mn("mouseIsDown",(function(){return dn(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,n=function(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))};return{behaviours:ac([up.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),bp.config({})]),events:er([rr(oo(),n),rr(ro(),n),rr(uo(),n),rr(co(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}})],Ow=r("slider.change.value"),Dw=function(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?S.some(e).map((function(t){return Ca(t.clientX,t.clientY)})):S.none():void 0!==e.touches&&1===e.touches.length?S.some(e.touches[0]).map((function(t){return Ca(t.clientX,t.clientY)})):S.none()},Tw=function(t){return t.model.minX},_w=function(t){return t.model.minY},Iw=function(t){return t.model.minX-1},Ew=function(t){return t.model.minY-1},Aw=function(t){return t.model.maxX},Fw=function(t){return t.model.maxY},Rw=function(t){return t.model.maxX+1},Mw=function(t){return t.model.maxY+1},Pw=function(t,e,n){return e(t)-n(t)},Bw=function(t){return Pw(t,Aw,Tw)},Vw=function(t){return Pw(t,Fw,_w)},zw=function(t){return Bw(t)/2},jw=function(t){return Vw(t)/2},Nw=function(t){return t.stepSize},Hw=function(t){return t.snapToGrid},Lw=function(t){return t.snapStart},Jw=function(t){return t.rounded},$w=function(t,e){return void 0!==t[e+"-edge"]},Uw=function(t){return $w(t,"left")},Ww=function(t){return $w(t,"right")},Gw=function(t){return $w(t,"top")},Xw=function(t){return $w(t,"bottom")},Yw=function(t){return t.model.value.get()},Kw=function(t){return{x:t}},qw=function(t){return{y:t}},Zw=function(t,e){return{x:t,y:e}},Qw=function(t,e){Ko(t,Ow(),{value:e})},tC=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},eC=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},nC=function(t,e,n){return Math.max(e,Math.min(n,t))},oC=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,m=t.maxBound,d=t.screenRange,p=s?e-1:e,g=l?n+1:n;if(r<f)return p;if(m<r)return g;var h,v,b,y,x,w,C,k=(x=r,w=f,C=m,Math.min(C,Math.max(x,w))-w),S=nC(k/d*o+e,p,g);return a&&e<=S&&S<=n?(h=S,v=e,b=n,y=i,u.fold((function(){var t=h-v,e=Math.round(t/y)*y;return nC(v+e,v-1,b+1)}),(function(t){var e=(h-t)%y,n=Math.round(e/y),o=Math.floor((h-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)}))):c?Math.round(S):S},rC=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},iC="left",aC=function(t){return t.element.dom.getBoundingClientRect()},uC=function(t,e){return t[e]},cC=function(t){var e=aC(t);return uC(e,iC)},sC=function(t){var e=aC(t);return uC(e,"right")},lC=function(t){var e=aC(t);return uC(e,"top")},fC=function(t){var e=aC(t);return uC(e,"bottom")},mC=function(t){var e=aC(t);return uC(e,"width")},dC=function(t){var e=aC(t);return uC(e,"height")},pC=function(t,e,n){return(t+e)/2-n},gC=function(t,e){var n=aC(t),o=aC(e),r=uC(n,iC),i=uC(n,"right"),a=uC(o,iC);return pC(r,i,a)},hC=function(t,e){var n=aC(t),o=aC(e),r=uC(n,"top"),i=uC(n,"bottom"),a=uC(o,"top");return pC(r,i,a)},vC=function(t,e){Ko(t,Ow(),{value:e})},bC=function(t){return{x:t}},yC=function(t,e,n){var o={min:Tw(e),max:Aw(e),range:Bw(e),value:n,step:Nw(e),snap:Hw(e),snapStart:Lw(e),rounded:Jw(e),hasMinEdge:Uw(e),hasMaxEdge:Ww(e),minBound:cC(t),maxBound:sC(t),screenRange:mC(t)};return oC(o)},xC=function(t){return function(e,n){return o=e,i=(0<t?eC:tC)(Yw(r=n).x,Tw(r),Aw(r),Nw(r)),vC(o,bC(i)),S.some(i).map(l);var o,r,i}},wC=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,g=(u=i,c=n,s=o,l=r,f=mC(a=e),m=s.bind((function(t){return S.some(gC(t,a))})).getOr(0),d=l.bind((function(t){return S.some(gC(t,a))})).getOr(f),p={min:Tw(u),max:Aw(u),range:Bw(u),value:c,hasMinEdge:Uw(u),hasMaxEdge:Ww(u),minBound:cC(a),minOffset:0,maxBound:sC(a),maxOffset:f,centerMinEdge:m,centerMaxEdge:d},rC(p));return cC(e)-cC(t)+g},CC=xC(-1),kC=xC(1),SC=S.none,OC=S.none,DC={"top-left":S.none(),top:S.none(),"top-right":S.none(),right:S.some((function(t,e){Qw(t,Kw(Rw(e)))})),"bottom-right":S.none(),bottom:S.none(),"bottom-left":S.none(),left:S.some((function(t,e){Qw(t,Kw(Iw(e)))}))},TC=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yC(t,e,n),r=bC(o);return vC(t,r),o},setToMin:function(t,e){var n=Tw(e);vC(t,bC(n))},setToMax:function(t,e){var n=Aw(e);vC(t,bC(n))},findValueOfOffset:yC,getValueFromEvent:function(t){return Dw(t).map((function(t){return t.left}))},findPositionOfValue:wC,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=wC(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Ta(e.element)/2;Yi(e.element,"left",i-a+"px")},onLeft:CC,onRight:kC,onUp:SC,onDown:OC,edgeActions:DC}),_C=function(t,e){Ko(t,Ow(),{value:e})},IC=function(t){return{y:t}},EC=function(t,e,n){var o={min:_w(e),max:Fw(e),range:Vw(e),value:n,step:Nw(e),snap:Hw(e),snapStart:Lw(e),rounded:Jw(e),hasMinEdge:Gw(e),hasMaxEdge:Xw(e),minBound:lC(t),maxBound:fC(t),screenRange:dC(t)};return oC(o)},AC=function(t){return function(e,n){return o=e,i=(0<t?eC:tC)(Yw(r=n).y,_w(r),Fw(r),Nw(r)),_C(o,IC(i)),S.some(i).map(l);var o,r,i}},FC=function(t,e,n,o,r,i){var a,u,c,s,l,f,m,d,p,g=(u=i,c=n,s=o,l=r,f=dC(a=e),m=s.bind((function(t){return S.some(hC(t,a))})).getOr(0),d=l.bind((function(t){return S.some(hC(t,a))})).getOr(f),p={min:_w(u),max:Fw(u),range:Vw(u),value:c,hasMinEdge:Gw(u),hasMaxEdge:Xw(u),minBound:lC(a),minOffset:0,maxBound:fC(a),maxOffset:f,centerMinEdge:m,centerMaxEdge:d},rC(p));return lC(e)-lC(t)+g},RC=S.none,MC=S.none,PC=AC(-1),BC=AC(1),VC={"top-left":S.none(),top:S.some((function(t,e){Qw(t,qw(Ew(e)))})),"top-right":S.none(),right:S.none(),"bottom-right":S.none(),bottom:S.some((function(t,e){Qw(t,qw(Mw(e)))})),"bottom-left":S.none(),left:S.none()},zC=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=EC(t,e,n),r=IC(o);return _C(t,r),o},setToMin:function(t,e){var n=_w(e);_C(t,IC(n))},setToMax:function(t,e){var n=Fw(e);_C(t,IC(n))},findValueOfOffset:EC,getValueFromEvent:function(t){return Dw(t).map((function(t){return t.top}))},findPositionOfValue:FC,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=FC(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=ya(e.element)/2;Yi(e.element,"top",i-a+"px")},onLeft:RC,onRight:MC,onUp:PC,onDown:BC,edgeActions:VC}),jC=function(t,e){Ko(t,Ow(),{value:e})},NC=function(t,e){return{x:t,y:e}},HC=function(t,e){return function(n,o){return i=n,a=o,u=0<t?eC:tC,c=(r=e)?Yw(a).x:u(Yw(a).x,Tw(a),Aw(a),Nw(a)),s=r?u(Yw(a).y,_w(a),Fw(a),Nw(a)):Yw(a).y,jC(i,NC(c,s)),S.some(c).map(l);var r,i,a,u,c,s}},LC=Dw,JC=HC(-1,!1),$C=HC(1,!1),UC=HC(-1,!0),WC=HC(1,!0),GC={"top-left":S.some((function(t,e){Qw(t,Zw(Iw(e),Ew(e)))})),top:S.some((function(t,e){Qw(t,Zw(zw(e),Ew(e)))})),"top-right":S.some((function(t,e){Qw(t,Zw(Rw(e),Ew(e)))})),right:S.some((function(t,e){Qw(t,Zw(Rw(e),jw(e)))})),"bottom-right":S.some((function(t,e){Qw(t,Zw(Rw(e),Mw(e)))})),bottom:S.some((function(t,e){Qw(t,Zw(zw(e),Mw(e)))})),"bottom-left":S.some((function(t,e){Qw(t,Zw(Iw(e),Mw(e)))})),left:S.some((function(t,e){Qw(t,Zw(Iw(e),jw(e)))}))},XC=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=yC(t,e,n.left),r=EC(t,e,n.top),i=NC(o,r);return jC(t,i),i},setToMin:function(t,e){var n=Tw(e),o=_w(e);jC(t,NC(n,o))},setToMax:function(t,e){var n=Aw(e),o=Fw(e);jC(t,NC(n,o))},getValueFromEvent:LC,setPositionFromValue:function(t,e,n,o){var r=Yw(n),i=wC(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=FC(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=Ta(e.element)/2,c=ya(e.element)/2;Yi(e.element,"left",i-u+"px"),Yi(e.element,"top",a-c+"px")},onLeft:JC,onRight:$C,onUp:UC,onDown:WC,edgeActions:GC}),YC=Yf({name:"Slider",configFields:[nn("stepSize",1),nn("onChange",n),nn("onChoose",n),nn("onInit",n),nn("onDragStart",n),nn("onDragEnd",n),nn("snapToGrid",!1),nn("rounded",!0),Ke("snapStart"),Je("model",Fe("mode",{x:[nn("minX",0),nn("maxX",100),mn("value",(function(t){return dn(t.mode.minX)})),Le("getInitialValue"),yu("manager",TC)],y:[nn("minY",0),nn("maxY",100),mn("value",(function(t){return dn(t.mode.minY)})),Le("getInitialValue"),yu("manager",zC)],xy:[nn("minX",0),nn("maxX",100),nn("minY",0),nn("maxY",100),mn("value",(function(t){return dn({x:t.mode.minX,y:t.mode.minY})})),Le("getInitialValue"),yu("manager",XC)]})),$l("sliderBehaviours",[up,Jl]),mn("mouseIsDown",(function(){return dn(!1)}))],partFields:Sw,factory:function(t,e,n,o){var r,i=function(e){return Pf(e,t,"thumb")},a=function(e){return Pf(e,t,"spectrum")},u=function(e){return Mf(e,t,"left-edge")},c=function(e){return Mf(e,t,"right-edge")},s=function(e){return Mf(e,t,"top-edge")},f=function(e){return Mf(e,t,"bottom-edge")},m=t.model,d=m.manager,p=function(e,n){d.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:c,getTopEdge:s,getBottomEdge:f,getSpectrum:a})},g=function(e,n){m.value.set(n);var o=i(e);return p(e,o),t.onChange(e,o,n),S.some(!0)},h=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&Mf(e,t,"thumb").each((function(n){var o=m.value.get();t.onChoose(e,n,o)}))},v=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},b=function(e,n){n.stop(),t.onDragEnd(e,i(e)),h(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.sliderBehaviours,[up.config({mode:"special",focusIn:function(e){return Mf(e,t,"spectrum").map(up.focusIn).map(l)}}),Jl.config({store:{mode:"manual",getValue:function(t){return m.value.get()}}}),mc.config({channels:((r={})[Dl()]={onReceive:h},r)})]),events:er([rr(Ow(),(function(t,e){g(t,e.event.value)})),fr((function(e,n){var o=m.getInitialValue();m.value.set(o);var r=i(e);p(e,r);var u=a(e);t.onInit(e,r,u,m.value.get())})),rr(oo(),v),rr(io(),b),rr(uo(),v),rr(lo(),b)]),apis:{resetToMin:function(e){d.setToMin(e,t)},resetToMax:function(e){d.setToMax(e,t)},changeValue:g,refresh:p},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),KC=[$l("formBehaviours",[Jl])],qC=function(t){return"<alloy.field."+t+">"},ZC=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.formBehaviours,[Jl.config({store:{mode:"manual",getValue:function(e){var n=Vf(e,t);return It(n,(function(t,e){return t().bind((function(t){var n,o,r=em.getCurrent(t);return n=r,o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+ei(t.element)),n.fold((function(){return ft.error(o)}),ft.value)})).map(Jl.getValue)}))},setValue:function(e,n){_t(n,(function(n,o){Mf(e,t,o).each((function(t){em.getCurrent(t).each((function(t){Jl.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return Mf(e,t,n).bind(em.getCurrent)}}}},QC={getField:xi((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),If("form",qC(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=$(r,(function(t){return xf({name:t,pname:qC(t)})}));return $f("form",KC,i,ZC,o)}},tk=ii("valid-input"),ek=ii("invalid-input"),nk=ii("validating-input"),ok="colorcustom.rgb.",rk=function(t,e,o,r){var i=function(o,r,i,a,u){var c,s,l=t(ok+"range"),f=[Wy.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),Wy.parts.field({data:u,factory:px,inputAttributes:m({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:ac([(c=r,s=o,Px.config({invalidClass:e("invalid"),notify:{onValidate:function(t){Ko(t,nk,{type:c})},onValid:function(t){Ko(t,tk,{type:c,value:Jl.getValue(t)})},onInvalid:function(t){Ko(t,ek,{type:c,value:Jl.getValue(t)})}},validator:{validate:function(e){var n=Jl.getValue(e),o=s(n)?ft.value(!0):ft.error(t("aria.input.invalid"));return Ox(o)},validateOnLoad:!1}})),Yy.config({})]),onSetValue:function(t){Px.isInvalid(t)&&Px.run(t).get(n)}})],d="hex"!==r?[Wy.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(d)}},a=function(t,e){var n=e.red,o=e.green,r=e.blue;Jl.setValue(t,{red:n,green:o,blue:r})},u=gg({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,e){u.getOpt(t).each((function(t){Yi(t.element,"background-color","#"+e.value)}))};return Xf({factory:function(){var n={red:dn(S.some(255)),green:dn(S.some(255)),blue:dn(S.some(255)),hex:dn(S.some("ffffff"))},s=function(t){return n[t].get()},l=function(t,e){n[t].set(e)},f=function(t){var e=t.red,n=t.green,o=t.blue;l("red",S.some(e)),l("green",S.some(n)),l("blue",S.some(o))},m=function(t,e){var n=e.event;"hex"!==n.type?l(n.type,S.none()):r(t)},d=function(t,e,n){var o=parseInt(n,10);l(e,S.some(o)),s("red").bind((function(t){return s("green").bind((function(e){return s("blue").map((function(n){return Ib(t,e,n,1)}))}))})).each((function(e){var n,o,r=(n=t,o=kb(e),QC.getField(n,"hex").each((function(t){bp.isFocused(t)||Jl.setValue(n,{hex:o.value})})),o);c(t,r)}))},p=function(t,e){var n=e.event;"hex"===n.type?function(t,e){o(t);var n=vb(e);l("hex",S.some(e));var r=Fb(n);a(t,r),f(r),Ko(t,mw,{hex:n}),c(t,n)}(t,n.value):d(t,n.type,n.value)},g=function(e){return{label:t(ok+e+".label"),description:t(ok+e+".description")}},h=g("red"),v=g("green"),b=g("blue"),y=g("hex");return Ht(QC.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Wy.sketch(i(Eb,"red",h.label,h.description,255))),n.field("green",Wy.sketch(i(Eb,"green",v.label,v.description,255))),n.field("blue",Wy.sketch(i(Eb,"blue",b.label,b.description,255))),n.field("hex",Wy.sketch(i(xb,"hex",y.label,y.description,"ffffff"))),u.asSpec()],formBehaviours:ac([Px.config({invalidClass:e("form-invalid")}),dp("rgb-form-events",[rr(tk,p),rr(ek,m),rr(nk,m)])])}})),{apis:{updateHex:function(t,e){var n,o;Jl.setValue(t,{hex:e.value}),n=t,o=Fb(e),a(n,o),f(o),c(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},ik=function(t,e){var n=YC.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),o=YC.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),i=function(t,e){var n,o,r=t.width,i=t.height,a=t.getContext("2d");null!==a&&(a.fillStyle=e,a.fillRect(0,0,r,i),(n=a.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=n,a.fillRect(0,0,r,i),(o=a.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=o,a.fillRect(0,0,r,i))};return Xf({factory:function(t){var a=r({x:0,y:0}),u=ac([em.config({find:S.some}),bp.config({})]);return YC.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:a},rounded:!1,components:[n,o],onChange:function(t,e,n){Ko(t,pw,{value:n})},onInit:function(t,e,n,o){i(n.element.dom,Mb(Pb))},sliderBehaviours:u})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element.dom,i(r,Mb(o))}},extraApis:{}})},ak=function(t,e){return Xf({name:"ColourPicker",configFields:[Le("dom"),nn("onValidHex",n),nn("onInvalidHex",n)],factory:function(n){var o,i,a,u,c,s=rk(t,e,n.onValidHex,n.onInvalidHex),l=ik(0,e),f={paletteRgba:dn(Pb)},m=gg(l.sketch({})),d=gg(s.sketch({})),p=function(t,e){m.getOpt(t).each((function(t){var n=Fb(e);f.paletteRgba.set(n),l.setRgba(t,n)}))},g=function(t,e){d.getOpt(t).each((function(t){s.updateHex(t,e)}))},h=function(t,e,n){U(n,(function(n){n(t,e)}))};return{uid:n.uid,dom:n.dom,components:[m.asSpec(),(a=e,u=YC.parts.spectrum({dom:{tag:"div",classes:[a("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=YC.parts.thumb({dom:{tag:"div",classes:[a("hue-slider-thumb")],attributes:{role:"presentation"}}}),YC.sketch({dom:{tag:"div",classes:[a("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[u,c],sliderBehaviours:ac([bp.config({})]),onChange:function(t,e,n){Ko(t,dw,{value:n})}})),d.asSpec()],behaviours:ac([dp("colour-picker-events",[rr(pw,(i=[g],function(t,e){var n,o,r,a,u,c,s,l,m,d=e.event.value,p=f.paletteRgba.get(),g=(a=r=0,u=(n=p).red/255,c=n.green/255,s=n.blue/255,l=Math.min(u,Math.min(c,s)),m=Math.max(u,Math.max(c,s)),l===m?fw(0,0,100*(a=l)):(r=60*((r=u===l?3:s===l?1:5)-(u===l?c-s:s===l?u-c:s-u)/(m-l)),o=(m-l)/m,a=m,fw(Math.round(r),Math.round(100*o),Math.round(100*a)))),v=fw(g.hue,d.x,100-d.y),b=Ab(v),y=kb(b);h(t,y,i)})),rr(dw,(o=[p,g],function(t,e){var n,r,i,a=e.event.value,u=(n=a.y,r=fw((100-n)/100*360,100,100),i=Ab(r),kb(i));h(t,u,o)}))]),em.config({find:function(t){return d.getOpt(t)}}),up.config({mode:"acyclic"})])}}})},uk=function(){return em.config({find:S.some})},ck=function(t){return em.config({find:t.getOpt})},sk=function(t){return em.config({find:function(e){return Ir(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},lk={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},fk=function(t){return lk[t]},mk=tinymce.util.Tools.resolve("tinymce.Resource"),dk=tinymce.util.Tools.resolve("tinymce.util.Tools"),pk=me([nn("preprocess",i),nn("postprocess",i)]),gk=function(t,e,n){return Jl.config(Ht({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},hk=function(t,e,n){return gk(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}))},vk=function(t,e){var n=Ie("RepresentingConfigs.memento processors",pk,e);return Jl.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=Jl.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);Jl.setValue(i,r)}}})},bk=gk,yk=function(t){return hk(t,Wr,Gr)},xk=function(t){return Jl.config({store:{mode:"memory",initialValue:t}})},wk=function(t,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){U(t,(function(t){t(e,n)}))}},r=function(t,e){var n;gv.isDisabled(t)||(n=e.event.raw,a(t,n.dataTransfer.files))},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,o){var r,i,a;Jl.setValue(n,(r=o,i=e,a=dk.explode(i.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),G(ut(r),(function(t){return H(a,(function(e){return Sn(t.name.toLowerCase(),"."+e.toLowerCase())}))})))),Ko(n,ex,{name:t.name})},u=gg({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ac([dp("input-file-events",[sr(yo()),sr(Eo())])])}),c=t.label.map((function(t){return tx(t,e)})),s=Wy.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ac([xk([]),uk(),gv.config({}),Ep.config({toggleClass:"dragenter",toggleOnExecute:!1}),dp("dropzone-events",[rr("dragenter",o([n,Ep.toggle])),rr("dragleave",o([n,Ep.toggle])),rr("dragover",n),rr("drop",o([n,r])),rr(bo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},pg.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){u.get(t).element.dom.click()},buttonBehaviours:ac([Yy.config({}),Wv(e.isDisabled),$v()])})]}]}}}});return qy(c,s,["tox-form__group--stretched"],[])},Ck=ii("alloy-fake-before-tabstop"),kk=ii("alloy-fake-after-tabstop"),Sk=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ac([bp.config({ignore:!0}),Yy.config({})])}},Ok=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Sk([Ck]),t,Sk([kk])],behaviours:ac([sk(1)])}},Dk=function(t,e){Ko(t,go(),{raw:{which:9,shiftKey:e}})},Tk=function(t,e){var n=e.element;Ni(n,Ck)?Dk(t,!0):Ni(n,kk)&&Dk(t,!1)},_k=function(t){return Ty(t,["."+Ck,"."+kk].join(","),s)},Ik=!($n().browser.isIE()||$n().browser.isEdge()),Ek=function(t,e){var n,o,r=Ik&&t.sandboxed,i=m(m({},t.label.map((function(t){return{title:t}})).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),a=(n=r,o=dn(""),{getValue:function(t){return o.get()},setValue:function(t,e){var r;n?Yr(t.element,"srcdoc",e):(Yr(t.element,"src","javascript:''"),(r=t.element.dom.contentWindow.document).open(),r.write(e),r.close()),o.set(e)}}),u=t.label.map((function(t){return tx(t,e)})),c=Wy.parts.field({factory:{sketch:function(t){return Ok({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:ac([Yy.config({}),bp.config({}),bk(S.none(),a.getValue,a.setValue)])})}}});return qy(u,c,["tox-form__group--stretched"],[])},Ak=function(t,e){return Mk(document.createElement("canvas"),t,e)},Fk=function(t){var e=Ak(t.width,t.height);return Rk(e).drawImage(t,0,0),e},Rk=function(t){return t.getContext("2d")},Mk=function(t,e,n){return t.width=e,t.height=n,t},Pk=function(t){return t.naturalWidth||t.width},Bk=function(t){return t.naturalHeight||t.height},Vk=window.Promise?window.Promise:(Hx=function(t){if("object"!=e(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Wx(t,$x(jk,this),$x(Nk,this))},Lx=window,Jx=Hx.immediateFn||"function"==typeof Lx.setImmediate&&Lx.setImmediate||function(t){return setTimeout(t,1)},$x=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.apply(e,n)}},Ux=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Wx=function(t,e,n){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,n(t))}))}catch(b){if(o)return;o=!0,n(b)}},Hx.prototype["catch"]=function(t){return this.then(null,t)},Hx.prototype.then=function(t,e){var n=this;return new Hx((function(o,r){zk.call(n,new Lk(t,e,o,r))}))},Hx.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.prototype.slice.call(1===t.length&&Ux(t[0])?t[0]:t);return new Hx((function(t,n){if(0===o.length)return t([]);for(var r=o.length,i=function i(a,u){try{if(u&&("object"==e(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),n)}o[a]=u,0==--r&&t(o)}catch(v){n(v)}},a=0;a<o.length;a++)i(a,o[a])}))},Hx.resolve=function(t){return t&&"object"==e(t)&&t.constructor===Hx?t:new Hx((function(e){e(t)}))},Hx.reject=function(t){return new Hx((function(e,n){n(t)}))},Hx.race=function(t){return new Hx((function(e,n){for(var o=0,r=t;o<r.length;o++)r[o].then(e,n)}))},Hx);function zk(t){var e=this;null!==this._state?Jx((function(){var n,o=e._state?t.onFulfilled:t.onRejected;if(null!==o){try{n=o(e._value)}catch(h){return void t.reject(h)}t.resolve(n)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function jk(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==e(t)||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void Wx($x(n,t),$x(jk,this),$x(Nk,this))}this._state=!0,this._value=t,Hk.call(this)}catch(h){Nk.call(this,h)}}function Nk(t){this._state=!1,this._value=t,Hk.call(this)}function Hk(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];zk.call(this,n)}this._deferreds=[]}function Lk(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var Jk,$k,Uk,Wk,Gk=function(t){return new Vk((function(e,n){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return S.none();for(var o=n[1],r=e[1],i=atob(r),a=i.length,u=Math.ceil(a/1024),c=new Array(u),s=0;s<u;++s){for(var l=1024*s,f=Math.min(1024+l,a),m=new Array(f-l),d=l,p=0;d<f;++p,++d)m[p]=i[d].charCodeAt(0);c[s]=new Uint8Array(m)}return S.some(new Blob(c,{type:o}))})(t).fold((function(){n("uri is not base64: "+t)}),e)}))},Xk=function(t,e,n){return e=e||"image/png",R(HTMLCanvasElement.prototype.toBlob)?new Vk((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):Gk(t.toDataURL(e,n))},Yk=function(t){return e=t,new Vk((function(t,n){var o=URL.createObjectURL(e),r=new Image,i=function(){r.removeEventListener("load",a),r.removeEventListener("error",u)},a=function(){i(),t(r)},u=function(){i(),n("Unable to load data of type "+e.type+": "+o)};r.addEventListener("load",a),r.addEventListener("error",u),r.src=o,r.complete&&setTimeout(a,0)})).then((function(t){Kk(t);var e=Ak(Pk(t),Bk(t));return Rk(e).drawImage(t,0,0),e}));var e},Kk=function(t){URL.revokeObjectURL(t.src)},qk=function(t,e,n){var o=e.type,i=r(o),a=r(n),u=function(e,n){return t.then((function(t){return r=n,o=(o=e)||"image/png",t.toDataURL(o,r);var o,r}))};return{getType:i,toBlob:function(){return Vk.resolve(e)},toDataURL:a,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return Xk(t,e,n)}))},toAdjustedDataURL:u,toAdjustedBase64:function(t,e){return u(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(Fk)}}},Zk=function(t,e){return Xk(t,e).then((function(e){return qk(Vk.resolve(t),e,t.toDataURL())}))},Qk=function(t){return e=t,new Vk((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})).then((function(e){return qk(Yk(t),t,e)}));var e},tS=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o},eS=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},nS=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],oS=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)o[a]=e[a+5*i];for(a=0;a<5;a++){for(var u=n=0;u<5;u++)n+=t[a+5*u]*o[u];r[a+5*i]=n}}return r},rS=function(t,e){return t.toCanvas().then((function(n){return iS(n,t.getType(),e)}))},iS=function(t,e,n){var o=Rk(t),r=function(t,e){for(var n,o,r,i,a=t.data,u=e[0],c=e[1],s=e[2],l=e[3],f=e[4],m=e[5],d=e[6],p=e[7],g=e[8],h=e[9],v=e[10],b=e[11],y=e[12],x=e[13],w=e[14],C=e[15],k=e[16],S=e[17],O=e[18],D=e[19],T=0;T<a.length;T+=4)n=a[T],o=a[T+1],r=a[T+2],i=a[T+3],a[T]=n*u+o*c+r*s+i*l+f,a[T+1]=n*m+o*d+r*p+i*g+h,a[T+2]=n*v+o*b+r*y+i*x+w,a[T+3]=n*C+o*k+r*S+i*O+D;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),Zk(t,e)},aS=function(t,e,n){var o=Rk(t),r=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),a=t.data,u=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var m=0,d=0,p=0,g=0;g<r;g++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+g-i,0,s-1)*c+v),y=n[g*r+h];m+=a[b]*y,d+=a[1+b]*y,p+=a[2+b]*y}var x=4*(l*c+f);u[x]=o(m,0,255),u[1+x]=o(d,0,255),u[2+x]=o(p,0,255)}return e}(o.getImageData(0,0,t.width,t.height),r=o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),Zk(t,e)},uS=function(t){return function(e,n){return rS(e,t(eS(),n))}},cS=(Jk=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return rS(t,Jk)}),sS=uS((function(t,e){return e=tS(255*e,-255,255),oS(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),lS=uS((function(t,e){var n;return e=tS(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?nS[e]:nS[Math.floor(e)]*(1-n)+nS[Math.floor(e)+1]*n)+127,oS(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),fS=($k=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=$k,(e=t).toCanvas().then((function(t){return aS(t,e.getType(),n)}));var e,n}),mS=(Uk=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=Rk(t),r=new Array(256),i=0;i<r.length;i++)r[i]=Uk(i,n);var a=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(a,0,0),Zk(t,e)}(n,t.getType(),e)}))}),dS=function t(e,n,o){var r=Pk(e),i=Bk(e),a=n/r,u=o/i,c=!1;(a<.5||2<a)&&(a=a<.5?.5:2,c=!0),(u<.5||2<u)&&(u=u<.5?.5:2,c=!0);var s=pS(e,a,u);return c?s.then((function(e){return t(e,n,o)})):s},pS=function(t,e,n){return new Vk((function(o){var r=Pk(t),i=Bk(t),a=Math.floor(r*e),u=Math.floor(i*n),c=Ak(a,u);Rk(c).drawImage(t,0,0,r,i,0,0,a,u),o(c)}))},gS=function(t,e,n){var o=Ak(t.width,t.height),r=Rk(o),i=0,a=0;return 90!==(n=n<0?360+n:n)&&270!==n||Mk(o,o.height,o.width),90!==n&&180!==n||(i=o.width),270!==n&&180!==n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),Zk(o,e)},hS=function(t,e,n){var o=Ak(t.width,t.height),r=Rk(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),Zk(o,e)},vS=function(t,e,n,o,r,i){var a=Ak(r,i);return Rk(a).drawImage(t,-n,-o),Zk(a,e)},bS=function(t){return cS(t)},yS=function(t){return fS(t)},xS=function(t,e){return mS(t,e)},wS=function(t,e,n,o){return rS(t,(r=eS(),a=n,u=o,i=tS(i=e,0,2),a=tS(a,0,2),u=tS(u,0,2),oS(r,[i,0,0,0,0,0,a,0,0,0,0,0,u,0,0,0,0,0,1,0,0,0,0,0,1])));var r,i,a,u},CS=function(t,e){return sS(t,e)},kS=function(t,e){return lS(t,e)},SS=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return hS(t,n.getType(),o)}));var n,o},OS=function(t,e,n,o,r){return a=e,u=n,c=o,s=r,(i=t).toCanvas().then((function(t){return vS(t,i.getType(),a,u,c,s)}));var i,a,u,c,s},DS=function(t,e,n){return r=e,i=n,(o=t).toCanvas().then((function(t){return dS(t,r,i).then((function(t){return Zk(t,o.getType())}))}));var o,r,i},TS=function(t,e){return o=e,(n=t).toCanvas().then((function(t){return gS(t,n.getType(),o)}));var n,o},_S=function(t,e){return m({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},IS=function(t,e){return _S(vg(t,e),{})},ES=function(t,e){return _S(vg(t,e),{behaviours:ac([mp.config({})])})},AS=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:ac([mp.config({})])}},FS=ii("toolbar.button.execute"),RS=((Wk={})[_o()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Wk),MS=ii("update-menu-text"),PS=ii("update-menu-icon"),BS=function(t,e,o){var r=dn(n),i=t.text.map((function(t){return gg(AS(t,e,o.providers))})),u=t.icon.map((function(t){return gg(ES(t,o.providers.icons))})),c=function(t,e){var n=Jl.getValue(t);return bp.focus(n),Ko(n,"keydown",{raw:e.event.raw}),iw.close(n),S.some(!0)},s=t.role.fold((function(){return{}}),(function(t){return{role:t}})),l=t.tooltip.fold((function(){return{}}),(function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}}));return gg(iw.sketch(m(m(m({},t.uid?{uid:t.uid}:{}),s),{dom:{tag:"button",classes:[e,e+"--select"].concat($(t.classes,(function(t){return e+"--"+t}))),attributes:m({},l)},components:Qv([u.map((function(t){return t.asSpec()})),i.map((function(t){return t.asSpec()})),S.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:vg("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:ac(p(t.dropdownBehaviours,[Wv((function(){return t.disabled||o.providers.isDisabled()})),$v(),aw.config({}),mp.config({}),dp("dropdown-events",[Kv(t,r),qv(t,r)]),dp("menubutton-update-display-text",[rr(MS,(function(t,e){i.bind((function(e){return e.getOpt(t)})).each((function(t){mp.set(t,[ma(o.providers.translate(e.event.text))])}))})),rr(PS,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){mp.set(t,[ES(e.event.icon,o.providers.icons)])}))}))])])),eventOrder:Ht(RS,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ac([up.config({mode:"special",onLeft:c,onRight:c})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:Ch(0,t.columns,t.presets)},fetch:function(e){return Sx(a(t.fetch,e))}}))).asSpec()},VS=function(t){return"separator"===t.type},zS={type:"separator"},jS=function(t,e){var n=Y(t,(function(t,n){return T(n)?""===n?t:"|"===n?0<t.length&&!VS(t[t.length-1])?t.concat([zS]):t:Bt(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return 0<n.length&&VS(n[n.length-1])&&n.pop(),n},NS=function(t,e){return Bt(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=HS(r,o),{item:n,menus:Ht(i.menus,Zt(n.value,i.items)),expansions:Ht(i.expansions,Zt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},HS=function(t,e){var n=jS(T(t)?t.split(" "):t,e);return X(n,(function(t,n){var o=function(t){if(VS(t))return t;var e=Pt(t,"value").getOrThunk((function(){return ii("generated-menu-item")}));return Ht({value:e},t)}(n),r=NS(o,e);return{menus:Ht(t.menus,r.menus),items:[r.item].concat(t.items),expansions:Ht(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},LS=function(t,e,n,o){var r=ii("primary-menu"),i=HS(t,n.shared.providers.menuItems());if(0===i.items.length)return S.none();var a=xy(r,i.items,e,n,o),u=It(i.menus,(function(t,o){return xy(o,t,e,n,!1)})),c=Ht(u,Zt(r,a));return S.from(tg.tieredData(r,c,i.expansions))},JS=function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)},setActive:function(e){var n=t.element;e?(Vi(n,"tox-tbtn--enabled"),Yr(n,"aria-pressed",!0)):(ji(n,"tox-tbtn--enabled"),Qr(n,"aria-pressed"))},isActive:function(){return Ni(t.element,"tox-tbtn--enabled")}}},$S=function(t,e,n,o){return BS({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o(LS(t,uh.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:JS,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yy.config({})]},e,n.shared)},US=function(t,e,n){return function(o){o($(t,(function(t){var o,r,i=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return m(m({type:t.type,active:!1},i),{onAction:function(t){var o=!t.isActive();t.setActive(o),r.storage.set(o),n.shared.getSink().each((function(t){e().getOpt(t).each((function(t){pc(t.element),Ko(t,rx,{name:r.name,value:r.storage.get()})}))}))},onSetup:(o=r=t,function(t){t.setActive(o.storage.get())})})})))}},WS=function(t,e,n,o,r,i){void 0===n&&(n=[]);var a=e.fold((function(){return{}}),(function(t){return{action:t}})),u=m({buttonBehaviours:ac([Wv((function(){return t.disabled||i.isDisabled()})),$v(),Yy.config({}),dp("button press",[or("click"),or("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=Ht(u,{dom:o});return Ht(c,{components:r})},GS=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return IS(t,n.icons)})),a=Qv([i]);return WS(t,e,o,r,a,n)},XS=function(t,e,n,o){void 0===o&&(o=[]);var r=GS(t,S.some(e),n,o);return pg.sketch(r)},YS=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),a=t.icon?t.icon.map((function(t){return IS(t,n.icons)})):S.none(),u=a.isSome()?Qv([a]):[],c=a.isSome()?{}:{innerHtml:i},s=p(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),l=m(m({tag:"button",classes:s},c),{attributes:{title:i}});return WS(t,e,o,l,u,n)},KS=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=YS(t,S.some(e),n,o,r);return pg.sketch(i)},qS=function(t,e){return function(n){"custom"===e?Ko(n,rx,{name:t,value:{}}):"submit"===e?Yo(n,ix):"cancel"===e?Yo(n,ox):console.error("Unknown button type: ",e)}},ZS=function(t,e,o){if("menu"===e){var r=t,i=m(m({},t),{onSetup:function(e){return e.setDisabled(t.disabled),n},fetch:US(r.items,(function(){return a}),o)}),a=gg($S(i,"tox-tbtn",o,S.none()));return a.asSpec()}if("custom"===(s=e)||"cancel"===s||"submit"===s){var u=qS(t.name,e),c=m(m({},t),{borderless:!1});return KS(c,u,o.shared.providers,[])}var s;console.error("Unknown footer button type: ",e)},QS=function(t,e){var n,o,r=qS(t.name,"custom");return n=S.none(),o=Wy.parts.field(m({factory:pg},YS(t,S.some(r),e,[xk(""),uk()]))),qy(n,o,[],[])},tO=r([nn("field1Name","field1"),nn("field2Name","field2"),vu("onLockedChange"),du(["lockClass"]),nn("locked",!1),Gl("coupledFieldBehaviours",[em,Jl])]),eO=function(t,e){return xf({factory:Wy,name:t,overrides:function(t){return{fieldBehaviours:ac([dp("coupled-input-behaviour",[rr(vo(),(function(n){Mf(n,t,e).bind(em.getCurrent).each((function(e){Mf(n,t,"lock").each((function(o){Ep.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})},nO=r([eO("field1","field2"),eO("field2","field1"),xf({factory:pg,schema:[Le("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:ac([Ep.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),oO=Yf({name:"FormCoupledInputs",configFields:tO(),partFields:nO(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Xl(t.coupledFieldBehaviours,[em.config({find:S.some}),Jl.config({store:{mode:"manual",getValue:function(e){var n=jf(e,t,["field1","field2"]),o={};return o[t.field1Name]=Jl.getValue(n.field1()),o[t.field2Name]=Jl.getValue(n.field2()),o},setValue:function(e,n){var o=jf(e,t,["field1","field2"]);Vt(n,t.field1Name)&&Jl.setValue(o.field1(),n[t.field1Name]),Vt(n,t.field2Name)&&Jl.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Mf(e,t,"field1")},getField2:function(e){return Mf(e,t,"field2")},getLock:function(e){return Mf(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),rO=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return ft.error(t);var n=parseFloat(e[1]),o=e[2];return ft.value({value:n,unit:o})},iO=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?S.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?S.some(t.value):S.some(t.value/n[t.unit]*n[e]):S.none()},aO=function(t){return S.none()},uO=function(t,e){var n,o,r,i=rO(t).toOptional(),a=rO(e).toOptional();return o=a,r=function(t,e){return iO(t,e.unit).map((function(t){return e.value/t})).map((function(t){return n=t,o=e.unit,function(t){return iO(t,o).map((function(t){return{value:t*n,unit:o}}))};var n,o})).getOr(aO)},((n=i).isSome()&&o.isSome()?S.some(r(n.getOrDie(),o.getOrDie())):S.none()).getOr(aO)},cO=function(t,e){var n=aO,o=ii("ratio-event"),r=oO.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:vg("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:vg("unlock",e.icons)}}],buttonBehaviours:ac([gv.config({disabled:function(){return t.disabled||e.isDisabled()}}),$v(),Yy.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return Wy.parts.field({factory:px,inputClasses:["tox-textfield"],inputBehaviours:ac([gv.config({disabled:function(){return t.disabled||e.isDisabled()}}),$v(),Yy.config({}),dp("size-input-events",[rr(mo(),(function(t,e){Ko(t,o,{isField1:n})})),rr(bo(),(function(e,n){Ko(e,ex,{name:t.name})}))])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=oO.parts.field1(i([Wy.parts.label(u("Width")),a(!0)])),s=oO.parts.field2(i([Wy.parts.label(u("Height")),a(!1)]));return oO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,i([u("&nbsp;"),r])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,o){rO(Jl.getValue(t)).each((function(t){n(t).each((function(t){var n,o,r,i;Jl.setValue(e,(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(i=(n=t).value.toFixed((o=n.unit)in r?r[o]:1)).indexOf(".")&&(i=i.replace(/\.?0*$/,"")),i+n.unit))}))}))},coupledFieldBehaviours:ac([gv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){oO.getField1(t).bind(Wy.getField).each(gv.disable),oO.getField2(t).bind(Wy.getField).each(gv.disable),oO.getLock(t).each(gv.disable)},onEnabled:function(t){oO.getField1(t).bind(Wy.getField).each(gv.enable),oO.getField2(t).bind(Wy.getField).each(gv.enable),oO.getLock(t).each(gv.enable)}}),$v(),dp("size-input-events2",[rr(o,(function(t,e){var o=e.event.isField1,r=o?oO.getField1(t):oO.getField2(t),i=o?oO.getField2(t):oO.getField1(t),a=r.map(Jl.getValue).getOr(""),u=i.map(Jl.getValue).getOr("");n=uO(a,u)}))])])})},sO={undo:r(ii("undo")),redo:r(ii("redo")),zoom:r(ii("zoom")),back:r(ii("back")),apply:r(ii("apply")),swap:r(ii("swap")),transform:r(ii("transform")),tempTransform:r(ii("temp-transform")),transformApply:r(ii("transform-apply"))},lO=r("save-state"),fO=r("disable"),mO=r("enable"),dO={formActionEvent:rx,saveState:lO,disable:fO,enable:mO},pO=function(t,e){var o=function(t,n,o,r){return gg(KS({name:t,text:t,disabled:o,primary:r,icon:S.none(),borderless:!1},n,e))},i=function(t,n,o,r){return gg(XS({name:t,icon:S.some(t),tooltip:S.some(n),disabled:r,primary:!1,borderless:!1},o,e))},a=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(gv)&&gv.disable(n)}))},u=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(gv)&&gv.enable(n)}))},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},s=n,l=function(t,e,n){Ko(t,e,n)},f=function(t){return Yo(t,dO.disable())},m=function(t){return Yo(t,dO.enable())},d=function(t,e){f(t),l(t,sO.transform(),{transform:e}),m(t)},p=function(t){return function(){Q.getOpt(t).each((function(t){mp.set(t,[q])}))}},g=function(t,e){f(t),l(t,sO.transformApply(),{transform:e,swap:p(t)}),m(t)},h=function(){return o("Back",(function(t){return l(t,sO.back(),{swap:p(t)})}),!1,!1)},v=function(){return gg({dom:{tag:"div",classes:["tox-spacer"]},behaviours:ac([gv.config({})])})},b=function(){return o("Apply",(function(t){return l(t,sO.apply(),{swap:p(t)})}),!0,!0)},y=[h(),v(),o("Apply",(function(e){g(e,(function(e){var n=t.getRect();return OS(e,n.x,n.y,n.w,n.h)})),t.hideCrop()}),!1,!0)],x=Ly.sketch({dom:c,components:y.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-crop-buttons-events",[rr(dO.disable(),(function(t,e){a(y,t)})),rr(dO.enable(),(function(t,e){u(y,t)}))])])}),w=gg(cO({name:"size",label:S.none(),constrain:!0,disabled:!1},e)),C=[h(),v(),w,v(),o("Apply",(function(t){w.getOpt(t).each((function(e){var n,o,r=Jl.getValue(e),i=parseInt(r.width,10),a=parseInt(r.height,10),u=(n=i,o=a,function(t){return DS(t,n,o)});g(t,u)}))}),!1,!0)],k=Ly.sketch({dom:c,components:C.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-resize-buttons-events",[rr(dO.disable(),(function(t,e){a(C,t)})),rr(dO.enable(),(function(t,e){u(C,t)}))])])}),O=function(t,e){return function(n){return t(n,e)}},D=O(SS,"h"),T=O(SS,"v"),_=O(TS,-90),I=O(TS,90),E=function(t,e){var n,o;o=e,f(n=t),l(n,sO.tempTransform(),{transform:o}),m(n)},A=[h(),v(),i("flip-horizontally","Flip horizontally",(function(t){E(t,D)}),!1),i("flip-vertically","Flip vertically",(function(t){E(t,T)}),!1),i("rotate-left","Rotate counterclockwise",(function(t){E(t,_)}),!1),i("rotate-right","Rotate clockwise",(function(t){E(t,I)}),!1),v(),b()],F=Ly.sketch({dom:c,components:A.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-fliprotate-buttons-events",[rr(dO.disable(),(function(t,e){a(A,t)})),rr(dO.enable(),(function(t,e){u(A,t)}))])])}),R=function(t,n,o,i,a){var u=YC.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=YC.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=YC.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return gg(YC.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:a,getInitialValue:r({x:i})},components:[u,c,s],sliderBehaviours:ac([bp.config({})]),onChoose:n}))},M=function(t,e,n,o,r){return[h(),(i=e,R(t,(function(t,e,n){var o=O(i,n.x/100);d(t,o)}),n,o,r)),b()];var i},P=function(t,e,n,o,r){var i=M(t,e,n,o,r);return Ly.sketch({dom:c,components:i.map((function(t){return t.asSpec()})),containerBehaviours:ac([dp("image-tools-filter-panel-buttons-events",[rr(dO.disable(),(function(t,e){a(i,t)})),rr(dO.enable(),(function(t,e){u(i,t)}))])])})},B=[h(),v(),b()],V=Ly.sketch({dom:c,components:B.map((function(t){return t.asSpec()}))}),z=P("Brightness",CS,-100,0,100),j=P("Contrast",kS,-100,0,100),N=P("Gamma",xS,-100,0,100),H=function(t){return R(t,(function(t,e,n){var o=L.getOpt(t),r=$.getOpt(t),i=J.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r,i,a,u=Jl.getValue(e).x/100,c=Jl.getValue(o).x/100,s=Jl.getValue(n).x/100,l=(r=u,i=c,a=s,function(t){return wS(t,r,i,a)});d(t,l)}))}))}))}),0,100,200)},L=H("R"),J=H("G"),$=H("B"),U=[h(),L,J,$,b()],W=Ly.sketch({dom:c,components:U.map((function(t){return t.asSpec()}))}),G=function(t,e,n){return function(o){l(o,sO.swap(),{transform:e,swap:function(){Q.getOpt(o).each((function(e){mp.set(e,[t]),n(e)}))}})}},X=S.some(yS),Y=S.some(bS),K=[i("crop","Crop",G(x,S.none(),(function(e){t.showCrop()})),!1),i("resize","Resize",G(k,S.none(),(function(e){w.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;Jl.setValue(e,{width:o,height:r})}))})),!1),i("orientation","Orientation",G(F,S.none(),s),!1),i("brightness","Brightness",G(z,S.none(),s),!1),i("sharpen","Sharpen",G(V,X,s),!1),i("contrast","Contrast",G(j,S.none(),s),!1),i("color-levels","Color levels",G(W,S.none(),s),!1),i("gamma","Gamma",G(N,S.none(),s),!1),i("invert","Invert",G(V,Y,s),!1)],q=Ly.sketch({dom:c,components:K.map((function(t){return t.asSpec()}))}),Z=Ly.sketch({dom:{tag:"div"},components:[q],containerBehaviours:ac([mp.config({})])}),Q=gg(Z);return{memContainer:Q,getApplyButton:function(t){return Q.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},gO=tinymce.util.Tools.resolve("tinymce.geom.Rect"),hO=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),vO=tinymce.util.Tools.resolve("tinymce.util.Observable"),bO=tinymce.util.Tools.resolve("tinymce.util.VK"),yO=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function xO(t,e){var n,o,r,i,a=e.document||document,u=a.getElementById(e.handle||t),c=function(t){if(yO(t),t.button!==o)return s(t);t.deltaX=t.screenX-r,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},s=function t(o){yO(o),hO(a).off("mousemove touchmove",c).off("mouseup touchend",t),n.remove(),e.stop&&e.stop(o)};return hO(u).on("mousedown touchstart",(function(t){var l,f,m,d,p,g,h,v,b,y,x=(l=a,f=Math.max,m=l.documentElement,d=l.body,p=f(m.scrollWidth,d.scrollWidth),g=f(m.clientWidth,d.clientWidth),h=f(m.offsetWidth,d.offsetWidth),v=f(m.scrollHeight,d.scrollHeight),b=f(m.clientHeight,d.clientHeight),{width:p<h?g:p,height:v<f(m.offsetHeight,d.offsetHeight)?b:v});yO(t),t.preventDefault(),o=t.button;var w=u;r=t.screenX,i=t.screenY,y=window.getComputedStyle?window.getComputedStyle(w,null).getPropertyValue("cursor"):w.runtimeStyle.cursor,n=hO("<div></div>").css({position:"absolute",top:0,left:0,width:x.width,height:x.height,zIndex:2147483647,opacity:1e-4,cursor:y}).appendTo(a.body),hO(a).on("mousemove touchmove",c).on("mouseup touchend",s),e.start(t)})),{destroy:function(){hO(u).off()}}}var wO,CO,kO,SO=0,OO=function(t,e,n,o,r){var i,a="tox-",u="tox-crid-"+SO++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],l=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},f=function(e,o,r,i){var a,u=o.x,c=o.y,s=o.w,f=o.h;u+=r*e.deltaX,c+=i*e.deltaY,(s+=r*e.deltaW)<20&&(s=20),(f+=i*e.deltaH)<20&&(f=20),a=t=gO.clamp({x:u,y:c,w:s,h:f},n,"move"===e.name),a=l(n,a),g.fire("updateRect",{rect:a}),p(a)},m=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),hO("#"+u+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};dk.each(c,(function(e){hO("#"+u+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},d=function(e){m(t=e)},p=function(t){var e,o;d((e=n,{x:(o=t).x+e.x,y:o.y+e.y,w:o.w,h:o.h}))};hO('<div id="'+u+'" class="'+a+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),dk.each(s,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t+'"class="'+a+'croprect-block" style="display: none" data-mce-bogus="all">')})),dk.each(c,(function(t){hO("#"+u,o).append('<div id="'+u+"-"+t.name+'" class="'+a+"croprect-handle "+a+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),i=dk.map(c,(function(e){var n;return xO(u,{document:o.ownerDocument,handle:u+"-"+e.name,start:function(){n=t},drag:function(t){f(e,n,t.deltaX,t.deltaY)}})})),m(t),hO(o).on("focusin focusout",(function(t){hO(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),hO(o).on("keydown",(function(e){var n;dk.each(c,(function(t){if(e.target.id===u+"-"+t.name)return n=t,!1}));var o=function(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),f(n,o,r,i)};switch(e.keyCode){case bO.LEFT:o(e,0,t,-10,0);break;case bO.RIGHT:o(e,0,t,10,0);break;case bO.UP:o(e,0,t,0,-10);break;case bO.DOWN:o(e,0,t,0,10);break;case bO.ENTER:case bO.SPACEBAR:e.preventDefault(),r()}}));var g=dk.extend({toggleVisibility:function(t){var e=dk.map(c,(function(t){return"#"+u+"-"+t.name})).concat(dk.map(s,(function(t){return"#"+u+"-"+t}))).join(",");t?hO(e,o).show():hO(e,o).hide()},setClampRect:function(e){n=e,m(t)},setRect:d,getInnerRect:function(){return l(n,t)},setInnerRect:p,setViewPortRect:function(n){e=n,m(t)},destroy:function(){dk.each(i,(function(t){t.destroy()})),i=[]}},vO);return g},DO=function(t){var e=gg({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=dn(1),r=dn(S.none()),i=dn({x:0,y:0,w:1,h:1}),a=dn({x:0,y:0,w:1,h:1}),u=function(t,n){l.getOpt(t).each((function(t){var a=o.get(),u=Ta(t.element),c=ya(t.element),s=n.dom.naturalWidth*a,l=n.dom.naturalHeight*a,f=Math.max(0,u/2-s/2),m=Math.max(0,c/2-l/2),d={left:f.toString()+"px",top:m.toString()+"px",width:s.toString()+"px",height:l.toString()+"px",position:"absolute"};Ki(n,d),e.getOpt(t).each((function(t){Ki(t.element,d)})),r.get().each((function(t){var e=i.get();t.setRect({x:e.x*a+f,y:e.y*a+m,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:m,w:s,h:l}),t.setViewPortRect({x:0,y:0,w:u,h:c})}))}))},c=function(t,e){var n,r=gn.fromTag("img");return Yr(r,"src",e),n=r.dom,new Mg((function(t){var e=function e(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then((function(){return l.getOpt(t).map((function(t){var e=da({element:r});mp.replaceAt(t,1,S.some(e));var n=a.get(),c={x:0,y:0,w:r.dom.naturalWidth,h:r.dom.naturalHeight};a.set(c);var s,f,m=gO.inflate(c,-20,-20);return i.set(m),n.w===c.w&&n.h===c.h||(s=t,f=r,l.getOpt(s).each((function(t){var e=Ta(t.element),n=ya(t.element),r=f.dom.naturalWidth,i=f.dom.naturalHeight,a=Math.min(e/r,n/i);1<=a?o.set(1):o.set(a)}))),u(t,r),r}))}))},s=Ly.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:ac([dp("image-panel-crop-events",[fr((function(t){l.getOpt(t).each((function(t){var e=t.element.dom,a=OO({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,n);a.toggleVisibility(!1),a.on("updateRect",(function(t){var e=t.rect,n=o.get(),r={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};i.set(r)})),r.set(S.some(a))}))}))])])}],containerBehaviours:ac([mp.config({}),dp("image-panel-events",[fr((function(e){c(e,t)}))])])}),l=gg(s);return{memContainer:l,updateSrc:c,zoom:function(t,e){var n=o.get(),r=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);o.set(r),l.getOpt(t).each((function(t){var e=t.components()[1].element;u(t,e)}))},showCrop:function(){r.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){r.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return i.get()},getMeasurements:function(){var t=a.get();return{width:t.w,height:t.h}}}},TO=function(t,e,n,o,r){return XS({name:t,icon:S.some(e),disabled:n,tooltip:S.some(t),primary:!1,borderless:!1},o,r)},_O=function(t,e){e?gv.enable(t):gv.disable(t)},IO=function(t){var e,o,r,i,a=dn(t),u=dn(S.none()),c=(o=-1,{data:e=[],add:function(t){var n=e.splice(++o);return e.push(t),{state:t,removed:n}},undo:function(){if(r())return e[--o]},redo:function(){if(i())return e[++o]},canUndo:r=function(){return 0<o},canRedo:i=function(){return-1!==o&&o<e.length-1}});c.add(t);var s=function(t){a.set(t)},l=function(t){return{blob:t,url:URL.createObjectURL(t)}},f=function(t){URL.revokeObjectURL(t.url)},m=function(){u.get().each(f),u.set(S.none())},d=function(t){var e=l(t);s(e);var n,o=c.add(e).removed;return n=o,dk.each(n,f),e.url};return{getBlobState:function(){return a.get()},setBlobState:s,addBlobState:d,getTempState:function(){return u.get().fold((function(){return a.get()}),(function(t){return t}))},updateTempState:function(t){var e=l(t);return m(),u.set(S.some(e)),e.url},addTempState:function(t){var e=l(t);return u.set(S.some(e)),e.url},applyTempState:function(t){return u.get().fold(n,(function(e){d(e.blob),t()}))},destroyTempState:m,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}},EO=function(t,e){var o,r,i,a=IO(t.currentState),u=function(t){var e=a.getHistoryStates();h.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Ko(t,dO.formActionEvent,{name:dO.saveState(),value:e.undoEnabled})},c=function(t){return t.toBlob()},s=function(t){Ko(t,dO.formActionEvent,{name:dO.disable(),value:{}})},l=function(t){v.getApplyButton(t).each((function(t){gv.enable(t)})),Ko(t,dO.formActionEvent,{name:dO.enable(),value:{}})},f=function(t,e){return s(t),g.updateSrc(t,e)},m=function(t,e,n,o,r){return s(t),Qk(e).then(n).then(c).then(o).then((function(e){return f(t,e).then((function(e){return u(t),r(),l(t),e}))}))["catch"]((function(e){return console.log(e),l(t),e}))},d=function(t,e,n){var o=a.getBlobState().blob;m(t,o,e,(function(t){return a.updateTempState(t)}),n)},p=function(t){var e=a.getBlobState().url;return a.destroyTempState(),u(t),e},g=DO(t.currentState.url),h=(r=gg(TO("Undo","undo",!0,(function(t){Ko(t,sO.undo(),{direction:1})}),o=e)),i=gg(TO("Redo","redo",!0,(function(t){Ko(t,sO.redo(),{direction:1})}),o)),{container:Ly.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[r.asSpec(),i.asSpec(),TO("Zoom in","zoom-in",!1,(function(t){Ko(t,sO.zoom(),{direction:1})}),o),TO("Zoom out","zoom-out",!1,(function(t){Ko(t,sO.zoom(),{direction:-1})}),o)]}),updateButtonUndoStates:function(t,e,n){r.getOpt(t).each((function(t){_O(t,e)})),i.getOpt(t).each((function(t){_O(t,n)}))}}),v=pO(g,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),g.memContainer.asSpec(),h.container],behaviours:ac([Jl.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),dp("image-tools-events",[rr(sO.undo(),(function(t,e){var n=a.undo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.redo(),(function(t,e){var n=a.redo();f(t,n).then((function(e){l(t),u(t)}))})),rr(sO.zoom(),(function(t,e){var n=e.event.direction;g.zoom(t,n)})),rr(sO.back(),(function(t,e){var n,o;o=p(n=t),f(n,o).then((function(t){l(n)})),(0,e.event.swap)(),g.hideCrop()})),rr(sO.apply(),(function(t,e){a.applyTempState((function(){p(t),(0,e.event.swap)()}))})),rr(sO.transform(),(function(t,e){return d(t,e.event.transform,n)})),rr(sO.tempTransform(),(function(t,e){return o=t,r=e.event.transform,i=a.getTempState().blob,void m(o,i,r,(function(t){return a.addTempState(t)}),n);var o,r,i})),rr(sO.transformApply(),(function(t,e){return n=t,o=e.event.transform,r=e.event.swap,i=a.getBlobState().blob,void m(n,i,o,(function(t){var e=a.addBlobState(t);return p(n),e}),r);var n,o,r,i})),rr(sO.swap(),(function(t,e){var n;n=t,h.updateButtonUndoStates(n,!1,!1);var o=e.event.transform,r=e.event.swap;o.fold((function(){r()}),(function(e){d(t,e,r)}))}))]),uk()])}},AO=function(t){return!Bt(t,"items")},FO="data-value",RO=function t(e,n,o,r){return $(o,(function(o){return AO(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===r,onAction:function(){Jl.setValue(e,o.value),Ko(e,ex,{name:n}),bp.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:function(){return t(e,n,o.items,r)}}}))},MO=function t(e,n){return ct(e,(function(e){return AO(e)?qf(e.value===n,e):t(e.items,n)}))},PO=Xf({name:"HtmlSelect",configFields:[Le("options"),$l("selectBehaviours",[bp,Jl]),nn("selectClasses",[]),nn("selectAttributes",{}),Ke("data")],factory:function(t,e){var n=$(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return Zt("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:Wl(t.selectBehaviours,[bp.config({}),Jl.config({store:m({mode:"manual",getValue:function(t){return ra(t.element)},setValue:function(e,n){K(t.options,(function(t){return t.value===n})).isSome()&&ia(e.element,n)}},o)})])}}}),BO=function(t,e){var n=t.label.map((function(t){return tx(t,e)})),o=[gv.config({disabled:function(){return t.disabled||e.isDisabled()}}),$v(),up.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return Yo(t,ix),S.some(!0)}}),dp("textfield-change",[rr(vo(),(function(e,n){Ko(e,ex,{name:t.name})})),rr(Do(),(function(e,n){Ko(e,ex,{name:t.name})}))]),Yy.config({})],i=t.validation.map((function(t){return Px.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Jl.getValue(e),o=t.validator(n);return Ox(!0===o?ft.value(n):ft.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),a=t.placeholder.fold(r({}),(function(t){return{placeholder:e.translate(t)}})),u=t.inputMode.fold(r({}),(function(t){return{inputmode:t}})),c=m(m({},a),u),s=Wy.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:ac(Z([o,i])),selectOnFocus:!1,factory:px}),l=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[gv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Wy.getField(t).each(gv.disable)},onEnabled:function(t){Wy.getField(t).each(gv.enable)}}),$v()];return qy(n,s,l,f)},VO=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return er([rr(t.event,n),mr((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[rr(t,(function(){return e.cancel()}))]})).getOr([])))}}),zO=function(t){var e=dn(null);return Ci({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},jO=Object.freeze({__proto__:null,throttle:zO,init:function(t){return t.stream.streams.state(t)}}),NO=[Je("stream",Fe("mode",{throttle:[Le("delay"),nn("stopEvent",!0),yu("streams",{setup:function(t,e){var n=t.stream,o=kg(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:zO})]})),nn("event","input"),Ke("cancelEvent"),vu("onStream")],HO=cc({fields:NO,name:"streaming",active:VO,state:jO}),LO=function(t,e,n){var o=Jl.getValue(n);Jl.setValue(e,o),$O(e)},JO=function(t,e){var n=t.element,o=ra(n),r=n.dom;"number"!==Kr(n,"type")&&e(r,o)},$O=function(t){JO(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},UO=function(t,e,n){if(t.selectsOver){var o=Jl.getValue(e),r=t.getDisplayText(o),i=Jl.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?S.some((function(){var t,o;LO(0,e,n),t=e,o=r.length,JO(t,(function(t,e){return t.setSelectionRange(o,e.length)}))})):S.none()}return S.none()},WO=r("alloy.typeahead.itemexecute"),GO=r([Ke("lazySink"),Le("fetch"),nn("minChars",5),nn("responseTime",1e3),gu("onOpen"),nn("getHotspot",S.some),nn("getAnchorOverrides",r({})),nn("layouts",S.none()),nn("eventOrder",{}),fn("model",{},[nn("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),nn("selectsOver",!0),nn("populateFromBrowse",!0)]),gu("onSetValue"),hu("onExecute"),gu("onItemExecute"),nn("inputClasses",[]),nn("inputAttributes",{}),nn("inputStyles",{}),nn("matchWidth",!0),nn("useMinWidth",!1),nn("dismissOnBlur",!0),du(["openClass"]),Ke("initialData"),$l("typeaheadBehaviours",[bp,Jl,HO,up,Ep,zx]),mn("previewing",(function(){return dn(!0)}))].concat(fx()).concat(nw())),XO=r([wf({schema:[mu()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){UO(t.model,o,n).fold((function(){return mm.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&LO(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return Ko(t,WO(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&LO(t.model,e,n)}))}}}})]),YO=Yf({name:"Typeahead",configFields:GO(),partFields:XO(),factory:function(t,e,o,r){var i=function(e,o,i){t.previewing.set(!1);var a=zx.getCoupled(e,"sandbox");kl.isOpen(a)?em.getCurrent(a).each((function(t){mm.getHighlighted(t).fold((function(){i(t)}),(function(){tr(a,t.element,"keydown",o)}))})):Xx(t,u(e),e,a,r,(function(t){em.getCurrent(t).each(i)}),vx.HighlightFirst).get(n)},a=mx(t),u=function(t){return function(e){return e.map((function(e){var n=Mt(e.menus),o=Q(n,(function(t){return G(t.items,(function(t){return"item"===t.type}))}));return Jl.getState(t).update($(o,(function(t){return t.data}))),e}))}},c=[bp.config({}),Jl.config({onSetValue:t.onSetValue,store:m({mode:"dataset",getDataKey:function(t){return ra(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){ia(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return Zt("initialValue",t)})).getOr({}))}),HO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,o){var i,a=zx.getCoupled(e,"sandbox");bp.isFocused(e)&&ra(e.element).length>=t.minChars&&(i=em.getCurrent(a).bind((function(t){return mm.getHighlighted(t).map(Jl.getValue)})),t.previewing.set(!0),Xx(t,u(e),e,a,r,(function(e){em.getCurrent(a).each((function(e){i.fold((function(){t.model.selectsOver&&mm.highlightFirst(e)}),(function(t){mm.highlightBy(e,(function(e){return Jl.getValue(e).value===t.value})),mm.getHighlighted(e).orThunk((function(){return mm.highlightFirst(e),S.none()}))}))}))}),vx.HighlightFirst).get(n))},cancelEvent:Ro()}),up.config({mode:"special",onDown:function(t,e){return i(t,e,mm.highlightFirst),S.some(!0)},onEscape:function(t){var e=zx.getCoupled(t,"sandbox");return kl.isOpen(e)?(kl.close(e),S.some(!0)):S.none()},onUp:function(t,e){return i(t,e,mm.highlightLast),S.some(!0)},onEnter:function(e){var n=zx.getCoupled(e,"sandbox"),o=kl.isOpen(n);if(o&&!t.previewing.get())return em.getCurrent(n).bind((function(t){return mm.getHighlighted(t)})).map((function(t){return Ko(e,WO(),{item:t}),!0}));var r=Jl.getValue(e);return Yo(e,Ro()),t.onExecute(n,e,r),o&&kl.close(n),S.some(!0)}}),Ep.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),zx.config({others:{sandbox:function(e){return tw(t,e,{onOpen:function(){return Ep.on(e)},onClose:function(){return Ep.off(e)}})}}}),dp("typeaheadevents",[pr((function(e){var o=n;Kx(t,u(e),e,r,o,vx.HighlightFirst).get(n)})),rr(WO(),(function(e,n){var o=zx.getCoupled(e,"sandbox");LO(t.model,e,n.event.item),Yo(e,Ro()),t.onItemExecute(e,o,n.event.item,Jl.getValue(e)),kl.close(o),$O(e)}))].concat(t.dismissOnBlur?[rr(Oo(),(function(t){var e=zx.getCoupled(t,"sandbox");hc(e.element).isNone()&&kl.close(e)}))]:[]))];return{uid:t.uid,dom:dx(Ht(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:m(m({},a),Wl(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),KO=function t(e){return m(m({},e),{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return Ox(ft.error(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(n,o){return t(Sx((function(t){var r=!1,i=setTimeout((function(){r=!0,t(ft.error(o()))}),n);e.get((function(e){r||(clearTimeout(i),t(e))}))})))}})},qO=function(t){return KO(Sx(t))},ZO=qO,QO={type:"separator"},tD=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:n}},eD=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:n}},nD=function(t,e){return o=t,n=G(e,(function(t){return t.type===o})),$(n,tD);var n,o},oD=function(t,e){var n=t.toLowerCase();return G(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return kn(e.toLowerCase(),n)||kn(t.value.toLowerCase(),n)}))},rD=function(t,e,n){var o=Jl.getValue(e),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var o,i,a,u,c=oD(r,(o=n.getHistory(t),$(o,(function(t){return eD(t,t)}))));return"file"===t?(i=[c,oD(r,nD("header",e.targets)),oD(r,Z([(u=e,S.from(u.anchorTop).map((function(t){return eD("<top>",t)})).toArray()),nD("anchor",e.targets),(a=e,S.from(a.anchorBottom).map((function(t){return eD("<bottom>",t)})).toArray())]))],Y(i,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(QO,e)}),[])):c}))},iD=ii("aria-invalid"),aD=function(t,e,o){var r,i,a,u,c,s=e.shared.providers,l=function(e){var n=Jl.getValue(e);o.addToHistory(n.value,t.filetype)},f=Wy.parts.field({factory:YO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":iD,type:"url"},minChars:0,responseTime:0,fetch:function(n){var r=rD(t.filetype,n,o),i=LS(r,uh.BUBBLE_TO_SANDBOX,e,!1);return Ox(i)},getHotspot:function(t){return b.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Px)&&Px.run(t).get(n)},typeaheadBehaviours:ac(Z([o.getValidationHandler().map((function(e){return Px.config({getRoot:function(t){return Or(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){p.getOpt(t).each((function(t){Yr(t.element,"title",s.translate(e))}))}},validator:{validate:function(n){var o=Jl.getValue(n);return ZO((function(n){e({type:t.filetype,url:o.value},(function(t){var e,o;"invalid"===t.status?(e=ft.error(t.message),n(e)):(o=ft.value(t.message),n(o))}))}))},validateOnLoad:!1}})})).toArray(),[gv.config({disabled:function(){return t.disabled||s.isDisabled()}}),Yy.config({}),dp("urlinput-events",Z(["file"===t.filetype?[rr(vo(),(function(e){Ko(e,ex,{name:t.name})}))]:[],[rr(bo(),(function(e){Ko(e,ex,{name:t.name}),l(e)})),rr(Do(),(function(e){Ko(e,ex,{name:t.name}),l(e)}))]]))]])),eventOrder:((r={})[vo()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:Ch(0,0,"normal")},onExecute:function(t,e,n){Ko(e,ix,{})},onItemExecute:function(e,n,o,r){l(e),Ko(e,ex,{name:t.name})}}),d=t.label.map((function(t){return tx(t,s)})),p=gg((i="invalid",a=S.some(iD),void 0===(u="warning")&&(u=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:vg(u,s.icons),attributes:m({title:s.translate(c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))}})),g=gg({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[p.asSpec()]}),h=o.getUrlPicker(t.filetype),v=ii("browser.url.event"),b=gg({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,g.asSpec()],behaviours:ac([gv.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),y=gg(KS({name:t.name,icon:S.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return Yo(t,v)}),s,[],["tox-browse-url"]));return Wy.sketch({dom:Qy([]),components:d.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Z([[b.asSpec()],h.map((function(){return y.asSpec()})).toArray()])}]),fieldBehaviours:ac([gv.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Wy.getField(t).each(gv.disable),y.getOpt(t).each(gv.disable)},onEnabled:function(t){Wy.getField(t).each(gv.enable),y.getOpt(t).each(gv.enable)}}),$v(),dp("url-input-events",[rr(v,(function(e){em.getCurrent(e).each((function(n){var o=Jl.getValue(n),r=m({fieldname:t.name},o);h.each((function(o){o(r).get((function(o){Jl.setValue(n,o),Ko(e,ex,{name:t.name})}))}))}))}))])])})},uD=function(t){return function(e,n,o){return Pt(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}},cD={bar:uD((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$(n.items,o.interpreter)};var n,o})),collection:uD((function(t,e){return lx(t,e.shared.providers)})),alertbanner:uD((function(t,e){return n=t,o=e.shared.providers,Ly.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[pg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:vg(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){Ko(t,rx,{name:"alert-banner",value:n.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o})),input:uD((function(t,e){return n=t,o=e.shared.providers,BO({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:S.none(),maximized:n.maximized},o);var n,o})),textarea:uD((function(t,e){return n=t,o=e.shared.providers,BO({name:n.name,multiline:!0,label:n.label,inputMode:S.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:S.none(),maximized:n.maximized},o);var n,o})),label:uD((function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=$(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:ac([uk(),mp.config({}),yk(S.none()),up.config({mode:"acyclic"})])};var n,o,r,i})),iframe:(wO=function(t,e){return Ek(t,e.shared.providers)},function(t,e,n){var o=Ht(e,{source:"dynamic"});return uD(wO)(t,o,n)}),button:uD((function(t,e){return QS(t,e.shared.providers)})),checkbox:uD((function(t,e){return n=t,o=e.shared.providers,r=Jl.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),a=function(t){return t.element.dom.click(),S.some(!0)},u=Wy.parts.field({factory:{sketch:i},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ac([uk(),gv.config({disabled:function(){return n.disabled||o.isDisabled()}}),Yy.config({}),bp.config({}),r,up.config({mode:"special",onEnter:a,onSpace:a,stopSpaceKeyup:!0}),dp("checkbox-events",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),c=Wy.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:ac([aw.config({})])}),l=gg({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(s=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:vg("checked"===t?"selected":"unselected",o.icons)}}})("checked"),s("unchecked")]}),Wy.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,l.asSpec(),c],fieldBehaviours:ac([gv.config({disabled:function(){return n.disabled||o.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Wy.getField(t).each(gv.disable)},onEnabled:function(t){Wy.getField(t).each(gv.enable)}}),$v()])});var n,o,r,a,u,c,s,l})),colorinput:uD((function(t,e){return lw(t,e.shared,e.colorinput)})),colorpicker:uD((function(t){var e=function(t){return"tox-"+t},n=ak(fk,e),o=gg(n.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Ko(t,rx,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:ac([Jl.config({store:{mode:"manual",getValue:function(t){var e=o.get(t);return em.getCurrent(e).bind((function(t){return Jl.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=o.get(t);em.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){Jl.setValue(t,{hex:S.from(n[1]).getOr("")}),QC.getField(t,"hex").each((function(t){Yo(t,vo())}))}))}}}),uk()])}})),dropzone:uD((function(t,e){return wk(t,e.shared.providers)})),grid:uD((function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:$(n.items,o.interpreter)};var n,o})),listbox:uD((function(t,e){return o=t,a=(i=e).shared.providers,u=it(o.items).filter(AO),c=o.label.map((function(t){return tx(t,a)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Wy.parts.field({dom:{},factory:{sketch:function(t){return BS({uid:t.uid,text:u.map((function(t){return t.text})),icon:S.none(),tooltip:o.label,role:S.none(),fetch:function(t,e){var n=RO(t,o.name,o.items,Jl.getValue(t));e(LS(n,uh.CLOSE_ON_EXECUTE,i,!1))},onSetup:r(n),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yy.config({}),Jl.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return Kr(t.element,FO)},setValue:function(t,e){MO(o.items,e).each((function(e){Yr(t.element,FO,e.value),Ko(t,MS,{text:e.text})}))}}})]},"tox-listbox",i.shared)}}})]},Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Z([c.toArray(),[s]]),fieldBehaviours:ac([gv.config({disabled:r(o.disabled),onDisabled:function(t){Wy.getField(t).each(gv.disable)},onEnabled:function(t){Wy.getField(t).each(gv.enable)}})])});var o,i,a,u,c,s})),selectbox:uD((function(t,e){return n=t,o=e.shared.providers,r=$(n.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=n.label.map((function(t){return tx(t,o)})),a=Wy.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:PO,selectBehaviours:ac([gv.config({disabled:function(){return n.disabled||o.isDisabled()}}),Yy.config({}),dp("selectbox-change",[rr(bo(),(function(t,e){Ko(t,ex,{name:n.name})}))])])}),u=1<n.size?S.none():S.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:vg("chevron-down",o.icons)}}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:Z([[a],u.toArray()])},Wy.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Z([i.toArray(),[c]]),fieldBehaviours:ac([gv.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Wy.getField(t).each(gv.disable)},onEnabled:function(t){Wy.getField(t).each(gv.enable)}}),$v()])});var n,o,r,i,a,u,c})),sizeinput:uD((function(t,e){return cO(t,e.shared.providers)})),urlinput:uD((function(t,e){return aD(t,e,e.urlinput)})),customeditor:uD((function(t){var e=dn(S.none()),n=gg({dom:{tag:t.tag}}),o=dn(S.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ac([dp("custom-editor-events",[fr((function(r){n.getOpt(r).each((function(n){var r;r=t,(Object.prototype.hasOwnProperty.call(r,"init")?t.init(n.element.dom):mk.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)}))).then((function(t){o.get().each((function(e){t.setValue(e)})),o.set(S.none()),e.set(S.some(t))}))}))}))]),Jl.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(S.some(n))}),(function(t){return t.setValue(n)}))}}}),uk()]),components:[n.asSpec()]}})),htmlpanel:uD((function(t){return"presentation"===t.presets?Ly.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ly.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ac([Yy.config({}),bp.config({})])})})),imagetools:uD((function(t,e){return EO(t,e.shared.providers)})),table:uD((function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:$(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:$(r,c)})],behaviours:ac([Yy.config({}),bp.config({})])};var n,o,r,i,a,u,c})),panel:uD((function(t,e){return o=e,{dom:{tag:"div",classes:(n=t).classes},components:$(n.items,o.shared.interpreter)};var n,o}))},sD={field:function(t,e){return e}},lD=function(t,e,n){var o=Ht(n,{shared:{interpreter:function(e){return fD(t,e,o)}}});return fD(t,e,o)},fD=function(t,e,n){return Pt(cD,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},mD={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dD=function(t,e,n){var o=jc(-12,12,mD),r={maxHeightFunction:Mc()};return function(){return n()?{anchor:"node",root:Mr(t()),node:S.from(t()),bubble:o,layouts:{onRtl:function(){return[lg]},onLtr:function(){return[sg]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[ju]},onLtr:function(){return[Nu]}},overrides:r}}},pD=function(t,e,n){return function(){return n()?{anchor:"node",root:Mr(t()),node:S.from(t()),layouts:{onRtl:function(){return[fg]},onLtr:function(){return[fg]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[$u]},onLtr:function(){return[$u]}}}}},gD=function(t,e,n){var o,r,i,a=Bv(t),u=function(){return gn.fromDom(t.getBody())},c=function(){return gn.fromDom(t.getContentAreaContainer())},s=function(){return a||!n()};return{inlineDialog:dD(c,e,s),banner:pD(c,e,s),cursor:(r=t,function(){return{anchor:"selection",root:i(),getSelection:function(){var t=r.selection.getRng();return S.some(gs.range(gn.fromDom(t.startContainer),t.startOffset,gn.fromDom(t.endContainer),t.endOffset))}}}),node:(o=i=u,function(t){return{anchor:"node",root:o(),node:t}})}},hD=function(t){return{colorPicker:function(t,e){Qb(r)(t,e)},hasCustomColors:function(){return Lb(o)},getColors:function(){return Jb(n)},getColorCols:(e=n=o=r=t,function(){return Wb(e)})};var e,n,o,r},vD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],bD=function t(e){return Y(e,(function(e,n){if(Bt(n,"items")){var o=t(n.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:n.title,items:o.formats}])}}if(Bt(n,"inline")||Bt(n,"block")||Bt(n,"selector")){var r="custom-"+(T(n.name)?n.name:n.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:n}]),formats:e.formats.concat([{title:n.title,format:r,icon:n.icon}])}}return m(m({},e),{formats:e.formats.concat(n)})}),{customFormats:[],formats:[]})},yD=function(t){return e=t,S.from(e.getParam("style_formats")).filter(I).map((function(e){var n,o,r,i=(n=t,o=bD(e),r=function(t){U(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))},n.formatter?r(o.customFormats):n.on("init",(function(){r(o.customFormats)})),o.formats);return t.getParam("style_formats_merge",!1,"boolean")?vD.concat(i):i})).getOr(vD);var e},xD=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Ht(t,o)},wD=function(t,e,n,o){var r=function e(r){return $(r,(function(r){var i,a,u,c,s,l=Dt(r);if(Vt(r,"items")){var f=e(r.items);return Ht(Ht(r,{type:"submenu"}),{getStyleItems:function(){return f}})}return Vt(r,"format")?xD(r,n,o):1===l.length&&N(l,"title")?Ht(r,{type:"separator"}):(a=T((i=r).name)?i.name:ii(i.title),c={type:"formatter",format:u="custom-"+a,isSelected:n(u),getStylePreview:o(u)},s=Ht(i,c),t.formatter.register(a,s),s)}))};return r(e)},CD=dk.trim,kD=function(t){return function(e){if(F(n=e)&&1===n.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}var n;return!1}},SD=kD("true"),OD=kD("false"),DD=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},TD=function(t){return t.innerText||t.textContent},_D=function(t){return(e=t)&&"A"===e.nodeName&&void 0!==(e.id||e.name)&&ED(t);var e},ID=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},ED=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return SD(t)}return!1}(t)&&!OD(t)},AD=function(t){return ID(t)&&ED(t)},FD=function(t){var e,n,o=(e=t).id?e.id:ii("h");return DD("header",TD(t),"#"+o,ID(n=t)?parseInt(n.nodeName.substr(1),10):0,(function(){t.id=o}))},RD=function(t){var e=t.id||t.name,o=TD(t);return DD("anchor",o||"#"+e,"#"+e,0,n)},MD=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,$(Ts(gn.fromDom(n),e),(function(t){return t.dom}))},PD=function(t){return 0<CD(t.title).length},BD=function(t){var e=MD(t);return G($(G(e,AD),FD).concat($(G(e,_D),RD)),PD)},VD="tinymce-url-history",zD=function(t){return T(t)&&/^https?/.test(t)},jD=function(t){return _(t)&&Rt(t,(function(t){return!(I(e=t)&&e.length<=5&&tt(e,zD));var e})).isNone()},ND=function(){var t,e=Vb.getItem(VD);if(null===e)return{};try{t=JSON.parse(e)}catch(h){if(h instanceof SyntaxError)return console.log("Local storage "+VD+" was not valid JSON",h),{};throw h}return jD(t)?t:(console.log("Local storage "+VD+" was not valid format",t),{})},HD=function(t){var e=ND();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},LD=function(t,e){var n,o,r;zD(t)&&(n=ND(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=G(o,(function(e){return e!==t})),n[e]=[t].concat(r).slice(0,5),function(t){if(!jD(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));Vb.setItem(VD,JSON.stringify(t))}(n))},JD=function(t){return!!t},$D=function(t){return It(dk.makeMap(t,/[, ]/),JD)},UD=function(t){return S.from(t.getParam("file_picker_callback")).filter(R)},WD=function(t,e){var n,o,r,i,a=(n=t,o=S.some(n.getParam("file_picker_types")).filter(JD),r=S.some(n.getParam("file_browser_callback_types")).filter(JD),i=o.or(r).map($D),UD(n).fold(s,(function(t){return i.fold(l,(function(t){return 0<Dt(t).length&&t}))})));return E(a)?a?UD(t):S.none():a[e]?UD(t):S.none()},GD=function(t){return S.from(t).filter(T).getOrUndefined()},XD=function(t){return S.from(void 0===(n=(e=t).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):n);var e,n},YD=function(t){return{getHistory:HD,addToHistory:LD,getLinkInformation:function(){return!1===(e=t).getParam("typeahead_urls")?S.none():S.some({targets:BD(e.getBody()),anchorTop:GD(e.getParam("anchor_top","#top")),anchorBottom:GD(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return XD(t)},getUrlPicker:function(e){return WD(n=t,o=e).map((function(t){return function(e){return Sx((function(r){var i=m({filetype:o,fieldname:e.fieldname},S.from(e.meta).getOr({}));t.call(n,(function(t,e){if(!T(t))throw new Error("Expected value to be string");if(void 0!==e&&!_(e))throw new Error("Expected meta to be a object");r({value:t,meta:e})}),e.value,i)}))}}));var n,o}}},KD=function(t,e,n){var o,r,i=dn(!1),a={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=dn(Mv(e)?"bottom":"top")).get,setDockingMode:o.set},u={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:ev.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return fD(sD,t,u)},anchors:gD(e,n,a.isPositionedAtTop),header:a,getSink:function(){return ft.value(t)}},urlinput:YD(e),styleselect:function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?S.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):S.none()}},o=function t(e){var n=e.items;return void 0!==n&&0<n.length?Q(n,t):[e.format]},r=dn([]),i=dn([]),a=dn([]),u=dn([]),c=dn(!1);return t.on("PreInit",(function(a){var u=yD(t),c=wD(t,u,e,n);r.set(c),i.set(Q(c,o))})),t.on("addStyleModifications",(function(r){var i=wD(t,r.items,e,n);a.set(i),c.set(r.replace),u.set(Q(i,o))})),{getData:function(){var t=c.get()?[]:r.get(),e=a.get();return t.concat(e)},getFlattenedKeys:function(){var t=c.get()?[]:i.get(),e=u.get();return t.concat(e)}}}(e),colorinput:hD(e),dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return u},qD=r((function(t,e){var n,o,r;n=t,o=Math.floor(e),r=Da.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),Yi(n,"max-width",r+"px")})),ZD="contexttoolbar-hide",QD=r([Le("dom"),nn("shell",!0),$l("toolbarBehaviours",[mp])]),tT=r([Cf({name:"groups",overrides:function(){return{behaviours:ac([mp.config({})])}}})]),eT=Yf({name:"Toolbar",configFields:QD(),partFields:tT(),factory:function(t,e,n,o){var r=function(e){return t.shell?S.some(e):Mf(e,t,"groups")},i=t.shell?{behaviours:[mp.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Wl(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){mp.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),nT=function(t,e,n){return{within:t,extra:e,withinWidth:n}},oT=function(t,e,n){var o,i=(o=function(t,e){var o=n(t);return S.some({element:t,start:e,finish:e+o,width:o})},Y(t,(function(t,e){return o(e,t.len).fold(r(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]}).list),a=G(i,(function(t){return t.finish<=e})),u=X(a,(function(t,e){return t+e.width}),0);return{within:a,extra:i.slice(a.length),withinWidth:u}},rT=function(t){return $(t,(function(t){return t.element}))},iT=function(t,e,n,o){var r,i,a,u,c,s,l,f,m,d=(0===(r=oT(e,t,n)).extra.length?S.some(r):S.none()).getOrThunk((function(){return oT(e,t-n(o),n)})),p=d.within,g=d.extra,h=d.withinWidth;return 1===g.length&&g[0].width<=n(o)?(l=g,f=h,m=rT(p.concat(l)),nT(m,[],f)):1<=g.length?(a=g,u=o,c=h,s=rT(p).concat([u]),nT(s,rT(a),c)):(i=h,nT(rT(p),[],i))},aT=function(t,e){var n=$(e,(function(t){return ha(t)}));eT.setGroups(t,n)},uT=function(t,e,n){var o=Pf(t,e,"primary"),r=zx.getCoupled(t,"overflowGroup");Yi(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),a=ct(i,(function(t){return hc(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}));n([]),aT(o,i);var u=Ta(o.element),c=iT(u,e.builtGroups.get(),(function(t){return Ta(t.element)}),r);0===c.extra.length?(mp.remove(o,r),n([])):(aT(o,c.within),n(c.extra)),na(o.element,"visibility"),oa(o.element),a.each(bp.focus)},cT=r([$l("splitToolbarBehaviours",[zx]),mn("builtGroups",(function(){return dn([])}))]),sT=r([du(["overflowToggledClass"]),tn("getOverflowBounds"),Le("lazySink"),mn("overflowGroups",(function(){return dn([])}))].concat(cT())),lT=r([xf({factory:eT,schema:QD(),name:"primary"}),wf({schema:QD(),name:"overflow"}),wf({name:"overflow-button"}),wf({name:"overflow-group"})]),fT=r([du(["toggledClass"]),Le("lazySink"),We("fetch"),tn("getBounds"),en("fireDismissalEventInstead",[nn("event",Ho())]),Kc()]),mT=r([wf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ac([Ep.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),wf({factory:eT,schema:QD(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:ac([up.config({mode:"cyclic",onEscape:function(e){return Mf(e,t,"button").each(bp.focus),S.none()}})])}}})]),dT=function(t,e){var n=zx.getCoupled(t,"toolbarSandbox");kl.isOpen(n)?kl.close(n):kl.open(n,e.toolbar())},pT=function(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();el.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:qD()}},e,r)},gT=function(t,e,n,o,r){eT.setGroups(e,r),pT(t,e,n,o),Ep.on(t)},hT=Yf({name:"FloatingToolbarButton",factory:function(t,e,n,o){return m(m({},pg.sketch(m(m({},o.button()),{action:function(t){dT(t,o)},buttonBehaviours:Xl({dump:o.button().buttonBehaviours},[zx.config({others:{toolbarSandbox:function(e){return o=e,r=n,i=t,{dom:{tag:"div",attributes:{id:(a=Za()).id}},behaviours:ac([up.config({mode:"special",onEscape:function(t){return kl.close(t),S.some(!0)}}),kl.config({onOpen:function(t,e){i.fetch().get((function(t){gT(o,e,i,r.layouts,t),a.link(o.element),up.focusIn(e)}))},onClose:function(){Ep.off(o),bp.focus(o),a.unlink(o.element)},isPartOf:function(t,e,n){return tu(e,n)||tu(o,n)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),mc.config({channels:m(m({},_l(m({isExtraPart:s},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),El({doReposition:function(){kl.getState(zx.getCoupled(o,"toolbarSandbox")).each((function(t){pT(o,t,i,r.layouts)}))}}))})])};var o,r,i,a}}})])}))),{apis:{setGroups:function(e,o){kl.getState(zx.getCoupled(e,"toolbarSandbox")).each((function(r){gT(e,r,t,n.layouts,o)}))},reposition:function(e){kl.getState(zx.getCoupled(e,"toolbarSandbox")).each((function(o){pT(e,o,t,n.layouts)}))},toggle:function(t){dT(t,o)},getToolbar:function(t){return kl.getState(zx.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return kl.isOpen(zx.getCoupled(t,"toolbarSandbox"))}}})},configFields:fT(),partFields:mT(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),vT=r([Le("items"),du(["itemSelector"]),$l("tgroupBehaviours",[up])]),bT=r([kf({name:"items",unit:"item"})]),yT=Yf({name:"ToolbarGroup",configFields:vT(),partFields:bT(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.tgroupBehaviours,[up.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),xT=function(t){return $(t,(function(t){return ha(t)}))},wT=function(t,e,n){uT(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){hT.setGroups(t,xT(o))}))}))},CT=Yf({name:"SplitFloatingToolbar",configFields:sT(),partFields:lT(),factory:function(t,e,n,o){var r=gg(hT.sketch({fetch:function(){return Sx((function(e){e(xT(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[Nu,ju]},onRtl:function(){return[ju,Nu]},onBottomLtr:function(){return[Lu,Hu]},onBottomRtl:function(){return[Hu,Lu]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.splitToolbarBehaviours,[zx.config({others:{overflowGroup:function(){return yT.sketch(m(m({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set($(n,e.getSystem().build)),wT(e,r,t)},refresh:function(e){return wT(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){hT.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(hT.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){hT.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(hT.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),kT=function(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))},ST=function(t){return t.dimension.property},OT=function(t,e){return t.dimension.getDimension(e)},DT=function(t,e){var n=kT(t,e);Li(n,[e.shrinkingClass,e.growingClass])},TT=function(t,e){ji(t.element,e.openClass),Vi(t.element,e.closedClass),Yi(t.element,ST(e),"0px"),oa(t.element)},_T=function(t,e){ji(t.element,e.closedClass),Vi(t.element,e.openClass),na(t.element,ST(e))},IT=function(t,e,n,o){n.setCollapsed(),Yi(t.element,ST(e),OT(e,t.element)),oa(t.element),DT(t,e),TT(t,e),e.onStartShrink(t),e.onShrunk(t)},ET=function(t,e,n,o){var r=o.getOrThunk((function(){return OT(e,t.element)}));n.setCollapsed(),Yi(t.element,ST(e),r),oa(t.element);var i=kT(t,e);ji(i,e.growingClass),Vi(i,e.shrinkingClass),TT(t,e),e.onStartShrink(t)},AT=function(t,e,n){var o=OT(e,t.element);("0px"===o?IT:ET)(t,e,n,S.some(o))},FT=function(t,e,n){var o=kT(t,e),r=Ni(o,e.shrinkingClass),i=OT(e,t.element);_T(t,e);var a=OT(e,t.element);(r?function(){Yi(t.element,ST(e),i),oa(t.element)}:function(){TT(t,e)})(),ji(o,e.shrinkingClass),Vi(o,e.growingClass),_T(t,e),Yi(t.element,ST(e),a),n.setExpanded(),e.onStartGrow(t)},RT=function(t,e,n){var o=kT(t,e);return!0===Ni(o,e.growingClass)},MT=function(t,e,n){var o=kT(t,e);return!0===Ni(o,e.shrinkingClass)},PT=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(na(t.element,ST(e)),o=OT(e,t.element),Yi(t.element,ST(e),o))},grow:function(t,e,n){n.isExpanded()||FT(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&AT(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&IT(t,e,n,S.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:RT,isShrinking:MT,isTransitioning:function(t,e,n){return RT(t,e)||MT(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?AT:FT)(t,e,n)},disableTransitions:DT}),BT=Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return Si(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Zt(e.dimension.property,"0px")})},events:function(t,e){return er([lr(xo(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(DT(n,t),e.isExpanded()&&na(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),VT=[Le("closedClass"),Le("openClass"),Le("shrinkingClass"),Le("growingClass"),Ke("getAnimationRoot"),gu("onShrunk"),gu("onStartShrink"),gu("onGrown"),gu("onStartGrow"),nn("expanded",!1),Je("dimension",Fe("property",{width:[yu("property","width"),yu("getDimension",(function(t){return Ta(t)+"px"}))],height:[yu("property","height"),yu("getDimension",(function(t){return ya(t)+"px"}))]}))],zT=cc({fields:VT,name:"sliding",active:BT,apis:PT,state:Object.freeze({__proto__:null,init:function(t){var e=dn(t.expanded);return Ci({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:a(e.set,!1),setExpanded:a(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),jT=r([du(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),gu("onOpened"),gu("onClosed")].concat(cT())),NT=r([xf({factory:eT,schema:QD(),name:"primary"}),xf({factory:eT,schema:QD(),name:"overflow",overrides:function(t){return{toolbarBehaviours:ac([zT.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Mf(e,t,"overflow-button").each((function(t){Ep.off(t),bp.focus(t)})),t.onClosed(e)},onGrown:function(e){up.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Mf(e,t,"overflow-button").each(Ep.on)}}),up.config({mode:"acyclic",onEscape:function(e){return Mf(e,t,"overflow-button").each(bp.focus),S.some(!0)}})])}}}),wf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:ac([Ep.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),wf({name:"overflow-group"})]),HT=function(t,e){Mf(t,e,"overflow-button").bind((function(){return Mf(t,e,"overflow")})).each((function(n){LT(t,e),zT.toggleGrow(n)}))},LT=function(t,e){Mf(t,e,"overflow").each((function(n){uT(t,e,(function(t){var e=$(t,(function(t){return ha(t)}));eT.setGroups(n,e)})),Mf(t,e,"overflow-button").each((function(t){zT.hasGrown(n)&&Ep.on(t)})),zT.refresh(n)}))},JT=Yf({name:"SplitSlidingToolbar",configFields:jT(),partFields:NT(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:Wl(t.splitToolbarBehaviours,[zx.config({others:{overflowGroup:function(t){return yT.sketch(m(m({},o["overflow-group"]()),{items:[pg.sketch(m(m({},o["overflow-button"]()),{action:function(e){Yo(t,r)}}))]}))}}}),dp("toolbar-toggle-events",[rr(r,(function(e){HT(e,t)}))])]),apis:{setGroups:function(e,n){var o;o=$(n,e.getSystem().build),t.builtGroups.set(o),LT(e,t)},refresh:function(e){return LT(e,t)},toggle:function(e){return HT(e,t)},isOpen:function(e){return Mf(e,t,"overflow").map(zT.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),$T=r(ii("toolbar-height-change")),UT=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:m({tag:"div",classes:["tox-toolbar__group"]},e),components:[yT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ac([Yy.config({}),bp.config({})])}},WT=function(t){return yT.sketch(UT(t))},GT=function(t,e){var n=fr((function(e){var n=$(t.initGroups,WT);eT.setGroups(e,n)}));return ac([Xv(t.providers.isDisabled),$v(),up.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),dp("toolbar-events",[n])])},XT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":UT({title:S.none(),items:[]}),"overflow-button":GS({name:"more",icon:S.some("more-drawer"),disabled:!1,tooltip:S.some("More..."),primary:!1,borderless:!1},S.none(),t.providers)},splitToolbarBehaviours:GT(t,e)}},YT=function(t){var e=XT(t),n=CT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return CT.sketch(m(m({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=Ha(e),o=kr(e),r=Ha(o),i=Math.max(o.dom.scrollHeight,r.height);return ja(n.x+4,r.y,n.width-8,i)},parts:m(m({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},KT=function(t){var e=JT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=JT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=XT(t);return JT.sketch(m(m({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([$T()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([$T()],{type:"closed"})}}))},qT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return eT.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ih.scrolling?["tox-toolbar--scrolling"]:[])},components:[eT.parts.groups({})],toolbarBehaviours:GT(t,e)})},ZT=me([$e("type"),Je("items",pe([ke([$e("name"),Ye("items",Be)]),Be]))].concat($g)),QT=[Qe("text"),Qe("tooltip"),Qe("icon"),We("fetch"),sn("onSetup",(function(){return n}))],t_=me(p([$e("type")],QT)),e_=function(t){return Te("menubutton",t_,t)},n_=me([$e("type"),Qe("tooltip"),Qe("icon"),Qe("text"),tn("select"),We("fetch"),sn("onSetup",(function(){return n})),un("presets","normal",["normal","color","listpreview"]),nn("columns",1),We("onAction"),We("onItemAction")]),o_=Object.freeze({__proto__:null,events:function(t,e){var n=function(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=t(o,e.get()),i=$(r,n.getSystem().build);il(n,i)}))};return er([rr(To(),(function(e,o){var r,i=o;i.universal||(r=t.channel,N(i.channels,r)&&n(e,i.data))})),fr((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),r_=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),i_=[Le("channel"),Ke("renderComponents"),Ke("updateState"),Ke("initialData")],a_=cc({fields:i_,name:"reflecting",active:o_,apis:r_,state:Object.freeze({__proto__:null,init:function(){var t=dn(S.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(S.none())}}}})}),u_=r([Le("toggleClass"),Le("fetch"),vu("onExecute"),nn("getHotspot",S.some),nn("getAnchorOverrides",r({})),Kc(),vu("onItemExecute"),Ke("lazySink"),Le("dom"),gu("onOpen"),$l("splitDropdownBehaviours",[zx,up,bp]),nn("matchWidth",!1),nn("useMinWidth",!1),nn("eventOrder",{}),Ke("role")].concat(nw())),c_=xf({factory:pg,schema:[Le("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:ac([bp.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(qo)},buttonBehaviours:ac([Ep.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),s_=xf({factory:pg,schema:[Le("dom")],name:"button",defaults:function(){return{buttonBehaviours:ac([bp.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),l_=r([c_,s_,Cf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Le("text")],name:"aria-descriptor"}),wf({schema:[mu()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),Nx()]),f_=Yf({name:"SplitDropdown",configFields:u_(),partFields:l_(),factory:function(t,e,o,r){var i,a=function(t){em.getCurrent(t).each((function(t){mm.highlightFirst(t),up.focusIn(t)}))},u=function(e){Kx(t,(function(t){return t}),e,r,a,vx.HighlightFirst).get(n)},c=function(e){var n=Pf(e,t,"button");return qo(n),S.some(!0)},s=m(m({},er([fr((function(e,n){Mf(e,t,"aria-descriptor").each((function(t){var n=ii("aria");Yr(t.element,"id",n),Yr(e.element,"aria-describedby",n)}))}))])),Fp(S.some(u))),l={repositionMenus:function(t){Ep.isOn(t)&&ew(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:l,eventOrder:m(m({},t.eventOrder),((i={})[_o()]=["disabling","toggling","alloy.base.behaviour"],i)),events:s,behaviours:Wl(t.splitDropdownBehaviours,[zx.config({others:{sandbox:function(e){var n=Pf(e,t,"arrow");return tw(t,e,{onOpen:function(){Ep.on(n),Ep.on(e)},onClose:function(){Ep.off(n),Ep.off(e)}})}}}),up.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t){return u(t),S.some(!0)}}),bp.config({}),Ep.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),m_=function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},d_=function(t){return{setActive:function(e){Ep.set(t,e)},isActive:function(){return Ep.isOn(t)},isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)}}},p_=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},g_=ii("focus-button"),h_=["checklist","ordered-list"],v_=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],b_=function(t,e,n,o,r,i){var a,u=function(t){return ev.isRtl()&&N(h_,t)?t+"-rtl":t},c=ev.isRtl()&&t.exists((function(t){return N(v_,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:p_(n,i)},components:Qv([t.map((function(t){return IS(u(t),i.icons)})),e.map((function(t){return AS(t,"tox-tbtn",i)}))]),eventOrder:((a={})[uo()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:ac([Xv(i.isDisabled),$v(),dp("common-button-display-events",[rr(uo(),(function(t,e){e.event.prevent(),Yo(t,g_)}))])].concat(o.map((function(n){return a_.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return Qv([t.icon.map((function(t){return IS(u(t),i.icons)})),t.text.map((function(t){return AS(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}},y_=function(t,e,o){var r,i=dn(n),a=b_(t.icon,t.text,t.tooltip,S.none(),S.none(),o);return pg.sketch({dom:a.dom,components:a.components,eventOrder:RS,buttonBehaviours:ac([dp("toolbar-button-events",[(r={onAction:t.onAction,getApi:e.getApi},pr((function(t,e){Yv(r,t)((function(e){Ko(t,FS,{buttonApi:e}),r.onAction(e)}))}))),Kv(e,i),qv(e,i)]),Xv((function(){return t.disabled||o.isDisabled()})),$v()].concat(e.toolbarButtonBehaviours))})},x_=function(t,e,n){return y_(t,{toolbarButtonBehaviours:[].concat(0<n.length?[dp("toolbarButtonWith",n)]:[]),getApi:m_,onSetup:t.onSetup},e)},w_=function(t,e,n){return Ht(y_(t,{toolbarButtonBehaviours:[mp.config({}),Ep.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[dp("toolbarToggleButtonWith",n)]:[]),getApi:d_,onSetup:t.onSetup},e))},C_=function(t,e){var o,r,i,a,u=ii("channel-update-split-dropdown-display"),c=function(t){return{isDisabled:function(){return gv.isDisabled(t)},setDisabled:function(e){return gv.set(t,e)},setIconFill:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Yr(t,"fill",n)}))},setIconStroke:function(e,n){Ka(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Yr(t,"stroke",n)}))},setActive:function(e){Yr(t.element,"aria-pressed",e),Ka(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Ep.set(t,e)}))}))},isActive:function(){return Ka(t.element,"span").exists((function(e){return t.getSystem().getByDom(e).exists(Ep.isOn)}))}}},l=dn(n),f={getApi:c,onSetup:t.onSetup};return f_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:m({"aria-pressed":!1},p_(t.tooltip,e.providers))},onExecute:function(e){t.onAction(c(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:ac([Gv(e.providers.isDisabled),$v(),dp("split-dropdown-events",[rr(g_,bp.focus),Kv(f,l),qv(f,l)]),aw.config({})]),eventOrder:((o={})[jo()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:(r=c,i=t,a=e.providers,function(t){return Sx((function(t){return i.fetch(t)})).map((function(e){return S.from(wy(Ht(ty(ii("menu-value"),e,(function(e){i.onItemAction(r(t),e)}),i.columns,i.presets,uh.CLOSE_ON_EXECUTE,i.select.getOr(s),a),{movement:ny(i.columns,i.presets),menuBehaviours:Uh("auto"!==i.columns?[]:[fr((function(t,e){Jh(t,4,bh(i.presets)).each((function(e){var n=e.numRows,o=e.numColumns;up.setGridSize(t,n,o)}))}))])})))}))}),parts:{menu:Ch(0,t.columns,t.presets)},components:[f_.parts.button(b_(t.icon,t.text,S.none(),S.some(u),S.some([Ep.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),f_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:vg("chevron-down",e.providers.icons)},buttonBehaviours:ac([Gv(e.providers.isDisabled),$v()])}),f_.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})},k_=function(t,e){return rr(FS,(function(n,o){var r,i=t.get(n),a=(r=i,{hide:function(){return Yo(r,Fo())},getValue:function(){return Jl.getValue(r)}});e.onAction(a,o.event.buttonApi)}))},S_=function(t,e,o){var r,i,a,u,c,s,l,f,p,g,h,v,b={backstage:{shared:{providers:o}}};return"contextformtogglebutton"===e.type?(l=t,p=b,(g=(f=e).original).primary,h=d(g,["primary"]),v=_e(Yg(m(m({},h),{type:"togglebutton",onAction:n}))),w_(v,p.backstage.shared.providers,[k_(l,f)])):(r=t,a=b,(u=(i=e).original).primary,c=d(u,["primary"]),s=_e(Wg(m(m({},c),{type:"button",onAction:n}))),x_(s,a.backstage.shared.providers,[k_(r,i)]))},O_=function(t,e){var n,o,r,i,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=gg(px.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ac([up.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return qo(t),!0}))},onLeft:function(t,e){return e.cut(),S.none()},onRight:function(t,e){return e.cut(),S.none()}})])})),s=(n=c,o=t.commands,r=e,i=$(o,(function(t){return gg(S_(n,t,r))})),{asSpecs:function(){return $(i,(function(t){return t.asSpec()}))},findPrimary:function(t){return ct(o,(function(e,n){return e.primary?S.from(i[n]).bind((function(e){return e.getOpt(t)})).filter(u(gv.isDisabled)):S.none()}))}});return[{title:S.none(),items:[c.asSpec()]},{title:S.none(),items:s.asSpecs()}]},D_=O_,T_=function(t,e){var n,o,r,i,a,u=Pa(window),c=Na(gn.fromDom(t.getContentAreaContainer())),s=kv(t)||Sv(t)||Dv(t),l=(n=c,o=u,r=Math.max(o.x,n.x),i=n.right-r,a=o.width-(r-o.x),{x:r,width:Math.min(i,a)}),f=l.x,m=l.width;if(t.inline&&!s)return ja(f,u.y,m,u.height);var d=function(t,e,n,o){var r=gn.fromDom(t.getContainer()),i=Ka(r,".tox-editor-header").getOr(r),a=Na(i),u=a.y>=e.bottom,c=o&&!u;if(t.inline&&c)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var s=Na(r);return c?{y:Math.max(a.bottom,n.y),bottom:Math.min(s.bottom,n.bottom)}:{y:Math.max(s.y,n.y),bottom:Math.min(a.y,n.bottom)}}(t,c,u,e.header.isPositionedAtTop()),p=d.y,g=d.bottom;return ja(f,p,m,g-p)},__=function(t,e){var n=G(e,(function(e){return e.predicate(t.dom)})),o=W(n,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},I_=function(t,e,n){var o=__(t,e);if(0<o.contextForms.length)return S.some({elem:t,toolbars:[o.contextForms[0]]});var r=__(t,n);if(0<r.contextForms.length)return S.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;var e=function(e){return H(t,(function(t){return t.position===e}))},n=function(e){return G(t,(function(t){return t.position===e}))},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),a=$(n("selection"),(function(t){return m(m({},t),{position:"node"})}));return i.concat(a)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return S.some({elem:t,toolbars:i})}return S.none()},E_=function(t,e,n){return t(e)?S.none():qn(e,(function(t){var e=__(t,n.inNodeScope),o=e.contextToolbars,r=e.contextForms,i=0<r.length?r:function(t){if(t.length<=1)return t;var e=function(e){return K(t,(function(t){return t.position===e}))};return e("selection").orThunk((function(){return e("node")})).orThunk((function(){return e("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(e){return G(t,(function(t){return t.position===e}))}))}(o);return 0<i.length?S.some({elem:t,toolbars:i}):S.none()}),t)},A_=function(t,e){var n={},o=[],r=[],i={},a={},u=function(t,u){var c=_e(Te("ContextForm",nh,u));(n[t]=c).launch.map((function(n){i["form:"+t]=m(m({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(c)}})})),"editor"===c.scope?r.push(c):o.push(c),a[t]=c},c=function(t,e){Te("ContextToolbar",oh,e).each((function(n){"editor"===e.scope?r.push(n):o.push(n),a[t]=n}))},s=Dt(t);return U(s,(function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&c(e,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:a,formNavigators:i}},F_=ii("forward-slide"),R_=ii("backward-slide"),M_=ii("change-slide-event"),P_="tox-pop--resizing",B_=function(t,e,n){var o,r,i,a,u,c=n.dataset,s="basic"===c.type?function(){return $(c.data,(function(t){return xD(t,n.isSelectedFor,n.getPreviewFor)}))}:c.getData;return{items:(o=e,r=n,i=function(t,e,n,i){var u=o.shared.providers.translate(t.title);if("separator"===t.type)return S.some({type:"separator",text:u});if("submenu"!==t.type)return S.some(m({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(i),disabled:n,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))));var c=Q(t.getStyleItems(),(function(t){return a(t,e,i)}));return 0===e&&c.length<=0?S.none():S.some({type:"nestedmenuitem",text:u,disabled:c.length<=0,getSubmenuItems:function(){return Q(t.getStyleItems(),(function(t){return a(t,e,i)}))}})},a=function(t,e,n){var o="formatter"===t.type&&r.isInvalid(t);return 0===e?o?[]:i(t,e,!1,n).toArray():i(t,e,o,n).toArray()},{validateItems:u=function(t){var e=r.getCurrentValue(),n=r.shouldHide?0:1;return Q(t,(function(t){return a(t,n,e)}))},getFetch:function(t,e){return function(n,o){var r=e(),i=u(r);o(LS(i,uh.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:s}},V_=function(t,e,o){var r=B_(0,e,o),i=r.items,a=r.getStyleItems;return BS({text:o.icon.isSome()?S.none():S.some(""),icon:o.icon,tooltip:S.from(o.tooltip),role:S.none(),fetch:i.getFetch(e,a),onSetup:function(e){return o.setInitialValue.each((function(t){return t(e.getComponent())})),o.nodeChangeHandler.map((function(n){var o=n(e.getComponent());return t.on("NodeChange",o),function(){t.off("NodeChange",o)}})).getOr(n)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};(kO=CO=CO||{})[kO.SemiColon=0]="SemiColon",kO[kO.Space=1]="Space";var z_,j_,N_,H_,L_,J_,$_=function(t,e,n,o){var r,i,a=t.getParam(e,n,"string");return{type:"basic",data:(i=a,r=o===CO.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),$(r,(function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}})))}},U_=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],W_=function(t){var e=function(e){var n=K(U_,(function(e){return t.formatter.match(e.format)})).fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));Ko(e,PS,{icon:"align-"+n})},n=S.some((function(t){return function(){return e(t)}})),o=S.some(e),r={type:"basic",data:U_};return{tooltip:"Align",icon:S.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:S.none,getPreviewFor:function(t){return function(){return S.none()}},onAction:function(e){return function(){return K(U_,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},G_=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],X_=function(t){var e=t.split(/\s*,\s*/);return $(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},Y_=function(t){var e;return 0===t.indexOf("-apple-system")&&(e=X_(t.toLowerCase()),tt(G_,(function(t){return-1<e.indexOf(t.toLowerCase())})))},K_=function(t){var e=function(){var e=function(t){return t?X_(t)[0]:""},n=t.queryCommandValue("FontName"),o=i.data,r=n?n.toLowerCase():"";return{matchOpt:K(o,(function(t){var n=t.format;return n.toLowerCase()===r||e(n).toLowerCase()===e(r).toLowerCase()})).orThunk((function(){return Y_(r)?S.from({title:"System Font",format:r}):S.none()})),font:n}},n=function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,MS,{text:i})},o=S.some((function(t){return function(){return n(t)}})),r=S.some(n),i=$_(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",CO.SemiColon);return{tooltip:"Fonts",icon:S.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return S.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},setInitialValue:r,nodeChangeHandler:o,dataset:i,shouldHide:!1,isInvalid:s}},q_={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Z_={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Q_=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):Pt(Z_,t).getOr(t);var n,o,r},tI=function(t){var e=function(){var e=S.none(),n=u.data,o=t.queryCommandValue("FontSize");if(o)for(var r=function(t){var r=Q_(o,t),i=Pt(q_,r).getOr("");e=K(n,(function(t){return t.format===o||t.format===r||t.format===i}))},i=3;e.isNone()&&0<=i;i--)r(i);return{matchOpt:e,size:o}},n=r(S.none),o=function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold((function(){return r}),(function(t){return t.title}));Ko(t,MS,{text:i})},i=S.some((function(t){return function(){return o(t)}})),a=S.some(o),u=$_(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",CO.Space);return{tooltip:"Font sizes",icon:S.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},setInitialValue:a,nodeChangeHandler:i,dataset:u,shouldHide:!1,isInvalid:s}},eI=function(t,e){var n=e(),o=$(n,(function(t){return t.format}));return S.from(t.formatter.closest(o)).bind((function(t){return K(n,(function(e){return e.format===t}))})).orThunk((function(){return qf(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))},nI=function(t){var e=dn(S.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(S.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(S.some(t))}}},oI=function(){return nI((function(t){return t.destroy()}))},rI=function(){return nI((function(t){return t.unbind()}))},iI=function(t,e){return function(n){var o=rI(),r=function(){n.setActive(t.formatter.match(e));var r=t.formatter.formatChanged(e,n.setActive);o.set(r)};return t.initialized?r():t.on("init",r),o.clear}},aI=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},uI=function(t){var e=function(e){var n=eI(t,(function(){return r.data})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,MS,{text:n})},n=S.some((function(t){return function(){return e(t)}})),o=S.some(e),r=$_(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",CO.SemiColon);return{tooltip:"Blocks",icon:S.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:S.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return S.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:aI(t),setInitialValue:o,nodeChangeHandler:n,dataset:r,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},cI=function(t,e){var n=function(e){var n=function t(e){var n=e.items;return void 0!==n&&0<n.length?Q(n,t):[{title:e.title,format:e.format}]},o=Q(yD(t),n),r=eI(t,(function(){return o})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Ko(e,MS,{text:r})},o=S.some((function(t){return function(){return n(t)}})),r=S.some(n);return{tooltip:"Formats",icon:S.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:S.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?S.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):S.none()}},onAction:aI(t),setInitialValue:r,nodeChangeHandler:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},sI=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],lI=function(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return Ee(t)})).getOrDie();return e(i,o,r)}},fI={button:lI(Wg,(function(t,e){return n=t,o=e.backstage.shared.providers,x_(n,o,[]);var n,o})),togglebutton:lI(Yg,(function(t,e){return n=t,o=e.backstage.shared.providers,w_(n,o,[]);var n,o})),menubutton:lI(e_,(function(t,e){return $S(t,"tox-tbtn",e.backstage,S.none())})),splitbutton:lI((function(t){return Te("SplitButton",n_,t)}),(function(t,e){return C_(t,e.backstage.shared)})),grouptoolbarbutton:lI((function(t){return Te("GroupToolbarButton",ZT,t)}),(function(t,e,n){var o,r,i,a,u,c,s=n.ui.registry.getAll().buttons,l=((o={})[Xc]=e.backstage.shared.header.isPositionedAtTop()?nu.TopToBottom:nu.BottomToTop,o);switch(Iv(n)){case ih.floating:return r=t,i=e.backstage,a=function(t){return gI(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,S.none())},u=l,c=i.shared,hT.sketch({lazySink:c.getSink,fetch:function(){return Sx((function(t){t($(a(r.items),WT))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:b_(r.icon,r.text,r.tooltip,S.none(),S.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:u}}}});default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=m({type:"advanced"},o.styleselect),V_(n,o,cI(n,r));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,V_(n,o,tI(n));var n,o},fontSelectButton:function(t,e){return n=t,o=e.backstage,V_(n,o,K_(n));var n,o},formatButton:function(t,e){return n=t,o=e.backstage,V_(n,o,uI(n));var n,o},alignMenuButton:function(t,e){return n=t,o=e.backstage,V_(n,o,W_(n));var n,o}},mI={styleselect:fI.styleSelectButton,fontsizeselect:fI.fontsizeSelectButton,fontselect:fI.fontSelectButton,formatselect:fI.formatButton,align:fI.alignMenuButton},dI=function(t){var e,n,o,r=t.toolbar,i=t.buttons;return!1===r?[]:void 0===r||!0===r?(n=i,o=$(sI,(function(t){var e=G(t.items,(function(t){return Bt(n,t)||Bt(mI,t)}));return{name:t.name,items:e}})),G(o,(function(t){return 0<t.items.length}))):T(r)?(e=r.split("|"),$(e,(function(t){return{items:t.trim().split(" ")}}))):P(r,(function(t){return Bt(t,"name")&&Bt(t,"items")}))?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},pI=function(t,e,n,o,r,i){return Pt(e,n.toLowerCase()).orThunk((function(){return i.bind((function(t){return ct(t,(function(t){return Pt(e,t+n.toLowerCase())}))}))})).fold((function(){return Pt(mI,n.toLowerCase()).map((function(e){return e(t,r)})).orThunk((function(){return S.none()}))}),(function(e){return"grouptoolbarbutton"!==e.type||o?(a=r,u=t,Pt(fI,(i=e).type).fold((function(){return console.error("skipping button defined by",i),S.none()}),(function(t){return S.some(t(i,a,u))}))):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),S.none());var i,a,u}))},gI=function(t,e,n,o){var r=dI(e),i=$(r,(function(r){var i=Q(r.items,(function(r){return 0===r.trim().length?[]:pI(t,e.buttons,r,e.allowToolbarGroups,n,o).toArray()}));return{title:S.from(t.translate(r.name)),items:i}}));return G(i,(function(t){return 0<t.items.length}))},hI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},vI={maxHeightFunction:Mc(),maxWidthFunction:qD()},bI={onLtr:function(){return[Ju,$u,Hu,ju,Lu,Nu,fg,mg,sg,ug,lg,cg]},onRtl:function(){return[Ju,$u,Lu,Nu,Hu,ju,fg,mg,lg,cg,sg,ug]}},yI={onLtr:function(){return[$u,ju,Nu,Hu,Lu,Ju,fg,mg,sg,ug,lg,cg]},onRtl:function(){return[$u,Nu,ju,Lu,Hu,Ju,fg,mg,lg,cg,sg,ug]}},xI=function(t,e,o,r){var i,a,u=$n().deviceType.isTouch,c=ga((i={sink:o,onEscape:function(){return t.focus(),S.some(!0)}},a=dn([]),eg.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){a.set([]),eg.getContent(t).each((function(t){na(t.element,"visibility")})),ji(t.element,P_),na(t.element,"width")},inlineBehaviours:ac([dp("context-toolbar-events",[lr(xo(),(function(t,e){ji(t.element,P_),na(t.element,"width")})),rr(M_,(function(t,e){var n=t.element;na(n,"width");var o=Ta(n);eg.setContent(t,e.event.contents),Vi(n,P_);var r=Ta(n);Yi(n,"width",o+"px"),eg.getContent(t).each((function(t){e.event.focus.bind((function(t){return pc(t),hc(n)})).orThunk((function(){return up.focusIn(t),gc(Rr(n))}))})),dg.setTimeout((function(){Yi(t.element,"width",r+"px")}),0)})),rr(F_,(function(t,e){eg.getContent(t).each((function(e){a.set(a.get().concat([{bar:e,focus:gc(Rr(t.element))}]))})),Ko(t,M_,{contents:e.event.forwardContents,focus:S.none()})})),rr(R_,(function(t,e){at(a.get()).each((function(e){a.set(a.get().slice(0,a.get().length-1)),Ko(t,M_,{contents:ha(e.bar),focus:e.focus})}))}))]),up.config({mode:"special",onEscape:function(t){return at(a.get()).fold((function(){return i.onEscape()}),(function(e){return Yo(t,R_),S.some(!0)}))}})]),lazySink:function(){return ft.value(i.sink)}}))),s=function(){return T_(t,r.backstage.shared)},l=function(){if(u()&&r.backstage.isContextMenuOpen())return!0;var e,n,o,i,a,c,l=(e=h.get().filter((function(t){return $i(gn.fromDom(t))})).map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Fa().top:Ha(gn.fromDom(t.getBody())).y,{y:e.top+n,bottom:e.bottom+n}),f=s();return o=l.y,i=l.bottom,a=f.y,c=f.bottom,!(Math.max(o,a)<=Math.min(i,c))},f=function(){g.set(S.none()),eg.hide(c)},d=function(){eg.hide(c)},p=function(){g.get().each((function(t){var e=c.element;na(e,"display"),l()?Yi(e,"display","none"):el.positionWithinBounds(o,t,c,S.some(s()))}))},g=dn(S.none()),h=dn(S.none()),v=dn(null),b=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:ac([up.config({mode:"acyclic"}),dp("pop-dialog-wrap-events",[fr((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return up.focusIn(e)}))})),mr((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},y=Jt((function(){return A_(e,(function(t){var e=x([t]);Ko(c,F_,{forwardContents:b(e)})}))})),x=function(e){var n=t.ui.registry.getAll().buttons,o=y(),i=m(m({},n),o.formNavigators),a=Iv(t)===ih.scrolling?ih.scrolling:ih["default"],u=Z($(e,(function(e){return"contexttoolbar"===e.type?gI(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},r,S.some(["form:"])):(n=e,o=r.backstage.shared.providers,D_(n,o));var n,o})));return qT({type:a,uid:ii("context-toolbar"),initGroups:u,onEscape:S.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};t.on("contexttoolbar-show",(function(e){var n=y();Pt(n.lookupTable,e.toolbarKey).each((function(n){C([n],e.target===t?S.none():S.some(e)),eg.getContent(c).each(up.focusIn)}))}));var w=function(t,e){var n,o,i="node"===t?r.backstage.shared.anchors.node(e):r.backstage.shared.anchors.cursor();return Ht(i,(n=t,o=u(),"line"===n?{bubble:jc(12,0,hI),layouts:{onLtr:function(){return[Uu]},onRtl:function(){return[Wu]}},overrides:vI}:{bubble:jc(0,12,hI),layouts:o?yI:bI,overrides:vI}))},C=function(t,e){var n,o,i,a;O(),u()&&r.backstage.isContextMenuOpen()||(n=x(t),o=e.map(gn.fromDom),i=w(t[0].position,o),g.set(S.some(i)),h.set(e),a=c.element,na(a,"display"),eg.showWithinBounds(c,i,b(n),(function(){return S.some(s())})),l()&&Yi(a,"display","none"))},k=function(){var e,n,o,r,i,a,u;t.hasFocus()&&(e=y(),n=e,o=t,i=gn.fromDom(o.getBody()),a=function(t){return Gn(t,i)},u=gn.fromDom(o.selection.getNode()),(a(r=u)||Yn(i,r)?I_(u,n.inNodeScope,n.inEditorScope).orThunk((function(){return E_(a,u,n)})):S.none()).fold(f,(function(t){C(t.toolbars,S.some(t.elem.dom))})))},O=function(){var t=v.get();null!==t&&(dg.clearTimeout(t),v.set(null))},D=function(){O(),v.set(dg.setEditorTimeout(t,k,0))};t.on("init",(function(){t.on(ZD,d),t.on("ScrollContent ScrollWindow longpress",p),t.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){D()})),t.on("focusout",(function(e){dg.setEditorTimeout(t,(function(){hc(o.element).isNone()&&hc(c.element).isNone()&&f()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&f()})),t.on("AfterProgressState",(function(e){e.state?f():t.hasFocus()&&D()})),t.on("NodeChange",(function(t){hc(c.element).fold(D,n)}))}))},wI=Lf,CI=Of,kI=r([nn("shell",!1),Le("makeItem"),nn("setupItem",n),Gl("listBehaviours",[mp])]),SI=Cf({name:"items",overrides:function(){return{behaviours:ac([mp.config({})])}}}),OI=r([SI]),DI=Yf({name:r("CustomList")(),configFields:kI(),partFields:OI(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[mp.config({})],components:[]}:{behaviours:[],components:e},i=function(e){return t.shell?S.some(e):Mf(e,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Wl(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){i(e).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=mp.contents(o),i=n.length,a=i-r.length,u=0<a?L(a,(function(){return t.makeItem()})):[],c=r.slice(i);U(c,(function(t){return mp.remove(o,t)})),U(u,(function(t){return mp.append(o,t)}));var s=mp.contents(o);U(s,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),TI=r([]),_I=Object.freeze({__proto__:null,setup:n,isDocked:s,getBehaviours:TI}),II=function(t){return(ta(t,"position").is("fixed")?S.none():Tr(t)).orThunk((function(){var e=gn.fromTag("span");return Or(t).bind((function(t){Hr(t,e);var n=Tr(e);return $r(e),n}))}))},EI=function(t){return II(t).map(Sa).getOrThunk((function(){return Ca(0,0)}))},AI=zt([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),FI=function(t,e){var n=t.element;Vi(n,e.transitionClass),ji(n,e.fadeOutClass),Vi(n,e.fadeInClass),e.onShow(t)},RI=function(t,e){var n=t.element;Vi(n,e.transitionClass),ji(n,e.fadeInClass),Vi(n,e.fadeOutClass),e.onHide(t)},MI=function(t,e,n){return tt(t,(function(t){switch(t){case"bottom":return r=n,e.bottom<=r.bottom;case"top":return o=n,e.y>=o.y}var o,r}))},PI=function(t,e){return e.getInitialPosition().map((function(e){return ja(e.bounds.x,e.bounds.y,Ta(t),ya(t))}))},BI=function(t,e,n){n.setInitialPosition(S.some({style:function(t){var e={},n=t.dom;if(Ji(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e}(t),position:Zi(t,"position")||"static",bounds:e}))},VI=function(t,e,n){return n.getInitialPosition().bind((function(o){switch(n.setInitialPosition(S.none()),o.position){case"static":return S.some(AI["static"]());case"absolute":var r=II(t).map(Na).getOrThunk((function(){return Na(Ui())}));return S.some(AI.absolute(bc("absolute",Pt(o.style,"left").map((function(t){return e.x-r.x})),Pt(o.style,"top").map((function(t){return e.y-r.y})),Pt(o.style,"right").map((function(t){return r.right-e.right})),Pt(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return S.none()}}))},zI=function(t,e,n){var o,r,i,a=t.element;return ta(a,"position").is("fixed")?(r=e,PI(o=a,i=n).filter((function(t){return MI(i.getModes(),t,r)})).bind((function(t){return VI(o,t,i)}))):function(t,e,n){var o=Na(t);if(MI(n.getModes(),o,e))return S.none();BI(t,o,n);var r=La(),i=o.x-r.x,a=e.y-r.y,u=r.bottom-e.bottom,c=o.y<=e.y;return S.some(AI.fixed(bc("fixed",S.some(i),c?S.some(a):S.none(),S.none(),c?S.none():S.some(u))))}(a,e,n)},jI=function(t,e){U(["left","right","top","bottom","position"],(function(e){return na(t.element,e)})),e.onUndocked(t)},NI=function(t,e,n){yc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},HI=function(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var a,u,c=(u=o,(a=i).y<u.bottom&&a.bottom>u.y);c!==n.isVisible()&&(n.setVisible(c),r&&!c?(Hi(t.element,[e.fadeOutClass]),e.onHide(t)):(c?FI:RI)(t,e))}))}))},LI=function(t,e,o){var r,i,a=t.element;o.setDocked(!1),r=o,i=t.element,PI(i,r).bind((function(t){return VI(i,t,r)})).each((function(o){o.fold((function(){return jI(t,e)}),(function(n){return NI(t,e,n)}),n)})),o.setVisible(!0),e.contextual.each((function(e){Li(a,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),JI(t,e,o)},JI=function(t,e,n){var o,r,i,a,u;t.getSystem().isConnected()&&(o=t,i=n,a=(r=e).lazyViewport(o),(u=i.isDocked())&&HI(o,r,i,a),zI(o,a,i).each((function(t){i.setDocked(!u),t.fold((function(){return jI(o,r)}),(function(t){return NI(o,r,t)}),(function(t){HI(o,r,i,a,!0),NI(o,r,t)}))})))},$I=function(t,e,n){n.isDocked()&&LI(t,e,n)},UI=Object.freeze({__proto__:null,refresh:JI,reset:$I,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),WI=Object.freeze({__proto__:null,events:function(t,e){return er([lr(xo(),(function(n,o){t.contextual.each((function(t){Ni(n.element,t.transitionClass)&&(Li(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()}))})),rr(Vo(),(function(n,o){JI(n,t,e)})),rr(zo(),(function(n,o){$I(n,t,e)}))])}}),GI=[en("contextual",[$e("fadeInClass"),$e("fadeOutClass"),$e("transitionClass"),We("lazyContext"),gu("onShow"),gu("onShown"),gu("onHide"),gu("onHidden")]),sn("lazyViewport",La),ln("modes",["top","bottom"],Be),gu("onDocked"),gu("onUndocked")],XI=cc({fields:GI,name:"docking",active:WI,apis:UI,state:Object.freeze({__proto__:null,init:function(t){var e=dn(!1),n=dn(!0),o=dn(S.none()),r=dn(t.modes);return Ci({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),YI={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},KI="tox-tinymce--toolbar-sticky-on",qI="tox-tinymce--toolbar-sticky-off",ZI=function(t){var e=t.element;Or(e).each((function(n){var o,r,i="padding-"+XI.getModes(t)[0];XI.isDocked(t)?(o=Ta(n),Yi(e,"width",o+"px"),Yi(n,i,xa(r=e)+(parseInt(Zi(r,"margin-top"),10)||0)+(parseInt(Zi(r,"margin-bottom"),10)||0)+"px")):(na(e,"width"),na(n,i))}))},QI=function(t,e){e?(ji(t,YI.fadeOutClass),Hi(t,[YI.transitionClass,YI.fadeInClass])):(ji(t,YI.fadeInClass),Hi(t,[YI.fadeOutClass,YI.transitionClass]))},tE=function(t,e){var n=gn.fromDom(t.getContainer());e?(Vi(n,KI),ji(n,qI)):(Vi(n,qI),ji(n,KI))},eE=function(t,e){var n,o=dn(S.none()),r=e.getSink,i=function(t){r().each((function(e){return t(e.element)}))},a=function(e){t.inline||ZI(e),tE(t,XI.isDocked(e)),e.getSystem().broadcastOn([Ol()],{}),r().each((function(t){return t.getSystem().broadcastOn([Ol()],{})}))},u=t.inline?[]:[mc.config({channels:((n={})[$T()]={onReceive:ZI},n)})];return p([bp.config({}),XI.config({contextual:m({lazyContext:function(e){var n,o,r=xa(e.element),i=t.inline?t.getContentAreaContainer():t.getContainer(),a=Na(gn.fromDom(i)),u=a.height-r,c=a.y+(n=e,o="top",N(XI.getModes(n),o)?0:r);return S.some(ja(a.x,c,a.width,u))},onShow:function(){i((function(t){return QI(t,!0)}))},onShown:function(t){i((function(t){return Li(t,[YI.transitionClass,YI.fadeInClass])})),o.get().each((function(e){var n,r,i;n=t.element,i=wr(r=e),gc(i).filter((function(t){return!Gn(r,t)})).filter((function(t){return Gn(t,gn.fromDom(i.dom.body))||Yn(n,t)})).each((function(){return pc(r)})),o.set(S.none())}))},onHide:function(t){var e,n;o.set((e=t.element,n=r,hc(e).orThunk((function(){return n().toOptional().bind((function(t){return hc(t.element)}))})))),i((function(t){return QI(t,!1)}))},onHidden:function(){i((function(t){return Li(t,[YI.transitionClass])}))}},YI),modes:[e.header.getDockingMode()],onDocked:a,onUndocked:a})],u)},nE=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(XI.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(ZI)})),t.on("SkinLoaded",(function(){n().each((function(t){XI.isDocked(t)?XI.reset(t):XI.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(XI.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){XI.refresh(e);var n,o,r,i,a,u,c,s,l,f,m,d,p,g,h,v,b,y=e.element;ed(y)&&(n=t,i=wr(o=y),a=i.dom.defaultView.innerHeight,u=Fa(i),c=gn.fromDom(n.elm),s=Ha(c),l=ya(c),f=s.y,m=f+l,d=Sa(o),p=ya(o),g=d.top,h=g+p,v=Math.abs(g-u.top)<2,b=Math.abs(h-(u.top+a))<2,v&&f<h?Ra(u.left,f-p,i):b&&g<m&&(r=f-a+l+p,Ra(u.left,r,i)))}))})),t.on("PostRender",(function(){tE(t,!1)}))},isDocked:function(t){return t().map(XI.isDocked).getOr(!1)},getBehaviours:eE}),oE=Xf({factory:function(t,e){var n={focus:up.focusIn,setMenus:function(t,n){var o=$(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},o=e_(n).mapError((function(t){return Ee(t)})).getOrDie();return $S(o,"tox-mbtn",e.backstage,S.some("menuitem"))}));mp.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:ac([mp.config({}),dp("menubar-events",[fr((function(e){t.onSetup(e)})),rr(fo(),(function(t,e){Ka(t.element,".tox-mbtn--active").each((function(n){qa(e.event.target,".tox-mbtn").each((function(e){Gn(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){iw.expand(t),iw.close(n),bp.focus(t)}))}))}))}))})),rr(Jo(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){iw.isOpen(n)&&(iw.expand(t),iw.close(n))}))}))}))]),up.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),S.some(!0)}}),Yy.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Le("dom"),Le("uid"),Le("onEscape"),Le("backstage"),nn("onSetup",n)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),rE="container",iE=[$l("slotBehaviours",[])],aE=function(t){return"<alloy.field."+t+">"},uE=function(t,e){var n,o=function(e){return zf(t)},r=function(e,n){return function(o,r){return Mf(o,t,r).map((function(t){return e(t,r)})).getOr(n)}},i=function(t,e){return"true"!==Kr(t.element,"aria-hidden")},a=r(i,!1),u=r((function(t,e){var n;i(t)&&(n=t.element,Yi(n,"display","none"),Yr(n,"aria-hidden","true"),Ko(t,$o(),{name:e,visible:!1}))})),c=function(t,e){U(e,(function(e){return n(t,e)}))},s=r((function(t,e){var n;i(t)||(n=t.element,na(n,"display"),Qr(n,"aria-hidden"),Ko(t,$o(),{name:e,visible:!0}))})),l={getSlotNames:o,getSlot:function(e,n){return Mf(e,t,n)},isShowing:a,hideSlot:n=u,hideAllSlots:function(t){return c(t,o())},showSlot:s};return{uid:t.uid,dom:t.dom,components:e,behaviours:Ul(t.slotBehaviours),apis:l}},cE=It({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},xi),sE=m(m({},cE),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),If(rE,aE(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=$(r,(function(t){return xf({name:t,pname:aE(t)})}));return $f(rE,iE,i,uE,o)}}),lE=me([Qe("icon"),Qe("tooltip"),sn("onShow",n),sn("onHide",n),sn("onSetup",(function(){return n}))]),fE=function(t){return{element:function(){return t.element.dom}}},mE=function(t,e){var o=$(Dt(e),(function(t){var n=e[t],o=_e(Te("sidebar",lE,n));return{name:t,getApi:fE,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return $(o,(function(e){var r=dn(n);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Uh([Kv(e,r),qv(e,r),rr($o(),(function(t,e){var n=e.event;K(o,(function(t){return t.name===n.name})).each((function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},dE=function(t,e){em.getCurrent(t).each((function(t){return mp.set(t,[(n=e,sE.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:mE(t,n),slotBehaviours:Uh([fr((function(t){return sE.hideAllSlots(t)}))])}})))]);var n}))},pE=function(t){return em.getCurrent(t).bind((function(t){return zT.isGrowing(t)||zT.hasGrown(t)?em.getCurrent(t).bind((function(t){return K(sE.getSlotNames(t),(function(e){return sE.isShowing(t,e)}))})):S.none()}))},gE=ii("FixSizeEvent"),hE=ii("AutoSizeEvent"),vE=function(t){var e,n,o,r=gn.fromHtml(t),i=_r(r),a=(n=void 0!==(e=r).dom.attributes?e.dom.attributes:[],Y(n,(function(t,e){var n;return"class"===e.name?t:m(m({},t),((n={})[e.name]=e.value,n))}),{})),u=(o=r,Array.prototype.slice.call(o.dom.classList,0)),c=0===i.length?{}:{innerHtml:Wr(r)};return m({tag:gr(r),classes:u,attributes:a},c)},bE=function(t,e,n){var o=t.element;!0===e?(mp.set(t,[{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:vE('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:ac([up.config({mode:"special",onTab:function(){return S.some(!0)},onShiftTab:function(){return S.some(!0)}}),bp.config({})])}]),na(o,"display"),Qr(o,"aria-hidden")):(mp.set(t,[]),Yi(o,"display","none"),Yr(o,"aria-hidden","true"))},yE=CI.optional({factory:oE,name:"menubar",schema:[Le("backstage")]}),xE=CI.optional({factory:{sketch:function(t){return DI.sketch({uid:t.uid,dom:t.dom,listBehaviours:ac([up.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return qT({type:t.type,uid:ii("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),S.some(!0)}})},setupItem:function(t,e,n,o){eT.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[Le("dom"),Le("onEscape")]}),wE=CI.optional({factory:{sketch:function(t){var e;return((e=t).type===ih.sliding?KT:e.type===ih.floating?YT:qT)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),S.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[Le("dom"),Le("onEscape"),Le("getSink")]}),CE=CI.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?eE:TI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ac(n(e,t.sharedBackstage))}}},name:"header",schema:[Le("dom")]}),kE=CI.optional({name:"socket",schema:[Le("dom")]}),SE=CI.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ac([Yy.config({}),bp.config({}),zT.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){em.getCurrent(t).each(sE.hideAllSlots),Yo(t,hE)},onGrown:function(t){Yo(t,hE)},onStartGrow:function(t){Ko(t,gE,{width:ta(t.element,"width").getOr("")})},onStartShrink:function(t){Ko(t,gE,{width:Ta(t.element)+"px"})}}),mp.config({}),em.config({find:function(t){var e=mp.contents(t);return it(e)}})])}],behaviours:ac([sk(0),dp("sidebar-sliding-events",[rr(gE,(function(t,e){Yi(t.element,"width",e.event.width)})),rr(hE,(function(t,e){na(t.element,"width")}))])])}}},name:"sidebar",schema:[Le("dom")]}),OE=CI.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ac([mp.config({})]),components:[]}}},name:"throbber",schema:[Le("dom")]}),DE=Yf({name:"OuterContainer",factory:function(t,e,n){var o={getSocket:function(e){return wI.getPart(e,t,"socket")},setSidebar:function(e,n){wI.getPart(e,t,"sidebar").each((function(t){return dE(t,n)}))},toggleSidebar:function(e,n){wI.getPart(e,t,"sidebar").each((function(t){return e=t,o=n,void em.getCurrent(e).each((function(t){em.getCurrent(t).each((function(e){zT.hasGrown(t)?sE.isShowing(e,o)?zT.shrink(t):(sE.hideAllSlots(e),sE.showSlot(e,o)):(sE.hideAllSlots(e),sE.showSlot(e,o),zT.grow(t))}))}));var e,o}))},whichSidebar:function(e){return wI.getPart(e,t,"sidebar").bind(pE).getOrNull()},getHeader:function(e){return wI.getPart(e,t,"header")},getToolbar:function(e){return wI.getPart(e,t,"toolbar")},setToolbar:function(e,n){wI.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){wI.getPart(e,t,"multiple-toolbar").each((function(t){DI.setItems(t,n)}))},refreshToolbar:function(e){wI.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){wI.getPart(e,t,"toolbar").each((function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},void 0!==e&&null!==e?S.some(n(e)):S.none()}))},isToolbarDrawerToggled:function(e){return wI.getPart(e,t,"toolbar").bind((function(t){return S.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return wI.getPart(e,t,"throbber")},focusToolbar:function(e){wI.getPart(e,t,"toolbar").orThunk((function(){return wI.getPart(e,t,"multiple-toolbar")})).each((function(t){up.focusIn(t)}))},setMenubar:function(e,n){wI.getPart(e,t,"menubar").each((function(t){oE.setMenus(t,n)}))},focusMenubar:function(e){wI.getPart(e,t,"menubar").each((function(t){oE.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:o,behaviours:t.behaviours}},configFields:[Le("dom"),Le("behaviours")],partFields:[CE,yE,wE,xE,kE,SE,OE],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=$(n,WT);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=$(n,(function(t){return $(t,WT)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),TE={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},_E=function(t){return"string"==typeof t?t.split(" "):t},IE=function(t,e){var n=m(m({},TE),e.menus),o=0<Dt(e.menus).length,r=void 0===e.menubar||!0===e.menubar?_E("file edit view insert format tools table help"):_E(!1===e.menubar?"":e.menubar),i=G(r,(function(t){return o&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||TE.hasOwnProperty(t)})),a=$(i,(function(o){var r,i,a,u=n[o];return r={title:u.title,items:_E(u.items)},i=e,a=t.getParam("removed_menuitems","").split(/[ ,]/),{text:r.title,getItems:function(){return Q(r.items,(function(t){var e=t.toLowerCase();return 0===e.trim().length||H(a,(function(t){return t===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:i.menuItems[e]?[i.menuItems[e]]:[]}))}}}));return G(a,(function(t){return 0<t.getItems().length&&H(t.getItems(),(function(t){return"separator"!==t.type}))}))},EE=function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}},AE=function(t,e){return function(){return n={message:e},t.fire("SkinLoadError",n);var n}},FE=function(t,e,n){return new Mg((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))},RE=function(t,e){var n;return n=gn.fromDom(t.getElement()),Pr(n).isSome()?FE(t,e+"/skin.shadowdom.min.css",tv.DOM.styleSheetLoader):Mg.resolve()},ME=function(t,e){var n,o,r,i,a,u=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):hv.baseURL+"/skins/ui/"+o),i);u&&e.contentCSS.push(u+(t?"/content.inline":"/content")+".min.css"),0==(!1===e.getParam("skin"))&&T(u)?Mg.all([FE(a=e,u+"/skin.min.css",a.ui.styleSheetLoader),RE(e,u)]).then(EE(e),AE(e,"Skin could not be loaded")):EE(e)()},PE=a(ME,!1),BE=a(ME,!0),VE=function(t,e,n,o){var r,i=e.outerContainer,a=n.toolbar,u=n.buttons;P(a,T)?(r=a.map((function(e){var r={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return gI(t,r,{backstage:o},S.none())})),DE.setToolbars(i,r)):DE.setToolbar(i,gI(t,n,{backstage:o},S.none()))},zE=$n(),jE=zE.os.isiOS()&&zE.os.version.major<=12,NE=function(t,e){var n=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=dn(Ca(o.innerWidth,o.innerHeight)),a=dn(Ca(r.offsetWidth,r.offsetHeight)),u=function(){var e=i.get();e.left===o.innerWidth&&e.top===o.innerHeight||(i.set(Ca(o.innerWidth,o.innerHeight)),Bb(t))},c=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(Ca(e.offsetWidth,e.offsetHeight)),Bb(t))},s=function(e){return n=e,t.fire("ScrollContent",n);var n};n.bind(o,"resize",u),n.bind(o,"scroll",s);var l=Oy(gn.fromDom(t.getBody()),"load",c),f=e.uiMothership.element;t.on("hide",(function(){Yi(f,"display","none")})),t.on("show",(function(){na(f,"display")})),t.on("NodeChange",c),t.on("remove",(function(){l.unbind(),n.unbind(o,"resize",u),n.unbind(o,"scroll",s),o=null}))},HE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=dn(0),a=e.outerContainer;PE(t);var u,c,s=gn.fromDom(r.targetNode),l=Mr(Rr(s));u=s,c=e.mothership,ml(u,c,jr),fl(l,e.uiMothership),t.on("PostRender",(function(){VE(t,e,n,o),i.set(t.getWin().innerWidth),DE.setMenubar(a,IE(t,n)),DE.setSidebar(a,n.sidebar),NE(t,e)}));var f,m,d,p,g,h=DE.getSocket(a).getOrDie("Could not find expected socket element");jE&&(Ki(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),d=function(){t.fire("ScrollContent")},p=20,g=null,f={cancel:function(){null!==g&&(clearTimeout(g),g=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===g&&(g=setTimeout((function(){d.apply(null,t),g=null}),p))}},m=Sy(h.element,"scroll",f.throttle),t.on("remove",m.unbind)),Jv(t,e),t.addCommand("ToggleSidebar",(function(e,n){DE.toggleSidebar(a,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return DE.whichSidebar(a)}));var v=Iv(t);v!==ih.sliding&&v!==ih.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(DE.refreshToolbar(e.outerContainer),i.set(n))}));var b={enable:function(){Lv(e,!1)},disable:function(){Lv(e,!0)},isDisabled:function(){return gv.isDisabled(a)}};return{iframeContainer:h.element.dom,editorContainer:a.element.dom,api:b}}}),LE=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?S.some(parseInt(""+t,10)):S.none()},JE=function(t){return M(t)?t+"px":t},$E=function(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return e<t}));return o.or(r).getOr(t)},UE=function(t){var e,n,o,r;return(n=vv(e=t),o=xv(e),r=Cv(e),LE(n).map((function(t){return $E(t,o,r)}))).getOr(vv(t))},WE=function(t){var e=bv(t),n=yv(t),o=wv(t);return LE(e).map((function(t){return $E(t,n,o)}))},GE=function(t,e,n,o,r){var i=n.uiMothership,a=n.outerContainer,u=tv.DOM,c=Bv(t),s=jv(t),l=wv(t).or(WE(t)),f=o.shared.header,m=f.isPositionedAtTop,d=Iv(t),p=d===ih.sliding||d===ih.floating,g=dn(!1),h=function(){return g.get()&&!t.removed},v=function(t){return p?t.fold((function(){return 0}),(function(t){return 1<t.components().length?ya(t.components()[1].element):0})):0},b=function(){i.broadcastOn([Ol()],{})},y=function(t){var n,o,i,u,f,d;void 0===t&&(t=!1),h()&&(c||(n=l.getOrThunk((function(){var t=LE(Zi(Ui(),"margin-left")).getOr(0);return Ta(Ui())-Sa(e).left+t})),Yi(r.get().element,"max-width",n+"px")),p&&DE.refreshToolbar(a),c||(o=DE.getToolbar(a),i=v(o),u=Na(e),f=m()?Math.max(u.y-ya(r.get().element)+i,0):u.bottom,Ki(a.element,{position:"absolute",top:Math.round(f)+"px",left:Math.round(u.x)+"px"})),s&&(d=r.get(),t?XI.reset(d):XI.refresh(d)),b())},x=function(n){var o,i;void 0===n&&(n=!0),!c&&s&&h()&&(o=f.getDockingMode(),(i=function(n){switch(Rv(t)){case Tv.auto:var o=DE.getToolbar(a),r=v(o),i=ya(n.element)-r,u=Na(e);if(u.y>i)return"top";var c=kr(e),s=Math.max(c.dom.scrollHeight,ya(c));return u.bottom<s-i||La().bottom<u.bottom-i?"bottom":"top";case Tv.bottom:return"bottom";case Tv.top:default:return"top"}}(r.get()))!==o&&(function(t){var e=r.get();XI.setModes(e,[t]),f.setDockingMode(t);var n=m()?nu.TopToBottom:nu.BottomToTop;Yr(e.element,Xc,n)}(i),n&&y(!0)))};return{isVisible:h,isPositionedAtTop:m,show:function(){g.set(!0),Yi(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),na(i.element,"display"),x(!1),y()},hide:function(){g.set(!1),n.outerContainer&&(Yi(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),Yi(i.element,"display","none")},update:y,updateMode:x,repositionPopups:b}},XE=function(t,e){var n=Na(t);return{pos:e?n.y:n.bottom,bounds:n}},YE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,c=dn(null),s=gn.fromDom(r.targetNode),l=GE(t,s,e,o,c),f=t.getParam("toolbar_persist",!1,"boolean");BE(t);var m=function(){var r;c.get()?l.show():(c.set(DE.getHeader(u).getOrDie()),r=Vv(t),fl(r,i),fl(r,a),VE(t,e,n,o),DE.setMenubar(u,IE(t,n)),l.show(),function(t,e,n,o){var r=dn(XE(e,n.isPositionedAtTop())),i=function(o){var i=XE(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,c=r.get(),s=c.pos,l=c.bounds,f=u.height!==l.height||u.width!==l.width;r.set({pos:a,bounds:u}),f&&Bb(t,o),n.isVisible()&&(s!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){dg.requestAnimationFrame((function(){return i(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var a=rI();a.set(Oy(gn.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){a.clear()}))}(t,s,l,f),t.nodeChanged())};t.on("show",m),t.on("hide",l.hide),f||(t.on("focus",m),t.on("blur",l.hide)),t.on("init",(function(){(t.hasFocus()||f)&&m()})),Jv(t,e);var d={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Lv(e,!1)},disable:function(){Lv(e,!0)},isDisabled:function(){return gv.isDisabled(u)}};return{editorContainer:u.element.dom,api:d}}}),KE=function(t,e){var n,o,r,i,a,u,c,s,l,f,d,p,g,h;r=B_(0,o=e,W_(n=t)),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}}),u=B_(0,a=e,K_(i=t)),i.ui.registry.addNestedMenuItem("fontformats",{text:a.shared.providers.translate("Fonts"),getSubmenuItems:function(){return u.items.validateItems(u.getStyleItems())}}),c=t,l=m({type:"advanced"},(s=e).styleselect),f=B_(0,s,cI(c,l)),c.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),p=B_(0,e,uI(d=t)),d.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return p.items.validateItems(p.getStyleItems())}}),h=B_(0,e,tI(g=t)),g.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return h.items.validateItems(h.getStyleItems())}})},qE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ZE=(j_="[eE][+-]?[0-9]+",H_=["Infinity",(z_="[0-9]+")+"\\."+(N_=function(t){return"(?:"+t+")?"})(z_)+N_(j_),"\\."+z_+N_(j_),z_+N_(j_)].join("|"),new RegExp("^([+-]?(?:"+H_+"))(.*)$")),QE=function(t,e){return S.from(ZE.exec(t)).bind((function(t){var n,o=Number(t[1]),r=t[2];return n=r,H(e,(function(t){return H(qE[t],(function(t){return n===t}))}))?S.some({value:o,unit:r}):S.none()}))},tA=function(t){return QE(t,["fixed","relative","empty"]).map((function(t){return t.value+t.unit})).getOr(t)},eA=function(t){var e=t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" "),n=new Map,o=oI(),r=function(){var e=tA(t.queryCommandValue("LineHeight"));S.from(n.get(e)).fold((function(){return o.clear()}),(function(t){o.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)}))};return t.on("nodeChange",r),$(e,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(tA(i),u),a+1===e.length&&r(),function(){0===a&&(t.off("nodeChange",r),o.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}}))},nA=function(t){var e,n;(e=t).ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return eA(e)}}),(n=t).ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(eA(n))}})},oA=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},rA=function(t){var e,n;!function(t){dk.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:iI(t,e.name),onAction:oA(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:iI(t,n),onAction:oA(t,n)})}}(t),e=t,dk.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})),n=t,dk.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:iI(n,t.name)})}))},iA=function(t){var e;rA(t),e=t,dk.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:oA(e,"code")})},aA=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},uA=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return aA(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return aA(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return aA(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return aA(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},cA=function(t,e){var n,o,r,i;!function(t){dk.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:iI(t,e.name)})}));var e="alignnone",n="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(o)},icon:r})}(t),iA(t),KE(t,e),uA(t),function(t){Ub(t);var e=dn(null),n=dn(null);qb(t,"forecolor","forecolor","Text color",e),qb(t,"backcolor","hilitecolor","Background color",n),Zb(t,"forecolor","forecolor","Text color"),Zb(t,"backcolor","hilitecolor","Background color")}(t),(o=n=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return o.execCommand("mceToggleVisualAid")}}),(r=n).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(t,r)},onAction:function(){r.execCommand("mceToggleVisualAid")}}),(i=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(t,i)},onAction:function(){return i.execCommand("outdent")}}),i.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return i.execCommand("indent")}}),nA(t)},sA=function(t,e){return{anchor:"makeshift",x:t,y:e}},lA=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},fA=function(t,e){var n,o,r,i=tv.DOM.getPos(t);return n=e,o=i.x,r=i.y,sA(n.x+o,n.y+r)},mA=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(lA(t)){var e=t.touches[0];return sA(e.pageX,e.pageY)}return sA(t.pageX,t.pageY)}(e):fA(t.getContentAreaContainer(),function(t){if(lA(t)){var e=t.touches[0];return sA(e.clientX,e.clientY)}return sA(t.clientX,t.clientY)}(e)):dA(t)},dA=function(t){return{anchor:"selection",root:gn.fromDom(t.selection.getNode())}},pA=function(t){return{anchor:"node",node:S.some(gn.fromDom(t.selection.getNode())),root:gn.fromDom(t.getBody())}},gA=function(t,e,n,o,r,i){var a=n(),u=i?pA(t):mA(t,e);LS(a,uh.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),eg.showMenuAt(r,u,{menu:{markers:xh("normal")},data:t})}))},hA={onLtr:function(){return[$u,ju,Nu,Hu,Lu,Ju,fg,mg,sg,ug,lg,cg]},onRtl:function(){return[$u,Nu,ju,Lu,Hu,Ju,fg,mg,lg,cg,sg,ug]}},vA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bA=function(t,e,n,o,r,i,a){var u,c,s=i?pA(t):(u=t,c=e,m({bubble:jc(0,12,vA),layouts:hA,overrides:{maxWidthFunction:qD(),maxHeightFunction:Mc()}},mA(u,c)));LS(n,uh.CLOSE_ON_EXECUTE,o,!0).map((function(n){e.preventDefault(),eg.showMenuWithinBounds(r,s,{menu:{markers:xh("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return S.some(T_(t,o.shared))})),t.fire(ZD)}))},yA=function(t,e,n,o,r,i){var a,u=$n(),c=u.os.isiOS(),s=u.os.isOSX(),l=u.os.isAndroid(),f=u.deviceType.isTouch(),m=function(){var a=n();bA(t,e,a,o,r,i,!(l||c||s&&f))};!s&&!c||i?(l&&!i&&t.selection.setCursorLocation(e.target,0),m()):(a=function(){!function(t){var e=t.selection.getRng(),n=function(){dg.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(t),m()},function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Fs(t.getWin(),gs.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)}))))},xA=function(t){return"string"==typeof t?t.split(/[ ,]/):t},wA=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},CA=function(t){return n="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(e=t).ui.registry.getAll().contextMenus,S.from(e.getParam(n)).map(xA).getOrThunk((function(){return G(xA(o),(function(t){return Bt(r,t)}))}));var e,n,o,r},kA=function(t){return T(t)?"|"===t:"separator"===t.type},SA={type:"separator"},OA=function t(e){if(T(e))return e;switch(e.type){case"separator":return SA;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var n=e.getSubmenuItems();return T(n)?n:$(n,t)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){return n()})}}var n},DA=function(t,e){if(0===e.length)return t;var n=at(t).filter((function(t){return!kA(t)})).fold((function(){return[]}),(function(t){return[SA]}));return t.concat(n).concat(e).concat([SA])},TA=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},_A=function(t,e){return TA(t,e)?t.selection.getStart(!0):e.target},IA=function(t,e,n){var o=$n().deviceType.isTouch,r=ga(eg.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ac([dp("dismissContextMenu",[rr(Ho(),(function(e,n){kl.close(e),t.focus()}))])])})),i=function(t){return eg.hide(r)},a=function(e){var i,a;wA(t)&&e.preventDefault(),i=t,e.ctrlKey&&!wA(i)||!1===t.getParam("contextmenu")||(a=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string");if(TA(t,e))return!0;if(n){var o=_A(t,e);return Ty(gn.fromDom(o),n)}return!1}(t,e),(o()?yA:gA)(t,e,(function(){var n,o,r,i=_A(t,e),a=t.ui.registry.getAll(),u=CA(t);return n=a.contextMenus,o=i,0<(r=Y(u,(function(t,e){if(Bt(n,e)){var r=n[e].update(o);if(T(r))return DA(t,r.split(" "));if(0<r.length){var i=$(r,OA);return DA(t,i)}return t}return t.concat([e])}),[])).length&&kA(r[r.length-1])&&r.pop(),r}),n,r,a))};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,i),t.on("longpress contextmenu",a)}))},EA=zt([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AA=function(t){return function(e){return e.translate(-t.left,-t.top)}},FA=function(t){return function(e){return e.translate(t.left,t.top)}},RA=function(t){return function(e,n){return Y(t,(function(t,e){return e(t)}),Ca(e,n))}},MA=function(t,e,n){return t.fold(RA([FA(n),AA(e)]),RA([AA(e)]),RA([]))},PA=function(t,e,n){return t.fold(RA([FA(n)]),RA([]),RA([FA(e)]))},BA=function(t,e,n){return t.fold(RA([]),RA([AA(n)]),RA([FA(e),AA(n)]))},VA=function(t,e,n){var o=t.fold((function(t,e){return{position:S.some("absolute"),left:S.some(t+"px"),top:S.some(e+"px")}}),(function(t,e){return{position:S.some("absolute"),left:S.some(t-n.left+"px"),top:S.some(e-n.top+"px")}}),(function(t,e){return{position:S.some("fixed"),left:S.some(t+"px"),top:S.some(e+"px")}}));return m({right:S.none(),bottom:S.none()},o)},zA=function(t,e,n,o){var r=function(t,r){return function(i,a){var u=t(e,n,o);return r(i.getOr(u.left),a.getOr(u.top))}};return t.fold(r(BA,jA),r(PA,NA),r(MA,HA))},jA=EA.offset,NA=EA.absolute,HA=EA.fixed,LA=function(t,e){var n=Kr(t,e);return A(n)?NaN:parseInt(n,10)},JA=function(t,e,n,o){return r=e,i=t.element,a=LA(i,r.leftAttr),u=LA(i,r.topAttr),(isNaN(a)||isNaN(u)?S.none():S.some(Ca(a,u))).fold((function(){return n}),(function(t){return HA(t.left+o.left,t.top+o.top)}));var r,i,a,u},$A=function(t,e,n,o,r,i){var a,u,c,s=JA(t,e,n,o),l=(e.mustSnap?GA:XA)(t,e,s,r,i),f=MA(s,r,i);return a=e,u=f,c=t.element,Yr(c,a.leftAttr,u.left+"px"),Yr(c,a.topAttr,u.top+"px"),l.fold((function(){return{coord:HA(f.left,f.top),extra:S.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))},UA=function(t,e){var n,o;n=e,o=t.element,Qr(o,n.leftAttr),Qr(o,n.topAttr)},WA=function(t,e,n,o){return ct(t,(function(t){var r,i,a,u,c,s,l,f,m=t.sensor;return r=e,i=m,a=t.range.left,u=t.range.top,l=PA(r,c=n,s=o),f=PA(i,c,s),Math.abs(l.left-f.left)<=a&&Math.abs(l.top-f.top)<=u?S.some({output:zA(t.output,e,n,o),extra:t.extra}):S.none()}))},GA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return WA(i,n,o,r).orThunk((function(){return Y(i,(function(t,e){var i,a,u,c,s,l,f,m,d=e.sensor,p=(i=n,a=d,e.range.left,e.range.top,s=PA(i,u=o,c=r),l=PA(a,u,c),f=Math.abs(s.left-l.left),m=Math.abs(s.top-l.top),Ca(f,m));return t.deltas.fold((function(){return{deltas:S.some(p),snap:S.some(e)}}),(function(n){return(p.left+p.top)/2<=(n.left+n.top)/2?{deltas:S.some(p),snap:S.some(e)}:t}))}),{deltas:S.none(),snap:S.none()}).snap.map((function(t){return{output:zA(t.output,n,o,r),extra:t.extra}}))}))},XA=function(t,e,n,o,r){var i=e.getSnapPoints(t);return WA(i,n,o,r)},YA=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,a,u,c,s,l,f,m=e.getTarget(t.element);e.repositionTarget&&(r=wr(t.element),i=Fa(r),a=EI(m),l=i,f=a,u={coord:zA((s=o).output,s.output,l,f),extra:s.extra},c=VA(u.coord,0,a),qi(m,c))}}),KA="data-initial-z-index",qA=function(t,e){var n;t.getSystem().addToGui(e),Or((n=e).element).filter(vr).each((function(t){ta(t,"z-index").each((function(e){Yr(t,KA,e)})),Yi(t,"z-index",Zi(n.element,"z-index"))}))},ZA=function(t){Or(t.element).filter(vr).each((function(t){qr(t,KA).fold((function(){return na(t,"z-index")}),(function(e){return Yi(t,"z-index",e)})),Qr(t,KA)})),t.getSystem().removeFromGui(t)},QA=function(t,e,n){return t.getSystem().build(Ly.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},tF=en("snaps",[Le("getSnapPoints"),gu("onSensor"),Le("leftAttr"),Le("topAttr"),nn("lazyViewport",La),nn("mustSnap",!1)]),eF=[nn("useFixed",s),Le("blockerClass"),nn("getTarget",i),nn("onDrag",n),nn("repositionTarget",!0),nn("onDrop",n),sn("getBounds",La),tF],nF=function(t){return e=ta(t,"left"),n=ta(t,"top"),o=ta(t,"position"),r=function(t,e,n){return("fixed"===n?HA:jA)(parseInt(t,10),parseInt(e,10))},(e.isSome()&&n.isSome()&&o.isSome()?S.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):S.none()).getOrThunk((function(){var e=Sa(t);return NA(e.left,e.top)}));var e,n,o,r},oF=function(t,e,n,o,r,i,a){var u,c,s,l,f,m,d,p,g,h=e.fold((function(){var t,e,a,u=(t=n,e=i.left,a=i.top,t.fold((function(t,n){return jA(t+e,n+a)}),(function(t,n){return NA(t+e,n+a)}),(function(t,n){return HA(t+e,n+a)}))),c=MA(u,o,r);return HA(c.left,c.top)}),(function(e){var a=$A(t,e,n,i,o,r);return a.extra.each((function(n){e.onSensor(t,n)})),a.coord}));return u=h,c=o,s=r,f=(l=a).bounds,m=PA(u,c,s),d=Tc(m.left,f.x,f.x+f.width-l.width),p=Tc(m.top,f.y,f.y+f.height-l.height),g=NA(d,p),u.fold((function(){var t=BA(g,c,s);return jA(t.left,t.top)}),(function(){return g}),(function(){var t=MA(g,c,s);return HA(t.left,t.top)}))},rF=function(t,e){return{bounds:t.getBounds(),height:xa(e.element),width:_a(e.element)}},iF=function(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk((function(){return rF(e,t)}));i.each((function(n){var o,r,i,u,c,s,l,f,m,d,p;o=t,i=a,u=n,p=(r=e).getTarget(o.element),r.repositionTarget&&(c=wr(o.element),s=Fa(c),l=EI(p),f=nF(p),m=oF(o,r.snaps,f,s,l,u,i),d=VA(m,0,l),qi(p,d)),r.onDrag(o,p,u)}))},aF=function(t,e,n,o){e.each(ZA),n.snaps.each((function(e){UA(t,e)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)},uF=function(t){return function(e,n){var o=function(t){n.setStartData(rF(e,t))};return er(p([rr(Vo(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o)))}},cF=Object.freeze({__proto__:null,getData:function(t){return S.from(Ca(t.x,t.y))},getDelta:function(t,e){return Ca(e.left-t.left,e.top-t.top)}}),sF=function(t,e,n){return[rr(uo(),(function(o,r){var i,a,u,c,s;0===r.event.raw.button&&(r.stop(),u={drop:i=function(){return aF(o,S.some(c),t,e)},delayDrop:(a=_y(i,200)).schedule,forceDrop:i,move:function(n){a.cancel(),iF(o,t,e,cF,n)}},c=QA(o,t.blockerClass,(s=u,er([rr(uo(),s.forceDrop),rr(lo(),s.drop),rr(co(),(function(t,e){s.move(e.event)})),rr(so(),s.delayDrop)]))),n(o),qA(o,c))}))]},lF=p(eF,[yu("dragger",{handlers:uF(sF)})]),fF=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],S.some(Ca(e.clientX,e.clientY))):S.none()},getDelta:function(t,e){return Ca(e.left-t.left,e.top-t.top)}}),mF=function(t,e,o){var r=dn(S.none());return[rr(oo(),(function(i,a){a.stop();var u,c=function(){aF(i,r.get(),t,e),r.set(S.none())},s={drop:c,delayDrop:n,forceDrop:c,move:function(n){iF(i,t,e,fF,n)}},l=QA(i,t.blockerClass,(u=s,er([rr(oo(),u.forceDrop),rr(io(),u.drop),rr(ao(),u.drop),rr(ro(),(function(t,e){u.move(e.event)}))])));r.set(S.some(l)),o(i),qA(i,l)})),rr(ro(),(function(n,o){o.stop(),iF(n,t,e,fF,o.event)})),rr(io(),(function(n,o){o.stop(),aF(n,r.get(),t,e),r.set(S.none())})),rr(ao(),(function(n){aF(n,r.get(),t,e),r.set(S.none())}))]},dF=p(eF,[yu("dragger",{handlers:uF(mF)})]),pF=p(eF,[yu("dragger",{handlers:uF((function(t,e,n){return p(sF(t,e,n),mF(t,e,n))}))})]),gF=lc({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:lF,touch:dF,mouseOrTouch:pF}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:S.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=S.none(),e=S.none(),n=r({});return Ci({readState:n,reset:function(){t=S.none(),e=S.none()},update:function(e,n){return e.getData(n).bind((function(n){return o=e,r=n,i=t.map((function(t){return o.getDelta(t,r)})),t=S.some(r),i;var o,r,i}))},getStartData:function(){return e},setStartData:function(t){e=S.some(t)}})}}),apis:YA}),hF=function(t,e,n,o,r,i){return t.fold((function(){return gF.snap({sensor:NA(n-20,o-20),range:Ca(r,i),output:NA(S.some(n),S.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,a=t.element.dom.getBoundingClientRect();return gF.snap({sensor:NA(r,i),range:Ca(40,40),output:NA(S.some(n-a.width/2),S.some(o-a.height/2)),extra:{td:e}})}))},vF=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r,i,a=o.td;r=e.get(),i=a,r.exists((function(t){return Gn(t,i)}))||(e.set(S.some(a)),n(a))},mustSnap:!0}},bF=function(t){return gg(pg.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ac([gF.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),aw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},yF=function(t,e){var n=dn([]),o=dn([]),r=dn(!1),i=dn(S.none()),a=dn(S.none()),u=function(t){var n=Ha(t);return hF(f.getOpt(e),t,n.x,n.y,n.width,n.height)},c=function(t){var n=Ha(t);return hF(m.getOpt(e),t,n.right,n.bottom,n.width,n.height)},s=vF((function(){return $(n.get(),u)}),i,(function(e){a.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),l=vF((function(){return $(o.get(),c)}),a,(function(e){i.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=bF(s),m=bF(l),d=ga(f.asSpec()),p=ga(m.asSpec()),g=function(e,n,o,r){var i=o(n);gF.snapTo(e,i),function(e,n,o,r){var i=n.dom.getBoundingClientRect();na(e.element,"display");var a=Sr(gn.fromDom(t.getBody())).dom.innerHeight,u=o(i),c=r(i,a);(u||c)&&Yi(e.element,"display","none")}(e,n,(function(t){return t[r]<0}),(function(t,e){return t[r]>e}))},h=function(t){return g(d,t,u,"top")},v=function(t){return g(p,t,c,"bottom")};$n().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){r.get()||(al(e,d),al(e,p),r.set(!0)),i.set(S.some(t.start)),a.set(S.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),o.set(e.downOrRightCells),h(t.start),v(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(h),a.get().each(v)})),t.on("TableSelectionClear",(function(){r.get()&&(sl(d),sl(p),r.set(!1)),i.set(S.none()),a.set(S.none())})))};(J_=L_=L_||{})[J_.None=0]="None",J_[J_.Both=1]="Both",J_[J_.Vertical=2]="Vertical";var xF,wF,CF,kF=function(t,e,n){var o,r,i,a,u,c,s=gn.fromDom(t.getContainer()),l=(o=t,r=e,i=n,a=ya(s),u=Ta(s),(c={}).height=$E(a+r.top,xv(o),Cv(o)),i===L_.Both&&(c.width=$E(u+r.left,yv(o),wv(o))),c);_t(l,(function(t,e){return Yi(s,e,JE(t)),0})),t.fire("ResizeEditor")},SF=function(t,e,n){return e.delimiter||(e.delimiter="»"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ac([up.config({mode:"flow",selector:"div[role=button]"}),gv.config({disabled:n.isDisabled}),$v(),Yy.config({}),mp.config({}),dp("elementPathEvents",[fr((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return up.focusIn(o)})),t.on("NodeChange",(function(r){var i,a,u=function(e){for(var n=[],o=e.length;0<o--;){var r=e[o];if(1===r.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(r.parents);0<u.length?mp.set(o,(i=$(u||[],(function(e,o){return pg.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:ac([Wv(n.isDisabled),$v()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},Y(i.slice(1),(function(t,e){var n=t;return n.push(a),n.push(e),n}),[i[0]]))):mp.set(o,[])}))}))])]),components:[]}},OF=function(t,e){var n,o,r,i,a,u;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(a=function(){var n,o,r,i,a,u=[];return t.getParam("elementpath",!0,"boolean")&&u.push(SF(t,{},e)),t.hasPlugin("wordcount")&&u.push((n=t,o=e,i=function(t,e,n){return mp.set(t,[ma(o.translate(["{0} "+n,e[n]]))])},pg.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ac([Wv(o.isDisabled),$v(),Yy.config({}),mp.config({}),Jl.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),dp("wordcount-events",[pr((function(t){var e=Jl.getValue(t),n="words"===e.mode?"characters":"words";Jl.setValue(t,{mode:n,count:e.count}),i(t,e.count,n)})),fr((function(t){n.on("wordCountUpdate",(function(e){var n=Jl.getValue(t).mode;Jl.setValue(t,{mode:n,count:e.wordCount}),i(t,e.wordCount,n)}))}))])]),eventOrder:((r={})[_o()]=["disabling","alloy.base.behaviour","wordcount-events"],r)}))),t.getParam("branding",!0,"boolean")&&u.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(a=ev.translate(["Powered by {0}","Tiny"]))+'">'+a+"</a>"}}),0<u.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:u}]:[]}(),o=!(n=t).hasPlugin("autoresize"),(u=!1===(r=n.getParam("resize",o))?L_.None:"both"===r?L_.Both:L_.Vertical)!==L_.None&&a.push((i=u,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize"),"aria-hidden":"true"},innerHtml:vg("resize-handle",e.icons)},behaviours:ac([gF.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,n,o){kF(t,o,i)},blockerClass:"tox-blocker"})])})),a)}},DF=function(t){var e,o,r,i,a=t.inline,u=a?YE:HE,c=jv(t)?nE:_I,s=S.none(),l=$n(),f=l.browser.isIE()?["tox-platform-ie"]:[],d=l.deviceType.isTouch()?["tox-platform-touch"]:[],p=Mv(t),g=Vv(t),h=ev.isRtl()?{attributes:{dir:"rtl"}}:{},v={attributes:((e={})[Xc]=p?nu.BottomToTop:nu.TopToBottom,e)},b=function(){return s.bind(DE.getHeader)},y=function(){Yi(mt.element,"width",document.body.clientWidth+"px")},x=ga((o=Gn(Ui(),g)&&"grid"===Zi(g,"display"),r={dom:m({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(d)},h),behaviours:ac([el.config({useFixed:function(){return c.isDocked(b)}})])},i={dom:{styles:{width:document.body.clientWidth+"px"}},events:er([rr(zo(),y)])},Ht(r,o?i:{}))),w=function(){return ft.value(x)},C=gg({dom:{tag:"div",classes:["tox-anchorbar"]}}),k=function(){return s.bind((function(t){return DE.getThrobber(t)})).getOrDie("Could not find throbber element")},O=KD(x,t,(function(){return s.bind((function(t){return C.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),D=DE.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:O,onEscape:function(){t.focus()}}),T=Iv(t),_=DE.parts.toolbar(m({dom:{tag:"div",classes:["tox-toolbar"]},getSink:w,providers:O.shared.providers,onEscape:function(){t.focus()},type:T,lazyToolbar:function(){return s.bind((function(t){return DE.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return b().getOrDie("Could not find header element")}},v)),I=DE.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:O.shared.providers,onEscape:function(){t.focus()},type:T}),E=DE.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),A=DE.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),F=DE.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:O}),R=t.getParam("statusbar",!0,"boolean")&&!a?S.some(OF(t,O.shared.providers)):S.none(),P={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[E,A]},B=Dv(t),V=Sv(t),z=kv(t),j=DE.parts.header({dom:m({tag:"div",classes:["tox-editor-header"]},v),components:Z([z?[D]:[],B?[I]:V?[_]:[],Bv(t)?[]:[C.asSpec()]]),sticky:jv(t),editor:t,sharedBackstage:O.shared}),N=Z([p?[]:[j],a?[]:[P],p?[j]:[]]),H=Z([[{dom:{tag:"div",classes:["tox-editor-container"]},components:N}],a?[]:R.toArray(),[F]]),L=zv(t),J=m(m({role:"application"},ev.isRtl()?{dir:"rtl"}:{}),L?{"aria-hidden":"true"}:{}),$=ga(DE.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(p?["tox-tinymce--toolbar-bottom"]:[]).concat(d).concat(f),styles:m({visibility:"hidden"},L?{opacity:"0",border:"0"}:{}),attributes:J},components:H,behaviours:ac([$v(),gv.config({disableClass:"tox-tinymce--disabled"}),up.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));s=S.some($);t.shortcuts.add("alt+F9","focus menubar",(function(){DE.focusMenubar($)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){DE.focusToolbar($)})),t.addCommand("ToggleToolbarDrawer",(function(){DE.toggleToolbarDrawer($)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return DE.isToolbarDrawerToggled($)}));var W,G,X,Y,K,q,Q,tt,et,nt,ot,rt,it,at,ut,ct,st,lt=Jy($),mt=Jy(x);W=t,G=lt,X=mt,Y=function(t,e){U([G,X],(function(n){n.broadcastEvent(t,e)}))},K=function(t,e){U([G,X],(function(n){n.broadcastOn([t],e)}))},q=function(t){return K(Sl(),{target:t.target})},Q=Sy(gn.fromDom(document),"touchstart",q),tt=Sy(gn.fromDom(document),"touchmove",(function(t){return Y(Po(),t)})),et=Sy(gn.fromDom(document),"touchend",(function(t){return Y(Bo(),t)})),nt=Sy(gn.fromDom(document),"mousedown",q),ot=Sy(gn.fromDom(document),"mouseup",(function(t){0===t.raw.button&&K(Dl(),{target:t.target})})),rt=function(t){return K(Sl(),{target:gn.fromDom(t.target)})},it=function(t){0===t.button&&K(Dl(),{target:gn.fromDom(t.target)})},at=function(t){return Y(Vo(),Dy(t))},ut=function(t){K(Ol(),{}),Y(zo(),Dy(t))},ct=function(){return K(Ol(),{})},st=function(t){t.state&&K(Sl(),{target:gn.fromDom(W.getContainer())})},W.on("PostRender",(function(){W.on("click",rt),W.on("tap",rt),W.on("mouseup",it),W.on("ScrollWindow",at),W.on("ResizeWindow",ut),W.on("ResizeEditor",ct),W.on("AfterProgressState",st)})),W.on("remove",(function(){W.off("click",rt),W.off("tap",rt),W.off("mouseup",it),W.off("ScrollWindow",at),W.off("ResizeWindow",ut),W.off("ResizeEditor",ct),W.off("AfterProgressState",st),nt.unbind(),Q.unbind(),tt.unbind(),et.unbind(),ot.unbind()})),W.on("detach",(function(){dl(G),dl(X),G.destroy(),X.destroy()}));var dt=function(){var e,n=JE(UE(t)),o=JE(WE(e=t).getOr(bv(e)));return t.inline||(ea("div","width",o)&&Yi($.element,"width",o),ea("div","height",n)?Yi($.element,"height",n):Yi($.element,"height","200px")),n};return{mothership:lt,uiMothership:mt,backstage:O,renderUI:function(){var e,n,o,r,i,a,s,l;c.setup(t,O.shared,b),cA(t,O),IA(t,w,O),n=(e=t).ui.registry.getAll().sidebars,U(Dt(n),(function(t){var o=n[t],r=function(){return S.from(e.queryCommandValue("ToggleSidebar")).is(t)};e.ui.registry.addToggleButton(t,{icon:o.icon,tooltip:o.tooltip,onAction:function(n){e.execCommand("ToggleSidebar",!1,t),n.setActive(r())},onSetup:function(t){var n=function(){return t.setActive(r())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})),o=t,r=k,i=O.shared,a=dn(!1),s=dn(S.none()),l=function(t){t!==a.get()&&(bE(r(),t,i.providers),a.set(t),o.fire("AfterProgressState",{state:t}))},o.on("ProgressState",(function(t){var e;s.get().each(dg.clearTimeout),M(t.time)?(e=dg.setEditorTimeout(o,(function(){return l(t.state)}),t.time),s.set(S.some(e))):(l(t.state),s.set(S.none()))})),It(t.getParam("toolbar_groups",{},"object"),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var f,d=t.ui.registry.getAll(),p=d.buttons,g=d.menuItems,h=d.contextToolbars,v=d.sidebars,y=Ov(t),C={menuItems:g,menus:(f=t.getParam("menu"))?It(f,(function(t){return m(m({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:y.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:T===ih.floating,buttons:p,sidebar:v};xI(t,h,x,{backstage:O}),yF(t,x);var D=t.getElement(),_=dt(),I={mothership:lt,uiMothership:mt,outerContainer:$},E={targetNode:D,height:_};return u.render(t,I,C,O,E)},getUi:function(){return{channels:{broadcastAll:mt.broadcast,broadcastOn:mt.broadcastOn,register:n}}}}},TF=r([Le("lazySink"),Ke("dragBlockClass"),sn("getBounds",La),nn("useTabstopAt",l),nn("eventOrder",{}),$l("modalBehaviours",[up]),hu("onExecute"),bu("onEscape")]),_F={sketch:i},IF=r([Cf({name:"draghandle",overrides:function(t,e){return{behaviours:ac([gF.config({mode:"mouse",getTarget:function(t){return Ya(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),xf({schema:[Le("dom")],name:"title"}),xf({factory:_F,schema:[Le("dom")],name:"close"}),xf({factory:_F,schema:[Le("dom")],name:"body"}),Cf({factory:_F,schema:[Le("dom")],name:"footer"}),wf({factory:{sketch:function(t,e){return m(m({},t),{dom:e.dom,components:e.components})}},schema:[nn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),nn("components",[])],name:"blocker"})]),EF=Object.freeze({__proto__:null,block:function(t,e,n,o){Yr(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=ac([up.config({mode:"special",onTab:function(){return S.some(!0)},onShiftTab:function(){return S.some(!0)}}),bp.config({})]),a=o(r,i),u=r.getSystem().build(a);mp.append(r,ha(u)),u.hasConfigured(up)&&up.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return mp.remove(r,u)}))},unblock:function(t,e,n){Qr(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),AF=[sn("getRoot",S.none),gu("onBlock"),gu("onUnblock")],FF=cc({fields:AF,name:"blocking",apis:EF,state:Object.freeze({__proto__:null,init:function(){var t=oI();return Ci({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),RF=Yf({name:"ModalDialog",configFields:TF(),partFields:IF(),factory:function(t,e,n,o){var r,a=dn(S.none()),u=ii("modal-events"),c=m(m({},t.eventOrder),((r={})[jo()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){a.set(S.some(e));var n=t.lazySink(e).getOrDie(),r=o.blocker(),i=n.getSystem().build(m(m({},r),{components:r.components.concat([ha(e)]),behaviours:ac([bp.config({}),dp("dialog-blocker-events",[lr(mo(),(function(){up.focusIn(e)}))])])}));al(n,i),up.focusIn(e)},hide:function(t){a.set(S.none()),Or(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){sl(t)}))}))},getBody:function(e){return Pf(e,t,"body")},getFooter:function(e){return Pf(e,t,"footer")},setIdle:function(t){FF.unblock(t)},setBusy:function(t,e){FF.block(t,e)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Wl(t.modalBehaviours,[mp.config({}),up.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),FF.config({getRoot:a.get}),dp(u,[fr((function(e){var n,o,r,a,u,c;n=e.element,o=Pf(e,t,"title").element,r=qr(n,"id").fold((function(){var t=ii("dialog-label");return Yr(o,"id",t),t}),i),Yr(n,"aria-labelledby",r),a=e.element,u=Pf(e,t,"body").element,c=S.from(Kr(a,"id")).fold((function(){var t=ii("dialog-describe");return Yr(u,"id",t),t}),i),Yr(a,"aria-describedby",c)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),MF=me([$e("type"),$e("name")].concat(Bh)),PF=Ve,BF=[ye("name","name",Xt((function(){return ii("button-name")})),Be),Qe("icon"),un("align","end",["start","end"]),cn("primary",!1),cn("disabled",!1)],VF=p(BF,[$e("text")]),zF=p([Ue("type",["submit","cancel","custom"])],VF),jF=p([Ue("type",["menu"]),Qe("text"),Qe("tooltip"),Qe("icon"),Ye("items",MF)],BF),NF=Fe("type",{submit:zF,cancel:zF,custom:zF,menu:jF}),HF=[$e("type"),$e("text"),Ue("level",["info","warn","error","success"]),$e("icon"),nn("url","")],LF=me(HF),JF=[$e("type"),$e("text"),cn("disabled",!1),cn("primary",!1),ye("name","name",Xt((function(){return ii("button-name")})),Be),Qe("icon"),cn("borderless",!1)],$F=me(JF),UF=[$e("type"),$e("name"),$e("label"),cn("disabled",!1)],WF=me(UF),GF=Ve,XF=[$e("type"),$e("name")],YF=XF.concat([Qe("label")]),KF=YF.concat([nn("columns","auto")]),qF=me(KF),ZF=ke([$e("value"),$e("text"),$e("icon")]),QF=me(YF),tR=Be,eR=me(YF),nR=Be,oR=XF.concat([an("tag","textarea"),$e("scriptId"),$e("scriptUrl"),(xF=void 0,on("settings",xF,Ne))]),rR=XF.concat([an("tag","textarea"),We("init")]),iR=Oe((function(t){return Te("customeditor.old",fe(rR),t).orThunk((function(){return Te("customeditor.new",fe(oR),t)}))})),aR=Be,uR=me(YF),cR=de(Ce),sR=function(t){return[$e("type"),Je("columns",Pe),t]},lR=[$e("type"),$e("html"),un("presets","presentation",["presentation","document"])],fR=me(lR),mR=YF.concat([cn("sandboxed",!0)]),dR=me(mR),pR=Be,gR=YF.concat([Je("currentState",me([Le("blob"),$e("url")]))]),hR=me(gR),vR=YF.concat([Qe("inputMode"),Qe("placeholder"),cn("maximized",!1),cn("disabled",!1)]),bR=me(vR),yR=Be,xR=[$e("text"),$e("value")],wR=[$e("text"),Ye("items",(wF=function(){return CR},CF=Jt((function(){return wF()})),{extract:function(t,e,n){return CF().extract(t,e,n)},toString:function(){return CF().toString()}}))],CR=pe([me(xR),me(wR)]),kR=YF.concat([Ye("items",CR),cn("disabled",!1)]),SR=me(kR),OR=Be,DR=YF.concat([Xe("items",[$e("text"),$e("value")]),rn("size",1),cn("disabled",!1)]),TR=me(DR),_R=Be,IR=YF.concat([cn("constrain",!0),cn("disabled",!1)]),ER=me(IR),AR=me([$e("width"),$e("height")]),FR=[$e("type"),Ye("header",Be),Ye("cells",de(Be))],RR=me(FR),MR=YF.concat([Qe("placeholder"),cn("maximized",!1),cn("disabled",!1)]),PR=me(MR),BR=Be,VR=YF.concat([un("filetype","file",["image","media","file"]),nn("disabled",!1)]),zR=me(VR),jR=me([$e("value"),nn("meta",{})]),NR=function(t){return ye("items","items",Wt(),de(Oe((function(e){return Te("Checking item of "+t,HR,e).fold((function(t){return ft.error(Ee(t))}),(function(t){return ft.value(t)}))}))))},HR=Se((function(){return Ae("type",{alertbanner:LF,bar:me((e=NR("bar"),[$e("type"),e])),button:$F,checkbox:WF,colorinput:QF,colorpicker:eR,dropzone:uR,grid:me(sR(NR("grid"))),iframe:dR,input:bR,listbox:SR,selectbox:TR,sizeinput:ER,textarea:PR,urlinput:zR,customeditor:iR,htmlpanel:fR,imagetools:hR,collection:qF,label:me((t=NR("label"),[$e("type"),$e("label"),t])),table:RR,panel:JR});var t,e})),LR=[$e("type"),nn("classes",[]),Ye("items",HR)],JR=me(LR),$R=[ye("name","name",Xt((function(){return ii("tab-name")})),Be),$e("title"),Ye("items",HR)],UR=[$e("type"),Xe("tabs",$R)],WR=me(UR),GR=VF,XR=NF,YR=me([$e("title"),Je("body",Ae("type",{panel:JR,tabpanel:WR})),an("size","normal"),Ye("buttons",XR),nn("initialData",{}),sn("onAction",n),sn("onChange",n),sn("onSubmit",n),sn("onClose",n),sn("onCancel",n),nn("onTabChange",n)]),KR=me(p([Ue("type",["cancel","custom"])],GR)),qR=me([$e("title"),$e("url"),Ze("height"),Ze("width"),qe("buttons",de(KR)),sn("onAction",n),sn("onCancel",n),sn("onClose",n),sn("onMessage",n)]),ZR=function t(e){return _(e)?[e].concat(Q(Mt(e),t)):I(e)?Q(e,t):[]},QR=function(t){return T(t.type)&&T(t.name)},tM={checkbox:GF,colorinput:tR,colorpicker:nR,dropzone:cR,input:yR,iframe:pR,sizeinput:AR,selectbox:_R,listbox:OR,size:AR,textarea:BR,urlinput:jR,customeditor:aR,collection:ZF,togglemenuitem:PF},eM=function(t){var e=G(ZR(t),QR),n=Q(e,(function(t){return e=t,S.from(tM[e.type]).fold((function(){return[]}),(function(e){return[Je(t.name,e)]}));var e}));return me(n)},nM=function(t){return{internalDialog:_e(Te("dialog",YR,t)),dataValidator:eM(t),initialData:t.initialData}},oM={open:function(t,e){var n=nM(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(_e(Te("dialog",qR,e)))},redial:nM},rM=function(t){var e=[],n={};return _t(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),0<e.length?ft.error(e):ft.value(n)},iM=Xf({name:"TabButton",configFields:[nn("uid",void 0),Le("value"),ye("dom","dom",Yt((function(){return{attributes:{role:"tab",id:ii("aria"),"aria-selected":"false"}}})),Re()),Ke("action"),nn("domModification",{}),$l("tabButtonBehaviours",[bp,up,Jl]),Le("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Fp(t.action),behaviours:Wl(t.tabButtonBehaviours,[bp.config({}),up.config({mode:"execution",useSpace:!0,useEnter:!0}),Jl.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),aM=r([Le("tabs"),Le("dom"),nn("clickToDismiss",!1),$l("tabbarBehaviours",[mm,up]),du(["tabClass","selectedClass"])]),uM=kf({factory:iM,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){mm.dehighlight(t,e),Ko(t,Wo(),{tabbar:t,button:e})},o=function(t,e){mm.highlight(t,e),Ko(t,Uo(),{tabbar:t,button:e})};return{action:function(r){var i=r.getSystem().getByUid(t.uid).getOrDie(),a=mm.isHighlighted(i,r);(a&&t.clickToDismiss?e:a?n:o)(i,r)},domModification:{classes:[t.markers.tabClass]}}}}),cM=r([uM]),sM=Yf({name:"Tabbar",configFields:aM(),partFields:cM(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Wl(t.tabbarBehaviours,[mm.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Yr(e.element,"aria-selected","true")},onDehighlight:function(t,e){Yr(e.element,"aria-selected","false")}}),up.config({mode:"flow",getInitial:function(t){return mm.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),lM=Xf({name:"Tabview",configFields:[$l("tabviewBehaviours",[mp])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:Wl(t.tabviewBehaviours,[mp.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),fM=r([nn("selectFirst",!0),gu("onChangeTab"),gu("onDismissTab"),nn("tabs",[]),$l("tabSectionBehaviours",[])]),mM=xf({factory:sM,schema:[Le("dom"),Ge("markers",[Le("tabClass"),Le("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),dM=xf({factory:lM,name:"tabview"}),pM=r([mM,dM]),gM=Yf({name:"TabSection",configFields:fM(),partFields:pM(),factory:function(t,e,n,o){var r=function(e,n){Mf(e,t,"tabbar").each((function(t){n(t).each(qo)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:Ul(t.tabSectionBehaviours),events:er(Z([t.selectFirst?[fr((function(t,e){r(t,mm.getFirst)}))]:[],[rr(Uo(),(function(e,n){var o,r,i=n.event.button;o=i,r=Jl.getValue(o),Mf(o,t,"tabview").each((function(e){K(t.tabs,(function(t){return t.value===r})).each((function(n){var r=n.view();qr(o.element,"id").each((function(t){Yr(e.element,"aria-labelledby",t)})),mp.set(e,r),t.onChangeTab(e,o,r)}))}))})),rr(Wo(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return Mf(e,t,"tabview").map((function(t){return mp.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){var n=mm.getCandidates(t);return K(n,(function(t){return Jl.getValue(t)===e})).filter((function(e){return!mm.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),hM=function(t,e){Yi(t,"height",e+"px"),$n().browser.isIE()?na(t,"flex-basis"):Yi(t,"flex-basis",e+"px")},vM=function(t,e,n){Ya(t,'[role="dialog"]').each((function(t){Ka(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return Yi(e,"height","0"),Yi(e,"flex-basis","0"),Math.min(n,(i=e,a=o,u=kr(r=t).dom,c=Ya(r,".tox-dialog-wrap").getOr(r),s="fixed"===Zi(c,"position")?Math.max(u.clientHeight,window.innerHeight):Math.max(u.offsetHeight,u.scrollHeight),l=ya(i),f=i.dom.offsetLeft>=a.dom.offsetLeft+Ta(a)?Math.max(ya(a),l):l,m=parseInt(Zi(r,"margin-top"),10)||0,d=parseInt(Zi(r,"margin-bottom"),10)||0,s-(ya(r)+m+d-f)));var r,i,a,u,c,s,l,f,m,d})).each((function(t){hM(e,t)}))}))}))},bM=function(t){return Ka(t,'[role="tabpanel"]')},yM=function(t){var e;return{smartTabHeight:(e=dn(S.none()),{extraEvents:[fr((function(n){var o=n.element;bM(o).each((function(r){var i;Yi(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((function(n){var o,i,a,u=(i=r,a=n,$(o=t,(function(t,e){mp.set(a,o[e].view());var n=i.dom.getBoundingClientRect();return mp.set(a,[]),n.height}))),c=it(ot(u,(function(t,e){return e<t?-1:t<e?1:0})));e.set(c)})),vM(o,r,e),na(r,"visibility"),i=n,it(t).each((function(t){return gM.showTab(i,t.value)})),dg.requestAnimationFrame((function(){vM(o,r,e)}))}))})),rr(zo(),(function(t){var n=t.element;bM(n).each((function(t){vM(n,t,e)}))})),rr(sx,(function(t,n){var o=t.element;bM(o).each((function(t){var n=gc(Rr(t));Yi(t,"visibility","hidden");var r=ta(t,"height").map((function(t){return parseInt(t,10)}));na(t,"height"),na(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall((function(t){return t<i}))?(e.set(S.from(i)),vM(o,t,e)):r.each((function(e){hM(t,e)})),na(t,"visibility"),n.each(pc)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},xM="send-data-to-section",wM="send-data-to-view",CM=ii("update-dialog"),kM=ii("update-title"),SM=ii("update-body"),OM=ii("update-footer"),DM=ii("body-send-message"),TM=function(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:m(m({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:ac([sk(0),a_.config({channel:SM,updateState:function(t,e){return S.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(i=t.body,a=n,c=dn({}),s=function(t){var e=Jl.getValue(t),n=rM(e).getOr({}),o=c.get(),r=Ht(o,n);c.set(r)},l=function(t){var e=c.get();Jl.setValue(t,e)},f=dn(null),m=$(i.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:a.shared.providers.translate(t.title)},view:function(){return[QC.sketch((function(e){return{dom:{tag:"div",classes:["tox-form"]},components:$(t.items,(function(t){return lD(e,t,a)})),formBehaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(_k)}),dp("TabView.form.events",[fr(l),mr(s)]),mc.config({channels:Qt([{key:xM,value:{onReceive:s}},{key:wM,value:{onReceive:l}}])})])}}))]}}})),d=yM(m).smartTabHeight,gM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Jl.getValue(e);Ko(t,cx,{name:o,oldName:f.get()}),f.set(o)},tabs:m,components:[gM.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[sM.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ac([Yy.config({})])}),gM.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:d.selectFirst,tabSectionBehaviours:ac([dp("tabpanel",d.extraEvents),up.config({mode:"acyclic"}),em.config({find:function(t){return it(gM.getViewItems(t))}}),Jl.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([xM],{}),c.get()},setValue:function(t,e){c.set(e),t.getSystem().broadcastOn([wM],{})}}})])}))];default:return[(e=t.body,o=n,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=gg(QC.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:$(e.items,(function(e){return lD(t,e,o)}))}})))).asSpec()]}],behaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(_k)}),ck(r),vk(r,{postprocess:function(t){return rM(t).fold((function(t){return console.error(t),{}}),(function(t){return t}))}})])})]}var e,o,r,i,a,c,s,l,f,m,d},initialData:t})])}},_M=nb.deviceType.isTouch(),IM=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},EM=function(t,e){return RF.parts.close(pg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:ac([Yy.config({})])}))},AM=function(){return RF.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},FM=function(t,e){return RF.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:vE("<p>"+e.translate(t)+"</p>")}]}]})},RM=function(t){return RF.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},MM=function(t,e){return[Ly.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ly.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},PM=function(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return RF.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),S.some(!0)},useTabstopAt:function(t){return!_k(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:m({position:"relative"},t.extraStyles)},components:p([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:vE('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:_M?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:ac(p([bp.config({}),dp("dialog-events",t.dialogEvents.concat([lr(mo(),(function(t,e){up.focusIn(t)}))])),dp("scroll-lock",[fr((function(){Vi(Ui(),i)})),mr((function(){ji(Ui(),i)}))])],t.extraBehaviours)),eventOrder:m(((e={})[_o()]=["dialog-events"],e[jo()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[No()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},BM=function(t){return pg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:vg("close",t.icons)}}],action:function(t){Yo(t,ox)}})},VM=function(t,e,n){var o=function(t){return[ma(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:m({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:ac([a_.config({channel:kM,renderComponents:o})])}},zM=function(){return{dom:vE('<div class="tox-dialog__draghandle"></div>')}},jM=function(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=RF.parts.title(VM(n,S.none(),o)),i=RF.parts.draghandle(zM()),a=RF.parts.close(BM(o)),u=[r].concat(n.draggable?[i]:[]).concat([a]),Ly.sketch({dom:vE('<div class="tox-dialog__header"></div>'),components:u});var n,o,r,i,a,u},NM=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:vE('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},HM=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){RF.setBusy(t(),(function(t,o){return NM(n.message,o,e)}))},onUnblock:function(){RF.setIdle(t())}}},LM=function(t,e,n,o){var r;return ga(PM(m(m({},t),{lazySink:o.shared.getSink,extraBehaviours:p([a_.config({channel:CM,updateState:function(t,e){return S.some(e)},initialData:e}),xk({})],t.extraBehaviours),onEscape:function(t){Yo(t,ox)},dialogEvents:n,eventOrder:((r={})[To()]=[a_.name(),mc.name()],r[jo()]=["scroll-lock",a_.name(),"messages","dialog-events","alloy.base.behaviour"],r[No()]=["alloy.base.behaviour","dialog-events","messages",a_.name(),"scroll-lock"],r)})))},JM=function(t){return $(t,(function(t){return"menu"===t.type?(n=$((e=t).items,(function(t){var e=dn(!1);return m(m({},t),{storage:e})})),m(m({},e),{items:n})):t;var e,n}))},$M=function(t){return Y(t,(function(t,e){return"menu"!==e.type?t:Y(e.items,(function(t,e){return t[e.name]=e.storage,t}),t)}),{})},UM=function(t,e){return[cr(mo(),Tk),t(nx,(function(t,n){e.onClose(),n.onClose()})),t(ox,(function(t,e,n,o){e.onCancel(t),Yo(o,nx)})),rr(ux,(function(t,n){return e.onUnblock()})),rr(ax,(function(t,n){return e.onBlock(n.event)}))]},WM=function(t,e){var n=function(e,n){return rr(e,(function(e,r){o(e,(function(o,i){n(t(),o,r.event,e)}))}))},o=function(t,e){a_.getState(t).get().each((function(n){e(n,t)}))};return p(UM(n,e),[n(rx,(function(t,e,n){e.onAction(t,{name:n.name})}))])},GM=function(t,e,n){var o=function(e,n){return rr(e,(function(e,o){r(e,(function(r,i){n(t(),r,o.event,e)}))}))},r=function(t,e){a_.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return p(UM(o,e),[o(ix,(function(t,e){return e.onSubmit(t)})),o(ex,(function(t,e,n){e.onChange(t,{name:n.name})})),o(rx,(function(t,e,o,r){var i=function(){return up.focusIn(r)},a=function(t){return Zr(t,"disabled")||qr(t,"aria-disabled").exists((function(t){return"true"===t}))},u=Rr(r.element),c=gc(u);e.onAction(t,{name:o.name,value:o.value}),gc(u).fold(i,(function(t){a(t)||c.exists((function(e){return Yn(t,e)&&a(e)}))?i():n().toOptional().filter((function(e){return!Yn(e.element,t)})).each(i)}))})),o(cx,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),mr((function(e){var n=t();Jl.setValue(e,n.getData())}))])},XM=function(t,e){var n=e.map((function(t){return t.footerButtons})).getOr([]),o=W(n,(function(t){return"start"===t.align})),r=function(t,e){return Ly.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:$(e,(function(t){return t.memento.asSpec()}))})};return[r("start",o.pass),r("end",o.fail)]},YM=function(t,e){return{dom:vE('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ac([a_.config({channel:OM,initialData:t,updateState:function(t,n){var o=$(n.buttons,(function(t){var n,o,r=gg((o=e,ZS(n=t,n.type,o)));return{name:t.name,align:t.align,memento:r}}));return S.some({lookupByName:function(t,e){return n=t,r=e,K(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(n)}));var n,r},footerButtons:o})},renderComponents:XM})])}},KM=YM,qM=function(t,e){return RF.parts.footer(YM(t,e))},ZM=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=em.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return QC.getField(n,e).fold((function(){var o=t.getFooter();return a_.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return S.some(t)}))}return S.none()},QM=function(t,e,n){var o=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=Jl.getValue(o),i=It(n,(function(t){return t.get()}));return m(m({},r),i)},setData:function(e){o((function(o){var i,a,u=r.getData(),c=m(m({},u),e),s=(i=c,a=t.getRoot(),a_.getState(a).get().map((function(t){return _e(Te("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper();Jl.setValue(l,s),_t(n,(function(t,e){Bt(c,e)&&t.set(c[e])}))}))},disable:function(e){ZM(t,e).each(gv.disable)},enable:function(e){ZM(t,e).each(gv.enable)},focus:function(e){ZM(t,e).each(bp.focus)},block:function(t){if(!T(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){Ko(e,ax,{message:t})}))},unblock:function(){o((function(t){Yo(t,ux)}))},showTab:function(e){o((function(n){var o=t.getBody();a_.getState(o).get().exists((function(t){return t.isTabPanel()}))&&em.getCurrent(o).each((function(t){gM.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([CM],o),n.getSystem().broadcastOn([kM],o.internalDialog),n.getSystem().broadcastOn([SM],o.internalDialog),n.getSystem().broadcastOn([OM],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){Yo(t,nx)}))}};return r},tP=function(t,e,n){var o,r,i,a=jM(t.internalDialog.title,n),u=(o={body:t.internalDialog.body},r=n,i=TM(o,S.none(),r,!1),RF.parts.body(i)),c=JM(t.internalDialog.buttons),s=$M(c),l=qM({buttons:c},n),f=GM((function(){return g}),HM((function(){return p}),n.shared.providers,e),n.shared.getSink),m=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),d={header:a,body:u,footer:S.some(l),extraClasses:m,extraBehaviours:[],extraStyles:{}},p=LM(d,t,f,n),g=QM({getRoot:function(){return p},getBody:function(){return RF.getBody(p)},getFooter:function(){return RF.getFooter(p)},getFormWrapper:function(){var t=RF.getBody(p);return em.getCurrent(t).getOr(t)}},e.redial,s);return{dialog:p,instanceApi:g}},eP=function(t,e,n,o){var r,i,a,u,c,s,l,f,m,d=ii("dialog-label"),p=ii("dialog-content"),g=gg((a={title:t.internalDialog.title,draggable:!0},u=d,c=n.shared.providers,Ly.sketch({dom:vE('<div class="tox-dialog__header"></div>'),components:[VM(a,S.some(u),c),zM(),BM(c)],containerBehaviours:ac([gF.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return qa(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=gg((s={body:t.internalDialog.body},l=p,f=n,m=o,TM(s,S.some(l),f,m))),v=JM(t.internalDialog.buttons),b=$M(v),y=gg(KM({buttons:v},n)),x=GM((function(){return C}),{onBlock:function(t){FF.block(w,(function(e,o){return NM(t.message,o,n.shared.providers)}))},onUnblock:function(){FF.unblock(w)},onClose:function(){return e.closeWindow()}},n.shared.getSink),w=ga({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((r={role:"dialog"})["aria-labelledby"]=d,r["aria-describedby"]=""+p,r)},eventOrder:((i={})[To()]=[a_.name(),mc.name()],i[_o()]=["execute-on-form"],i[jo()]=["reflecting","execute-on-form"],i),behaviours:ac([up.config({mode:"cyclic",onEscape:function(t){return Yo(t,nx),S.some(!0)},useTabstopAt:function(t){return!_k(t)&&("button"!==gr(t)||"disabled"!==Kr(t,"disabled"))}}),a_.config({channel:CM,updateState:function(t,e){return S.some(e)},initialData:t}),bp.config({}),dp("execute-on-form",x.concat([lr(mo(),(function(t,e){up.focusIn(t)}))])),FF.config({getRoot:function(){return S.some(w)}}),mp.config({}),xk({})]),components:[g.asSpec(),h.asSpec(),y.asSpec()]}),C=QM({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return em.getCurrent(t).getOr(t)}},e.redial,b);return{dialog:w,instanceApi:C}},nP=tinymce.util.Tools.resolve("tinymce.util.URI"),oP=["insertContent","setContent","execCommand","close","block","unblock"],rP=function(t){return _(t)&&-1!==oP.indexOf(t.mceAction)},iP=function(t,e,n,o){var r,i,a,c,s=jM(t.title,o),l=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Ok({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ac([Yy.config({}),bp.config({})])})]}],behaviours:ac([up.config({mode:"acyclic",useTabstopAt:u(_k)})])},RF.parts.body(i)),f=t.buttons.bind((function(t){return 0===t.length?S.none():S.some(qM({buttons:t},o))})),d=WM((function(){return w}),HM((function(){return x}),o.shared.providers,e)),p=m(m({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),g=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new nP(t.url,{base_uri:new nP(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=dn(S.none()),y=[dp("messages",[fr((function(){var e=Sy(gn.fromDom(window),"message",(function(e){var o,r;h.isSameOrigin(new nP(e.raw.origin))&&(o=e.raw.data,rP(o)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!E(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!rP(r=o)&&_(r)&&Bt(r,"mceAction")&&t.onMessage(w,o))}));b.set(S.some(e))})),mr((function(){b.get().each((function(t){return t.unbind()}))}))]),mc.config({channels:((r={})[DM]={onReceive:function(t,e){Ka(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},r)})],x=LM({header:s,body:l,footer:f,extraClasses:g,extraBehaviours:y,extraStyles:p},t,d,o),w=(c=function(t){a.getSystem().isConnected()&&t(a)},{block:function(t){if(!T(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((function(e){Ko(e,ax,{message:t})}))},unblock:function(){c((function(t){Yo(t,ux)}))},close:function(){c((function(t){Yo(t,nx)}))},sendMessage:function(t){c((function(e){e.getSystem().broadcastOn([DM],t)}))}});return{dialog:a=x,instanceApi:w}},aP=function(t){var e,n,o,r,i=t.backstage,a=t.editor,u=jv(a),c=(n=(e=t).backstage.shared,{open:function(t,o){var r=function(){RF.hide(c),o()},i=gg(ZS({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:S.none()},"cancel",e.backstage)),a=AM(),u=EM(r,n.providers),c=ga(PM({lazySink:function(){return n.getSink()},header:IM(a,u),body:FM(t,n.providers),footer:S.some(RM(MM([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,r)],eventOrder:{}}));RF.show(c);var s=i.get(c);bp.focus(s)}}),s=(r=(o=t).backstage.shared,{open:function(t,e){var n=function(t){RF.hide(s),e(t)},i=gg(ZS({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:S.none()},"submit",o.backstage)),a=ZS({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:S.none()},"cancel",o.backstage),u=AM(),c=EM((function(){return n(!1)}),r.providers),s=ga(PM({lazySink:function(){return r.getSink()},header:IM(u,c),body:FM(t,r.providers),footer:S.some(RM(MM([],[a,i.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[rr(ox,(function(){return n(!1)})),rr(ix,(function(){return n(!0)}))],eventOrder:{}}));RF.show(s);var l=i.get(s);bp.focus(l)}}),l=function(t,e){return oM.openUrl((function(t){var n=iP(t,{closeWindow:function(){RF.hide(n.dialog),e(n.instanceApi)}},a,i);return RF.show(n.dialog),n.instanceApi}),t)},f=function(t,e){return oM.open((function(t,n,o){var r=n,a=tP({dataValidator:o,initialData:r,internalDialog:t},{redial:oM.redial,closeWindow:function(){RF.hide(a.dialog),e(a.instanceApi)}},i);return RF.show(a.dialog),a.instanceApi.setData(r),a.instanceApi}),t)},d=function(t,e,n,o){return oM.open((function(t,r,c){var s,l,f,d=_e(Te("data",c,r)),g=(s=dn(S.none()),{clear:function(){return s.set(S.none())},set:function(t){return s.set(S.some(t))},isSet:function(){return s.get().isSome()},on:function(t){return s.get().each(t)}}),h=i.shared.header.isPositionedAtTop(),v=function(){return g.on((function(t){eg.reposition(t),XI.refresh(t)}))},b=eP({dataValidator:c,initialData:d,internalDialog:t},{redial:oM.redial,closeWindow:function(){g.on(eg.hide),a.off("ResizeEditor",v),g.clear(),n(b.instanceApi)}},i,o),y=ga(eg.sketch(m(m({lazySink:i.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},h?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:ac(p([dp("window-manager-inline-events",[rr(Ho(),(function(t,e){Yo(b.dialog,ox)}))])],(l=a,f=h,u&&f?[]:[XI.config({contextual:{lazyContext:function(){return S.some(Na(gn.fromDom(l.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]))),isExtraPart:function(t,e){return Ty(n=e,".tox-alert-dialog")||Ty(n,".tox-confirm-dialog");var n}})));return g.set(y),eg.showWithin(y,e,ha(b.dialog),S.some(Ui())),u&&h||(XI.refresh(y),a.on("ResizeEditor",v)),b.instanceApi.setData(d),up.focusIn(b.dialog),b.instanceApi}),t)};return{open:function(t,e,n){return void 0!==e&&"toolbar"===e.inline?d(t,i.shared.anchors.inlineDialog(),n,e.ariaAttrs):void 0!==e&&"cursor"===e.inline?d(t,i.shared.anchors.cursor(),n,e.ariaAttrs):f(t,n)},openUrl:function(t,e){return l(t,e)},alert:function(t,e){c.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){s.open(t,(function(t){e(t)}))}}};f.add("silver",(function(t){var e=DF(t),n=e.uiMothership,o=e.backstage,i=e.renderUI,a=e.getUi;Cy(t,o.shared);var u=aP({editor:t,backstage:o});return{renderUI:i,getWindowManagerImpl:r(u),getNotificationManagerImpl:function(){return xg(0,{backstage:o},n)},ui:a()}}))}()}).call(this,n("c8ba"))},"7df4":function(t,e,n){},"831c":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var o=n("b775");function r(){return Object(o["a"])({url:"/approval-page",method:"get"})}function i(t){return Object(o["a"])({url:"/approval-page",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/approval-page",method:"delete",data:t})}},"84bb":function(t,e,n){"use strict";n("a076")},"86ec":function(t,e,n){"use strict";n("32af")},9367:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/teaching-organization/"+t,method:"get"})}},9695:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/total/"+t,method:"get"})}function i(t,e){return Object(o["a"])({url:"declaration-form/status-reviewer/"+t,method:"post",data:e})}},"96d7":function(t,e,n){},9944:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/condition-guarantee/"+t,method:"get"})}},"9b97":function(t,e,n){},"9eb4":function(t,e,n){"use strict";n("4ce3")},a076:function(t,e,n){},a7f8:function(t,e,n){"use strict";n("e6e5")},a8a8:function(t,e,n){},c551:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s}));var o=n("b775");function r(t){return Object(o["a"])({url:"/data-maintenance/add-college",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/data-maintenance/add-organization",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/data-maintenance/add-import-organization",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/data-maintenance/add-import-majors",method:"post",data:t})}function c(){return Object(o["a"])({url:"/data-maintenance/get-organizations",method:"get"})}function s(){return Object(o["a"])({url:"/data-maintenance/get-majors",method:"get"})}},c710:function(t,e,n){"use strict";n("6160")},d4b4:function(t,e,n){"use strict";n("ebe0")},d5a5:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{attrs:{id:t.tinymceId}})])},r=[],i=(n("b680"),n("7c27"),n("22da"),{props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,required:!0}},data:function(){return{tinymceId:this.id,tinymceFlag:1,hasChange:!1,hasInit:!1}},mounted:function(){var t=this;tinymce.init({selector:"#".concat(this.tinymceId),language:"zh_CN",menubar:"bar1 bar2",menu:{bar1:{title:"菜单栏",items:"copy paste"}},toolbar:"undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright | fontsizeselect | fontselect ",font_formats:"宋体=宋体;仿宋=仿宋;黑体=黑体'",init_instance_callback:function(e){e.on("input",(function(e){t.$emit("input",e.target.innerHTML)})),e.on("change",(function(e){t.$emit("input",e.level.content)}))},setup:function(e){e.on("init",(function(n){e.setContent(t.value)}))},height:600})},created:function(){},watch:{value:function(t,e){var n=this;this.hasInit&&this.$nextTick((function(){return window.tinymce.get(n.tinymceId).setContent(t)}))}},methods:{setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.status&&t.destroy(),t&&t.destroy(),console.log("aa")}}}),a=i,u=(n("a7f8"),n("2877")),c=Object(u["a"])(a,o,r,!1,null,null,null);e["a"]=c.exports},dc08:function(t,e,n){"use strict";n("0e8d")},e5ac:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"/declaration-form/rules-and-regulations/"+t,method:"get"})}},e6e5:function(t,e,n){},e8c0:function(t,e,n){"use strict";n("5793")},ebe0:function(t,e,n){},fc0e:function(t,e,n){"use strict";n("7df4")},fc60:function(t,e,n){"use strict";n("9b97")},fdc2:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var o=n("b775");function r(t,e){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"post",data:e})}function i(t){return Object(o["a"])({url:"/declaration-form/opinion-feedback/"+t,method:"get"})}},fe41:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b775");function r(t){return Object(o["a"])({url:"declaration-form/course-material/"+t,method:"get"})}},ff84:function(t,e,n){"use strict";n("1488")}}]);